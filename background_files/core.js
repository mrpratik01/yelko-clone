"use strict";(self.webpackChunkskype4life=self.webpackChunkskype4life||[]).push([[321],{96074:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forNavigation=t.BaseNavigationWrapper=t.BaseNavigationView=void 0;const n=i(96486),o=i(16778),s=i(88837),a=i(62033),r=i(58187),l=i(46096),c=i(36237),d=i(4735),u=i(61253),g=i(69203),h=i(24576),p=i(53374),m=i(77381),S="StatusBar:";class C extends m.default{constructor(e){super(e),this._onBackButtonPressed=()=>{const e=p.default.newCauseId(),t=this._goBack(e);return c.log(l.LogTraceArea.HardwareBackButton,"goBack: "+t+" causeId: "+e),t},this._statusBarKey=n.uniqueId(S)}componentDidMount(){super.componentDidMount(),a.default.subscribe(this._onBackButtonPressed)}componentWillUnmount(){super.componentWillUnmount(),this._removeStatusBarStyle(),a.default.unsubscribe(this._onBackButtonPressed)}setVisible(e){var t;null===(t=this._getContext().componentVisibilityStatus)||void 0===t||t.updateVisibility(e)}_updateStatusBarStyle(e){this._getContext().isPresentedInDesktopSubview||g.default.addOrUpdateStyle(this._statusBarKey,e)}_removeStatusBarStyle(){this._getContext().isPresentedInDesktopSubview||g.default.removeStyle(this._statusBarKey)}_componentId(){return"BaseNavigationView"}_goBack(e){const t=this._getContext();return!!t.goBack&&t.goBack(e)}}t.BaseNavigationView=C;class f extends h.default{constructor(e){super(e),this._onBackButtonPressed=()=>{const e=p.default.newCauseId(),t=this._goBack(e);return c.log(l.LogTraceArea.HardwareBackButton,"goBack: "+t+" causeId: "+e),t},this._statusBarKey=n.uniqueId(S)}componentDidMount(){super.componentDidMount(),a.default.subscribe(this._onBackButtonPressed)}componentWillUnmount(){super.componentWillUnmount(),this._removeStatusBarStyle(),a.default.unsubscribe(this._onBackButtonPressed)}setVisible(e){const t=this._getContext();t.componentVisibilityStatus&&t.componentVisibilityStatus.updateVisibility(e)}_updateStatusBarStyle(e){this._getContext().isPresentedInDesktopSubview||g.default.addOrUpdateStyle(this._statusBarKey,e)}_removeStatusBarStyle(){this._getContext().isPresentedInDesktopSubview||g.default.removeStyle(this._statusBarKey)}_componentId(){return"BaseNavigationComponent"}_goBack(e){const t=this._getContext();return!!t.goBack&&t.goBack(e)}}t.default=f;class y extends s.ComponentBase{constructor(e,t){super(e),this._goBack=e=>!!(this._context.isPresentedByMobileStackNavigator||this._context.isPresentedInDesktopSubview||this._context.isPresentedInDesktopContentPanel)&&(c.log(l.LogTraceArea.Navigation,"BaseNavigationWrapper._goBack causeId: "+e),d.default.navigateBack(e,this._context)),this._customGoBack=e=>!(!this.props.goBack||!this.props.goBack(e))||this._goBack(e),this._context=this._createContext(e,t)}_createContext(e,t){var i,n;const o=Object.assign({},t);return e.isPresentedInDesktopSubview&&(o.isPresentedInDesktopSubview=!0),e.isPresentedInDesktopLeftNav&&(o.isPresentedInDesktopSubview=!0,o.isPresentedInDesktopLeftNav=!0),e.isPresentedInDesktopRightNav&&(o.isPresentedInDesktopSubview=!0,o.isPresentedInDesktopRightNav=!0),e.isPresentedInGenericDesktopModal&&(o.isPresentedInDesktopSubview=!0,o.isPresentedInGenericDesktopModal=!0),e.isPresentedInManagedModal&&(o.isPresentedInDesktopSubview=!1!==e.isPresentedInDesktopSubview,o.isPresentedInManagedModal=!0),e.isPresentedInSplitView&&(o.isPresentedInSplitView=!0),e.isPresentedInDesktopContentPanel&&(o.isPresentedInDesktopContentPanel=!0),e.isPresentedByMobileStackNavigator&&(o.componentVisibilityStatus||(o.componentVisibilityStatus=null!==(n=null===(i=this._context)||void 0===i?void 0:i.componentVisibilityStatus)&&void 0!==n?n:new r.ComponentVisibilityStatus),o.isPresentedByMobileStackNavigator=!0),e.goBack?o.goBack=this._customGoBack:o.goBack=this._goBack,o}render(){const e=this._createContext(this.props,this.context);return this._context&&(0,u.default)(e,this._context)||(this._context=e),o.createElement(r.CommonContext.Provider,{value:this._context},this.props.children)}}t.BaseNavigationWrapper=y,y.contextType=r.CommonContext;t.forNavigation=e=>t=>o.createElement(e,Object.assign({},t.route.params))},67930:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseNavigationViewPresentedInModal=void 0;const n=i(96074);class o extends n.default{constructor(e){super(e)}componentDidMount(){var e,t;super.componentDidMount(),null===(t=(e=this.props).onAccessibilityTitleChange)||void 0===t||t.call(e,this._getHeaderText(this.state))}}t.default=o;class s extends n.BaseNavigationView{constructor(e){super(e)}componentDidMount(){var e,t;super.componentDidMount(),null===(t=(e=this.props.route.params).onAccessibilityTitleChange)||void 0===t||t.call(e,this._getHeaderText(this.state))}}t.BaseNavigationViewPresentedInModal=s},98293:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(31844),s=i(38933),a=i(98356),r=i(16778),l=i(51077),c=i(98278),d=i(39549),u=i(52262),g=i(76679),h=i(46096),p=i(36237),m=i(15877),S=i(32638),C=i(26385),f=i(89808),y=i(4735),_=i(30124),v=i(97223),b=i(29130),T=i(51070),P=i(81115),A=i(33714),k=i(81760),I=i(11828),w=i(80837),N=i(24576),M=i(12770),E=i(98762),x=i(53374),L=i(15069),R=(0,m.lazyProperties)({toastContainer:()=>r.Styles.createViewStyle({top:0,bottom:0,left:0,right:0,position:"absolute",overflow:"visible"}),desktopToastContainer:()=>r.Styles.createViewStyle({justifyContent:"flex-start",alignItems:"center"}),desktopToastContent:()=>r.Styles.createViewStyle({width:425,height:80,justifyContent:"center",backgroundColor:k.Color.transparent}),mobileToastContent:()=>r.Styles.createViewStyle({alignSelf:"stretch",marginHorizontal:10,height:80,justifyContent:"center",backgroundColor:k.Color.transparent}),browserMobileToastContent:()=>r.Styles.createViewStyle({width:screen.width}),mobileToastContentNoMargins:()=>r.Styles.createViewStyle({marginHorizontal:0}),gestureViewOverlayDesktop:()=>r.Styles.createViewStyle({backgroundColor:k.Color.transparent,justifyContent:"center",alignItems:"center",overflow:"visible"}),gestureViewOverlayMobile:()=>r.Styles.createViewStyle({alignSelf:"stretch",backgroundColor:k.Color.transparent,justifyContent:"center",alignItems:"center",overflow:"visible"}),backgroundViewDesktopIOS:()=>r.Styles.createViewStyle({borderRadius:5}),shadow:()=>r.Styles.createViewStyle({shadowColor:k.Color.black,shadowOpacity:.7,shadowRadius:2,shadowOffset:{height:0,width:0}})});class D extends N.default{constructor(){super(...arguments),this._wasToastTapped=!1,this._onAnimatedViewRef=e=>{this._animatedView=e||void 0},this._handleIncomingNotification=e=>{this.isComponentMounted()&&(this._recalcDisplay(e),void 0!==this.state.notificationType&&void 0!==this.state.conversationId&&(this._toastEventToSend=new C.MessagingToastEvent(this.state.conversationId,this.state.notificationType,C.MessagingToastActionType.Ignored)))},this._onPanVertical=e=>{n.isUndefined(this._hideToastTimerId)||!this.state.currentMessage&&!this.state.messageText||(M.default.clearTimeout(this._hideToastTimerId),this._hideToastTimerId=void 0);let t=e.pageY-e.initialPageY,i=!1;t>30&&(t=30),this._animatedView&&this._animatedView.setValue({y:t});let o=t/30;o<0&&(o=0);i=this.state.toastHeight-Math.abs(t)<this.state.toastHeight/2||Math.abs(e.velocityY)>.35||t>=30,e.isComplete&&(i?(this._hideToast(0),void 0!==this.state.notificationType&&void 0!==this.state.conversationId&&(this._toastEventToSend=new C.MessagingToastEvent(this.state.conversationId,this.state.notificationType,C.MessagingToastActionType.Panned))):this._showToast(0))},this._onTapDismiss=e=>{const t=x.default.newCauseId();p.log(h.LogTraceArea.Notifications,"NotificationToast._onTapDismiss "+t),this._wasToastTapped=!0,this.state.conversationId&&(void 0!==this.state.notificationType&&(this._toastEventToSend=new C.MessagingToastEvent(this.state.conversationId,this.state.notificationType,C.MessagingToastActionType.Tapped)),o.default.isCurrentSessionInBubbleMode().always((e=>{!0!==e?y.default.navigateToConversation({convId:this.state.conversationId,causeId:t,origin:h.NavigationConversationOrigin.InAppNotification}):p.log(h.LogTraceArea.Notifications,"Skip navigating to conversation from toast tap as we are in bubble mode")}))),this._isToastCurrentlyHiding||(n.isUndefined(this._hideToastTimerId)||(M.default.clearTimeout(this._hideToastTimerId),this._hideToastTimerId=void 0),this._hideToast(0))},this._onToastDismissed=()=>{this.state.onToastDismissed&&this.state.onToastDismissed(this._wasToastTapped),this.setState({onToastDismissed:void 0}),this._wasToastTapped=!1},this._hideToastCallback=()=>{this._isToastCurrentlyHiding=!1,E.default.hideCurrentToastMessage(),this._onToastDismissed(),n.isUndefined(this._toastEventToSend)||p.track(this._toastEventToSend)}}static _topStartingValue(e){return(e.toastHeight?-e.toastHeight:0)-10}_recalcDisplay(e){const t=x.default.newCauseId();p.log(h.LogTraceArea.Notifications,"NotificationToast._recalcDisplay "+t);const i={},n=this._getRootViewId();if(e){const o=b.default.getDeviceOrientation(n),s=T.default.leavePaddingForStatusBar(),a=_.default.isUsingStackNavigationContext(),r=T.default.statusBarHeight(),l=80+(s?r:0);if(this._animatedView&&this._animatedView.setValue({y:-l},t),i.leavePaddingForStatusBar=s,i.statusBarHeight=r,i.toastHeight=l,i.toastWidth=b.default.getWidth(n)||0,i.deviceOrientation=o,i.safeAreaHorizontalPaddingStyle=T.default.horizontalPaddingStyle(c.HorizontalInsetDefault),i.isUsingStackNavigationContext=a,e instanceof E.SkypeNotificationToastMessage){i.messageText=void 0,i.currentMessage=e.message,i.notificationType=S.getMessageNotificationType(e.message);const t=(0,d.default)().getConversation(e.message.conversationId),n=u.default.getDisplayName(e.message.conversationId),o=u.default.getDisplayName(e.message.creator),s=u.default.getShortDisplayName(e.message.creator),a=g.getCompactNotificationDisplayInfo(e.message,t,o,s,n);i.headerText=a.title,i.toastCreator=t&&t.isOneOnOne()?t.getOtherPartyMri():void 0,i.conversationId=e.message.conversationId}else if(e instanceof E.TextNotificationToastMessage)i.messageText=e.textMessage,i.currentMessage=void 0,i.notificationType=void 0,i.headerText=void 0,i.toastCreator=void 0,i.conversationId=e.conversationId,i.onToastDismissed=e.onToastDismissed;else if(e instanceof E.ScheduledCallToastMessage){let t,n;switch(e.scheduledCallInfo.type){case A.ScheduleCallAlertTypes.Received:n=e.skypeMessage.creator,t=g.getScheduledCallDisplayInfoForInvitationReceivedAlert(n);break;case A.ScheduleCallAlertTypes.InvitationAccepted:case A.ScheduleCallAlertTypes.InvitationDeclined:n=e.scheduledCallInfo.initiator,t=g.getScheduledCallDisplayInfoForInvitationAlert(n,e.scheduledCallInfo.type,e.scheduledCallInfo.subject);break;case A.ScheduleCallAlertTypes.Edited:case A.ScheduleCallAlertTypes.Canceled:n=e.skypeMessage.creator,t=g.getScheduledCallDisplayInfoForInvitationUpdatedAlert(n,e.scheduledCallInfo.type,e.scheduledCallInfo.subject);break;default:return x.default.switchStatementExhaustiveChecking(e.scheduledCallInfo.type)}t&&(i.currentMessage=e.skypeMessage,i.notificationType=v.MessageNotificationType.ScheduledCall,i.messageText=t.body,i.messageTextIcon=I.SkypeIcon.Schedule,i.headerText=t.title,i.conversationId=e.skypeMessage.conversationId,i.toastCreator=n)}this.setState(i),this._animatedView&&this._animatedView.setValue({y:D._topStartingValue(i)},t),this._showToast()}else i.messageText=void 0,i.currentMessage=void 0,i.notificationType=void 0,this.setState(i)}_buildState(e,t){const i=this._getRootViewId();if(t){E.default.event_localNotificationReady.subscribe(this._handleIncomingNotification);let e={};const t=b.default.getDeviceOrientation(i),n=T.default.leavePaddingForStatusBar(),o=_.default.isUsingStackNavigationContext(),s=T.default.statusBarHeight(),a=80+(n?s:0);return e.currentMessage=void 0,e.notificationType=void 0,e.messageText=void 0,e.messageTextIcon=void 0,e.headerText=void 0,e.toastCreator=void 0,e.leavePaddingForStatusBar=n,e.statusBarHeight=s,e.toastHeight=a,e.toastWidth=b.default.getWidth(i)||0,e.deviceOrientation=t,e.safeAreaHorizontalPaddingStyle=T.default.horizontalPaddingStyle(c.HorizontalInsetDefault),e.isUsingStackNavigationContext=o,this._isToastCurrentlyHiding=!1,e}return{}}componentWillUnmount(){super.componentWillUnmount(),E.default.event_localNotificationReady.unsubscribe(this._handleIncomingNotification)}render(){return this.state.currentMessage||this.state.messageText?this.state.currentMessage&&this.state.currentMessage.messagetype===l.MessageTypes.PopCard?null:this._renderSimpleToast():null}_renderSimpleToast(){let e=this._renderNotificationContent();if(!e)return null;const t=[R.toastContainer,R.desktopToastContainer],i=[this.state.isUsingStackNavigationContext?R.mobileToastContent:R.desktopToastContent];L.BrowserEnvironment.isMobile()&&!this.state.isUsingStackNavigationContext&&i.push(R.browserMobileToastContent),this.state.isUsingStackNavigationContext&&i.push(R.mobileToastContentNoMargins);const n=this.state.leavePaddingForStatusBar?Math.max(this.state.statusBarHeight,10):(this.state.isUsingStackNavigationContext,0);n&&i.push(P.default.marginTopStyle(n));const o=this.state.isUsingStackNavigationContext?R.gestureViewOverlayMobile:R.gestureViewOverlayDesktop,s=f.default.getGradientColorsNoSubscription();return e=r.createElement(r.View,{style:i},this._getBackgroundView(s,!1),e),r.createElement(a.View,{key:"toast",ref:this._onAnimatedViewRef,style:t,ignorePointerEvents:!0,y:-this.state.toastHeight},r.createElement(r.GestureView,{style:o,onTap:this._onTapDismiss,onPanVertical:this._onPanVertical,releaseOnRequest:!1},e))}_getBackgroundView(e,t=!1){const i=[w.default.absoluteFill];return t&&i.push(R.backgroundViewDesktopIOS),this._themeStyles.notificationColorStyle?r.createElement(r.View,{style:[i,this._themeStyles.notificationColorStyle]}):r.createElement(s.GradientView,{style:i,direction:s.GradientDirection.RIGHT,colors:e})}_showToast(e=500){const t=x.default.newCauseId();p.log(h.LogTraceArea.Notifications,"NotificationToast._showToast causeId: "+t),M.default.setTimeout((()=>{if(this.isComponentMounted()&&this._animatedView){const e=0;this._animatedView.getAnimation({y:{toValue:e,duration:266,easing:a.Easing.SkypeExpoInOut5}},t).start((()=>{this.isComponentMounted()&&(this._hideToast(),this._announceForAccessibility())}))}}),e)}_hideToast(e=2500){const t=x.default.newCauseId();p.log(h.LogTraceArea.Notifications,"NotificationToast._hideToast causeId: "+t),this._hideToastTimerId=M.default.setTimeout((()=>{this.isComponentMounted()&&this._animatedView&&(this._isToastCurrentlyHiding=!0,this._animatedView.getAnimation({y:{toValue:D._topStartingValue(this.state),duration:266,easing:a.Easing.SkypeExpoInOut5}},t).start(this._hideToastCallback))}),e)}_announceForAccessibility(){this.state.messageText&&r.Accessibility.announceForAccessibility(this.state.messageText)}}t.default=D},77484:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(65666),a=i(96074),r=i(46096),l=i(36237),c=i(15877),d=i(6250),u=i(4735),g=i(33348),h=i(81760),p=i(24576),m=i(12770),S=(0,c.lazyProperties)({sceneContainer:()=>o.Styles.createViewStyle({flex:1,flexDirection:"row",alignSelf:"stretch"},!1),cardStyleAndroid:()=>o.Styles.createViewStyle({backgroundColor:h.Color.transparent},!1)});class C extends p.default{constructor(){super(...arguments),this._mountedRefsMap=new d.default,this._navigateBackCompleted=()=>{},this._transitionStarted=(e,t,i,n,o)=>{const s=t?this._navContextForNavigatorRouteId(parseInt(t,10)):void 0,a=i?this._navContextForNavigatorRouteId(parseInt(i,10)):void 0;u.default.stackNavigationStarted(e,s,a,n,o)},this._transitionCompleted=()=>{l.log(r.LogTraceArea.Navigation,"RootStackNavigationView: _transitionCompleted"),this._clearPendingNavigationAnimation(!1),n.defer((()=>{this._updateComponentVisibility(),u.default.stackNavigationCompleted()}))},this._onNavigatorRef=e=>{this._navigator=e||void 0},this._renderScene=e=>{if(!e)return;const t=this._navContextForNavigatorRoute(e);t||l.warn(r.LogTraceArea.Navigation,"No nav context found corresponding to the Navigator Route");const i=this._routeIdKey(e),n=this._renderSceneContent(t,i);return o.createElement(a.BaseNavigationWrapper,{isPresentedByMobileStackNavigator:!0},o.createElement(o.View,{accessibilityViewIsModalIOS:!0,style:S.sceneContainer},n))}}UNSAFE_componentWillUpdate(e,t,i){if(super.UNSAFE_componentWillUpdate(e,t,i),this._prevNavContextStack=this.props.navContextStack,!this._navigator)return;const n=e.navContextStack;let o=this._prevNavContextStack.length;n.length<o&&(o=n.length);let s=0;for(;s<o&&this._prevNavContextStack[s].id===n[s].id;s++);const a=this._prevNavContextStack.length-s,c=n.length-s;if(c>1&&l.warn(r.LogTraceArea.Navigation,"Only 1 scene can be added to the stack in a single transaction."),a||c){if(n[n.length-1].id===this._prevNavContextStack[this._prevNavContextStack.length-1].id||c>1){l.log(r.LogTraceArea.Navigation,"RootStackNavigationView: UNSAFE_componentWillUpdate immediatelyResetRouteStack");const e=this._createNavigatorRouteStack(n);return void this._navigator.immediatelyResetRouteStack(e)}}let d;if(1===c){const e=n[s],t=s>0?n[s-1]:void 0;d=this._createNavigatorRoute(e,t)}l.log(r.LogTraceArea.Navigation,"RootStackNavigationView: UNSAFE_componentWillUpdate prev stack length: "+this._prevNavContextStack.length+" next stack length: "+n.length+" totalPushing: "+c+" totalPopping: "+a),d&&a>=1?(l.log(r.LogTraceArea.Navigation,"RootStackNavigationView: UNSAFE_componentWillUpdate replaceAtIndex, routeId: "+d.routeId),this._registerPendingNavigationAnimation(),this._navigator.replaceAtIndex(d,s)):d?(l.log(r.LogTraceArea.Navigation,"RootStackNavigationView: UNSAFE_componentWillUpdate push, routeId: "+d.routeId),this._registerPendingNavigationAnimation(),this._navigator.push(d)):a>0&&(l.log(r.LogTraceArea.Navigation,"RootStackNavigationView: UNSAFE_componentWillUpdate popToRoute"),this._navigator.popToRoute(this._navigator.getCurrentRoutes()[s-1]))}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this._updateComponentVisibility()}componentDidMount(){super.componentDidMount();const e=this._createNavigatorRouteStack(this.props.navContextStack);l.log(r.LogTraceArea.Navigation,"RootStackNavigationView: componentDidMount immediatelyResetRouteStack"),this._navigator&&this._navigator.immediatelyResetRouteStack(e),this._updateComponentVisibility()}_updateComponentVisibility(){const e=this._navigator?n.last(this._navigator.getCurrentRoutes()):void 0,t=this._routeIdKey(e);n.each(this._mountedRefsMap.allRefs(),((e,i)=>{e.ref&&e.ref.setVisible&&e.ref.setVisible(!this.props.isWholeStackInvisible&&i===t)}))}render(){const e=this._themeStyles.primaryBackgroundColorStyle;return o.createElement(s.default,{renderScene:this._renderScene,navigateBackCompleted:this._navigateBackCompleted,transitionStarted:this._transitionStarted,transitionCompleted:this._transitionCompleted,ref:this._onNavigatorRef,cardStyle:e,delegateSelector:s.NavigatorDelegateSelector})}_registerPendingNavigationAnimation(){this._clearPendingNavigationAnimation(!1),this._pendingAnimationHandle=g.default.createPendingAnimation(),l.log(r.LogTraceArea.Navigation,"RootStackNavigationView: _registerPendingNavigationAnimation "+this._pendingAnimationHandle),this._pendingAnimationTimeout=m.default.setTimeout((()=>{this._clearPendingNavigationAnimation(!0)}),1e3)}_clearPendingNavigationAnimation(e){if(this._pendingAnimationTimeout&&(m.default.clearTimeout(this._pendingAnimationTimeout),this._pendingAnimationTimeout=void 0),this._pendingAnimationHandle){l.log(r.LogTraceArea.Navigation,"RootStackNavigationView: _clearPendingNavigationAnimation "+this._pendingAnimationHandle+" timed out: "+e);const t=this._pendingAnimationHandle;this._pendingAnimationHandle=void 0,g.default.clearPendingAnimation(t)}}_navContextForNavigatorRoute(e){if(e)return this._navContextForNavigatorRouteId(e.routeId)}_navContextForNavigatorRouteId(e){let t=n.find(this.props.navContextStack,(t=>t.id===e));return t||(t=n.find(this._prevNavContextStack,(t=>t.id===e))),t}_routeIdKey(e){return"routeId"+(e?e.routeId:n.uniqueId())}_createNavigatorRouteStack(e){return n.map(e,((t,i)=>{const n=i>0?e[i-1]:void 0;return this._createNavigatorRoute(t,n)}))}_createNavigatorRoute(e,t){const i=this._navigatorSceneConfigTypeForNavContext(e,t);return{routeId:e.id,sceneConfigType:i.direction,gestureResponseDistance:i.gestureResponseDistance,customSceneConfig:i.customSceneConfig}}}t.default=C},66020:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(94224),a=i(97869),r=i(71830),l=i(57139),c=(i(52262),i(59799)),d=i(46096),u=i(36237),g=i(16812),h=i(33754),p=i(4735),m=i(38985),S=i(15301),C=i(6262),f=i(11828),y=i(53374);t.default=new class{constructor(){this.showInvitePrompt=(e,t,i,n,s,r)=>{const c=y.default.newCauseId();u.log(d.LogTraceArea.Navigation,"CallOrInvitePrompt.showInvitePrompt causeId: "+c);const p=i||"",m=(s&&s.length,r?r.length:0),S=()=>e();if(1===m)return s&&0===m?this._inviteViaNativeShareSheet(n,t,S):r&&this._inviteViaEmail(r[0],p,n,t,S),void l.default.close(t,c);const C=i=>{u.log(d.LogTraceArea.CallNavigation,"CallOrInvitePrompt.onClose causeId: "+i),this._closePrompt(e,t)},f=m,_=a.default.getMinimumMenuHeightForItems(f);l.default.showWithContent({menuId:l.default.menuId(),anchor:e,rootViewId:t,menuHeight:_,content:o.createElement(g.default,{contactName:p,phoneNumbers:void 0,emails:r,inviteOrigin:n,onInviteViaEmail:this._inviteViaEmail,onInviteViaSms:this._inviteViaSms,onCloseMenu:C,anchor:S}),getTitle:()=>h.getString("CallOrInviteMenu.InviteTitle",{userDisplayName:p}),onCloseMenu:C},c)},this.showSendSmsPrompt=(e,t,i,n,o,s)=>{let a;if(s){const i=h.getString("SMSMessaging.SendViaSkype",{target:h.getString("SMSMessaging.SendViaSkypeStatic"),chevron:""});a=[{title:i,accessibilityLabel:i,icon:f.SkypeIcon.Message,onPress:()=>{this._closePrompt(e,t),o(void 0)}}]}const r={rootViewId:t,skypeMri:i,onStartSMSConversation:(i,n)=>{this._closePrompt(e,t,!0),o(n)},customButtons:a,phones:n,anchor:e,suppressVideoOption:!0,suppressInvite:!0,suppressCalling:!0,inviteOrigin:d.ContactInviteOrigin.Unknown,popupTitleOverride:s?h.getString("DetailsPanelHeader.SendMessageButtonTitle"):h.getString("SMSMessaging.ContactOptionsPopupSendSMSLabel"),showGroupTitles:s,callOrigin:d.NavigationCallOrigin.Unknown};this._showCallOrInvitePrompt(r)},this._closePrompt=(e,t,i=!1,n=!1)=>{const o=y.default.newCauseId();if(u.log(d.LogTraceArea.Navigation,"CallOrInvitePrompt._closePrompt causeId: "+o),i||S.default.clearNextFlowId(),l.default.close(t,o),!n){const t=e();t&&t.requestFocus&&t.requestFocus()}},this._inviteViaEmail=(e,t,i,n,o)=>{m.default.initiateJoinLinkInvite({target:new m.EmailInvite([e]),origin:i,showLoadingModalWhileGettingJoinLink:!0,recipientName:t,rootViewId:n,anchor:o})},this._inviteViaSms=(e,t,i,n,o)=>{m.default.initiateJoinLinkInvite({target:new m.SmsInvite(e),origin:i,showLoadingModalWhileGettingJoinLink:!0,recipientName:t,rootViewId:n,anchor:o})},this._inviteViaNativeShareSheet=(e,t,i)=>{m.default.initiateJoinLinkInvite({target:new m.ShareSheetInvite,origin:e,showLoadingModalWhileGettingJoinLink:!0,rootViewId:t,anchor:i})},this._startPstnCall=e=>{const t=y.default.newCauseId(),i=r.sanitizeMri(e,r.Namespaces.PSTN);u.log(d.LogTraceArea.CallNavigation,"CallActionMenu._callNumber causeId: "+t),s.default.CallNavigationHelper.startCall({conversationMri:i,withVideo:!1,origin:d.NavigationCallOrigin.CallOrInvitePrompt},t)},this._startSmsConversation=(e,t)=>{const i=y.default.newCauseId();u.log(d.LogTraceArea.Navigation,"CallOrInvitePrompt._startSmsConversation causeId: "+i),p.default.navigateToConversation({convId:e,origin:d.NavigationConversationOrigin.CallOrInvitePrompt,selectedNumberForSMS:r.isPhoneMri(e)?void 0:t,causeId:i})}}showForSkypeMri(e,t,i,n,o,s,a,l,c,g,h,p,m){if(i&&r.isPhoneMri(i))return void u.error(d.LogTraceArea.CallNavigation,"CallingOptionsPopup: MRI passed can not be a phone number.");C.default.isPaidUser()||(p=!1);const S={anchor:e,rootViewId:t,inviteOrigin:s,callOrigin:a,skypeMri:i,encryptedThreadId:n,onStartSkypeCall:l,suppressVideoOption:o,phones:h,onStartPstnCall:c,onStartSMSConversation:p?this._startSmsConversation:void 0,onStartEncryptedCall:g,popupTitleOverride:m};this._showCallOrInvitePrompt(S)}showForPhoneNumber(e,t,i,n,o){const s={anchor:e,rootViewId:t,inviteOrigin:n,phones:i,onStartPstnCall:this._startPstnCall,suppressInvite:!0,callOrigin:d.NavigationCallOrigin.CallOrInvitePrompt,popupTitleOverride:o};this._showCallOrInvitePrompt(s)}showForAddressContact(e,t,i,o,s,a,r,l,c,d){if(C.default.isPaidUser()||(c=!1),n.isEmpty(a))return void this.showInvitePrompt(e,t,i,o,void 0,r);const u={anchor:e,rootViewId:t,inviteOrigin:o,callOrigin:s,phones:a,contactName:i,emails:r,suppressInvite:l,popupTitleOverride:d,suppressVideoOption:!0,onStartPstnCall:this._startPstnCall,onStartSMSConversation:c?this._startSmsConversation:void 0};this._showCallOrInvitePrompt(u)}_showCallOrInvitePrompt(e){const t=y.default.newCauseId();u.log(d.LogTraceArea.Navigation,"CallOrInvitePrompt._showCallOrInvitePrompt causeId: "+t);const i=()=>this._closePrompt(e.anchor,e.rootViewId);let n;e.onStartSMSConversation&&(n=(t,i)=>{this._closePrompt(e.anchor,e.rootViewId,!0),e.onStartSMSConversation&&e.onStartSMSConversation(t,i)});const r={anchor:e.anchor,rootViewId:e.rootViewId,hasCameras:s.default.DeviceStore.hasCameras(),skypeToSkypeMri:e.skypeMri,encryptedThreadId:e.encryptedThreadId,suppressVideoOption:e.suppressVideoOption,phoneNumbers:e.phones,contactName:e.contactName,emails:e.emails,inviteOrigin:e.inviteOrigin,onStartSkypeCall:t=>{this._closePrompt(e.anchor,e.rootViewId,!1,!0),e.skypeMri?e.onStartSkypeCall&&e.onStartSkypeCall(e.skypeMri,t,e.callOrigin):u.error(d.LogTraceArea.CallNavigation,"CallingOptionsPopup: We must have a Skype MRI to make a call.")},onStartPstnCall:(i,n)=>{this._closePrompt(e.anchor,e.rootViewId,!1,!0);const o=()=>{e.onStartPstnCall&&e.onStartPstnCall(i,n,e.callOrigin)};c.default.shouldRequestAcknowledgementNoSubscription()?p.default.navigateToE911AcknowledgementPanel(t,e.rootViewId,o):o()},onStartEncryptedCall:t=>{e.onStartEncryptedCall&&e.onStartEncryptedCall(t)},onStartSmsConversation:n,onCloseMenu:i,onOpenInvitePrompt:this.showInvitePrompt,suppressInvite:e.suppressInvite,suppressCalling:e.suppressCalling,customButtons:e.customButtons,showGroupTitles:e.showGroupTitles},g=o.createElement(a.default,Object.assign({},r)),h=a.default.getMenuHeight(r);l.default.showWithContent({menuId:l.default.menuId(),anchor:e.anchor,rootViewId:e.rootViewId,menuHeight:h,content:g,onCloseMenu:i,getTitle:t=>e.popupTitleOverride&&!t?e.popupTitleOverride:void 0},t)}}},3056:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(67294),s=i(16778),a=i(58187),r=i(61253),l=i(212);class c extends o.PureComponent{constructor(e,t){super(e),this._createContext(e,t)}_createContext(e,t){const i=Object.assign(Object.assign({},t),e),{children:o}=i,s=(0,n.__rest)(i,["children"]);if(e.theme&&t.theme!==e.theme){const t=e.theme;s.theme=t,s.themeStyles=l.default.themeStylesForTheme(t),s.themeColors=l.default.themeColorsForTheme(t)}(0,r.default)(s,this._context)||(this._context=s)}render(){return this._createContext(this.props,this.context),s.createElement(a.CommonContext.Provider,{value:this._context},this.props.children)}}t.default=c,c.contextType=a.CommonContext},48942:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(80200),s=i(53143),a=i(13944),r=i(10117),l=i(15877),c=i(33754),d=i(81760),u=i(11828),g=i(19675),h=i(24576),p=i(59433),m=i(89391),S=u.IconSize.size20,C=(0,l.lazyProperties)({container:()=>n.Styles.createViewStyle({flex:1,flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:20,paddingVertical:10}),contentContainer:()=>n.Styles.createViewStyle({flex:1,flexDirection:"row",flexWrap:"wrap",paddingHorizontal:10,alignItems:"center"}),textComposite:()=>n.Styles.createTextStyle({flex:-1,lineHeight:24,alignSelf:"center",wordBreak:"break-word"}),avSettingsLinkStyle:()=>n.Styles.createTextStyle({flex:-1,lineHeight:24,alignSelf:"center",wordBreak:"break-word",marginLeft:4,color:d.Color.sxBlue}),buttonContainer:()=>n.Styles.createViewStyle({flex:1,flexDirection:"row",flexWrap:"wrap",paddingLeft:10}),buttonStyle:()=>n.Styles.createButtonStyle({paddingLeft:10})});class f extends h.default{constructor(){super(...arguments),this._onDownloadLinkPress=e=>{n.Linking.openUrl(this.state.downloadLink)},this._onCloseButtonPress=e=>{s.default.removeToast(this.props.toastId,o.ToastActionType.ManualDismissed)}}_buildState(e){return{downloadLink:m.default.getS4LUiFeatures().limitedSupportBrowserToastConfig.downloadGoLink}}render(){return n.createElement(n.View,{style:C.container},n.createElement(r.default,{icon:u.SkypeIcon.Warning,size:u.IconSize.size24,color:this._themeColors.headerIconColor}),this._getTextContent(),n.createElement(a.default,{icon:u.SkypeIcon.ClosePanel,size:S,color:this._themeColors.headerIconColor,hoverColor:this._themeColors.primaryIconColor,title:c.getString("Global.CloseButtonTitle"),onPress:this._onCloseButtonPress}))}_getTextContent(){const e=c.getParts("LimitedSupportBrowserToast.LimitedSupportText",{downloadLink:this._getDownloadLink()});return n.createElement(n.View,{key:"textContentContainer",style:C.contentContainer},n.createElement(g.BodyText,{style:[this._themeStyles.headerTextColorStyle,C.textComposite]},e))}_getDownloadLink(){return n.createElement(p.default,{key:"downloadLink",url:"#",blue:!0,onPress:this._onDownloadLinkPress},c.getString("LimitedSupportBrowserToast.LimitedSupportDownloadLink"))}}t.default=f},25310:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(44770),a=i(89391),r=i(46096),l=i(39285),c=i(36237),d=i(15877),u=i(75913),g=i(33754),h=i(10909),p=i(89808),m=i(4735),S=i(95691),C=i(24148),f=i(93486),y=i(95697),_=i(70523),v=i(81760),b=i(11010),T=i(59433),P=i(24576),A=(0,d.lazyProperties)({container:()=>o.Styles.createViewStyle({minHeight:32,alignItems:"center",justifyContent:"space-between",flexDirection:"row",flexWrap:"wrap",paddingRight:8}),containerWithoutPreview:()=>o.Styles.createViewStyle({paddingLeft:8}),innerContainer:()=>o.Styles.createViewStyle({flexDirection:"row",flex:-1,alignSelf:"stretch",alignItems:"center"}),webFooterText:()=>o.Styles.createTextStyle({font:b.default.font.uiDisplayRegular,fontSize:b.default.controlFontSize.webFooter}),linkText:()=>o.Styles.createTextStyle({color:v.Color.gray200,marginHorizontal:4,marginVertical:4}),spacerText:()=>o.Styles.createTextStyle({color:v.Color.gray200,marginHorizontal:4,top:-2}),shadow:()=>o.Styles.createViewStyle({position:"absolute",left:0,right:0,top:0,height:10,opacity:.6}),previewContainer:()=>o.Styles.createViewStyle({paddingHorizontal:6,alignSelf:"stretch",justifyContent:"center",marginRight:4}),borderStyle:()=>o.Styles.createViewStyle({borderTopWidth:1})});var k;!function(e){e[e.Feedback=0]="Feedback",e[e.Download=1]="Download",e[e.Language=2]="Language",e[e.TermsOfUse=3]="TermsOfUse",e[e.Privacy=4]="Privacy",e[e.Copyright=5]="Copyright",e[e.Preview=6]="Preview",e[e.PublicWebSafety=7]="PublicWebSafety",e[e.SignOut=8]="SignOut"}(k||(k={}));const I=[k.Preview,k.Download,k.Feedback,k.Language,k.PublicWebSafety,k.SignOut],w=[k.TermsOfUse,k.Privacy,k.Copyright];class N extends P.default{constructor(){super(...arguments),this._renderFooterElement=(e,t)=>{let i,n,s=!1;switch(e){case k.Preview:this.state.showPreviewBadge&&(i=g.getString("WebFooter.Preview2"),s=!0);break;case k.Feedback:this.state.isChild||(i=g.getString("WebFooter.Feedback"),n=this._openFeedback);break;case k.Language:const e=g.getLocale();i=g.getString("WebFooter.Language")+(e?" ("+e+")":""),n=this._openLanguagePicker;break;case k.Download:i=g.getString("WebFooter.Download"),n=this._openDownloadPage;break;case k.TermsOfUse:i=g.getString("WebFooter.TermsOfUse"),n=this._openTerms;break;case k.PublicWebSafety:i=g.getString("WebFooter.PublicWebSafety"),n=this._openPublicWebSafety;break;case k.SignOut:i=g.getString("WebFooter.SignOut"),n=this._signOut;break;case k.Privacy:i=g.getString("WebFooter.Privacy"),n=this._openPrivacy;break;case k.Copyright:i=g.getString("WebFooter.Copyright")}if(i){const a=this._useAccessibleTheme();let r;const c=[A.webFooterText,A.linkText];let d;s?d=o.Styles.createTextStyle({color:a?this._themeColors.primaryBackgroundColor:v.Color.white},!1):a&&(d=this._themeStyles.primaryTextColorStyle);const u=[A.webFooterText,A.spacerText];if(d&&(c.push(d),u.push(d)),n?r=o.createElement(T.default,{key:"link"+e,style:c,url:"#",onPress:n},i):(r=o.createElement(l.HiddenText,{key:"text"+e,style:c},i),s||(r=o.createElement(o.View,{key:"text"+e,accessibilityLabel:i,tabIndex:-1,importantForAccessibility:o.Types.ImportantForAccessibility.Yes},r))),s){const t=a?o.Styles.createViewStyle({backgroundColor:this._themeColors.primaryTextColor},!1):this.state.previewBackgroundStyle;r=o.createElement(o.View,{key:"badge"+e,style:[A.previewContainer,t],accessibilityLabel:i,tabIndex:-1,importantForAccessibility:o.Types.ImportantForAccessibility.Yes},r)}return[r,t&&!s?o.createElement(l.HiddenText,{key:"spacer"+e,style:u},"."):void 0]}},this._openPrivacy=()=>{u.default.openPrivacy()},this._openTerms=()=>{u.default.openTerms()},this._openLanguagePicker=()=>{m.default.navigateToLanguagePicker(!0,this._getRootViewId())},this._openDownloadPage=()=>{o.Linking.openUrl(a.default.getConfigSettingsNoSubscription().downloadSkype.downloadSkypeUrl)},this._openPublicWebSafety=()=>{o.Linking.openUrl(a.default.getConfigSettingsNoSubscription().skypeGoLinks.publicWebSafety)},this._signOut=()=>{_.default.showSignOutConfirmation(r.LogoutReason.CompositeNavigationFooter,this._getRootViewId())},this._openFeedback=()=>{c.track(new C.NavigationHelpAndFeedback(S.NavigationSettingsItem.SendFeedback,S.NavigationSettingsOrigin.WebFooter)),y.default.openFeedbackUrl(a.default.getConfigSettings().feedbackAndProblemGoParam.feedback,g.getString("MyProfilePanel.SendFeedbackButtonTitle"),this._getRootViewId(),!0)},this._onLayout=e=>{h.default.setBottomMarginBase(e.height+10)}}_buildState(e,t){return{previewBackgroundStyle:p.default.getPrimaryBackgroundColorStyle(),showPreviewBadge:a.default.getS4LUiFeatures().enableWebFooterPreviewBadge,isChild:f.default.isChild()}}componentWillUnmount(){super.componentWillUnmount(),h.default.setBottomMarginBase(0)}_renderFooterElements(e){return n.map(e,((t,i)=>this._renderFooterElement(t,i!==e.length-1)))}render(){const e=this._useAccessibleTheme(),t=e?this._themeStyles.primaryBackgroundColorStyle:o.Styles.createViewStyle({backgroundColor:this._themeColors.webFooterColor},!1),i=[A.container,t];this.state.showPreviewBadge||i.push(A.containerWithoutPreview),e&&i.push(this._themeStyles.dividerBorderColorStyle,A.borderStyle);const n=e?void 0:o.createElement(o.Image,{style:A.shadow,resizeMode:"stretch",source:s.Collection.PHOTO_SHIM});return o.createElement(o.View,{style:i,onLayout:this._onLayout},n,o.createElement(o.View,{style:A.innerContainer},this._renderFooterElements(I)),o.createElement(o.View,{style:A.innerContainer},this._renderFooterElements(w)))}}t.default=N},11896:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(98278),a=i(53143),r=i(13944),l=i(15877),c=i(33754),d=i(95697),u=i(81760),g=i(11828),h=i(59433),p=i(19675),m=i(24576),S=(0,l.lazyProperties)({container:()=>n.Styles.createViewStyle({flex:1,flexDirection:"row",alignItems:"center",paddingHorizontal:s.CompositeNotificationToastInfo.horizontal,paddingVertical:s.CompositeNotificationToastInfo.vertical+3,minHeight:44}),contentContainer:()=>n.Styles.createViewStyle({flex:1,flexDirection:"row",flexWrap:"wrap",paddingHorizontal:10,alignItems:"center"}),notificationTextStyle:()=>n.Styles.createTextStyle({flex:-1,wordBreak:"break-word",paddingRight:5}),closeButtonStyle:()=>n.Styles.createButtonStyle({flex:1,paddingLeft:10,alignItems:"flex-end",justifyContent:"flex-start"}),linkText:()=>n.Styles.createTextStyle({color:u.Color.sxBlue})});class C extends m.default{constructor(){super(...arguments),this._onCloseButtonPress=e=>{a.default.removeToast(this.props.toastId)},this._onReportAProblemPress=()=>{d.default.reportProblem(!0,this._getRootViewId())},this._onLeaveFeedbackPress=()=>{d.default.openFeedbackUrl(o.default.getConfigSettings().feedbackAndProblemGoParam.feedback,c.getString("MyProfilePanel.SendFeedbackButtonTitle"),this._getRootViewId())}}render(){const e=this._useAccessibleTheme()?this._themeStyles.headerTextColorStyle:S.linkText,t=n.createElement(h.default,{key:"problemlink",style:e,url:"#",linkTextStyle:s.LinkTextStyle.BodyTextSmall,onPress:this._onReportAProblemPress},c.getString("WebBanner.ReportAProblemLink")),i=n.createElement(h.default,{key:"feedbacklink",style:e,url:"#",linkTextStyle:s.LinkTextStyle.BodyTextSmall,onPress:this._onLeaveFeedbackPress},c.getString("WebBanner.LeaveFeedbackLink")),o=c.getParts("WebBanner.BannerText",{link1:t,link2:i});return n.createElement(n.View,{style:S.container},n.createElement(n.View,{style:S.contentContainer},n.createElement(p.BodyText,{style:[S.notificationTextStyle,this._themeStyles.headerTextColorStyle],size:p.BodyTextSize.SmallDeprecated},o)),n.createElement(r.default,{size:g.IconSize.size20,color:this._themeColors.headerIconColor,hoverColor:this._themeColors.primaryIconColor,icon:g.SkypeIcon.ClosePanel,style:S.closeButtonStyle,title:c.getString("Global.CloseButtonTitle"),onPress:this._onCloseButtonPress}))}}t.default=C},53785:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(15877),a=i(74606),r=(0,s.lazyProperties)({checkboxView:()=>n.Styles.createViewStyle({flexDirection:"row",alignSelf:"flex-start",paddingVertical:6}),reasonTextWrapper:()=>n.Styles.createTextStyle({flex:1,flexDirection:"column",justifyContent:"center"})});class l extends o.ComponentBase{constructor(){super(...arguments),this._onPress=e=>{this.props.onPress(this.props.reportedCategory)}}render(){return n.createElement(n.Button,{style:r.checkboxView,onPress:this._onPress},n.createElement(a.default,{isOn:this.props.isSelected}),n.createElement(n.View,{style:r.reasonTextWrapper},n.createElement(n.Text,{style:this.props.textStyle},this.props.displayedCategory),this._maybeRenderSubtextForCategory()))}_maybeRenderSubtextForCategory(){if(void 0!==this.props.displayedSubtextForCategory)return n.createElement(n.Text,{style:this.props.textStyle},this.props.displayedSubtextForCategory)}}t.default=l},73145:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopContextMenuTarget=void 0;const n=i(96486),o=i(16778),s=(i(89391),i(77381)),a=i(33790),r=i(61253),l=i(15877),c=i(93194),d=i(81760),u="menutarget_",g="context-menu",h=(0,l.lazyProperties)({wrapper:()=>o.Styles.createViewStyle({flex:1,overflow:"visible"}),targetOnly:()=>o.Styles.createViewStyle({position:"absolute",height:1,width:1}),target:()=>o.Styles.createViewStyle({height:1,width:1,position:"absolute",backgroundColor:d.Color.transparent})});class p extends s.default{constructor(){super(...arguments),this._contextMenuAnchorX=new o.Animated.Value(0),this._contextMenuAnchorY=new o.Animated.Value(0),this._contextMenuStyle=o.Styles.createAnimatedViewStyle({top:this._contextMenuAnchorY,left:this._contextMenuAnchorX}),this._getMenuTarget=()=>this._menuTarget,this._onMenuTargetRef=e=>{this._menuTarget=e||void 0}}_buildState(e,t=!1){return{position:a.default.getAnchorPosition()}}requestFocus(){}componentDidMount(){super.componentDidMount(),m.addMenuTargetCallback(this._getRootViewId(),this._getMenuTarget),this.state.position&&(this._contextMenuAnchorX.setValue(this.state.position.x),this._contextMenuAnchorY.setValue(this.state.position.y))}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i),t.position&&!(0,r.default)(t.position,this.state.position)&&(this._contextMenuAnchorX.setValue(t.position.x),this._contextMenuAnchorY.setValue(t.position.y))}render(){return o.createElement(o.Animated.View,{ref:this._onMenuTargetRef,style:[h.target,this._contextMenuStyle]})}}t.DesktopContextMenuTarget=p;class m extends s.default{constructor(){super(...arguments),this.showContextMenu=e=>{if(!this.isComponentMounted())return;const t=this._getRootViewId();if(this.state.isShowingMenu)m.dismissContextMenu(t);else if(this.props.getMenuItems){const e=!1;m._showContextMenu(t,{getMenuItems:this.props.getMenuItems,onItemSelected:this.props.onItemSelected,onDismiss:()=>{this.props.onDismiss&&this.props.onDismiss(),this.isComponentMounted()&&this.setState({isShowingMenu:!1})}})&&!e&&this.setState({isShowingMenu:!0})}},this._handleClick=e=>{e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this._handleOnContextMenu(e)},this._handleOnContextMenu=e=>{this.isComponentMounted()&&(a.default.setAnchorPosition({x:e.pageX||0,y:e.pageY||0}),n.defer((()=>this.showContextMenu(e))))}}static dismissContextMenu(e){c.default.dismiss(g,e)}static addMenuTargetCallback(e,t){this._menuTargetAnchors[u+e]=t}static getMenuTargetCallback(e){return this._menuTargetAnchors[u+e]||(()=>{})}_buildState(e,t=!1){return t?{isShowingMenu:!1}:{}}show(e){this._handleClick(e)}showOnTap(e){this._handleOnContextMenu(e)}render(){const e=this.props.isAnimated?this.props.renderAsText?o.Animated.Text:o.Animated.View:this.props.renderAsText?o.Text:o.View,t=[this.props.targetOnly?h.targetOnly:h.wrapper,this.props.wrapperStyle];return o.createElement(e,{style:t,onContextMenu:this.props.wrapperOnly?void 0:this._handleClick,onPress:this.props.wrapperOnly?void 0:this.props.onPress,onLongPress:this.props.wrapperOnly?void 0:this.props.onLongPress},this.props.children)}static _showContextMenu(e,t){return!!t.getMenuItems&&c.default.showWithOptions(Object.assign(Object.assign({},this._getActionMenuConfig(e,t)),{getMenuItems:t.getMenuItems,delay:1}))}static _showGroupContextMenu(e,t){return!!t.getMenuGroups&&c.default.showGroupWithOptions(Object.assign(Object.assign({},this._getActionMenuConfig(e,t)),{getMenuGroups:t.getMenuGroups}))}}t.default=m,m._menuTargetAnchors={},m.showContextMenu=(e,t,i)=>{e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),a.default.setAnchorPosition({x:e.pageX||0,y:e.pageY||0}),n.defer((()=>i.getMenuItems?m._showContextMenu(t,i):m._showGroupContextMenu(t,i)))},m._getActionMenuConfig=(e,t)=>{const i=a.default.getAnchorPosition();return{id:g,config:{anchor:m.getMenuTargetCallback(e),useTheme:!0,popupDisableContextMenu:!0,popupBeakSize:{height:0,width:0},positionPriorities:["bottom","right","left","top"]},handleMenuCommand:e=>{t.onItemSelected&&t.onItemSelected(e)},onDismiss:()=>{t.onDismiss&&t.onDismiss()},rootViewId:e,invokingEvent:i?{pageX:i.x,pageY:i.y}:void 0}}},28433:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileSelectionInput=void 0;const n=i(96486),o=i(31844),s=i(16778),a=i(88837),r=i(52754),l=i(80128),c=i(77381),d=i(41444),u=i(52262),g=i(72490),h=i(15877),p=i(33754),m=i(66127),S=i(30124),C=i(29130),f=i(51070),y=i(10541),_=i(29165),v=i(80837);a.StoreBase;const b=(0,h.lazyProperties)({inputContainer:()=>s.Styles.createViewStyle({alignSelf:"stretch"})});class T extends c.default{constructor(){super(...arguments),this._searchActive=!1,this._removeProfileFromSelection=e=>{const t=e.getConversationId();t&&this.props.selectorController.removeConversation(t),this.props.onProfileRemoved&&this.props.onProfileRemoved()},this._onInputChange=e=>{this.props.onInputChanged(e)},this._onSubmitEditing=()=>{this.props.onSubmit&&this.props.onSubmit()},this._onEscape=()=>(this.props.onCancel(),!0),this._searchInputRefCallback=e=>{this._searchInput=e||void 0},this._onSearchActive=e=>{this._showOrHideHeader(!e,!0),e||this.props.onInputChanged("")}}_buildState(e,t){const i={},a=this._getRootViewId();return t&&(this._headerAnimatedHeightValue=new s.Animated.Value(l.default.expandedHeight(a)),this._headerAnimatedTopValue=new s.Animated.Value(0),this._headerAnimatedHeightStyle=s.Styles.createAnimatedViewStyle({height:this._headerAnimatedHeightValue}),this._headerAnimatedTopStyle=s.Styles.createAnimatedViewStyle({transform:[{translateY:this._headerAnimatedTopValue}]})),i.statusBarPadding=f.default.statusBarPadding(),i.isPortrait=C.default.getDeviceOrientation(a)===o.DeviceOrientation.Portrait,i.selectedConversations=e.selectorController.getSelectedConversations(),i.canSubmit=e.allowSubmitWithNoProfile||e.selectorController.getSelectedConversations().length>0,i.isUsingStackNavigationContext=S.default.isUsingStackNavigationContext(),i.isSmallDevice=C.default.isSmallDevice(a),i.displayableProfiles=n.map(i.selectedConversations,(e=>u.default.getDisplayableProfile(e))),i.modernizeMobile=m.default.canModernizeMobileTabHeader(),i}UNSAFE_componentWillMount(){super.UNSAFE_componentWillMount(),this._addSubscription({store:this.props.selectorController})}componentDidMount(){super.componentDidMount(),this.props.autoFocusOnInput&&this.requestFocus(),this._showOrHideHeader(!this._searchActive,!1),g.default.addEscapeHandler(this._onEscape)}componentWillUnmount(){super.componentWillUnmount(),g.default.removeEscapeHandler(this._onEscape)}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.state.statusBarPadding===t.statusBarPadding&&this.state.isPortrait===t.isPortrait||this._showOrHideHeader(!this._searchActive,!1),this.props.autoFocusOnInput&&!e.autoFocusOnInput&&n.delay((()=>{this.isComponentMounted()&&this.props.autoFocusOnInput&&this.requestFocus()}),1e3)}render(){let e=p.getString("SetConversationParticipantsPanel.InputPlaceholderTextPeopleAndBot");this.props.peopleType===y.PeopleType.AllExcludingBots||this.props.peopleType===y.PeopleType.AllWithPhoneNumbers?e=this.props.includeGroups?p.getString("SetConversationParticipantsPanel.InputPlaceholderTextPeopleAndGroup"):p.getString("SetConversationParticipantsPanel.InputPlaceholderTextPeople"):this.props.peopleType===y.PeopleType.Bots&&(e=p.getString("SetConversationParticipantsPanel.InputPlaceholderTextBot"));let t,i=this.props.headerConfig&&!this._shouldRemoveHeader()?this.props.headerConfig.getHeader():void 0;t=this.props.useCollapsableHeader||this.state.modernizeMobile?s.createElement(r.default,{ref:this._searchInputRefCallback,initialValue:1,showButtonWhenInactive:!0,placeholderText:e,rawSearchQuery:this.props.inputText,onInputTextChange:this._onInputChange,onSubmitEditing:this._onSubmitEditing,onActive:this._onSearchActive}):s.createElement(s.View,{style:v.default.flexOne},s.createElement(d.default,{ref:this._searchInputRefCallback,showButtonWhenInactive:!0,placeholderText:e,rawSearchQuery:this.props.inputText,autoFocus:this.props.autoFocusOnInput,autoFocusWhenActive:this.props.autoFocusWhenActive,forceInputValueUpdate:!0,onInputTextChange:this._onInputChange,onSubmitEditing:this._onSubmitEditing,onKeyDown:this.props.onKeyDown})),i&&!this.state.isUsingStackNavigationContext&&(i=s.createElement(s.View,null,i));let n,o=this.props.showSendButtonOnEverySearchItemUI?void 0:s.createElement(_.default,{selectedProfiles:this.state.displayableProfiles,onProfileRemoved:this._removeProfileFromSelection,colorThemeOverride:this.props.colorThemeOverride});return n=this.state.isUsingStackNavigationContext?s.createElement(s.Animated.View,{style:[v.default.flexOne,this.props.noFixedHeight?void 0:this._headerAnimatedHeightStyle]},s.createElement(s.Animated.View,{style:this.props.noFixedHeight?void 0:this._headerAnimatedTopStyle},i,t)):s.createElement(s.View,null,i,t),s.createElement(s.View,null,s.createElement(s.View,{style:[b.inputContainer,this.props.style]},n),o)}_shouldRemoveHeader(){return this.props.noFixedHeight&&this.state.isUsingStackNavigationContext&&this._searchActive}requestFocus(){this.isComponentMounted()&&this._searchInput&&this._searchInput.focusInput()}_showOrHideHeader(e,t=!0){if(this._searchActive=!e,this.props.noFixedHeight&&this.state.isUsingStackNavigationContext)return void this.setState({forceRerender:!this.state.forceRerender});let i;const n=this._headerHeight(),o=e?0:-1*n;if(this.state.isUsingStackNavigationContext){const t=this._getRootViewId();i=e?n+l.default.collapsableHeight(t):l.default.expandedHeight(t)+this.state.statusBarPadding}else i=n+d.DesktopSearchHeaderHeight;t?s.Animated.parallel([s.Animated.timing(this._headerAnimatedTopValue,{toValue:o,duration:200,easing:s.Animated.Easing.Out()}),s.Animated.timing(this._headerAnimatedHeightValue,{toValue:i,duration:200,easing:s.Animated.Easing.Out()})]).start():(this._headerAnimatedTopValue.setValue(o),this._headerAnimatedHeightValue.setValue(i))}_headerHeight(){return this.props.headerConfig?this.props.headerConfig.getHeaderHeight():0}}t.ProfileSelectionInput=T,t.default=T},20570:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(71830),a=i(22854),r=i(52262),l=i(10117),c=i(15877),d=i(89808),u=i(81760),g=i(11828),h=i(19675),p=i(24576),m=i(18037),S=i(2301),C=i(67977),f=(0,c.lazyProperties)({button:()=>n.Styles.createViewStyle({marginLeft:8,marginRight:8,alignItems:"center"}),cancelBadge:()=>n.Styles.createViewStyle({borderRadius:12,borderWidth:2,borderStyle:"solid",height:24,width:24,position:"absolute",right:-2,top:-2,justifyContent:"center",alignItems:"center"}),userName:()=>n.Styles.createTextStyle({maxWidth:C.UserIconSize.Size60}),lockWrapperStyle:()=>n.Styles.createViewStyle({backgroundColor:u.Color.red,borderRadius:9,width:18,height:18,alignItems:"center",justifyContent:"center",position:"absolute",left:0,bottom:0})});class y extends p.default{constructor(){super(...arguments),this._remove=()=>{this.props.onRemoveClickUserProfile(this.props.profile)}}_buildState(e,t){let i=!1;if(e.profile){const t=e.profile.getMri();i=!!t&&s.isUserMri(t)}return{isUserMri:i,backgroundColorStyle:m.default.useAccessibleTheme()?this._themeStyles.primaryViewColorStyle:d.default.getPrimaryBackgroundColorStyle()}}render(){const e=this.props.profile.getMri();let t;t=this.state.isUserMri?n.createElement(S.UserIcon,{userMri:e,size:C.UserIconSize.Size60}):n.createElement(a.ConversationIcon,{conversationId:e,size:C.ConversationIconSize.Size60});const i=[f.cancelBadge,this._themeStyles.primaryBorderColorStyle,this.state.backgroundColorStyle],o=this.props.accessibilityLabel||(this.props.profile?this.props.profile.getDisplayName():void 0),s=this.props.profile&&this.props.profile.isEncrypted()?n.createElement(n.View,{style:f.lockWrapperStyle},n.createElement(l.default,{icon:g.SkypeIcon.Lock,color:u.Color.white,size:g.IconSize.size12})):void 0,r=this._useAccessibleTheme()&&this._themeColors.primaryBadgeTextColor?this._themeColors.primaryBadgeTextColor:u.Color.white;return n.createElement(n.Button,{style:[f.button,this.props.style],onPress:this._remove,accessibilityLabel:o},n.createElement(n.View,null,t,n.createElement(n.View,{style:i},n.createElement(l.default,{icon:g.SkypeIcon.Cancel,color:r,size:g.IconSize.size12})),s),n.createElement(_,{userMri:e,useShortName:!0,style:[f.userName,this._themeStyles.primaryTextColorStyle]}))}}class _ extends o.ComponentBase{_buildState(e,t){return{displayName:this._getDisplayName()}}_getDisplayName(){if(this.props.userMri)return this.props.useShortName?r.default.getShortDisplayName(this.props.userMri):r.default.getDisplayName(this.props.userMri)}render(){return n.createElement(h.Caption,{small:!0,style:this.props.style,numberOfLines:1},this.state.displayName)}}t.default=y},29165:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(88837),a=i(15877),r=i(33754),l=i(20570),c=i(40363),d=(0,a.lazyProperties)({scrollViewContainer:()=>o.Styles.createViewStyle({alignSelf:"stretch",justifyContent:"center"}),selectedList:()=>o.Styles.createViewStyle({flexDirection:"row"}),selectedListRTL:()=>o.Styles.createViewStyle({flexDirection:"row-reverse"}),flippedView:()=>o.Styles.createViewStyle({transform:[{scaleX:-1}]})});class u extends s.ComponentBase{constructor(e){super(e),this._onRemoveClickUserProfile=e=>{this.props.onProfileRemoved&&this.props.onProfileRemoved(e);const t=e.getDisplayName();t&&this._announceRemoval(t)},this._createProfileBubble=(e,t)=>{const i=e.getDisplayName(),n=r.getString("AccessibilityLabel.SelectedProfileBubbleRemoveUserOnDesktop",{displayName:i,index:t+1,totalCount:this.props.selectedProfiles.length});return o.createElement(l.default,{key:"we-hub-user-tag-"+(e.getUniqueId()||i),style:c.default.isRTL()?d.flippedView:void 0,profile:e,onRemoveClickUserProfile:this._onRemoveClickUserProfile,accessibilityLabel:n,colorThemeOverride:this.props.colorThemeOverride})},this._onInvitedListRef=e=>{this._selectedListRef=e||void 0},this._animatedHeightValue=new o.Animated.Value(e.selectedProfiles.length>0?84:0),this._animatedHeightStyle=o.Styles.createAnimatedViewStyle({height:this._animatedHeightValue})}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.props.selectedProfiles.length>e.selectedProfiles.length&&this._selectedListRef&&this._selectedListRef.setScrollLeft(0);const n=e.selectedProfiles.length>0,s=this.props.selectedProfiles.length>0;n!==s&&o.Animated.timing(this._animatedHeightValue,{toValue:s?84:0,duration:250,easing:o.Animated.Easing.InOut()}).start()}render(){const e=n.map(this.props.selectedProfiles,this._createProfileBubble),t=c.default.isRTL(),i=t?d.selectedListRTL:d.selectedList,s=[i];return t&&s.push([d.selectedListRTL,d.flippedView]),o.createElement(o.Animated.View,{style:[d.scrollViewContainer,this._animatedHeightStyle,this.props.style]},o.createElement(o.ScrollView,{ref:this._onInvitedListRef,style:s,horizontal:!0,vertical:!1,scrollsToTop:!1},o.createElement(o.View,{style:i},e)))}_announceRemoval(e){o.Accessibility.announceForAccessibility(r.getString("AccessibilityLabel.SelectedProfileBubbleRemoved",{displayName:e}))}}t.default=u},35251:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyStateHeader=void 0;const n=i(16778),o=i(15877),s=i(29130),a=i(11010),r=i(19675),l=i(24576),c=(0,o.lazyProperties)({headerStyle:()=>n.Styles.createTextStyle({marginTop:20,marginBottom:4,textAlign:"center"})});class d extends l.default{_buildState(e,t){const i=this._getRootViewId();return{isSmallDevice:s.default.isSmallDevice(i)}}render(){let e=[c.headerStyle,this.state.isSmallDevice?a.default.fontStyle.panelHeaderLandscape:a.default.fontStyle.h5];return n.createElement(r.PanelHeader,{style:e},this.props.headerText)}}t.EmptyStateHeader=d,t.default=d},52525:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(89391),a=i(78547),r=i(75672),l=i(96074),c=i(5531),d=i(11934),u=i(96418),g=i(11930),h=i(98278),p=i(31761),m=i(46096),S=i(72146),C=i(11375),f=i(36237),y=i(10400),_=i(63836),v=i(80263),b=i(15877),T=i(47662),P=i(33754),A=i(95016),k=i(6250),I=i(18078),w=i(45026),N=i(95691),M=i(94021),E=i(38980),x=i(93818),L=i(10541),R=i(22222),D=i(60305),B=i(19675),O=i(12770),F=i(67977),V=i(72758),U=i(92772),H=i(53374),W=i(73877);var z;!function(e){e[e.StartNewConversation=0]="StartNewConversation"}(z||(z={}));const G=(0,b.lazyProperties)({container:()=>o.Styles.createViewStyle({flex:1,paddingHorizontal:45,alignItems:"center",justifyContent:"center"}),innerContainer:()=>o.Styles.createViewStyle({flex:1,alignItems:"center",justifyContent:"center",alignSelf:"stretch"}),headerText:()=>o.Styles.createTextStyle({textAlign:"center",wordBreak:"break-word"}),welcomeSectionContainer:()=>o.Styles.createViewStyle({alignSelf:"stretch",flexDirection:"row",marginVertical:50}),welcomeSectionContainerVertical:()=>o.Styles.createViewStyle({flexDirection:"column"}),avatarContainer:()=>o.Styles.createViewStyle({alignItems:"center",alignSelf:"center"}),profileUpdateWrapper:()=>o.Styles.createViewStyle({alignItems:"center",alignSelf:"stretch",justifyContent:"center",marginVertical:38}),startConversationButton:()=>o.Styles.createViewStyle({marginTop:36,marginBottom:24,alignSelf:"center"}),startConversationWrapper:()=>o.Styles.createViewStyle({maxWidth:350}),startConversationDescription:()=>o.Styles.createTextStyle({textAlign:"center"})});class K extends l.default{constructor(){super(...arguments),this._wasWelcomeTextAnnounced=!1,this._animatedOpacityValue=new o.Animated.Value(0),this._animatedOpacityStyle=o.Styles.createAnimatedViewStyle({opacity:this._animatedOpacityValue}),this._mountedRefsMap=new k.default,this._landingViewDisplayEventTracked=!1,this._landingPageShownTracked=!1,this._maybeLaunchTutorial=e=>{if(!e.isTutorialReady)return;const t=!e.isFirstRun&&!e.wasTutorialLaunched;e.enableCoachMarks&&t&&O.default.setTimeout((()=>{this.isComponentMounted()&&(E.default.track(new M.TutorialLaunched(M.TutorialLaunchOrigin.LandingScreenStandard,!1)),this._launchTutorial())}),1e3)},this._maybeAnnounceWelcomeText=()=>{this._wasWelcomeTextAnnounced||(this._wasWelcomeTextAnnounced=!0,o.Accessibility.announceForAccessibility(this._getWelcomeText()))},this._launchTutorial=()=>{const e=H.default.newCauseId();f.log(m.LogTraceArea.Navigation,"LandingScreen._launchTutorial, causeId: "+e),u.default.runFirstRunSequence(m.CoachMarkOrigin.LandingPage,this.state.useTabletUI),S.default.setWasTutorialStarted(!0)},this._onLayoutProfileLanding=e=>{if(this.isComponentMounted()){const t=e.height<440;this.state.showSmallProfileLanding!==t&&this.setState({showSmallProfileLanding:t})}},this._onContainerLayout=e=>{if(this.isComponentMounted()){const t=e.height<700;this.state.showCompactCheckAccountSection!==t&&this.setState({showCompactCheckAccountSection:t})}},this._onMyAvatarSelected=()=>{f.track(new x.MyAvatarChanged(m.AvatarUpdateLocation.LandingScreen))},this._onMyAvatarRemoved=()=>{f.track(new x.MyAvatarRemoved(m.AvatarUpdateLocation.LandingScreen))},this._onMainScreenCtaButtonClick=e=>{e.stopPropagation(),this._onCtaButtonPress(z.StartNewConversation)}}_buildState(e,t){var i;const n=I.default.getSkypeMri(),o=V.default.getFullUserProfileByMri(n),r=s.default.getOnboardingFeatures(),l=D.default.useTabletUI();let d={displayName:o.getShortName(),gender:o.gender,userMri:n,enableCoachMarks:r.enableCoachMarks&&c.default.onboarding().canSeeCoachMarks,isFirstRun:S.default.isStartupFirstRun(),isNewUser:S.default.isStartupNewUser(),isSetupWizardCompleted:S.default.isSetupWizardCompleted(),checkAccountGoParam:s.default.getConfigSettings().checkAccountUrl.goParam,fixedHeight:l?W.default.windowHeightWithoutStatusBar(this._getRootViewId()):0,useTabletUI:l,isKeyboardShown:l&&y.default.isKeyboardSeen(),isMigrationLandingScreenSeen:S.default.isMigrationLandingScreenSeen(),isTutorialReady:S.default.isCoachmarkTutorialReady(),wasTutorialLaunched:S.default.wasTutorialStarted(),signedInAsId:I.default.getMsaIdFromSignIn(),enableOnboardingLandingScreenConfigs:r.landingPageWithCards,setupWizardCompletionTimestamp:S.default.setupWizardCompletionTimestamp(),whatsNewFlowAfterAppUpdate:r.landingPageWithCards.whatsNewCardAfterUpdate};return t&&(d.showSmallProfileLanding=!1,d.showCompactCheckAccountSection=!1,d.enableOnboardingLandingScreenConfigs&&d.enableOnboardingLandingScreenConfigs.enabled&&(d.landingPageCardIdsForToday=v.default.getLandingPageCardsIdsForToday(),d.enableLandingPageCardsShareProfileButton=v.default.shouldDisplayProfileButtonToday()),(null===(i=d.whatsNewFlowAfterAppUpdate)||void 0===i?void 0:i.enabled)&&a.default.isAppUpdated()&&d.landingPageCardIdsForToday&&(d.landingPageCardIdsForToday=v.default.getLandingPageCardsWithWhatsNewCard(d.landingPageCardIdsForToday))),d}componentDidMount(){super.componentDidMount(),w.default.timing(this._animatedOpacityValue,{toValue:1,delay:w.default.delayDuration(1e3),duration:300,easing:o.Animated.Easing.Out(),useNativeDriver:!0}).start((()=>{this.state.isSetupWizardCompleted&&this._maybeAnnounceWelcomeText()})),this._maybeLaunchTutorial(this.state),this._landingPageShownTracked||(E.default.track(new M.LandingPageShown),this._landingPageShownTracked=!0)}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),!t.isSetupWizardCompleted&&this.state.isSetupWizardCompleted&&this._maybeAnnounceWelcomeText(),!t.isTutorialReady&&this.state.isTutorialReady&&this._maybeLaunchTutorial(this.state),this._landingViewDisplayEventTracked||(this._landingViewDisplayEventTracked=!0,E.default.track(new M.WelcomeViewWithProfileUpdateDisplayed))}_getWelcomeText(){const e=T.getLocalizeParamForGender(this.state.gender);return this.state.displayName?P.getString("Onboarding.LandingScreenTitle",{name:this.state.displayName,gender:e}):P.getString("Onboarding.LandingScreenTitleNoName")}_renderWelcomeViewWithProfileUpdate(){const e=P.getString("Onboarding.LandingScreenStartConversationAlternativeCallToAction"),t=[G.welcomeSectionContainer,G.welcomeSectionContainerVertical,G.profileUpdateWrapper];let i;return this.state.showSmallProfileLanding||(i=o.createElement(r.default,{style:G.avatarContainer,mri:I.default.getSkypeMri(),iconSize:F.UserIconSize.Size120,statusTypes:U.myAllowedStatuses(),statusBorderColor:this._themeColors.primaryBackgroundColor,accessibilityLabel:P.getString("MyProfilePanel.SelectAvatarAccessibilityLabel"),onAvatarSelected:this._onMyAvatarSelected,onAvatarRemoved:this._onMyAvatarRemoved,origin:m.AvatarPickerOrigin.LandingScreen})),o.createElement(o.View,{style:G.innerContainer,onLayout:this._onLayoutProfileLanding},o.createElement(B.Header,{size:this.state.showSmallProfileLanding?3:2,style:G.headerText},this._getWelcomeText()),o.createElement(o.View,{style:t},i,o.createElement(A.default,{userMri:this.state.userMri}),o.createElement(o.View,{style:G.startConversationWrapper},o.createElement(R.default,{ref:this._mountedRefsMap.onComponentRef("cta"+z.StartNewConversation),style:G.startConversationButton,buttonStyle:h.SXButtonStyle.ThemeFill,onPress:this._onMainScreenCtaButtonClick,buttonSize:this.state.showSmallProfileLanding?h.SXButtonSize.Small:h.SXButtonSize.Medium,title:e}),o.createElement(B.BodyText,{style:G.startConversationDescription,textThemeColor:B.TextThemeColor.Secondary},P.getString("Onboarding.LandingScreenStartConversationDescription")))))}_renderWelcomeViewWithCards(e,t={}){return o.createElement(o.View,{style:G.innerContainer},o.createElement(_.LandingPageCards,{cards:e,settings:t}))}_renderCheckAccountSection(){if(!this.state.isKeyboardShown&&!this.state.useTabletUI)return o.createElement(d.default,{signedInAsId:this.state.signedInAsId,checkAccountGoParam:this.state.checkAccountGoParam,useCompactLayout:this.state.showCompactCheckAccountSection})}render(){const e=[G.container,this._themeStyles.primaryBackgroundColorStyle,this._animatedOpacityStyle],t=this._shouldRenderEngagementLandingScreen();let i;return this.state.useTabletUI&&e.push(o.Styles.createViewStyle({height:this.state.fixedHeight},!1)),i=t?this._renderEngagementWelcomeScreen():this._renderWelcomeViewWithProfileUpdate(),o.createElement(o.Animated.View,{onLayout:this._onContainerLayout,style:e},i,this._renderCheckAccountSection())}_onCtaButtonPress(e){if(g.default.registerMobileFocusHandler(C.FocusEvent.CloseMobileModal,(()=>this._mountedRefsMap.ref("cta"+e))),e===z.StartNewConversation){f.track(new M.StartNewConversationClicked);new p.default({navigationOrigin:m.NavigationConversationOrigin.HomeScreen,creating1on1Conversation:!0,isSingleContactSelect:!0,peopleType:L.PeopleType.All,filterPeopleType:L.FilterType.None,wizardSteps:[N.WizardSteps.setConvParticipants]}).start(this._getRootViewId())}}_shouldRenderEngagementLandingScreen(){const e=!!this.state.enableOnboardingLandingScreenConfigs&&this.state.enableOnboardingLandingScreenConfigs.enabled,t=!!this.state.landingPageCardIdsForToday&&!n.isEmpty(this.state.landingPageCardIdsForToday);return e&&t}_renderEngagementWelcomeScreen(){if(!this.state.landingPageCardIdsForToday)return;const e={cardTextAlignCenter:!1,cardHideImageBackground:!0,cardImageAlignBottom:!1,cardSmallImage:!0,renderSimplifiedHeader:!1,renderUserFullName:!0,renderHeaderSubtitle:!0,renderProfileShareButton:!!this.state.enableLandingPageCardsShareProfileButton};return this._renderWelcomeViewWithCards(this.state.landingPageCardIdsForToday,e)}}t.default=K},21101:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MediaPickerWrapperView=void 0;const n=i(96486),o=i(29359),s=i(17778),a=i(2604),r=i(16778),l=i(97691),c=i(25854),d=i(77381),u=i(46096),g=(i(53559),i(36237)),h=i(15877),p=i(33754),m=i(81736),S=i(64956),C=i(4057),f=i(81760),y=i(78262),_=i(53374),v=(0,h.lazyProperties)({container:()=>r.Styles.createViewStyle({flex:1,backgroundColor:f.Color.white}),containerDark:()=>r.Styles.createViewStyle({flex:1,backgroundColor:f.Color.gray400}),rnGalleryDefaultStyle:()=>r.Styles.createViewStyle({flex:1,justifyContent:"center",backgroundColor:f.Color.gray400,borderColor:f.Color.blue})});class b extends d.default{constructor(){super(...arguments),this._pendingSelectionItemIds=[],this._mediaItemCache={},this._onMediaPickerViewRef=e=>{this._mediaPickerView=e||void 0},this._onSelectImages=e=>{if(this.props.onItemSelected&&e.nativeEvent.edge){const t=e.nativeEvent.edge;if(!t||!t.node||!t.node.image)return;const i=!!e.nativeEvent.selected,s=t.node.image.uri,a=e.nativeEvent.count;let r=this._mediaItemCache[s];r?this.props.onItemSelected(s,r,i,a):i?(this._pendingSelectionItemIds.push(s),o.default.prepareMediaSelection(0,s,t).then((e=>{n.includes(this._pendingSelectionItemIds,s)&&(this.props.onItemSelected&&this.props.onItemSelected(s,e,i,a),this._pendingSelectionItemIds=n.without(this._pendingSelectionItemIds,s))}))):(this.props.onItemSelected(s,r,i,a),this._pendingSelectionItemIds=n.without(this._pendingSelectionItemIds,s))}},this._onScrolledToTop=e=>{this.props.onScrolledToTop&&this.props.onScrolledToTop(e.nativeEvent.scrolledToTop)},this._onPhotosLoaded=e=>{this.props.onPhotosLoaded&&this.props.onPhotosLoaded(e.nativeEvent.loadedCount)}}_buildState(e,t){return{cameraRollPermissionStatus:m.default.permissionStatus(y.PermissionType.CameraRoll)}}componentDidMount(){if(super.componentDidMount(),!this.props.pauseLoading){const e=_.default.newCauseId();g.log(u.LogTraceArea.MediaPickerWrapperView,"componentDidMount causeId:",e),this._maybeLoadPhotos(e)}}componentDidUpdate(e,t,i){if(super.componentDidUpdate(e,t,i),this.props.albumName!==e.albumName){const e=_.default.newCauseId();g.log(u.LogTraceArea.MediaPickerWrapperView,"componentDidUpdate album change causeId:",e),this._reset(),this._maybeLoadPhotos(e)}if(!this.props.pauseLoading&&e.pauseLoading){const e=_.default.newCauseId();g.log(u.LogTraceArea.MediaPickerWrapperView,"componentDidUpdate pauseLoading change causeId: ",e),this._maybeLoadPhotos(e)}}scrollToTop(){this._mediaPickerView&&this._mediaPickerView.scrollToTop()}_maybeLoadPhotos(e){this.props.pauseLoading||(g.log(u.LogTraceArea.MediaPickerWrapperView,"_maybeLoadPhotos: causeId:",e),this._getCameraRollPermission().catch((e=>{g.log(u.LogTraceArea.MediaPickerWrapperView,"_maybeLoadPhotos: error:",C.default.errorAsString(e)),this.props.onClose()})))}_getCameraRollPermission(){return m.default.shouldShowLimitedPhotoSelectionPrompt()?(S.default.showLimitedCameraRollPrompt(this._getRootViewId()),m.default.closeLimitedPhotoSelectionPrompt(),l.Resolved()):this.state.cameraRollPermissionStatus===a.PermissionStatus.Granted?l.Resolved():m.default.requestPermission(y.PermissionType.CameraRoll,y.PermissionPromptOptions.SkipPrePrompt|y.PermissionPromptOptions.PromptAgainIfDenied).then((e=>e===a.PermissionStatus.Granted?l.Resolved():(S.default.showDeniedPromptWithSettingsOption(y.PermissionType.CameraRoll,this._getRootViewId()),l.Rejected("Permission denied"))))}_reset(){this._pendingSelectionItemIds=[],this._mediaItemCache={},this.props.onReset()}_desiredThumbnailSize(){return this.props.maxThumbnailSize||120}_maxSelectionCount(){return n.isUndefined(this.props.maxSelectionCount)||n.isNull(this.props.maxSelectionCount)?5:this.props.maxSelectionCount}render(){const e=this._maxSelectionCount(),t=this.state.cameraRollPermissionStatus!==a.PermissionStatus.Granted||this.props.pauseLoading?null:r.createElement(s.default,{ref:this._onMediaPickerViewRef,allowMultipleSelections:e>1,style:v.rnGalleryDefaultStyle,maxSelectionCount:e,gridPadding:0,disableGifs:this.props.disableGifs,allowVideo:this.props.mediaType!==c.MediaType.PhotoOnly,disableScrolling:this.props.disableScrolling,maxThumbnailSize:this._desiredThumbnailSize(),album:this.props.albumName,onSelectImages:this._onSelectImages,onScrolledToTop:this._onScrolledToTop,onPhotosLoaded:this._onPhotosLoaded,typePhotoAccessibilityLabel:p.getString("Global.Photo"),typeVideoAccessibilityLabel:p.getString("Global.Video"),accessibilityLabelSelected:p.getString("MediaPickerPanel.MediaPickerGalleryItemSelected",{index:s.MediaPickerConsts.IndexReplacementKey,total:s.MediaPickerConsts.TotalReplacementKey,type:s.MediaPickerConsts.TypeReplacementKey}),accessibilityLabelDefault:p.getString("MediaPickerPanel.MediaPickerGalleryItem",{index:s.MediaPickerConsts.IndexReplacementKey,total:s.MediaPickerConsts.TotalReplacementKey,type:s.MediaPickerConsts.TypeReplacementKey}),screenChangeOnSelection:this.props.screenChangeOnSelection});return r.createElement(r.View,{style:this.props.darkTheme?v.containerDark:v.container},t)}}t.MediaPickerWrapperView=b,t.default=b},97122:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(53143),s=i(1650),a=i(24576),r=i(97634);class l extends a.default{_buildState(e,t){const i={};let n=o.default.getToast(e.toastId);if(n&&n.state){const e=n.state;i.alertType=e.toastType,i.themeOverride=r.matchingLightOrDarkTheme(this._currentTheme)}return i}render(){return n.createElement(s.default,{fromToast:!0,alertType:this.state.alertType,colorThemeOverride:this.state.themeOverride})}}t.default=l},3415:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(61614),s=i(15877),a=i(30124),r=i(1650),l=i(24576),c=i(97634),d=(0,s.lazyProperties)({container:()=>n.Styles.createViewStyle({flex:1,overflow:"hidden"})});class u extends l.default{constructor(){super(...arguments),this._alertAnimatedHeightValue=new n.Animated.Value(0),this._alertAnimatedStyle=n.Styles.createAnimatedViewStyle({height:this._alertAnimatedHeightValue})}_buildState(e,t){const i=a.default.isUsingStackNavigationContext(),n=o.default.getConnectivityAlertType(),s={alertType:n,height:n?i?r.HeightStack:r.HeightComposite:0,themeOverride:c.matchingLightOrDarkTheme(this._currentTheme)};return t&&s.height&&this._alertAnimatedHeightValue.setValue(s.height),s}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.state.height!==t.height&&this._toggleAlert(this.state.height)}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i),0===t.height&&this.state.height>0&&this._toggleAlert(t.height)}_toggleAlert(e){n.Animated.timing(this._alertAnimatedHeightValue,{toValue:e,duration:250,easing:n.Animated.Easing.Out()}).start()}render(){const e=n.Styles.createViewStyle({backgroundColor:this._themeColors.primaryTextColor},!1);return n.createElement(n.Animated.View,{style:this._alertAnimatedStyle},n.createElement(n.View,{style:[d.container,e]},n.createElement(r.default,{fromToast:!1,alertType:this.state.alertType,colorThemeOverride:this.state.themeOverride})))}}t.default=u},1650:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeightStack=t.HeightComposite=void 0;const n=i(16778),o=i(89391),s=i(11930),a=i(98278),r=i(61614),l=i(46096),c=i(13944),d=i(10117),u=i(36237),g=i(15877),h=i(33754),p=i(4735),m=i(30124),S=i(76192),C=i(17791),f=i(86045),y=i(81760),_=i(11828),v=i(19675),b=i(24576),T=i(53374);t.HeightComposite=59,t.HeightStack=44;const P=(0,g.lazyProperties)({container:()=>n.Styles.createViewStyle({flex:1,flexDirection:"row",alignItems:"center"}),simpleText:()=>n.Styles.createViewStyle({flex:1,flexDirection:"row",justifyContent:"flex-start"}),button:()=>n.Styles.createButtonStyle({flex:1,flexDirection:"row",justifyContent:"flex-start"}),icon:()=>n.Styles.createViewStyle({alignSelf:"center"}),iconComposite:()=>n.Styles.createViewStyle({marginLeft:18,marginRight:11}),iconStack:()=>n.Styles.createViewStyle({marginLeft:8,marginRight:8}),textStack:()=>n.Styles.createTextStyle({lineHeight:20}),textComposite:()=>n.Styles.createTextStyle({lineHeight:24,alignSelf:"center"}),buttonTextStack:()=>n.Styles.createTextStyle({marginLeft:8}),buttonTextComposite:()=>n.Styles.createTextStyle({marginLeft:4}),closeButtonStyle:()=>n.Styles.createButtonStyle({flex:0,paddingHorizontal:10,justifyContent:"center"}),backgroundStyleStack:()=>n.Styles.createViewStyle({height:t.HeightStack}),backgroundStyleComposite:()=>n.Styles.createViewStyle({height:t.HeightComposite,paddingVertical:a.CompositeNotificationToastInfo.vertical})});class A extends b.default{constructor(){super(...arguments),this._onButtonPressed=e=>{e.stopPropagation(),u.log(l.LogTraceArea.GenericUnsafe,"NetworkConnectionAlertContent._onButtonPressed"),p.default.navigateToInAppBrowser({origin:l.BrowserOrigin.NetworkConnectionAlert,url:this.state.browserUrl,openUrlOptions:{onInAppWebBrowserClose:()=>C.default.runConnectivityCheck()}},this._getRootViewId());const t=new S.CaptivePortalOpenBrowserEvent;u.track(t)},this._onCloseButtonPress=e=>{const t=T.default.newCauseId();if(u.log(l.LogTraceArea.GenericUnsafe,"NetworkConnectionAlertContent._onCloseButtonPress, causeId: "+t),r.default.dismissConnectivityAlert(),this.state.showQuestionnaire&&p.default.navigateToCaptivePortalQuestionnaire(t,this._getRootViewId()),this.props.alertType){const e=new S.ConnectivityAlertDismissEvent(this.props.alertType);u.track(e)}}}_buildState(e,t){return{isUsingStackNavigationContext:m.default.isUsingStackNavigationContext(),browserUrl:o.default.getConfigSettings().captivePortalDetection.browserUrl,showQuestionnaire:r.default.shouldShowCaptivePortalQuestionnaire()}}componentDidMount(){super.componentDidMount(),this.props.alertType&&this._announceForAccessibility()}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),!e.alertType&&this.props.alertType&&this._announceForAccessibility()}_announceForAccessibility(){f.default.shouldAnnounceForAccessibility()&&(this.props.alertType===l.ConnectivityAlertType.CaptivePortal?n.Accessibility.announceForAccessibility(h.getString("ConnectivityStatusBar.CaptivePortalAlert")):this.props.alertType===l.ConnectivityAlertType.NoNetwork&&n.Accessibility.announceForAccessibility(h.getString("ConnectivityStatusBar.NoInternetConnectionAccessibilityAnnouncement")))}render(){const e=[P.container,this.state.isUsingStackNavigationContext?P.backgroundStyleStack:P.backgroundStyleComposite,n.Styles.createViewStyle({backgroundColor:this._themeColors.primaryBackgroundColor},!1)];return n.createElement(n.View,{style:e},this._renderContent())}_renderContent(){if(!this.props.alertType)return null;let e;return this.props.alertType!==l.ConnectivityAlertType.NoNetwork&&(e=n.createElement(c.default,{size:_.IconSize.size20,color:this._themeColors.primaryTextColor,hoverColor:this._themeColors.textHoverColor,icon:_.SkypeIcon.ClosePanel,style:P.closeButtonStyle,title:h.getString("Global.CloseButtonTitle"),onPress:this._onCloseButtonPress,key:"connectionAlertClose"})),[this._renderText(),e]}_renderText(){const e=this.state.isUsingStackNavigationContext?P.iconStack:P.iconComposite,t=this._useAccessibleTheme()?this._themeStyles.primaryTextColorStyle:n.Styles.createTextStyle({color:this._themeColors.linkTextColor||y.Color.blueDark},!1),i=this.state.isUsingStackNavigationContext?v.Caption:v.BodyText,o=this.state.isUsingStackNavigationContext?[this._themeStyles.primaryTextColorStyle,P.textStack]:[this._themeStyles.primaryTextColorStyle,P.textComposite],a=this.state.isUsingStackNavigationContext?[t,P.textStack,P.buttonTextStack]:[t,P.textComposite,P.buttonTextComposite],r=n.createElement(d.default,{color:this._themeColors.primaryTextColor,style:[P.icon,e],size:this.state.isUsingStackNavigationContext?_.IconSize.size20:_.IconSize.size24,icon:_.SkypeIcon.Warning});if(this.props.alertType===l.ConnectivityAlertType.CaptivePortal){const e=h.getString("ConnectivityStatusBar.CaptivePortalAlert"),t=h.getString("ConnectivityStatusBar.CaptivePortalAlertAction");return n.createElement(n.Button,{style:P.button,accessibilityLabel:s.default.combinedAccessibilityLabel(e,t),onPress:this._onButtonPressed,tabIndex:-1,key:"connectionAlertCaptivePortal"},r,n.createElement(i,{style:o},e),n.createElement(i,{style:a},t))}return this.props.alertType===l.ConnectivityAlertType.NoNetwork?n.createElement(n.View,{style:P.simpleText,key:"connectionAlertNoNetwork"},r,n.createElement(i,{style:o},h.getString("ConnectivityStatusBar.NoInternetConnection"))):null}}t.default=A},64822:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(53785),a=i(89391),r=i(81760),l=i(47126),c=i(15877),d=i(98278),u=i(33754),g=i(93486),h=i(46096),p=i(11010),m=i(59433),S=i(24576),C=i(53374),f=[h.ReportCategory.Spam,h.ReportCategory.Pornography,h.ReportCategory.ChildExploitation,h.ReportCategory.Harassment],y=[h.ReportCategory.Spam,h.ReportCategory.Fraud,h.ReportCategory.ChildExploitation,h.ReportCategory.Terrorism,h.ReportCategory.HateSpeech,h.ReportCategory.Harm,h.ReportCategory.SelfHarm,h.ReportCategory.Harassment,h.ReportCategory.FalseInfo,h.ReportCategory.SexuallyInappropriate,h.ReportCategory.Infringement,h.ReportCategory.MalwareOrVirus],_=[h.ReportCategory.Spam,h.ReportCategory.Fraud,h.ReportCategory.ChildExploitation,h.ReportCategory.Terrorism,h.ReportCategory.HateSpeech,h.ReportCategory.Harm,h.ReportCategory.NonConsensualIntimateImagery,h.ReportCategory.SelfHarm,h.ReportCategory.Harassment,h.ReportCategory.FalseInfo,h.ReportCategory.SexuallyInappropriate,h.ReportCategory.Infringement,h.ReportCategory.MalwareOrVirus],v=h.ReportCategory.Spam,b=(0,c.lazyProperties)({checkBoxContainer:()=>o.Styles.createViewStyle({paddingVertical:16}),reportReasonText:()=>o.Styles.createTextStyle({flex:-1,paddingRight:10,paddingTop:16}),selectReasonText:()=>o.Styles.createTextStyle({alignSelf:"center",marginBottom:16,font:p.default.font.uiDisplayBold}),reportDetails:()=>o.Styles.createTextStyle({backgroundColor:r.Color.gray200Overlay20,paddingVertical:10,paddingHorizontal:10,marginTop:20,marginBottom:20,borderRadius:3,textAlign:"left"}),reasonSubtext:()=>o.Styles.createTextStyle({fontSize:12})});class T extends S.default{constructor(){super(...arguments),this._onPress=e=>{this.setState({selectedReason:e}),this.props.reasonSelected(e)},this._onKeyPress=e=>{e.keyCode===l.default.ENTER&&e.stopPropagation()},this._getReportDetails=()=>this._showInputFieldToUser()?o.createElement(o.TextInput,{style:[b.reportDetails,{color:this._themeColors.primaryTextColor}],onChangeText:this._updateReportDetails,placeholder:u.getString("BlockUnblockDialog.reportDetailsInputFieldPlaceholder"),returnKeyType:"done",blurOnSubmit:!0,multiline:!0,placeholderTextColor:this._themeColors.primaryTextColor,autoCapitalize:"sentences",autoCorrect:!0,onKeyPress:this._onKeyPress}):null,this._updateReportDetails=e=>{this.props.onChangeDetails(e)}}_buildState(e,t){let i={selectedReason:v,isNewCategoriesEnabled:a.default.getS4LMessagingFeatures().enableNewReportingCategories,isReportingNonConsensualCategoryEnabled:a.default.getS4LMessagingFeatures().enableReportingNonConsensualCategory};return t&&(i.linkToPrivacyStatementPage=a.default.getConfigSettings().privacyUrl.host,i.linkToInfringementPage=a.default.getConfigSettings().infringementUrl.host,i.isAdult=g.default.isAdult()),i}render(){const e=this._prepareReportButtons();return o.createElement(o.View,{style:b.checkBoxContainer},o.createElement(o.Text,{style:[b.selectReasonText,{color:this._themeColors.primaryTextColor}]},u.getString("BlockUnblockDialog.SelectReasonText")),e,this._getReportDetails(),this._getPrivacyLink())}_prepareReportButtons(){const e=this.state.isNewCategoriesEnabled?this.state.isReportingNonConsensualCategoryEnabled?_:y:f,t=[o.Styles.createTextStyle({color:this._themeColors.primaryTextColor},!1)];return n.map(e,(e=>o.createElement(s.default,{displayedCategory:this.getDisplayTextForBlockReason(e),displayedSubtextForCategory:this._getDisplaySubTextForBlockReason(e),reportedCategory:e,textStyle:t,isSelected:this.state.selectedReason===e,onPress:this._onPress,key:h.ReportCategory[e]+"button",linkToPrivacyStatementPage:this.state.linkToPrivacyStatementPage})))}_showInputFieldToUser(){return this.state.isNewCategoriesEnabled&&this.state.isAdult&&!this._isReportedExternally()}_isReportedExternally(){return this.state.selectedReason===h.ReportCategory.Infringement||this.state.selectedReason===h.ReportCategory.NonConsensualIntimateImagery}_getPrivacyLink(){if(this._showInputFieldToUser())return o.createElement(o.Text,{style:[b.reportReasonText,{color:this._themeColors.primaryTextColor}]},u.getString("BlockUnblockDialog.PersonalInformationDisplayText")," ",o.createElement(m.default,{linkTextStyle:d.LinkTextStyle.BodyText,url:this.state.linkToPrivacyStatementPage,key:"privacy",blue:!0},u.getString("Global.LearnMore")))}_getDisplaySubTextForBlockReason(e){if(e===h.ReportCategory.Infringement)return o.createElement(o.Text,{style:b.reasonSubtext},u.getString("BlockUnblockDialog.CopyrightInformationDisplayText"),o.createElement(m.default,{url:this.state.linkToInfringementPage,key:"learnMore",blue:!0},u.getString("BlockUnblockDialog.CopyrightInformationDisplayLink")))}getDisplayTextForBlockReason(e){switch(e){case h.ReportCategory.Spam:return u.getString("BlockUnblockDialog.SpamDisplayText");case h.ReportCategory.Fraud:return u.getString("BlockUnblockDialog.FraudDisplayText");case h.ReportCategory.ChildExploitation:return u.getString("BlockUnblockDialog.ChildExploitationDisplayText");case h.ReportCategory.Terrorism:return u.getString("BlockUnblockDialog.TerrorismDisplayText");case h.ReportCategory.HateSpeech:return u.getString("BlockUnblockDialog.HateSpeechDisplayText");case h.ReportCategory.SelfHarm:return u.getString("BlockUnblockDialog.SelfHarmDisplayText");case h.ReportCategory.Harm:return u.getString("BlockUnblockDialog.HarmDisplayText");case h.ReportCategory.Harassment:return u.getString("BlockUnblockDialog.HarassmentDisplayText");case h.ReportCategory.FalseInfo:return u.getString("BlockUnblockDialog.FalseInfoDisplayText");case h.ReportCategory.Pornography:return u.getString("BlockUnblockDialog.PornographyDisplayText");case h.ReportCategory.MalwareOrVirus:return u.getString("BlockUnblockDialog.MalwareDisplayText");case h.ReportCategory.Infringement:return u.getString("BlockUnblockDialog.InfringementDisplayText");case h.ReportCategory.NonConsensualIntimateImagery:return u.getString("BlockUnblockDialog.NonConsensualIntimateImageryDisplayText");case h.ReportCategory.SexuallyInappropriate:return u.getString("BlockUnblockDialog.SexuallyInappropriateDisplayText");default:C.default.switchStatementExhaustiveChecking(e,`Unexpected reason code: ${e}`)}}}t.default=T},3729:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74958),o=i(14533),s=i(16778),a=i(88837),r=i(65976),l=i(46096),c=i(36237),d=i(16724),u=i(71349),g=i(40363);class h extends a.ComponentBase{constructor(e){super(e),this._isMuted=!1,this._isLoaded=!1,this._onVideoPlayerRef=e=>{this._videoPlayer=e||void 0},this._onLoadStart=()=>{this._telemetryEvent=new d.FileReceived(this.props.source,this.props.sizeInBytes,void 0),this._telemetryEvent.startDownload(),this._telemetryEvent.setMediaProfile(this.props.mediaProfile),this._telemetryEvent.setIntent(l.MediaDownloadIntent.VideoViewer),this._telemetryPlaybackEvent=new u.VideoPlayback(this.props.source,this.props.mediaProvider,this.props.size,this.props.origin,this.props.amsReferences,this.props.messagetype),this._telemetryPlaybackEvent.setCachingStatus(!0,this.props.cacheMode,this.props.cachingDuration),this._telemetryPlaybackEvent.startLoad(),this.props.playbackIntentScenario&&!this.props.playbackIntentScenario.isResolved()&&(this.props.playbackIntentScenario.setDuplicateStepMarkingEnabled(),this.props.playbackIntentScenario.markStepCompleted("LoadStart"),this.props.playbackIntentScenario.setDuplicateStepMarkingEnabled(!1)),this.props.onLoadStart&&this.props.onLoadStart()},this._onCanPlay=()=>{this._telemetryPlaybackEvent&&(this._telemetryPlaybackEvent.startPlay(),this._telemetryPlaybackEvent.setPlayStatus(!0)),this.props.playbackIntentScenario&&!this.props.playbackIntentScenario.isResolved()&&(this.props.playbackIntentScenario.markStepCompleted("UserPerception"),this.props.playbackIntentScenario.finish(),this.props.playbackIntentScenario.reset(),this.props.playbackIntentScenario.start()),this.props.onCanPlay&&this.props.onCanPlay()},this._onError=e=>{c.log(l.LogTraceArea.VideoWithTelemetry,`Video playback failed with source: ${this.props.source} authToken: ${this.props.authToken?n.pii.Omit(this.props.authToken):"undefined"} clientVersion: ${this._clientVersion} loop: ${this.props.loop} showControls: ${this.props.showControls} preload: ${this.props.preload} resizeMode: ${this.props.resizeMode}`);const t=e&&e.error?JSON.stringify(e.error):"";this._telemetryEvent&&(this._telemetryEvent.endDownload(),this._telemetryEvent.setSuccess(!1,l.MessagingFailureReason.AMSFailure,1,void 0,t),c.track(this._telemetryEvent),this._telemetryEvent=void 0),this._telemetryPlaybackEvent?(this._telemetryPlaybackEvent.endLoad(),this._telemetryPlaybackEvent.setLoadStatus(!1,0,l.MessagingFailureReason.AMSFailure,t),c.track(this._telemetryPlaybackEvent),c.log(l.LogTraceArea.VideoWithTelemetry,"Sent video playback telemetry"),this._telemetryPlaybackEvent=void 0):c.log(l.LogTraceArea.VideoWithTelemetry,"Video playback telemetry was not sent"),this.props.onError&&this.props.onError(e)},this._onLoadedData=e=>{this._isLoaded=!0,this._telemetryPlaybackEvent&&(this._telemetryPlaybackEvent.endLoad(),this._telemetryPlaybackEvent.setLoadStatus(!0,e.duration?1e3*e.duration:0,l.MessagingFailureReason.None)),this.props.onLoadedData&&this.props.onLoadedData(e)},this._onEnded=()=>{this._telemetryPlaybackEvent?(this._telemetryPlaybackEvent.endPlay(),c.track(this._telemetryPlaybackEvent),c.log(l.LogTraceArea.VideoWithTelemetry,"Sent video playback telemetry"),this._telemetryPlaybackEvent=void 0):c.log(l.LogTraceArea.VideoWithTelemetry,"Video playback telemetry was not sent"),this.props.onEnded&&this.props.onEnded()},this._onWaiting=()=>{this._telemetryPlaybackEvent&&this._telemetryPlaybackEvent.startRebuffering(),this.props.onWaiting&&this.props.onWaiting()},this._onPlaying=()=>{this._telemetryPlaybackEvent&&this._telemetryPlaybackEvent.endRebuffering(),this.props.onPlaying&&this.props.onPlaying()},this._onCanPlayThrough=()=>{this._telemetryEvent?(this._telemetryEvent.endDownload(),this._telemetryEvent.setSuccess(!0,l.MessagingFailureReason.None),c.track(this._telemetryEvent),this._telemetryEvent=void 0):c.log(l.LogTraceArea.VideoWithTelemetry,"Video playback telemetry was not sent"),this.props.onCanPlayThrough&&this.props.onCanPlayThrough()},this._clientVersion=g.default.getUIVersionWithPartnerID(),c.log(l.LogTraceArea.VideoWithTelemetry,`Client version: ${this._clientVersion}`)}play(){this._videoPlayer&&this._videoPlayer.play()}seek(e){this._videoPlayer&&this._videoPlayer.seek(e)}seekPercent(e){this._videoPlayer&&this._videoPlayer.seekPercent(e)}pause(){this._videoPlayer&&this._videoPlayer.pause()}stop(){this._videoPlayer&&this._videoPlayer.stop()}mute(e){!!e!==this._isMuted&&(this._videoPlayer&&this._videoPlayer.mute(e),this._isMuted=e)}componentDidMount(){super.componentDidMount(),this._checkIfSourceIsValid()}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),e.source===this.props.source&&e.sourceObj===this.props.sourceObj||this._checkIfSourceIsValid()}componentWillUnmount(){super.componentWillUnmount(),this._telemetryPlaybackEvent&&(this._telemetryPlaybackEvent.endPlay(),this._isLoaded||(this._telemetryPlaybackEvent.setLoadStatus(!1,0,l.MessagingFailureReason.None),this._telemetryPlaybackEvent.endLoad()),c.track(this._telemetryPlaybackEvent),c.log(l.LogTraceArea.VideoWithTelemetry,"Sent video playback telemetry"),this._telemetryPlaybackEvent=void 0)}render(){return s.createElement(o.default,{ref:this._onVideoPlayerRef,style:this.props.style,children:this.props.children,source:this.props.source,sourceObj:this.props.sourceObj,authToken:this.props.authToken,clientVersion:this._clientVersion,mediaProvider:this.props.mediaProvider,accessibilityLabel:this.props.accessibilityLabel,ariaHidden:this.props.ariaHidden,loop:this.props.loop,showControls:this.props.showControls,preload:this.props.preload,resizeMode:this.props.resizeMode,onLoadedData:this._onLoadedData,onError:this._onError,onProgress:this.props.onProgress,onSeek:this.props.onSeek,onLoadStart:this._onLoadStart,onCanPlay:this._onCanPlay,onCanPlayThrough:this._onCanPlayThrough,onEnded:this._onEnded,onWaiting:this._onWaiting,onPlaying:this._onPlaying,onClick:this.props.onClick,shouldRedirectForAndroidHLS:this.props.shouldRedirectForAndroidHLS,resumeAfterForeground:this.props.resumeAfterForeground})}_checkIfSourceIsValid(){this.props.source||this.props.sourceObj||c.warn(l.LogTraceArea.VideoWithTelemetry,"The video source is not valid"),this.props.source&&r.checkIfSafeDomainToRender(this.props.source,this.props.origin)}}t.default=h},77381:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(88837),o=i(58187),s=(i(46096),i(36237),i(60305));class a extends n.ComponentBase{constructor(e){super(e),this._visibilityChanged=e=>{const t=!e;this._paused!==t&&(this._paused=t,t||this._shouldUpdateWhenResumed&&(this.forceUpdate(),this._shouldUpdateWhenResumed=!1))}}shouldComponentUpdate(e,t,i){if(this._pauseResumeDesired){const n=this._shouldComponentUpdate(this._paused,e,t,this._renderedProps||this.props,this._renderedState||this.state,i);return!this._paused||n||this._shouldUpdateWhenResumed||(this._shouldUpdateWhenResumed=super.shouldComponentUpdate(e,t,i)),n}return super.shouldComponentUpdate(e,t,i)}componentDidMount(){super.componentDidMount(),this._pauseResumeDesired=this._pauseWhenNotVisible(),this._pauseResumeDesired&&this.context.componentVisibilityStatus&&(this._pauseResumeEnabled=!0,this._paused=!this.context.componentVisibilityStatus.isVisible(),this._renderedProps=this.props,this._renderedState=this.state,this._baseVisibilitySubscriptionToken=this.context.componentVisibilityStatus.isVisibleEvent().subscribe(this._visibilityChanged))}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i),this._pauseResumeDesired&&this._componentWillUpdate(e,t,this._renderedProps||this.props,this._renderedState||this.state,i)}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this._pauseResumeDesired&&this._componentDidUpdate(this._renderedProps||e,this._renderedState||t,i),this._pauseResumeEnabled&&(this._renderedState=this.state,this._renderedProps=this.props)}componentWillUnmount(){super.componentWillUnmount(),this._baseVisibilitySubscriptionToken&&(this._baseVisibilitySubscriptionToken.unsubscribe(),this._baseVisibilitySubscriptionToken=void 0)}_shouldComponentUpdate(e,t,i,n,o,s){return!e&&super.shouldComponentUpdate(t,i,s)}_componentWillUpdate(e,t,i,n,o){}_componentDidUpdate(e,t,i){}_componentDidRender(){super._componentDidRender(),this._pauseResumeEnabled&&(this._shouldUpdateWhenResumed=!1,this._paused)}_getContext(){return this.context}_getRootViewId(){return this.context.rootViewId}_getRootViewType(){return this.context.rootViewType}_isComponentVisible(){const e=this.context.componentVisibilityStatus;return!e||e.isVisible()}_isPresentedInDesktopLeftNav(){return!!this.context.isPresentedInDesktopLeftNav&&!0}_isPresentedInTabletLeftNav(){return!!this.context.isPresentedInDesktopLeftNav&&s.default.useTabletUINoSubscription()}_isPresentedInTabletRightNav(){return!!this.context.isPresentedInDesktopRightNav&&s.default.useTabletUINoSubscription()}_isPresentedInDesktopModal(){const e=this.context;return e.isPresentedInDesktopSubview&&!e.isPresentedInDesktopLeftNav&&!e.isPresentedInDesktopRightNav}_pauseWhenNotVisible(){return!1}}t.default=a,a.contextType=o.CommonContext},81110:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(11930),s=i(39285),a=i(10117),r=i(15877),l=i(33754),c=i(81760),d=i(24576),u=i(87331),g=(0,r.lazyProperties)({container:()=>n.Styles.createViewStyle({alignSelf:"stretch",justifyContent:"center",margin:2}),iconStyle:()=>n.Styles.createViewStyle({marginRight:5})});class h extends d.default{constructor(){super(...arguments),this._onComponentRef=e=>{this._componentRef=e||void 0},this._toggleButton=e=>{this.props.onChange&&this.props.onChange(e,!this.props.isOn)},this._onAccessibilityTapIOS=e=>{e.stopPropagation(),this._toggleButton(e)},this._getAccessibilityLabel=e=>e?l.getString("ToggleSwitch.OnWithTextAccessibilityLabel",{text:this.props.accessibilityLabel||""}):l.getString("ToggleSwitch.OffWithTextAccessibilityLabel",{text:this.props.accessibilityLabel||""}),this._onPress=e=>{e.stopPropagation(),this._toggleButton(e)}}requestFocus(){var e;null===(e=this._componentRef)||void 0===e||e.requestFocus()}render(){const e=this._getAccessibilityLabel(!!this.props.isOn),t=o.default.buttonAccessibilityInfo(e,!!this.props.disable),i=g.iconStyle;return n.createElement(n.Button,{ref:this._onComponentRef,style:g.container,onPress:this.props.disable?void 0:this._onPress,title:t.accessibilityLabel,accessibilityTraits:t.accessibilityTraits,onAccessibilityTapIOS:this.props.disable?void 0:this._onAccessibilityTapIOS,disabled:this.props.disable},n.createElement(s.default,{style:this.props.style},n.createElement(a.default,{icon:this.props.icon,size:this.props.iconSize,color:c.Color.white,style:i}),n.createElement(u.default,{isOn:this.props.isOn,disableInteraction:!0,disable:this.props.disable,overlayColorAndroid:this.props.overlayColorAndroid,accessibilityLabel:this.props.accessibilityLabel,onChange:this.props.onChange})))}}t.default=h},87720:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(11930),s=i(98278),a=i(39285),r=i(15877),l=i(33754),c=i(36150),d=i(15415),u=i(24576),g=i(87331),h=(0,r.lazyProperties)({container:()=>n.Styles.createViewStyle({alignSelf:"stretch"})});class p extends u.default{constructor(){super(...arguments),this._onToggleSwitchRef=e=>{this._toggleSwitchRef=e||void 0},this._onComponentRef=e=>{this._componentRef=e||void 0},this._toggleButton=e=>{this.props.onChange&&this.props.onChange(e,!this.props.isOn)},this._onAccessibilityTapIOS=e=>{e.stopPropagation(),this._toggleButton(e)},this._onPress=e=>{e.stopPropagation(),this._toggleButton(e)}}_buildState(e,t){return{isMobileScreenReaderEnabled:c.default.isMobileScreenReaderEnabled()}}focusToggle(){this._componentRef?this._componentRef.requestFocus():this._toggleSwitchRef&&this._toggleSwitchRef.requestFocus()}render(){const e=this.state.isMobileScreenReaderEnabled,t=this.props.showSpinner?n.createElement(d.default,{size:s.SXActivityIndicatorSize.Small,tintColor:this._themeColors.primaryTextColor}):n.createElement(g.default,{ref:this._onToggleSwitchRef,isOn:this.props.isOn,disableInteraction:e,disable:this.props.disable,overlayColorAndroid:this.props.overlayColorAndroid,accessibilityLabel:this.props.accessibilityLabel,onChange:this.props.onChange});if(e){const e=this.props.isOn?l.getString("ToggleSwitch.OnWithTextAccessibilityLabel",{text:this.props.accessibilityLabel||""}):l.getString("ToggleSwitch.OffWithTextAccessibilityLabel",{text:this.props.accessibilityLabel||""}),i=o.default.buttonAccessibilityInfo(e,!!this.props.disable);return n.createElement(n.Button,{ref:this._onComponentRef,style:h.container,onPress:this.props.disable?void 0:this._onPress,title:i.accessibilityLabel,accessibilityTraits:i.accessibilityTraits,onAccessibilityTapIOS:this.props.disable?void 0:this._onAccessibilityTapIOS,disabled:this.props.disable},n.createElement(a.default,{style:this.props.style},this.props.children,t))}return n.createElement(n.View,{style:this.props.style},this.props.children,t)}}t.default=p},4736:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActionButton=t.ActionButtonSize=void 0;const n=i(70655),o=i(67294),s=i(38933),a=i(98356),r=i(16778),l=i(10102),c=i(46096),d=i(10117),u=i(36237),g=i(15877),h=(i(33754),i(89808)),p=i(81760),m=i(11828),S=i(24576),C=i(97634),f=i(53374);var y;!function(e){e[e.Default=0]="Default",e[e.Small=1]="Small",e[e.Tiny=2]="Tiny",e[e.FAB=3]="FAB"}(y=t.ActionButtonSize||(t.ActionButtonSize={}));const _=m.IconSize.size24,v=m.IconSize.size20,b=m.IconSize.size16,T=(0,g.lazyProperties)({container:()=>r.Styles.createViewStyle({height:60,width:60,alignItems:"center",justifyContent:"center",overflow:"visible"}),containerSmall:()=>r.Styles.createViewStyle({height:44,width:44,alignItems:"center",justifyContent:"center",overflow:"visible"}),containerTiny:()=>r.Styles.createViewStyle({height:44,width:44,alignItems:"center",justifyContent:"center",overflow:"visible"}),containerFAB:()=>r.Styles.createViewStyle({height:64,width:64,alignItems:"center",justifyContent:"center",overflow:"visible"}),backgroundView:()=>r.Styles.createViewStyle({position:"absolute",height:60,width:60,borderRadius:30,top:0,left:0,alignItems:"center",justifyContent:"center"}),backgroundViewSmall:()=>r.Styles.createViewStyle({position:"absolute",height:40,width:40,borderRadius:20,top:2,left:2,alignItems:"center",justifyContent:"center"}),backgroundViewTiny:()=>r.Styles.createViewStyle({position:"absolute",height:30,width:30,borderRadius:15,top:7,left:7,alignItems:"center",justifyContent:"center"}),backgroundViewFAB:()=>r.Styles.createViewStyle({position:"absolute",height:56,width:56,borderRadius:28,top:4,left:4,alignItems:"center",justifyContent:"center"}),thickBorder:()=>r.Styles.createViewStyle({borderWidth:2}),backgroundNoBorder:()=>r.Styles.createViewStyle({borderColor:p.Color.transparent,borderWidth:0}),iconViewDisabled:()=>r.Styles.createViewStyle({opacity:.5}),sendIconView:()=>r.Styles.createViewStyle({marginLeft:2}),sendIconViewRTL:()=>r.Styles.createViewStyle({marginRight:2}),flippedView:()=>r.Styles.createViewStyle({transform:[{scaleX:-1}]}),shadow:()=>r.Styles.createViewStyle({overflow:"visible",shadowColor:p.Color.blackOverlay20,shadowOpacity:.25,shadowRadius:2,shadowOffset:{height:2,width:0},elevation:2})});class P extends S.default{constructor(){super(...arguments),this._buttonRef=(0,o.createRef)()}_buildState(e,t){const i=e.backgroundColor?void 0:e.userColor?l.gradientColorsForColorInfo(e.userColor):e.reverseGradientColor?h.default.getReversedGradientColors():h.default.getGradientColors(),[,n]=null!=i?i:[],o={gradientColors:i,defaultHoverColors:n&&[n,n]};return t&&(o.isHovering=!1),o}requestFocus(){var e;null===(e=this._buttonRef.current)||void 0===e||e.requestFocus()}_useAccessibleTheme(){return this.props.themeOverride?C.isAccessibleTheme(this.props.themeOverride):super._useAccessibleTheme()}render(){return r.createElement(A,Object.assign({primaryBackgroundColor:this._themeColors.primaryBackgroundColor,headerIconColor:this._themeColors.headerIconColor,isUseAccessibleTheme:this._useAccessibleTheme(),buttonBackgroundColorStyle:this._themeStyles.buttonBackgroundColorStyle,primaryViewColorStyle:this._themeStyles.primaryViewColorStyle,primaryBorderColorStyle:this._themeStyles.primaryBorderColorStyle,defaultHoverColors:this.state.defaultHoverColors,gradientColors:this.state.gradientColors},this.props,{ref:this._buttonRef}))}}t.ActionButton=P;const A=(0,o.memo)((0,o.forwardRef)(((e,t)=>{var{accessibilityLabel:i,accessibilityTraits:l,autoFocus:g,backgroundColor:h,buttonBackgroundColorStyle:S,defaultHoverColors:C,deselected:P,disabled:A,disabledOpacity:k,flipIcon:I,gradientColors:w,headerIconColor:N,hideBorder:M,icon:E,iconColor:x,iconSize:L,isUseAccessibleTheme:R,importantForAccessibility:D,primaryBackgroundColor:B,primaryBorderColorStyle:O,primaryViewColorStyle:F,size:V,style:U,tabIndex:H,title:W,useSmallIcon:z,onHoverStart:G,onHoverEnd:K}=e,j=(0,n.__rest)(e,["accessibilityLabel","accessibilityTraits","autoFocus","backgroundColor","buttonBackgroundColorStyle","defaultHoverColors","deselected","disabled","disabledOpacity","flipIcon","gradientColors","headerIconColor","hideBorder","icon","iconColor","iconSize","isUseAccessibleTheme","importantForAccessibility","primaryBackgroundColor","primaryBorderColorStyle","primaryViewColorStyle","size","style","tabIndex","title","useSmallIcon","onHoverStart","onHoverEnd"]);const q=(0,o.useRef)(null),[Q,X]=(0,o.useState)(!1),J=(0,o.useRef)(null);(0,o.useImperativeHandle)(t,(()=>({requestFocus:()=>{var e;return null===(e=J.current)||void 0===e?void 0:e.requestFocus()},blur:()=>{var e;return null===(e=J.current)||void 0===e?void 0:e.blur()}})));const[$,Y,Z]=(0,o.useMemo)((()=>{let e,t,i=[];switch(V){case y.Small:t=[T.backgroundViewSmall],i.push(T.containerSmall),e=T.containerSmall;break;case y.Tiny:t=[T.backgroundViewTiny],i.push(T.containerTiny),e=T.containerTiny;break;case y.FAB:t=[T.backgroundViewFAB,T.shadow],i.push(T.containerFAB),e=T.containerFAB;break;default:case y.Default:t=[T.backgroundView],i.push(T.container),e=T.container}return U&&i.push(U),[i,e,t]}),[U,V]),ee=(0,o.useMemo)((()=>{let e,t,i=[];return e=L||(V===y.Tiny?b:z?v:_),t=x||(P?N:R?B:p.Color.white),E===m.SkypeIcon.Send&&i.push(I?T.sendIconViewRTL:T.sendIconView),A&&1===k&&i.push(T.iconViewDisabled),I&&i.push(T.flippedView),r.createElement(d.IconView,{icon:E,size:e,color:t,style:i})}),[P,A,k,I,N,E,x,L,R,B,V,z]),te=(0,o.useMemo)((()=>{let e;if(h)e=r.createElement(r.View,{style:[...Z,r.Styles.createViewStyle({backgroundColor:h},!1)]},ee);else if(P)e=r.createElement(r.View,{style:[...Z,S]},ee);else if(R){const t=[...Z,F,O,T.thickBorder];M&&t.push(T.backgroundNoBorder),e=r.createElement(r.View,{style:t},ee)}else w&&(e=r.createElement(s.GradientView,{style:Z,colors:Q?C:w,direction:s.GradientDirection.BOTTOM_RIGHT},ee));return e}),[ee,h,Z,S,C,P,w,M,Q,R,F,O]),[ie,ne]=(0,o.useMemo)((()=>{let e=l||[r.Types.AccessibilityTrait.Button],t=i||W;return A&&(Array.isArray(e)?e.push(r.Types.AccessibilityTrait.Disabled):e=[e,r.Types.AccessibilityTrait.Disabled]),[e,t]}),[A,W,i,l]),[oe,se]=(0,o.useState)(!1),ae=(0,o.useCallback)((()=>{!A&&se(!0)}),[A]),re=(0,o.useCallback)((()=>{se(!1)}),[]),le=(0,o.useCallback)((e=>{X(!0),null==G||G(e)}),[G]),ce=(0,o.useCallback)((e=>{X(!1),se(!1),null==K||K(e)}),[K]),de=(0,o.useRef)(),ue=(0,o.useRef)(new r.Animated.Value(1)).current;return(0,o.useEffect)((()=>{var e;if(!q.current)return;null===(e=de.current)||void 0===e||e.stop();const t=oe?.9:1,i=f.default.newCauseId();return u.log(c.LogTraceArea.SXAnimated,"ActionButton._internalUpdateButton causeId: "+i),de.current=q.current.getAnimation({scale:{toValue:t,easing:a.Easing.SkypeExpoInOut5,duration:a.Common.Duration.Tiny}},i),de.current.start((()=>{de.current=void 0})),()=>{var e;null===(e=de.current)||void 0===e||e.stop()}}),[oe,ue]),r.createElement(a.View,{ref:q,style:$},r.createElement(r.Button,Object.assign({accessibilityLabel:ne,accessibilityTraits:ie,autoFocus:g,disabled:A,disabledOpacity:k,disableTouchOpacityAnimation:!0,importantForAccessibility:D,onHoverEnd:ce,onHoverStart:le,onPressIn:A?void 0:ae,onPressOut:A?void 0:re,style:Y,tabIndex:H,title:W,ref:J},j),te))})));t.default=P},50940:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(39696),a=i(98278),r=i(15877),l=i(78780),c=i(53374),d=(0,r.lazyProperties)({extraSmall:()=>n.Styles.createViewStyle({width:20,height:20}),small:()=>n.Styles.createViewStyle({width:40,height:40}),medium:()=>n.Styles.createViewStyle({width:60,height:60}),large:()=>n.Styles.createViewStyle({width:80,height:80})});class u extends o.ComponentBase{render(){let e,t;switch(this.props.size){case a.SXActivityIndicatorSize.ExtraSmall:e=d.extraSmall;break;case a.SXActivityIndicatorSize.Small:e=d.small;break;case a.SXActivityIndicatorSize.Medium:e=d.medium;break;case a.SXActivityIndicatorSize.Large:e=d.large;break;default:e=c.default.switchStatementExhaustiveChecking(this.props.size)}switch(this.props.size){case a.SXActivityIndicatorSize.ExtraSmall:t=l.default.CIRCLE_SPINNER_40;break;default:case a.SXActivityIndicatorSize.Small:case a.SXActivityIndicatorSize.Medium:case a.SXActivityIndicatorSize.Large:t=l.default.CIRCLE_SPINNER}return n.createElement(n.View,{style:[e,this.props.style]},n.createElement(s.default,{animation:t,loop:!0,delay:this.props.deferTimeMs,hiddenWhileWaiting:!!this.props.deferTimeMs,tintColor:this.props.tintColor,sizeToFit:!0}))}}t.default=u},81806:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(63297),s=i(63795),a=i(16778),r=i(88837),l=i(89391),c=i(41190),d=i(65976),u=i(38566),g=i(98278),h=i(62602),p=i(16402),m=i(46096),S=i(52115),C=i(13944),f=i(10117),y=i(36237),_=i(16724),v=i(15877),b=i(33754),T=i(65822),P=i(12056),A=i(86045),k=i(4057),I=i(15415),w=i(81760),N=i(11828),M=i(82176),E=i(19675),x=i(15188),L=i(26712),R=i(53374);var D,B;!function(e){e[e.Loading=0]="Loading",e[e.Loaded=1]="Loaded",e[e.Failed=2]="Failed"}(D||(D={})),function(e){e[e.NotStarted=0]="NotStarted",e[e.Playing=1]="Playing",e[e.Paused=2]="Paused"}(B||(B={}));const O=N.IconSize.size24,F=O-12,V=(0,v.lazyProperties)({controlsContainer:()=>a.Styles.createViewStyle({flex:1,alignSelf:"stretch",alignItems:"center",flexDirection:"row",justifyContent:"center"}),progressContainer:()=>a.Styles.createViewStyle({flex:1,flexDirection:"column",marginRight:8,width:196,marginTop:10,marginBottom:4}),loadingContainer:()=>a.Styles.createViewStyle({backgroundColor:"transparent",position:"absolute",top:0,bottom:0,left:0,right:0,justifyContent:"center",alignItems:"center"}),gestureView:()=>a.Styles.createViewStyle({flex:1,alignSelf:"stretch",flexDirection:"row",marginTop:14}),progressTrack:()=>a.Styles.createViewStyle({flex:1,height:4,borderRadius:4,backgroundColor:w.Color.blackOverlay20}),progressBar:()=>a.Styles.createViewStyle({position:"absolute",top:0,bottom:0,width:0,left:0,height:4,borderRadius:4,backgroundColor:w.Color.gray400}),icon:()=>a.Styles.createViewStyle({padding:12}),fileName:()=>a.Styles.createTextStyle({color:w.Color.gray400}),timer:()=>a.Styles.createTextStyle({marginTop:3})});class U extends r.ComponentBase{constructor(){super(...arguments),this._progressBarAnimatedValue=new a.Animated.Value(0),this._progressBarAnimatedStyle=a.Styles.createAnimatedViewStyle({width:this._progressBarAnimatedValue}),this._attemptedTokenRefresh=!1,this._onProgressViewRef=e=>{this._progressView=e||void 0},this._onProgressBarTap=e=>{this._progressView&&h.default.measureLayoutRelativeToWindow((()=>this._progressView)).then((t=>{if(this.isComponentMounted()){const i=e.pageX-t.x;let n=this._progressBarWidth?i/this._progressBarWidth:0;const o=this.state.duration||0;A.default.isMobileScreenReaderEnabled()&&(n=0),n=Math.max(n,0),n=Math.min(n,1),this._progressBarAnimatedValue.setValue(n),this._seekTo(n*o)}}),(e=>{y.warn(m.LogTraceArea.AudioPlayer,"Progress bar component not measured: "+k.default.errorAsString(e))}))},this._onLayoutProgress=e=>{this._progressBarWidth=e.width,this._getProgressBarPosition()},this.onPausePlay=e=>{e&&e.stopPropagation();const t=R.default.newCauseId();y.log(m.LogTraceArea.AudioPlayer,"onPausePlay causeId:",t),this.state.playbackState===B.Playing?(this._queueToPlay=!1,this._pause(t),this.setState({playbackState:B.Paused})):(this.state.playbackState===B.NotStarted&&this.props.message&&y.track(new P.MessageContentClicked(this.props.message)),this.state.playerState!==D.Loaded?(this._createPlayerIfNotExists(this.props.contentUrl,this.props.contentExtension),this._queueToPlay=!0,this._telemetryEvent=new _.FileReceived(this.props.contentUrl,void 0,M.default.extractExtensionForTelemetry(this.props.displayFilename)),this._telemetryEvent.startDownload(),this.setState({playerState:D.Loading,playbackState:B.Playing})):this.setState({playbackState:B.Playing}))}}_buildState(e,t){const i=this.props,o={isUploading:L.default.isFileOrBlob(e.contentUrl),isDurationEnabled:l.default.getS4LMessagingFeatures().enableAudioMessageDuration};if(t&&(this._audioManagerClient=new u.default(u.AudioManagerSource.AudioPlayer),o.playbackState=B.NotStarted),t||e.contentUrl!==i.contentUrl&&this.state&&this.state.playbackState===B.NotStarted){const t=R.default.newCauseId();y.log(m.LogTraceArea.AudioPlayer,"AudioNode.buildState side effect causeId: "+t),this._releaseAudioPlayer(t),this._attemptedTokenRefresh=!1,o.progressInSeconds=0,o.duration=n.isUndefined(e.defaultDurationMs)?void 0:Math.round(e.defaultDurationMs/1e3)}const s=T.default.getActivePlayerToken();return t||this._playerToken===s||this.state.playbackState!==B.Playing||(this._queueToPlay=!1,o.playbackState=B.Paused),o}componentDidMount(){super.componentDidMount(),d.checkIfSafeDomainToRender(this.props.contentUrl,this.props.origin),this._playerToken=T.default.registerAsPlayer()}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),e.contentUrl!==this.props.contentUrl&&d.checkIfSafeDomainToRender(this.props.contentUrl,this.props.origin);const s=R.default.newCauseId();if(y.log(m.LogTraceArea.AudioPlayer,"componentDidUpdate causeId:",s),this.state.playerState!==D.Loaded||this.state.playbackState!==B.Playing||this._audioManagerClient.hasToken())this.state.playbackState===B.Paused&&this._pause(s);else{const e=A.default.isMobileScreenReaderEnabled()?o.AudioModes.AudioPlaybackWithScreenReader:o.AudioModes.AudioPlayback;this._audioManagerClient.requestMode(e,s).then((e=>{e&&this.isComponentMounted()&&this.state.playbackState===B.Playing&&this._player&&(n.isUndefined(this._playerToken)||T.default.setAsActive(this._playerToken),this._player.play(this.props.autoloop,!0))}))}this._getProgressBarPosition()}componentWillUnmount(){super.componentWillUnmount();const e=R.default.newCauseId();y.log(m.LogTraceArea.AudioPlayer,"componentWillUnmount causeId:",e),this._releaseAudioPlayer(e)}_createPlayerIfNotExists(e,t){this._player||this._createPlayer(e,t)}_createPlayer(e,t){this._player=s.Audio.openFile(e,t,s.AudioPlayerSoundType.Media),this._player.progressEvent.subscribe((e=>{this.isComponentMounted()&&n.isNumber(e.currentPosition)&&e.currentPosition>0&&this.state.duration&&this.state.duration>0&&this.setState({progressInSeconds:e.currentPosition})})),this._player.endedEvent.subscribe((()=>{const t=R.default.newCauseId();y.log(m.LogTraceArea.AudioPlayer,"playerEndedEvent causeId:",t),this._audioManagerClient.release(t),this.isComponentMounted()&&(e!==this.props.contentUrl&&this._releaseAudioPlayer(t),this.setState({playbackState:B.NotStarted,progressInSeconds:0}))})),this._player.loadedEvent.subscribe((e=>{if(this._telemetryEvent?(this._telemetryEvent.setSuccess(!0),this._telemetryEvent.endDownload(),y.track(this._telemetryEvent),this._telemetryEvent=void 0):y.log(m.LogTraceArea.AudioPlayer,"Audio playback telemetry was not sent"),this.isComponentMounted()){let t=B.NotStarted;this._queueToPlay&&(t=B.Playing),this.setState({playbackState:t,duration:Math.ceil(e.duration),playerState:D.Loaded})}})),this._player.errorEvent.subscribe((i=>{var o;const s=R.default.newCauseId();y.log(m.LogTraceArea.AudioPlayer,"playerErrorEvent causeId:",s),(null===(o=null==i?void 0:i.error)||void 0===o?void 0:o.code)&&y.error(m.LogTraceArea.AudioPlayer,"playerErrorEvent MediaError:",i.error.code),this._player&&!this._attemptedTokenRefresh?(this._attemptedTokenRefresh=!0,c.attemptTokenRefresh(e).then((()=>{this._player&&(this._player.release(),this._createPlayer(e,t))}),n.noop)):(this._releaseAudioPlayer(s),this.isComponentMounted()&&this.setState({playerState:D.Failed}),this._telemetryEvent&&(this._telemetryEvent.setSuccess(!1),this._telemetryEvent.endDownload(),y.track(this._telemetryEvent),this._telemetryEvent=void 0),y.error(m.LogTraceArea.AudioPlayer,"Audio playback failed to initialize."))}))}_releaseAudioPlayer(e){y.log(m.LogTraceArea.AudioPlayer,"_releaseAudioPlayer causeId:",e),this._audioManagerClient.release(e),this._player&&this._player.release(),this._player=void 0,this._queueToPlay=!1,this._telemetryEvent=void 0}render(){const e=this.props.playerStyles||{},t=e.iconColor||w.Color.gray400,i=e.iconHoverColor||w.Color.gray200,n=[V.icon],o=[V.progressContainer];e.progressContainerStyle&&o.push(e.progressContainerStyle);const s=[V.progressTrack];e.progressTrackColor&&s.push(a.Styles.createViewStyle({backgroundColor:e.progressTrackColor},!1));const r=[V.progressBar,this._progressBarAnimatedStyle];e.progressBarColor&&r.push(a.Styles.createViewStyle({backgroundColor:e.progressBarColor},!1));const l=[V.timer];let c;e.timerColor&&l.push(a.Styles.createTextStyle({color:e.timerColor},!1)),c=e.fileNameColor?a.Styles.createTextStyle({color:e.fileNameColor},!1):V.fileName;const d=p.default.getElapsedTimePartsFromS(this.state.progressInSeconds),u=b.getString("AccessibilityLabel.NumberOfMinutesSecondsPlayed",{minuteCount:d.minutes,secondCount:d.seconds});let h,y,_;if(this.state.playerState===D.Failed)h=a.createElement(f.default,{icon:N.SkypeIcon.Warning,size:O,color:t});else{const e=this.state.progressInSeconds?u:"";let n;n=this.state.playbackState===B.Playing?this.props.origin===m.AudioPlayerOrigin.SwiftCard?b.getString("AccessibilityLabel.SwiftCardPauseButton"):b.getString("AccessibilityLabel.PauseButton"):this.props.origin===m.AudioPlayerOrigin.SwiftCard?b.getString("AccessibilityLabel.SwiftCardPlayButton",{timeElapsedLabel:e}):b.getString("AccessibilityLabel.PlayButton",{timeElapsedLabel:e}),h=a.createElement(C.default,{size:O,color:t,hoverColor:i,icon:this.state.playbackState!==B.Playing?N.SkypeIcon.Play:N.SkypeIcon.Pause,onPress:this.onPausePlay,title:n,accessibilityLabel:n})}if(this.state.playerState===D.Loading?y=a.createElement(a.View,{style:V.loadingContainer},a.createElement(I.default,{size:g.SXActivityIndicatorSize.Medium,tintColor:t})):this.state.isUploading&&(y=a.createElement(x.default,{contentUrls:[this.props.contentUrl],strokeColor:t,size:F})),h=a.createElement(a.View,{style:n},y,h),this.props.renderInformationOnstop&&this.state.playbackState!==B.Playing)_=a.createElement(a.View,{style:o},a.createElement(E.BodyText,{style:c,numberOfLines:1,ellipsizeMode:"middle"},this.props.displayFilename),a.createElement(E.Caption,{style:l},S.default.formatFileSize(this.props.fileSizeInBytes||0,1).formattedString));else{const e=this.state.playerState===D.Failed?b.getString("ConfirmationDialog.ReportFailMessage"):this.state.playbackState!==B.Playing?b.getString("AccessibilityLabel.SeekToStart"):b.getString("AccessibilityLabel.ReplayButton");let t,i=this.state.progressInSeconds;if(this.state.isDurationEnabled){const e=this.state.duration||0;i=this.state.playbackState===B.NotStarted?e:this.state.progressInSeconds}t=p.default.getElapsedTimeStringFromS(i),_=a.createElement(a.View,{style:o},a.createElement(a.GestureView,{ref:this._onProgressViewRef,style:V.gestureView,onTap:this._onProgressBarTap,mouseOverCursor:a.Types.GestureMouseCursor.Pointer,accessibilityLabel:e,accessibilityTraits:a.Types.AccessibilityTrait.Button,importantForAccessibility:void 0},a.createElement(a.View,{style:s,onLayout:this._onLayoutProgress}),a.createElement(a.Animated.View,{style:r})),a.createElement(a.View,{accessibilityLabel:u},a.createElement(a.Text,{style:l,importantForAccessibility:a.Types.ImportantForAccessibility.No},t)))}return a.createElement(a.View,{style:[V.controlsContainer,this.props.style],importantForAccessibility:this.props.importantForAccessibility},h,_)}_pause(e){y.log(m.LogTraceArea.AudioPlayer,"_pause causeId:",e),this._player&&this._player.pause(),this._audioManagerClient.release(e)}_seekTo(e){this.state.playerState!==D.Failed&&this._player&&this._player.seek(e)}_getProgressBarPosition(){const e=this.state.progressInSeconds&&this.state.duration?Math.min(this.state.progressInSeconds/this.state.duration,1):0;this._progressBarAnimatedValue.setValue(e*(this._progressBarWidth||0))}}t.default=U,U.MediaType="Audio"},39696:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(48184),s=i(16778),a=i(88837),r=i(89391),l=i(36801),c=i(80837);class d extends a.ComponentBase{constructor(){super(...arguments),this._animationCount=0,this._animatedOpacityValue=new s.Animated.Value(0),this._animatedOpacityStyle=s.Styles.createAnimatedViewStyle({opacity:this._animatedOpacityValue}),this._onAEAnimationViewRef=e=>{this._aeAnimationView=e||void 0,this._aeAnimationView&&(this.props.startPaused?this._aeAnimationView.reset():this.props.delay?(this._aeAnimationView.reset(),n.delay((()=>{this.isComponentMounted()&&this.play()}),this.props.delay)):this._aeAnimationView.play())}}_buildState(e,t){return{isEnabled:r.default.getS4LUiFeatures().jsonAnimationEnabled}}UNSAFE_componentWillMount(){super.UNSAFE_componentWillMount(),this._currentAnimation=this._getAnimationContext(this.props)}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i),this.props.animation.key===e.animation.key&&this.props.tintColor===e.tintColor||(this._animationCount++,this._currentAnimation=this._getAnimationContext(e))}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.props.animation.key!==e.animation.key&&this._aeAnimationView&&this.isComponentMounted()&&this._aeAnimationView.play()}play(){this._animatedOpacityValue.setValue(1),this._aeAnimationView&&this._aeAnimationView.play()}reset(){this._aeAnimationView&&this._aeAnimationView.reset()}_getAnimationContext(e){return l.default.getAssetSourceWithColor(e.animation,e.tintColor)}render(){const e=this.props.animation;let t=this._currentAnimation&&this.state.isEnabled?s.createElement(o.default,Object.assign({},this._currentAnimation,{key:"animation"+this._animationCount,ref:this._onAEAnimationViewRef,style:c.default.flexOne,loop:this.props.loop})):null;if(this.props.hiddenWhileWaiting&&(t=s.createElement(s.Animated.View,{style:[c.default.flexOne,this._animatedOpacityStyle]},t)),this.props.sizeToFit)return t;{const i=this.props.shortSide||(this.props.preferHeight?e.intrinsicSize.height:e.intrinsicSize.width),n=i/(this.props.preferHeight?e.intrinsicSize.height:e.intrinsicSize.width),o=s.Styles.createViewStyle({width:this.props.preferHeight?n*e.intrinsicSize.width:i,height:this.props.preferHeight?i:n*e.intrinsicSize.height},!1);let a=s.createElement(s.View,{style:o},t);if(e.containerSize){const t=e.containerOffset?e.containerOffset.y*n:0,o=e.containerOffset?e.containerOffset.x*n:0,r=s.Styles.createViewStyle({width:this.props.preferHeight?n*e.containerSize.width:i,height:this.props.preferHeight?i:n*e.containerSize.height,top:t<0?t:0,left:o<0?o:0,paddingTop:t>=0?t:0,paddingLeft:o>=0?o:0},!1);a=s.createElement(s.View,{style:r},a)}return a}}}t.default=d},77605:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BadgeCounter=t.BadgeSize=t.BorderWidth=void 0;const n=i(38933),o=i(16778),s=i(98278),a=i(66127),r=i(15877),l=i(30124),c=i(29130),d=i(81760),u=i(11010),g=i(60305),h=i(24576);var p,m;!function(e){e[e.None=0]="None",e[e.Thin=1]="Thin",e[e.Thick=2]="Thick"}(p=t.BorderWidth||(t.BorderWidth={})),function(e){e[e.Default=0]="Default",e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Desktop=3]="Desktop"}(m=t.BadgeSize||(t.BadgeSize={}));const S=(0,r.lazyProperties)({defaultBadge:()=>o.Styles.createViewStyle({justifyContent:"center",alignItems:"center",height:24,minWidth:24,borderRadius:12,backgroundColor:d.Color.gray300}),defaultBadgeSmall:()=>o.Styles.createViewStyle({height:12,minWidth:12,borderRadius:6}),defaultBadgeMedium:()=>o.Styles.createViewStyle({height:20,minWidth:20,borderRadius:10}),defaultBadgeText:()=>o.Styles.createTextStyle({color:d.Color.white,font:u.default.font.uiDisplayBold,fontSize:u.default.controlFontSize.smallBadge,lineHeight:u.default.controlFontSize.smallBadge,textAlign:"center",textAlignVertical:"center",backgroundColor:d.Color.transparent}),defaultBadgeTextSmall:()=>o.Styles.createTextStyle({fontSize:u.default.controlFontSize.tinyBadge,lineHeight:u.default.controlFontSize.tinyBadge}),defaultBadgeTextMedium:()=>o.Styles.createTextStyle({fontSize:u.default.controlFontSize.smallBadge,lineHeight:u.default.controlFontSize.smallBadge}),badgeDarkBackground:()=>o.Styles.createViewStyle({backgroundColor:d.Color.white}),badgeTextLight:()=>o.Styles.createTextStyle({color:d.Color.white}),badgeTextDark:()=>o.Styles.createTextStyle({color:d.Color.gray400}),badgeIOS:()=>o.Styles.createTextStyle({paddingTop:1}),badgeAndroid:()=>o.Styles.createViewStyle({paddingRight:.5}),badgeSingleDigit:()=>o.Styles.createViewStyle({width:24}),badgeSingleDigitSmall:()=>o.Styles.createViewStyle({width:12}),badgeSingleDigitMedium:()=>o.Styles.createViewStyle({width:20}),badgeDoubleDigit:()=>o.Styles.createViewStyle({paddingHorizontal:4}),badgeWithBorder:()=>o.Styles.createViewStyle({borderColor:d.Color.white,borderWidth:1,borderStyle:"solid"}),badgeWithThickBorder:()=>o.Styles.createViewStyle({borderColor:d.Color.white,borderWidth:2,borderStyle:"solid"}),gradientView:()=>o.Styles.createViewStyle({position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:d.Color.transparent}),gradientViewWithBorder:()=>o.Styles.createViewStyle({position:"absolute",left:-1,top:-1,right:0,bottom:0,backgroundColor:d.Color.transparent}),compositeNav:()=>(0,r.lazyProperties)({defaultBadge:()=>o.Styles.createViewStyle({height:16,borderRadius:8,minWidth:16,paddingHorizontal:4}),badgeSingleDigit:()=>o.Styles.createViewStyle({width:16})})});class C extends h.default{_buildState(e,t){const i=a.default.canModernizeConversationList();return{useMobileUI:l.default.isUsingStackNavigationContext()||!i&&g.default.useTabletUI(),contentSizeMultiplier:e.fixedSize?1:c.default.getContentSizeMultiplier()}}_useDesktopBadges(){return!this.state.useMobileUI||this.props.badgeSize===m.Desktop}render(){let e,t=[S.defaultBadge];const i=[S.defaultBadgeText],a=[S.badgeTextLight];if(this._useDesktopBadges()&&t.push(S.compositeNav.defaultBadge),this.props.darkBackground)t.push(S.badgeDarkBackground),a.push(S.badgeTextDark);else{const e=this.props.isHighPriority?this._themeStyles.primaryBadgeColorStyle:this._themeStyles.secondaryBadgeColorStyle;!this.props.colorStyle||e&&!this.props.themeOverride?e&&t.push(e):t.push(this.props.colorStyle),this._themeStyles.primaryBadgeTextColorStyle&&a.push(this._themeStyles.primaryBadgeTextColorStyle)}let r;if(this.props.badgeSize===m.Small?(i.push(S.defaultBadgeTextSmall),t.push(S.defaultBadgeSmall)):this.props.badgeSize===m.Medium&&(i.push(S.defaultBadgeTextMedium),t.push(S.defaultBadgeMedium)),this.props.rawCount&&this.props.rawCount<10?this.props.badgeSize===m.Small?t.push(S.badgeSingleDigitSmall):this.props.badgeSize===m.Medium?t.push(S.badgeSingleDigitMedium):t.push(this._useDesktopBadges()?S.compositeNav.badgeSingleDigit:S.badgeSingleDigit):t.push(S.badgeDoubleDigit),this.state.contentSizeMultiplier>1){let e=this._useDesktopBadges()?16:24;this.props.badgeSize===m.Small?e=12:this.props.badgeSize===m.Medium&&(e=20);const i=e*Math.min(this.state.contentSizeMultiplier,s.MaxContentSizeMultiplier);t.push(o.Styles.createViewStyle({borderRadius:i/2,height:i,minWidth:i},!1)),this.props.rawCount&&this.props.rawCount<10&&t.push(o.Styles.createViewStyle({width:i},!1))}this.props.gradientColors&&(r=o.createElement(n.GradientView,{style:[...t,this.props.borderColor?S.gradientViewWithBorder:S.gradientView],colors:this.props.gradientColors,direction:n.GradientDirection.BOTTOM_RIGHT})),(this.props.borderColor||this.props.borderWidth)&&(t.push(this.props.borderWidth===p.Thick?S.badgeWithThickBorder:S.badgeWithBorder),this.props.borderColor&&t.push(o.Styles.createViewStyle({borderColor:this.props.borderColor},!1))),i.push(a),t.push(this.props.style);const l=this.props.rawCount?o.createElement(o.Text,{style:i,numberOfLines:1,allowFontScaling:!this.props.fixedSize},this.props.count||""):void 0;return e=o.createElement(o.Animated.View,{style:[t,this.props.style],blockPointerEvents:this.props.blockPointerEvents,importantForAccessibility:this.props.importantForAccessibility},r,l),e}}t.BadgeCounter=C,t.default=C},47409:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarouselScrollViewBase=t.ScrollDirecton=t.CarouselHeaderMarginBottom=t.CarouselMarginTop=t.CarouselHeightWithHeader=t.CarouselHeightBase=void 0;const n=i(16778),o=i(15877),s=(i(40363),i(19675)),a=i(24576);t.CarouselHeightBase=150,t.CarouselHeightWithHeader=195,t.CarouselMarginTop=10,t.CarouselHeaderMarginBottom=10;const r=(0,o.lazyProperties)({containerWithHeader:()=>n.Styles.createViewStyle({alignItems:"stretch",height:t.CarouselHeightWithHeader}),heading:()=>n.Styles.createTextStyle({paddingLeft:10,paddingTop:20,marginBottom:t.CarouselHeaderMarginBottom}),headingRight:()=>n.Styles.createButtonStyle({justifyContent:"flex-start",paddingRight:10,paddingTop:20,marginBottom:t.CarouselHeaderMarginBottom}),headerContainerWrapper:()=>n.Styles.createViewStyle({flexDirection:"row",alignItems:"stretch",alignSelf:"stretch",justifyContent:"space-between"}),scrollView:()=>n.Styles.createViewStyle({flexDirection:"row",marginTop:t.CarouselMarginTop}),scrollViewRTL:()=>n.Styles.createViewStyle({flexDirection:"row-reverse"}),flippedView:()=>n.Styles.createViewStyle({transform:[{scaleX:-1}]}),scrollWithButtons:()=>n.Styles.createViewStyle({flexDirection:"row"})});var l;!function(e){e[e.Previous=0]="Previous",e[e.Next=1]="Next"}(l=t.ScrollDirecton||(t.ScrollDirecton={}));class c extends a.default{constructor(){super(...arguments),this._scrollLeft=0,this._scrollTop=0,this._useGestureTrap=!1,this._keyboardShouldPersistTaps=!1,this._titleRightOnPress=e=>{},this._onLayout=e=>{},this._renderScrollDirectionButton=()=>{},this._onTrapPan=()=>{},this._onMoveShouldSetResponder=e=>(e.preventDefault(),e.stopPropagation(),!1),this._onScrollViewRef=e=>{this._scrollViewRef=e},this._onScroll=(e,t)=>{this._scrollTop=e,this._scrollLeft=t}}_renderEmptyStateElement(){}_title(){}_titleRight(){}_height(){return t.CarouselHeightBase}_marginTop(){}_enableOnScroll(){return!1}setScrollLeft(e){this._scrollViewRef&&this._scrollViewRef.setScrollLeft(e,!0)}render(){if(this._elementCount()){const e=[r.scrollView];void 0!==this._marginTop()&&e.push(n.Styles.createViewStyle({marginTop:this._marginTop()},!1));const t=!1,i=this._renderElements(t),o=i?i.elements:void 0;let a;if(i&&i.useStaticContainer)a=n.createElement(n.View,{style:e},o);else{t&&(e.push(r.scrollViewRTL),e.push(r.flippedView));const i=this._getContext().isPresentedInTabView||this.props.preventBubblingOnSwipe,s={ref:this._onScrollViewRef,style:e,horizontal:!0,keyboardShouldPersistTaps:this._keyboardShouldPersistTaps,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!1,onMoveShouldSetResponder:i?this._onMoveShouldSetResponder:void 0,onScroll:this._enableOnScroll()?this._onScroll:void 0};a=n.createElement(n.ScrollView,Object.assign({},s),o),this._useGestureTrap&&i&&(a=n.createElement(n.GestureView,{onPan:this._onTrapPan,panPixelThreshold:5,releaseOnRequest:!1},a))}const c=this._title(),d=c?n.createElement(s.Subtitle,{style:r.heading},c):void 0,u=this._titleRight();let g,h;u&&(g=n.createElement(n.Button,{style:r.headingRight,onPress:this._titleRightOnPress,accessibilityLabel:u},n.createElement(s.Subtitle,{style:this._themeStyles.primaryTextColorStyle},u))),h=c||u?r.containerWithHeader:n.Styles.createViewStyle({alignItems:"stretch",height:this._height()},!1);const p=this._renderScrollDirectionButton(l.Previous),m=this._renderScrollDirectionButton(l.Next);return(p||m)&&(a=n.createElement(n.View,{style:r.scrollWithButtons},p,a,m)),n.createElement(n.View,{style:h,onLayout:this._onLayout},n.createElement(n.View,{style:r.headerContainerWrapper},d,g),a)}{const e=this._renderEmptyStateElement();if(!e)return null;const t=n.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"center",height:this._height()},!1);return n.createElement(n.View,{style:t},e)}}}t.CarouselScrollViewBase=c,t.default=c},13282:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(62602),s=i(39285),a=i(15877),r=i(74606),l=i(33754),c=i(24576),d=(0,a.lazyProperties)({checkboxButton:()=>n.Styles.createViewStyle({flexDirection:"column",alignSelf:"flex-start",alignItems:"center",justifyContent:"center"}),checkboxLabel:()=>n.Styles.createTextStyle({flex:-1,marginLeft:5,lineHeight:24}),checkboxButtonView:()=>n.Styles.createViewStyle({flexDirection:"row",alignSelf:"flex-start"}),secondaryTextStyle:()=>n.Styles.createTextStyle({paddingTop:4,paddingLeft:40,alignSelf:"stretch"})});class u extends c.default{constructor(){super(...arguments),this._onButtonRef=e=>{this._componentRef=e||void 0},this._onViewRef=e=>{this._componentRef=e||void 0},this._onKeyPress=e=>o.default.maybeHandleKeyPress(e,(()=>{this._onPress(e)})),this._onPress=e=>{e.stopPropagation();this.props.onShouldToggleCheckbox(!!this.props.value);this.props.onPress&&this.props.onPress(e)}}requestFocus(){this._componentRef&&this._componentRef.requestFocus()}render(){const e=[n.Types.AccessibilityTrait.CheckBox];let t="";this.props.value&&e.push(n.Types.AccessibilityTrait.Checked),this.props.accessibilityLabelPrefix&&(t+=`${this.props.accessibilityLabelPrefix}, `);const i=n.Button,o=this._onButtonRef;return t+=this.props.text,this.props.secondaryText&&(t+=" "+this.props.secondaryText),this.props.disable&&(t+=". "+l.getString("AccessibilityLabel.Disabled")),n.createElement(i,{ref:o,style:[d.checkboxButton,this.props.style],onPress:this.props.disable?void 0:this._onPress,onKeyPress:void 0,accessibilityTraits:e,accessibilityLabel:t,tabIndex:void 0,importantForAccessibility:n.Types.ImportantForAccessibility.Yes},n.createElement(s.default,{style:d.checkboxButtonView},n.createElement(r.default,{isOn:!!this.props.value,disable:this.props.disable,disableSelectionAnimation:this.props.disableSelectionAnimation}),n.createElement(n.Text,{style:[d.checkboxLabel,this.props.textStyle]},this.props.text)),this._secondaryText())}_secondaryText(){if(this.props.secondaryText)return n.createElement(s.HiddenText,{style:[d.secondaryTextStyle,this.props.secondaryTextStyle]},this.props.secondaryText)}_getCheckboxAccessibilityLabel(e,t){const i=this._getCheckboxCheckedState(t);return l.getString("FeedbackMechanism.AccLabelCheckbox",{checkboxTitle:e,state:i})}_getCheckboxCheckedState(e){return e?l.getString("FeedbackMechanism.AccLabelCheckboxChecked"):l.getString("FeedbackMechanism.AccLabelCheckboxUnchecked")}}t.default=u},44973:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeIcon=void 0;const n=i(96486),o=i(16778),s=i(39285),a=i(10117),r=i(80837),l=i(24576);class c extends l.default{constructor(){super(...arguments),this._iconForIconConfig=(e,t,i)=>{const s=[];return i&&s.push(r.default.absoluteFill),!n.isUndefined(t.opacity)&&t.opacity<1&&s.push(o.Styles.createViewStyle({opacity:t.opacity},!1)),o.createElement(a.default,{key:e,style:[s,this.props.style],size:this.props.iconSize||24,color:t.color||this.props.color||this._themeColors.primaryIconColor,icon:t.icon})}}render(){const e=n.map(this.props.icons,((e,t)=>this._iconForIconConfig("icon"+t,e,t>0)));return o.createElement(s.default,{style:this.props.style},e)}}t.CompositeIcon=c,t.default=c},73865:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DismissibleModalWrapperLoaded=void 0;const n=i(16778),o=i(88837),s=i(74634),a=i(32235),r=(i(15340),i(15877)),l=i(20751),c=i(81760),d=(0,r.lazyProperties)({modalInnerContainer:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch",backgroundColor:c.Color.transparent,overflow:"visible"})});t.DismissibleModalWrapperLoaded=new s.default;class u extends o.ComponentBase{constructor(){super(...arguments),this._arbitrateFocus=e=>(t.DismissibleModalWrapperLoaded.fire(),(0,a.arbitrateModalOrPopupFocus)("DismissibleModalWrapper",e))}componentWillUnmount(){super.componentWillUnmount(),this.props.onDismiss&&this.props.onDismiss(),t.DismissibleModalWrapperLoaded.dispose()}render(){return n.createElement(n.View,{style:d.modalInnerContainer,restrictFocusWithin:!0,arbitrateFocus:this._arbitrateFocus},this.props.children,n.createElement(l.default,{key:"miniToast"}))}}t.default=u},87134:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(15877),s=i(24576),a={},r={},l={},c={},d=(0,o.lazyProperties)({itemDivider:()=>n.Styles.createViewStyle({height:1,alignSelf:"stretch"})});class u extends s.default{render(){const e=this._getDividerStyle(this.props.marginLeft||0,this.props.marginRight||0,this.props.marginTop||0,this.props.marginBottom||0),t=this.props.color?n.Styles.createViewStyle({backgroundColor:this.props.color},!1):this.props.useLightTheme?this._themeStyles.headerShadowColorStyle:this._themeStyles.dividerColorStyle,i=[d.itemDivider,t,...e,this.props.style];return n.createElement(n.View,{style:i})}_getDividerStyle(e,t,i,o){let s=l[e],d=c[t],u=a[i],g=r[o];return s||(s=n.Styles.createViewStyle({marginLeft:e}),l[e]=s),d||(d=n.Styles.createViewStyle({marginRight:t}),c[t]=d),u||(u=n.Styles.createViewStyle({marginTop:i}),a[i]=u),g||(g=n.Styles.createViewStyle({marginBottom:o}),r[o]=g),[s,d,u,g]}}t.default=u},3782:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(15069),s=i(62698),a=i(33010),r=i(16778),l=i(97691),c=i(19784),d=i(89391),u=i(98172),g=i(2278),h=i(71908),p=i(61375),m=i(71830),S=i(77381),C=i(39549),f=i(57102),y=i(3291),_=i(3291),v=i(46096),b=i(53559),T=i(81020),P=i(36237),A=i(33754),k=i(18743),I=i(6286),w=i(12056),N=i(44972),M=i(4735),E=i(85207),x=i(15963),L=i(86045),R=i(55759),D=i(11010),B=i(26712),O=i(53374);class F extends S.default{constructor(){super(...arguments),this._dragAndDropCount=0,this._onDragEnter=e=>{e.preventDefault(),e.stopPropagation();const t=y.default.isContactEntityInDataTransfer(e)&&this._isDroppingContactAllowed(),i=y.default.isFileEntityFromConversationInDataTransfer(e)&&this._isDroppingFileFromConversationAllowed(),n=y.default.isDataTransferFilesFromDesktop(e)&&this._isDroppingFileFromDesktopAllowed();(t||i||n)&&0==this._dragAndDropCount++&&this.props.onDragEnter&&this.props.onDragEnter(e)},this._onDragOver=e=>{e.preventDefault(),e.stopPropagation(),o.BrowserEnvironment.supportsDragAndDropEffect()&&(e.dataTransfer.effectAllowed=_.DropEffect,e.dataTransfer.dropEffect=_.DropEffect)},this._onDragLeave=e=>{e.preventDefault(),e.stopPropagation(),0==--this._dragAndDropCount&&(this.props.onDragLeave&&this.props.onDragLeave(e),this._dragAndDropCount=0)},this._isMediaPreviewEnabled=e=>e&&I.default.isMediaPreviewEnabled(e)&&this.props.dropTargetSource===_.DropTargetOrigin.MessagePanel,this._maybeAddToGroupButton=e=>{if(!d.default.getS4LMessagingFeaturesNoSubscription().enableContactAddDragAndDrop)return;if(!e||!e.userMri||!this.props.conversationId)return;if(e.isS4B)return;const t=(0,C.default)().getConversation(this.props.conversationId);if(t&&(0,N.isRegularMemberInModeratedGroup)(t))return;const i=m.sanitizeMri(e.userMri,m.Namespaces.SkypeId);return t&&!t.isUserMember(i)?{text:A.getString("MessageStream.DragAndDropContactToGroupAddButton"),onPress:()=>this._onAddToGroupPress(i,t),textStyle:D.default.font.uiDisplayBold}:void 0},this._onAddToGroupPress=(e,t)=>{this.props.conversationId&&!m.isGroupConversation(this.props.conversationId)?this._maybeCreateNewGroupConversation(e):h.addMemberToThread(m.asSkypeThreadId(t.id),e,p.AddMemberToThreadSource.AddUserToGroupCallDragAndDrop)},this._onDragDrop=e=>{switch(e.preventDefault(),e.stopPropagation(),this._currentDragDropType=y.default.getDataTransferType(e),this._fileStringDrop=void 0,this._files=void 0,this._currentDragDropType){case _.DragDropType.ContactFromRecentsToConversation:const t=y.default.extractContactEntityFromDataTransfer(e);this._sendContact(t);break;case _.DragDropType.FileFromConversationToRecents:this.props.conversationId&&this._isDroppingFileFromConversationAllowed()&&(this._fileStringDrop=e.dataTransfer.getData(_.DragDropType.FileFromConversationToRecents),this.props.onDropStarted?this.props.onDropStarted():this.onDragDropContinue(this.props.conversationId));break;case _.DragDropType.FileFromDesktop:this._files=e.dataTransfer.files,this.props.onDropStarted?this.props.onDropStarted():this.onDragDropContinue(this.props.conversationId)}this.props.onDropCompleted&&this.props.onDropCompleted()},this._onContainerRef=e=>{this._container=e||void 0}}_sendFiles(e,t,i,n){if(!this._isMediaPreviewEnabled(n)&&n){const o=this.props.callId;if(o){const s={callId:this.props.callId,scenarioInfo:t,properties:i};E.default.postUpload([n],e,v.PostSource.DragDrop,!1,s,this._getRootViewType()).then((()=>{t.name===x.ScenarioName.SendPicture&&(g.default.updateCallTelemetry(o,"MediaPicker",(e=>e.postMediaPickerPhotoReaction())),L.default.maybeAnnounceForAccessibility(A.getString("MessageComposer.FileSentLabel")))}))}else{const o={scenarioInfo:t,properties:i};E.default.postUpload([n],e,v.PostSource.DragDrop,!1,o,this._getRootViewType()).then((()=>{L.default.maybeAnnounceForAccessibility(A.getString("MessageComposer.FileSentLabel"))}))}}}_navigateToConversation(e){P.log(v.LogTraceArea.Navigation,"DragAndDropTarget._navigateToConversation, causeId: "+e.causeId),M.default.navigateToConversation(e)}_maybeCreateNewGroupConversation(e){if(!this.props.conversationId)return;const t=(0,C.default)().getConversation(this.props.conversationId),i=t?[...t.getMemberMrisWithoutMe(),e]:[],n=v.NavigationConversationOrigin.DragDropFromConversationToRecentLists,o=O.default.newCauseId();return f.ConversationUtils.createNewGroupConversationFromOneOnOne(i,n).then((e=>{this._navigateToConversation({causeId:o,convId:e,origin:n,isNewConversation:!0})}))}_sendContact(e){if(this._dragAndDropCount=0,!e||!e.skypeId)return;if(!this._isDroppingContactAllowed())return;const{enableContactAddDragAndDrop:t}=d.default.getS4LMessagingFeaturesNoSubscription();if(this.props.conversationId&&!m.isGroupConversation(this.props.conversationId)&&!t)return void this._handleContactDrop(e);const i=this._maybeAddToGroupButton(e);if(i){const t=[{text:A.getString("MessageStream.DragAndDropContactToGroupShareButton"),onPress:()=>this._handleContactDrop(e),textStyle:D.default.font.uiDisplayBold},i,{text:A.getString("Global.CancelLabel"),isCancel:!0}],n=A.getString("MessageStream.DragAndDropContactToGroupChatTitleWithAdd"),o=A.getString("MessageStream.DragAndDropContactToGroupChatConfirmationWithAdd",{displayName:e.fullName});c.default.showWithOptions({title:n,dialogAccessibilityTitle:n,message:o,buttons:t,rootViewId:this._getRootViewId(),useFocussedWindowFallback:!0})}else{let i=A.getString("MessageStream.DragAndDropContactToGroupChatConfirmation",{displayName:e.fullName});const n=A.getString("MessageStream.DragAndDropContactToGroupChatTitle");t&&!e.isS4B&&(i=A.getString("MessageStream.DragAndDropContactToGroupChatConfirmationAlreadyExistingParticipant",{displayName:e.fullName})),c.default.showWithOptions({title:n,dialogAccessibilityTitle:n,message:i,rootViewId:this._getRootViewId(),buttons:[{text:A.getString("Global.ConfirmLabel"),textStyle:D.default.font.uiDisplayBold,onPress:()=>this._handleContactDrop(e)},{text:A.getString("Global.CancelLabel"),isCancel:!0}]})}}onDragDropContinue(e){switch(this._currentDragDropType){case _.DragDropType.FileFromConversationToRecents:e&&(m.isEncryptedThread(e)?this._showCannotSendFileAlert():(this._dragAndDropCount=0,y.default.dropFileFromConversationToRecents(e,void 0,this._fileStringDrop)));break;case _.DragDropType.FileFromDesktop:this._files&&this._isDroppingFileFromDesktopAllowed()&&this.uploadFiles(this._files,e)}}uploadFiles(e,t){this._dragAndDropCount=0;const i=[],o=[],r=this._isMediaPreviewEnabled(t);n.each(e,(e=>{const l=b.default.extractFileExtension(e.name);let c={file:e,extension:l};if(b.default.isImageExtension(l))o.push(s.default.getImageSize(B.default.getFileUrl(c)).then((e=>{e&&(c.dimensions=e),i.push(c);const n={name:x.ScenarioName.SendPicture};let o=this.props.parentConversationId?u.default.getReactionsThreadPostParams(this.props.parentConversationId):void 0;this._sendFiles(c,n,o,t)})));else if(b.default.isVideoExtension(l))o.push(a.default.captureFrameFromVideo(URL.createObjectURL(e)).then((o=>{if(o&&o.blob&&o.blob.size>0){let i=o.blob,s=e.name;const a=e.name.lastIndexOf(".");if(a>0&&(s=s.substr(0,a)+"-thumbnail."+o.extension),n.attempt((()=>i.name=s)),n.attempt((()=>i.lastModifiedDate=new Date(e.lastModified))),c.thumbnail={file:i,extension:o.extension},o.width>=0&&o.height>=0){const e={width:o.width,height:o.height};c.dimensions=e,c.thumbnail.dimensions=e}if(t&&!r){const e={name:x.ScenarioName.SendVideo};E.default.postVideoWithThumbnail([t],c,v.PostSource.DragDrop,!1,e)}}else{const e={name:x.ScenarioName.SendFile};this._sendFiles(c,e,void 0,t)}i.push(c)})));else{if(t){const e={name:x.ScenarioName.SendFile},i=this.props.parentConversationId?u.default.getReactionsThreadPostParams(this.props.parentConversationId):void 0;this._sendFiles(c,e,i,t)}i.push(c)}})),l.all(o).then((()=>{if(t&&r)return I.default.addPreviews(i,t,v.PostSource.DragDrop);P.track(new k.FilesSentViaPicker(this.props.origin,0,!1,n.map(i,(e=>e.extension)))),this.props.onFileDataCallback&&this.props.onFileDataCallback(i)}))}render(){return this._isDroppingAllowed()?r.createElement(r.View,{ref:this._onContainerRef,style:this.props.style,onDragEnter:this._onDragEnter,onDragOver:this._onDragOver,onDragLeave:this._onDragLeave,onDrop:this._onDragDrop},this.props.children):r.createElement(r.View,{ref:this._onContainerRef,style:this.props.style},this.props.children)}_handleContactDrop(e){this.props.conversationId&&(R.shareContact(e,this.props.conversationId,v.PostSource.DragDrop),P.track(new w.ShareContactsTelemetry(T.ShareContactOrigin.DragAndDrop,this.props.conversationId,e.isPstn?1:0,e.isPstn?0:1,!1)))}requestFocus(){this._container&&this._container.requestFocus()}_isDroppingContactAllowed(){return this.props.conversationId&&!m.isEncryptedThread(this.props.conversationId)&&!m.isS4BBridgeMri(this.props.conversationId)&&this.props.dropTargetSource===_.DropTargetOrigin.MessagePanel}_isDroppingFileFromConversationAllowed(){return this.props.conversationId&&!m.isS4BBridgeMri(this.props.conversationId)&&this.props.dropTargetSource===_.DropTargetOrigin.ConversationListItem}_isDroppingFileFromDesktopAllowed(){return!this.props.conversationId||this.props.conversationId&&!m.isS4BBridgeMri(this.props.conversationId)}_isDroppingAllowed(){return this._isDroppingContactAllowed()||this._isDroppingFileFromConversationAllowed()||this._isDroppingFileFromDesktopAllowed()}_showCannotSendFileAlert(){const e=[{text:A.getString("Global.CancelLabel"),isCancel:!0}],t=A.getString("DragAndDrop.AlertForPrivateConversationDroppingBody");c.default.showWithOptions({title:A.getString("DragAndDrop.AlertForPrivateConversationDroppingTitle"),dialogAccessibilityTitle:t,message:t,buttons:e,rootViewId:this._getRootViewId()})}}t.default=F},74313:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(89391),a=i(36400),r=i(15877),l=i(36029),c=i(12770),d=(0,r.lazyProperties)({altViewContainer:()=>n.Styles.createViewStyle({position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center"})});class u extends o.ComponentBase{constructor(){super(...arguments),this._loadAltView=()=>{this._altViewLoadTimer=void 0,this.isComponentMounted()&&this.setState({showAltView:!0})},this._loadSucceeded=e=>{this._clearAltViewTimer(),this.isComponentMounted()&&this.setState({loadSucceeded:!0,showAltView:!1}),this.props.onLoad&&this.props.onLoad(e)},this._loadErrored=e=>{this._clearAltViewTimer(),this.isComponentMounted()&&this.setState({loadFailed:!0,showAltView:!0}),this.props.onError&&this.props.onError(e)},this._gotImageRef=e=>{this._imageRef=e||void 0}}_buildState(e,t){const i=this.props,n=e.showAltView||!e.source;if(t||e.source!==i.source){let t={loadSucceeded:!1,loadFailed:!1,showAltView:n};if(this._clearAltViewTimer(),e.source){const e=s.default.getS4LUiFeatures().errorSafeImageAltViewDelayMs||100;this._altViewLoadTimer=c.default.setTimeout(this._loadAltView,e)}return t}}_clearAltViewTimer(){this._altViewLoadTimer&&(c.default.clearTimeout(this._altViewLoadTimer),this._altViewLoadTimer=void 0)}render(){const e=this.state.loadFailed&&this.props.errorView||this.props.altView,t=[this.state.showAltView?n.createElement(n.View,{key:"altview",style:d.altViewContainer},e):void 0,this.props.source?n.createElement(l.default,{key:"image",style:this.props.style,ref:this._gotImageRef,sourceUrl:this.props.source,skypeToken:this.props.skypeToken,origin:this.props.origin,resizeMode:this.props.resizeMode,shouldInstrument:this.props.shouldInstrument,telemetryProperties:this.props.telemetryProperties,noRetryOnError:this.props.noRetryOnError,blockUntrustedDomains:this.props.blockUntrustedDomains,onLoad:this._loadSucceeded,onError:this._loadErrored}):void 0,this.props.children];if(this.props.onPress||this.props.onKeyPress){const e=this.props.showHoverEffect?a.HoverableButton:n.Button;return n.createElement(e,{style:this.props.containerStyle,onPress:this.props.onPress,onKeyPress:this.props.onKeyPress,title:this.props.title,importantForAccessibility:this.props.importantForAccessibility,shouldRasterizeIOS:this.props.shouldRasterizeIOS,tabIndex:this.props.tabIndex,activeOpacity:this.props.activeOpacity,accessibilityLabel:this.props.accessibilityLabel,accessibilityTraits:n.Types.AccessibilityTrait.Button},t)}return n.createElement(n.View,{style:this.props.containerStyle,title:this.props.title,importantForAccessibility:this.props.importantForAccessibility,shouldRasterizeIOS:this.props.shouldRasterizeIOS,tabIndex:this.props.tabIndex,activeOpacity:this.props.activeOpacity},t)}getNativeImageSize(){return this._imageRef&&this._imageRef.getNativeImageSize()}}t.default=u},65110:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(36400),s=i(10117),a=i(15877),r=i(11828),l=i(80837),c=i(19675),d=i(24576),u=i(66127),g=(0,a.lazyProperties)({pickerChevron:()=>n.Styles.createViewStyle({marginLeft:4,marginTop:2})});class h extends d.default{constructor(){super(...arguments),this._onFocusableComponentRef=e=>{this._focusableElement=e||void 0}}_buildState(e,t){return{modernizeConversationList:u.default.canModernizeConversationList()&&(this._isPresentedInDesktopLeftNav()||this._isPresentedInTabletLeftNav())}}requestFocus(){this.isComponentMounted()&&this._focusableElement&&this._focusableElement.requestFocus&&this._focusableElement.requestFocus()}blur(){this.isComponentMounted()&&this._focusableElement&&this._focusableElement.blur&&this._focusableElement.blur()}render(){const e=[l.default.noncollapsibleView,this.props.style],t=[g.pickerChevron,this.props.chevronStyle],i=[];let a;return this.props.labelMaxWidth&&i.push(n.Styles.createTextStyle({maxWidth:this.props.labelMaxWidth},!1)),this.props.labelColor?i.push(n.Styles.createTextStyle({color:this.props.labelColor},!1)):this._useAccessibleTheme()&&i.push(this._themeStyles.primaryTextColorStyle),a=this.props.useBodyBoldLabel?n.createElement(c.BodyText,{bold:!0,size:c.BodyTextSize.SmallDeprecated,style:[this._themeStyles.secondaryTextColorStyle,i],numberOfLines:1},this.props.label):this.state.modernizeConversationList?n.createElement(c.SubtitleModernize,{style:i,numberOfLines:1},this.props.label):n.createElement(c.Subtitle,{style:i,numberOfLines:1},this.props.label),n.createElement(o.HoverableButton,Object.assign({},this.props,{ref:this._onFocusableComponentRef,style:e,accessibilityTraits:[n.Types.AccessibilityTrait.Button,n.Types.AccessibilityTrait.HasPopup]}),a,n.createElement(s.default,{icon:r.SkypeIcon.DownChevron,size:r.IconSize.size10,color:this.props.overrideIconColor||this._themeColors.secondaryTextColor,style:t}))}}t.default=h},85433:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(88837),a=i(81169),r=i(15877),l=i(33754),c=i(23284),d=i(6250),u=i(12692),g=(0,r.lazyProperties)({panel:()=>o.Styles.createViewStyle({flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start"}),tileContainer:()=>o.Styles.createViewStyle({padding:2}),scrollView:()=>o.Styles.createScrollViewStyle({flex:1,alignSelf:"stretch"})});class h extends s.ComponentBase{constructor(){super(...arguments),this._mountedRefsMap=new d.default,this._onScroll=(e,t)=>{this.props.onScroll&&this.props.onScroll(e,t)},this._onLayout=e=>{const t=this.props.thumbnailsPerRow||1,i=Math.floor(e.width/t);this.setState({tileSize:i})}}render(){let e=[];const t=n.isUndefined(this.props.thumbnailPadding)?g.tileContainer:o.Styles.createViewStyle({padding:this.props.thumbnailPadding},!1);return this.state.tileSize&&!n.isEmpty(this.props.mediaMessages)&&this.props.mediaMessages[0]instanceof u.default&&(e=(0,a.chain)(this.props.mediaMessages,(0,a.take)(this.props.mediaMessages.length),(0,a.mapWithKey)(((e,i)=>this._getMediaTile(e,i,t))))),o.createElement(o.ScrollView,{style:[g.scrollView,this.props.style],onScroll:this._onScroll},o.createElement(o.View,{style:this.props.contentStyles},o.createElement(o.View,{style:g.panel,onLayout:this._onLayout},e)))}_getMediaTile(e,t,i){const n=l.getString("Global.CountOfTotal",{count:t+1,total:this.props.mediaMessages.length});return o.createElement(c.default,{key:e.cuid,ref:this._mountedRefsMap.onComponentRef(e.cuid),message:e,style:i,height:this.state.tileSize?Math.round(this.state.tileSize):void 0,width:this.state.tileSize,showVideoMediaTypeIcon:this.props.showVideoMediaTypeIcon,showOverlay:this.props.showThumbnailOverlay,showCreator:this.props.showCreatorOnThumbnails,onThumbnailPress:this.props.onGridItemPress,messageActions:this.props.getMessageActions?this.props.getMessageActions(e):void 0,borderRadius:this.props.itemBorderRadius,thumbnailIconsSize:this.props.thumbnailIconsSize,renderOrigin:this.props.renderOrigin,shouldUseMessageAccessibilityLabel:!0,accessibilityLabel:n})}getMediaNode(e){return this._mountedRefsMap.ref(e)}}t.default=h},39285:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HiddenText=t.HiddenAnimatedView=void 0;const n=i(16778),o=i(88837);class s extends o.ComponentBase{render(){return n.createElement(n.View,Object.assign({},this.props,{importantForAccessibility:n.Types.ImportantForAccessibility.NoHideDescendants}))}}t.default=s;class a extends o.ComponentBase{render(){return n.createElement(n.Animated.View,Object.assign({},this.props,{importantForAccessibility:n.Types.ImportantForAccessibility.NoHideDescendants}))}}t.HiddenAnimatedView=a;class r extends o.ComponentBase{render(){return n.createElement(n.Text,Object.assign({},this.props,{importantForAccessibility:n.Types.ImportantForAccessibility.NoHideDescendants}),this.props.children)}}t.HiddenText=r},36400:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HoverableLink=t.HoverableButton=t.HoverableView=void 0;const n=i(16778),o=i(88837),s=i(15877),a=i(80837),r=(0,s.lazyProperties)({hoverStyle:()=>n.Styles.createViewStyle({opacity:.8})});class l extends o.ComponentBase{constructor(){super(...arguments),this._onHoverStart=e=>{this.isComponentMounted()&&(this.props.onHoverStart&&this.props.onHoverStart(e),this.setState({isHovering:!0}))},this._onHoverEnd=e=>{this.isComponentMounted()&&(this.props.onHoverEnd&&this.props.onHoverEnd(e),this.setState({isHovering:!1}))}}requestFocus(){this.isComponentMounted()&&this._focusableElement&&this._focusableElement.requestFocus&&this._focusableElement.requestFocus()}blur(){this.isComponentMounted()&&this._focusableElement&&this._focusableElement.blur&&this._focusableElement.blur()}_baseStyle(){const e=[this.props.style];return this.state.isHovering&&!this.props.disableHoverOpacityStyles&&e.push(r.hoverStyle),e}_baseProps(){return Object.assign(Object.assign({},this.props),{style:this._baseStyle()})}}t.HoverableView=class extends l{constructor(){super(...arguments),this._onFocusableComponentRef=e=>{this._focusableElement=e||void 0}}_baseStyle(){return[super._baseStyle(),this.props.disableCursor?a.default.defaultCursor:a.default.pointerCursor,this.state.isHovering?this.props.hoverStyle:void 0]}render(){return n.createElement(n.View,Object.assign({},this._baseProps(),{onMouseEnter:this._onHoverStart,onMouseLeave:this._onHoverEnd,ref:this._onFocusableComponentRef}),this.props.children)}};t.HoverableButton=class extends l{constructor(){super(...arguments),this._onFocusableComponentRef=e=>{this._focusableElement=e||void 0}}_baseStyle(){return[super._baseStyle(),this.props.disableCursor?a.default.defaultCursor:a.default.pointerCursor,this.state.isHovering?this.props.hoverStyle:void 0]}render(){return n.createElement(n.Button,Object.assign({},this._baseProps(),{onHoverStart:this.props.onPress?this._onHoverStart:void 0,onHoverEnd:this.props.onPress?this._onHoverEnd:void 0,ref:this._onFocusableComponentRef}),this.props.children)}};t.HoverableLink=class extends l{constructor(){super(...arguments),this._onFocusableComponentRef=e=>{this._focusableElement=e||void 0}}_baseStyle(){return[super._baseStyle(),this.state.isHovering?this.props.hoverStyle:void 0]}render(){return n.createElement(n.Link,Object.assign({},this._baseProps(),{onHoverStart:this._onHoverStart,onHoverEnd:this._onHoverEnd,ref:this._onFocusableComponentRef}),this.props.children)}},t.default=l},13944:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(44973),a=i(77381),r=i(46096),l=i(36400),c=i(10117),d=i(36237),u=i(15877),g=(i(33754),i(81760)),h=i(80837),p=(0,u.lazyProperties)({text:()=>o.Styles.createViewStyle({flexDirection:"row",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:g.Color.transparent,overflow:"visible"}),shadow:()=>o.Styles.createViewStyle({shadowColor:g.Color.black,shadowOpacity:.7,shadowRadius:2,shadowOffset:{height:0,width:0}}),flippedView:()=>o.Styles.createViewStyle({transform:[{scaleX:-1}]})});class m extends a.default{constructor(){super(...arguments),this._onHoverStart=e=>{this.props.disabled||this.setState({isHovering:!0}),this.props.onHover&&this.props.onHover(!0)},this._onHoverEnd=e=>{this.setState({isHovering:!1}),this.props.onHover&&this.props.onHover(!1)},this._onContentButtonRef=e=>{this._contentButton=e||void 0}}_buildState(e,t){const i={};return t&&(i.isHovering=!1),i}componentDidMount(){super.componentDidMount(),this.props.accessibilityLabel||this.props.title||d.warn(r.LogTraceArea.GenericUnsafe,"IconButton mounted without an accessibilityLabel or title")}render(){const e=this.state.isHovering&&this.props.hoverColor&&!this.props.disabled?this.props.hoverColor:this.props.color,t=[h.default.alignItemsCenter,this.props.style];this.props.showHoverEffect&&this.state.isHovering&&this.props.hoverStyle&&!this.props.disabled&&t.push(this.props.hoverStyle);const i=[p.text];let a;this.props.showShadow&&i.push(p.shadow),this.props.iconTextStyle&&i.push(this.props.iconTextStyle);const r=this.state.isHovering&&this.props.hoverIcon||this.props.icon;if(r instanceof Array)a=o.createElement(s.default,{icons:r,iconSize:this.props.size,style:i,color:this.props.color});else if(this.props.animatedTextStyle){const t=[...i,this.props.animatedTextStyle];a=(0,c.simpleAnimatedIcon)(r,e,this.props.size,t)}else a=(0,c.simpleIcon)(r,e,this.props.size,i);const d=this.props.accessibilityTraits?n.isArray(this.props.accessibilityTraits)?this.props.accessibilityTraits:[this.props.accessibilityTraits]:[o.Types.AccessibilityTrait.Button];let u=this.props.accessibilityLabel||this.props.title;this.props.disabled&&d.push(o.Types.AccessibilityTrait.Disabled),this.props.flipIcon&&(a=o.createElement(o.View,{style:p.flippedView},a));const g=this.props.toolTip||this.props.title;if(this.props.showHoverEffect||this.props.onPress||this.props.onLongPress||this.props.onPressIn||this.props.onPressOut||this.props.onContextMenu||this.props.onKeyPress){const e=this.props.showHoverEffect?l.HoverableButton:o.Button;return o.createElement(e,{style:t,title:g,ref:this._onContentButtonRef,autoFocus:this.props.autoFocus,onPress:this.props.onPress,onPressIn:this.props.onPressIn,onPressOut:this.props.onPressOut,onLongPress:this.props.onLongPress,onContextMenu:this.props.onContextMenu,onHoverStart:this._onHoverStart,onHoverEnd:this._onHoverEnd,onKeyPress:this.props.onKeyPress,disabled:this.props.disabled,onFocus:this.props.onFocus,onBlur:this.props.onBlur,accessibilityLabel:u,accessibilityTraits:d,tabIndex:this.props.tabIndex,disableTouchOpacityAnimation:this.props.disableTouchOpacityAnimation,activeOpacity:this.props.activeOpacity,importantForAccessibility:this.props.importantForAccessibility,disabledOpacity:this.props.disabledOpacity},a,this.props.accessoryView)}return o.createElement(o.View,{title:g,style:t,importantForAccessibility:this.props.importantForAccessibility},a,this.props.accessoryView)}requestFocus(){this._contentButton&&this._contentButton.requestFocus()}}t.default=m},10117:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThemedIcon=t.AnimatedIconView=t.IconView=t.simpleAnimatedIcon=t.simpleIcon=void 0;const n=i(16778),o=i(81878),s=i(77381),a=i(11828);t.simpleIcon=function(e,t,i,o){return n.createElement(n.View,{importantForAccessibility:n.Types.ImportantForAccessibility.NoHideDescendants,style:o},(0,a.getIcon)(e,i,t))},t.simpleAnimatedIcon=function(e,t,i,o){return n.createElement(n.Animated.View,{importantForAccessibility:n.Types.ImportantForAccessibility.NoHideDescendants,style:o},(0,a.getIcon)(e,i,t))};class r extends s.default{constructor(){super(...arguments),this._onContentRef=e=>{this._contentRef=null!=e?e:void 0}}requestFocus(){var e;null===(e=this._contentRef)||void 0===e||e.requestFocus()}render(){const{icon:e,size:t,color:i}=this.props,o=this._isAnimated(),s=o?n.Animated.View:n.View,r=o?void 0:this._onContentRef;return n.createElement(s,Object.assign({ref:r,importantForAccessibility:n.Types.ImportantForAccessibility.NoHideDescendants},this.props),(0,a.getIcon)(e,t,i))}}class l extends r{_isAnimated(){return!1}}t.IconView=l;t.AnimatedIconView=class extends r{_isAnimated(){return!0}};const c={"2xs":a.IconSize.size14,xs:a.IconSize.size16,sm:a.IconSize.size18,md:a.IconSize.size24,lg:a.IconSize.size32};t.ThemedIcon=function(e){const{color:t,fontSize:i}=(0,o.usePropsResolution)("Icon",e),n=(0,o.useToken)("colors",t||""),s=(null==e?void 0:e.size)||i,r=c[s]||a.IconSize.default;return e.name?(0,a.getIcon)(e.name,r,n):null},t.default=l},24393:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(36400),a=i(10117),r=i(15877),l=i(80837),c=(0,r.lazyProperties)({buttonChildContainer:()=>n.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"center",overflow:"visible"}),buttonChildContainerReverse:()=>n.Styles.createViewStyle({flexDirection:"row-reverse"}),titleContainer:()=>n.Styles.createViewStyle({alignItems:"center",justifyContent:"center"})});class d extends o.ComponentBase{constructor(){super(...arguments),this._onContentButtonRef=e=>{this._contentButton=e||void 0}}render(){const e=n.createElement(n.View,{style:c.titleContainer},n.createElement(n.Text,{style:this.props.titleStyle},this.props.title)),t=n.createElement(a.default,{icon:this.props.icon,color:this.props.color,size:this.props.size,style:this.props.iconStyle}),i=[c.buttonChildContainer];return this.props.useTrailingIcon&&i.push(c.buttonChildContainerReverse),n.createElement(s.HoverableButton,{style:[l.default.alignItemsCenter,this.props.style],title:this.props.title,ref:this._onContentButtonRef,autoFocus:this.props.autoFocus,onPress:this.props.onPress,accessibilityLabel:this.props.accessibilityLabel||this.props.title,tabIndex:this.props.tabIndex,importantForAccessibility:this.props.importantForAccessibility,disabled:this.props.disabled},n.createElement(n.View,{style:i},t,e))}requestFocus(){this._contentButton&&this._contentButton.requestFocus()}}t.default=d},15340:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(58108),o=(i(25465),i(16778)),s=i(88837),a=(i(46096),i(36237),i(10400)),r=i(30124);i(80837);class l extends s.ComponentBase{getViewStyle(){return this.props.style}_handleLayout(e){this.props.onLayout&&this.props.onLayout(e)}}class c extends l{constructor(){super(...arguments),this._viewHeight=0,this._onLayout=e=>{super._handleLayout(e),this._viewHeight=e.height}}_buildState(e,t){return{resizeMode:a.default.getResizeMode(),keyboardUpdateInfo:a.default.getUpdateInfo(),isUsingStackNavigation:r.default.isUsingStackNavigationContext()}}UNSAFE_componentWillMount(){super.UNSAFE_componentWillMount(),this._keyboardWillChangeFrameSubscription=n.default.onKeyboardEvent(n.VirtualKeyboardEvent.keyboardWillChangeFrame,this._handleKeyboardWillChangeFrame.bind(this))}componentWillUnmount(){super.componentWillUnmount(),this._keyboardWillChangeFrameSubscription&&this._keyboardWillChangeFrameSubscription.remove()}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i),t.keyboardUpdateInfo!==this.state.keyboardUpdateInfo&&t.resizeMode===n.KeyboardAwareResizeMode.Default&&n.default.onKeyboardLayoutAnimation(t.keyboardUpdateInfo)}getViewStyle(){let e=[super.getViewStyle()];return this.state.resizeMode===n.KeyboardAwareResizeMode.Default&&e.push(this._getPoppedKeyboardStyle(this.state.keyboardUpdateInfo.height)),e}_getPoppedKeyboardStyle(e){return c._styleCache[e]||(c._styleCache[e]=o.Styles.createViewStyle({paddingBottom:e},!1)),c._styleCache[e]}_handleKeyboardWillChangeFrame(e){let t;t=e.endCoordinates.screenY>=this._viewHeight||e.endCoordinates.screenY+e.endCoordinates.height<this._viewHeight-10?0:this.state.isUsingStackNavigation?e.endCoordinates.height:this._viewHeight-e.endCoordinates.screenY,o.App.getActivationState()!==o.Types.AppActivationState.Active&&0!==t&&this.state.isUsingStackNavigation||a.default.setUpdateInfo({height:t,duration:e.duration,easing:e.easing})}render(){return o.createElement(o.View,Object.assign({},this.props,{onLayout:this._onLayout,style:this.getViewStyle()}),this.props.children)}}c._styleCache={};t.default=class extends l{render(){return o.createElement(o.View,Object.assign({},this.props,{style:this.getViewStyle()}),this.props.children)}}},74606:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(10117),a=i(15877),r=i(33754),l=i(89808),c=i(81760),d=i(11828),u=i(34528),g=i(24576),h=(0,a.lazyProperties)({selectionToggle:()=>o.Styles.createViewStyle({flex:0,alignSelf:"center",width:24,height:24,borderRadius:12,borderWidth:1,borderStyle:"solid",marginRight:10,alignItems:"center",justifyContent:"center"}),selectionToggleOn:()=>o.Styles.createViewStyle({borderColor:c.Color.transparent}),iconPadding:()=>o.Styles.createViewStyle({padding:6})});class p extends g.default{_buildState(e,t){let i={primaryColor:e.disable?this._themeColors.disabledTextColor:e.selectionColor||l.default.getPrimaryColor()||c.Color.blue};return t&&(this._toggleBackgroundColorValue=new o.Animated.Value(e.isOn?1:0),i.showTick=e.isOn),i}componentDidUpdate(e,t,i){if(super.componentDidUpdate(e,t,i),this.props.isOn!==e.isOn){this.props.isOn||this.setState({showTick:!1});const e=()=>{this.props.isOn&&this.isComponentMounted()&&this.setState({showTick:!0})};this.props.disableSelectionAnimation?(this._toggleBackgroundColorValue.setValue(this.props.isOn?1:0),e()):o.Animated.timing(this._toggleBackgroundColorValue,{toValue:this.props.isOn?1:0,duration:250,easing:o.Animated.Easing.Linear()}).start((()=>{e()}))}}_updateAnimatedStyles(e){const t=this._useAccessibleTheme()?this._themeColors.tabIndicatorColor:e.primaryColor;this._animatedSelectionStyle=o.Styles.createAnimatedViewStyle({backgroundColor:this._toggleBackgroundColorValue.interpolate({inputRange:[0,1],outputRange:[this._themeColors.primaryBackgroundColor,t]})})}render(){this._currentTheme!==this._animatedStylesTheme&&this._updateAnimatedStyles(this.state);let e=this.props.falseLabel||r.getString("ToggleSwitch.OffText");this.props.isOn&&(e=this.props.trueLabel||r.getString("ToggleSwitch.OnText"));const t=[h.selectionToggle,this._themeStyles.toggleBorderColorStyle];this.state.showTick&&(t.push(h.selectionToggleOn),this.props.selectionBorderColor&&t.push(o.Styles.createViewStyle({borderColor:this.props.selectionBorderColor},!1))),this._animatedSelectionStyle&&t.push(this._animatedSelectionStyle),this._useAccessibleTheme()&&t.push(this._themeStyles.dividerBorderColorStyle);const i=this._useAccessibleTheme()&&this._themeColors.primaryBadgeTextColor&&!this.props.disable?this._themeColors.primaryBadgeTextColor:c.Color.white,a=u.okIcon(),l=n.isUndefined(this.props.importantForAccessibility)||this.props.importantForAccessibility===o.Types.ImportantForAccessibility.Yes;return o.createElement(o.Animated.View,{style:[t,this.props.style],accessibilityLabel:l?e:void 0,importantForAccessibility:this.props.importantForAccessibility},o.createElement(s.default,{icon:this.state.showTick?a:d.SkypeIcon.Blank,size:d.IconSize.size14,color:i,style:h.iconPadding}))}}t.default=p},20751:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(48638),s=i(15877),a=i(10909),r=i(89808),l=i(81760),c=i(11010),d=i(19675),u=i(24576),g=i(63841),h=i(12770),p=(0,s.lazyProperties)({containerRounded:()=>n.Styles.createViewStyle({position:"absolute",bottom:0,left:0,right:0,flexDirection:"row",height:130,justifyContent:"center",alignItems:"flex-end"}),barButton:()=>n.Styles.createButtonStyle({bottom:0,left:0,right:0,height:30}),contentContainer:()=>n.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:25,height:30,backgroundColor:l.Color.blue,borderRadius:15}),actionLabelText:()=>n.Styles.createTextStyle({textDecorationLine:"underline",marginLeft:10}),darkText:()=>n.Styles.createTextStyle({color:l.Color.gray400}),lightText:()=>n.Styles.createTextStyle({color:l.Color.white}),darkBackground:()=>n.Styles.createViewStyle({backgroundColor:l.Color.gray400}),whiteBackground:()=>n.Styles.createViewStyle({backgroundColor:l.Color.white})});class m extends u.default{constructor(){super(...arguments),this._toastId=0,this._verticalAnimatedValue=new n.Animated.Value(130),this._verticalAnimatedStyle=n.Styles.createAnimatedViewStyle({transform:[{translateY:this._verticalAnimatedValue}]}),this._onMouseEnter=()=>{this._hideToastTimerId&&h.default.clearTimeout(this._hideToastTimerId)},this._onMouseLeave=()=>{this.state.currentMessage&&this._hideToast(this.state.currentMessage.params.duration||0,this.state.currentMessage.params.key)},this._onShowToast=(e,t)=>{this.isComponentMounted()&&this._recalcDisplay(e,t)},this._onTapDismiss=()=>{const e=this.state.currentMessage?this.state.currentMessage.params:void 0;e&&e.onPress&&e.onPress(),this._hideToast(0,e?e.key:void 0)}}_recalcDisplay(e,t){if(this.state.currentMessage!==e){const i=e&&e.params.rootViewId&&e.params.rootViewId!==this._getRootViewId()?void 0:e;this.setState({currentMessage:i},(()=>{i&&this._showToast(0,t)}))}else this._hideToast(0,e?e.params.key:void 0)}_buildState(e,t){let i={isNavigatingWithKeyboard:o.default.isNavigatingWithKeyboard()};return t&&(i.currentMessage=void 0,i.isToastHidden=!0),i}UNSAFE_componentWillMount(){super.UNSAFE_componentWillMount(),a.default.showToastEvent.subscribe(this._onShowToast)}componentWillUnmount(){super.componentWillUnmount(),a.default.showToastEvent.unsubscribe(this._onShowToast)}_renderOptionalActionLabel(){if(this.state.currentMessage&&this.state.currentMessage.params.actionLabel)return n.createElement(n.Text,{style:[p.actionLabelText,c.default.font.uiDisplayBold]},this.state.currentMessage.params.actionLabel)}render(){if(!this.state.currentMessage)return null;const e=this.state.currentMessage.params,t=[];this._useDarkTheme()?t.push(p.darkText):this._currentTheme!==g.Theme.Accessible&&e.textColor?e.textColor&&t.push(n.Styles.createTextStyle({color:e.textColor},!1)):t.push(p.lightText);const i=[p.contentContainer];this._useDarkTheme()?i.push(p.whiteBackground):this._currentTheme===g.Theme.Accessible?i.push(p.darkBackground):e.color?i.push(n.Styles.createViewStyle({backgroundColor:e.color},!1)):i.push(r.default.getBackgroundColorStyleNoSubscription());const o=[p.containerRounded];this.props.leftOffset&&o.push(n.Styles.createViewStyle({left:this.props.leftOffset},!1));return n.createElement(n.View,{style:o,ignorePointerEvents:!0},n.createElement(n.Animated.View,{style:this._verticalAnimatedStyle},n.createElement(n.Button,{style:p.barButton,onPress:this._onTapDismiss,disabled:this.state.isToastHidden,disabledOpacity:1},n.createElement(n.View,{style:i,accessibilityLiveRegion:n.Types.AccessibilityLiveRegion.Assertive,importantForAccessibility:n.Types.ImportantForAccessibility.Yes,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},n.createElement(d.Caption,{style:t},this.state.currentMessage.params.textMessage,undefined,this._renderOptionalActionLabel())))))}_showToast(e,t){const i=this.state.currentMessage;if(!i)return;this._toastId++,this._hideToastTimerId&&h.default.clearTimeout(this._hideToastTimerId),this._showToastTimerId&&h.default.clearTimeout(this._showToastTimerId);const o=this._toastId,s=-1*(t||10);this._showToastTimerId=h.default.setTimeout((()=>{this.isComponentMounted()&&n.Animated.timing(this._verticalAnimatedValue,{toValue:s,easing:n.Animated.Easing.Out(),duration:250,isInteraction:!1}).start((()=>{this.isComponentMounted()&&this._toastId===o&&(this.state.currentMessage&&n.Accessibility.announceForAccessibility(this.state.currentMessage.params.accessibilityLabel||this.state.currentMessage.params.textMessage),this.setState({isToastHidden:!1}),this._hideToast(this._getToastTimeout(i.params.duration),i.params.key))}))}),e)}_hideToast(e,t){this._hideToastTimerId&&h.default.clearTimeout(this._hideToastTimerId),this._hideToastTimerId=h.default.setTimeout((()=>{this.isComponentMounted()&&n.Animated.timing(this._verticalAnimatedValue,{toValue:130,easing:n.Animated.Easing.Out(),duration:200,isInteraction:!1}).start((e=>{a.default.toastDismissed(t),e.finished&&this.isComponentMounted()&&this.setState({isToastHidden:!0})}))}),e)}_getToastTimeout(e){return this.state.isNavigatingWithKeyboard?1e4:e||3e3}}t.default=m},53172:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(74634),s=i(77388);t.default=class{constructor(){this._items=[],this.listChanged=new o.default}addItems(e,t,i){let n={type:s.ListModificationType.AddItems,items:t,insertIndex:e,options:i};this.apply(n)}removeItems(e,t,i){let n={type:s.ListModificationType.RemoveItems,removeIndex:e,count:t,options:i};this.apply(n)}replaceItems(e,t,i){let n={type:s.ListModificationType.ReplaceItems,items:t,removeIndex:e,insertIndex:e,count:t.length,options:i};this.apply(n)}moveItems(e,t,i,n,o){let a={type:s.ListModificationType.MoveItems,removeIndex:e,insertIndex:t,count:n,options:o,items:i};this.apply(a)}getItemList(){return this._items}setItemList(e){this._items=n.clone(e);let t={type:s.ListModificationType.ReplaceItems,items:this._items,removeIndex:0,count:this._items.length};this.listChanged.fire(t,this._items)}_canConvertRemoveAddToReplace(e){return 2===e.length&&e[0].type===s.ListModificationType.RemoveItems&&e[1].type===s.ListModificationType.AddItems&&n.size(e[1].items)>0&&e[0].count===n.size(e[1].items)}_getReplaceModification(e,t,i){let o,a;n.each(e,(e=>{this.apply(e,t,i,!0),e.type===s.ListModificationType.RemoveItems?a=e:e.type===s.ListModificationType.AddItems&&(o=e)}));return{count:a.count,insertIndex:o.insertIndex,removeIndex:a.removeIndex,items:o.items,type:s.ListModificationType.ReplaceItems}}applyMany(e,t,i){if(this._canConvertRemoveAddToReplace(e)){const n=this._getReplaceModification(e,t,i);this.listChanged.fire(n,this._items)}else n.each(e,(e=>{this.apply(e,t,i)}));if(0===e.length){t&&t(this._items);let e={type:s.ListModificationType.Metadata};this.listChanged.fire(e,this._items)}}apply(e,t,i,n){i&&i(e,this._items),e.type===s.ListModificationType.AddItems?this._items=[...this._items.slice(0,e.insertIndex),...e.items,...this._items.slice(e.insertIndex)]:e.type===s.ListModificationType.RemoveItems?this._items=[...this._items.slice(0,e.removeIndex),...this._items.slice(e.removeIndex+e.count)]:e.type===s.ListModificationType.ReplaceItems?this._items=[...this._items.slice(0,e.removeIndex),...e.items,...this._items.slice(e.removeIndex+e.items.length)]:e.type===s.ListModificationType.MoveItems&&(e.removeIndex<e.insertIndex?this._items=[...this._items.slice(0,e.removeIndex),...this._items.slice(e.removeIndex+e.count,e.insertIndex+e.count),...e.items,...this._items.slice(e.insertIndex+e.count)]:this._items=[...this._items.slice(0,e.insertIndex),...e.items,...this._items.slice(e.insertIndex,e.removeIndex),...this._items.slice(e.removeIndex+e.count)]),t&&t(this._items),n||this.listChanged.fire(e,this._items)}}},45087:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PageIndicator=t.PageIndicatorFillStyle=void 0;const n=i(96486),o=i(98356),s=i(16778),a=i(88837),r=i(15877),l=i(81760);var c;!function(e){e[e.Filled=0]="Filled",e[e.Unfilled=1]="Unfilled"}(c=t.PageIndicatorFillStyle||(t.PageIndicatorFillStyle={}));const d=(0,r.lazyProperties)({parentContainer:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"center"}),containerReversed:()=>s.Styles.createViewStyle({flexDirection:"row-reverse"}),indicatorDot:()=>s.Styles.createViewStyle({width:16,height:16,borderRadius:8,marginHorizontal:3,backgroundColor:l.Color.white}),unfilledIndicatorStyle:()=>s.Styles.createViewStyle({backgroundColor:"transparent",borderColor:"white",borderWidth:1.5})});class u extends a.ComponentBase{constructor(){super(...arguments),this._indicatorsAnimateLeftValue=new s.Animated.Value(0),this._indicatorsAnimateStyle=s.Styles.createAnimatedViewStyle({transform:[{translateX:this._indicatorsAnimateLeftValue}]}),this._indicatorsAnimateRightValue=new s.Animated.Value(0),this._indicatorsAnimateRTLStyle=s.Styles.createAnimatedViewStyle({right:this._indicatorsAnimateRightValue})}_buildState(e,t){let i={currentPage:e.currentPage};const o=e.indicatorDotSize?e.indicatorDotSize:16,a=e.indicatorMargin?e.indicatorMargin:3;e.indicatorDotSize||e.indicatorMargin?(i.indicatorStyle=s.Styles.createViewStyle({width:o,height:o,borderRadius:o/2,marginHorizontal:a,backgroundColor:e.indicatorColor||l.Color.white},!1),i.selectedIndicatorStyle=s.Styles.createViewStyle({width:o,height:o,borderRadius:o/2,marginHorizontal:a,backgroundColor:e.selectedIndicatorColor||l.Color.white},!1)):(i.indicatorStyle=d.indicatorDot,i.selectedIndicatorStyle=d.indicatorDot,e.indicatorColor&&(i.indicatorStyle=[i.indicatorStyle,s.Styles.createViewStyle({backgroundColor:e.indicatorColor},!1)]),e.selectedIndicatorColor&&(i.selectedIndicatorStyle=[i.selectedIndicatorStyle,s.Styles.createViewStyle({backgroundColor:e.selectedIndicatorColor},!1)]));const r=n.size(e.pages);if(e.maxIndicators&&e.maxIndicators<r){const n=o+2*a;i.innerContainerStyle=s.Styles.createViewStyle({flexDirection:"row",maxWidth:e.maxIndicators*n,backgroundColor:l.Color.transparent},!1);const c=this.props,d=this.state;if(t)i.indicatorStartIndex=e.currentPage-Math.ceil(e.maxIndicators/2),i.indicatorStartIndex<0?i.indicatorStartIndex=0:i.indicatorStartIndex+e.maxIndicators>=r&&(i.indicatorStartIndex=r-e.maxIndicators),this._scrollIndicators(!1,e,i.indicatorStartIndex);else if(c.currentPage!==e.currentPage){const t=d.indicatorStartIndex||0,n=c.maxIndicators||e.maxIndicators;if(e.currentPage===d.indicatorStartIndex||e.currentPage===t+n-1)c.currentPage<e.currentPage&&t+n<r?i.indicatorStartIndex=t+1:c.currentPage>e.currentPage&&t>0&&(i.indicatorStartIndex=t-1);else if(e.currentPage<t||e.currentPage>t+n){const t=r-e.maxIndicators;i.indicatorStartIndex=Math.min(e.currentPage,t)}}}else i.innerContainerStyle=void 0;return i}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i),this.state.indicatorStartIndex!==t.indicatorStartIndex&&this._scrollIndicators(!0,e,t.indicatorStartIndex||0)}_scrollIndicators(e,t,i){const s=t.indicatorMargin||3,a=t.indicatorDotSize||16,r=t.maxIndicators||10,l=a+2*s,c=i>0?-1*i*l:0;if(t.reverseOrder){const i=n.size(t.pages)-r*l;e?o.timing.easeOut({value:this._indicatorsAnimateRightValue,toValue:c+i,duration:o.Common.Duration.Tiny}).start():this._indicatorsAnimateRightValue.setValue(c+i)}else e?o.timing.easeOut({value:this._indicatorsAnimateLeftValue,toValue:c,duration:o.Common.Duration.Tiny,useNativeDriver:!0}).start():this._indicatorsAnimateLeftValue.setValue(c)}_renderIndicator(e,t){let i=t===this.state.currentPage;return s.createElement(g,{key:e.uid,index:t,selected:i,minOpacity:e.minOpacity?e.minOpacity:.7,minIndicatorScale:this.props.minIndicatorScale,indicatorStyle:i?this.state.selectedIndicatorStyle:this.state.indicatorStyle,indicatorFillStyle:e.indicatorFillStyle})}updateCurrentPage(e){this.isComponentMounted()&&e!==this.state.currentPage&&this.setState({currentPage:e})}render(){const e=[];n.each(this.props.pages,((t,i)=>{e.push(this._renderIndicator(t,i))}));let t=[this.props.style];if(t.push(d.parentContainer),this.props.reverseOrder&&!this.state.innerContainerStyle&&t.push(d.containerReversed),this.state.innerContainerStyle){let i=this.props.reverseOrder?[this._indicatorsAnimateRTLStyle]:[this._indicatorsAnimateStyle];return s.createElement(s.View,{style:t,blockPointerEvents:this.props.blockPointerEvents,ignorePointerEvents:this.props.ignorePointerEvents},s.createElement(s.View,{style:this.state.innerContainerStyle},s.createElement(s.Animated.View,{style:[i,t]},e)))}return s.createElement(s.View,{style:t,blockPointerEvents:this.props.blockPointerEvents,ignorePointerEvents:this.props.ignorePointerEvents},e)}}t.PageIndicator=u;class g extends a.ComponentBase{constructor(){super(...arguments),this._scaleAnimatedValue=new s.Animated.Value(.4),this._opacityValue=new s.Animated.Value(this.props.minOpacity),this._scaleAnimatedStyle=s.Styles.createAnimatedViewStyle({transform:[{scale:this._scaleAnimatedValue}],opacity:this._opacityValue})}componentDidMount(){super.componentDidMount(),this._updateIndicator(!1)}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.props.selected===e.selected&&this.props.minOpacity===e.minOpacity||this._updateIndicator(!0)}_updateIndicator(e){const t=this.props.selected?1:this.props.minIndicatorScale||.4,i=this.props.selected?1:this.props.minOpacity;e?o.parallel([o.timing.easeOut({value:this._scaleAnimatedValue,toValue:t,duration:o.Common.Duration.Tiny,useNativeDriver:true}),o.timing.easeOut({value:this._opacityValue,toValue:i,duration:o.Common.Duration.Tiny,useNativeDriver:true})]).start():(this._scaleAnimatedValue.setValue(t),this._opacityValue.setValue(i))}render(){const e=[];return this.props.indicatorStyle&&e.push(this.props.indicatorStyle),this.props.indicatorFillStyle===c.Unfilled&&e.push(d.unfilledIndicatorStyle),e.push(this._scaleAnimatedStyle),s.createElement(s.Animated.View,{style:e})}}t.default=u},16582:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(67294),o=i(96486),s=i(16778),a=i(11009),r=i(18330),l=i(98278),c=i(62602),d=i(77381),u=i(46096),g=i(36237),h=i(61253),p=i(45026),m=i(51070),S=i(4057),C=i(80837),f=i(12770),y=i(15877),_=i(11828),v=i(81760),b={x:15,y:15},T=_.IconSize.size24,P=(0,y.lazyProperties)({arrowContainer:()=>s.Styles.createViewStyle({width:T,height:T,position:"absolute"})}),A=({anchorInfo:e,popupX:t=0,popupY:i=0,anchorPosition:o,popupHeight:r,arrowColor:l=v.Color.blackOverlay50})=>{const c=(({anchorInfo:e,popupX:t,popupY:i,anchorPosition:o,popupHeight:r=0})=>{const l=null==e?void 0:e.x,c=null==e?void 0:e.y,d=null==e?void 0:e.width,u=null==e?void 0:e.height;return(0,n.useMemo)((()=>{if(void 0!==l&&void 0!==t&&void 0!==d&&void 0!==c&&void 0!==i&&void 0!==u)switch(o){case a.PopupAnchorPositon.Top:{const e=l-t+d/2-T/2,i=-T;return s.Styles.createViewStyle({left:e,bottom:i},!1)}case a.PopupAnchorPositon.Bottom:{const e=l-t+d/2-T/2,i=-T,n=[{scaleY:-1}];return s.Styles.createViewStyle({left:e,top:i,transform:n},!1)}case a.PopupAnchorPositon.Right:{const e=Math.max(0,r/2-T/2),t=-T,i=[{rotate:90}];return s.Styles.createViewStyle({left:t,top:e,transform:i},!1)}case a.PopupAnchorPositon.Left:{const e=Math.max(0,r/2-T/2),t=-T,i=[{rotate:-90}];return s.Styles.createViewStyle({right:t,top:e,transform:i},!1)}default:return}}),[l,c,d,u,t,i,o,r])})({anchorPosition:o,popupX:t,popupY:i,anchorInfo:e,popupHeight:r});return c?s.createElement(s.View,{ignorePointerEvents:!0,style:[P.arrowContainer,c]},(0,_.getIcon)(_.SkypeIcon.Nub,_.IconSize.size24,l,{viewBox:"0 0 24 6",width:T,height:6})):null};class k extends d.default{constructor(){super(...arguments),this._animatedOpacityValue=new s.Animated.Value(0),this._animatedTranslateYValue=new s.Animated.Value(0),this._animatedTranslateXValue=new s.Animated.Value(0),this._animatedTranslateYStyle=s.Styles.createAnimatedViewStyle({transform:[{translateY:this._animatedTranslateYValue}]}),this._animatedTranslateXStyle=s.Styles.createAnimatedViewStyle({transform:[{translateX:this._animatedTranslateXValue}]}),this._animatedOpacityStyle=s.Styles.createAnimatedViewStyle({opacity:this._animatedOpacityValue}),this._onContainerViewRef=e=>{this._popupContainerView=e||void 0}}_buildState(e,t){const i=m.default.horizontalInsets(l.HorizontalInsetDefault);if(t){let t=!1;if(e.getAnchorInfo){const i=e.getAnchorInfo();t=!!i&&!!i.hidden}return{isMeasuringPopup:!0,anchorOffset:0,popupY:0,popupX:0,popupWidth:0,popupHeight:0,constrainedPopupWidth:0,constrainedPopupHeight:0,anchorHidden:t,safeAreaInsets:i}}return{safeAreaInsets:i}}componentDidMount(){super.componentDidMount(),g.log(u.LogTraceArea.CoachMarks,"PopupContainer.componentDidMount"),this.props.disablePositionAnimation&&(this._animatedTranslateYValue.setValue(0),this._animatedTranslateXValue.setValue(0)),this._recalcPosition(),this.props.timeoutMs&&(this._dismissalTimeout=f.default.setTimeout((()=>{this._dismissPopup(this.props.animateDismissal)}),this.props.timeoutMs))}UNSAFE_componentWillUpdate(e,t,i){if(super.UNSAFE_componentWillUpdate(e,t,i),t.anchorPosition!==this.state.anchorPosition)if(e.disablePositionAnimation)this._animatedTranslateYValue.setValue(0),this._animatedTranslateXValue.setValue(0);else{let i=t.anchorPosition;e.getAnimationDirection&&(i=e.getAnimationDirection(t.anchorHidden)),this._positionPopupForPresentation(i)}}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),!this.state.isMeasuringPopup&&t.isMeasuringPopup&&this._presentPopup()}componentWillUnmount(){super.componentWillUnmount(),this._dismissalTimeout&&this._dismissPopup()}updatePosition(e){e&&e.rect&&this.state.popupHeight&&this.state.popupWidth?this._recalcPositionFromLayoutData(e.rect,{width:this.state.popupWidth,height:this.state.popupHeight},!!e.hidden):this._recalcPosition(e)}dismiss(e=!1){this._dismissPopup(e)}render(){var e,t,i;const{showArrow:n,arrowColor:o}=this.props,r=this.props.heightOverride||this.state.popupHeight,l=this.state.anchorPosition||a.PopupAnchorPositon.Bottom,c=this.props.renderPopup(l,this.state.anchorOffset||0,this.state.constrainedPopupWidth||0,this.state.constrainedPopupHeight||0,this.state.anchorHidden);if(this.props.shareContainerLayoutInfo){const e={width:this.state.popupWidth||0,height:this.state.popupHeight||0,x:this.state.popupX||0,y:this.state.popupY||0};this.props.shareContainerLayoutInfo(e)}const d=this._getContext().isRTL,u=s.Styles.createViewStyle({position:"absolute",top:this.state.popupY,right:d?this.state.popupX:void 0,left:d?void 0:this.state.popupX,alignItems:"flex-start",alignSelf:"flex-start",overflow:"visible",width:this.props.widthOverride,height:this.props.heightOverride},!1);return s.createElement(s.Animated.View,{accessibilityTraits:s.Types.AccessibilityTrait.Dialog,ref:this._onContainerViewRef,style:[u,this._animatedTranslateYStyle],blockPointerEvents:!this.props.allowTaps,ignorePointerEvents:this.props.ignorePointerEvents,importantForAccessibility:this.props.preventFocus?s.Types.ImportantForAccessibility.NoHideDescendants:void 0},s.createElement(s.Animated.View,{style:[C.default.overflowVisible,this._animatedTranslateXStyle],ignorePointerEvents:this.props.ignorePointerEvents},s.createElement(s.Animated.View,{style:[C.default.overflowVisible,this._animatedOpacityStyle],ignorePointerEvents:this.props.ignorePointerEvents},c,n&&s.createElement(A,{anchorPosition:this.state.anchorPosition,anchorInfo:null===(i=null===(t=(e=this.props).getAnchorInfo)||void 0===t?void 0:t.call(e))||void 0===i?void 0:i.rect,popupX:this.state.popupX,popupY:this.state.popupY,popupHeight:r,arrowColor:o}))))}_animationPosition(e,t){let i;switch(i=this.props.animationConfig?t?this.props.animationConfig.dismissOffset||b:this.props.animationConfig.presentOffset||b:b,e){case a.PopupAnchorPositon.Left:return{x:-1*i.x,y:0};case a.PopupAnchorPositon.Right:return{x:i.x,y:0};case a.PopupAnchorPositon.Top:return{x:0,y:i.y};default:case a.PopupAnchorPositon.Bottom:return{x:0,y:-1*i.y}}}_positionPopupForPresentation(e){const t=this._animationPosition(e,!1);this._animatedTranslateXValue.setValue(t.x),this._animatedTranslateYValue.setValue(t.y)}_presentPopup(){this._animatePopup({x:0,y:0},1)}_dismissPopupWithAnimation(e,t){this._animatePopup(this._animationPosition(e,!0),0,t)}_animatePopup(e,t,i){const n=this.props.animationConfig&&this.props.animationConfig.duration?this.props.animationConfig.duration:200,o=this.props.animationConfig&&this.props.animationConfig.easing?this.props.animationConfig.easing:s.Animated.Easing.OutBack();s.Animated.parallel([p.default.timing(this._animatedOpacityValue,{toValue:t,duration:n/2,easing:s.Animated.Easing.Out(),useNativeDriver:!0}),p.default.timing(this._animatedTranslateYValue,{toValue:e.y,duration:n,easing:o,useNativeDriver:!0}),p.default.timing(this._animatedTranslateXValue,{toValue:e.x,duration:n,easing:o,useNativeDriver:!0})]).start(i)}_recalcPosition(e){if(!this.isComponentMounted())return;const t=(e,t=!1)=>{const i=o.clone(e);this.props.containerOffsetX&&(i.x-=this.props.containerOffsetX),this.props.containerOffsetY&&(i.y-=this.props.containerOffsetY),this.isComponentMounted()&&this._popupContainerView&&(this.state.popupWidth&&this.state.popupHeight?this._recalcPositionFromLayoutData(i,{width:this.state.popupWidth,height:this.state.popupHeight},t):c.default.measureLayoutRelativeToWindow((()=>this._popupContainerView)).then((e=>{this.isComponentMounted()&&this._recalcPositionFromLayoutData(i,e,t)}),(e=>{g.warn(u.LogTraceArea.CoachMarks,"Container not measured: "+S.default.errorAsString(e))})))};let i,n;if(e&&e.rect)i=e.rect,n=!!e.hidden;else{const e=this.props.getAnchorInfo?this.props.getAnchorInfo():void 0;if(e&&e.rect)i=e.rect,n=!!e.hidden;else if(this.props.getAnchorElement)return void o.defer((()=>{if(this.props.getAnchorElement){const e=this.props.getAnchorElement();this.isComponentMounted()&&e&&c.default.measureLayoutRelativeToWindow(this.props.getAnchorElement).then(t,(e=>{g.warn(u.LogTraceArea.CoachMarks,"Anchor not measured: "+S.default.errorAsString(e))}))}}))}o.defer((()=>t(i,n)))}_recalcPositionFromLayoutData(e,t,i=!1){if(t&&t.width>0&&t.height>0){if(!(e&&e.width>0&&e.height>0))return void this._dismissPopup();const n=o.extend({},this.state);n.anchorHidden=i,n.isMeasuringPopup&&(n.isMeasuringPopup=!1,n.popupWidth=t.width,n.popupHeight=t.height);const s=this.props.getPopupPositions?this.props.getPopupPositions(i):void 0,a=r.default.popupPosition(e,n.safeAreaInsets,n.popupWidth||0,n.popupHeight||0,s,this._getRootViewId());a&&(n.popupY=a.popupTop,n.popupX=a.popupLeft,n.anchorOffset=a.anchorOffset,n.anchorPosition=a.anchorPosition,n.constrainedPopupWidth=a.constrainedPopupWidth,n.constrainedPopupHeight=a.constrainedPopupHeight),(0,h.default)(n,this.state)||this.setState(n)}}_dismissPopup(e=!1){if(g.log(u.LogTraceArea.CoachMarks,"PopupContainer._dismissPopup, animated: "+e),this._stopDismissalTimeout(),e){let e=this.state.anchorPosition;this.props.getAnimationDirection&&(e=this.props.getAnimationDirection(this.state.anchorHidden)),this._dismissPopupWithAnimation(e,this.props.onDismissPopup)}else this.props.onDismissPopup&&this.props.onDismissPopup()}_stopDismissalTimeout(){this._dismissalTimeout&&(f.default.clearTimeout(this._dismissalTimeout),this._dismissalTimeout=void 0)}}t.default=k},23619:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PrefetchedImage=void 0;const n=i(16778),o=i(88837),s=i(63060),a=i(75893),r=i(82167);class l extends o.ComponentBase{_buildState(e,t){return{prefetchState:r.default.getImagePrefetchState(e.source,!0,t)}}shouldComponentUpdate(e,t){return!s.default.comparator(this.props,e)||!s.default.comparator(this.state,t)&&(this.state.prefetchState!==a.ImagePrefetchState.None||t.prefetchState!==a.ImagePrefetchState.Prefetching)}render(){switch(this.state.prefetchState){case a.ImagePrefetchState.Prefetched:return n.createElement(n.Image,Object.assign({},this.props));case a.ImagePrefetchState.None:case a.ImagePrefetchState.Prefetching:return this.props.altView(this.props.config)||null;case a.ImagePrefetchState.Failed:return this.props.errorView(this.props.config)||null}}}t.PrefetchedImage=l},78202:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PrimaryButton=void 0;const n=i(38933),o=i(98356),s=i(16778),a=i(10102),r=i(11930),l=i(98278),c=i(10117),d=i(15877),u=i(89808),g=i(15415),h=i(1088),p=i(81760),m=i(11010),S=i(11828),C=i(80837),f=i(19675),y=(0,d.lazyProperties)({centeredText:()=>s.Styles.createTextStyle({textAlign:"center"}),backgroundPadding:()=>s.Styles.createViewStyle({paddingLeft:25,paddingRight:25}),backgroundStyleStroke:()=>s.Styles.createViewStyle({borderWidth:1}),titleStyleDarkText:()=>s.Styles.createTextStyle({color:p.Color.gray400}),titleStyleWhiteText:()=>s.Styles.createTextStyle({color:p.Color.white}),innerContainerStyle:()=>s.Styles.createViewStyle({alignItems:"center",justifyContent:"center",height:60,borderRadius:30}),innerContainerMediumStyle:()=>s.Styles.createViewStyle({alignItems:"center",justifyContent:"center",height:40,borderRadius:20}),innerContainerFlexibleHeight:()=>s.Styles.createViewStyle({height:void 0,minHeight:60}),innerContainerFlexibleHeightMedium:()=>s.Styles.createViewStyle({height:void 0,minHeight:40}),floatingActivityIndicator:()=>s.Styles.createViewStyle({position:"absolute",left:10}),iconAndTextContainer:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"center"}),iconAndTextContainerReverse:()=>s.Styles.createViewStyle({flexDirection:"row-reverse"}),iconHorizontalMargin:()=>s.Styles.createViewStyle({marginRight:8}),iconHorizontalMarginReverse:()=>s.Styles.createViewStyle({marginLeft:8}),subtitleContainer:()=>s.Styles.createViewStyle({justifyContent:"center"}),borderWidth:()=>s.Styles.createViewStyle({borderWidth:1}),secondaryIconAndTextContainer:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"center",overflow:"visible"}),secondaryIcon:()=>s.Styles.createViewStyle({marginLeft:8}),image:()=>s.Styles.createViewStyle({width:24,height:24})});class _ extends h.default{_buildState(e,t){let i=[];if(e.buttonConfig&&(e.buttonConfig.backgroundColor||e.buttonConfig.borderColor)?(e.buttonConfig.borderColor&&(i.push(y.backgroundStyleStroke),i.push(s.Styles.createViewStyle({borderColor:e.buttonConfig.borderColor},!1))),e.buttonConfig.backgroundColor&&i.push(s.Styles.createViewStyle({backgroundColor:e.buttonConfig.backgroundColor},!1))):i=this._viewStyleForButtonStyle(e.buttonStyle,e.colorInfoOverride),e.minHeight){const t=e.buttonSize===l.SXButtonSize.Medium?40:60;i.push(s.Styles.createViewStyle({minHeight:e.minHeight,borderRadius:(e.minHeight>t?e.minHeight:t)/2},!1))}return{viewStyle:i,textColorInfo:e.buttonConfig&&e.buttonConfig.textColor?{color:e.buttonConfig.textColor,subtitleColor:e.buttonConfig.subtitleTextColor||e.buttonConfig.textColor,colorStyle:s.Styles.createTextStyle({color:e.buttonConfig.textColor},!1)}:this._textInfoForButtonStyle(e.buttonStyle,e.colorInfoOverride,y.titleStyleWhiteText,y.titleStyleDarkText),updateOpacityOnHover:!e.buttonConfig||!e.buttonConfig.hoverBackgroundColor,gradientColors:this._getGradientColors(e),hoverGradientColors:e.buttonStyle===l.SXButtonStyle.GradientFill?e.colorInfoOverride?a.gradientColorsForColorInfo(e.colorInfoOverride):u.default.getHoverGradientColors():void 0}}_onHoverStart(e){this.setState({isHovering:!0},(()=>super._onHoverStart(e)))}_onHoverEnd(e){this.state.isHovering?this.setState({isHovering:!1},(()=>super._onHoverEnd(e))):super._onHoverEnd(e)}_updateButton(e,t=!0){super._updateButton(e&&!!this.state.updateOpacityOnHover,t)}render(){var e;const t=this.props.buttonSize===l.SXButtonSize.Medium,i=[t?y.innerContainerMediumStyle:y.innerContainerStyle,this.props.allowTextWrap?t?y.innerContainerFlexibleHeightMedium:y.innerContainerFlexibleHeight:void 0,y.backgroundPadding,this.state.viewStyle,this.props.innerContainerStyle];let a,d;if(this.props.buttonConfig&&this.props.buttonConfig.hoverBackgroundColor&&this.state.isHovering&&i.push(s.Styles.createViewStyle({backgroundColor:this.props.buttonConfig.hoverBackgroundColor},!1)),this.props.showShadow&&i.push(C.default.shadowLightStyle),this.props.addBorderColor&&i.push([y.borderWidth,s.Styles.createViewStyle({borderColor:this.props.addBorderColor},!1)]),this.props.backgroundStyle&&i.push(s.Styles.createViewStyle(this.props.backgroundStyle,!1)),this.props.title){const e=[t?m.default.fontStyle.bodyBold:m.default.fontStyle.primaryButtonLarge,this.state.textColorInfo.colorStyle];if(this.props.maxTitleWidth&&e.push(s.Styles.createTextStyle({maxWidth:this.props.maxTitleWidth},!1)),this.props.allowTextWrap&&(e.push(y.centeredText),this.props.icon&&e.push(C.default.flexOne)),this.props.textStyleDeprecated&&e.push(this.props.textStyleDeprecated),this.props.textStyleOverride&&e.push(this.props.textStyleOverride),a=s.createElement(s.Text,{style:e,numberOfLines:this.props.allowTextWrap?void 0:1},this.props.title),this.props.subtitle){const e=[s.Styles.createTextStyle({color:this.state.textColorInfo.subtitleColor},!1)];this.props.allowTextWrap&&e.push(y.centeredText),a=s.createElement(s.View,{style:[y.subtitleContainer,C.default.flexOne]},a,s.createElement(f.Caption,{style:e,numberOfLines:this.props.allowTextWrap?void 0:1},this.props.subtitle))}}a&&(d=this._getAccessoryMarginStyle());let u,h,p=this.props.renderAccessoryView?this.props.renderAccessoryView(this.state.textColorInfo.color,d):void 0;if(p||(this.props.icon?p=s.createElement(c.default,{icon:this.props.icon,size:this.props.iconSize||(t?S.IconSize.size16:S.IconSize.size24),color:this.state.textColorInfo.color,style:d}):this.props.imageSource&&(p=s.createElement(s.Image,{source:this.props.imageSource,style:[d,y.image]}))),p)if(a){const e=[y.iconAndTextContainer];this.props.iconPositon===l.SXButtonIconPosition.End&&e.push(y.iconAndTextContainerReverse),a=s.createElement(s.View,{style:e},p,a)}else a=p;if(this.props.secondaryIcon){const e=[y.secondaryIcon];this.props.secondaryIconMarginLeft&&e.push(s.Styles.createViewStyle({marginLeft:this.props.secondaryIconMarginLeft},!1)),this.props.secondaryIconMarginRight&&e.push(s.Styles.createViewStyle({marginRight:this.props.secondaryIconMarginRight},!1)),a=s.createElement(s.View,{style:y.secondaryIconAndTextContainer},a,s.createElement(c.default,{style:e,icon:this.props.secondaryIcon,size:this.props.secondaryIconSize||this.props.iconSize||(t?S.IconSize.size16:S.IconSize.size24),color:this.props.secondaryIconColor||this.state.textColorInfo.color}))}if(this.props.showActivityIndicator&&(u=s.createElement(g.default,{style:a?y.floatingActivityIndicator:void 0,size:a?l.SXActivityIndicatorSize.ExtraSmall:l.SXActivityIndicatorSize.Small,tintColor:this._indicatorColorForButtonStyle(this.props.buttonStyle,this.props.colorInfoOverride)})),this.state.gradientColors){const i=[t?y.innerContainerMediumStyle:y.innerContainerStyle,C.default.absoluteFill];let o;this.props.backgroundStyle&&i.push(this.props.backgroundStyle),this.state.isHovering&&this.props.showGradientHover&&(o=this.state.hoverGradientColors),h=s.createElement(n.GradientView,{style:i,colors:this.state.gradientColors,secondaryColors:o,direction:null!==(e=this.props.gradientDirection)&&void 0!==e?e:n.GradientDirection.RIGHT})}const _=this.props.disabled&&!this.props.disabledOpacityOverride||this.props.showActivityIndicator,v=this.props.accessibilityLabel||this.props.title||"",b=r.default.buttonAccessibilityInfo(v,!!_);return s.createElement(s.Button,{ref:this._onButtonRef,style:this.props.style,title:this.props.hoverText?this.props.hoverText:this.props.title,onFocus:this.props.disabled?void 0:this.props.onFocus,onPress:this.props.disabled?void 0:this.props.onPress,onPressIn:this._onPressInBound,onPressOut:this._onPressOutBound,onLongPress:this.props.disabled?void 0:this.props.onLongPress,onHoverStart:this._onHoverStartBound,onHoverEnd:this._onHoverEndBound,onKeyPress:this.props.disabled?void 0:this.props.onKeyPress,disabled:_,accessibilityLabel:b.accessibilityLabel,accessibilityTraits:this.props.accessibilityTraits||b.accessibilityTraits,tabIndex:this.props.tabIndex,disableTouchOpacityAnimation:!0,autoFocus:this.props.autoFocus,importantForAccessibility:this.props.accessibilityHidden?s.Types.ImportantForAccessibility.NoHideDescendants:this.props.importantForAccessibility},s.createElement(o.View,{ref:this._onAnimatedInnerButtonRef,style:i},h,u,a))}_getAccessoryMarginStyle(){let e;if(this.props.iconPositon===l.SXButtonIconPosition.End)e=this.props.iconHorizontalMargin?s.Styles.createViewStyle({marginLeft:this.props.iconHorizontalMargin},!1):y.iconHorizontalMarginReverse;else e=this.props.iconHorizontalMargin?s.Styles.createViewStyle({marginRight:this.props.iconHorizontalMargin},!1):y.iconHorizontalMargin;return e}_getGradientColors(e){const{buttonStyle:t,colorInfoOverride:i,reverseGradientColor:n}=e;return t===l.SXButtonStyle.GradientFill?i?a.gradientColorsForColorInfo(i):n?u.default.getReversedGradientColors():u.default.getGradientColors():t===l.SXButtonStyle.AgnosticGradientFill?this._getAgnosticGradientColors():void 0}}t.PrimaryButton=_,t.default=_},13034:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IndicatorSize=void 0;const n=i(96486),o=i(48184),s=i(16778),a=i(88837),r=i(36801),l=i(15877),c=i(78780),d=i(80837),u=i(53374);var g,h,p;!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(g=t.IndicatorSize||(t.IndicatorSize={})),function(e){e[e.None=0]="None",e[e.OneThird=1]="OneThird",e[e.TwoThirds=2]="TwoThirds",e[e.Complete=3]="Complete"}(h||(h={})),function(e){e[e.None=0]="None",e[e.OneThird=1]="OneThird",e[e.OneThirdLooping=2]="OneThirdLooping",e[e.TwoThirds=3]="TwoThirds",e[e.TwoThirdsLooping=4]="TwoThirdsLooping",e[e.Complete=5]="Complete"}(p||(p={}));const m=(0,l.lazyProperties)({small:()=>s.Styles.createViewStyle({width:40,height:40}),medium:()=>s.Styles.createViewStyle({width:60,height:60}),large:()=>s.Styles.createViewStyle({width:80,height:80})});class S extends a.ComponentBase{constructor(){super(...arguments),this._animatedValue=new s.Animated.Value(0)}_buildState(e,t){let i={},n=h.None;return n=!e.progress||e.progress<.33?h.None:e.progress<.66?h.OneThird:e.progress<1?h.TwoThirds:h.Complete,i.progressStep=n,(t||this.state.progressStep===h.None)&&(i.animationStep=this._animationStepForProgressStep(n)),i}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this._shouldAnimate(this.state)&&!this._shouldAnimate(t)&&this._loopAnimation()}_shouldAnimate(e){return e.progressStep!==h.None}_loopAnimation(){if(!this.isComponentMounted())return;const e=this._animationDuration(this.state.animationStep);this._animatedValue.setValue(0),s.Animated.timing(this._animatedValue,{toValue:1,duration:e,easing:s.Animated.Easing.Linear(),isInteraction:!1}).start((()=>{if(this.isComponentMounted()){let e=this.state.animationStep,t=!1,i=!1;switch(this.state.animationStep){case p.OneThird:case p.OneThirdLooping:e=this._animationStepForProgressStep(this.state.progressStep,this.state.progressStep===h.OneThird),i=this.state.progressStep>h.OneThird,t=!0;break;case p.TwoThirds:case p.TwoThirdsLooping:e=this._animationStepForProgressStep(this.state.progressStep,this.state.progressStep===h.TwoThirds),i=this.state.progressStep>h.TwoThirds,t=!0}t&&(e>this.state.animationStep&&i&&(e=this._nextAnimationStep(this.state.animationStep)),this._setAnimationStepAndStartAnimation(e,!0))}}))}_setAnimationStepAndStartAnimation(e,t=!0){this.state.animationStep!==e?this.setState({animationStep:e},(()=>{t&&this._loopAnimation()})):t&&this._loopAnimation()}_animationDuration(e){const t=this._animationInfoForActivityStep(e);return t&&t.durationMs||1e3}_nextAnimationStep(e,t=!0){if(t)switch(e){case p.None:return p.OneThird;case p.OneThird:return p.TwoThirds;case p.TwoThirds:return p.Complete}return e===p.Complete?e:e+1}_animationStepForProgressStep(e,t=!1){switch(e){case h.OneThird:return t?p.OneThirdLooping:p.OneThird;case h.TwoThirds:return t?p.TwoThirdsLooping:p.TwoThirds;case h.Complete:return p.Complete}return p.None}_animationInfoForActivityStep(e){switch(e){case p.OneThird:return c.default.CIRCLE_STEP0;case p.OneThirdLooping:return c.default.CIRCLE_STEP1;case p.TwoThirds:return c.default.CIRCLE_STEP2;case p.TwoThirdsLooping:return c.default.CIRCLE_STEP3;case p.Complete:return c.default.CIRCLE_STEP4;case p.None:return;default:return u.default.switchStatementExhaustiveChecking(e)}}render(){if(this.state.animationStep!==p.None){const e=this._animationInfoForActivityStep(this.state.animationStep);if(!e)return null;let t=[];if(n.isUndefined(this.props.size))t.push(d.default.flexOne);else{const e=this.props.size===g.Small?m.small:this.props.size===g.Medium?m.medium:m.large;t.push(e)}this.props.style&&t.push(this.props.style);const i=r.default.getAssetSourceWithColor(e,this.props.tintColor);return s.createElement(s.View,{style:t},s.createElement(o.default,Object.assign({},i,{style:d.default.flexOne,progress:this._animatedValue})))}return null}}t.default=S},54976:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DividerType=void 0;const n=i(96486),o=i(16778),s=i(13282),a=i(87134),r=i(47126),l=i(15877),c=i(6250),d=i(80837),u=i(24576);var g;!function(e){e[e.None=0]="None",e[e.All=1]="All",e[e.Between=2]="Between"}(g=t.DividerType||(t.DividerType={}));const h="checkbox",p=(0,l.lazyProperties)({checkboxView:()=>o.Styles.createViewStyle({alignSelf:"flex-start",paddingVertical:6}),checkboxViewFullWidth:()=>o.Styles.createViewStyle({alignSelf:"stretch",paddingVertical:6,alignItems:"flex-start"})});class m extends u.default{constructor(){super(...arguments),this._mountedRefsMap=new c.default,this._onKeyPress=e=>{let t=this.state.focusedIndex;e.keyCode!==r.default.UP&&e.keyCode!==r.default.LEFT||(t-=1),e.keyCode!==r.default.DOWN&&e.keyCode!==r.default.RIGHT||(t+=1),t<0||t>=this.props.radioButtons.length||this.setState({focusedIndex:t})},this._onShouldToggleCheckbox=e=>!e}_buildState(e,t){let i={};return t&&(i.focusedIndex=0),i}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.state.focusedIndex!==t.focusedIndex&&this.focusItem(this.state.focusedIndex)}focusItem(e=0){if(!(e<0||e>this.props.radioButtons.length-1))if(this.state.focusedIndex===e){const t=this._mountedRefsMap.ref(h+e);t&&t.requestFocus()}else this.setState({focusedIndex:e})}render(){const e=this.props.radioButtons.length,t=n.map(this.props.radioButtons,((t,i)=>{const n=t.key===this.props.selectedKey,r=h+i,l=[],c=[this.props.fullWidth?p.checkboxViewFullWidth:p.checkboxView,this.props.rowStyle,t.rowStyle],u=o.createElement(s.default,{key:r,ref:this._mountedRefsMap.onComponentRef(r),style:c,text:t.text,textStyle:[d.default.flexOne,this.props.textStyle],secondaryText:t.secondaryText,secondaryTextStyle:this.props.secondaryTextStyle,accessibilityLabelPrefix:this.props.accessibilityLabelPrefix,onPress:()=>this.props.onSelected(t.key),onShouldToggleCheckbox:this._onShouldToggleCheckbox,value:n,disable:t.disabled,disableSelectionAnimation:this.props.disableSelectionAnimation});if(l.push(u),t.footer&&l.push(t.footer),!this.props.dividerType||this.props.dividerType===g.Between&&i===e-1)return l;const m=o.createElement(a.default,{key:"divider"+i,colorThemeOverride:this.props.colorThemeOverride,style:this.props.dividerColorStyle});return l.push(m),l}));return o.createElement(o.View,{style:this.props.style,onKeyPress:this._onKeyPress},t)}}t.default=m},93194:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SXActionMenuCancel=t.CancelButtonPosition=void 0;const n=i(96486),o=i(32377),s=i(16778),a=i(19784),r=i(89391),l=i(47204),c=i(98278),d=i(62602),u=i(46096),g=i(36237),h=i(72490),p=i(33754),m=i(30124),S=(i(86045),i(62232),i(81760)),C=i(99543),f=i(22709),y=i(79669),_=i(212),v=i(60305),b=i(18037),T=i(97634),P=i(53374);var A;!function(e){e[e.Default=0]="Default",e[e.End=1]="End"}(A=t.CancelButtonPosition||(t.CancelButtonPosition={})),t.SXActionMenuCancel="cancel";class k{static showWithOptions(e){return g.log(u.LogTraceArea.GenericUnsafe,"SXActionMenu showWithOptions"),this._show(e.id,e.config,e.getMenuItems,e.handleMenuCommand,e.menuTitle,e.cancelButtonTitleIOS||p.getString("Global.CancelLabel"),e.onDismiss,e.delay,e.destructiveButtonIndex,e.maintainAnchor,e.maintainTitleForDesktop,e.rootViewId,e.accessibilityAnnouncement,void 0,e.invokingEvent)}static showGroupWithOptions(e){return g.log(u.LogTraceArea.GenericUnsafe,"SXActionMenu showGroupWithOptions"),this._showMenuGroup(e.id,e.config,e.getMenuGroups,e.handleMenuCommand,e.cancelButtonTitleIOS,e.onDismiss,e.delay,e.destructiveButtonIndex,e.maintainAnchor,e.maintainTitleForMobile,e.rootViewId,e.accessibilityAnnouncement,e.invokingEvent)}static showWithActionMenuConfig(e){if(g.log(u.LogTraceArea.GenericUnsafe,"SXActionMenu showWithActionMenuConfig"),e.useAlertForDesktop){const t=[],i={text:e.options.cancelButtonTitle||p.getString("Global.CancelLabel"),onPress:e.onCancel,isCancel:!0};e.options.cancelButtonPosition!==A.End&&t.push(i),n.each(e.options.buttons,((i,n)=>{t.push({text:i.text,onPress:()=>{e.callback(i.command)},isSubmit:n===e.options.destructiveButtonIndex})})),e.options.cancelButtonPosition===A.End&&t.push(i);const o=e.options.title||e.options.message||"",s=e.options.title?e.options.message:void 0;return a.default.showWithOptions({title:o,message:s,buttons:t,dialogAccessibilityTitle:e.options.dialogAccessibilityTitle||o,rootViewId:e.rootViewId,suppressModalDismissalEvents:e.suppressModalDismissalEvents,onClickOutside:e.onCancel,allowScrolling:e.allowScrolling}),!0}{const t={anchor:e.options.anchor,positionPriorities:e.options.positionPriorities,useTheme:!0};return k._show(this.actionMenuId(),t,(()=>e.options.buttons),e.callback,e.options.message||e.options.title,e.options.cancelButtonTitle,void 0,0,e.options.destructiveButtonIndex,e.maintainAnchor,void 0,e.rootViewId,e.accessibilityAnnouncement,e.onCancel,e.invokingEvent)}}static dismiss(e,t){l.default.dismissPopup(e,t)}static menuId(e){return this._popupId++,(e||"popup")+this._popupId}static actionMenuId(e){return this._actionMenuId++,(e||"actionmenu")+this._actionMenuId}static _show(e,t,i,o,s,a,r,c,d,u,g,h,p,m,S){const C=i(t);if(n.isEmpty(C))return!1;l.default.validatePopupOffset(t.popupOffset);return k._presentMenu((()=>{{const i={key:"menu",title:g?s:void 0,menuItems:C};return this._renderWebActionMenu(e,t,o,[i],r,c,d,h)}}),p)}static _showMenuGroup(e,t,i,o,s,a,r,c,d,u,g,h,p){const m=i(t);if(n.isEmpty(m))return!1;l.default.validatePopupOffset(t.popupOffset);return k._presentMenu((()=>this._renderWebActionMenu(e,t,o,m,a,r,void 0,g)),h)}static _registerElectronContextMenuItemSelectedHandler(e,t,i,n,o){this._electronMenuItemSelectedEventConfigs[o]={id:e,config:i,handleMenuCommand:n,rootViewId:t}}static _registerELectronContextMenuClosedHandler(e,t){this._electronMenuCloseEventConfigs.set(e,t)}static _registerElectronContextMenuListeners(){window.electronApi.ipcProvider.contextMenu.menuItemClick.once((e=>{if(!this._electronMenuItemSelectedEventConfigs[e.requestId])return;const{id:t,config:i,handleMenuCommand:n,rootViewId:o}=this._electronMenuItemSelectedEventConfigs[e.requestId];k._handleWebMenuCommand(e.command,t,i,n,o),delete this._electronMenuItemSelectedEventConfigs[e.requestId]})),window.electronApi.ipcProvider.contextMenu.menuClose.once((e=>{if(this._electronMenuCloseEventConfigs.has(e.requestId)){const t=this._electronMenuCloseEventConfigs.get(e.requestId);t&&t(),this._electronMenuCloseEventConfigs.delete(e.requestId)}else g.error(u.LogTraceArea.GenericUnsafe,"Close menu request with uknown requestId: "+e.requestId);window.electronApi.ipcProvider.contextMenu.menuClose.removeAllListeners(),window.electronApi.ipcProvider.contextMenu.menuItemClick.removeAllListeners()}))}static _presentMenu(e,t){const i=P.default.newCauseId();return g.log(u.LogTraceArea.GenericUnsafe,"SXActionMenu._presentMenu, causeId: "+i),t&&(g.log(u.LogTraceArea.GenericUnsafe,"SXActionMenu._presentMenu with accessibility annoucement, causeId: "+i),s.Accessibility.announceForAccessibility(t)),e()}static _renderMobileActionMenu(e,i,s,a,r,l,c,d,u,g){const h={anchor:u||!m.default.isUsingStackNavigationContextNoSubscription()||v.default.isTablet()?e.anchor:void 0,buttons:s,title:a,destructiveButtonIndexIOS:d,cancelButtonTitleIOS:r||p.getString("Global.CancelLabel")},S=n=>{const o=n.toLowerCase()===t.SXActionMenuCancel?t.SXActionMenuCancel:n;i(o,e),l&&l(),g&&o===t.SXActionMenuCancel&&g()};return c?n.delay((()=>o.ActionMenu.show(h,S)),c):o.ActionMenu.show(h,S),!0}static _renderWebActionMenu(e,t,i,o,a,r,c,d){let u,g,h;const m=t.colorThemeOverride||b.default.colorThemeNoSubscription();if(t.colors)u=t.colors.strokeColor,g=t.colors.fillColor,h=t.colors.textColor;else if(t.useTheme){const e=_.default.themeColorsForTheme(m);u=T.isDarkTheme(m)?e.dividerColor:void 0,g=e.popoverBackgroundColor,h=e.primaryTextColor}else u=T.isDarkTheme(m)?_.default.themeColorsForTheme(m).dividerColor:S.Color.black,g=S.Color.black,h=S.Color.white;const v={getAnchor:()=>t.anchor(),renderPopup:(a,r,l,m)=>{let S;if(1===o.length){const a=o[0];if(!n.isUndefined(c)){const e=a.menuItems[c];e&&(e.isDestructiveButton=!0)}S=s.createElement(C.default,Object.assign({},t.menuStyles,{title:a.title,menuItems:a.menuItems,onSelectItem:n=>this._handleWebMenuCommand(n,e,t,i,d),menuTextStyles:a.menuTextStyles||s.Styles.createTextStyle({color:h},!1),menuButtonStyles:a.menuButtonStyles,focusFirst:!0}))}else o.length>1&&(S=s.createElement(f.default,Object.assign({},t.menuStyles,{sections:o,onSelectItem:n=>this._handleWebMenuCommand(n,e,t,i,d),menuTextStyles:s.Styles.createTextStyle({color:h},!1)})));return t.popupMaxWidth&&(S=s.createElement(s.View,{style:s.Styles.createViewStyle({maxWidth:t.popupMaxWidth},!1)},S)),s.createElement(y.default,{disableContextMenu:t.popupDisableContextMenu,anchorPosition:a,anchorOffset:r,popupWidth:l,popupHeight:m,strokeColor:u,fillColor:g,offset:t.popupOffset,popupBeakHeight:t.popupBeakSize?t.popupBeakSize.height:void 0,popupBeakWidth:t.popupBeakSize?t.popupBeakSize.width:void 0,popupAccessibilityTitle:p.getString("Global.MoreOptions"),skipPopupAutoFocus:!0},S)},positionPriorities:t.positionPriorities||["top","bottom"],onDismiss:a,dismissIfShown:!0,rootViewId:d};return l.default.showPopup(v,e,r)}static _renderElectronActionMenu(e,t,i,o,a,l){const p=n.filter(t,(e=>e.menuItems.length>0));if(!p.length)return!1;const m=e.colorThemeOverride||b.default.colorThemeNoSubscription(),S=T.isDarkTheme(m),C=[];let f,y;n.each(p,((t,i)=>{const o=n.map(t.menuItems,(t=>{return{text:(o=t.text,o.replace("&","&&")),group:i,type:t.selectableType&&t.selectableType===c.SXMenuItemSelectableType.Checkbox?"checkbox":void 0,checked:t.selected,disabled:t.disabled,accelerator:t.shortcut?h.default.acceleratorForKeyboardShortcut(t.shortcut):void 0,command:t.command,icon:(n=t.icon,n&&e.useTheme&&S?"Dark"+n:n)};var n,o}));C.push(...o)}));const _=l;!_||n.isUndefined(_.pageX)||n.isUndefined(_.pageY)||(f=_.pageX,y=_.pageY);const v=()=>{if(g.log(u.LogTraceArea.GenericUnsafe,"SXActionMenu.showContextMenu, requestId: "+i),s.UserInterface.isNavigatingWithKeyboard()){const t=e.anchor();if(r.default.getS4LUiFeaturesNoSubscription().useNativeContextMenus&&t)return void d.default.measureLayoutRelativeToWindow(e.anchor).then((e=>{const t=e?{x:Math.round(e.x+e.width/2),y:Math.round(e.y+e.height/2),zoomFactor:window.electronApi.getZoomFactor()}:void 0,n={menuOptions:C,options:t,requestId:i,windowId:o};g.log(u.LogTraceArea.GenericUnsafe,"SXActionMenu - Navigated with keyboard. Calling IPC method showGenericPopupMenu(), requestId: "+i),window.electronApi.ipcProvider.contextMenu.showGenericPopupMenu.send(n)}),(e=>{g.warn(u.LogTraceArea.GenericUnsafe,"SXActionMenu not measured: "+e.toString())}))}const t={x:f,y,zoomFactor:window.electronApi.getZoomFactor()},n={menuOptions:C,options:t,requestId:i,windowId:o};g.log(u.LogTraceArea.GenericUnsafe,"SXActionMenu - Navigated with mouse. Calling IPC method showGenericPopupMenu(), requestId: "+i),window.electronApi.ipcProvider.contextMenu.showGenericPopupMenu.send(n)};return a?n.delay(v,a):v(),!0}static _handleWebMenuCommand(e,t,i,n,o){k.dismiss(t,o),n(e,i)}static _flattenMenu(e){const t=[];return n.each(e,(e=>t.push(...e.menuItems))),t}}k._popupId=0,k._actionMenuId=0,k._electronMenuCloseEventConfigs=new Map,k._electronMenuItemSelectedEventConfigs={},t.default=k},15415:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(50940),a=i(89391),r=i(98278),l=i(81760);class c extends o.ComponentBase{_buildState(e,t){return{useRXIndicator:e.useRXIndicator||!a.default.getS4LUiFeatures().jsonAnimationEnabled}}render(){if(this.state.useRXIndicator){let e;switch(this.props.size){case r.SXActivityIndicatorSize.ExtraSmall:e="tiny";break;case r.SXActivityIndicatorSize.Medium:e="medium";break;case r.SXActivityIndicatorSize.Large:e="large";break;default:case r.SXActivityIndicatorSize.Small:e="small"}return n.createElement(n.ActivityIndicator,{style:this.props.style,size:e,color:this.props.tintColor||l.Color.white,deferTime:this.props.deferTimeMs})}{const e={size:this.props.size,tintColor:this.props.tintColor,deferTimeMs:this.props.deferTimeMs,style:this.props.style};return n.createElement(s.default,Object.assign({},e))}}}t.default=c},22222:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(98278),a=i(78202),r=i(36595),l=i(24576);class c extends l.default{constructor(){super(...arguments),this._onButtonTertirarytRef=e=>{this._button=e||void 0},this._onPrimaryButtonRef=e=>{this._button=e||void 0}}requestFocus(){this._button&&this._button.requestFocus&&this._button.requestFocus()}_themedButtonStyle(){const e=this._useDarkTheme();return this.props.buttonStyle===s.SXButtonStyle.ThemeFill?e?s.SXButtonStyle.LightFill:s.SXButtonStyle.DarkFill:this.props.buttonStyle===s.SXButtonStyle.ThemeStroke?e?s.SXButtonStyle.LightStroke:s.SXButtonStyle.DarkStroke:e?s.SXButtonStyle.LightNoBackground:s.SXButtonStyle.DarkNoBackground}_accessibleButtonStyle(){const e=this._useDarkTheme();return this.props.buttonStyle===s.SXButtonStyle.ColorStroke?e?s.SXButtonStyle.LightStroke:s.SXButtonStyle.DarkStroke:e?s.SXButtonStyle.LightFill:s.SXButtonStyle.DarkFill}render(){let e;return this.props.buttonStyle===s.SXButtonStyle.ThemeFill||this.props.buttonStyle===s.SXButtonStyle.ThemeStroke||this.props.buttonStyle===s.SXButtonStyle.ThemeNoBackground?(e=n.clone(this.props),e.buttonStyle=this._themedButtonStyle()):!this._useAccessibleTheme()||this.props.buttonStyle!==s.SXButtonStyle.ColorFill&&this.props.buttonStyle!==s.SXButtonStyle.ColorStroke&&this.props.buttonStyle!==s.SXButtonStyle.GradientFill&&this.props.buttonStyle!==s.SXButtonStyle.AgnosticGradientFill?e=this.props:(e=n.clone(this.props),e.buttonStyle=this._accessibleButtonStyle()),this.props.buttonSize===s.SXButtonSize.Small?o.createElement(r.default,Object.assign({},e,{ref:this._onButtonTertirarytRef})):o.createElement(a.default,Object.assign({},e,{ref:this._onPrimaryButtonRef}))}}t.default=c},1088:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(98356),o=i(16778),s=i(88837),a=i(23606),r=i(98278),l=i(46096),c=i(36237),d=i(15877),u=i(89808),g=i(81760),h=i(53374),p=i(89667),m=(0,d.lazyProperties)({backgroundStyleStroke:()=>o.Styles.createViewStyle({borderWidth:1}),backgroundStyleDark:()=>o.Styles.createViewStyle({backgroundColor:g.Color.gray400}),backgroundStyleWhite:()=>o.Styles.createViewStyle({backgroundColor:g.Color.white}),backgroundStyleBlue:()=>o.Styles.createViewStyle({backgroundColor:g.Color.blue}),backgroundStyleLightStroke:()=>o.Styles.createViewStyle({borderColor:g.Color.white}),backgroundStyleDarkStroke:()=>o.Styles.createViewStyle({borderColor:g.Color.gray400})});class S extends s.ComponentBase{constructor(){super(...arguments),this._pressed=!1,this._onAnimatedInnerButtonRef=e=>{this._animatedInnerButton=e||void 0},this._onButtonRef=e=>{this._button=e||void 0},this._onHoverEndBound=e=>{this._onHoverEnd(e)},this._onHoverStartBound=e=>{this._onHoverStart(e)},this._onPressInBound=()=>{this._onPressIn()},this._onPressOutBound=()=>{this._onPressOut()}}requestFocus(){this._button&&this._button.requestFocus()}_indicatorColorForButtonStyle(e,t){switch(e){case r.SXButtonStyle.BlueFill:case r.SXButtonStyle.ColorFill:case r.SXButtonStyle.LightStroke:case r.SXButtonStyle.DarkFill:case r.SXButtonStyle.LightNoBackground:case r.SXButtonStyle.GradientFill:case r.SXButtonStyle.AgnosticGradientFill:return g.Color.white;case r.SXButtonStyle.ColorStroke:return t?this._accentColor(t):u.default.getPrimaryColorNoSubscription();default:case r.SXButtonStyle.LightFill:case r.SXButtonStyle.DarkStroke:case r.SXButtonStyle.DarkNoBackground:return g.Color.gray400}}_intOnPressIn(e,t){this.props.disabled||this.props.disablePressIn||(this._updateButton(!0,e),this._pressed=!0,t&&t())}_intOnPressOut(e){this._pressed&&(this._updateButton(!1,e),this._pressed=!1)}_internalUpdateButton(e,t=!0){if(this._animatedInnerButton&&(this._animation&&this._animation.stop(),t)){const t=h.default.newCauseId();c.log(l.LogTraceArea.SXAnimated,"SXButtonBase._internalUpdateButton causeId: "+t),this._animation=this._animatedInnerButton.getAnimation({scale:{toValue:e,easing:n.Easing.SkypeExpoInOut5,duration:n.Common.Duration.Tiny}},t),this._animation.start((()=>{delete this._animation}))}}_onHoverEnd(e){this._intOnPressOut(!0),this.props.onHoverEnd&&this.props.onHoverEnd(e)}_onHoverStart(e){this._intOnPressIn(!1,(()=>{this.props.onHoverStart&&this.props.onHoverStart(e)}))}_onPressIn(){this._intOnPressIn(!0)}_onPressOut(){this._intOnPressOut(!0)}_textInfoForButtonStyle(e,t,i,n){switch(e){case r.SXButtonStyle.BlueFill:case r.SXButtonStyle.ColorFill:case r.SXButtonStyle.LightStroke:case r.SXButtonStyle.DarkFill:case r.SXButtonStyle.LightNoBackground:case r.SXButtonStyle.GradientFill:case r.SXButtonStyle.AgnosticGradientFill:return{color:g.Color.white,subtitleColor:g.Color.gray100,colorStyle:i};case r.SXButtonStyle.ColorStroke:const e=t?this._accentColor(t):u.default.getPrimaryColor();return{color:e,subtitleColor:e,colorStyle:t?o.Styles.createTextStyle({color:e},!1):u.default.getPrimaryTextColorStyle()};default:case r.SXButtonStyle.LightFill:case r.SXButtonStyle.DarkStroke:case r.SXButtonStyle.DarkNoBackground:return{color:g.Color.gray400,subtitleColor:g.Color.gray300,colorStyle:n}}}_updateButton(e,t=!0){const i=e?.9:1;this._internalUpdateButton(i,t)}_viewStyleForButtonStyle(e,t){switch(e){case r.SXButtonStyle.ColorFill:let e;return e=t?a.backgroundColorStyleForColorInfo(t):u.default.getPrimaryBackgroundColorStyle(),[e];case r.SXButtonStyle.ColorStroke:let i;if(t){const e=this._accentColor(t);i=o.Styles.createViewStyle({borderColor:e},!1)}else i=u.default.getPrimaryBorderColorStyle();return[m.backgroundStyleStroke,i];case r.SXButtonStyle.LightStroke:return[m.backgroundStyleStroke,m.backgroundStyleLightStroke];case r.SXButtonStyle.DarkFill:return[m.backgroundStyleDark];case r.SXButtonStyle.DarkStroke:return[m.backgroundStyleStroke,m.backgroundStyleDarkStroke];case r.SXButtonStyle.BlueFill:return[m.backgroundStyleBlue];case r.SXButtonStyle.LightNoBackground:case r.SXButtonStyle.DarkNoBackground:case r.SXButtonStyle.GradientFill:case r.SXButtonStyle.AgnosticGradientFill:return[];default:case r.SXButtonStyle.LightFill:return[m.backgroundStyleWhite]}}_getAgnosticGradientColors(){const{agnosticGradientColor:e}=this.props;if((0,p.isAgnosticGradientColor)(e))return(0,p.getButtonsAgnosticGradientFillColor)(e)}_accentColor(e){return a.accentColor(e)}}t.default=S},36029:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74958),o=i(96486),s=i(16778),a=i(88837),r=i(89391),l=i(41190),c=i(65976),d=i(63060),u=i(46096),g=i(36237),h=i(71349),p=i(17791),m=i(4057),S=i(40363),C=i(12770);var f;!function(e){e[e.NothingToLoad=0]="NothingToLoad",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded",e[e.Error=3]="Error"}(f||(f={}));let y={prev:{},cur:{}};p.default.subscribe((()=>{y={prev:{},cur:{}}})),C.default.setInterval((()=>{y.prev=y.cur,y.cur={}}),36e5);class _ extends a.ComponentBase{constructor(){super(...arguments),this._attemptedTokenRefresh=!1,this._onAuthRefreshed=()=>{const e=this.isComponentMounted()&&this.state.loadingState!==f.Loaded;g.log(u.LogTraceArea.ErrorSafeImage,"Auth token refreshed; is going to try one more time=",e,n.pii.Omit(this.props.sourceUrl)),e&&this.setState({loadingState:f.Loading,retryCount:this._retryCount()+1})},this._onImageLoadSuccess=e=>{this.props.sourceUrl&&(this._nativeDimensions=e,this.props.shouldInstrument&&this._telemetryEvent&&(this._telemetryEvent.endLoad(),this._telemetryEvent.setStatus(!0,u.MessagingFailureReason.None),g.track(this._telemetryEvent)),this._onImageLoadCommon()&&(this.props.onLoad&&this.props.onLoad(e),this.setState({loadingState:f.Loaded})))},this._onImageLoadError=e=>{if(!this.props.sourceUrl)return void g.log(u.LogTraceArea.ErrorSafeImage,"There was an error, but there is also no sourceUrl ... ","this should not happen because ErrorSafeImage does not call Image if sourceUrl is empty");const t=this._retryCount();if(g.log(u.LogTraceArea.ErrorSafeImage,"Image failed to load: "+n.pii.Omit(this.props.sourceUrl)+" nth try: "+(t+1)+" error: "+m.default.errorAsString(e)),this.props.shouldInstrument&&this._telemetryEvent&&(this._telemetryEvent.endLoad(),this._telemetryEvent.setStatus(!1,u.MessagingFailureReason.AMSFailure),g.track(this._telemetryEvent)),this._onImageLoadCommon()){if(!this.props.noRetryOnError){if(t<3)return void C.default.setTimeout((()=>{if(this.isComponentMounted()){const i=this.props.sourceUrl?n.pii.Omit(this.props.sourceUrl):"no source";g.log(u.LogTraceArea.ErrorSafeImage,"Retrying image load - previous retryCount=",t,i,m.default.errorAsString(e)),this.setState({retryCount:t+1})}}),1e3);this._attemptedTokenRefresh?g.log(u.LogTraceArea.ErrorSafeImage,"Image already attempted to refresh the token before this error response. Failing.",n.pii.Omit(this.props.sourceUrl)):(this._attemptedTokenRefresh=!0,l.attemptTokenRefresh(this.props.sourceUrl).then(this._onAuthRefreshed,o.noop))}if(!this.props.noRetryOnError||this.props.shouldInstrument){const t=e?m.default.errorAsString(e):void 0;g.log(u.LogTraceArea.ErrorSafeImage,"Image load failed: ",this._telemetryEvent||t&&e&&e.message)}_._cacheBadImage(this.props.sourceUrl),this.props.onError&&this.props.onError(e),this.setState({loadingState:f.Error})}}}_buildState(e,t){const i={skypetokenAllowedDomains:r.default.getS4LMessagingFeatures().skypetokenAllowedDomains},n=this.props;return(t||e.sourceUrl!==n.sourceUrl)&&(i.isDomainTrusted=!!e.sourceUrl&&c.checkIfSafeDomainToRender(e.sourceUrl,e.origin),i.isStaticAsyncMedia=!!e.sourceUrl&&c.isStaticAsyncMediaUrl(e.sourceUrl),i.loadingState=f.NothingToLoad,i.retryCount=0,e.sourceUrl&&(i.loadingState=_._isBadImage(e.sourceUrl)?f.Error:f.Loading)),i.hasNetworkConnectivity=p.default.isNetworkingAvailable(),i}shouldComponentUpdate(e,t){return!d.default.comparator(this.props,e)||t.loadingState!==f.Loaded&&!d.default.comparator(this.state,t)}componentDidMount(){super.componentDidMount(),this._logSourceURL(),this.props.shouldInstrument&&this.props.sourceUrl&&(this._telemetryEvent=new h.ImageLoad(this.props.sourceUrl,this.props.origin,this.props.telemetryProperties),this._telemetryEvent.startLoad()),this.state.loadingState===f.Error&&this.props.onError&&this.props.onError()}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.props.sourceUrl!==e.sourceUrl&&this._logSourceURL();!t.hasNetworkConnectivity&&this.state.hasNetworkConnectivity&&this.state.loadingState===f.Error&&this._retryCount()>0&&this.setState({retryCount:0,loadingState:this.props.sourceUrl?f.Loading:f.NothingToLoad})}_logSourceURL(){g.log(u.LogTraceArea.ErrorSafeImage,"Attempting to display image: "+n.pii.Omit(this.props.sourceUrl))}render(){const e=this._retryCount(),t=`image-${this.props.sourceUrl||""}-${e}`;return this.state.loadingState===f.Error||this.props.blockUntrustedDomains&&!this.state.isDomainTrusted?null:s.createElement(s.Image,{key:t,style:this.props.style,source:this.props.sourceUrl,onError:this._onImageLoadError,onLoad:this._onImageLoadSuccess,resizeMode:this.props.resizeMode,resizeMethod:"resize",headers:this._getHeaders(this.props.sourceUrl)})}_getHeaders(e){const t={},i=r.default.getConfigSettingsNoSubscription().images.cacheControlRequestHeader;if(i&&(t["Cache-Control"]=i),this.props.isCors&&(t.origin=S.default.getFrontendBaseUrl()),this.props.skypeToken){const i=/^(?:https?:\/\/)?(?:www\.)?([^:\/\n?]+)/gim.exec(e),s=i&&i[1];s&&o.includes(this.state.skypetokenAllowedDomains,s)?(t["X-SkypeToken"]=this.props.skypeToken.rawToken,g.log(u.LogTraceArea.ErrorSafeImage,`Set X-SkypeToken header for image request: ${n.pii.Omit(this.props.sourceUrl)}`)):g.warn(u.LogTraceArea.ErrorSafeImage,`Attempted to send SkypeToken to a non-whitelisted domain: ${s}`)}return Object.keys(t).length>0?t:void 0}_onImageLoadCommon(){return!!this.isComponentMounted()}_retryCount(){return this.state.retryCount||0}getNativeImageSize(){return this._nativeDimensions}static _cacheBadImage(e){y.prev[e]||(g.log(u.LogTraceArea.ErrorSafeImage,`Caching image ${n.pii.Omit(e)} in badImagesCache`,n.pii.Omit(e)),y.cur[e]=!0)}static _isBadImage(e){return y.prev[e]||y.cur[e]}}t.default=_},99543:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(44770),a=i(87720),r=i(98278),l=i(10117),c=i(47126),d=i(15877),u=i(33754),g=i(6250),h=i(89808),p=i(81760),m=i(11828),S=i(19675),C=i(24576),f=(0,d.lazyProperties)({menuContainer:()=>o.Styles.createViewStyle({paddingVertical:5}),menuItemContainer:()=>o.Styles.createButtonStyle({minHeight:32,alignItems:"center",justifyContent:"flex-start",flexDirection:"row",borderLeftWidth:2,borderStyle:"solid",borderColor:p.Color.transparent}),menuItemText:()=>o.Styles.createTextStyle({flex:1,paddingLeft:12,paddingRight:35}),selectedCheckMark:()=>o.Styles.createViewStyle({marginRight:15}),legendText:()=>o.Styles.createTextStyle({marginLeft:15,marginTop:10}),divider:()=>o.Styles.createViewStyle({borderBottomWidth:1,borderStyle:"solid",height:0,marginHorizontal:15}),icon:()=>o.Styles.createImageStyle({height:20,width:20,alignSelf:"center",marginLeft:12}),toggleContainer:()=>o.Styles.createViewStyle({marginTop:10})}),y="menuitem";class _ extends C.default{constructor(){super(...arguments),this._mountedRefsMap=new g.default,this._onKeyPress=e=>{let t=this.state.focusedIndex,i=r.SXMenuNavigationDirection.None;e.keyCode!==c.default.UP&&e.keyCode!==c.default.LEFT||(t-=1,i=r.SXMenuNavigationDirection.Up),e.keyCode!==c.default.DOWN&&e.keyCode!==c.default.RIGHT||(t+=1,i=r.SXMenuNavigationDirection.Down),t<0||t>=this.props.menuItems.length?this.props.shouldReleaseKeyboardFocus&&i!==r.SXMenuNavigationDirection.None&&this.props.shouldReleaseKeyboardFocus(i)&&this.setState({focusedIndex:-1}):this.setState({focusedIndex:t})}}_buildState(e,t){return t?{hoverCommand:void 0,focusedIndex:-1}:{}}componentDidMount(){super.componentDidMount(),this.props.focusFirst&&this.focusFirt()}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.state.focusedIndex!==t.focusedIndex&&this.focusItem(this.state.focusedIndex)}focusFirt(){this.focusItem(0)}focusLast(){this.focusItem(this.props.menuItems.length-1)}focusItem(e=0){if(!(e<0||e>this.props.menuItems.length-1))if(this.state.focusedIndex===e){const t=this._mountedRefsMap.ref(y+e);t&&t.requestFocus()}else this.setState({focusedIndex:e})}render(){const e=o.Types.AccessibilityTrait.MenuItem,t=o.Types.AccessibilityTrait.Menu,i=n.map(this.props.menuItems,((t,i)=>{const n=this._themeStyles,c=[f.menuItemContainer];this.props.menuButtonStyles&&c.push(this.props.menuButtonStyles);const d=[f.menuItemText,n.primaryTextColorStyle];this.props.menuTextStyles&&d.push(this.props.menuTextStyles),t.textStyles&&d.push(t.textStyles),t.command!==this.state.hoverCommand||t.disabled||c.push(n.rowHoverViewStyle),t.isDestructiveButton&&d.push(this._themeStyles.destructiveTextColorStyle);const g=[e];let p=t.text;if(t.selected?p=u.getString("Global.ItemSelectedAccessibilityLabel",{text:p}):t.disabled&&(d.push(n.disabledTextColorStyle),g.push(o.Types.AccessibilityTrait.Disabled)),t.selectableType&&t.selectableType===r.SXMenuItemSelectableType.Toggle)return c.push(o.Styles.createButtonStyle({borderRightWidth:5,maxWidth:300},!1)),o.createElement(o.View,{key:t.command,style:f.toggleContainer},t.selected&&o.createElement(o.View,{style:[f.divider,this._themeStyles.dividerBorderColorStyle]}),o.createElement(a.default,{style:c,isOn:t.selected,accessibilityLabel:p,accessibilityTraits:e,onChange:e=>this._onClickItem(e,t),tabIndex:i===this.state.focusedIndex?0:-1},o.createElement(S.BodyText,{style:d},t.text)));{let e,n;if(t.icon){const i=s.Collection.getMenuIcon(t.icon,this._useDarkTheme());e=o.createElement(o.Image,{style:f.icon,source:i,resizeMode:"auto",key:t.text})}return t.selectableType&&r.SXMenuItemSelectableType.Checkbox&&t.selected&&(n=o.createElement(l.default,{icon:m.SkypeIcon.Ok,size:m.IconSize.size20,color:h.default.getPrimaryColorNoSubscription(),style:f.selectedCheckMark})),o.createElement(o.Button,{ref:this._mountedRefsMap.onComponentRef(y+i),key:t.command,style:c,onPress:e=>this._onClickItem(e,t),onHoverStart:()=>this._onMouseEnter(t),onHoverEnd:()=>this._onMouseLeave(t),disabled:t.disabled,tabIndex:i===this.state.focusedIndex?0:-1,accessibilityTraits:g,accessibilityLabel:p},e,o.createElement(S.BodyText,{style:d},t.text),n)}})),c=this.props.title?o.createElement(S.Subtitle,{style:f.legendText},this.props.title):void 0,d=this.props.showDivider?o.createElement(o.View,{style:[f.divider,this._themeStyles.dividerBorderColorStyle]}):void 0,g=[f.menuContainer],p=o.createElement(o.View,{style:g,accessibilityTraits:t,id:this.props.id,onKeyPress:this._onKeyPress},i);return c||d?o.createElement(o.View,null,c,p,d):p}_onClickItem(e,t){e.stopPropagation(),!t.disabled&&this.props.onSelectItem&&this.props.onSelectItem(t.command)}_onMouseEnter(e){e.disabled||e.command===this.state.hoverCommand||this.setState({hoverCommand:e.command})}_onMouseLeave(e){e.disabled||e.command!==this.state.hoverCommand||this.setState({hoverCommand:void 0})}}t.default=_},22709:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(98278),a=i(15877),r=i(6250),l=i(99543),c=i(24576),d=(0,a.lazyProperties)({menuContainer:()=>o.Styles.createViewStyle({minWidth:160})}),u="menu";class g extends c.default{constructor(){super(...arguments),this._mountedRefsMap=new r.default,this._menuForDescriptor=(e,t,i)=>o.createElement(l.default,{ref:this._mountedRefsMap.onComponentRef(u+t),key:e.key,title:e.title,menuItems:e.menuItems,onSelectItem:this.props.onSelectItem,menuTextStyles:e.menuTextStyles||this.props.menuTextStyles,menuButtonStyles:e.menuButtonStyles||this.props.menuButtonStyles,showDivider:t!==i-1,accessibilityTraits:this.props.accessibilityTraits,shouldReleaseKeyboardFocus:e=>this._shouldReleaseKeyboardFocus(e,t,i)})}_buildState(e,t){return{sections:n.filter(e.sections,(e=>e.menuItems.length>0))}}componentDidMount(){super.componentDidMount();const e=this._mountedRefsMap.ref("menu0");e&&e.focusFirt()}render(){const e=this.state.sections.length,t=n.map(this.state.sections,((t,i)=>this._menuForDescriptor(t,i,e)));return o.createElement(o.View,{style:d.menuContainer},t)}_shouldReleaseKeyboardFocus(e,t,i){const n=t===i-1;if(0===t&&e===s.SXMenuNavigationDirection.Up||n&&e===s.SXMenuNavigationDirection.Down||e===s.SXMenuNavigationDirection.None)return!1;if(e===s.SXMenuNavigationDirection.Up){const e=t-1,i=this._mountedRefsMap.ref(u+e);i&&i.focusLast()}else if(e===s.SXMenuNavigationDirection.Down){const e=t+1,i=this._mountedRefsMap.ref(u+e);i&&i.focusFirt()}return!0}}t.default=g},79669:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(31844),s=i(7159),a=i(16426),r=i(16778),l=i(47204),c=i(77381),d=i(32235),u=i(39285),g=i(15877),h=i(29130),p=i(81760),m=i(80837),S=p.Color.gray50,C=p.Color.white,f=(0,g.lazyProperties)({popupContainer:()=>r.Styles.createButtonStyle({overflow:"visible",backgroundColor:p.Color.transparent}),popupInnerContainer:()=>r.Styles.createViewStyle({flex:-1,overflow:"visible"}),popupPadding:()=>r.Styles.createViewStyle({paddingTop:1,paddingBottom:6,paddingLeft:0,paddingRight:6}),popupPaddingContentStretchTopBottom:()=>r.Styles.createViewStyle({paddingTop:0,paddingBottom:6,paddingLeft:2,paddingRight:2}),popupPaddingContentStretchLeftRight:()=>r.Styles.createViewStyle({paddingTop:2,paddingBottom:2,paddingLeft:0,paddingRight:6}),popupPaddingTop:()=>r.Styles.createViewStyle({paddingTop:6,paddingBottom:1,paddingLeft:3.5,paddingRight:3.5}),popupPaddingTopStretchContents:()=>r.Styles.createViewStyle({paddingTop:6,paddingBottom:0,paddingLeft:2,paddingRight:2}),popupPaddingRight:()=>r.Styles.createViewStyle({paddingTop:3.5,paddingBottom:3.5,paddingLeft:1,paddingRight:6}),popupPaddingRightStretchContents:()=>r.Styles.createViewStyle({paddingTop:2,paddingBottom:2,paddingLeft:0,paddingRight:6}),popupPaddingLeft:()=>r.Styles.createViewStyle({paddingTop:3.5,paddingBottom:3.5,paddingLeft:6,paddingRight:1}),popupPaddingLeftStretchContents:()=>r.Styles.createViewStyle({paddingTop:2,paddingBottom:2,paddingLeft:6,paddingRight:0}),popupPaddingBottom:()=>r.Styles.createViewStyle({paddingTop:1,paddingBottom:6,paddingLeft:3.5,paddingRight:3.5}),popupPaddingBottomStretchContents:()=>r.Styles.createViewStyle({paddingTop:0,paddingBottom:6,paddingLeft:2,paddingRight:2}),borderSvg:()=>r.Styles.createImageStyle({position:"absolute",left:0,top:0,overflow:"visible"}),overflowHidden:()=>r.Styles.createViewStyle({overflow:"hidden"})}),y="SXPopup";class _ extends c.default{constructor(){super(...arguments),this._arbitrateFocus=e=>(0,d.arbitrateModalOrPopupFocus)(y,e),this._handleContextMenu=e=>{this.props.disableContextMenu&&(e.preventDefault(),e.stopPropagation())},this._onPress=e=>{e.preventDefault(),e.stopPropagation()}}_buildState(e,t){t&&l.default.validatePopupOffset(e.offset);const i=t=>n.isUndefined(t)?n.isUndefined(e.borderRadius)?3:e.borderRadius:t;this._borderBottomLeftRadius=i(e.borderBottomLeftRadius),this._borderBottomRightRadius=i(e.borderBottomRightRadius),this._borderTopLeftRadius=i(e.borderTopLeftRadius),this._borderTopRightRadius=i(e.borderTopRightRadius),this._popupBeakHeight=n.isUndefined(e.popupBeakHeight)?5:e.popupBeakHeight,this._popupBeakWidth=n.isUndefined(e.popupBeakWidth)?15:e.popupBeakWidth,this._fillColor=e.fillColor||C,this._fillOpacity=e.fillOpacity||1,this._strokeColor=e.strokeColor||S,this._strokeOpacity=e.strokeOpacity||1,this._shadow=e.shadow||"0px 6px 16px rgba(0, 0, 0, 0.1)";const s=this._getRootViewId();return{svgPathDef:this._buildSvgPath(e),svgStyle:this._buildSvgStyle(e),isPortraitMode:h.default.getDeviceOrientation(s)===o.DeviceOrientation.Portrait}}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.props.onOrientationChanged&&t.isPortraitMode!==this.state.isPortraitMode&&this.props.onOrientationChanged()}render(){let e,t=[f.popupInnerContainer,f.popupPadding];this.props.contentStretchAcrossWidth?t.push(f.popupPaddingContentStretchTopBottom):this.props.contentStretchAcrossHeight&&t.push(f.popupPaddingContentStretchLeftRight);const i=this._isAnchorPositionBottom(this.props),o=this._isAnchorPositionTop(this.props),l=this._isAnchorPositionRight(this.props),c=this._isAnchorPositionLeft(this.props);if(this.props.popupWidth>0&&this.props.popupHeight>0){this.props.contentStretchAcrossWidth||this.props.contentStretchAcrossHeight?i?t.push(f.popupPaddingTopStretchContents):o?t.push(f.popupPaddingBottomStretchContents):l?t.push(f.popupPaddingLeftStretchContents):t.push(f.popupPaddingRightStretchContents):l?t.push(f.popupPaddingLeft):i?t.push(f.popupPaddingTop):o?t.push(f.popupPaddingBottom):t.push(f.popupPaddingRight);let d=[f.borderSvg,this.state.svgStyle],g=this.props.popupHeight,h=this.props.popupWidth;if(this.props.paddingInPopupCanvas&&((o||i)&&g>this.props.paddingInPopupCanvas?(g-=this.props.paddingInPopupCanvas,d.push(r.Styles.createImageStyle({marginTop:o?this.props.paddingInPopupCanvas:void 0,marginBottom:i?this.props.paddingInPopupCanvas:void 0},!1))):(l||c)&&h>this.props.paddingInPopupCanvas&&(h-=this.props.paddingInPopupCanvas,d.push(r.Styles.createImageStyle({marginRight:l?this.props.paddingInPopupCanvas:void 0,marginLeft:c?this.props.paddingInPopupCanvas:void 0},!1)))),n.isUndefined(this.props.blurBackgroundStyle))e=r.createElement(a.ImageSvg,{style:d,webShadow:this.props.hideShadow?void 0:this._shadow,width:h,height:g},r.createElement(a.SvgPath,{strokeColor:this._strokeColor,strokeWidth:this._strokeOpacity,strokeOpacity:this._strokeOpacity,fillColor:this._fillColor,fillOpacity:this._fillOpacity,d:this.state.svgPathDef}));else{const t=this._staticBackgroundStyle(h,g,!0);e=r.createElement(u.default,{style:[d,t,f.overflowHidden]},r.createElement(s.BlurView,{style:m.default.flexOne,blurStyle:this.props.blurBackgroundStyle}))}}const d=[f.popupContainer];this.props.containerStyle&&d.push(this.props.containerStyle),this.props.offset&&d.push(r.Styles.createViewStyle({transform:[{translateX:this.props.offset.x},{translateY:this.props.offset.y}]},!1));const g=this.props.popupAccessibilityTitle;return r.createElement(r.View,{onPress:this._onPress,importantForAccessibility:this.props.importantForAccessibility,onContextMenu:this._handleContextMenu,style:d,disableTouchOpacityAnimation:!0},!this.props.hideBackground&&e,r.createElement(r.View,{style:[t,this.props.popupContentStyle],accessibilityId:y,accessibilityLabel:g,accessibilityTraits:r.Types.AccessibilityTrait.Dialog,restrictFocusWithin:!this.props.allowFocusOutside,tabIndex:-1,autoFocus:!this.props.skipPopupAutoFocus,arbitrateFocus:this._arbitrateFocus},this.props.children))}_staticBackgroundStyle(e,t,i=!1){return r.Styles.createViewStyle({width:e,height:t,borderWidth:i?void 0:this._strokeOpacity,borderColor:i?void 0:this._strokeColor,backgroundColor:i?void 0:this._fillColor,borderBottomLeftRadius:this._borderBottomLeftRadius,borderBottomRightRadius:this._borderBottomRightRadius,borderTopLeftRadius:this._borderTopLeftRadius,borderTopRightRadius:this._borderTopRightRadius},!1)}_isAnchorPositionTop(e){return"top"===e.anchorPosition}_isAnchorPositionBottom(e){return"bottom"===e.anchorPosition}_isAnchorPositionRight(e){return"right"===e.anchorPosition}_isAnchorPositionLeft(e){return"left"===e.anchorPosition}_buildSvgPath(e){let t=0,i=0,n=e.popupWidth,o=e.popupHeight,s=!0,a=e.anchorOffset;const r=this._isAnchorPositionTop(e),l=this._isAnchorPositionBottom(e),c=this._isAnchorPositionRight(e),d=this._isAnchorPositionLeft(e);return e.paddingInPopupCanvas&&((r||l)&&e.popupHeight>e.paddingInPopupCanvas?o=e.popupHeight-e.paddingInPopupCanvas:(c||d)&&e.popupWidth>e.paddingInPopupCanvas&&(n=e.popupWidth-e.paddingInPopupCanvas)),d?(n-=this._popupBeakHeight,a-=2.5,i+=2.5,o-=2.5,s=!1):c?(t+=this._popupBeakHeight,a-=2.5,i+=2.5,o-=2.5,s=!1):r?(o-=this._popupBeakHeight,a-=2.5,t+=2.5,n-=2.5):l&&(i+=this._popupBeakHeight,a-=2.5,t+=2.5,n-=2.5),a=s?Math.min(a,n-this._popupBeakWidth/2):Math.min(a,o-this._popupBeakWidth/2),this._genLineSegment(t+this._borderTopLeftRadius,i,"M")+this._genStraightLineSegmentWithOptionalBeak(n-t-this._borderTopRightRadius-this._borderTopLeftRadius,0,l,a-this._borderTopLeftRadius-this._popupBeakWidth/2,s,1,-1)+this._genLineSegment(this._borderTopRightRadius,0,"c")+this._genLineSegment(this._borderTopRightRadius,this._borderTopRightRadius)+this._genLineSegment(this._borderTopRightRadius,this._borderTopRightRadius)+this._genStraightLineSegmentWithOptionalBeak(0,o-i-this._borderBottomRightRadius-this._borderTopRightRadius,d,a-this._borderTopRightRadius-this._popupBeakWidth/2,s,1,1)+this._genLineSegment(0,this._borderBottomRightRadius,"c")+this._genLineSegment(-this._borderBottomRightRadius,this._borderBottomRightRadius)+this._genLineSegment(-this._borderBottomRightRadius,this._borderBottomRightRadius)+this._genStraightLineSegmentWithOptionalBeak(t-n+this._borderBottomLeftRadius+this._borderBottomRightRadius,0,r,n-this._borderBottomRightRadius-(t+a+this._popupBeakWidth/2),s,-1,1)+this._genLineSegment(-this._borderBottomLeftRadius,0,"c")+this._genLineSegment(-this._borderBottomLeftRadius,-this._borderBottomLeftRadius)+this._genLineSegment(-this._borderBottomLeftRadius,-this._borderBottomLeftRadius)+this._genStraightLineSegmentWithOptionalBeak(0,i-o+this._borderBottomLeftRadius+this._borderTopLeftRadius,c,o-this._borderBottomLeftRadius-(i+a+this._popupBeakWidth/2),s,-1,-1)+this._genLineSegment(0,-this._borderTopLeftRadius,"c")+this._genLineSegment(this._borderTopLeftRadius,-this._borderTopLeftRadius)+this._genLineSegment(this._borderTopLeftRadius,-this._borderTopLeftRadius)+"z"}_genLineSegment(e,t,i=""){return i+e+","+t+" "}_genStraightLineSegmentWithOptionalBeak(e,t,i,n,o,s,a){let r="";if(i)if(o){let t=n*s,i=e-(n+this._popupBeakWidth)*s;r=this._genLineSegment(t,0,"l")+this._genLineSegment(this._popupBeakWidth/2*s,this._popupBeakHeight*a,"l")+this._genLineSegment(this._popupBeakWidth/2*s,-this._popupBeakHeight*a,"l")+this._genLineSegment(i,0,"l")}else{let e=n*a,i=t-(n+this._popupBeakWidth)*a;r=this._genLineSegment(0,e,"l")+this._genLineSegment(this._popupBeakHeight*s,this._popupBeakWidth/2*a,"l")+this._genLineSegment(-this._popupBeakHeight*s,this._popupBeakWidth/2*a,"l")+this._genLineSegment(0,i,"l")}else r=this._genLineSegment(e,t,"l");return r}_buildSvgStyle(e){if(!e.popupWidth||!e.popupHeight)return;const t=this._isAnchorPositionBottom(e),i=this._isAnchorPositionTop(e),n=this._isAnchorPositionRight(e),o=this._isAnchorPositionLeft(e);let s=e.popupHeight,a=e.popupWidth;return e.paddingInPopupCanvas&&((i||t)&&s>e.paddingInPopupCanvas?s-=e.paddingInPopupCanvas:(n||o)&&a>e.paddingInPopupCanvas&&(a-=e.paddingInPopupCanvas)),r.Styles.createImageStyle({width:a,height:s},!1)}}t.default=_},96755:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(47447),s=i(39285),a=i(24576);class r extends a.default{render(){const e=o.UICapabilities.inlineTextFormattingSupported();return n.createElement(s.HiddenText,{style:this.props.style},e?"|":" | ")}}t.default=r},49776:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(96486),s=i(62602),a=i(77381),r=i(10117),l=i(15877),c=i(81760),d=i(11828),u=i(19675),g=(0,l.lazyProperties)({nametagContainer:()=>n.Styles.createViewStyle({backgroundColor:c.Color.blackOverlay50,borderRadius:5,paddingHorizontal:10,paddingVertical:5,flexDirection:"row",alignItems:"center"}),nameAdditionalStyle:()=>n.Styles.createViewStyle({flexShrink:1}),nameText:()=>n.Styles.createTextStyle({color:c.Color.white,flexShrink:1}),iconLeft:()=>n.Styles.createViewStyle({marginRight:6}),iconRight:()=>n.Styles.createViewStyle({marginLeft:6})}),h={textOverflow:"ellipsis",whiteSpace:"nowrap"};class p extends a.default{constructor(){super(...arguments),this.onKeyPress=e=>s.default.maybeHandleKeyPress(e,(()=>{this.props.onPress&&this.props.onPress(e)}))}render(){const e=this._iconView(this.props.leftIcon,g.iconLeft),t=o.map(this.props.rightIcons,(e=>this._iconView(e,g.iconRight))),i=this.props.ellipseCaption?[g.nameAdditionalStyle,h]:void 0,s=[g.nametagContainer,this.props.ellipseCaption?g.nameAdditionalStyle:void 0,this.props.style],a=this.props.onPress||this.props.onMouseEnter||this.props.onMouseLeave;return n.createElement(n.Animated.View,{style:s,onPress:this.props.onPress,onKeyPress:this.props.onPress?this.onKeyPress:void 0,accessibilityLabel:this.props.accessibilityLabel,tabIndex:this.props.onPress?0:void 0,accessibilityTraits:this.props.onPress?n.Types.AccessibilityTrait.Button:void 0,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,blockPointerEvents:!a},this.props.leftElement,e,n.createElement(u.Caption,{style:[g.nameText,i,this.props.textColor&&{color:this.props.textColor}]},this.props.displayText),t)}_iconView(e,t){return e?n.createElement(r.default,{key:e.toString(),icon:e,color:this.props.textColor?this.props.textColor:c.Color.white,size:d.IconSize.size12,style:t}):void 0}}t.default=p},39182:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(98278),s=i(87134),a=i(10117),r=i(15877),l=(i(33754),i(51072)),c=i(15415),d=i(11828),u=i(80837),g=i(19675),h=i(24576),p=(0,r.lazyProperties)({buttonStyle:()=>n.Styles.createButtonStyle({flexDirection:"row",alignSelf:"stretch",alignItems:"center",justifyContent:"flex-start",minHeight:o.ListItem.small.regularHeight}),iconStyleMargin:()=>n.Styles.createViewStyle({marginRight:10}),spinnerStyle:()=>n.Styles.createViewStyle({marginLeft:2,marginRight:12})});class m extends h.default{constructor(){super(...arguments),this._onComponentRef=e=>{this._componentRef=e||void 0},this._onHoverStart=e=>{this.setState({isHovering:!0})},this._onHoverEnd=e=>{this.setState({isHovering:!1})}}_buildState(e,t){return t?{isHovering:!1}:{}}requestFocus(){this._componentRef&&this._componentRef.requestFocus()}render(){const e=this.state.isHovering&&!this.props.disabled&&!this.props.disableHover,t=this.props.style?[p.buttonStyle,this.props.style]:p.buttonStyle,i=[u.default.flexOne];e&&i.push(this._themeStyles.textHoverColorStyle);const r=this.props.subtitle?n.createElement(g.Subtitle,{colorThemeOverride:this._currentTheme},this.props.subtitle):void 0,h=this.props.hideDivider?void 0:n.createElement(s.default,null);let m;m=this.props.showSpinner?n.createElement(c.default,{size:o.SXActivityIndicatorSize.ExtraSmall,tintColor:this._themeColors.primaryTextColor,style:p.spinnerStyle}):n.createElement(a.default,{icon:this.props.icon,color:e?this._themeColors.iconHoverColor:this._themeColors.primaryIconColor,size:this.props.iconSize?this.props.iconSize:d.IconSize.size24,style:[p.iconStyleMargin,this.props.iconStyle]});let S=this.props.accessibilityLabel||this.props.title;this.props.disabled;const C=this.props.useRegularFont?g.BodyText:g.RowTitle,f=this.props.renderAsListItem?l.default.Button:n.Button;return n.createElement(n.View,{ref:this._onComponentRef,style:u.default.noncollapsibleView},n.createElement(f,{ref:this.props.buttonRef,style:t,onPress:this.props.onPress,onLongPress:this.props.onLongPress,onPressIn:this.props.onPressIn,onPressOut:this.props.onPressOut,title:this.props.title,onHoverStart:this._onHoverStart,onHoverEnd:this._onHoverEnd,accessibilityLabel:S,accessibilityTraits:this.props.accessibilityTraits,tabIndex:this.props.tabIndex,disabled:this.props.disabled},m,n.createElement(C,{style:i,numberOfLines:2,colorThemeOverride:this._currentTheme},this.props.title),r),h)}}t.default=m},24067:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(98278),s=i(77381),a=i(10400),r=i(15877),l=i(51070),c=i(81115),d=i(22222),u=(0,r.lazyProperties)({container:()=>n.Styles.createViewStyle({flexDirection:"row",justifyContent:"center",padding:10})});class g extends s.default{_buildState(e,t){const i={};return i.isKeyboardSeen=a.default.isKeyboardSeen(),i.safeAreaPadding=i.isKeyboardSeen?0:l.default.bottomSafeAreaInset(),i}render(){const e=[u.container],{setButtonRef:t,backgroundStyle:i,icon:s,text:a,iconSize:r,iconHorizontalMargin:l,buttonStyle:g,onPress:h,disabled:p,accessibilityLabel:m,showActivityIndicator:S,textStyleOverride:C}=this.props.button;this.state.safeAreaPadding&&e.push(c.default.paddingBottomStyle(this.state.safeAreaPadding));const f=n.createElement(d.default,{ref:t,backgroundStyle:i,icon:s,iconSize:r,iconHorizontalMargin:l,buttonSize:o.SXButtonSize.Medium,title:a,buttonStyle:g||o.SXButtonStyle.ColorFill,onPress:h,disabled:p,accessibilityLabel:m,showActivityIndicator:S,textStyleOverride:C});return n.createElement(n.View,{style:e},f)}}t.default=g},90631:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimplePanelHeader=t.HeaderHeightLandscapeSmall=t.HeaderHeightLandscape=t.HeaderHeightSmall=t.HeaderHeight=t.CloseButtonType=t.HeaderPosition=void 0;const n=i(96486),o=i(31844),s=i(16778),a=i(89391),r=i(47447),l=i(11930),c=i(98278),d=i(98278),u=i(46096),g=i(39285),h=i(13944),p=i(10117),m=i(36237),S=i(15877),C=i(33754),f=i(4735),y=i(29130),_=i(51070),v=i(81115),b=i(15415),T=i(22222),P=i(81760),A=i(40363),k=i(11010),I=i(11828),w=i(34528),N=i(80837),M=i(24576),E=i(53374);var x,L;!function(e){e[e.Default=0]="Default",e[e.Start=1]="Start",e[e.End=2]="End"}(x=t.HeaderPosition||(t.HeaderPosition={})),function(e){e[e.Close=1]="Close",e[e.Back=2]="Back"}(L=t.CloseButtonType||(t.CloseButtonType={}));const R="leftbutton",D="rightbutton";t.HeaderHeight=60,t.HeaderHeightSmall=50,t.HeaderHeightLandscape=60,t.HeaderHeightLandscapeSmall=50;const B={position:"absolute",top:0,left:0,right:0,overflow:"visible",zIndex:1},O=(0,S.lazyProperties)({header:()=>s.Styles.createViewStyle({flexDirection:"row",height:60,alignSelf:"stretch",alignItems:"center"}),headerSmall:()=>s.Styles.createViewStyle({height:50}),headerBorder:()=>s.Styles.createViewStyle({borderBottomWidth:1,borderStyle:"solid"}),headerFloating:()=>s.Styles.createViewStyle(B),headerDesktop:()=>s.Styles.createViewStyle({paddingHorizontal:10}),iconButton:()=>s.Styles.createButtonStyle({flexDirection:"row",justifyContent:"center",alignItems:"center",width:I.IconSize.default,height:I.IconSize.default}),iconButtonLandscape:()=>s.Styles.createViewStyle({height:60,paddingTop:5}),iconButtonLandscapeSmall:()=>s.Styles.createViewStyle({height:50,paddingTop:5}),iconButtonLandscapeMobile:()=>s.Styles.createViewStyle({paddingTop:2}),textButton:()=>s.Styles.createViewStyle({marginHorizontal:10}),titleContainer:()=>s.Styles.createViewStyle({flexGrow:0,flexDirection:"row"}),titleContainerMobileCentered:()=>s.Styles.createViewStyle({height:I.IconSize.default,alignItems:"center",overflow:"visible"}),titleContainerMobile:()=>s.Styles.createViewStyle({height:I.IconSize.default,alignSelf:"center",alignItems:"center",overflow:"visible",flexGrow:1}),titleCentered:()=>s.Styles.createTextStyle({textAlign:"center"}),rightControlContainer:()=>s.Styles.createViewStyle({flexDirection:"row",justifyContent:"flex-end"}),rightControlContainerCenterText:()=>s.Styles.createViewStyle({flexGrow:1,flexBasis:0}),leftControlContainer:()=>s.Styles.createViewStyle({width:64,flexDirection:"row",justifyContent:"flex-start"}),leftControlContainerCenterText:()=>s.Styles.createViewStyle({flexGrow:1,flexBasis:0}),leftControlContainerRightNav:()=>s.Styles.createViewStyle({width:48}),controlsContainerDesktop:()=>s.Styles.createViewStyle({paddingBottom:3}),spacer:()=>s.Styles.createViewStyle({width:64,height:I.IconSize.default}),smallSpacer:()=>s.Styles.createViewStyle({width:12}),displayNameDesktopMaxHeight:()=>s.Styles.createTextStyle({maxHeight:54}),backgroundView:()=>[N.default.absoluteFill,s.Styles.createViewStyle({justifyContent:"center",alignItems:"center"})],centeredIcon:()=>s.Styles.createViewStyle({marginRight:10}),centeredTitleWithIcon:()=>s.Styles.createViewStyle({justifyContent:"center",alignItems:"center"}),centeredTitleNameWithIcon:()=>s.Styles.createTextStyle({flex:0})});class F extends M.default{constructor(){super(...arguments),this._onCenterControlsRef=e=>{this._centerControls=e||void 0},this._onLeftControlRef=e=>{this._leftControl=e||void 0},this._onRightControlRef=e=>{this._rightControl=e||void 0},this._getControl=(e,t)=>{if(e)return e.icon||e.closeButtonType?this._getIconButton(e,t):this._getTextButton(e,t)},this._getTextButton=(e,t)=>e.text?s.createElement(T.default,{key:t,ref:e.setButtonRef,style:O.textButton,buttonStyle:e.textButtonStyle||c.SXButtonStyle.ColorFill,buttonSize:c.SXButtonSize.Small,title:e.text,icon:e.textButtonIcon,showActivityIndicator:e.showActivityIndicator,onPress:e.onPress,onHoverStart:e.onHoverStart,onHoverEnd:e.onHoverEnd,disabled:e.disabled,accessibilityLabel:e.accessibilityLabel,accessibilityTraits:e.accessibilityTraits,allowTextWrap:!1}):void 0,this._onIconButtonClosePress=()=>{const e=E.default.newCauseId();m.log(u.LogTraceArea.Navigation,"SimplePanelHeader.onPress, causeId: "+e),f.default.goBack(e,this._getContext())},this._getIconButton=(e,t)=>{if(this._getRootViewType()===d.RootViewType.NativeWindow&&e.closeButtonType===L.Close)return;const i=this.state.isLandscape?I.IconSize.size20:I.IconSize.size24;let n,o=[O.iconButton];this.state.isLandscape&&(o.push(this.state.isSmallDevice?O.iconButtonLandscapeSmall:O.iconButtonLandscape),this.state.isMobileScreenSize&&o.push(O.iconButtonLandscapeMobile)),o.push(e.buttonStyle),e.onPress?n=e.onPress:e.closeButtonType&&(n=this._onIconButtonClosePress);let a="";if(e.title?a=e.title:e.closeButtonType===L.Close?a=C.getString("Global.CloseButtonTitle"):e.closeButtonType===L.Back&&(a=C.getString("Global.BackButtonTitle")),e.showActivityIndicator)return s.createElement(s.View,{key:t,style:o,onPress:e.onPress,title:a},s.createElement(b.default,{size:c.SXActivityIndicatorSize.Small,tintColor:e.color||P.Color.gray300,useRXIndicator:!0}));{let r;return e.icon?r=e.icon:e.closeButtonType===L.Close?r=w.closeIcon():e.closeButtonType===L.Back&&(r=w.backIcon()),r?s.createElement(h.default,{key:t,ref:e.setButtonRef,disabled:e.disabled,style:o,hoverStyle:e.buttonHoverStyle,onPress:n,onFocus:e.onFocus,icon:r,size:i,color:e.color||this._themeColors.headerIconColor,hoverColor:e.hoverColor||this._themeColors.iconHoverColor,title:a,accessibilityLabel:e.accessibilityLabel,accessibilityTraits:e.accessibilityTraits,flipIcon:e.flipIcon}):void 0}}}_buildState(e,t){const i=this._getContext(),n=this._getRootViewId(),a=y.default.getDeviceOrientation(n);let r=!!e.leavePaddingForStatusBar;!r&&s.StatusBar.isOverlay()&&_.default.leavePaddingForStatusBar()&&(i.isPresentedInDesktopLeftNav||i.isPresentedInDesktopRightNav||i.isPresentedInManagedModal?r=!0:i.isPresentedInMobileSheet||i.isPresentedInDesktopSubview||(r=!0));let l=i.isPresentedInDesktopSubview?void 0:_.default.horizontalInsets(c.HorizontalInsetDefault);if(l&&(e.headerPosition===x.Start||e.headerPosition===x.End))switch(e.headerPosition){case x.Start:l={left:l.left,right:0};break;case x.End:l={left:0,right:l.right}}return{isMobileScreenSize:y.default.isMobileScreenSize(n),leavePaddingForStatusBar:r,statusBarHeight:_.default.statusBarHeight(),isLandscape:a===o.DeviceOrientation.Landscape&&!this._getContext().isPresentedInDesktopContentPanel||!!this._getContext().isPresentedInDesktopSubview,isSmallDevice:y.default.isSmallDevice(n),deviceOrientation:a,safeAreaHorizontalInsets:l}}componentDidMount(){if(super.componentDidMount(),this.props.dontFocusOnMount||n.isUndefined(this.props.titleViewTabIndexDeprecated))return;const e=()=>{this.isComponentMounted()&&this._centerControls&&(m.log(u.LogTraceArea.Navigation,"SimplePanelHeader.componentDidMount, focus center controls"),this._centerControls.requestFocus(),this.props.shouldAnnouncePanelNameOnMount&&this.props.panelName&&s.Accessibility.announceForAccessibility(this.props.panelName))};this.props.delayHeaderFocus?n.delay(e,100):n.defer(e)}requestFocus(){this._centerControls&&this._centerControls.requestFocus()}render(){var e;const t=this._getContext(),i=!!t.isPresentedInDesktopSubview,o=this._isPresentedInTabletLeftNav()||this._isPresentedInTabletRightNav(),c=!!t.isPresentedInDesktopRightNav,d=!!t.isPresentedInMobileSheet,u=!!t.isPresentedInSplitView,h=!!t.isPresentedInManagedModal;t.isPresentedInDesktopContentPanel;let m=!1;m=n.isUndefined(this.props.useCenteredControls)?d||i&&!c&&!u&&!h:this.props.useCenteredControls;let S,C=[O.header];this.props.backgroundColor?C.push(s.Styles.createViewStyle({backgroundColor:this.props.backgroundColor},!1)):this.props.useTransparentBackground?C.push(N.default.transparentBackground):C.push(this._themeStyles.primaryBackgroundColorStyle),this.props.hideBottomBorder||u||(C.push(O.headerBorder),C.push(this._themeStyles.headerShadowBorderColorStyle)),(this.state.isSmallDevice||u)&&C.push(O.headerSmall),this.state.leavePaddingForStatusBar&&(C.push(v.default.heightStyle((this.state.isSmallDevice?50:60)+this.state.statusBarHeight)),S=v.default.paddingTopStyle(this.state.statusBarHeight),C.push(S)),this.props.floating&&C.push(O.headerFloating),!i||c||u||h||C.push(O.headerDesktop),this.state.safeAreaHorizontalInsets&&v.default.hasHorizontalSafeAreas(this.state.safeAreaHorizontalInsets)&&C.push(v.default.horizontalPaddingStyle(this.state.safeAreaHorizontalInsets)),this.props.style&&C.push(this.props.style);const f=[N.default.flexOne,this._themeStyles.headerTextColorStyle];let y;if(m&&f.push(O.titleCentered),!i||o||u||h?d||o||h?f.push(this.props.useSmallFont?k.default.fontStyle.panelHeaderLandscape:k.default.fontStyle.panelHeader):this.state.isLandscape?f.push(k.default.fontStyle.panelHeaderLandscape):f.push(this.props.useSmallFont?k.default.fontStyle.panelHeaderLandscape:k.default.fontStyle.panelHeader):f.push(this.props.useSmallFont?k.default.fontStyle.bodySmallBoldDeprecated:k.default.fontStyle.h5),this.props.titleTextStyle&&f.push(this.props.titleTextStyle),this.props.panelName){const e=[O.titleContainer];m||e.push(O.titleContainerMobile);const t=l.default.headerAccessibilityInfo(this.props.accessibleName||this.props.panelName),i=this.props.allowTextWrap?2:1;i>1&&!r.UICapabilities.textNumberOfLinesSupported()&&f.push(O.displayNameDesktopMaxHeight),this.props.centeredIcon&&(e.push(O.centeredTitleWithIcon),f.push(O.centeredTitleNameWithIcon)),y=s.createElement(s.View,{key:"centercontrols",tabIndex:this.props.titleViewTabIndexDeprecated,ref:this._onCenterControlsRef,style:e,accessibilityLabel:t.accessibilityLabel,importantForAccessibility:s.Types.ImportantForAccessibility.Yes,accessibilityTraits:t.accessibilityTraits,accessibilityLiveRegion:this.props.centralControlAccessibilityLiveRegion},this.props.centeredIcon&&s.createElement(p.default,{color:this._themeColors.primaryIconColor,size:I.IconSize.size24,style:O.centeredIcon,icon:this.props.centeredIcon}),s.createElement(g.HiddenText,{style:f,numberOfLines:i},this.props.panelName))}else this.props.titleView&&(y=this.props.titleView);let _=[],b=!1;if(this.props.rightButtons){if(n.isArray(this.props.rightButtons))_=n.compact(n.map(this.props.rightButtons,((e,t)=>{var i;return null!==(i=e.customButtonComponent)&&void 0!==i?i:this._getControl(e,D+t)})));else{const t=null!==(e=this.props.rightButtons.customButtonComponent)&&void 0!==e?e:this._getControl(this.props.rightButtons,D);t&&_.push(t)}b=!0}else this.props.leftButton&&this.props.titleView&&_.push(this._getSpacer(D));const T=[O.leftControlContainer],P=[O.rightControlContainer];let w;if(m?(T.push(O.leftControlContainerCenterText),P.push(O.rightControlContainerCenterText)):(c||h)&&T.push(O.leftControlContainerRightNav),this.props.leftButton)if(a.default.getS4LUiFeaturesNoSubscription().enableWindowRightClose&&A.default.isWindowCloseOnRight()&&this.props.leftButton.closeButtonType===L.Close){const e=s.createElement(s.View,{key:"rightbuttonx",ref:this._onLeftControlRef},this._getControl(this.props.leftButton,D));_.push(e),T.push(O.smallSpacer),w=s.createElement(s.View,{key:R,style:T}),b=!0}else w=s.createElement(s.View,{key:R,ref:this._onLeftControlRef,style:T},this._getControl(this.props.leftButton,R));else w=s.createElement(s.View,{key:R,style:T});i&&(T.push(O.controlsContainerDesktop),P.push(O.controlsContainerDesktop),0===_.length&&!1!==this.props.useCenteredControls&&P.push(O.smallSpacer));const M=this.props.backgroundView?s.createElement(s.View,{style:[O.backgroundView,S]},this.props.backgroundView):void 0;return(M||_.length>0)&&!y&&(y=s.createElement(s.View,{style:N.default.flexOne,ignorePointerEvents:!0,blockPointerEvents:!0})),s.createElement(s.View,{style:C,ignorePointerEvents:this.props.ignorePointerEvents,blockPointerEvents:this.props.blockPointerEvents},M,w,y,s.createElement(s.View,{key:D,ref:b?this._onRightControlRef:void 0,style:P},_))}_getSpacer(e){return s.createElement(s.View,{key:e,style:O.spacer,ignorePointerEvents:!0})}}t.SimplePanelHeader=F},2597:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(38933),s=i(16778),a=i(47126),r=i(15877),l=i(89808),c=i(81760),d=i(80837),u=i(24576),g=(0,r.lazyProperties)({gestureViewStyle:()=>s.Styles.createViewStyle({backgroundColor:c.Color.transparent})});class h extends u.default{constructor(){super(...arguments),this._trackHeight=10,this._handleSize=20,this._animatedSelectedBackgroundWidthValue=new s.Animated.Value(0),this._animatedSelectedBackgroundStyle=s.Styles.createAnimatedViewStyle({width:this._animatedSelectedBackgroundWidthValue}),this._animatedDragHandlePositionValue=new s.Animated.Value(0),this._animatedDragHandlePositionStyle=s.Styles.createAnimatedViewStyle({left:this._animatedDragHandlePositionValue}),this._onPanDragHandle=e=>{let t=e.pageX-e.initialPageX;s.International.isRTL()&&(t=-t);let i=this._currentPosition+t;i<0?i=0:i>this.state.dragAreaWidth&&(i=this.state.dragAreaWidth),this.state.dragAreaWidth&&(!this.props.dragStep||0===i||i===this.state.dragAreaWidth||Math.abs(i/this.state.dragAreaWidth-this._currentValue)>=this.props.dragStep)&&this._updatePosition(i,this.state.dragAreaWidth),e.isComplete&&(this._currentPosition=i)},this._onTap=e=>{let t=e.clientX;s.International.isRTL()&&(t=this.state.dragAreaWidth-t),t<0?t=0:t>this.state.dragAreaWidth&&(t=this.state.dragAreaWidth),this.state.dragAreaWidth&&this._updatePosition(t,this.state.dragAreaWidth),this._currentPosition=t},this._onLayout=e=>{const t=e.width-this._handleSize;t!==this.state.dragAreaWidth&&this.setState({dragAreaWidth:t})},this._onKeyPress=e=>{const t=this.props.keyboardNavStep||.05;e.keyCode===a.default.LEFT||e.keyCode===a.default.DOWN?(this.updateValue(this._currentValue-t),e.preventDefault()):e.keyCode!==a.default.RIGHT&&e.keyCode!==a.default.UP||(this.updateValue(this._currentValue+t),e.preventDefault())}}_buildState(e,t){const i=l.default.getColorInfo().colors.slice().reverse(),n={selectedBackgroundColorStyle:l.default.getPrimaryBackgroundColorStyle(),gradientColors:i};return t&&(this._currentValue=e.value||0,this._currentPosition=0,this._trackHeight=e.trackHeight||10,this._handleSize=e.handleSize||20,n.dragAreaWidth=0),n}componentDidMount(){super.componentDidMount(),this._currentValue&&this.state.dragAreaWidth&&this._updatePosition(this._currentValue*this.state.dragAreaWidth,this.state.dragAreaWidth,!1)}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i);let o=!1;n.isUndefined(e.value)||e.value===this.props.value||(this._currentValue=e.value,o=!0),(o||this.state.dragAreaWidth!==t.dragAreaWidth)&&(this._currentPosition=this._currentValue*t.dragAreaWidth,this._updatePosition(this._currentPosition,t.dragAreaWidth,!1))}updateValue(e){e<0?e=0:e>1&&(e=1),this._currentValue=e,this.state.dragAreaWidth&&this._updatePosition(e*this.state.dragAreaWidth,this.state.dragAreaWidth)}_updatePosition(e,t,i=!0){this._currentValue=t?e/t:0,this.props.onProgressChange&&i&&this.props.onProgressChange(this._currentValue),this._animatedDragHandlePositionValue.setValue(e),this._animatedSelectedBackgroundWidthValue.setValue(e+this._handleSize/2)}render(){const e={container:s.Styles.createViewStyle({alignSelf:"stretch",height:this._handleSize,alignItems:"center",justifyContent:"center"},!1),backgroundContainer:s.Styles.createViewStyle({alignSelf:"stretch",height:this._trackHeight,borderRadius:this._trackHeight/2,marginHorizontal:this._handleSize/2},!1),selectedBackground:s.Styles.createViewStyle({height:this._trackHeight,borderRadius:this._trackHeight/2},!1),dragHandleContainer:s.Styles.createViewStyle({position:"absolute",width:this._handleSize,height:this._handleSize,borderRadius:this._handleSize/2,overflow:"hidden"},!1)},t=[e.selectedBackground,this.state.selectedBackgroundColorStyle,this._animatedSelectedBackgroundStyle],i=[e.dragHandleContainer,this._animatedDragHandlePositionStyle],n=[d.default.absoluteFill,g.gestureViewStyle],a=[e.selectedBackground,s.Styles.createViewStyle({width:this.state.dragAreaWidth},!1)],r=[e.dragHandleContainer,this._themeStyles.sliderHandleColorStyle,this._themeStyles.viewBorderStyle];return s.createElement(s.View,{style:[e.container,this.props.style],onLayout:this._onLayout,onKeyPress:this._onKeyPress,tabIndex:0,accessibilityTraits:s.Types.AccessibilityTrait.Adjustable,accessibilityLabel:this.props.accessibilityLabel,ariaValueNow:this.props.ariaValueNow},s.createElement(s.View,{style:[e.backgroundContainer,this._themeStyles.secondaryBackgroundColorStyle]},s.createElement(s.Animated.View,{style:t},s.createElement(o.GradientView,{style:a,colors:this.state.gradientColors,direction:o.GradientDirection.RIGHT}))),s.createElement(s.Animated.View,{style:i},s.createElement(s.View,{style:r})),s.createElement(s.GestureView,{style:n,preferredPan:s.Types.PreferredPanGesture.Horizontal,onPanHorizontal:this._onPanDragHandle,onTap:this._onTap}))}}t.default=h},56810:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SwipableItemActionSide=t.SwipeActionLayout=void 0;const n=i(96486),o=i(98356),s=i(16778),a=i(88837),r=i(98278),l=i(77381),c=i(12854),d=i(10117),u=i(15877),g=i(6250),h=i(29130),p=i(26978),m=i(81760),S=i(11828),C=i(80837),f=i(19675);var y,_;!function(e){e[e.Reveal=0]="Reveal",e[e.Pull=1]="Pull"}(y=t.SwipeActionLayout||(t.SwipeActionLayout={})),function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"}(_=t.SwipableItemActionSide||(t.SwipableItemActionSide={}));const v=80,b=m.Color.white,T="action",P=(0,u.lazyProperties)({outerStaticContainer:()=>s.Styles.createViewStyle({flex:1,flexDirection:"row"}),gestureContainer:()=>s.Styles.createViewStyle({overflow:"visible",flex:1}),rightSwipeActionContainerReveal:()=>s.Styles.createViewStyle({flexDirection:"row",justifyContent:"flex-end",alignItems:"stretch"}),leftSwipeActionContainerReveal:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"stretch"}),iconContainerReveal:()=>s.Styles.createViewStyle({justifyContent:"center",alignItems:"center",padding:20,width:v}),rightIconInnerContainerReveal:()=>s.Styles.createViewStyle({position:"absolute",left:0,top:0,bottom:0}),leftIconInnerContainerReveal:()=>s.Styles.createViewStyle({position:"absolute",right:0,top:0,bottom:0}),icon:()=>s.Styles.createTextStyle({color:b,paddingHorizontal:4}),iconButton:()=>s.Styles.createViewStyle({justifyContent:"center",alignItems:"center"}),caption:()=>s.Styles.createTextStyle({marginTop:8,color:b,paddingHorizontal:4,textAlign:"center"})});class A extends l.default{constructor(){super(...arguments),this._rightSwipeItemRefs=new g.default,this._leftSwipeItemRefs=new g.default,this._currentX=0,this._innerMovingContainerXOffsetValue=new s.Animated.Value(0),this._innerMovingContainerXOffsetStyle=s.Styles.createAnimatedViewStyle({transform:[{translateX:this._innerMovingContainerXOffsetValue}]}),this._rightIconButtonOpacityValue=new s.Animated.Value(0),this._rightIconButtonOpacityStyle=s.Styles.createAnimatedViewStyle({opacity:this._rightIconButtonOpacityValue}),this._leftIconButtonOpacityValue=new s.Animated.Value(0),this._leftIconButtonOpacityStyle=s.Styles.createAnimatedViewStyle({opacity:this._leftIconButtonOpacityValue}),this._hapticFeedbackPrepared=!1,this._hapticFeedbackSent=!1,this._isSwiping=!1,this._isRevealAdvanceGesture=!1,this._renderSwipeAction=(e,t,i,n,o,a)=>{const r=t===_.Right?this._rightSwipeItemRefs.onComponentRef(e):this._leftSwipeItemRefs.onComponentRef(e);return s.createElement(k,{key:e,ref:r,side:t,position:i,commandOrId:this._swipeActionCommandOrId(n),style:a,swipeAction:n,layoutType:this.props.layoutType,allowOverscroll:o,isPresentedInDesktopLeftNav:this._getContext().isPresentedInDesktopLeftNav,useNativeAnimationDriver:!1,onPress:n.onComplete||n.onConfirm?this._onPerformAction:void 0,numberOfLines:this.props.numberOfLines?this.props.numberOfLines:1})},this._onPerformAction=(e,t)=>{const i=i=>{i?e.onComplete?(this._cancelSwipe(),e.onComplete(t)):this._cancelSwipe((()=>{e.onComplete&&e.onComplete(t)})):this._cancelSwipe()};e.onConfirm?e.onConfirm(t).then(i).catch((e=>i(!1))):i(!0)},this._onContainerRef=e=>{this._container=e||void 0},this._onPanView=e=>{const t=e.pageX-e.initialPageX,i=this.props.layoutType===y.Reveal,o=this.props.layoutType===y.Pull;let s=!1;if((this.state.rightActions.length&&(t<0||this._currentX<0)||this.state.leftActions&&this.state.leftActions.length&&(t>0||this._currentX>0))&&(s=!0),!s)return;this.state.renderActions||this.setState({renderActions:!0}),this._isSwiping||(this.props.onSwiping&&this.props.onSwiping(!0,!!this.state.openSide,!0,this._getCurrentItemRef()),this._isSwiping=!0);let a=this._currentX+t;this._hapticFeedbackPrepared||(this._hapticFeedbackPrepared=!0,c.default.prepareFeedback());const r=this._allowOverscroll(_.Left),l=this._allowOverscroll(_.Right);let d;if(i&&(a>0&&!r?a=Math.min(this.state.leftActions.length*v*1.25,a):a<0&&!l&&(a=Math.max(this.state.rightActions.length*v*1.25*-1,a))),this._rightIconButtonOpacityValue.setValue(a<-1&&this.state.openSide!==_.Left?1:0),this._leftIconButtonOpacityValue.setValue(a>1&&this.state.openSide!==_.Right?1:0),this.props.overscrollSides||o){const e=this.props.swipeDistanceThreshold||160;this.state.openSide!==_.Right&&a>e&&r?d=_.Left:this.state.openSide!==_.Left&&a<-1*e&&l&&(d=_.Right),d?this._hapticFeedbackSent||(this._hapticFeedbackSent=!0,c.default.triggerFeedback()):this._isRevealAdvanceGesture&&(c.default.triggerFeedback(),this._hapticFeedbackSent=!1)}if(this._isRevealAdvanceGesture=!!d,this._innerMovingContainerXOffsetValue.setValue(a),this._updateOffsets(a,!1,d),e.isComplete){if(d){const e=d===_.Left?n.first(this.state.leftActions):n.last(this.state.rightActions);e&&this._onPerformAction(e,this._swipeActionCommandOrId(e)),this._cancelSwipe()}else if(i){let t;this.state.openSide===_.Right?(e.velocityX<0||-1*a>v*this.state.rightActions.length)&&(t=_.Right):this.state.openSide===_.Left&&this.state.leftActions?(e.velocityX>0||a>v*this.state.leftActions.length)&&(t=_.Left):a>0?(e.velocityX>=1||a>50)&&(t=_.Left):(e.velocityX<=-1||-1*a>50)&&(t=_.Right),t?this._openMenu(t):this._cancelSwipe()}else this._cancelSwipe();this._isRevealAdvanceGesture=!1,this._hapticFeedbackSent=!1,this._hapticFeedbackPrepared=!1}},this._close=()=>{this._cancelSwipe()},this._cancelSwipe=e=>{this.props.onSwiping&&this.props.onSwiping(!1,!1,!1,this._getCurrentItemRef()),this._isSwiping=!1,this._currentX=0,this._updateOffsets(this._currentX,!0);const t=!1;o.parallel([o.timing.shotgun({value:this._innerMovingContainerXOffsetValue,toValue:this._currentX,useNativeDriver:t}),o.timing.shotgun({value:this._rightIconButtonOpacityValue,toValue:0,useNativeDriver:t}),o.timing.shotgun({value:this._leftIconButtonOpacityValue,toValue:0,useNativeDriver:t})]).start((t=>{e&&e(),this.isComponentMounted()&&this.state.openSide&&(this.setState({openSide:void 0,renderActions:!1}),t.finished||this._innerMovingContainerXOffsetValue.setValue(this._currentX))}))},this._onLongPressClose=()=>{},this._getCurrentItem=()=>this.isComponentMounted()?this:void 0}_buildState(e,t){let i={rightActions:A._actionsForSide(e,_.Right),leftActions:A._actionsForSide(e,_.Left)};return t&&(i.renderActions=e.layoutType!==y.Reveal),i}requestFocus(){this._container&&this._container.requestFocus()}close(){return!(!this.state.openSide||this._isSwiping)&&(this._cancelSwipe(),!0)}componentWillUnmount(){super.componentWillUnmount(),c.default.unprepareFeedback()}render(){const e=!n.isEmpty(this.state.rightActions)||!n.isEmpty(this.state.leftActions);if(this.props.disableSwipe||!e){const e=[P.outerStaticContainer,C.default.overflowVisible];return s.createElement(s.View,{style:e},this.props.children)}let t;const i=this.state.openSide?s.createElement(s.View,{onPress:this._close,onLongPress:this._onLongPressClose,style:[C.default.absoluteFill,C.default.noncollapsibleView]}):void 0;let o,a;if(this.state.renderActions){const e=this.state.rightActions,t=e?e.length:0,i=!!t&&this._allowOverscroll(_.Right),r=n.map(e,((e,n)=>this._renderSwipeAction(T+n,_.Right,t-n,e,i,P.iconContainerReveal))),l=[C.default.absoluteFill,C.default.overflowVisible,this.props.backgroundStyle];if(o=s.createElement(s.Animated.View,{key:"rightactions",style:[l,this._rightIconButtonOpacityStyle,P.rightSwipeActionContainerReveal],ignorePointerEvents:!0},r),this.state.leftActions){const e=this.state.leftActions,t=e?e.length:0,i=!!t&&this._allowOverscroll(_.Left),o=n.map(e,((e,n)=>this._renderSwipeAction(T+n,_.Left,t-n,e,i,P.iconContainerReveal)));a=s.createElement(s.Animated.View,{key:"leftactions",style:[l,this._leftIconButtonOpacityStyle,P.leftSwipeActionContainerReveal],ignorePointerEvents:!0},o)}}return t=n.compact([o,a,s.createElement(s.Animated.View,{key:"content",style:[this._innerMovingContainerXOffsetStyle,C.default.overflowVisible]},this.props.children,i)]),s.createElement(s.View,{ref:this._onContainerRef,style:this.props.style||P.outerStaticContainer,onLayout:undefined,accessibilityActions:this.props.accessibilityActions,onAccessibilityAction:this.props.onAccessibilityAction,importantForAccessibility:this.props.importantForAccessibility,accessibilityLabel:this.props.accessibilityLabel,accessibilityTraits:this.props.accessibilityTraits},this._wrapGestureContent(t,P.gestureContainer))}_allowOverscroll(e){return!(!n.includes(this.props.overscrollSides,e)&&this.props.layoutType===y.Reveal)}_wrapGestureContent(e,t){return s.createElement(s.GestureView,{onPanHorizontal:this._onPanView,panPixelThreshold:this.props.dragThreshold||3,preferredPan:s.Types.PreferredPanGesture.Horizontal,releaseOnRequest:!1,importantForAccessibility:s.Types.ImportantForAccessibility.No,style:t},e)}_updateOffsets(e,t,i){const o=v*this.state.rightActions.length;if(o){const s=this.state.openSide===_.Left?0:Math.min(e,0),a=Math.abs(s)/o;n.each(this._rightSwipeItemRefs.allRefs(),(e=>{e.ref&&e.ref.updateOffset(a,t,i===_.Right)}))}if(!this.state.leftActions)return;const s=v*this.state.leftActions.length;if(s){const o=this.state.openSide===_.Right?0:Math.max(e,0),a=Math.abs(o)/s;n.each(this._leftSwipeItemRefs.allRefs(),(e=>{e.ref&&e.ref.updateOffset(a,t,i===_.Left)}))}}_openMenu(e){this._isSwiping=!1,this.props.onSwiping&&this.props.onSwiping(!1,!0,!0,this._getCurrentItemRef()),e===_.Right?this._currentX=v*this.state.rightActions.length*-1:this.state.leftActions&&(this._currentX=v*this.state.leftActions.length),this._updateOffsets(this._currentX,!0);const t=!1;o.parallel([o.timing.easeOut5({value:this._innerMovingContainerXOffsetValue,toValue:this._currentX,duration:o.Common.Duration.Tiny,useNativeDriver:t}),o.timing.easeOut5({value:this._rightIconButtonOpacityValue,toValue:e===_.Right?1:0,duration:o.Common.Duration.Tiny,useNativeDriver:t}),o.timing.easeOut5({value:this._leftIconButtonOpacityValue,toValue:e===_.Left?1:0,duration:o.Common.Duration.Tiny,useNativeDriver:t})]).start((()=>{this.isComponentMounted()&&this.state.openSide!==e&&this.setState({openSide:e})}))}_getCurrentItemRef(){return{itemId:this.props.itemId,ref:this._getCurrentItem}}_swipeActionCommandOrId(e){return e.command||this.props.itemId}static _actionsForSide(e,t){const i=e.layoutType!==y.Reveal;return t===_.Right?n.compact(e.rightActions&&e.rightActions.length?i?[n.first(e.rightActions)]:e.rightActions:[]):n.compact(e.leftActions&&e.leftActions.length?i?[n.first(e.leftActions)]:e.leftActions:[])}}t.default=A;class k extends a.ComponentBase{constructor(){super(...arguments),this._iconHighlighted=!1,this._animatedOffsetValue=new s.Animated.Value(0),this._animatedBackgroundWidthValue=new s.Animated.Value(136),this._animatedBackgroundWidthStyle=s.Styles.createAnimatedViewStyle({width:this._animatedBackgroundWidthValue}),this._animatedIconOpacityValue=new s.Animated.Value(.7),this._animatedIconOpacityStyle=s.Styles.createAnimatedViewStyle({opacity:this._animatedIconOpacityValue}),this._animatedIconScaleValue=new s.Animated.Value(1),this._animatedIconScaleStyle=s.Styles.createAnimatedViewStyle({transform:[{scale:this._animatedIconScaleValue}]}),this._onPress=()=>{this.props.onPress&&this.props.onPress(this.props.swipeAction,this.props.commandOrId)}}_buildState(e,t){if(e.allowOverscroll){const t=e.isPresentedInDesktopLeftNav?p.default.getWidth(p.SideBar.Left):h.default.getWidth(r.MainRootViewId);this._animatedBackgroundWidthValue.setValue(t||136)}return{}}UNSAFE_componentWillMount(){super.UNSAFE_componentWillMount(),this._updateAnimatedStyle(this.props.position),this._updateStaticStyles(this.props.swipeAction)}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i),this.props.position!==e.position&&this._updateAnimatedStyle(e.position);const n=this.props.swipeAction,o=e.swipeAction;n.backgroundColor===o.backgroundColor&&n.iconColor===o.iconColor||this._updateStaticStyles(o)}updateOffset(e,t,i=!1){let n=e;if(!this.props.allowOverscroll){const e=this.props.layoutType===y.Reveal?1.2:1;n=n>e?e:n}t?o.timing.easeOut5({value:this._animatedOffsetValue,toValue:n,duration:o.Common.Duration.Tiny,useNativeDriver:this.props.useNativeAnimationDriver}).start():this._animatedOffsetValue.setValue(n),this._iconHighlighted!==i&&(this._animatedIconOpacityValue.setValue(i?1:.7),i?o.timing.bounceIn([{value:this._animatedIconScaleValue,toValue:1.25,duration:o.Common.Duration.Tiny,useNativeDriver:this.props.useNativeAnimationDriver}],[{value:this._animatedIconScaleValue,toValue:1.2,duration:o.Common.Duration.Short,useNativeDriver:this.props.useNativeAnimationDriver}]).start():o.timing.easeOut5({value:this._animatedIconScaleValue,toValue:1,duration:o.Common.Duration.Tiny,useNativeDriver:this.props.useNativeAnimationDriver}).start(),this._iconHighlighted=i)}render(){const e=this.props.swipeAction;let t,i;e.label&&(t=s.createElement(f.Caption,{key:"caption",style:[P.caption,this._textColorStyle],numberOfLines:this.props.numberOfLines},e.label));const o=[this.props.side===_.Right?P.rightIconInnerContainerReveal:P.leftIconInnerContainerReveal,this._animatedBackgroundWidthStyle,this._backgroundColorStyle];i=s.createElement(s.Animated.View,{style:o});let a=n.compact([s.createElement(d.AnimatedIconView,{key:"icon",icon:e.icon,color:e.iconColor,size:S.IconSize.size20,style:[P.icon,this._animatedIconScaleStyle]}),t]);if(this.props.onPress){const e=[C.default.absoluteFill,P.iconButton];this.props.layoutType===y.Pull&&e.push(this._animatedIconOpacityStyle),a=s.createElement(s.Animated.View,{style:e,accessibilityLabel:this.props.swipeAction.accessibilityLabel||this.props.swipeAction.label,accessibilityTraits:s.Types.AccessibilityTrait.Button,onPress:this._onPress},a)}const r=[this.props.style,this._animatedOffsetStyle,C.default.overflowVisible];return s.createElement(s.Animated.View,{style:r},i,a)}_updateAnimatedStyle(e){const t=e*v*(this.props.side===_.Right?1:-1);this._animatedOffsetStyle=s.Styles.createAnimatedViewStyle({transform:[{translateX:this._animatedOffsetValue.interpolate({inputRange:[0,1],outputRange:[t,0]})}]})}_updateStaticStyles(e){this._backgroundColorStyle=s.Styles.createViewStyle({backgroundColor:e.backgroundColor},!1),this._textColorStyle=s.Styles.createTextStyle({color:e.iconColor},!1)}}},77806:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SyncIndicator=void 0;const n=i(16778),o=i(88837),s=i(10117),a=i(81760),r=i(11828);class l extends o.ComponentBase{constructor(){super(...arguments),this._rotateTextValue=new n.Animated.Value(0),this._rotateTextStyle=n.Styles.createAnimatedViewStyle({transform:[{rotate:this._rotateTextValue.interpolate({inputRange:[0,360],outputRange:["0deg","360deg"]})}]}),this._onSyncIndicatorRef=e=>{e&&this._startAnimation()}}_buildState(e,t){return{containerStyle:n.Styles.createViewStyle({height:e.size,width:e.size,borderRadius:e.size/2,backgroundColor:e.color,alignItems:"center",justifyContent:"center"},!1)}}render(){var e;return n.createElement(n.View,{style:this.state.containerStyle},n.createElement(s.AnimatedIconView,{icon:r.SkypeIcon.Refresh,color:null!==(e=this.props.indicatorColor)&&void 0!==e?e:a.Color.white,size:2*Math.floor(this.props.size*(this.props.largeIndicator?.4:.3)),style:this._rotateTextStyle,ref:this._onSyncIndicatorRef}))}_startAnimation(){this._rotateTextValue.setValue(0),n.Animated.timing(this._rotateTextValue,{toValue:360,easing:n.Animated.Easing.Linear(),duration:1200,isInteraction:!1}).start((()=>{this.isComponentMounted()&&this._startAnimation()}))}}t.SyncIndicator=l,t.default=l},26511:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TabFilters=void 0;const n=i(96486),o=i(16778),s=i(11930),a=i(84994),r=i(39285),l=i(47126),c=i(15877),d=i(81760),u=i(11010),g=i(24576),h=i(12770),p=(0,c.lazyProperties)({container:()=>o.Styles.createViewStyle({flex:1,flexDirection:"row",height:40}),containerCompact:()=>o.Styles.createViewStyle({flex:1,flexDirection:"row",height:30}),button:()=>o.Styles.createViewStyle({flex:1,minWidth:0,justifyContent:"center",alignItems:"center"}),inner:()=>o.Styles.createViewStyle({flex:1,borderBottomWidth:2,borderColor:d.Color.transparent,paddingTop:2,justifyContent:"center",overflow:"visible"}),text:()=>o.Styles.createTextStyle({fontSize:u.default.controlFontSize.searchFiltersTab}),textCompact:()=>o.Styles.createTextStyle({fontSize:u.default.controlFontSize.caption}),selectedText:()=>o.Styles.createTextStyle({fontWeight:"bold"}),fixedWidthTab:()=>o.Styles.createViewStyle({width:100})});class m extends g.default{constructor(){super(...arguments),this._setButtonRef=e=>{this._buttonRef=e||void 0},this._onPress=e=>{this.props.onTabPress&&this.props.onTabPress(this.props.tabId)},this._onHoverStart=()=>{this.isComponentMounted()&&this.setState({hovered:!0})},this._onHoverEnd=()=>{this.isComponentMounted()&&this.setState({hovered:!1})}}_buildState(e,t){if(t){return{hovered:!1}}return{}}UNSAFE_componentWillReceiveProps(e,t){super.UNSAFE_componentWillReceiveProps(e,t),e.shouldUpdateOnFocus&&e.focused&&!this.props.focused&&this._buttonRef&&this._buttonRef.requestFocus&&this._buttonRef.requestFocus()}render(){const e=[p.inner],t=[this.props.useCompactLayout?p.textCompact:p.text],i=s.default.tabAccessibilityLabel(this.props.title,this.props.tabIndex,this.props.tabCount,this.props.includeTabCountOnDesktop),n=s.default.tabAccessibilityTraits(this.props.selected);if(this.props.selected){const i=o.Styles.createViewStyle({borderColor:this._themeColors.primaryTextColor},!1);e.push(i),t.push(p.selectedText,this._themeStyles.primaryTextColorStyle)}else if(t.push(this._themeStyles.secondaryTextColorStyle),this.state.hovered){const t=o.Styles.createViewStyle({borderColor:this._themeColors.secondaryTextColor},!1);e.push(t)}const a=[p.button];return this.props.widthStyle&&a.push(this.props.widthStyle),o.createElement(o.Button,{style:a,onPress:this._onPress,ref:this._setButtonRef,onHoverStart:this._onHoverStart,onHoverEnd:this._onHoverEnd,accessibilityTraits:n,tabIndex:this.props.focused?0:-1,accessibilityLabel:i},o.createElement(r.default,{style:e},o.createElement(o.Text,{style:t},this.props.title)))}}class S extends g.default{constructor(){super(...arguments),this._onKeyPress=e=>{let t=this.state.focusedIndex;e.keyCode!==l.default.DOWN&&e.keyCode!==l.default.LEFT||(t-=1),e.keyCode!==l.default.UP&&e.keyCode!==l.default.RIGHT||(t+=1),t<0?t=this.props.tabs.length-1:t>=this.props.tabs.length&&(t=0),this.setState({focusedIndex:t})},this._onBlur=()=>{this._focusResetTimeout&&h.default.clearTimeout(this._focusResetTimeout),this._focusResetTimeout=h.default.setTimeout((()=>{const e=this._findTabIndexById(this.state.selectedId,this.props.tabs);this.isComponentMounted()&&this.state.focusedIndex!==e&&this.setState({hasFocus:!1,focusedIndex:e})}),250)},this._onFocus=()=>{this.isComponentMounted()&&!this.state.hasFocus&&this.setState({hasFocus:!0}),this._focusResetTimeout&&(h.default.clearTimeout(this._focusResetTimeout),this._focusResetTimeout=void 0)},this._onTabPress=e=>{this.setState({selectedId:e}),this.props.onChanged(e)}}_buildState(e,t){if(t){const t=e.initialySelectedId||e.tabs[0].id;return{selectedId:t,focusedIndex:this._findTabIndexById(t,e.tabs),hasFocus:!1}}return{}}UNSAFE_componentWillReceiveProps(e,t){super.UNSAFE_componentWillReceiveProps(e,t),this.props.initialySelectedId!==e.initialySelectedId&&this.setState({selectedId:e.initialySelectedId})}render(){const e=this._renderTabs(this.props.tabs,this.props.useFixedWidth?p.fixedWidthTab:void 0);return o.createElement(o.View,{onKeyPress:this._onKeyPress,onBlur:this._onBlur,onFocus:this._onFocus,style:this.props.useCompactLayout?p.containerCompact:p.container,accessibilityTraits:a.default.useTabListContainer()?o.Types.AccessibilityTrait.TabList:void 0,accessibilityLabel:this.props.accessibilityLabel},e)}_findTabIndexById(e,t){return(0,n.findIndex)(t,(t=>t.id===e))}_renderTabs(e,t){let i;this._getContext().isRTL?(i=e.slice(0),i.reverse()):i=e;const n=i.length;return i.map(((e,i)=>o.createElement(m,{key:"tab-"+e.id,tabId:e.id,title:e.title,focused:this.state.focusedIndex===i,selected:this.state.selectedId===e.id,shouldUpdateOnFocus:this.state.hasFocus,widthStyle:t,useCompactLayout:this.props.useCompactLayout,tabIndex:i,tabCount:n,includeTabCountOnDesktop:!a.default.useTabListContainer(),onTabPress:this._onTabPress})))}}t.TabFilters=S},36595:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TertiaryButton=void 0;const n=i(38933),o=i(98356),s=i(16778),a=i(10102),r=i(98278),l=i(10117),c=i(15877),d=(i(33754),i(89808)),u=i(15415),g=i(1088),h=i(81760),p=i(11010),m=i(11828),S=i(80837),C=i(19675),f=(0,c.lazyProperties)({titleStyle:()=>s.Styles.createTextStyle({color:h.Color.white}),darkTitleStyle:()=>s.Styles.createTextStyle({color:h.Color.gray400}),hiddenTitle:()=>s.Styles.createViewStyle({opacity:0}),innerContainerStyle:()=>s.Styles.createViewStyle({alignItems:"center",justifyContent:"center",paddingLeft:15,paddingRight:15}),innerContainerStroke:()=>s.Styles.createViewStyle({borderWidth:1}),activityIndicatorContainer:()=>s.Styles.createViewStyle({alignItems:"center",justifyContent:"center"}),iconAndTextContainer:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"center"}),iconAndTextContainerReverse:()=>s.Styles.createViewStyle({flexDirection:"row-reverse"}),iconHorizontalMargin:()=>s.Styles.createViewStyle({marginRight:5}),iconHorizontalMarginReverse:()=>s.Styles.createViewStyle({marginLeft:5}),borderWidth:()=>s.Styles.createViewStyle({borderWidth:1}),secondaryIcon:()=>s.Styles.createViewStyle({marginLeft:8}),secondaryIconAndTextContainer:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"center",overflow:"visible"}),image:()=>s.Styles.createViewStyle({width:24,height:24})});class y extends g.default{constructor(){super(...arguments),this._onPillLayout=e=>{this.isComponentMounted()&&e.height>0&&this.state.pillHeight!==e.height&&this.setState({pillHeight:e.height})}}_buildState(e,t){return{viewStyle:this._viewStyleForButtonStyle(e.buttonStyle,e.colorInfoOverride),textColorInfo:this._textInfoForButtonStyle(e.buttonStyle,e.colorInfoOverride,f.titleStyle,f.darkTitleStyle),gradientColors:this._getGradientColors(e),pillHeight:e.minHeight||30}}render(){var e;const t=[];this.props.showShadow&&t.push(S.default.overflowVisible),this.props.style&&t.push(this.props.style);const i=[f.innerContainerStyle];this.props.buttonConfig&&(this.props.buttonConfig.backgroundColor||this.props.buttonConfig.borderColor)?(this.props.buttonConfig.borderColor&&(i.push(f.innerContainerStroke),i.push(s.Styles.createViewStyle({borderColor:this.props.buttonConfig.borderColor},!1))),this.props.buttonConfig.backgroundColor&&i.push(s.Styles.createViewStyle({backgroundColor:this.props.buttonConfig.backgroundColor},!1))):i.push(this.state.viewStyle),i.push(s.Styles.createViewStyle({borderRadius:this.state.pillHeight/2,minHeight:this.props.minHeight||30},!1)),this.props.showShadow&&i.push(S.default.shadowLightStyle),this.props.addBorderColor&&i.push([f.borderWidth,s.Styles.createViewStyle({borderColor:this.props.addBorderColor},!1)]);const a=[p.default.fontStyle.tertiaryButton,f.titleStyle,S.default.flexNegativeOne,this.props.textStyleOverride||void 0];let c,d,g,h;if(this.props.buttonConfig&&this.props.buttonConfig.textColor?(c=this.props.buttonConfig.textColor,d=s.Styles.createTextStyle({color:this.props.buttonConfig.textColor},!1)):(c=this.state.textColorInfo.color,d=this.state.textColorInfo.colorStyle),a.push(d),this.props.textStyleDeprecated&&a.push(this.props.textStyleDeprecated),this.props.showActivityIndicator&&a.push(f.hiddenTitle),this.props.title&&(g=s.createElement(s.Text,{style:a,numberOfLines:this.props.allowTextWrap?void 0:1},this.props.title),this.props.subtitle)){let e;e=this.props.buttonConfig?this.props.buttonConfig.subtitleTextColor||this.props.buttonConfig.textColor:this.state.textColorInfo.subtitleColor;const t=[s.Styles.createTextStyle({color:e},!1),S.default.flexNegativeOne];g=s.createElement(s.View,{style:S.default.flexNegativeOne},g,s.createElement(C.Caption,{style:t,numberOfLines:this.props.allowTextWrap?void 0:1},this.props.subtitle))}g&&(h=this._getAccessoryMarginStyle());let y=this.props.renderAccessoryView?this.props.renderAccessoryView(c,h):void 0;if(!y&&this.props.icon){const e=[h];this.props.showActivityIndicator&&e.push(f.hiddenTitle),y=s.createElement(l.default,{icon:this.props.icon,size:this.props.iconSize||m.IconSize.size16,color:c,style:e})}else!y&&this.props.imageSource&&(y=s.createElement(s.Image,{source:this.props.imageSource,style:[h,f.image]}));if(g){const e=[f.iconAndTextContainer,S.default.flexNegativeOne];this.props.iconPositon===r.SXButtonIconPosition.End&&e.push(f.iconAndTextContainerReverse),g=s.createElement(s.View,{style:e},y,g)}else g=y;if(this.props.secondaryIcon){const e=[f.secondaryIcon];this.props.secondaryIconMarginLeft&&e.push(s.Styles.createViewStyle({marginLeft:this.props.secondaryIconMarginLeft},!1)),this.props.secondaryIconMarginRight&&e.push(s.Styles.createViewStyle({marginRight:this.props.secondaryIconMarginRight},!1)),g=s.createElement(s.View,{style:f.secondaryIconAndTextContainer},g,s.createElement(l.default,{style:e,icon:this.props.secondaryIcon,size:this.props.secondaryIconSize||this.props.iconSize||m.IconSize.size16,color:this.props.secondaryIconColor||c}))}g||(g=s.createElement(s.Text,{style:a},""));const _=this.props.showActivityIndicator?s.createElement(s.View,{style:[S.default.absoluteFill,f.activityIndicatorContainer]},s.createElement(u.default,{size:r.SXActivityIndicatorSize.ExtraSmall,tintColor:this.props.buttonConfig&&this.props.buttonConfig.indicatorColor?this.props.buttonConfig.indicatorColor:this._indicatorColorForButtonStyle(this.props.buttonStyle,this.props.colorInfoOverride)})):void 0,v=this.state.gradientColors?s.createElement(n.GradientView,{style:[...i,S.default.absoluteFill],colors:this.state.gradientColors,direction:null!==(e=this.props.gradientDirection)&&void 0!==e?e:n.GradientDirection.RIGHT}):void 0,b=[...i];this.props.backgroundStyle&&b.push(s.Styles.createViewStyle(this.props.backgroundStyle,!1));const T=!!this.props.onPress||!!this.props.onLongPress,P=this.props.disabled&&!this.props.disabledOpacityOverride||this.props.showActivityIndicator;let A=this.props.accessibilityLabel||this.props.title||"";let k=this.props.accessibilityTraits;!k&&T&&(k=[s.Types.AccessibilityTrait.Button],P&&k.push(s.Types.AccessibilityTrait.Disabled));const I=T?s.Button:s.View;return s.createElement(I,{ref:this._onButtonRef,style:t,title:this.props.hoverText?this.props.hoverText:this.props.title,onFocus:this.props.disabled?void 0:this.props.onFocus,onPress:!this.props.disabled&&T?this.props.onPress:void 0,onPressIn:T?this._onPressInBound:void 0,onPressOut:T?this._onPressOutBound:void 0,onLongPress:!this.props.disabled&&T?this.props.onLongPress:void 0,onKeyPress:this.props.disabled?void 0:this.props.onKeyPress,onHoverStart:this._onHoverStartBound,onHoverEnd:this._onHoverEndBound,disabled:P,accessibilityLabel:A,accessibilityTraits:k,tabIndex:this.props.tabIndex,disableTouchOpacityAnimation:!0,autoFocus:this.props.autoFocus,importantForAccessibility:this.props.accessibilityHidden?s.Types.ImportantForAccessibility.NoHideDescendants:this.props.importantForAccessibility},s.createElement(o.View,{ref:this._onAnimatedInnerButtonRef,style:b,onLayout:this._onPillLayout},v,g,_))}_getAccessoryMarginStyle(){let e;if(this.props.iconPositon===r.SXButtonIconPosition.End)e=this.props.iconHorizontalMargin?s.Styles.createViewStyle({marginLeft:this.props.iconHorizontalMargin},!1):f.iconHorizontalMarginReverse;else e=this.props.iconHorizontalMargin?s.Styles.createViewStyle({marginRight:this.props.iconHorizontalMargin},!1):f.iconHorizontalMargin;return e}_getGradientColors(e){const{buttonStyle:t,colorInfoOverride:i}=e;return t===r.SXButtonStyle.GradientFill?i?a.gradientColorsForColorInfo(i):d.default.getGradientColors():t===r.SXButtonStyle.AgnosticGradientFill?this._getAgnosticGradientColors():void 0}}t.TertiaryButton=y,t.default=y},23902:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(98278),a=i(15877),r=i(81760),l=i(11010),c=i(80837),d=i(24576),u=(0,a.lazyProperties)({textEditContainer:()=>o.Styles.createViewStyle({flex:1,flexDirection:"row",alignSelf:"stretch",alignItems:"center",justifyContent:"center",paddingBottom:1,borderWidth:0,borderBottomWidth:1,borderStyle:"solid",borderColor:r.Color.transparent}),textEditInputBox:()=>o.Styles.createTextInputStyle({flex:1,flexDirection:"row",backgroundColor:r.Color.transparent,textAlign:"center",paddingBottom:1}),text:()=>o.Styles.createTextStyle({flexDirection:"row",paddingBottom:1,textAlign:"center",justifyContent:"center",flexShrink:1}),textView:()=>o.Styles.createViewStyle({flexShrink:1,flexDirection:"row",paddingBottom:1,justifyContent:"center"}),textContainerHover:()=>o.Styles.createViewStyle({opacity:.7})});class g extends d.default{constructor(){super(...arguments),this._textEditSetFocus=!1,this._onTextInputRef=e=>{this._inputRef=e||void 0,this._inputRef&&this._textEditSetFocus&&(this._inputRef.requestFocus(),this._textEditSetFocus=!1)},this._textViewPress=()=>{this.props.canEdit&&!this.state.isEditing&&this.setState({isEditing:!0})},this._onChangeText=e=>{this.props.onChangeText&&this.props.onChangeText(e),this.setState({newText:e})},this._submitEdit=()=>{const e=this.state.newText;if(this.props.originalText!==e){if(this.props.onSubmitEdit&&this.props.onSubmitEdit(e))return}this._cancelEdit()},this._onMouseEnter=()=>{this.props.canEdit&&this.setState({isHovering:!0})},this._onMouseLeave=()=>{this.setState({isHovering:!1})},this._onFocus=e=>{this.props.onFocus&&this.props.onFocus(e),this.props.onFocusWithRef&&this.props.onFocusWithRef(this),this.props.canEdit&&this.setState({isEditing:!0})},this._onBlur=()=>{this.setState({isEditing:!1},(()=>{this.props.onBlur&&(this.props.onBlur(),(void 0===this.props.submitOnBlur||this.props.submitOnBlur)&&this._submitEdit()),this.props.onBlurWithRef&&this.props.onBlurWithRef(this)}))}}_buildState(e,t){const i={},n=this.props.originalText||"",o=e.originalText||"";return(t||o!==n)&&(i.newText=o),i}requestFocus(){this._inputRef&&this.props.canEdit?this._inputRef.requestFocus():this._textEditSetFocus=!0}finishEditing(){this._onBlur()}submit(){this._submitEdit()}resetText(e){this.isComponentMounted()&&this._inputRef&&this.setState({newText:e||""})}render(){let e=[u.textEditContainer];return this.props.canEdit&&(this.state.isEditing||this.props.showEditable?e.push(this._themeStyles.dividerBorderColorStyle):this.state.isHovering&&e.push(u.textContainerHover)),this.props.style&&e.push(this.props.style),o.createElement(o.View,{style:e,onMouseEnter:this.props.canEdit?this._onMouseEnter:void 0,onMouseLeave:this.props.canEdit?this._onMouseLeave:void 0,onPress:this.props.canEdit?this._textViewPress:void 0},this._renderTextWithAutoFocus(!0))}_renderTextWithAutoFocus(e){if((this.state.isEditing||this.props.showEditable)&&this.props.canEdit){const t=[u.textEditInputBox,this._themeStyles.primaryTextColorStyle,this._textStyle()];return o.createElement(o.TextInput,{ref:this._onTextInputRef,key:"textInput",style:t,value:this.state.newText,placeholder:this.props.placeholderText,placeholderTextColor:this._getPlaceholderColor(),autoFocus:this.state.isEditing&&e,autoCapitalize:this.props.autoCapitalize,autoCorrect:this.props.autoCorrect,onChangeText:this._onChangeText,onSubmitEditing:this._submitEdit,returnKeyType:"done",keyboardAppearance:this._useDarkTheme()?"dark":void 0,onFocus:this._onFocus,onBlur:this._onBlur,editable:this.props.canEdit,blurOnSubmit:void 0===this.props.blurOnSubmit||this.props.blurOnSubmit,maxLength:this.props.maxLength,multiline:this.props.multiline,importantForAccessibility:this.props.accessibilityLabel?o.Types.ImportantForAccessibility.Yes:void 0,accessibilityLabel:this.props.accessibilityLabel,clearButtonMode:"never",tabIndex:this.props.tabIndex})}{const e=this._textStyle();if(this.props.originalTextReact||this.props.originalText&&this.props.originalText.length>0){const t=this.props.addAccessibilityLabelToOriginalTextReact&&this.props.accessibilityLabel;return this.props.originalTextReact?o.createElement(o.View,{style:[u.textView,c.default.pointerCursor],importantForAccessibility:t?o.Types.ImportantForAccessibility.Yes:void 0,accessibilityLabel:t?this.props.accessibilityLabel:void 0},this.props.originalTextReact):o.createElement(o.Text,{key:"textContainer",style:[u.text,c.default.pointerCursor,this._themeStyles.primaryTextColorStyle,e],numberOfLines:this.props.numberOfLines||1},this.props.originalText&&this.props.originalText.length>0?this.props.originalText:this.props.placeholderText)}return o.createElement(o.Text,{key:"textContainer",style:[u.text,this._themeStyles.secondaryTextColorStyle,e],numberOfLines:1},this.props.placeholderText)}}_getPlaceholderColor(){return this.props.placeholderColorOverride?this.props.placeholderColorOverride:this._useDarkTheme()?this._themeColors.secondaryTextColor:void 0}_cancelEdit(){this.setState({isEditing:!1,newText:this.props.originalText||""})}_textStyle(){const e=[];if(!n.isUndefined(this.props.textEditTextStyle))switch(this.props.textEditTextStyle){case s.TextEditTextStyle.Caption:e.push(l.default.fontStyle.caption);break;case s.TextEditTextStyle.BodyText:e.push(l.default.fontStyle.body);break;case s.TextEditTextStyle.BodyTextBold:e.push(l.default.fontStyle.bodyBold);break;case s.TextEditTextStyle.MessagingHeader:e.push(l.default.fontStyle.messagingHeader);break;case s.TextEditTextStyle.MessagingHeaderSmall:e.push(l.default.fontStyle.messagingHeaderSmall)}return this.props.textStyle&&e.push(this.props.textStyle),e}}t.default=g},59433:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(98278),s=i(15877),a=i(81760),r=i(11010),l=i(24576),c=(0,s.lazyProperties)({linkUnderline:()=>n.Styles.createTextStyle({textDecorationLine:"underline"}),linkBlue:()=>n.Styles.createTextStyle({color:a.Color.blue}),linkWhite:()=>n.Styles.createTextStyle({color:a.Color.white})});class d extends l.default{constructor(){super(...arguments),this._onTextElementRef=e=>{this._textElement=e||void 0}}requestFocus(){this.isComponentMounted()&&this._textElement&&this._textElement.requestFocus&&this._textElement.requestFocus()}blur(){this.isComponentMounted()&&this._textElement&&this._textElement.blur&&this._textElement.blur()}render(){const e=this._useAccessibleTheme(),t=[];switch(this.props.linkTextStyle){case o.LinkTextStyle.BodyText:t.push(r.default.bodyFontStyle(this._currentTheme));break;case o.LinkTextStyle.BodyTextSmall:t.push(r.default.bodyFontStyle(this._currentTheme,o.BodyTextSize.SmallDeprecated));break;case o.LinkTextStyle.BodyTextBold:t.push(r.default.bodyBoldFontStyle(this._currentTheme));break;case o.LinkTextStyle.Caption:t.push(r.default.captionFontStyle(this._currentTheme))}if((this.props.underline||e)&&t.push(c.linkUnderline),this.props.white)t.push(c.linkWhite);else if(this.props.blue&&!e)t.push(c.linkBlue);else if(this.props.textThemeColor)switch(this.props.textThemeColor){case o.TextThemeColor.Primary:t.push(this._themeStyles.primaryTextColorStyle);break;case o.TextThemeColor.Secondary:t.push(this._themeStyles.secondaryTextColorStyle);break;case o.TextThemeColor.Disabled:t.push(this._themeStyles.disabledTextColorStyle);break;case o.TextThemeColor.Destructive:t.push(this._themeStyles.destructiveTextColorStyle)}return this.props.style&&t.push(this.props.style),n.createElement(n.Link,Object.assign({},this.props,{style:t,ref:this._onTextElementRef}),this.props.children)}}t.default=d},71190:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextBase=void 0;const n=i(16778),o=i(98278),s=(i(46096),i(36237),i(24576));class a extends s.default{constructor(){super(...arguments),this._onTextElementRef=e=>{this._textElement=e||void 0}}UNSAFE_componentWillMount(){super.UNSAFE_componentWillMount()}requestFocus(){this.isComponentMounted()&&this._textElement&&this._textElement.requestFocus&&this._textElement.requestFocus()}blur(){this.isComponentMounted()&&this._textElement&&this._textElement.blur&&this._textElement.blur()}render(){const e=this._textStyles();if(this.props.textThemeColor)switch(this.props.textThemeColor){case o.TextThemeColor.Primary:e.push(this._themeStyles.primaryTextColorStyle);break;case o.TextThemeColor.Secondary:e.push(this._themeStyles.secondaryTextColorStyle);break;case o.TextThemeColor.Disabled:e.push(this._themeStyles.disabledTextColorStyle);break;case o.TextThemeColor.Destructive:e.push(this._themeStyles.destructiveTextColorStyle)}this.props.style&&e.push(this.props.style);const t=Object.assign(Object.assign({},this.props),{style:e});return this.props.accessibilityHidden&&(t.importantForAccessibility=n.Types.ImportantForAccessibility.NoHideDescendants),n.createElement(n.Text,Object.assign({},t,{ref:this._onTextElementRef}))}}t.TextBase=a,t.default=a},19675:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextThemeColor=t.HeaderSize=t.BodyTextSize=t.ThemeAwareText=t.PanelHeader=t.CardTitle=t.RowTitle=t.SubtitleModernize=t.Subtitle=t.Header=t.Caption=t.BodyText=void 0;const n=i(98278);Object.defineProperty(t,"BodyTextSize",{enumerable:!0,get:function(){return n.BodyTextSize}}),Object.defineProperty(t,"HeaderSize",{enumerable:!0,get:function(){return n.HeaderSize}}),Object.defineProperty(t,"TextThemeColor",{enumerable:!0,get:function(){return n.TextThemeColor}});const o=i(71639),s=i(6658),a=i(29130),r=i(11010),l=i(71190),c=i(34537),d=i(212);class u extends l.default{_textStyles(){return[this.props.bold?r.default.bodyBoldFontStyle(this._currentTheme,this.props.size):r.default.bodyFontStyle(this._currentTheme,this.props.size)]}}t.BodyText=u;class g extends l.default{_textStyles(){let e;if(e=this.props.small?[this.props.selected&&!this.props.modernizeConversationList?r.default.selectedCaptionSmallFontStyle(this._currentTheme):r.default.captionSmallFontStyle(this._currentTheme)]:[this.props.selected&&!this.props.modernizeConversationList?r.default.selectedCaptionFontStyle(this._currentTheme):r.default.captionFontStyle(this._currentTheme)],this.props.messageStreamFontSize&&this.props.messageStreamFontSize!==s.MessageStreamFontSize.Normal){const t=o.getStyleFromStyle(e,this.props.messageStreamFontSize);e.push(t)}return this.props.modernizeConversationList&&e.push(c.default.getTimeColorStyle(this._useDarkTheme(),this._useAccessibleTheme(),!!this.props.selected,this._themeStyles)),e}}t.Caption=g;class h extends l.default{_textStyles(){let e;switch(this.props.size){case n.HeaderSize.h0:e=this.props.light?r.default.fontStyleNext.h0Light:r.default.fontStyle.h0;break;case n.HeaderSize.h1:e=this.props.light?r.default.fontStyleNext.h1Light:r.default.fontStyle.h1;break;case n.HeaderSize.h2:e=this.props.light?r.default.fontStyleNext.h2Light:r.default.fontStyle.h2;break;case n.HeaderSize.h3:e=this.props.light?r.default.fontStyleNext.h3Light:r.default.fontStyle.h3;break;case n.HeaderSize.h4:e=this.props.light?r.default.fontStyleNext.h4Light:r.default.fontStyle.h4;break;default:case n.HeaderSize.h5:e=this.props.light?r.default.fontStyleNext.h5Light:r.default.fontStyle.h5}return[e,this._themeStyles.primaryTextColorStyle]}}t.Header=h;class p extends l.default{_textStyles(){return[r.default.callHeaderSubtitleFontStyle(this._currentTheme,this.props.v2)]}}t.Subtitle=p;class m extends l.default{_textStyles(){const e=d.default.themeStylesForTheme(this._currentTheme);return[c.default.getCategoryHeaderTextStyle(e,this.props.useMobileUI)]}}t.SubtitleModernize=m;class S extends l.default{_textStyles(){const e=[r.default.rowTitleFontStyle(this._currentTheme),this.props.textStyle];return this.props.disabled&&e.push(this._themeStyles.disabledTextColorStyle),e}}t.RowTitle=S;class C extends l.default{_textStyles(){const e=a.default.isSmallDeviceNoSubscription(this._getRootViewId())&&!1!==this.props.useSmallTitle;return[r.default.cardTitleFontStyle(this._currentTheme,e)]}}t.CardTitle=C;class f extends l.default{_textStyles(){return[r.default.panelHeaderFontStyle(this.props.landscape,this._currentTheme)]}}t.PanelHeader=f;class y extends l.default{_textStyles(){return[]}}t.ThemeAwareText=y},87331:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(38933),o=i(98356),s=i(16778),a=i(89391),r=i(46096),l=i(36237),c=i(15877),d=i(33754),u=i(89808),g=i(81760),h=i(40363),p=i(24576),m=i(53374),S=(0,c.lazyProperties)({container:()=>s.Styles.createButtonStyle({flexDirection:"row",alignItems:"center"}),toggleSwitch:()=>s.Styles.createViewStyle({flexDirection:"row",borderRadius:15,marginVertical:8,height:30,width:50,backgroundColor:g.Color.gray300}),toggleSwitchAndroid:()=>s.Styles.createViewStyle({backgroundColor:g.Color.transparent,borderRadius:0,alignItems:"center",justifyContent:"center"}),toggleSwitchUWP:()=>s.Styles.createViewStyle({backgroundColor:g.Color.transparent,borderRadius:0,alignItems:"center",justifyContent:"center"}),toggleSwitchBackgroundWrapperAndroid:()=>s.Styles.createViewStyle({position:"absolute",top:8,left:8,width:34,height:14,borderRadius:7,backgroundColor:g.Color.gray300}),toggleSwitchBackgroundWrapperUWP:()=>s.Styles.createViewStyle({position:"absolute",top:6,left:5,width:40,height:18}),toggleSwitchBackground:()=>s.Styles.createViewStyle({position:"absolute",top:0,bottom:0,left:0,right:0,borderRadius:15}),toggleSwitchBackgroundAndroid:()=>s.Styles.createViewStyle({borderRadius:7}),toggleSwitchBackgroundUWP:()=>s.Styles.createViewStyle({borderRadius:10}),toggleKnob:()=>s.Styles.createViewStyle({top:2,height:26,width:26,borderRadius:13}),toggleKnobAndroid:()=>s.Styles.createViewStyle({top:0,height:24,width:24,borderRadius:12,borderWidth:2,borderStyle:"solid",backgroundColor:g.Color.gray300}),toggleKnobUWP:()=>s.Styles.createViewStyle({height:10,width:10,borderRadius:5})});class C extends p.default{constructor(){super(...arguments),this._onButtonRef=e=>{this._buttonRef=e||void 0},this._onKnobAnimatedViewRef=e=>{this._animatedKnobView=e||void 0},this._onBackgroundAnimatedViewRef=e=>{this._animatedBackgroundView=e||void 0},this._handleClick=e=>{e.stopPropagation(),this.props.onChange&&this.props.onChange(e,!this.props.isOn)}}_buildState(e,t){const i={colors:u.default.getGradientColors(),primaryBackgroundColorStyle:u.default.getPrimaryBackgroundColorStyle()};return t&&(i.useUwpToggleStyle=h.default.getPlatformType()===r.PlatformType.Windows&&a.default.getS4LUiFeatures().enableUwpToggleStyle,i.useUwpToggleStyle&&(this._uwpToggleBackgroundValue=new s.Animated.Value(e.isOn?1:0),this._uwpToggleBackgroundStyle=s.Styles.createAnimatedViewStyle({backgroundColor:this._uwpToggleBackgroundValue.interpolate({inputRange:[0,1],outputRange:[g.Color.gray300,u.default.getPrimaryColor()]})}))),i}componentDidUpdate(e,t,i){if(super.componentDidUpdate(e,t,i),this.props.isOn!==e.isOn){const e=m.default.newCauseId();l.log(r.LogTraceArea.SXAnimated,"ToggleSwitch.componentDidUpdate causeId: "+e);const t=[];this._backgroundAnimation&&this._backgroundAnimation.stop(),this._animatedKnobView&&t.push(this._animatedKnobView.getAnimation({x:{toValue:this.props.isOn?this._knobLeftOnValue(this.state.useUwpToggleStyle):this._knobLeftOffValue(this.state.useUwpToggleStyle),easing:o.Easing.SkypeShotgun,duration:o.Common.Duration.Tiny}},e)),this.state.useUwpToggleStyle&&this._uwpToggleBackgroundValue?(this._backgroundAnimation=o.timing.shotgun({value:this._uwpToggleBackgroundValue,toValue:this.props.isOn?1:0,duration:o.Common.Duration.Tiny}),t.push(this._backgroundAnimation)):this._animatedBackgroundView&&(this._backgroundAnimation=this._animatedBackgroundView.getAnimation({opacity:this.props.isOn?1:0},e),t.push(this._backgroundAnimation)),t.length&&o.parallel(t).start((()=>{delete this._backgroundAnimation}))}}render(){const e=[S.toggleKnob,this._themeStyles.primaryBackgroundColorStyle],t=[S.toggleSwitchBackground],i=[S.toggleSwitch];this.state.useUwpToggleStyle&&(i.push(S.toggleSwitchUWP),e.push(S.toggleKnobUWP,this._themeStyles.primaryBackgroundColorStyle),t.push(S.toggleSwitchBackgroundUWP));const a=this.state.useUwpToggleStyle?void 0:s.createElement(n.GradientView,{style:S.toggleSwitchBackground,direction:this._getContext().isRTL?n.GradientDirection.LEFT:n.GradientDirection.RIGHT,colors:this.state.colors});let r;r=this.state.useUwpToggleStyle?s.createElement(s.Animated.View,{key:"background",style:[t,this._uwpToggleBackgroundStyle]}):s.createElement(o.View,{key:"background",ref:this._onBackgroundAnimatedViewRef,style:t,opacity:this.props.isOn?1:0},a),this.state.useUwpToggleStyle&&(r=s.createElement(s.View,{key:"background",style:S.toggleSwitchBackgroundWrapperUWP},r));const l=[r,s.createElement(o.View,{key:"knob",ref:this._onKnobAnimatedViewRef,style:e,x:this.props.isOn?this._knobLeftOnValue(this.state.useUwpToggleStyle):this._knobLeftOffValue(this.state.useUwpToggleStyle),y:this.state.useUwpToggleStyle?-2:void 0})];let c;const u={style:i,key:"switch"};if(c=s.createElement(o.View,Object.assign({},u,{opacity:1}),l),this.props.disableInteraction)return c;let g,h,p;g=this.props.accessibilityLabel,h=this.props.isOn?d.getString("ToggleSwitch.OnText"):d.getString("ToggleSwitch.OffText"),p=[s.Types.AccessibilityTrait.CheckBox],this.props.isOn&&p.push(s.Types.AccessibilityTrait.Checked);const m=this.props.onChange?s.Button:s.View;return s.createElement(m,{style:S.container,onPress:this.props.onChange?this._handleClick:void 0,disabled:this.props.disable,disableTouchOpacityAnimation:!0,accessibilityLabel:g,accessibilityTraits:p,title:h,ref:this._onButtonRef},c)}_knobLeftOnValue(e){return e?this._getContext().isRTL?-11:11:22*(this._getContext().isRTL?-1:1)}_knobLeftOffValue(e){return e?this._getContext().isRTL?11:-11:2*(this._getContext().isRTL?-1:1)}requestFocus(){this._buttonRef&&this._buttonRef.requestFocus()}}t.default=C},99056:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(11009),s=i(77381),a=i(16582),r=i(49776),l=i(71499);class c extends s.default{constructor(){super(...arguments),this._updateAnchorRect=()=>{this._popupView&&this._popupView.updatePosition(this.state.config)},this._onPopupViewRef=e=>{this._popupView=e||void 0},this._getPopUpPositions=()=>[o.PopupAnchorPositon.Top],this._getAnchorInfo=()=>this.state.config,this._renderPopupContent=()=>{const{displayText:e,style:t,textColor:i}=this.state.config;return n.createElement(r.default,{displayText:e||"",style:t,textColor:i})}}_buildState(e,t){return{config:l.default.getToolTipConfig(this._getRootViewId())}}componentDidMount(){super.componentDidMount(),this._updateAnchorRect()}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.state.config!==t.config&&this.state.config&&this._updateAnchorRect()}render(){var e;return this.state.config&&this.state.config.displayText.length?n.createElement(a.default,{ref:this._onPopupViewRef,disablePositionAnimation:!0,getAnchorInfo:this._getAnchorInfo,getPopupPositions:this._getPopUpPositions,containerOffsetY:null!==(e=this.state.config.containerOffsetY)&&void 0!==e?e:5,renderPopup:this._renderPopupContent,showArrow:this.state.config.showArrow,arrowColor:this.state.config.arrowColor}):null}}t.default=c},66526:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(22854),a=i(2301),r=i(88117),l=i(92772);class c extends o.ComponentBase{render(){const e=r.default.getIconSize(this.props.size);return this.props.isOneOnOne?n.createElement(a.UserIcon,{userMri:this.props.mri,size:e.user,statusTypes:this.props.showStatus?l.contactAllowedStatuses():void 0,statusBorderColor:this.props.statusBorderColor}):n.createElement(s.ConversationIcon,{conversationId:this.props.mri,size:e.conversation})}}t.default=c},77524:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WideButton=void 0;const n=i(96486),o=i(16778),s=i(47261),a=i(81878),r=i(98278),l=i(44973),c=i(87134),d=i(39285),u=i(10117),g=i(15877),h=i(33754),p=i(15415),m=i(81760),S=i(11010),C=i(11828),f=i(34528),y=i(80837),_=i(19675),v=i(24576),b=(0,g.lazyProperties)({container:()=>o.Styles.createViewStyle({alignSelf:"stretch"}),buttonInner:()=>o.Styles.createViewStyle({justifyContent:"space-between",flexDirection:"row",minHeight:60,alignItems:"center",alignSelf:"stretch"}),iconStyleMargin:()=>o.Styles.createViewStyle({marginRight:10}),bottomTextLine:()=>o.Styles.createViewStyle({marginTop:2}),divider:()=>o.Styles.createViewStyle({position:"absolute",left:0,right:0,bottom:0,height:1}),rightLabelText:()=>o.Styles.createTextStyle({textAlignVertical:"center",marginLeft:6}),rightArrowView:()=>o.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:6,overflow:"visible"}),rightArrowText:()=>o.Styles.createViewStyle({backgroundColor:m.Color.transparent,overflow:"visible"})});class T extends v.default{constructor(){super(...arguments),this._handleOnClick=e=>{e.stopPropagation(),this.props.onPressed&&this.props.onPressed(e)},this._onHoverStart=()=>{this.isComponentMounted()&&this.setState({isHovering:!0})},this._onButtonRef=e=>{this._focussableComponentRef=e||void 0},this._onHoverEnd=()=>{this.isComponentMounted()&&this.setState({isHovering:!1})}}_buildState(e,t){let i={};return t&&(i.isHovering=!1),i}requestFocus(){this._focussableComponentRef&&this._focussableComponentRef.focus()}render(){var e,t;let i,g,m;if(this.props.icon){let s;const a=this.state.isHovering?this._themeColors.textHoverColor:this.props.isDestructive?this._themeColors.destructiveTextColor:void 0;s=n.isArray(this.props.icon)?n.map(this.props.icon,((e,t)=>({icon:e,color:a,opacity:t>0?.6:1}))):[{icon:this.props.icon,color:a}];const r=this.props.iconMargins||this.props.iconPadding?o.Styles.createViewStyle({marginLeft:null===(e=this.props.iconMargins)||void 0===e?void 0:e.left,marginRight:null===(t=this.props.iconMargins)||void 0===t?void 0:t.right,padding:this.props.iconPadding},!1):b.iconStyleMargin;i=o.createElement(d.default,{style:r},o.createElement(l.default,{icons:s,iconSize:this.props.iconSize}))}this.props.showSpinner?g=o.createElement(p.default,{size:r.SXActivityIndicatorSize.Small,tintColor:this._themeColors.primaryTextColor}):this.props.hideArrow||(g=o.createElement(d.default,{style:b.rightArrowView},o.createElement(u.default,{icon:f.navForwardIcon(),size:C.IconSize.size20,color:this._themeColors.disclosureArrowColor,style:b.rightArrowText}))),this.props.labelBottom&&(m=o.createElement(_.Caption,{style:b.bottomTextLine,numberOfLines:this.props.labelBottomSingleLine?1:2},this.props.labelBottom));const v=[this.props.useRegularFont?S.default.bodyFontStyle(this._currentTheme):S.default.rowTitleFontStyle(this._currentTheme),y.default.flexOne];this.props.disabled&&!this.props.showFullOpacityWhenDisabled?v.push(this._themeStyles.disabledTextColorStyle):this.props.isDestructive&&v.push(this._themeStyles.destructiveTextColorStyle),this.props.labelStyle&&v.push(this.props.labelStyle),this.state.isHovering&&v.push(this._themeStyles.textHoverColorStyle);let T=[b.buttonInner,y.default.pointerCursor];this.props.buttonStyles&&T.push(this.props.buttonStyles);const P=this.props.hideDivider?void 0:o.createElement(c.default,{style:b.divider});let A=this.props.accessibilityLabel;if(!A){const e=n.compact([this.props.label,this.props.labelBottom,this.props.labelRight]);A=n.join(e,", ")}this.props.disabled,!this._useLinkTrait()&&this.props.treatAsLink&&A&&(A+=", "+h.getString("Browser.OpenUrlInBrowserTitle"));const k=this._useLinkTrait()?"link":"button";return o.createElement(o.View,{style:[b.container,y.default.noncollapsibleView,this.props.style]},o.createElement(s.Pressable,{ref:this._onButtonRef,accessibilityLabel:A,accessibilityRole:k,style:T,onPress:this._handleOnClick,onLongPress:this.props.onLongPress,disabled:this.props.disabled,onHoverIn:this.props.disabled?void 0:this._onHoverStart,onHoverOut:this.props.disabled?void 0:this._onHoverEnd},o.createElement(a.HStack,{flex:1},i,o.createElement(a.VStack,{flex:1},o.createElement(o.Text,{style:v,numberOfLines:n.isUndefined(this.props.labelNumberOfLines)?2:this.props.labelNumberOfLines},this.props.label),m),o.createElement(_.RowTitle,{style:[this._themeStyles.secondaryTextColorStyle,b.rightLabelText],numberOfLines:2},this.props.labelRight),g)),P)}_useLinkTrait(){return this.props.treatAsLink&&!0}}t.WideButton=T},44228:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(3056),a=i(46096),r=i(11375),l=i(36237),c=i(47126),d=i(6250),u=i(80837),g=i(24576),h="row";class p extends g.default{constructor(){super(...arguments),this._focusedButtonIndex=0,this._mountedRefsMap=new d.default,this.handleFocusEvent=e=>(l.log(a.LogTraceArea.GenericUnsafe,"CustomActionMenuBase.handleFocusEvent"),e===r.FocusEvent.CustomActionMenuDisplayed&&(this.focusFirst(),!0)),this._onKeyPress=e=>{switch(e.keyCode){case c.default.UP:case c.default.LEFT:--this._focusedButtonIndex;break;case c.default.DOWN:case c.default.RIGHT:++this._focusedButtonIndex;break;default:return}const t=n.size(this._mountedRefsMap.allRefs());this._focusedButtonIndex<0?this._focusedButtonIndex=0:this._focusedButtonIndex>t-1&&(this._focusedButtonIndex=t-1);const i=this._mountedRefsMap.ref(h+this._focusedButtonIndex);i&&i.requestFocus(),e.preventDefault(),e.stopPropagation()}}focusFirst(){const e=this._mountedRefsMap.ref("row0");e&&e.requestFocus()}componentDidMount(){super.componentDidMount(),r.register(r.FocusEvent.CustomActionMenuDisplayed,this)}componentWillUnmount(){super.componentWillUnmount(),r.unregister(r.FocusEvent.CustomActionMenuDisplayed,this)}render(){return o.createElement(s.default,{isPresentedInMobileSheet:!0},o.createElement(o.View,{style:[this.props.style,u.default.flexOne],onKeyPress:this._onKeyPress},this._renderRows(this.props,this.state)))}_renderRows(e,t){const i=this._buildRows(e,t),o=i.length-1;let s=0;return n.map(i,((t,i)=>{const n=!t.nonInteractive,a=Object.assign(Object.assign({},t.props),{ref:n?this._mountedRefsMap.onComponentRef(h+s):void 0,hideBorder:t.props.hideBorder||i===o,colorThemeOverride:e.colorThemeOverride});return n&&s++,t.builder(a)}))}}t.default=p},11734:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(87134);class a extends o.ComponentBase{static rowHeight(e){return 1+(e.marginTop||0)+(e.marginBottom||0)}render(){return n.createElement(s.default,Object.assign({},this.props))}}t.default=a,a.buildRow=e=>n.createElement(a,Object.assign({},e))},52293:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GridAlignment=void 0;const n=i(96486),o=i(16778),s=i(44973),a=i(36400),r=i(15877),l=i(6250),c=i(81760),d=i(80837),u=i(19675),g=i(24576);var h;!function(e){e[e.Default=0]="Default",e[e.Center=1]="Center"}(h=t.GridAlignment||(t.GridAlignment={}));const p=(0,r.lazyProperties)({buttonStyle:()=>o.Styles.createViewStyle({height:80,alignSelf:"stretch",alignItems:"center",justifyContent:"center",backgroundColor:c.Color.transparent}),tabTitle:()=>o.Styles.createTextStyle({textAlign:"center",marginTop:5,height:28}),gridView:()=>o.Styles.createViewStyle({flexWrap:"wrap",flexDirection:"row",justifyContent:"space-around",alignItems:"center",marginTop:8,paddingHorizontal:10}),icon:()=>o.Styles.createViewStyle({width:40,height:40,borderRadius:8,alignItems:"center",justifyContent:"center"})});class m extends g.default{constructor(){super(...arguments),this._mountedRefsMap=new l.default,this._onLayout=e=>{this.state.viewWidth!==e.width&&this.setState({viewWidth:e.width})},this._renderButton=(e,t)=>{const i=n.isArray(e.icon)?e.icon:[e.icon];return o.createElement(o.View,{key:e.key,style:t},o.createElement(a.HoverableButton,{ref:this._mountedRefsMap.onComponentRef("griditem"+e.key),style:p.buttonStyle,title:e.title,onPress:e.onPress,activeOpacity:.8,accessibilityLabel:e.accessibilityLabel,disableHoverOpacityStyles:!0,hoverStyle:this._themeStyles.rowHoverViewStyle},o.createElement(o.View,{style:[p.icon,this._themeStyles.secondaryBackgroundColorStyle]},o.createElement(s.default,{icons:i})),o.createElement(u.Caption,{style:p.tabTitle,numberOfLines:2,allowFontScaling:!1,colorThemeOverride:this.props.colorThemeOverride},e.title)))},this._renderSpacer=(e,t)=>o.createElement(o.View,{key:e,style:t})}static rowHeight(e,t=4){if(!e)return 0;return 8+80*Math.ceil(e/t)}_buildState(e,t){const i={};return t&&(i.viewWidth=e.estimatedWidth||0),i}render(){let e;if(this.state.viewWidth){const t=this.props.buttonDescriptors,i=Math.min(t.length,this.props.columnCount||4),s=[o.Styles.createViewStyle({width:i>0?Math.floor((this.state.viewWidth-20)/i):this.state.viewWidth,alignItems:"center",justifyContent:"center"},!1),d.default.noncollapsibleView];if(e=n.map(this.props.buttonDescriptors,(e=>this._renderButton(e,s))),this.props.gridAlignment!==h.Center){const n=t.length%i==0?0:i-t.length%i;for(let t=0;t<n;t++)e.push(this._renderSpacer("spacer"+t,s))}}return o.createElement(o.View,{style:p.gridView,ignorePointerEvents:!0,onLayout:this._onLayout},e)}}t.default=m,m.buildRow=e=>o.createElement(m,Object.assign({},e))},63190:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(11930),s=i(15877),a=i(30124),r=i(19675),l=i(24576),c=(0,s.lazyProperties)({frame:()=>n.Styles.createViewStyle({minHeight:30}),innerContainer:()=>n.Styles.createViewStyle({flex:1,flexDirection:"row",alignItems:"center",marginHorizontal:10,paddingTop:10,paddingBottom:0}),innerContainerBottomBorder:()=>n.Styles.createViewStyle({borderBottomWidth:1}),innerContainerDesktop:()=>n.Styles.createViewStyle({marginHorizontal:15})});class d extends l.default{static getMenuItemHeight(){return 30}_buildState(e,t){return{isUsingStackNav:a.default.isUsingStackNavigationContext()}}render(){const e=[c.innerContainer];this.props.hideBorder||e.push(this._themeStyles.dividerBorderColorStyle,c.innerContainerBottomBorder),this.state.isUsingStackNav||e.push(c.innerContainerDesktop);const t=o.default.headerAccessibilityInfo(this.props.title);let i;return i=this.props.rowHeight?n.Styles.createViewStyle({height:this.props.rowHeight},!1):c.frame,n.createElement(n.View,{style:i},n.createElement(n.View,{style:e,accessibilityLabel:t.accessibilityLabel,importantForAccessibility:n.Types.ImportantForAccessibility.Yes,accessibilityTraits:t.accessibilityTraits},n.createElement(r.Subtitle,{colorThemeOverride:this.props.colorThemeOverride,accessibilityHidden:!0},this.props.title)))}}t.default=d,d.buildRow=e=>n.createElement(d,Object.assign({},e))},14953:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(7159),s=i(16778),a=i(62033),r=i(24490),l=i(46096),c=i(36237),d=i(15877),u=i(90631),g=i(79669),h=i(212),p=i(19675),m=i(24576),S=i(18037),C=i(97634),f=i(53374),y=(0,d.lazyProperties)({captionContainerBase:()=>s.Styles.createViewStyle({alignSelf:"stretch",alignItems:"center",justifyContent:"center",marginHorizontal:8}),captionContainerFixedHeight:()=>s.Styles.createViewStyle({height:40}),captionContainerFlexibleHeight:()=>s.Styles.createViewStyle({minHeight:40}),caption:()=>s.Styles.createTextStyle({textAlign:"center",alignSelf:"stretch"}),title:()=>s.Styles.createViewStyle({alignSelf:"stretch"})});class _ extends m.default{constructor(){super(...arguments),this._onBackButtonPressed=()=>{const e=f.default.newCauseId();return c.log(l.LogTraceArea.HardwareBackButton,"CustomActionMenuPopup._onBackButtonPressed, causeId: "+e),!!this.props.onDismiss&&(this.props.onDismiss(e),!0)}}_buildState(e){return{themeColors:n.isUndefined(e.colorThemeOverride)?S.default.themeColors():h.default.themeColorsForTheme(e.colorThemeOverride)}}componentDidMount(){super.componentDidMount(),a.default.subscribe(this._onBackButtonPressed)}componentWillUnmount(){super.componentWillUnmount(),a.default.unsubscribe(this._onBackButtonPressed)}render(){const e=this.props.menuHeight,t=this.props.staticContent||!e,i=this.props.title||this.props.headerConfig&&this.props.headerConfig.headerType!==r.HeaderType.Slim?s.createElement(u.SimplePanelHeader,{panelName:this.props.title,hideBottomBorder:!0,useCenteredControls:!0,style:y.title,rightButtons:this.props.headerConfig?this.props.headerConfig.rightButton:void 0,colorThemeOverride:this.props.colorThemeOverride,useTransparentBackground:!0}):void 0,n=this.props.subtitle?s.createElement(s.View,{style:[y.captionContainerBase,t?y.captionContainerFlexibleHeight:y.captionContainerFixedHeight]},s.createElement(p.Caption,{style:y.caption,colorThemeOverride:this.props.colorThemeOverride},this.props.subtitle)):void 0,a=(e||0)+(i?u.HeaderHeight:0)+(n?40:0),l=this.props.menuWidth?this.props.menuWidth:r.PopupWidth,c=l-(t?0:30),d=t?s.Styles.createViewStyle({minHeight:a,maxWidth:c},!1):s.Styles.createViewStyle({height:a,maxWidth:c},!1),h=this.props.useBlurredBackground?C.isDarkTheme(this._currentTheme)?o.BlurStyle.Dark:o.BlurStyle.ExtraLight:void 0,m=s.Styles.createViewStyle({width:l},!1),S=t?s.View:s.ScrollView;return s.createElement(g.default,{anchorPosition:this.props.anchorPosition,anchorOffset:this.props.anchorOffset,offset:this.props.offset,popupWidth:this.props.popupWidth,popupHeight:this.props.popupHeight,fillColor:this.props.backgroundColor?this.props.backgroundColor:this.state.themeColors.primaryBackgroundColor,strokeColor:this.state.themeColors.popupBorderColor,importantForAccessibility:s.Types.ImportantForAccessibility.No,popupAccessibilityTitle:this.props.title,popupBeakHeight:this.props.hidePopupArrow?0:void 0,popupBeakWidth:this.props.hidePopupArrow?0:void 0,blurBackgroundStyle:h,borderRadius:this.props.borderRadius},s.createElement(s.View,{style:d},i,s.createElement(S,{style:m},n,this.props.content)))}}t.default=_},81211:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(47204),s=i(62602),a=i(14953),r=i(46096),l=i(36237),c="customactionmenu";t.default=new class{show(e,t){if(l.log(r.LogTraceArea.GenericUnsafe,"CustomActionMenuPopupController.show causeId: "+t),this._showing&&(this.close(e.rootViewId),e.togglable))return;if(!e.anchor||!e.anchor())return l.error(r.LogTraceArea.GenericUnsafe,"CustomActionMenuPopupController.show, anchor is undefined!"),void this.close(e.rootViewId);if(!s.default.maybeMountedAnchor(e.anchor()))return l.error(r.LogTraceArea.GenericUnsafe,"CustomActionMenuPopupController.show, anchor is not mounted!"),void this.close(e.rootViewId);const i={getAnchor:()=>s.default.maybeMountedAnchor(e.anchor()),renderPopup:(t,i,o,s)=>{var c;return n.createElement(a.default,{anchorPosition:t,anchorOffset:i,offset:e.offset,popupWidth:o,popupHeight:s,title:null===(c=e.getTitle)||void 0===c?void 0:c.call(e),subtitle:e.getSubtitle?e.getSubtitle():void 0,hideSubtitleDivider:e.hideSubtitleDivider,content:e.content,headerConfig:e.headerConfig,staticContent:e.staticContent,hidePopupArrow:e.hidePopupArrow,colorThemeOverride:e.colorThemeOverride,menuHeight:e.menuHeight,menuWidth:e.menuWidth,backgroundColor:e.backgroundColor,borderRadius:e.borderRadius,useBlurredBackground:e.useBlurredBackground,onDismiss:t=>{l.log(r.LogTraceArea.GenericUnsafe,"CustomActionMenuPopupController.onHandleDismiss causeId: "+t),this.close(e.rootViewId)}})},positionPriorities:["bottom","top"],dismissIfShown:!0,onDismiss:()=>{var i;l.log(r.LogTraceArea.GenericUnsafe,"CustomActionMenuPopupController.onDismiss causeId: "+t),this.close(e.rootViewId),null===(i=e.onCloseMenu)||void 0===i||i.call(e,t)},rootViewId:e.rootViewId};this._showing=o.default.showPopup(i,c)}close(e){l.log(r.LogTraceArea.GenericUnsafe,"CustomActionMenuPopupController.close"),this._showing&&(this._showing=!1,o.default.dismissPopup(c,e))}}},53211:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CustomActionMenuRowType=void 0;const n=i(16778),o=i(98861),s=i(65110),a=i(10117),r=i(15877),l=i(74606),c=i(33754),d=i(89808),u=i(30124),g=i(39320),h=i(11010),p=i(11828),m=i(80837),S=i(19675),C=i(24576),f=i(87331);var y;!function(e){e[e.Default=1]="Default",e[e.Toggle=2]="Toggle",e[e.List=3]="List",e[e.Checkbox=4]="Checkbox",e[e.Alert=5]="Alert",e[e.Custom=6]="Custom"}(y=t.CustomActionMenuRowType||(t.CustomActionMenuRowType={}));const _=(0,r.lazyProperties)({frameStackNav:()=>n.Styles.createViewStyle({minHeight:80}),frameCompositeNav:()=>n.Styles.createViewStyle({minHeight:60}),innerContainer:()=>n.Styles.createViewStyle({flex:1,flexDirection:"row",alignItems:"center",marginHorizontal:10,paddingVertical:10,overflow:"visible"}),innerContainerBottomBorder:()=>n.Styles.createViewStyle({borderBottomWidth:1}),innerContainerDesktop:()=>n.Styles.createViewStyle({marginHorizontal:15}),icon:()=>n.Styles.createViewStyle({paddingRight:14,overflow:"visible"}),accessoryIcon:()=>n.Styles.createViewStyle({marginLeft:8}),chevron:()=>n.Styles.createTextStyle({marginTop:4}),button:()=>n.Styles.createButtonStyle({flexDirection:"row",alignItems:"stretch",marginLeft:10}),image:()=>n.Styles.createViewStyle({paddingRight:14,width:p.IconSize.size24,height:p.IconSize.size24}),titleRow:()=>n.Styles.createViewStyle({flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),subtitle:()=>n.Styles.createTextStyle({lineHeight:22}),rightSideText:()=>n.Styles.createTextStyle({flexShrink:0,textAlign:"right"}),newLabel:()=>n.Styles.createTextStyle({marginRight:5,marginLeft:-2})});class v extends C.default{constructor(){super(...arguments),this._onPress=()=>{var e,t;null===(t=(e=this.props).onRowPress)||void 0===t||t.call(e,this.props.itemId)},this._onContainerRef=e=>{var t,i;this._containerRef=e||void 0,null===(i=(t=this.props).onRef)||void 0===i||i.call(t,this._containerRef)},this._onMouseEnter=()=>{this.isComponentMounted()&&(this.state.isHovered||this.setState({isHovered:!0}))},this._onMouseLeave=()=>{this.isComponentMounted()&&this.state.isHovered&&this.setState({isHovered:!1})}}_buildState(e,t){return{isUsingStackNav:u.default.isUsingStackNavigationContext(),userColor:d.default.getPrimaryColor()}}render(){const e=this.props.rowType===y.Alert&&!this._useAccessibleTheme();let t;if(this.props.subtitleText||this.props.keepSpaceForSubtitle){const i=this.state.isUsingStackNav?S.BodyText:S.Caption,o=[_.subtitle,m.default.noncollapsibleView];this._useAccessibleTheme()?o.push(this._themeStyles.secondaryTextColorStyle):e||this.props.treatAsLink?o.push(n.Styles.createTextStyle({color:this.state.userColor},!1)):o.push(this._themeStyles.secondaryTextColorStyle);const s={style:o,size:this.state.isUsingStackNav?S.BodyTextSize.SmallDeprecated:void 0};t=n.createElement(i,Object.assign({},s),this.props.subtitleText)}const i=this._showRightSideText()?n.createElement(S.Caption,{style:_.rightSideText},this.props.rightSideText):void 0;let r;if(this.props.rowType===y.Checkbox)r=n.createElement(l.default,{isOn:!!this.props.isSelected});else if(this.props.rowType===y.Toggle)r=n.createElement(f.default,{isOn:!!this.props.isSelected,disableInteraction:!!this.props.disabled,overlayColorAndroid:this.props.toggleOverlayColorAndroid});else if(this.props.rowType===y.List)r=n.createElement(s.default,{style:_.button,label:this.props.listLabel?this.props.listLabel:"",useBodyBoldLabel:!0,chevronStyle:_.chevron,onPress:this.props.onRowPress?this._onPress:void 0,importantForAccessibility:o.ImportantForAccessibility.No});else if(this.props.accessoryIcon){let t=e?this.state.userColor:this._themeColors.secondaryTextColor;this.props.accessoryIconColor&&(t=this.props.accessoryIconColor),r=n.createElement(a.default,{style:_.accessoryIcon,size:this.props.accessoryIconSize||p.IconSize.size20,color:t,icon:this.props.accessoryIcon})}const d=[];this.props.rowHeight?d.push(n.Styles.createViewStyle({height:this.props.rowHeight},!1)):d.push(this.state.isUsingStackNav?_.frameStackNav:_.frameCompositeNav),this.state.isHovered&&d.push(this.props.hoverStyle?this.props.hoverStyle:this._themeStyles.rowHoverViewStyle),this.props.style&&d.push(this.props.style);const u=[_.innerContainer];if(!this.props.hideBorder&&!e){const e=this.props.borderColor?n.Styles.createViewStyle({borderColor:this.props.borderColor},!1):this._themeStyles.dividerBorderColorStyle;u.push(e,_.innerContainerBottomBorder)}this.state.isUsingStackNav||u.push(_.innerContainerDesktop),this.props.containerStyleOverride&&u.push(this.props.containerStyleOverride);const C=[m.default.transparentBackground,m.default.flexNegativeOne];e&&!t?C.push(this.state.isUsingStackNav?h.default.fontStyle.body:h.default.fontStyle.caption):this.state.isUsingStackNav?C.push(h.default.fontStyle.secondaryButton):this.props.titleStyle&&C.push(this.props.titleStyle);const v=e?n.Styles.createTextStyle({color:this.state.userColor},!1):this._themeStyles.primaryTextColorStyle;C.push(this.props.titleTextColor?n.Styles.createTextStyle({color:this.props.titleTextColor},!1):v);const b=this.props.isNew&&n.createElement(g.default,{style:_.newLabel});let T;if(this.props.icon){const t=b?[_.icon,n.Styles.createViewStyle({paddingRight:8},!1)]:_.icon;let i=e?this.state.userColor:this._themeColors.primaryIconColor;this.props.iconColor&&(i=this.props.iconColor),T=n.createElement(a.default,{style:t,size:this.props.iconSize||p.IconSize.size24,color:i,icon:this.props.icon})}else this.props.imageSource&&(T=n.createElement(n.Image,{style:_.image,source:this.props.imageSource}));const P=this.props.onRowPress?n.Button:n.View;let A,k=this.props.accessibilityLabel;if(!this._useLinkTrait()&&this.props.treatAsLink&&(k=k||this.props.titleText+(this.props.subtitleText?", "+this.props.subtitleText:""),k&&(k+=", "+c.getString("Browser.OpenUrlInBrowserTitle"))),this.props.isSelected&&!this.props.suppressSelectedAccessibilityLabel&&(k+=", "+c.getString("Global.SelectedAccessibilityLabel")),e){const e=[m.default.absoluteFill,n.Styles.createViewStyle({backgroundColor:this.state.userColor,opacity:.2},!1)];A=n.createElement(n.View,{style:e})}const I=this.props.titleText?n.createElement(n.Text,{style:C},this.props.titleText):void 0,w=this.props.rowType===y.Custom?this.props.customElement:[T,b,n.createElement(n.View,{style:m.default.flexOne},n.createElement(n.View,{style:_.titleRow},I,i),t),r];return n.createElement(P,{style:d,ref:this._onContainerRef,onPress:this.props.onRowPress?this._onPress:void 0,accessibilityLabel:this.props.accessibilityLabel,accessibilityTraits:this._useLinkTrait()?n.Types.AccessibilityTrait.Link:void 0,disabled:!!this.props.disabled,title:this.props.tooltip},A,n.createElement(n.View,{style:u,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},w))}requestFocus(){this._containerRef&&this._containerRef.requestFocus()}_showRightSideText(){return this.props.rightSideText&&(!this.props.rowType||this.props.rowType===y.Default||this.props.rowType===y.Alert)}_useLinkTrait(){return this.props.treatAsLink&&!0}static getMenuItemHeight(){return 1+(u.default.isUsingStackNavigationContextNoSubscription()?80:60)}}t.default=v,v.buildRow=e=>n.createElement(v,Object.assign({},e))},7581:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(31844),s=i(7159),a=i(98356),r=i(16778),l=i(62033),c=i(3056),d=i(98278),u=i(24490),g=i(13560),h=i(4336),p=i(37490),m=i(87134),S=i(46096),C=i(11375),f=i(36237),y=i(10400),_=i(15877),v=i(33754),b=i(29130),T=i(51070),P=i(36150),A=i(90631),k=i(81760),I=i(40363),w=i(11828),N=i(80837),M=i(212),E=i(60305),x=i(19675),L=i(24576),R=i(97634),D=i(12770),B=i(53374),O=i(73877),F=(0,_.lazyProperties)({frame:()=>r.Styles.createViewStyle({position:"absolute",top:0,right:0,left:0,bottom:0,alignItems:"center",justifyContent:"center"}),background:()=>r.Styles.createViewStyle({position:"absolute",top:0,right:0,left:0,bottom:0,backgroundColor:k.Color.blackOverlay50}),menuContainer:()=>r.Styles.createViewStyle({position:"absolute",bottom:0,right:0,left:0}),menuContainerBackground:()=>r.Styles.createViewStyle({position:"absolute",bottom:-0,right:0,left:0,top:0,borderTopLeftRadius:d.CustomActionSheetBorderRadius,borderTopRightRadius:d.CustomActionSheetBorderRadius}),menuContainerCentered:()=>r.Styles.createViewStyle({borderRadius:d.CustomActionSheetBorderRadius}),caption:()=>r.Styles.createTextStyle({textAlign:"center",alignSelf:"stretch",marginBottom:8,marginHorizontal:8}),defaultWidthStyle:()=>r.Styles.createViewStyle({width:h.DefaultWidth}),grabberViewContainer:()=>r.Styles.createViewStyle({alignSelf:"stretch",height:25,alignItems:"center",justifyContent:"center"}),grabber:()=>r.Styles.createViewStyle({width:40,height:6,borderRadius:3,opacity:.2})});class V extends L.default{constructor(){super(...arguments),this._renderSlimHeaderGrabber=I.default.getPlatformType()===S.PlatformType.iOS,this._animationInProgress=!1,this._containerYPositionValue=new r.Animated.Value(99999),this._containerAnimationStyle=r.Styles.createAnimatedViewStyle({transform:[{translateY:this._containerYPositionValue}]}),this._backgroundOpacityValue=new r.Animated.Value(0),this._backgroundOpacityStyle=r.Styles.createAnimatedViewStyle({opacity:this._backgroundOpacityValue}),this._isDragging=!1,this._contentTransform=0,this._onBackButtonPressed=()=>{var e,t;const i=B.default.newCauseId();return f.log(S.LogTraceArea.HardwareBackButton,"MobileCustomActionMenuContainer._onBackButtonPressed, causeId: "+i),this.state.visibleConfiguration?(null===(t=(e=this.state.visibleConfiguration).onCloseMenu)||void 0===t||t.call(e,i),f.log(S.LogTraceArea.HardwareBackButton,"goBack: true componentId: MobileCustomActionMenuContainer, causeId: "+i),!0):(f.log(S.LogTraceArea.HardwareBackButton,"goBack: false componentId: MobileCustomActionMenuContainer"),!1)},this._onBackgroundPressed=e=>{e.stopPropagation();const t=B.default.newCauseId();f.log(S.LogTraceArea.GenericUnsafe,"MobileCustomActionMenuContainer._onBackgroundPressed, causeId: "+t),g.default.close(this._getRootViewId(),t)},this._onContainerLayout=e=>{let t=A.HeaderHeight;this.state.visibleConfiguration&&this.state.visibleConfiguration.headerConfig&&this.state.visibleConfiguration.headerConfig.headerType===u.HeaderType.Slim&&(t=this._renderSlimHeaderGrabber?25:0);let i=e.height+t+this.state.safeBottomPadding;const n=this.state.useFullscreenLayoutIfNeeded&&i>=this.state.screenHeight-this.state.safeTopPadding;if(n&&(i=this.state.screenHeight),!this.state.containerHeight){const e=this.state.useCenteredLayout?V._centeredYOffset(i,this._getRootViewId()):i;f.log(S.LogTraceArea.GenericUnsafe,"MobileCustomActionMenuContainer._onContainerLayout, no previous container height, positioning container: "+e),this._containerYPositionValue.setValue(this.state.useCenteredLayout?V._centeredYOffset(i,this._getRootViewId()):i),this._backgroundOpacityValue.setValue(0)}this.state.containerHeight===i&&this.state.isFullScreenMode===n||(f.log(S.LogTraceArea.GenericUnsafe,"MobileCustomActionMenuContainer._onContainerLayout, updating container height: "+i),this.setState({isFullScreenMode:n,containerHeight:i}))},this._onHeaderRef=e=>{this._headerRef=e||void 0},this._dismiss=()=>{var e,t;const i=B.default.newCauseId();f.log(S.LogTraceArea.HardwareBackButton,"MobileCustomActionMenuContainer._dismiss, causeId: "+i),null===(t=null===(e=this.state.visibleConfiguration)||void 0===e?void 0:e.onCloseMenu)||void 0===t||t.call(e,i)},this._onPanVertical=e=>{let t=e.pageY-e.initialPageY,i=this._contentTransform+t;if(i<-0&&(i=-0),this._containerYPositionValue.setValue(i),this._isDragging||(this._isDragging=!0),e.isComplete)if(this._contentTransform+=t,e.velocityY>.1||this._contentTransform>this.state.containerHeight/2)this._dismiss();else{const e=B.default.newCauseId();f.log(S.LogTraceArea.GenericUnsafe,"MobileCustomActionMenuContainer._onPanVertical, causeId: "+e),this._showContainer(e)}}}_buildState(e,t){const i=this._getRootViewId(),n=E.default.useTabletUI(),s=g.default.getCurrent(),a={safeTopPadding:T.default.statusBarPadding(),safeBottomPadding:T.default.bottomSafeAreaInset(),configuration:s&&!s.useDesktopPopup?s:void 0,isKeyboardShown:y.default.isKeyboardSeen(),useFullscreenLayoutIfNeeded:b.default.getDeviceOrientation(i)===o.DeviceOrientation.Landscape&&!n,screenHeight:b.default.getHeight(i),safeAreaHorizontalPaddingStyle:T.default.horizontalPaddingStyle(d.HorizontalInsetDefault),windowWidth:O.default.measureWindow(this._getRootViewId()).width,useCenteredLayout:n,isMobileScreenReaderEnabled:P.default.isMobileScreenReaderEnabled()};return t&&(a.containerHeight=0),a}UNSAFE_componentWillUpdate(e,t,i){if(super.UNSAFE_componentWillUpdate(e,t,i),!this.state.configuration&&t.configuration)this._setConfigurationVisible(t.configuration);else if(this.state.configuration&&!t.configuration){const e=B.default.newCauseId();f.log(S.LogTraceArea.GenericUnsafe,"MobileCustomActionMenuContainer.UNSAFE_componentWillUpdate, configuration cleared, causeId: "+e),this._hideContainer(e,(()=>{this.isComponentMounted()&&this.setState({visibleConfiguration:void 0})}))}else if(this.state.configuration&&t.configuration&&this.state.configuration.content!==t.configuration.content){const e=B.default.newCauseId();f.log(S.LogTraceArea.GenericUnsafe,"MobileCustomActionMenuContainer.UNSAFE_componentWillUpdate, configuration updated, causeId: "+e),this._hideContainer(e,(()=>this._setConfigurationVisible(t.configuration)))}}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i);const n=this.state.visibleConfiguration&&!t.visibleConfiguration,o=!this.state.visibleConfiguration&&t.visibleConfiguration,s=this.state.visibleConfiguration&&t.visibleConfiguration&&this.state.visibleConfiguration!==t.visibleConfiguration&&this.state.visibleConfiguration.menuId!==t.visibleConfiguration.menuId,a=this.state.containerHeight&&!t.containerHeight;if(this.state.containerHeight&&n||s||a){const e=B.default.newCauseId();f.log(S.LogTraceArea.GenericUnsafe,"MobileCustomActionMenuContainer.componentDidUpdate visibleConfigSet: "+n+" visibleConfigChanged: "+s+" containerHeightSet: "+a+" containerHeight: "+(this.state.containerHeight!==t.containerHeight?t.containerHeight+" -> "+this.state.containerHeight:this.state.containerHeight)+" causeId: "+e),l.default.subscribe(this._onBackButtonPressed),n&&this.state.containerHeight&&(f.log(S.LogTraceArea.GenericUnsafe,"MobileCustomActionMenuContainer.componentDidUpdate, visibleConfigSet: true positioning container: "+this.state.containerHeight),this._containerYPositionValue.setValue(this.state.containerHeight)),this._showContainer(e,(()=>{this._headerRef?this._headerRef.requestFocus():C.setFocus(C.FocusEvent.CustomActionMenuDisplayed)}))}else o&&l.default.unsubscribe(this._onBackButtonPressed)}render(){var e,t;if(!this.state.visibleConfiguration)return null;if(this.state.visibleConfiguration.rootViewId!==this._getRootViewId())return null;const i=n.isUndefined(this.state.visibleConfiguration.colorThemeOverride)?this._themeStyles:M.default.themeStylesForTheme(this.state.visibleConfiguration.colorThemeOverride),o=r.Styles.createViewStyle({paddingTop:this.state.isFullScreenMode?this.state.safeTopPadding:0,paddingBottom:this.state.safeBottomPadding,height:this.state.containerHeight},!1),a=this.state.visibleConfiguration.backgroundColor?r.Styles.createViewStyle({backgroundColor:this.state.visibleConfiguration.backgroundColor},!1):void 0;let l,d;if(this.state.useCenteredLayout)l=[F.menuContainerCentered,i.primaryBackgroundColorStyle,a,this._containerAnimationStyle,o,F.defaultWidthStyle];else if(l=[F.menuContainer,o,this._containerAnimationStyle,N.default.overflowVisible],this.state.visibleConfiguration.useBlurredBackground){const e=this.state.visibleConfiguration.colorThemeOverride||this._currentTheme,t=R.isDarkTheme(e)?s.BlurStyle.Dark:s.BlurStyle.ExtraLight;d=r.createElement(s.BlurView,{style:F.menuContainerBackground,blurStyle:t})}else d=r.createElement(r.View,{style:[F.menuContainerBackground,i.primaryBackgroundColorStyle,a]});const g=this.state.visibleConfiguration.headerConfig,h=g&&g.hideCloseButton?void 0:{icon:w.SkypeIcon.ClosePanel,onPress:this._dismiss,title:v.getString("Global.CloseButtonTitle")},p=this.state.visibleConfiguration.getSubtitle?this.state.visibleConfiguration.getSubtitle(this.state.isFullScreenMode):void 0,S=p&&!this.state.visibleConfiguration.hideSubtitleDivider?r.createElement(m.default,{key:"divider",marginLeft:10,marginRight:10}):void 0,C=p?[r.createElement(x.Caption,{key:"caption",style:[F.caption,this.state.safeAreaHorizontalPaddingStyle],colorThemeOverride:this.state.visibleConfiguration.colorThemeOverride},p),S]:void 0;let f;const y=g&&g.headerType===u.HeaderType.Slim;y?this._renderSlimHeaderGrabber&&(f=r.createElement(r.GestureView,{style:F.grabberViewContainer,onPanVertical:this._onPanVertical,onTap:this._dismiss,accessibilityLabel:v.getString("Global.CloseButtonTitle"),accessibilityTraits:r.Types.AccessibilityTrait.Button},r.createElement(r.View,{style:[F.grabber,i.primaryViewColorStyle]}))):f=r.createElement(A.SimplePanelHeader,{ref:this._onHeaderRef,panelName:null===(t=(e=this.state.visibleConfiguration).getTitle)||void 0===t?void 0:t.call(e,this.state.isFullScreenMode),leftButton:h,rightButtons:g?g.rightButton:void 0,hideBottomBorder:!0,colorThemeOverride:this.state.visibleConfiguration.colorThemeOverride,useTransparentBackground:!0});const _=r.createElement(r.View,{style:this.state.safeAreaHorizontalPaddingStyle,onLayout:this._onContainerLayout},C,this.state.visibleConfiguration.content),b=this.state.visibleConfiguration.staticContent||!this.state.isFullScreenMode;let T=r.createElement(r.ScrollView,{style:N.default.flexOne,scrollEnabled:!b},_);b&&y&&!this.state.isMobileScreenReaderEnabled&&(T=r.createElement(r.GestureView,{onPanVertical:this._onPanVertical},T));const P=[F.background,this._backgroundOpacityStyle];return this.state.visibleConfiguration.useTransparentShim&&P.push(N.default.transparentBackground),r.createElement(c.default,{isPresentedInMobileSheet:!0},r.createElement(r.View,{style:F.frame,restrictFocusWithin:!0},r.createElement(r.Animated.View,{style:P,onPress:this._onBackgroundPressed,disableTouchOpacityAnimation:!0,importantForAccessibility:r.Types.ImportantForAccessibility.No}),r.createElement(r.Animated.View,{style:l},d,f,T)))}_showContainer(e,t){f.log(S.LogTraceArea.GenericUnsafe,"MobileCustomActionMenuContainer._showContainer, causeId: "+e),this._startContainerAnimation(0,1,t,e)}_hideContainer(e,t){f.log(S.LogTraceArea.GenericUnsafe,"MobileCustomActionMenuContainer._hideContainer, causeId: "+e);const i=this.state.useCenteredLayout?V._centeredYOffset(this.state.containerHeight,this._getRootViewId()):this.state.containerHeight;this._startContainerAnimation(i,0,t,e)}_setConfigurationVisible(e){f.log(S.LogTraceArea.GenericUnsafe,"MobileCustomActionMenuContainer._setConfigurationVisible"),this.isComponentMounted()&&(r.Modal.dismissAll(),this.setState({visibleConfiguration:e},(()=>D.default.setTimeout((()=>p.dismissAll()),20))))}_startContainerAnimation(e,t,i,n){f.log(S.LogTraceArea.GenericUnsafe,"MobileCustomActionMenuContainer._startContainerAnimation ytranslation: "+e+" backgroundOpacity: "+t+" animationInProgress: "+this._animationInProgress+" causeId: "+n),this._animationInProgress=!0,this._contentTransform=e;const o=[a.timing.easeOut({value:this._containerYPositionValue,toValue:e,useNativeDriver:!0}),a.timing.easeOut({value:this._backgroundOpacityValue,toValue:t,useNativeDriver:!0})];a.parallel(o).start((()=>{this._animationInProgress=!1,i&&i()}))}static _centeredYOffset(e,t){const i=O.default.measureWindow(t).height;return e?i-(i-e)/2:i}}t.default=V},76:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(44228);class o extends n.default{_buildRows(e,t){return e.rowBuilders}}t.default=o},10482:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(15069),s=i(16778),a=i(72105),r=i(89391),l=i(39119),c=i(90239),d=i(97775),u=i(11009),g=i(47204),h=i(62602),p=i(53143),m=i(21847),S=i(36659),C=i(10167),f=i(80843),y=i(68894),_=i(4604),v=i(13944),b=i(15877),T=i(33754),P=i(80622),A=i(89808),k=i(88273),I=i(18078),w=i(4735),N=i(29130),M=i(51070),E=i(81115),x=i(16392),L=i(22538),R=i(81760),D=i(11010),B=i(11828),O=i(80837),F=i(77806),V=i(17640),U=i(19675),H=i(24576),W=i(18037),z=i(12770),G=i(2301),K=i(67977),j=i(24956),q=i(25446),Q=i(72758),X=i(92772),J=i(53374),$=i(78440),Y="MeControlModal",Z=K.UserIconSize.Size40,ee=R.Color.gray300,te=(0,b.lazyProperties)({container:()=>s.Styles.createViewStyle({flexDirection:"row",paddingVertical:8,justifyContent:"space-between",overflow:"visible"}),controlsContainer:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"center",paddingLeft:8,paddingRight:16,overflow:"visible"}),leftControlsContainer:()=>s.Styles.createViewStyle({marginLeft:16,marginRight:8,overflow:"visible"}),rightControlsContainer:()=>s.Styles.createViewStyle({justifyContent:"flex-end"}),iconButtonText:()=>s.Styles.createViewStyle({margin:5}),syncIndicatorContainer:()=>s.Styles.createViewStyle({position:"absolute",bottom:-2,right:-2}),userButton:()=>s.Styles.createViewStyle({position:"relative",flexDirection:"row",justifyContent:"center",alignItems:"center",overflow:"visible",width:Z,height:Z}),buttonContainer:()=>s.Styles.createViewStyle({marginLeft:5}),topTabs:()=>(0,b.lazyProperties)({infoContainer:()=>s.Styles.createViewStyle({alignSelf:"stretch",alignItems:"flex-start",justifyContent:"center",flexDirection:"row",width:180}),firstLine:()=>s.Styles.createTextStyle({justifyContent:"flex-start",flexDirection:"row"}),balance:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"center",flexShrink:0,marginLeft:8}),moodTextFixedHeight:()=>s.Styles.createTextStyle({height:20})}),balanceInfoCaptionStyle:()=>s.Styles.createTextStyle({color:ee,paddingTop:1,lineHeight:19}),captionStyles:()=>s.Styles.createTextStyle({lineHeight:20}),limitArea:()=>s.Styles.createViewStyle({flexShrink:1})});class ie extends H.default{constructor(){super(...arguments),this.getUserIconRef=()=>this._myInfoButtonRef,this.openMeControl=()=>this._openMeControlPanel(),this._renderOptionalSyncIndicator=()=>{let e;return this.state.isSyncInProgress&&(e=s.createElement(s.View,{style:te.syncIndicatorContainer},s.createElement(F.default,{size:B.IconSize.size16,color:A.default.getPrimaryColorNoSubscription()}))),e},this._renderAvatar=e=>{const t=!0,i=s.createElement(G.UserIcon,{size:Z,userMri:I.default.getSkypeMri(),statusTypes:X.myAllowedStatuses(),statusBorderColor:this._themeColors.secondaryBackgroundColor,onBadgePress:this._showPresenceMenu,onBadgeRef:this._onBadgeRef,allowHoverChevronBadge:t}),a=ie._getEdgeScreenReaderNotice()+T.getString("UserIcon.MyInfo")+(n.isUndefined(this.state.userStatus)?"":", "+X.userStatusLabel(this.state.userStatus,this.state.gender));return s.createElement(d.default.Button,{anchorRef:this._onMyInfoButtonRef,style:[e,te.userButton,O.default.noncollapsibleView,O.default.pointerCursor],activeOpacity:.8,onPress:this._openMeControlPanel,onKeyPress:this._onAvatarKeyPress,tabIndex:0,coachMarkType:u.CoachMarkType.Profile,accessibilityLabel:a,accessibilityTraits:s.Types.AccessibilityTrait.Button,anchorAccessibilityLabel:a,onAnchorPress:this._openMeControlPanel,onContextMenu:this._onContextMenu,onBlur:o.BrowserEnvironment.isEngineEdgeHTML()?this._onMyInfoBlur:void 0,ref:this._onAvatarButtonRef},i,this._renderOptionalSyncIndicator())},this._onAvatarButtonRef=e=>{L.EnsureStarted(f.default).then((()=>{f.default.setAnchor(y.EngagementTooltipType.Profile,e)}))},this._onContextMenu=e=>{e.stopPropagation(),e.preventDefault(),this._showPresenceMenu(void 0,e)},this._showPresenceMenu=(e,t)=>{this._presenceBadge&&j.UserPresenceMenu.show((()=>this._presenceBadge),this._getRootViewId(),t,q.UserPresenceChangeOrigin.Avatar)},this._onOverflowButtonClick=e=>{this._overflowButton&&S.default.showOptionsMenu((()=>this._overflowButton),this._getRootViewId(),e,this._currentTheme)},this._openMeControlPanel=(e,t)=>{if(N.default.isSmallOrTinyScreenSize(this._getRootViewId()))w.default.navigateToMeControl(this._getRootViewId(),J.default.newCauseId(),x.StackNavigationDirection.Push,t);else{const e=s.createElement(m.default,{key:"DesktopMeControlPanel",userMri:I.default.getSkypeMri(),dialogId:Y,anchor:()=>this._myInfoButtonRef,isMoodMessageEditMode:!!t});$.default.maybeSetTooltipVisibility(!1),g.default.showModal(e,Y,{rootViewId:this._getRootViewId()})}},this._onAvatarKeyPress=e=>h.default.maybeHandleKeyPress(e,(()=>{this._openMeControlPanel()})),this._onBadgeRef=e=>{this._presenceBadge=e||void 0},this._onOverflowButtonRef=e=>{this._overflowButton=e||void 0},this._onMyInfoButtonRef=e=>{this._myInfoButtonRef=e||void 0},this._openBalanceStatePanel=()=>{w.default.navigateToBalanceStatePanel("DesktopNavigationHeader.fromTopLeftCorner",this._getRootViewId())},this._onMyInfoBlur=()=>{o.BrowserEnvironment.isEngineEdgeHTML()&&s.UserInterface.isNavigatingWithKeyboard()&&(ie._myInfoEdgeBlurCount++,2===ie._myInfoEdgeBlurCount&&this.forceUpdate())}}_buildState(e,t){let i,o,l;const d=this._getRootViewId(),u=Q.default.getFullUserProfileByMri(I.default.getSkypeMri());i=u.getDisplayName();const g=k.default.getStatus();o=n.includes(X.myAllowedStatuses(),g)?g:c.UserStatus.Online,l=u.gender;const h=[D.default.fontStyle.caption,te.captionStyles],p=P.getMoodMessageInfo(u.mood,W.default.themeStyles(),W.default.themeColors(),h),m={unreadAlertsCount:a.default.getUnreadAlertsCount(),shouldShowUpdateBadge:C.default.shouldShowUpdateBadge(),isHeartEntryPointEnabled:r.default.getConfigSettings().brb.enableHeartEntryPoint,isSyncInProgress:V.default.isSyncingConversationList()||V.default.isSyncingMessages(),shouldShowUpdateReminder:C.default.shouldShowUpdateReminder(),responsiveWidth:N.default.getResponsiveWidth(d),gradientColors:A.default.getSubtleGradientColors(),statusBarHeight:s.StatusBar.isOverlay()?M.default.statusBarHeight():0,userDisplayName:i,userStatus:o,gender:l,moodInfo:p,creditEntitlement:_.default.getCreditEntitlement()};return t&&(m.skypeMri=I.default.getSkypeMri()),m}componentDidMount(){super.componentDidMount(),ie._isFirstMount&&(z.default.setTimeout((()=>{this._myInfoButtonRef&&this._myInfoButtonRef.requestFocus()}),250),ie._isFirstMount=!1),p.default.addWebFeebackToast({})}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i);const n=this._badgeCount(this.state),o=this._badgeCount(t);if(o!==n){const e=T.getString("Hub.NotificationCounterScreenReaderLabel",{count:o});s.Accessibility.announceForAccessibility(e)}}render(){const e=[te.container],t=[te.controlsContainer,te.rightControlsContainer];this.state.statusBarHeight&&e.push(E.default.paddingTopStyle(this.state.statusBarHeight+12)),this.props.style&&e.push(this.props.style);const i=this._renderLeftControls(te.leftControlsContainer)||s.createElement(s.View,{style:te.controlsContainer}),n=this._renderRightControls(),o=n?s.createElement(s.View,{key:"rightControls",style:t},n):void 0,a=this._renderCenterControls();return s.createElement(s.View,{key:"desktopNavigation",style:e},i,a,o)}_renderLeftControls(e){return this._renderAvatar(e)}_renderCenterControls(){return s.createElement(s.View,{key:"centerControls",style:[O.default.flexOne,te.topTabs.infoContainer]},s.createElement(s.View,{style:O.default.flexOne},this._getUserNameControl(),this._getMoodMessageControl()))}_getUserNameControl(){const e=[O.default.flexNegativeOne,this._themeStyles.primaryTextColorStyle,D.default.fontStyle.semibold14,te.captionStyles];return s.createElement(s.View,{style:te.topTabs.firstLine},s.createElement(s.Button,{style:te.limitArea,accessibilityLabel:this.state.userDisplayName,onPress:this._openMeControlPanel},s.createElement(s.Text,{style:e,numberOfLines:1,ellipsizeMode:"tail"},this.state.userDisplayName)),this._renderOptionalBalanceInfo())}_getMoodMessageControl(){const{moodInfo:e}=this.state,t=!!(null==e?void 0:e.moodReact)&&!!e.moodString,i=t?null==e?void 0:e.moodString:T.getString("MyProfilePanel.SetStatusLabel"),n=t?null==e?void 0:e.moodLabel:T.getString("MyProfilePanel.SetStatusLabel"),o=[D.default.fontStyle.caption,te.topTabs.moodTextFixedHeight];return s.createElement(s.Button,{style:[O.default.pointerCursor,O.default.flexOne],onPress:e=>this._openMeControlPanel(e,!0),onKeyPress:this._onAvatarKeyPress,accessibilityLabel:n,accessibilityTraits:s.Types.AccessibilityTrait.Button,importantForAccessibility:s.Types.ImportantForAccessibility.Yes,title:i,tabIndex:0},s.createElement(s.Text,{style:(null==e?void 0:e.moodReact)&&t?te.topTabs.moodTextFixedHeight:o,numberOfLines:1,ellipsizeMode:"tail"},t?null==e?void 0:e.moodReact:T.getString("MyProfilePanel.SetStatusLabel")))}_renderRightControls(){return[this._renderOverflowButton()]}_renderOptionalBalanceInfo(){if(void 0===this.state.creditEntitlement)return null;let e,t,i;return l.hasUsableCredit(this.state.creditEntitlement)?(e=l.getFormattedBalance(this.state.creditEntitlement),i=T.getString("BalanceStatePanel.SkypeCreditAccessibilityText",{amount:e||""})):(t=te.balanceInfoCaptionStyle,e=l.getFormattedBalance(this.state.creditEntitlement),i=T.getString("BalanceStatePanel.SkypeCreditAccessibilityText",{amount:e||""})),s.createElement(s.Button,{style:te.topTabs.balance,accessibilityLabel:i,onPress:this._openBalanceStatePanel},s.createElement(U.Caption,{style:t},e))}_renderOverflowButton(){return s.createElement(v.default,{ref:this._onOverflowButtonRef,key:"overflow",style:te.buttonContainer,size:B.IconSize.size20,color:this._themeColors.headerIconColor,hoverColor:this._themeColors.iconHoverColor,icon:B.SkypeIcon.More,onPress:this._onOverflowButtonClick,title:T.getString("Global.MoreButtonTitle"),iconTextStyle:te.iconButtonText,accessibilityLabel:T.getString("Global.MoreOptions"),accessibilityTraits:[s.Types.AccessibilityTrait.Button,s.Types.AccessibilityTrait.HasPopup]})}_badgeCount(e){let t=e.unreadAlertsCount||0;return(e.shouldShowUpdateBadge||e.shouldShowUpdateReminder)&&(t+=1),t}static _getEdgeScreenReaderNotice(){return o.BrowserEnvironment.isEngineEdgeHTML()&&ie._myInfoEdgeBlurCount<2?T.getString("Global.AccessibilitySkipLink")+" "+T.getString("Global.AccessibilityDesktopSkipLink")+" ":""}}t.default=ie,ie._isFirstMount=!0,ie._myInfoEdgeBlurCount=0},98367:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(7499),s=i(53338),a=i(94224),r=i(98278),l=i(39549),c=i(46096),d=i(36237),u=i(33754),g=i(4735),h=i(30124),p=i(48199),m=i(24576),S=i(53374),C=i(77524);class f extends m.default{constructor(){super(...arguments),this._onArchive=e=>{e.stopPropagation();const t=S.default.newCauseId();d.log(c.LogTraceArea.GenericUnsafe,"ArchiveConversaionControl._archiveConversation, causeId: "+t),o.default.showIfRequired(this._getRootViewId()).then((()=>{g.default.navigateAfterArchivingConversation(this.props.conversationId,t,this._getContext()),p.default.isNavigationAnimationFinished().thenAsync((()=>{s.default.archiveConversation(this.props.conversationId,c.ArchiveConversationOrigin.ProfilePanel,this._getRootViewId())}))}))},this._onUnarchive=e=>{e.stopPropagation();const t=S.default.newCauseId();d.log(c.LogTraceArea.GenericUnsafe,"ArchiveConversaionControl._onUnarchive, causeId: "+t),s.default.unarchiveConversation(this.props.conversationId,c.UnarchiveConversationOrigin.ProfilePanel),this.state.isUsingStackNavigationContext||g.default.navigateAfterUnarchivingConversation(this.props.conversationId,t,this._getContext())}}_buildState(e){const t=(0,l.default)().getConversation(e.conversationId);return{isArchived:!!t&&t.isArchived(),hasActiveCall:a.default.ActiveCallUIHelper.hasActiveCall(e.conversationId),isUsingStackNavigationContext:h.default.isUsingStackNavigationContext()}}render(){if(this.state.hasActiveCall)return null;const e=this.state.isArchived?u.getString("InfoPanel.UnhideConversationButtonLabel"):u.getString("InfoPanel.HideConversationButtonLabel");return n.createElement(C.WideButton,{label:e,onPressed:this.state.isArchived?this._onUnarchive:this._onArchive,hideArrow:!0,buttonStyles:this.props.shorterControlHeight?r.ListItem.small.shortHeightStyle:void 0})}}t.default=f},93343:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(22801),a=i(71830),r=i(11930),l=i(98278),c=i(39549),d=i(15877),u=i(33754),g=i(19675),h=i(24576),p=(0,d.lazyProperties)({notificationControlContainer:()=>n.Styles.createViewStyle({overflow:"visible",alignSelf:"stretch"}),notificationsSettingContainer:()=>n.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderBottomWidth:1,paddingTop:1}),smartNotificationsLabelContainer:()=>n.Styles.createViewStyle({flex:1,alignItems:"stretch",alignSelf:"center"})});class m extends h.default{constructor(){super(...arguments),this._onChangeEnableNotifications=(e,t)=>{if(this.state.conversationIsOneOnOne)t?this._setNotificationLevel(a.SubscriptionTypes.Loud):this._setNotificationLevel(a.SubscriptionTypes.Muted),this.setState({enableNotifications:t});else{let e={};t&&!this.state.enableImportantNotifications?(e.disableImportantNotificationSwitch=!1,this._setNotificationLevel(a.SubscriptionTypes.Loud)):t||this.state.enableImportantNotifications?!t&&this.state.enableImportantNotifications&&(e.disableImportantNotificationSwitch=!0,e.enableImportantNotifications=!1,this._setNotificationLevel(a.SubscriptionTypes.Muted)):(e.disableImportantNotificationSwitch=!0,this._setNotificationLevel(a.SubscriptionTypes.Muted)),e.enableNotifications=t,this.setState(e)}},this._onChangeEnableImportantNotifications=(e,t)=>{this.state.conversationIsOneOnOne||(t&&this.state.enableNotifications?(this.setState({enableImportantNotifications:t}),this._setNotificationLevel(a.SubscriptionTypes.Normal)):!t&&this.state.enableNotifications&&(this.setState({enableImportantNotifications:t}),this._setNotificationLevel(a.SubscriptionTypes.Loud)))}}_buildState(e,t){const i={},n=(0,c.default)().getConversation(e.conversationId);n&&(i.conversationSubscription=n.getSubscription(),i.conversationIsOneOnOne=n.isOneOnOne());const o=this.props;if(t||e.conversationId!==o.conversationId)switch(i.conversationSubscription){case a.SubscriptionTypes.Muted:i.enableNotifications=!1,i.enableImportantNotifications=!1,i.disableImportantNotificationSwitch=!0;break;case a.SubscriptionTypes.Loud:i.enableNotifications=!0,i.enableImportantNotifications=!1,i.disableImportantNotificationSwitch=!1;break;case a.SubscriptionTypes.Normal:i.enableNotifications=!0,i.enableImportantNotifications=!0,i.disableImportantNotificationSwitch=!1}return i}render(){const e=[],t=[p.notificationsSettingContainer,this._themeStyles.dividerBorderColorStyle,this.props.shorterControlHeight?l.ListItem.small.shortHeightStyle:l.ListItem.small.regularHeightStyle];if(e.push(n.createElement(o.default,{key:"enableNotifications",style:t,isOn:this.state.enableNotifications,accessibilityLabel:u.getString("Notifications.Notify"),onChange:this._onChangeEnableNotifications,disable:this.props.disabled},n.createElement(g.RowTitle,{disabled:this.props.disabled},u.getString("Notifications.Notify")))),!this.state.conversationIsOneOnOne){const i=[],s=this.state.disableImportantNotificationSwitch||this.props.disabled;s&&i.push(this._themeStyles.disabledTextColorStyle);const a=u.getString("Notifications.SmartNotifications"),l=u.getString("Notifications.SmartNotificationsHelper");e.push(n.createElement(o.default,{key:"enableImportantNotifications",style:t,isOn:this.state.enableImportantNotifications,accessibilityLabel:r.default.combinedAccessibilityLabel(a,l),onChange:this._onChangeEnableImportantNotifications,disable:s},n.createElement(n.View,{style:p.smartNotificationsLabelContainer},n.createElement(g.RowTitle,{disabled:s},a),n.createElement(g.Caption,{style:i},l))))}return n.createElement(n.View,{style:p.notificationControlContainer},e)}_setNotificationLevel(e){s.default.setConversationSubscription(this.props.conversationId,e)}}t.default=m},1889:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(88837),a=i(89808),r=i(27683),l=i(1118),c=i(4057),d=i(78262);class u extends s.ComponentBase{constructor(){super(...arguments),this._highlightedTextStyle=a.default.getTextColorStyleNoSubscription()}render(){const e=c.default.deburrLowerCase(this.props.displayText),t=c.default.deburrLowerCase(this.props.textToHighlight);if(""!==t&&-1!==e.indexOf(t)){const[i,n,s]=this._getHighlightedText(e,t);return o.createElement(o.Text,{style:this.props.containerStyles,numberOfLines:1,importantForAccessibility:this.props.importantForAccessibility},o.createElement(o.Text,{selectable:this.props.selectable,style:this.props.inlineTextStyle,numberOfLines:1},i),o.createElement(o.Text,{selectable:this.props.selectable,style:[this.props.inlineTextStyle,this._highlightedTextStyle],numberOfLines:1},n),o.createElement(o.Text,{selectable:this.props.selectable,style:this.props.inlineTextStyle,numberOfLines:1},s))}let i=this.props.displayText;if(r.default.isPossiblyPhoneNumber(i)&&r.default.isPossibleNumber(i)){i=r.default.parseAndFormat(e,r.PhoneNumberFormat.INTERNATIONAL)||i}return o.createElement(o.Text,{style:this.props.containerStyles,numberOfLines:1,selectable:this.props.selectable},i?i.split("\n",1):void 0)}_getHighlightedText(e,t){if(n.startsWith(e,"+")&&r.default.isPossibleNumber(e))return this._getHighlightedTextFromPhoneNumber(e,t);let i=0;i=this.props.highlightType===d.TextToHighlightType.PhoneNumber?e.indexOf(t):l.findIndexOfQueryInName(e,t);const o=i+this.props.textToHighlight.length-1;return[this.props.displayText.slice(0,i),this.props.displayText.slice(i,o+1),this.props.displayText.slice(o+1,this.props.displayText.length)]}_getHighlightedTextFromPhoneNumber(e,t){const i=r.default.parseAndFormat(e,r.PhoneNumberFormat.INTERNATIONAL);if(!i)return[e,"",""];const o="[ \\-\\(\\)]?";let s="([ \\-\\(\\)]?";n.each(t,(e=>{"+"===e&&(e="\\+"),s+=e+o})),s+=")";const a=new RegExp(s).exec(i);if(!a)return[i,"",""];const l=a.index,c=l+a[0].length;return[i.slice(0,l),i.slice(l,c),i.slice(c,i.length)]}}t.default=u},81374:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(38933),o=i(16778),s=i(44770),a=i(89391),r=i(96074),l=i(98278),c=i(32910),d=i(15877),u=i(33754),g=i(4735),h=i(82445),p=i(22222),m=i(81760),S=i(11010),C=i(11828),f=(0,d.lazyProperties)({container:()=>o.Styles.createViewStyle({position:"absolute",top:0,bottom:0,left:0,right:0,flex:1,backgroundColor:m.Color.blue}),content:()=>o.Styles.createViewStyle({flex:1,alignSelf:"center",alignItems:"center",justifyContent:"center",maxWidth:600,marginVertical:15}),illustration:()=>o.Styles.createViewStyle({height:235,width:321,marginBottom:30}),text:()=>o.Styles.createTextStyle({font:S.default.font.uiDisplayBold,color:m.Color.white,textAlign:"center",marginBottom:15}),title:()=>o.Styles.createTextStyle({fontSize:C.IconSize.size48,marginBottom:15}),subtitle:()=>o.Styles.createTextStyle({fontSize:C.IconSize.size16,marginBottom:90}),updateButton:()=>o.Styles.createButtonStyle({height:60,minWidth:300,marginBottom:15}),learnMoreButtonText:()=>o.Styles.createTextStyle({fontSize:C.IconSize.size14}),learnMoreButtonTextHover:()=>o.Styles.createTextStyle({textDecorationLine:"underline"})});class y extends r.default{constructor(){super(...arguments),this._goToLearnMorePage=()=>{const e=h.addSsoFlagToUrl(a.default.getConfigSettings().helpGoParam.upgradeLearnMore,!0);g.default.navigateToSsoWebFlow(e,"","",this._getRootViewId(),[],!0)},this._onLearnMoreHoverStart=()=>{this.setState({isLearnMoreButtonHovered:!0})},this._onLearnMoreHoverEnd=()=>{this.setState({isLearnMoreButtonHovered:!1})}}render(){const e=[f.text,f.learnMoreButtonText];return this.state.isLearnMoreButtonHovered&&e.push(f.learnMoreButtonTextHover),o.createElement(n.GradientView,{style:f.container,colors:l.BlueGradient,direction:n.GradientDirection.BOTTOM},o.createElement(o.View,{style:f.content},o.createElement(o.Image,{style:f.illustration,resizeMode:"contain",source:s.Collection.ELECTRON_UPDATE_ILLUSTRATION}),o.createElement(o.Text,{style:[f.text,f.title]},u.getString("ElectronForceUpgradeScreen.Title")),o.createElement(o.Text,{style:[f.text,f.subtitle]},u.getString("ElectronForceUpgradeScreen.Subtitle")),o.createElement(p.default,{buttonStyle:l.SXButtonStyle.LightFill,title:u.getString("ElectronForceUpgradeScreen.UpdateButton"),onPress:c.quitAndUpdate,style:f.updateButton}),o.createElement(o.Button,{onPress:this._goToLearnMorePage,onHoverStart:this._onLearnMoreHoverStart,onHoverEnd:this._onLearnMoreHoverEnd},o.createElement(o.Text,{style:e},u.getString("ElectronForceUpgradeScreen.LearnMoreButton")))))}}t.default=y},13214:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(88837),a=i(36237),r=i(15877),l=i(81760);(0,r.lazyProperties)({errorBar:()=>o.Styles.createViewStyle({bottom:0,left:0,right:0,padding:10,flexDirection:"row",alignSelf:"stretch",alignItems:"center",justifyContent:"center",opacity:.7}),text:()=>o.Styles.createTextStyle({flex:1,textAlign:"center"}),barErrorColor:()=>o.Styles.createViewStyle({backgroundColor:l.Color.red}),barWarningColor:()=>o.Styles.createViewStyle({backgroundColor:l.Color.yellow})});class c extends s.ComponentBase{constructor(){super(...arguments),this._warningCallback=(...e)=>{n.defer((()=>{this.isComponentMounted()&&this.setState({currentWarningCount:this.state.currentWarningCount+1})}))},this._errorCallback=(...e)=>{n.defer((()=>{this.isComponentMounted()&&this.setState({currentErrorCount:this.state.currentErrorCount+1})}))},this._onPress=()=>{this.setState({currentErrorCount:0,currentWarningCount:0})}}_buildState(e,t){return t?{currentErrorCount:0,currentWarningCount:0}:{}}componentDidMount(){super.componentDidMount()}componentWillUnmount(){super.componentWillUnmount(),a.devErrorEvent.unsubscribe(this._errorCallback),a.devWarningEvent.unsubscribe(this._warningCallback)}render(){return null}}t.default=c},85690:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(38933),s=i(16778),a=i(42826),r=i(82192),l=i(72105),c=i(34339),d=i(81169),u=i(71908),g=i(51077),h=i(71830),p=i(39549),m=i(16402),S=i(86374),C=i(52262),f=i(76679),y=i(70891),_=i(21444),v=i(40226),b=i(46096),T=i(74313),P=i(85609),A=i(10117),k=i(36237),I=i(15877),w=i(47662),N=i(33754),M=i(51072),E=i(23284),x=i(68080),L=i(66127),R=i(34537),D=i(23752),B=i(12762),O=i(6658),F=i(89808),V=i(18078),U=i(4735),H=i(30124),W=i(14008),z=i(17282),G=(i(85639),i(29143),i(46200)),K=i(93003),j=i(33714),q=i(81760),Q=i(11010),X=i(11828),J=i(34528),$=i(80837),Y=i(60305),Z=i(19675),ee=i(24576),te=i(12770),ie=i(2301),ne=i(67977),oe=i(53374);var se,ae,re;!function(e){e[e.Simple=1]="Simple",e[e.SecondaryButtons=2]="SecondaryButtons"}(se||(se={})),function(e){e[e.Standard=1]="Standard",e[e.Simple=2]="Simple"}(ae||(ae={})),function(e){e[e.Standard=1]="Standard",e[e.WhiteOnBlue=2]="WhiteOnBlue"}(re||(re={}));const le=O.messageTextLineHeight,ce=24,de=(0,I.lazyProperties)({cardBody:()=>s.Styles.createViewStyle({flex:1,flexDirection:"row",alignItems:"center",backgroundColor:q.Color.transparent}),container:()=>s.Styles.createViewStyle({flexDirection:"row",flex:1,paddingLeft:8,paddingRight:10,alignItems:"center"}),containerMobileModernize:()=>s.Styles.createViewStyle({flexDirection:"row",flex:1,paddingHorizontal:16,paddingVertical:10,alignItems:"center"}),containerWithSimpleLayout:()=>s.Styles.createViewStyle({paddingLeft:15}),lightThemeSimpleLayoutBorder:()=>s.Styles.createViewStyle({borderColor:q.Color.gray50}),darkThemeSimpleLayoutBorder:()=>s.Styles.createViewStyle({borderColor:q.Color.gray400}),blueBackground:()=>s.Styles.createViewStyle({backgroundColor:q.Color.blue}),cardBottomBorder:()=>s.Styles.createViewStyle({borderBottomWidth:10}),cardText:()=>s.Styles.createTextStyle({lineHeight:le}),cardContentContainer:()=>s.Styles.createViewStyle({maxHeight:le}),userIcon:()=>s.Styles.createViewStyle({marginRight:20,overflow:"visible",paddingBottom:5,paddingRight:5}),contentDetailsContainer:()=>s.Styles.createViewStyle({flexDirection:"row"}),contentDetailsText:()=>s.Styles.createTextStyle({flex:1,lineHeight:le}),whiteText:()=>s.Styles.createTextStyle({color:q.Color.white}),timestampText:()=>s.Styles.createTextStyle({flex:0,marginRight:8}),optionalSecondaryContentContainer:()=>s.Styles.createViewStyle({marginLeft:8,marginVertical:4}),optionalSecondaryContentContainerEngagement:()=>s.Styles.createViewStyle({alignSelf:"center"}),thumbnailContainer:()=>s.Styles.createViewStyle({alignItems:"center",justifyContent:"center"}),iconContainer:()=>s.Styles.createViewStyle({alignItems:"center",justifyContent:"center",borderRadius:30,height:60,width:60,backgroundColor:q.Color.gray300}),engagementIconStyle:()=>s.Styles.createImageStyle({flex:0,alignSelf:"stretch",width:ne.UserIconSize.Size60,height:ne.UserIconSize.Size60,justifyContent:"center",alignItems:"center",borderRadius:10}),engagementIconStyleDesktop:()=>s.Styles.createImageStyle({width:ne.UserIconSize.Size40,height:ne.UserIconSize.Size40}),engagementIconStyleCompact:()=>s.Styles.createImageStyle({width:ce,height:ce}),alertIconContainer:()=>s.Styles.createViewStyle({position:"absolute",bottom:2,right:2}),alertMentionQuoteIconContainer:()=>s.Styles.createViewStyle({backgroundColor:q.Color.gray300,width:ce,height:ce,borderRadius:12,bottom:0,right:0,justifyContent:"center"}),alertMentionIcon:()=>s.Styles.createTextStyle({top:-1}),userIconBadge:()=>s.Styles.createViewStyle({borderRadius:15}),userIconBorder:()=>s.Styles.createViewStyle({padding:2}),compactUserIconContainer:()=>s.Styles.createViewStyle({height:ce,width:ce,alignItems:"center",justifyContent:"center",overflow:"visible",marginRight:8}),compositeNav:()=>(0,I.lazyProperties)({container:()=>s.Styles.createViewStyle({paddingLeft:10,paddingRight:15,paddingVertical:10,alignItems:"flex-start"}),userIcon:()=>s.Styles.createViewStyle({marginRight:10,marginTop:5}),iconContainer:()=>s.Styles.createViewStyle({borderRadius:20,height:40,width:40}),alertIconContainer:()=>s.Styles.createViewStyle({bottom:0,right:0}),alertMentionQuoteIconContainer:()=>s.Styles.createViewStyle({bottom:-2,right:-2})}),experimentalNav:()=>(0,I.lazyProperties)({userIcon:()=>s.Styles.createViewStyle({marginRight:8,marginTop:5}),container:()=>s.Styles.createViewStyle({paddingVertical:10,alignItems:"flex-start"}),containerHorizontalPaddingClassic:()=>s.Styles.createViewStyle({paddingLeft:10,paddingRight:10}),containerHorizontalPaddingModernize:()=>s.Styles.createViewStyle({paddingLeft:8,paddingRight:8}),optionalSecondaryContentContainer:()=>s.Styles.createViewStyle({marginLeft:2,marginVertical:4})}),ios:()=>(0,I.lazyProperties)({alertMentionIcon:()=>s.Styles.createTextStyle({top:-2})}),osx:()=>(0,I.lazyProperties)({alertMentionIcon:()=>s.Styles.createTextStyle({top:0})}),unreadBadge:()=>(0,I.lazyProperties)({circle:()=>s.Styles.createViewStyle({marginTop:1,width:8,height:8,borderRadius:4}),badgeContainer:()=>s.Styles.createViewStyle({alignItems:"center",justifyContent:"center"})}),badgeIcon:()=>s.Styles.createViewStyle({alignItems:"center"})});class ue extends ee.default{constructor(){super(...arguments),this._hoverStart=()=>{this.setState({isHovering:!0})},this._hoverEnd=()=>{this.setState({isHovering:!1})},this._onPress=e=>{this._onCompletePress(e)},this._onCompletePress=e=>{const t=oe.default.newCauseId();if(k.log(b.LogTraceArea.Navigation,"AlertCard._onPress, causeId: "+t),k.track(new r.AlertClicked(this._getAlertTypeForTelemetryEvent())),this.state.isReaction&&this.state.messageToDisplay){const e=(0,p.default)().getConversation(this.state.messageToDisplay.conversationId);e&&!e.isHighlightsThread()&&k.track(new G.ReactionsSummaryViewed(this.state.messageToDisplay))}if(this._markRead(),this.state.messageToDisplay){const e=(0,p.default)().getConversation(this.state.messageToDisplay.conversationId);e&&e.isReactionsThread()?x.default.showWithMessageConfig({initialMessage:this.state.messageToDisplay,origin:b.NavigationMediaViewerOrigin.Unknown,rootViewId:this._getRootViewId()}):this.props.alert.scheduledCallInfo&&this.props.alert.scheduledCallInfo.type===j.ScheduleCallAlertTypes.Canceled||U.default.navigateToMessage(this.state.messageToDisplay,{shouldResetNavStack:!1,shouldFlattenNavOnInteraction:!0,causeId:t,origin:b.NavigationConversationOrigin.AlertsPanel},this._getRootViewId())}e.stopPropagation(),this.props.onAlertCardPress&&this.props.onAlertCardPress(this.props.alert)}}_buildState(e,t){const i=e.alert.alertType===a.AlertType.Reaction||e.alert.alertType===a.AlertType.AdditionalReaction;let n,o,s,r,l,c,u=!1,m="",y=e.alert.message,_=!1;if(y){const t=(0,p.default)().getConversation(y.conversationId);n=y.creator;const s=S.decode(y),l=s.getFirstUriObjectChild(B.UriObjectNode);if(l&&(r=l.getNameForUI()),u=s.hasOnlyQuotedContent(),i){c=f.getReactionAlertAccessibilityLabel(y);const e=(0,d.chain)(y.getEmotionAnnotations(),(0,d.filter)((e=>e.key!==g.MessageAnnotations.ViewCount&&e.key!==g.MessageAnnotations.ReactionsConsumptionHorizon)),(0,d.map)((e=>e.users)),(0,d.flatten)());o=f.getReactionsDisplayInfo(e,{objectType:g.getMessageTypeGroup(y),isQuoteOnly:u,isPushNotification:!1},s),o.mostRecentMri&&(n=o.mostRecentMri)}else e.alert.alertType===a.AlertType.HighPriorityMessage?o=f.getMessageDisplayInfo(y,u):e.alert.alertType===a.AlertType.ScheduledCall&&e.alert.scheduledCallInfo&&!h.isThread(e.alert.scheduledCallInfo.initiator)&&(o=f.getScheduledCallDisplayInfo(e.alert.scheduledCallInfo),n=e.alert.scheduledCallInfo.initiator);m=t&&!t.isOneOnOne()&&!t.isHighlightsThread()&&!t.isReactionsThread()&&C.default.getDisplayName(t.id)||""}else if(e.alert.alertType===a.AlertType.Engagement){o=void 0;const t=e.alert.popCardInfo;s={title:t&&t.title,text:t&&t.subtitle,placeholders:t&&t.placeholders,showOnlyTitle:t&&t.showOnlyTitle}}else if(e.alert.alertType===a.AlertType.Notice){o=void 0;const t=e.alert.noticeMessageInfo;s={title:t&&t.title,text:t&&t.text,placeholders:t&&t.placeholders,showOnlyTitle:t&&t.showOnlyTitle}}else if(e.alert.alertType===a.AlertType.NotificationPermission)o=void 0,l=N.getString("NotificationsPrompt.ShortText"),_=!0;else if(e.alert.alertType===a.AlertType.MissedCallbackReminder&&e.alert.missedCallbackReminderCalleeMri){o=void 0;const t=C.default.getDisplayName(e.alert.missedCallbackReminderCalleeMri);l=N.getString("Notifications.CallUserAgain",{user:t||""})}const v={isUsingStackNav:H.default.isUsingStackNavigationContext(),messageToDisplay:y,description:"",descriptionAccessibilityLabel:c,posterMri:n,isReaction:i,notificationDisplayInfo:o,engagementDisplayInfo:s,formattedTimestamp:this._getElapsedTimeAndUpdateTimer(e.alert.alertTime),hideTimestamp:_,displayFilenameForIcon:r,isQuoteOnlyMessage:u,quoteSymbol:J.getQuoteSymbol(),convDisplayName:m,headerTextOverride:l,colors:F.default.getGradientColors(),useTabletUI:Y.default.useTabletUI(),modernizeConversationList:L.default.canModernizeConversationList(),modernizeMobileTab:L.default.canModernizeMobileTab(),userColor:F.default.getColorInfo()};return t&&(v.isHovering=!1),v}_renderDisplayParts(){let e,t,i,n=se.Simple,r=[],l=[],d=ae.Standard,u=re.Standard,p=!1;const m=this._useCompactLayout();let S;S=m?ne.UserIconSize.Size24:this.state.modernizeMobileTab?ne.UserIconSize.Size64:this.state.isUsingStackNav?ne.UserIconSize.Size60:ne.UserIconSize.Size40;let C=s.createElement(ie.UserIcon,{size:S,userMri:this.state.posterMri,importantForAccessibility:s.Types.ImportantForAccessibility.NoHideDescendants});if(this.props.alert.isRead||(t=s.createElement(s.View,{style:de.unreadBadge.badgeContainer,accessibilityLabel:N.getString("AlertCard.UnreadAccessibilityLabel")},s.createElement(o.GradientView,{style:de.unreadBadge.circle,direction:o.GradientDirection.BOTTOM_RIGHT,colors:this.state.colors}))),this.state.messageToDisplay){this.props.alert.alertType!==a.AlertType.Reaction&&this.props.alert.alertType!==a.AlertType.AdditionalReaction||(i=this.state.descriptionAccessibilityLabel,this.props.alert.isRead||(i+=", "+N.getString("AlertCard.UnreadAccessibilityLabel")));const t=g.getMessageTypeGroup(this.state.messageToDisplay),n=[de.alertIconContainer,de.userIconBadge],o=[de.userIconBorder,de.userIconBadge];let r;switch(this.state.isUsingStackNav?n.push(this._themeStyles.primaryBackgroundColorStyle):(n.push(de.compositeNav.alertIconContainer),n.push(this._themeStyles.popoverBackgroundColorStyle)),this.state.isHovering&&o.push(this._themeStyles.rowHoverViewStyle),m||(r=s.createElement(s.View,{style:n},s.createElement(s.View,{style:o},s.createElement(ie.UserIcon,{size:ne.UserIconSize.Size24,userMri:this.state.posterMri,importantForAccessibility:s.Types.ImportantForAccessibility.NoHideDescendants})))),t){case g.MessageTypeGroups.Video:case g.MessageTypeGroups.Picture:const i=this._renderMediaThumbnail();i&&(e=r,C=i);break;case g.MessageTypeGroups.Audio:case g.MessageTypeGroups.Location:case g.MessageTypeGroups.SwiftCard:const n=this._renderIconThumbnail(t);n&&(e=r,C=n);break;case g.MessageTypeGroups.UriFile:const o=this._renderFileThumbnail();o&&(e=r,C=o);break;case g.MessageTypeGroups.Text:if(!this.state.isQuoteOnlyMessage){l=this._renderMessageParts()||[]}}}else if(this.props.alert.alertType===a.AlertType.OnboardingX||this.props.alert.isEngagementAlert()){let e;this.props.alert.alertType===a.AlertType.Notice&&this.props.alert.noticeMessageInfo&&(t=W.default.renderNoticeButton(this.props.alert.noticeMessageInfo,this._getRootViewId()),n=t?se.SecondaryButtons:se.Simple),this.props.alert.isEngagementAlert()&&this.state.engagementDisplayInfo?e=v.default.getFormattedAlertContent(this.state.engagementDisplayInfo,!0,n===se.SecondaryButtons):(e="\n"+this.state.description,i=N.getString("PopCards.NotificationHeader")+", "+(this.state.descriptionAccessibilityLabel||"")),r.push(s.createElement(Z.BodyText,{key:"messagePrefix",style:de.cardText},e))}else this.props.alert.alertType===a.AlertType.NotificationPermission&&(t=this._renderNotificationPermissionActionButton(),n=se.SecondaryButtons);const f=[de.engagementIconStyle];switch(m?f.push(de.engagementIconStyleCompact):this.state.isUsingStackNav||f.push(de.engagementIconStyleDesktop),this.props.alert.alertType){case a.AlertType.Notice:const t=this.props.alert.noticeMessageInfo;switch(t.contentType){case z.NoticeMessageContentType.Notice:C=s.createElement(T.default,{origin:"NoticeAlertIcon",style:f,containerStyle:f,resizeMode:"cover",source:t.iconUrl});break;case z.NoticeMessageContentType.NoticeWithAvatar:if(t.skypeId){const e=h.skypeIdToMri(h.asSkypeId(t.skypeId));C=s.createElement(ie.UserIcon,{size:S,statusTypes:t.showStatusIndicator?_.default.getAllowedUserStatuses():[],userMri:e,importantForAccessibility:s.Types.ImportantForAccessibility.NoHideDescendants})}}break;case a.AlertType.Engagement:this.props.alert.popCardInfo&&this.props.alert.popCardInfo.iconUrl&&(C=s.createElement(T.default,{origin:"EngagementAlertIcon",style:f,containerStyle:f,resizeMode:"cover",source:this.props.alert.popCardInfo.iconUrl}));break;case a.AlertType.NotificationPermission:C=void 0,d=ae.Simple,u=re.WhiteOnBlue,p=!1;break;case a.AlertType.ScheduledCall:d=ae.Standard,e=this._renderTextBadge(X.SkypeIcon.Schedule,X.IconSize.size16);break;case a.AlertType.MissedCallbackReminder:this.props.alert.missedCallbackReminderCalleeMri&&(e=this._renderTextBadge(X.SkypeIcon.CallStart,X.IconSize.size16),C=s.createElement(ie.UserIcon,{size:S,userMri:this.props.alert.missedCallbackReminderCalleeMri}))}if(this.props.alert.alertType===a.AlertType.HighPriorityMessage){let t=X.SkypeIcon.Blank;this.state.messageToDisplay&&(this.state.messageToDisplay.isCurrentUserQuoted()?t=this.state.quoteSymbol:this.state.messageToDisplay.isCurrentUserMentioned()&&(t=X.SkypeIcon.Mention)),e=this._renderTextBadge(t,X.IconSize.size16)}else if(this.props.alert.alertType===a.AlertType.Reaction&&!e){const t=this.props.alert.message&&this.props.alert.message.getReactions();if(t&&t.length&&(1===t.length||m)){const i=s.createElement(c.AnimatedEmoticon,{size:c.Size.Small,innerText:t[0].key,emoticonName:t[0].key,isStatic:!0});if(m)e=i;else{const t=[de.alertIconContainer];this.state.isUsingStackNav||t.push(de.compositeNav.alertIconContainer),e=s.createElement(s.View,{style:t},i)}}}return{layout:n,mainContentPartLayout:d,icon:m&&e?void 0:C,secondaryContent:t,extraHeaderText:r,messageContent:l,iconBadge:e,mainAccessibilityLabel:i,colorVariant:u,showBottomDelimiter:p}}_renderTextBadge(e,t){var i;const n=[de.alertIconContainer,de.alertMentionQuoteIconContainer];if(this.state.isUsingStackNav||(this._useCompactLayout()?n.push(de.compositeNav.alertIconContainer):n.push(de.compositeNav.alertMentionQuoteIconContainer)),!this.props.alert.isRead&&this.props.color){const e=s.Styles.createViewStyle({backgroundColor:this.props.color},!1);n.push(e)}return s.createElement(s.View,{style:n},s.createElement(A.default,{icon:e,color:q.Color.white,size:null!==(i=Q.default.controlFontSize.bodyBigDeprecated)&&void 0!==i?i:t,importantForAccessibility:s.Types.ImportantForAccessibility.No,style:de.badgeIcon}))}render(){const e=this._isPresentedInDesktopLeftNav(),t=this._renderDisplayParts(),i=[de.cardBody];let n=[de.contentDetailsText];const o=[this.state.modernizeMobileTab?de.containerMobileModernize:de.container,$.default.noncollapsibleView];let a,r,l,c;if(t.mainContentPartLayout===ae.Simple&&(o.push(de.containerWithSimpleLayout),t.showBottomDelimiter&&(i.push(de.cardBottomBorder),i.push(this._useDarkTheme()?de.darkThemeSimpleLayoutBorder:de.lightThemeSimpleLayoutBorder))),this.state.isUsingStackNav||(o.push(e?de.experimentalNav.container:de.compositeNav.container),e&&o.push(this.state.modernizeConversationList?de.experimentalNav.containerHorizontalPaddingModernize:de.experimentalNav.containerHorizontalPaddingClassic),this._isEngagementAlert()&&o.push($.default.alignItemsCenter)),t.colorVariant===re.WhiteOnBlue&&(i.push(de.blueBackground),n.push(de.whiteText)),t.icon){const i=[de.userIcon];this.state.isUsingStackNav||i.push(e?de.experimentalNav.userIcon:de.compositeNav.userIcon),a=s.createElement(s.View,{style:i},t.icon,t.iconBadge)}else t.iconBadge?a=s.createElement(s.View,{style:de.compactUserIconContainer},t.iconBadge):this._useCompactLayout()&&(a=s.createElement(s.View,{style:de.compactUserIconContainer}));this.state.hideTimestamp||(r=s.createElement(s.View,{accessibilityLabel:this.state.formattedTimestamp.valueAccessible},s.createElement(Z.Caption,{style:[...n,de.timestampText],modernizeConversationList:this.state.modernizeConversationList},this.state.formattedTimestamp.value))),t.mainContentPartLayout===ae.Standard&&(l=s.createElement(s.View,{style:de.cardContentContainer},t.messageContent),c=s.createElement(s.View,{style:de.contentDetailsContainer},r,s.createElement(Z.Caption,{style:n,numberOfLines:1,modernizeConversationList:this.state.modernizeConversationList},this.state.convDisplayName)));let d=s.createElement(s.View,{style:$.default.flexOne},this._renderCardHeader(t.extraHeaderText||[],!this.props.alert.isRead,t.colorVariant),l,c);const u=[e?de.experimentalNav.optionalSecondaryContentContainer:de.optionalSecondaryContentContainer,de.optionalSecondaryContentContainerEngagement],g=t.secondaryContent?s.createElement(s.View,{style:u},t.secondaryContent):void 0;t.layout===se.SecondaryButtons&&(void 0!==a&&(a=s.createElement(s.Button,{onPress:this._onPress,accessibilityLabel:t.mainAccessibilityLabel},a)),d=s.createElement(s.Button,{onPress:this._onPress,style:$.default.flexOne,accessibilityTraits:s.Types.AccessibilityTrait.Text},d));const h=s.createElement(s.View,{style:[o,this._getItemStyle()]},a,d,g);return t.layout===se.SecondaryButtons?s.createElement(s.View,{style:i,underlayColor:this._themeColors.rowHighlightColor},h):s.createElement(M.default.Button,{style:i,onPress:this._onPress,activeOpacity:.7,accessibilityLabel:t.mainAccessibilityLabel,onHoverStart:this._hoverStart,onHoverEnd:this._hoverEnd},h)}_getItemStyle(){const e=this._getContext().isPresentedInDesktopLeftNav;return this.state.modernizeConversationList&&(e||this._isPresentedInTabletLeftNav())?R.default.getItemBackgroundStyle(this._useDarkTheme(),!1,!!this.state.isHovering,this._useAccessibleTheme(),this._themeStyles,this.state.userColor):this.state.isHovering?e?this._themeStyles.secondaryRowHoverViewStyle:this._themeStyles.rowHoverViewStyle:void 0}_getOptionalModernizeTitleStyle(){return this.state.modernizeConversationList?R.default.getItemTitleTextStyle(!1,!this.props.alert.isRead,this._themeStyles):this.state.modernizeMobileTab?R.default.getItemTitleTextStyle(!1,!this.props.alert.isRead,this._themeStyles,!0):void 0}_getOptionalModernizeSubtitleStyle(){if(this.state.modernizeConversationList)return R.default.getItemSubtitleTextStyle(this._useDarkTheme(),!1,this._useAccessibleTheme(),this._themeStyles)}_renderCardHeader(e,t=!0,i=re.Standard){let o,a=i===re.WhiteOnBlue?de.whiteText:this._themeStyles.primaryTextColorStyle,r=[de.cardText,a];const l=this.props.rowSize===K.RowSize.ExtraCompact?Z.BodyTextSize.SmallDeprecated:void 0;if(this.props.alert.isEngagementAlert()&&this.state.engagementDisplayInfo)o=s.createElement(Z.BodyText,{key:"cardHeader",bold:t,size:l,style:r,numberOfLines:2},v.default.getReplacedPlaceholders(n.toString(this.state.engagementDisplayInfo.title),this.state.engagementDisplayInfo.placeholders));else if(this.state.headerTextOverride)o=s.createElement(Z.BodyText,{key:"cardHeader",bold:t,size:l,style:r,numberOfLines:2},this.state.headerTextOverride);else if(this.state.notificationDisplayInfo&&this.state.notificationDisplayInfo.labelKey){let e=0;r.push(this._getOptionalModernizeTitleStyle()),o=s.createElement(Z.BodyText,{key:"cardHeader",bold:t,size:l,style:r,numberOfLines:2,forceDirection:!0},N.getParts(this.state.notificationDisplayInfo.labelKey,{you:s.createElement(s.Text,{key:"you"},N.getString("AlertCard.YouLowerCase")),all:s.createElement(s.Text,{key:"all"},N.getString("AlertCard.All")),user:s.createElement(s.Text,{key:"cardHeaderUser"},this.state.notificationDisplayInfo.creatorDisplayName),firstOtherPerson:s.createElement(s.Text,{key:"firstOtherPerson"},this.state.notificationDisplayInfo.firstPersonToReact),secondOtherPerson:s.createElement(s.Text,{key:"secondOtherPerson"},this.state.notificationDisplayInfo.secondPersonToReact),gender:w.getLocalizeParamForGender(this.state.notificationDisplayInfo.gender),otherCount:this.state.notificationDisplayInfo.othersCount,subject:this.state.notificationDisplayInfo.subject},(t=>s.createElement(s.Text,{key:"dynamic"+e++},t))))}return s.createElement(s.Text,{numberOfLines:this._isEngagementAlert()?0:2,forceLayoutInRTL:!0,forceDirection:!0},n.flatten(n.compact([o,e])))}_renderMessageParts(){if(!this.state.messageToDisplay)return;const e=[];let t=[this.props.rowSize===K.RowSize.ExtraCompact?Q.default.fontStyle.bodySmallDeprecated:this.state.modernizeMobileTab?Q.default.fontStyle.modernizeRowTitle:Q.default.fontStyle.body,de.cardText,this._themeStyles.primaryTextColorStyle,this._getOptionalModernizeSubtitleStyle()];const i={processing:y.ProcessingDefaults.Preview,renderMedia:!1,mediaPlaceholderIconColor:this._themeColors.primaryTextColor,allowLargeEmoticons:!1,trimToFirstLine:!0,forceLayoutInRTL:!0,numberOfLines:1,textOverrideStyle:t,boldTextStyle:t,regularTextStyle:t,linkStyle:t,atMentionStyle:t,atMentionMeOverrideStyle:t,renderSimpleAtMentions:!0};return e.push(s.createElement(D.default,{key:"messageContent",message:this.state.messageToDisplay,options:i})),e}_renderFileThumbnail(){const e=P.FileIconHelper.getIconFromFileType(this.state.displayFilenameForIcon);let t=[de.iconContainer,e.backgroundStyle],i=X.IconSize.size32;return this.state.isUsingStackNav||(t.push(de.compositeNav.iconContainer),i=X.IconSize.size24),s.createElement(s.View,{style:t},s.createElement(A.default,{key:this.props.alert.guid,icon:e.icon,size:i,color:q.Color.white}))}_renderIconThumbnail(e){let t,i=[de.iconContainer];switch(this.state.isUsingStackNav||i.push(de.compositeNav.iconContainer),e){case g.MessageTypeGroups.Audio:t=X.SkypeIcon.Microphone;break;case g.MessageTypeGroups.Location:t=X.SkypeIcon.LocationPin;break;case g.MessageTypeGroups.SwiftCard:t=X.SkypeIcon.ContactCard}const n=t?s.createElement(A.default,{key:this.props.alert.guid,icon:t,size:X.IconSize.size24,color:q.Color.white}):void 0;return s.createElement(s.View,{style:i},n)}_renderMediaThumbnail(){const e=this.state.isUsingStackNav?60:40;return this.state.messageToDisplay?s.createElement(s.View,{style:de.thumbnailContainer},s.createElement(E.default,{key:this.props.alert.guid,message:this.state.messageToDisplay,height:e,width:e,showCreator:!1,thumbnailIconsSize:X.IconSize.size24,showVideoMediaTypeIcon:!0,borderRadius:10})):void 0}_renderNotificationPermissionActionButton(){}_getElapsedTimeAndUpdateTimer(e){let t=Date.now()-e;if(t>=36e5){let t=m.default.getDisplayDateTimeString(e);return{value:t,valueAccessible:t}}{let e=6e4-Math.floor(t%6e4);if(te.default.setTimeout((()=>{this._updateTimeState()}),e),t>=6e4){let e=Math.floor(t/6e4).toString();return{value:N.getString("SearchResultsList.ElapsedTimeMinutes",{minutes:e}),valueAccessible:N.getString("SearchResultsList.ElapsedTimeMinutesAccessible",{minutes:e})}}return{value:N.getString("SearchResultsList.ElapsedTimeOneMinute"),valueAccessible:N.getString("SearchResultsList.ElapsedTimeOneMinuteAccessible")}}}_updateTimeState(){this.isComponentMounted()&&this.setState({formattedTimestamp:this._getElapsedTimeAndUpdateTimer(this.props.alert.alertTime)})}_markRead(){this.props.alert.alertType!==a.AlertType.MissedCallbackReminder?!this.props.alert.isRead&&this.state.messageToDisplay&&(this.props.alert.alertType===a.AlertType.Reaction||this.props.alert.alertType===a.AlertType.AdditionalReaction?V.default.isMyMri(this.state.messageToDisplay.creator)&&u.markReactionsAsRead(this.state.messageToDisplay):this.props.alert.alertType===a.AlertType.ScheduledCall&&u.markScheduledCallAsRead(this.state.messageToDisplay)):l.default.markAsRead(this.props.alert.guid)}_getAlertTypeForTelemetryEvent(){let e=b.AlertTypeForTelemetry.Unknown;switch(this.props.alert.alertType){case a.AlertType.Reaction:case a.AlertType.AdditionalReaction:e=b.AlertTypeForTelemetry.Reaction;break;case a.AlertType.OnboardingX:e=b.AlertTypeForTelemetry.Onboarding;break;case a.AlertType.Engagement:e=b.AlertTypeForTelemetry.Engagement;break;case a.AlertType.HighPriorityMessage:this.state.messageToDisplay&&this.state.messageToDisplay.isCurrentUserQuoted()?e=b.AlertTypeForTelemetry.Quote:this.state.messageToDisplay&&this.state.messageToDisplay.isCurrentUserMentioned()&&(e=b.AlertTypeForTelemetry.Mention);break;case a.AlertType.Notice:e=b.AlertTypeForTelemetry.Notice;break;case a.AlertType.ScheduledCall:e=b.AlertTypeForTelemetry.ScheduledCall}return e}_isEngagementAlert(){return this.props.alert.alertType===a.AlertType.Engagement||this.props.alert.alertType===a.AlertType.Notice}_useCompactLayout(){return this.props.rowSize===K.RowSize.Compact||this.props.rowSize===K.RowSize.ExtraCompact}}t.default=ue},73424:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(31844),s=i(34828),a=i(16778),r=i(44770),l=i(85690),c=i(72225),d=i(66495),u=i(42826),g=i(82192),h=i(72105),p=i(89391),m=i(98278),S=i(39549),C=i(56280),f=i(10167),y=i(26317),_=i(2519),v=i(35251),b=i(46096),T=i(11375),P=i(36237),A=i(10400),k=i(15877),I=i(33754),w=i(66127),N=i(89808),M=i(16492),E=i(16492),x=i(91659),L=i(12944),R=i(30124),D=i(44824),B=i(82052),O=i(29130),F=i(51070),V=i(15415),U=i(81760),H=i(80837),W=i(19675),z=i(24576),G=i(88117),K=i(67977),j="alp_alert",q="native_ad",Q="alp_update",X="alp_spacer",J=(0,k.lazyProperties)({panel:()=>a.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),emptyStateContainer:()=>a.Styles.createViewStyle({flex:1,alignSelf:"stretch",alignItems:"center",justifyContent:"center",paddingHorizontal:40}),emptyStateImageV3:()=>a.Styles.createImageStyle({height:130,width:130,alignSelf:"center"}),emptyStateMessage:()=>a.Styles.createTextStyle({textAlign:"center"}),activityIndicatorContainer:()=>a.Styles.createViewStyle({flex:1,alignSelf:"stretch",alignItems:"center",justifyContent:"center"}),itemDividerComposite:()=>a.Styles.createViewStyle({height:1,marginLeft:68}),itemDividerStackNav:()=>a.Styles.createViewStyle({height:1,marginLeft:93})});class $ extends z.default{constructor(){super(...arguments),this._currentScrollTop=0,this._haveAlertsBeenTracked=!1,this.handleFocusEvent=e=>(P.log(b.LogTraceArea.GenericUnsafe,"AlertsPanel.handleFocusEvent"),!(e!==T.FocusEvent.Notifications||!this._vlvRef)&&(this._vlvRef.scrollToTop(!1),this._vlvRef.focus(!0),!0)),this._getEmptyStateImageInfo=()=>this.state.isLandscape?void 0:{imageStyle:J.emptyStateImageV3,imageSource:r.Collection.ONBOARDING_NOTIFICATIONS_EMPTYSTATE_V3},this._onLayoutVlvContainer=e=>{this.isComponentMounted()&&(this.state.listItemContainerHeight===e.height&&this.state.listItemContainerWidth===e.width||this.setState({listItemContainerHeight:e.height,listItemContainerScreenAvailableHeight:$._getItemContainerHeightDisregardingKeyboard(e.height,this.state),listItemContainerWidth:e.width}))},this._renderItem=(e,t)=>{switch(e.template){case j:const t=this.state.alerts[e.key];let i;return this._isPresentedInDesktopLeftNav()||this.state.modernizeConversationList&&this._isPresentedInTabletLeftNav()||t.alertType===u.AlertType.NotificationPermission||this.state.modernizeMobileTab||(i=this._renderOptionalDivider()),n.compact([a.createElement(l.default,{alert:t,key:t.guid,height:e.height,onAlertCardPress:this._onPressAlertCard,color:e.color,item:e,rowSize:this.state.rowSize}),i]);case Q:return a.createElement(y.default,{key:e.key,rowSize:this.state.rowSize});case X:return a.createElement(a.View,{key:e.key,style:a.Styles.createViewStyle({height:e.height},!1)});case q:const o=e;let s;return s=o.adsType===C.AdsType.ListItemNarrow?a.createElement(c.default,{key:o.key,adsGuid:o.adsGuid,adGuid:o.adGuid,dimensions:o.dimensions,placementId:o.placementId,canHide:o.canHide,provider:o.provider}):a.createElement(d.default,{key:o.key,adsGuid:o.adsGuid,adGuid:o.adGuid,dimensions:o.dimensions,placementId:o.placementId,canHide:o.canHide,provider:o.provider}),n.compact([s,this._renderOptionalDivider()]);default:return[]}},this._onScroll=(e,t)=>{this.props.onScroll&&this.props.onScroll(e,this._currentScrollTop),this._currentScrollTop=e},this._onPressAlertCard=e=>{this.props.onPressAlertCard&&this.props.onPressAlertCard(e)},this._onVLVRef=e=>{this._vlvRef=e||void 0}}_buildState(e,t){const i=p.default.getAdsFeatures(),s=i.placementSettings.alertsPanel,r=h.default.getRecentAlerts(e.filter),l={};if(!h.default.isLoadingAlertsFromDb()&&!this._haveAlertsBeenTracked){const e=(0,S.default)().getDisplayableRecentConversationsSortedAll().length,t=this._setupAlertTypesInfo(r);P.track(new g.AlertsPanelOpened(t,e)),this._haveAlertsBeenTracked=!0}n.each(r,(e=>{l["n_"+e.guid]=e}));const c=this._getRootViewId(),d=R.default.isUsingStackNavigationContext(),u=w.default.canModernizeConversationList(),y=w.default.canModernizeMobileTab(),v=y?m.HorizontalInsetDefaultModernize:m.HorizontalInsetDefault,b={alerts:l,isLoadingAlertsFromDb:h.default.isLoadingAlertsFromDb(),isUsingStackNavigationContext:d,safeAreaHorizontalInsets:F.default.horizontalInsets(v),isLandscape:O.default.getDeviceOrientation(c)===o.DeviceOrientation.Landscape&&!this._getContext().isPresentedInDesktopSubview,rowSize:this._isPresentedInDesktopLeftNav()||u&&this._isPresentedInTabletLeftNav()?B.default.nonRecentRowSizeAndChanges():void 0,keyboardHeight:A.default.getUpdateInfo().height,modernizeConversationList:u,modernizeMobileTab:y},T=$._calculateAlertCardHeight(d,y),k=w.default.canModernizeConversationList()&&(this._isPresentedInDesktopLeftNav()||this._isPresentedInTabletLeftNav());let I=0;const x=N.default.getPrimaryColor();b.itemList=n.flatten(n.map(b.alerts,(e=>{const t=[{key:"n_"+e.guid,height:T,template:j,color:x,measureHeight:!0,accessibilityTrait:a.Types.AccessibilityTrait.Button}];return k&&t.push(this._getItemSpacer(2,I++)),t}))),f.default.getUpdateStatus()===_.default.UpdateDownloaded&&(b.itemList=[{key:"update_notification",height:T,template:Q,measureHeight:!0,accessibilityTrait:a.Types.AccessibilityTrait.Button},...b.itemList]);let D=p.default.getS4LMessagingFeatures().enableRecyclerListViewUseCases;b.enabledRecyclerView=D.indexOf("MainScreen.Tabs.Notifications")>-1;const V=(i.naExperimentEnabled||i.enabled)&&(s.adsType===C.AdsType.ListItem||s.adsType===C.AdsType.ListItemNarrow)&&b.itemList.length>=s.minRequiredAdjacentItems?E.default.getAdsState(s.placementIds[0],{refreshIntervalInMinutes:s.refreshIntervalInMinutes,isAdMediaClickable:s.isAdMediaClickable,placementName:L.NativeAdPlacementName.AlertsPanel,provider:s.provider,adsType:s.adsType,otherProviders:s.otherProviders,testDevices:i.testDevices}):void 0;return V&&V.status===M.AdsStatus.Loaded&&this._insertNativeAdIntoList(b,s,V,T,k,I),b}_getItemSpacer(e,t){return{key:X+t,height:e,template:X,isNavigable:!1}}scrollToTop(){this._vlvRef&&this._vlvRef.scrollToTop()}componentDidMount(){super.componentDidMount(),h.default.maybeAddOrRemoveNotificationPermissionAlert(),h.default.clearAlertsPanelCount(),T.register(T.FocusEvent.Notifications,this)}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),n.some(this.state.alerts,(e=>e.alertType===u.AlertType.Engagement))&&D.default.initialize()}componentWillUnmount(){super.componentWillUnmount(),T.unregister(T.FocusEvent.Notifications,this)}render(){const e=0===this.state.itemList.length;let t;if(e&&this.state.isLoadingAlertsFromDb)t=a.createElement(a.View,{style:J.activityIndicatorContainer},a.createElement(V.default,{size:m.SXActivityIndicatorSize.Medium,tintColor:U.Color.gray400}));else if(e){let e,i=this._getEmptyStateImageInfo();i&&(e=a.createElement(a.Image,{style:i.imageStyle,source:i.imageSource})),t=a.createElement(a.View,{style:J.emptyStateContainer},e,a.createElement(v.default,{headerText:I.getString("AlertsPanel.EmptyStateHeader")}),a.createElement(W.BodyText,{style:J.emptyStateMessage,textThemeColor:W.TextThemeColor.Secondary},I.getString("AlertsPanel.EmptyStateDescriptionAlternative")))}else t=a.createElement(s.VirtualListView,{ref:this._onVLVRef,enabledRecyclerView:this.state.enabledRecyclerView,itemList:this.state.itemList,renderItem:this._renderItem,animateChanges:!0,horizontalPadding:this.state.safeAreaHorizontalInsets,onScroll:this._onScroll,accessibilityLabel:I.getString("AlertsPanel.NotificationsTitle")});return a.createElement(a.View,{style:[J.panel,H.default.noncollapsibleView],onLayout:this._onLayoutVlvContainer},t)}_insertNativeAdIntoList(e,t,i,n,o,s){if(!e.itemList)return;const a=this._getRootViewId(),r=this.state&&this.state.listItemContainerScreenAvailableHeight?this.state.listItemContainerScreenAvailableHeight:O.default.getHeight(a),l=this._createNativeAdItem(e,t,i,n),c=x.default.calculateNativeAdsPositionInListView({maxHeight:r,items:e.itemList,startPosition:0,nativeAdsHeight:l.height,adsConfig:t}),d=[l];o&&d.push(this._getItemSpacer(2,s)),e.itemList.splice(c,0,...d)}_createNativeAdItem(e,t,i,n){const o=t.placementIds[0],s=this.state&&this.state.listItemContainerWidth?this.state.listItemContainerWidth:300,r=this._getIconSize(!!e.isUsingStackNavigationContext),l=x.default.calculateAlertCardNativeAdDimensions(!!e.isUsingStackNavigationContext,s,n,x.default.includeMediaInAdHeight(i),r,G.default.getIconSize(r).user,t.dynamicDimensionsSettings,i.adsType);return{key:"native_ad"+o,adsGuid:i.guid,adGuid:i.ads[0],height:l.totalHeight,dimensions:l,placementId:o,template:q,accessibilityTrait:a.Types.AccessibilityTrait.Group,accessibilityLabel:I.getString("NativeAd.AdAccessibilityLabel"),canHide:t.canHide,provider:i.provider,adsType:i.adsType}}_getIconSize(e){return e?K.AvatarIconSize.Size60:K.AvatarIconSize.Size40}_renderOptionalDivider(){const e=[this.state.isUsingStackNavigationContext?J.itemDividerStackNav:J.itemDividerComposite,this._themeStyles.dividerColorStyle];return a.createElement(a.View,{key:"itemDivider",style:e})}_setupAlertTypesInfo(e){return{engagementsCount:n.filter(e,(e=>e.alertType===u.AlertType.Engagement)).length,quotesCount:n.filter(e,(e=>e.message&&e.message.isCurrentUserQuoted())).length,reactionsCount:n.filter(e,(e=>e.alertType===u.AlertType.Reaction)).length,mentionsCount:n.filter(e,(e=>e.message&&e.message.isCurrentUserMentioned())).length}}static _calculateAlertCardHeight(e,t){const i=O.default.getContentSizeMultiplier(),n=e?t?64:76:70;return 20+Math.round(n*Math.min(i,m.MaxContentSizeMultiplier))+2}static _getItemContainerHeightDisregardingKeyboard(e,t){return t.keyboardHeight<=0?e:t.listItemContainerScreenAvailableHeight?t.listItemContainerScreenAvailableHeight:t.listItemContainerHeight?t.listItemContainerHeight:e}}t.default=$},26317:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(10167),s=i(32910),a=i(46096),r=i(15877),l=i(33754),c=i(51072),d=i(93003),u=i(10056),g=i(81760),h=i(40363),p=i(11010),m=i(11828),S=i(19675),C=i(24576),f=m.IconSize.size40,y=m.IconSize.size24,_=(0,r.lazyProperties)({container:()=>n.Styles.createViewStyle({flex:1,flexDirection:"row",alignItems:"center",paddingVertical:10,paddingHorizontal:15}),containerCompact:()=>n.Styles.createViewStyle({paddingHorizontal:10}),text:()=>n.Styles.createTextStyle({flex:1,marginLeft:15,marginRight:10,lineHeight:22}),textCompact:()=>n.Styles.createTextStyle({marginLeft:8}),updateButton:()=>n.Styles.createViewStyle({backgroundColor:g.Color.green,height:30,borderRadius:15,paddingHorizontal:15,justifyContent:"center",alignItems:"center"}),mandatoryUpdateButton:()=>n.Styles.createViewStyle({backgroundColor:g.Color.red}),updateButtonText:()=>n.Styles.createTextStyle({color:g.Color.white,fontSize:p.default.controlFontSize.smallButton})});class v extends C.default{constructor(){super(...arguments),this._onHoverStart=()=>{this.isComponentMounted()&&this.setState({isHovering:!0})},this._onHoverEnd=()=>{this.isComponentMounted()&&this.setState({isHovering:!1})},this._onPress=()=>{s.tryToQuitAndInstallUpdate(this._getRootViewId())}}_buildState(e,t){return{isRedBadge:o.default.shouldShowUpdateReminder()}}render(){const e=this.props.rowSize===d.RowSize.ExtraCompact||this.props.rowSize===d.RowSize.Compact,t=[_.container,this._themeStyles.updateCard],i=[_.text];e&&(t.push(_.containerCompact),i.push(_.textCompact)),this.state.isRedBadge&&t.push(this._themeStyles.mandatoryUpdateCard),this.state.isHovering&&(this.state.isRedBadge?t.push(this._themeStyles.mandatoryUpdateCardHover):t.push(this._themeStyles.updateCardHover));const o=[_.updateButton];return this.state.isRedBadge&&o.push(_.mandatoryUpdateButton),n.createElement(c.default.Button,{style:t,onHoverStart:this._onHoverStart,onHoverEnd:this._onHoverEnd,onPress:this._onPress},n.createElement(u.SkypeLogo,{size:e?y:f}),n.createElement(S.BodyText,{style:i,size:e?S.BodyTextSize.SmallDeprecated:void 0},this._getUpdateMessage()),n.createElement(n.View,{style:o},n.createElement(n.Text,{style:_.updateButtonText},this._getUpdateButton())))}_getUpdateMessage(){return this.state.isRedBadge?l.getString("ElectronUpdateCard.ElectronUpdateMandatory"):h.default.getPlatformType()===a.PlatformType.Linux?l.getString("ElectronUpdateCard.ElectronUpdateLinux"):l.getString("ElectronUpdateCard.ElectronUpdate")}_getUpdateButton(){return h.default.getPlatformType()===a.PlatformType.Linux?l.getString("ElectronUpdateCard.UpdateButtonLinux"):l.getString("ElectronUpdateCard.UpdateButton")}}t.default=v},76850:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopHubTabBar=void 0;const n=i(96486),o=i(16778),s=i(72105),a=i(77381),r=i(75760),l=i(10167),c=i(7213),d=i(47126),u=i(17093),g=i(26978),h=i(12770);class p extends a.default{constructor(){super(...arguments),this._onKeyPress=e=>{if(!this.isComponentMounted())return;let t=n.indexOf(this.props.tabs,this.state.focusedHubTab);e.keyCode!==d.default.DOWN&&e.keyCode!==d.default.LEFT||(t-=1),e.keyCode!==d.default.UP&&e.keyCode!==d.default.RIGHT||(t+=1),t<0?t=this.props.tabs.length-1:t>=this.props.tabs.length&&(t=0),this.setState({focusedHubTab:this.props.tabs[t]})},this._onBlur=()=>{this._focusResetTimeout&&h.default.clearTimeout(this._focusResetTimeout),this._focusResetTimeout=h.default.setTimeout((()=>{this.isComponentMounted()&&this.state.focusedHubTab!==this.props.currentHubTab&&this.setState({hasFocus:!1,focusedHubTab:this.props.currentHubTab})}),250)},this._onFocus=()=>{this.isComponentMounted()&&!this.state.hasFocus&&this.setState({hasFocus:!0}),this._focusResetTimeout&&(h.default.clearTimeout(this._focusResetTimeout),this._focusResetTimeout=void 0)},this._onTabBarRef=e=>{this._tabBar=e||void 0},this._onTabBarLayout=e=>{if(!this.state.resizingEnabled)return;const t=e.width<=this.props.smallTabsThreshold;this.state.useSmallTabs!==t&&this.setState({useSmallTabs:t})}}_buildState(e,t){const i=n.includes(e.tabs,u.HubTab.Notifications);let o={activeConversationsCount:n.includes(e.tabs,u.HubTab.Recents)?r.default.getActiveRecentsConversationCount():0,unreadAlertsCount:i?s.default.getUnreadAlertsCount():0,shouldShowUpdateBadge:i&&(l.default.shouldShowUpdateBadge()||l.default.shouldShowUpdateReminder()),focusedHubTab:e.currentHubTab,resizingEnabled:g.default.resizingEnabled(g.SideBar.Left)};return t&&(o.hasFocus=!1,o.useSmallTabs=e.useSmallTabsOnMount),o}tabRef(e){return this._tabBar?this._tabBar.tabRef(e):void 0}_badgeCount(){let e=this.state.unreadAlertsCount||0;return this.state.shouldShowUpdateBadge&&e++,e}render(){return o.createElement(c.default,{ref:this._onTabBarRef,style:this.props.style,tabs:this.props.tabs,currentHubTab:this.props.currentHubTab,focussedHubTab:this.state.focusedHubTab,activeConversationsCount:this.state.activeConversationsCount,unreadAlertsCount:this._badgeCount(),hasFocus:this.state.hasFocus,useSmallTabs:this.state.useSmallTabs,hideLabels:this.props.hideLabels,onTabPress:this.props.onTabPress,onTabLongPress:this.props.onTabLongPress,onKeyPress:this._onKeyPress,onFocus:this._onFocus,onBlur:this._onBlur,onLayout:this.state.resizingEnabled?this._onTabBarLayout:void 0})}}t.DesktopHubTabBar=p,t.default=p},24787:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopNewActionPicker=t.DesktopNewActionPickerType=void 0;const n=i(96486),o=i(16778),s=i(81878),a=i(89391),r=i(97775),l=i(11009),c=i(98278),d=i(58031),u=i(31761),g=i(72822),h=i(52262),p=i(46096),m=i(13873),S=i(66649),C=i(36237),f=i(35114),y=i(15877),_=i(41209),v=i(33754),b=i(44285),T=i(12462),P=i(57538),A=i(18078),k=i(4735),I=i(17093),w=i(95691),N=i(28377),M=i(10541),E=i(6262),x=i(16392),L=i(93194),R=i(81760),D=i(40363),B=i(11828),O=i(60305),F=i(24576),V=i(53374),U=i(10117);var H;!function(e){e[e.Default=0]="Default",e[e.TextButtonWithShadow=1]="TextButtonWithShadow",e[e.TextButtonWithBorderAndIcon=2]="TextButtonWithBorderAndIcon"}(H=t.DesktopNewActionPickerType||(t.DesktopNewActionPickerType={}));const W=(0,y.lazyProperties)({iconContainer:()=>o.Styles.createViewStyle({flexDirection:"row",justifyContent:"center",alignItems:"center"}),iconButtonText:()=>o.Styles.createViewStyle({margin:5}),iconButtonTextCompactIcon:()=>o.Styles.createViewStyle({paddingTop:4})}),z="moderatedgroup",G="group",K="1on1",j="private",q="newCall",Q="findBots",X="addContact",J="cellularSms",$="inviteToSkype",Y="syncAddressBook",Z="newChat";class ee extends F.default{constructor(){super(...arguments),this._menuId=L.default.menuId(),this._onPlusButtonClick=e=>{if(e.stopPropagation(),this.state.superComposerEnabled){new u.default({creating1on1Conversation:!0,useSuperComposerFor1on1Conversation:!0,peopleType:M.PeopleType.All,filterPeopleType:M.FilterType.None,isSingleContactSelect:!0,navigationOrigin:p.NavigationConversationOrigin.SuperComposer,wizardSteps:[w.WizardSteps.setConvParticipants]}).start(this._getRootViewId())}else{const t=e;this._openPopup(t.shiftKey||t.metaKey,e)}},this._onPlusButtonRef=e=>{this._plusButtonRef=e},this._openAnchorPopup=()=>{this._openPopup(!1)},this._openPopup=(e,t)=>{if(!e&&this.state.enableNewConversationCreation)return void this._onHandleAddMenuCommand(Z);const i={anchor:()=>this._plusButtonRef,useTheme:!0,showAdvancedItems:e,positionPriorities:["bottom","right"],popupBeakSize:{width:0,height:0}};if(n.isUndefined(this.props.hubTab))if(this.props.showGroupedActions){const e=[{key:"newsection",menuItems:this._getNewMenuItems(i)},{key:"addsection",menuItems:this._getAddMenuItems(i)}];L.default.showGroupWithOptions({id:this._menuId,config:i,getMenuGroups:()=>e,handleMenuCommand:this._onHandleAddMenuCommand,cancelButtonTitleIOS:v.getString("Global.CancelLabel"),rootViewId:this._getRootViewId(),invokingEvent:t})}else L.default.showWithOptions({id:this._menuId,config:i,getMenuItems:this._getAllMenuItems,handleMenuCommand:this._onHandleAddMenuCommand,rootViewId:this._getRootViewId(),invokingEvent:t});else{let e;switch(this.props.hubTab){case I.HubTab.Recents:e=this._getRecentMenuItems(i);break;case I.HubTab.MeetNowChats:case I.HubTab.MeetNowCalls:e=b.MeetNowHelpers.getMeetNowMenuItems();break;case I.HubTab.Calls:e=this._getCallsMenuItems(i);break;case I.HubTab.People:e=this._getAddMenuItems(i)}if(e){if(1===e.length)return void this._onHandleAddMenuCommand(e[0].command);if(this.props.hubTab===I.HubTab.People){const e=[{key:"addsection",menuItems:this._getAddMenuItems(i)},{key:"invitesection",menuItems:this._getInviteMenuItems(i)}];_.isAddressBookEnabled()&&!this.state.syncAddressBookEnabled&&e.push({key:"synccontactssection",menuItems:this._getSyncContactsMenuItems(i)}),L.default.showGroupWithOptions({id:this._menuId,config:i,getMenuGroups:()=>e,handleMenuCommand:this._onHandleAddMenuCommand,cancelButtonTitleIOS:v.getString("Global.CancelLabel"),rootViewId:this._getRootViewId(),invokingEvent:t})}else{const o=e;L.default.showWithOptions({id:this._menuId,config:i,getMenuItems:()=>o,handleMenuCommand:this._onHandleAddMenuCommand,rootViewId:this._getRootViewId(),invokingEvent:t,onDismiss:n.noop})}}}},this._getAllMenuItems=e=>[...this._getNewMenuItems(e),...this._getAddMenuItems(e)],this._getNewMenuItems=e=>{const t=[{text:v.getString("Hub.NewGroupChatLabel"),command:G}];return(e.showAdvancedItems||this.state.enableModeratedGroupChats)&&t.push({text:v.getString("Hub.NewModeratedGroupChatLabel"),command:z}),t.push({text:v.getString("Hub.New1on1ChatLabel"),command:K}),this.state.disableHighBandwidthOperations||t.push({text:v.getString("Hub.NewCallLabel"),command:q}),t.push({text:v.getString("Hub.NewPrivateChatLabel"),command:j}),this._canShowSmsEntryPoint()&&t.push({text:v.getString("Hub.NewCellularSmsChatLabel"),command:J}),t},this._getAddMenuItems=e=>{const t=[];return this.state.addContactFlowEnabled&&t.push({text:v.getString("Hub.AddContactMenuLabel"),command:X}),this.state.ecsBotDiscoveryEnabled&&t.push({text:this.props.showGroupedActions?v.getString("Hub.FindBotLabelGrouped"):v.getString("Hub.FindBotLabel"),command:Q}),t},this._getInviteMenuItems=e=>{const t=[];return t.push({text:v.getString("Hub.InviteToSkypeLabel"),command:$}),t},this._getSyncContactsMenuItems=e=>{const t=[],i=D.default.getPlatformType()===p.PlatformType.OSX,n=D.default.getPlatformType()===p.PlatformType.Windows;let o="";return i?o=v.getString("Hub.SyncMacContacts"):n&&(o=v.getString("Hub.SyncPcContacts")),t.push({text:o,command:Y}),t},this._getRecentMenuItems=e=>{const t=[{text:v.getString("Hub.NewGroupChatLabel"),command:G}];return(e.showAdvancedItems||this.state.enableModeratedGroupChats)&&t.push({text:v.getString("Hub.NewModeratedGroupChatLabel"),command:z}),t.push({text:v.getString("Hub.New1on1ChatLabel"),command:K}),t.push({text:v.getString("Hub.NewPrivateChatLabel"),command:j}),this._canShowSmsEntryPoint()&&t.push({text:v.getString("Hub.NewCellularSmsChatLabel"),command:J}),t},this._getCallsMenuItems=e=>{const t=[];return this.state.disableHighBandwidthOperations||t.push({text:v.getString("Hub.NewCallLabel"),command:q}),t},this._onHandleAddMenuCommand=e=>{const t=V.default.newCauseId();switch(C.log(p.LogTraceArea.Navigation,"DesktopNewActionPicker._onHandleAddMenuCommand,  causeId: "+t),C.track(new m.HubPlusButtonEvent(e)),e){case z:new u.default({navigationOrigin:p.NavigationConversationOrigin.NewModeratedGroup,peopleType:M.PeopleType.All,filterPeopleType:M.FilterType.GroupCapable}).start(this._getRootViewId());break;case G:new u.default({navigationOrigin:p.NavigationConversationOrigin.NewGroup,peopleType:M.PeopleType.All,filterPeopleType:M.FilterType.GroupCapable}).start(this._getRootViewId());break;case K:new u.default({creating1on1Conversation:!0,peopleType:M.PeopleType.All,filterPeopleType:M.FilterType.None,isSingleContactSelect:!0,navigationOrigin:p.NavigationConversationOrigin.NewChat,wizardSteps:[w.WizardSteps.setConvParticipants]}).start(this._getRootViewId());break;case j:new u.default({creating1on1Conversation:!0,peopleType:M.PeopleType.AllExcludingBots,filterPeopleType:M.FilterType.None,isSingleContactSelect:!0,navigationOrigin:p.NavigationConversationOrigin.NewPrivateChat,wizardSteps:[w.WizardSteps.setConvParticipants]}).start(this._getRootViewId());break;case q:this.props.showGroupedActions?k.default.navigateToQuickCallPanelWithParams({newGroup:!0,causeId:t},this._getRootViewId()):k.default.navigateToQuickCallPanel(t,this._getRootViewId());break;case Q:k.default.navigateToBotDiscovery(void 0,this._getRootViewId());break;case X:k.default.navigateToAddContactPanel(d.AddContactPanelOrigin.DesktopNewActionPicker,x.StackNavigationDirection.Push,this._getRootViewId());break;case $:const i=A.default.getSkypeMri(),n=h.default.getDisplayName(i);k.default.navigateToInviteShare(i,n,f.InviteLinkOrigin.DesktopNewActionPicker,this._getRootViewId());break;case Y:k.default.navigateToSyncAddressBook({origin:g.DialogNavOrigin.LocalContactsTab,hideSkipButton:!0},void 0,this._getRootViewId());break;case L.SXActionMenuCancel:break;case J:new u.default({creating1on1Conversation:!0,peopleType:M.PeopleType.AllWithPhoneNumbers,filterPeopleType:M.FilterType.CallCapable,isSingleContactSelect:!0,navigationOrigin:p.NavigationConversationOrigin.NewChat,wizardSteps:[w.WizardSteps.setConvParticipants],createCellularSmsConversation:!0}).start(this._getRootViewId());break;case Z:new u.default({peopleType:M.PeopleType.All,filterPeopleType:M.FilterType.None,navigationOrigin:p.NavigationConversationOrigin.Recents,wizardSteps:[w.WizardSteps.setConvParticipants]}).start(this._getRootViewId());break;case P.MeetNowButtonActionCommands.CreateMeetNow:case P.MeetNowButtonActionCommands.JoinMeetNow:const o=e===P.MeetNowButtonActionCommands.CreateMeetNow?this.props.hubTab===I.HubTab.MeetNowCalls?P.MeetNowOrigin.CallsHubDesktop:P.MeetNowOrigin.RecentChatsHubDesktop:this.props.origin||P.MeetNowOrigin.JoinLobby;b.MeetNowHelpers.handleMeetNowActionMenuCommand(e,o)}},this._canShowSmsEntryPoint=()=>this.state.enable2WaySmsEntryPoint}_buildState(e){const{enableNativeBaseControls:t}=a.default.getS4LUiFeatures(),{enableNewConversationCreation:i,useSmsThreadsFor2way:n,enableModeratedGroupChats:o}=a.default.getS4LMessagingFeatures(),{botDiscoveryEnabled:s}=a.default.getS4LCaapFeatures();return{ecsBotDiscoveryEnabled:s,superComposerEnabled:O.default.useTabletUI(),addContactFlowEnabled:!!e.showGroupedActions,disableHighBandwidthOperations:S.default.isUsingGogoNetwork(),syncAddressBookEnabled:N.default.getSyncAddressBookPrivacySetting(),enable2WaySmsEntryPoint:n&&E.default.isPaidUser(),enableNewConversationCreation:e.hubTab===I.HubTab.Recents&&i,enableModeratedGroupChats:o,enableNativeBaseControls:t}}_getIcon(){if(this.props.buttonType===H.TextButtonWithBorderAndIcon)switch(this.props.hubTab){case I.HubTab.Recents:return B.SkypeIcon.Compose;case I.HubTab.Calls:return B.SkypeIcon.CallAdd;case I.HubTab.People:return B.SkypeIcon.ContactAdd;case I.HubTab.MeetNowChats:case I.HubTab.MeetNowCalls:return T.default.getMeetNowIcon()}return B.SkypeIcon.Plus}render(){let e,t,i=[o.Types.AccessibilityTrait.Button,o.Types.AccessibilityTrait.HasPopup];const a=this.props.buttonType===H.TextButtonWithShadow||this.props.buttonType===H.TextButtonWithBorderAndIcon,d=this.props.buttonType===H.TextButtonWithBorderAndIcon;let u=d;switch(this.props.hubTab){case I.HubTab.Recents:e=v.getString("Hub.New1on1ChatLabel"),a&&(t=d?v.getString("Hub.New1on1ChatLabel"):v.getString("Hub.NewChatMenuShortLabel"));break;case I.HubTab.Calls:e=v.getString("Hub.NewCallLabel"),a&&(t=d?v.getString("Hub.NewCallLabel"):v.getString("Hub.NewCallMenuShortLabel")),i=[o.Types.AccessibilityTrait.Button],u=!1;break;case I.HubTab.People:e=v.getString("Hub.AddContactsLabelGrouped"),a&&(t=d?v.getString("Hub.NewContactButton"):v.getString("Hub.NewContactMenuShortLabel")),i=[o.Types.AccessibilityTrait.Button],u=!1;break;case I.HubTab.MeetNowChats:case I.HubTab.MeetNowCalls:e=v.getString("MeetNow.FeatureName"),t=v.getString("MeetNow.FeatureName");break;default:e=v.getString("HubHeaderPanel.NewConversationOrCallAccessibilityLabel"),t=v.getString("HubHeaderPanel.NewConversationOrCallTitle")}let g={coachMarkType:l.CoachMarkType.Plus,onAnchorPress:this._openAnchorPopup,anchorAccessibilityLabel:e,accessibilityLabel:e,accessibilityTraits:i,anchorRef:this._onPlusButtonRef,style:[W.iconContainer,this.props.style],onPress:this._onPlusButtonClick,icon:this.props.hideIcon?B.SkypeIcon.Blank:this._getIcon(),title:t||e,secondaryIcon:u?B.SkypeIcon.DownChevron:void 0,secondaryIconSize:u?B.IconSize.size12:void 0,secondaryIconColor:u&&!this._useAccessibleTheme()?R.Color.gray300:void 0,secondaryIconMarginLeft:u?B.IconSize.size12:void 0,secondaryIconMarginRight:u?-B.IconSize.size12:void 0};if(a){const i=this._useAccessibleTheme();let a,l;if(this._useDarkTheme()?(a=c.SXButtonStyle.DarkFill,l=R.Color.gray300Overlay10):(a=c.SXButtonStyle.LightFill,l=R.Color.gray100),i&&(a=c.SXButtonStyle.ThemeFill,l=R.Color.transparent),this.state.enableNativeBaseControls){const i=this.props.buttonSize===c.SXButtonSize.Small?"sm":this.props.buttonSize===c.SXButtonSize.Large?"lg":"sm";return o.createElement(s.Button,{ref:this._onPlusButtonRef,flexGrow:1,marginX:"5px",marginY:"3px",onPress:this._onPlusButtonClick,variant:"outlineFilled",colorScheme:"secondary",accessibilityLabel:e,size:i,leftIcon:o.createElement(U.ThemedIcon,{size:"sm",name:this.props.hideIcon?B.SkypeIcon.Blank:this._getIcon()}),rightIcon:o.createElement(U.ThemedIcon,{size:"2xs",name:B.SkypeIcon.DownChevron})},t)}{const e=n.isUndefined(this.props.buttonSize)?c.SXButtonSize.Small:this.props.buttonSize,t=n.isUndefined(this.props.buttonStyle)?a:this.props.buttonStyle;return o.createElement(r.default.SXButton,Object.assign({},g,{buttonSize:e,buttonStyle:t,iconSize:this.props.iconSize||B.IconSize.size12,secondaryIconColor:this.props.secondaryIconColor||void 0,minHeight:d?32:void 0,showShadow:!i&&this.props.buttonType===H.TextButtonWithShadow,addBorderColor:d?l:void 0,textStyleOverride:this.props.textStyleOverride}))}}{const e=this.props.useCompactLayout?W.iconButtonTextCompactIcon:W.iconButtonText;return o.createElement(r.default.IconButton,Object.assign({},g,{size:this.props.iconSize||(this.props.useCompactLayout?B.IconSize.size16:B.IconSize.size24),color:this.props.color||this._themeColors.headerIconColor,hoverColor:this.props.hoverColor||this._themeColors.iconHoverColor,iconTextStyle:e}))}}}t.DesktopNewActionPicker=ee,t.default=ee},30010:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(71830),s=i(11930),a=i(98278),r=i(75760),l=i(92758),c=i(39549),d=i(7417),u=i(46096),g=i(36237),h=i(33754),p=i(78735),m=i(82052),S=i(93003),C=i(21579),f=i(86045),y=i(93194),_=i(53374),v="recents",b="archived",T="time",P="unread",A="active",k="default",I="compact",w="markAllRead",N="showCategoriesToggle";class M extends d.default{_buildState(e,t){const i=p.default.getUserPreferencesLocal();let s=[];const a=n.keys(r.default.getConversationsWithUnreadCounts());s=n.filter(a,(e=>!o.isHighlightsThread(e)));let d=i.recentsSortedBy||S.RecentsSortBy.Time;return this._isPresentedInDesktopLeftNav()&&d===S.RecentsSortBy.Active&&(d=S.RecentsSortBy.Time),Object.assign(Object.assign({},super._buildState(e,t)),{sortBy:d,unreadConversationIds:s,rowSize:i.recentsRowSize||S.RowSize.Default,showCategories:m.default.shouldShowCategories(),recentsViewMode:l.default.getConversationsListMode(),archivedConversationsCount:(0,c.default)().getArchivedConversations().length})}_getMenuSections(){const e=[];return this.state.archivedConversationsCount>0&&e.push({key:"filterby",menuItems:this._getFilterMenuItems()}),this.state.recentsViewMode===l.ConversationsListMode.AllConversations&&e.push({key:"sortby",title:h.getString("DesktopRecentsFilter.SortBy"),menuItems:this._getSortMenuItems()}),e.push({key:"more",title:h.getString("Global.MoreButtonTitle"),menuItems:this._getMoreMenuItems()}),e}_onHandlePickerClick(e){super._onHandlePickerClick(e)}_currentMenuText(){return this.state.recentsViewMode===l.ConversationsListMode.AllConversations?h.getString("DesktopRecentsFilter.RecentConversations"):h.getString("DesktopRecentsFilter.HiddenConversations")}_accessibilityText(){return this._accessibilityTextForSortByMode(this.state.sortBy)}_onHandleMenuCommand(e){super._onHandleMenuCommand(e);const t=_.default.newCauseId();g.log(u.LogTraceArea.Navigation,"DesktopRecentsFilter._onHandleMenuCommand, causeId: "+t);const i=this._accessibilityAnnouncementForCommand(e);i&&f.default.maybeAnnounceForAccessibility(i);const o=()=>{const e=new C.RemoteUserAppearanceTelemetryEvent;e.setDidUpdateRecentsRowSize(),g.track(e)},s=()=>{switch(e){case T:m.default.sortByTime();break;case P:m.default.sortByUnread();break;case A:m.default.sortByActive();break;case k:o(),m.default.setRowSizeToDefault();break;case I:o(),m.default.setRowSizeToCompact();break;case w:m.default.showMarkAllReadConfirmationDialog(this._getRootViewId());break;case N:this.state.recentsViewMode!==l.ConversationsListMode.AllConversations&&l.default.setConversationsListMode(l.ConversationsListMode.AllConversations),this.state.showCategories?m.default.hideCategories():m.default.showCategories();break;case v:m.default.showAllConversations();break;case b:m.default.showArchivedConversations();case y.SXActionMenuCancel:}};switch(e){case T:case P:case A:const t=this._getSortModeFromCommand(e);this.isComponentMounted()&&this.state.sortBy!==t?this.setState({sortBy:t},(()=>{n.defer((()=>{s()}))})):s();break;default:s()}}_getSortModeFromCommand(e){switch(e){default:case T:return S.RecentsSortBy.Time;case P:return S.RecentsSortBy.Unread;case A:return S.RecentsSortBy.Active}}_accessibilityTextForSortByMode(e){const t=h.getString("DesktopRecentsFilter.SortByMenu")+", ";return this.state.recentsViewMode===l.ConversationsListMode.ArchivedConversations?t+h.getString("DesktopRecentsFilter.HiddenConversations"):t+h.getString("DesktopRecentsFilter.RecentConversations")}_accessibilityAnnouncementForCommand(e){let t;switch(e){case T:t=h.getString("DesktopRecentsFilter.Time");break;case P:t=h.getString("DesktopRecentsFilter.Unread");break;case A:t=h.getString("DesktopRecentsFilter.Active");break;case v:t=h.getString("DesktopRecentsFilter.RecentConversations");break;case b:t=h.getString("DesktopRecentsFilter.HiddenConversations")}if(t)return s.default.combinedAccessibilityLabel(t,h.getString("Global.SelectedAccessibilityLabel"))}_getSortMenuItems(){const e=[{text:h.getString("DesktopRecentsFilter.Time"),command:T,selected:this.state.sortBy===S.RecentsSortBy.Time,selectableType:a.SXMenuItemSelectableType.Checkbox},{text:h.getString("DesktopRecentsFilter.Unread"),command:P,selected:this.state.sortBy===S.RecentsSortBy.Unread,selectableType:a.SXMenuItemSelectableType.Checkbox}];return this._isPresentedInDesktopLeftNav()||e.push({text:h.getString("DesktopRecentsFilter.Active"),command:A,selected:this.state.sortBy===S.RecentsSortBy.Active,selectableType:a.SXMenuItemSelectableType.Checkbox}),e}_getMoreMenuItems(){const e=[];n.isEmpty(this.state.unreadConversationIds)||this.state.recentsViewMode!==l.ConversationsListMode.AllConversations||e.push({text:h.getString("MobileRecentsFilter.MarkRead"),command:w});const t=this.state.showCategories?"DesktopRecentsFilter.HideFavorites":"DesktopRecentsFilter.ShowFavorites";return e.push({text:h.getString(t),command:N}),e}_getFilterMenuItems(){return[{text:h.getString("DesktopRecentsFilter.RecentConversations"),command:v,selected:this.state.recentsViewMode===l.ConversationsListMode.AllConversations,selectableType:a.SXMenuItemSelectableType.Checkbox},{text:h.getString("DesktopRecentsFilter.HiddenConversations"),command:b,selected:this.state.recentsViewMode===l.ConversationsListMode.ArchivedConversations,selectableType:a.SXMenuItemSelectableType.Checkbox}]}}t.default=M},24631:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopShadow=void 0;const n=i(38933),o=i(16778),s=i(15877),a=i(81760),r=i(80837),l=i(24576),c=(0,s.lazyProperties)({shadowContainer:()=>o.Styles.createViewStyle({position:"absolute",top:0,left:0,right:0,height:0,overflow:"visible"}),shadowInnerContainer:()=>o.Styles.createViewStyle({height:5,borderTopWidth:1})});class d extends l.default{render(){const e=[c.shadowInnerContainer,this._themeStyles.headerShadowBorderColorStyle,this.props.opacityStyle];return o.createElement(o.View,{style:c.shadowContainer},o.createElement(o.Animated.View,{style:e},o.createElement(n.GradientView,{style:r.default.flexOne,direction:n.GradientDirection.BOTTOM,colors:[a.Color.blackOverlay10,a.Color.transparent]})))}}t.DesktopShadow=d,t.default=d},92718:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(24787),s=i(15877),a=i(17093),r=i(24576),l=i(66127),c=(0,s.lazyProperties)({container:()=>n.Styles.createViewStyle({flexDirection:"row",justifyContent:"space-around",paddingBottom:2,paddingHorizontal:3}),containerPadding:()=>n.Styles.createViewStyle({paddingTop:10}),button:()=>n.Styles.createViewStyle({marginHorizontal:5,marginVertical:3,paddingHorizontal:2,alignItems:"stretch",flexDirection:"column",flex:1,flexBasis:20}),buttontitleStyle:()=>n.Styles.createTextStyle({overflow:"hidden",maxWidth:60})});class d extends r.default{_buildState(){return{modernizeConversationList:l.default.canModernizeConversationList()}}_renderMeetNowButton(){if(!this._isMeetNowButtonVisible())return;const e=this.props.selectedHubTab===a.HubTab.Calls?a.HubTab.MeetNowCalls:a.HubTab.MeetNowChats;return n.createElement(o.default,{hubTab:e,iconSize:17,style:c.button,buttonType:o.DesktopNewActionPickerType.TextButtonWithBorderAndIcon,showGroupedActions:!0,textStyleOverride:[c.buttontitleStyle]})}_isMeetNowButtonVisible(){return this.props.selectedHubTab===a.HubTab.Recents||this.props.selectedHubTab===a.HubTab.Calls}render(){const e=[c.container,this.state.modernizeConversationList?void 0:c.containerPadding];return n.createElement(n.View,{style:e},this._renderMeetNowButton(),n.createElement(o.default,{hubTab:this.props.selectedHubTab,iconSize:17,style:c.button,buttonType:o.DesktopNewActionPickerType.TextButtonWithBorderAndIcon,showGroupedActions:!0}))}}t.default=d},7417:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopUtilityBar=void 0;const n=i(96486),o=i(16778),s=i(24787),a=i(65110),r=i(15877),l=i(33754),c=i(93194),d=i(24576),u=i(66127),g=(0,r.lazyProperties)({container:()=>o.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingLeft:10,paddingRight:16,paddingTop:10,paddingBottom:10}),containerPaddingModernize:()=>o.Styles.createViewStyle({paddingLeft:16,paddingTop:6,paddingBottom:6}),containerWithTextButton:()=>o.Styles.createViewStyle({paddingRight:10}),containerFixedHeight:()=>o.Styles.createViewStyle({height:44}),picker:()=>o.Styles.createButtonStyle({flexDirection:"row",alignItems:"center",marginTop:2})}),h="pickerButton";class p extends d.default{constructor(){super(...arguments),this._onPickerClick=e=>{e.stopPropagation(),this._onHandlePickerClick(e)},this._onPickerButtonRef=e=>{this._pickerButton=e||void 0}}_buildState(e,t){return{showNewActionPicker:!1,modernizeConversationList:u.default.canModernizeConversationList()}}_onHandleMenuCommand(e){c.default.dismiss(h,this._getRootViewId())}_onDismiss(){}_onHandlePickerClick(e){const t={anchor:()=>this._pickerButton,useTheme:!0,positionPriorities:["bottom"],popupBeakSize:{width:0,height:0},popupOffset:{x:30,y:10}};c.default.showGroupWithOptions({id:h,config:t,getMenuGroups:()=>this._getMenuSections(),onDismiss:()=>this._onDismiss(),handleMenuCommand:e=>this._onHandleMenuCommand(e),cancelButtonTitleIOS:l.getString("Global.CancelLabel"),rootViewId:this._getRootViewId(),invokingEvent:e})}render(){const e=this.state.showNewActionPicker&&!n.isUndefined(this.props.newActionPickerContext)?o.createElement(s.default,{hubTab:this.props.newActionPickerContext,useCompactLayout:!0,buttonType:s.DesktopNewActionPickerType.TextButtonWithShadow,showGroupedActions:!0}):void 0,t=[g.container];this._isPresentedInDesktopLeftNav()&&t.push(g.containerFixedHeight),t.push(g.containerWithTextButton),this.state.modernizeConversationList&&t.push(g.containerPaddingModernize);const i=this._accessibilityText();return o.createElement(o.View,{style:t},o.createElement(a.default,{ref:this._onPickerButtonRef,style:g.picker,onPress:this._onPickerClick,accessibilityLabel:i,label:this._currentMenuText()}),e)}}t.DesktopUtilityBar=p,t.default=p},69425:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HubTab=void 0;const n=i(96486),o=i(16778),s=i(77605),a=i(97775),r=i(11930),l=i(84994),c=i(98278),d=i(46096),u=i(39285),g=i(10117),h=i(15877),p=i(34537),m=i(66127),S=i(89808),C=i(81760),f=i(40363),y=i(11010),_=i(11828),v=i(80837),b=i(77806),T=i(60305),P=i(24576),A=i(18037),k=(0,h.lazyProperties)({buttonStyle:()=>o.Styles.createViewStyle({width:80,alignItems:"center",justifyContent:"center",paddingTop:2}),buttonStyleDesktop:()=>o.Styles.createViewStyle({width:80}),buttonInnerStyleDesktop:()=>o.Styles.createViewStyle({width:80,alignItems:"center"}),buttonStyleSmall:()=>o.Styles.createViewStyle({width:60}),buttonInnerStyleDesktopSmall:()=>o.Styles.createViewStyle({width:60,alignItems:"center"}),buttonStyleLandscapeIOS:()=>o.Styles.createViewStyle({flex:-1,flexDirection:"row",justifyContent:"center",width:100,backgroundColor:C.Color.transparent}),badgeCounterContainer:()=>o.Styles.createViewStyle({position:"absolute",height:24,width:46,top:0,overflow:"visible",justifyContent:"center",alignItems:"flex-end"}),badgeCounterContainerIOSLandscape:()=>o.Styles.createViewStyle({position:"absolute",height:24,width:24,top:-1,left:0,overflow:"visible",alignItems:"flex-end"}),syncIndicator:()=>o.Styles.createViewStyle({paddingBottom:6,paddingLeft:5}),tabTitle:()=>o.Styles.createTextStyle({textAlign:"center",marginTop:2}),tabTitleDesktop:()=>o.Styles.createTextStyle({alignSelf:"stretch"}),tabTitleAndroid:()=>o.Styles.createTextStyle({textAlign:"center",marginTop:5}),tabTitleIOSLandscape:()=>o.Styles.createTextStyle({flex:-1,marginLeft:5,fontSize:y.default.controlFontSize.tabHeaderSmall}),tabTitleSmall:()=>o.Styles.createTextStyle({fontSize:y.default.controlFontSize.captionTiny,marginTop:4}),tabContainer:()=>o.Styles.createViewStyle({flexDirection:"row",justifyContent:"center"}),redBadge:()=>o.Styles.createViewStyle({backgroundColor:C.Color.red}),iconOpacity:()=>o.Styles.createViewStyle({opacity:.8}),buttonInnerContainer:()=>o.Styles.createViewStyle({justifyContent:"center",alignItems:"center"})});class I extends P.default{constructor(){super(...arguments),this._onTabRef=e=>{this._componentRef=e||void 0},this._onAnchorPress=()=>{this.props.onTabPress(this.props.tabDescriptor.tab,void 0)},this._onPress=e=>{this.props.onTabPress(this.props.tabDescriptor.tab,e&&e.timeStamp,e)},this._onLongPress=()=>{this.props.onTabLongPress&&this.props.onTabLongPress(this.props.tabDescriptor.tab)},this._onContextMenu=e=>{e.stopPropagation(),this.props.onTabLongPress&&this.props.onTabLongPress(this.props.tabDescriptor.tab,e)},this._onHoverStart=()=>{this.isComponentMounted()&&this.setState({isHovering:!0})},this._onHoverEnd=()=>{this.isComponentMounted()&&this.setState({isHovering:!1})}}_buildState(e,t){let i,n;e.tabDescriptor.selected&&(n=A.default.useAccessibleTheme()?this._themeColors.tabIndicatorColor:I._iconColorForColor(S.default.getPrimaryColor()),i=o.Styles.createTextStyle({color:n},!1));const s={useSmallTitles:!!e.useSmallTitles||T.default.isTablet()||T.default.useTabletUI(),iconColorStyle:i,iconColor:n,modernizeConversationList:m.default.canModernizeConversationList()};return t&&(s.isHovering=!1),s}requestFocus(){this._componentRef&&this._componentRef.requestFocus&&this._componentRef.requestFocus()}_shouldComponentUpdate(e,t,i,n,o,s){return e?t.tabBarHeight!==n.tabBarHeight:super._shouldComponentUpdate(e,t,i,n,o,s)}render(){var e;const t=this._isPresentedInDesktopLeftNav(),i=this.props.tabBarHeight===c.TabBarHeight.iosLandscape,h=f.default.getPlatformType()===d.PlatformType.Android,p=h&&!this._useAccessibleTheme()||this.state.isHovering,m=this.props.tabDescriptor.selectedIcon&&(p||this.props.tabDescriptor.selected)?this.props.tabDescriptor.selectedIcon:this.props.tabDescriptor.icon,S=[this._themeStyles.primaryIconColorStyle],T=4===this.props.tabGroup.length;let P;p&&S.push(k.iconOpacity);const A=this.props.tabDescriptor.badgeCount,I=i?k.badgeCounterContainerIOSLandscape:k.badgeCounterContainer;A&&!this.props.tabDescriptor.showSpinner&&(P=o.createElement(u.default,{style:I,blockPointerEvents:!0},o.createElement(s.default,{count:i?void 0:A.toString(),rawCount:A,colorStyle:k.redBadge,borderColor:this._badgeBorderColor(t),badgeSize:i?s.BadgeSize.Small:s.BadgeSize.Medium,borderWidth:2,isHighPriority:!0,fixedSize:!0})));const w=this.props.tabDescriptor.showSpinner?o.createElement(u.default,{style:[I,k.syncIndicator],blockPointerEvents:!0},o.createElement(b.default,{size:12,color:C.Color.transparent,indicatorColor:this._themeColors.secondaryTextColor,largeIndicator:!0})):void 0,N=l.default.tabBarHeightStyle(this.props.tabBarHeight),M=[k.buttonStyle,N,t?T&&!this.props.useSmallTabs?k.buttonStyleDesktop:k.buttonStyleSmall:void 0],E=[k.buttonInnerContainer];i&&E.push(k.buttonStyleLandscapeIOS),this.props.widthStyle?(M.push(this.props.widthStyle),E.push(this.props.widthStyle)):t&&E.push(T&&!this.props.useSmallTabs?k.buttonInnerStyleDesktop:k.buttonInnerStyleDesktopSmall,N);const x=[i?y.default.fontStyle.body:y.default.fontStyle.captionSmall,this.state.iconColorStyle||this._themeStyles.secondaryTextColorStyle];this.props.tabDescriptor.selected||this._useAccessibleTheme()||!this._isPresentedInDesktopLeftNav()||x.push(k.iconOpacity),i?x.push(k.tabTitleIOSLandscape):(x.push(h?k.tabTitleAndroid:k.tabTitle),this.state.useSmallTitles&&x.push(k.tabTitleSmall),t&&x.push(k.tabTitleDesktop));const L=i||t?_.IconSize.size20:_.IconSize.size24;let R=o.createElement(g.default,{key:"icon",icon:m,color:null!==(e=this.state.iconColor)&&void 0!==e?e:this._themeColors.primaryIconColor,size:L,style:this.state.iconColor?void 0:k.iconOpacity});i&&(R=o.createElement(o.View,{key:"icon",style:v.default.overflowVisible},R,P,w));const D=r.default.tabAccessibilityLabel(this.props.tabDescriptor.accessibilityLabel||this.props.tabDescriptor.title,n.indexOf(this.props.tabGroup,this.props.tabDescriptor.tab),this.props.tabGroup.length,this.props.includeTabCountOnDesktop),B=r.default.tabAccessibilityTraits(!!this.props.tabDescriptor.selected),O={style:M,title:this.props.tabDescriptor.title,accessibilityLabel:D,accessibilityTraits:B,importantForAccessibility:o.Types.ImportantForAccessibility.Yes,tabIndex:this.props.tabIndex,disabled:this.props.tabDescriptor.disabled,onPress:this._onPress,onLongPress:void 0,onContextMenu:this._onContextMenu,onHoverEnd:this._onHoverEnd,onHoverStart:this._onHoverStart},F=this.props.hideLabel?void 0:o.createElement(o.Text,{key:"label",style:x,numberOfLines:1,allowFontScaling:!1},this.props.useSmallTabs?" ":this.props.tabDescriptor.title),V=o.createElement(o.View,{style:E},R,F,t?P:void 0),U=i||t;{let e;return e=this.props.coachMarkType?o.createElement(a.default.View,{coachMarkType:this.props.coachMarkType,onAnchorPress:this._onAnchorPress,onPress:O.onPress,anchorAccessibilityLabel:D},V):V,o.createElement(o.Button,Object.assign({style:v.default.overflowVisible,ref:this._onTabRef},O),e,U?void 0:P,U?void 0:w)}}_badgeBorderColor(e){return this.state.modernizeConversationList&&(e||this._isPresentedInTabletLeftNav())?p.default.getBackgroundColor(this._useDarkTheme(),this._useAccessibleTheme(),this._themeColors):e?this._themeColors.secondaryBackgroundColor:this._themeColors.primaryBackgroundColor}static _iconColorForColor(e){return e===C.Color.yellow?C.Color.orange:e}_pauseWhenNotVisible(){return!0}}t.HubTab=I,t.default=I},7213:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HubTabBar=void 0;const n=i(96486),o=(i(31844),i(16778)),s=i(11009),a=i(11930),r=i(84994),l=i(98278),c=i(69425),d=i(10400),u=i(15877),g=i(33754),h=i(34537),p=i(12462),m=i(66127),S=i(6250),C=i(89808),f=i(17093),y=(i(29130),i(51070)),_=i(81115),v=i(11828),b=i(17640),T=i(60305),P=i(24576),A=i(53374),k=i(73877),I=(0,u.lazyProperties)({contentContainer:()=>o.Styles.createViewStyle({alignSelf:"stretch",flexDirection:"row",justifyContent:"space-around",alignItems:"center",overflow:"visible"}),tabShadow:()=>o.Styles.createViewStyle({position:"absolute",left:0,right:0,top:-1,height:1})});class w extends P.default{constructor(){super(...arguments),this._mountedRefsMap=new S.default,this._renderTab=(e,t,i)=>{let s;return n.isUndefined(this.props.focussedHubTab)||(s=this.props.focussedHubTab===e.tab?0:-1),o.createElement(c.default,{ref:this._mountedRefsMap.onComponentRef("tab"+e.tab),key:e.tab,tabDescriptor:e,tabGroup:this.props.tabs,tabBarHeight:t,widthStyle:i,onTabPress:this.props.onTabPress,onTabLongPress:this.props.onTabLongPress,coachMarkType:e.coachMarkType,tabIndex:s,includeTabCountOnDesktop:!r.default.useTabListContainer(),useSmallTitles:this.props.useSmallTitles,useSmallTabs:this.props.useSmallTabs,hideLabel:this.props.hideLabels})}}_buildState(e,t){const i=b.default.isSyncingConversationList()||b.default.isSyncingMessages();this._getRootViewId();let n={gradientColors:C.default.getGradientColors(),safeAreaPadding:this._getContext().isPresentedByMobileStackNavigator||!d.default.isKeyboardSeen()?y.default.bottomSafeAreaInset():0,useIOSLandscapeStyles:!1,useTabletUI:T.default.useTabletUI(),isSyncInProgress:i};return e.hideLabels?n.tabBarHeight=l.TabBarHeight.CompactDesktop:n.useIOSLandscapeStyles?n.tabBarHeight=l.TabBarHeight.iosLandscape:n.useTabletUI?n.tabBarHeight=l.TabBarHeight.Tablet:n.tabBarHeight=l.TabBarHeight.Default,n.modernizeConversationList=m.default.canModernizeConversationList(),n.modernizeHubTabIcons=m.default.canModernizeHubTabIcons(),n}_shouldComponentUpdate(e,t,i,n,o,s){return e?i.tabBarHeight!==o.tabBarHeight:super._shouldComponentUpdate(e,t,i,n,o,s)}UNSAFE_componentWillUpdate(e,t,i){if(super.UNSAFE_componentWillUpdate(e,t,i),e.hasFocus&&!n.isUndefined(e.focussedHubTab)&&this.props.focussedHubTab!==e.focussedHubTab){const t=this.tabRef(e.focussedHubTab);t&&t.requestFocus&&t.requestFocus()}}tabRef(e){return this._mountedRefsMap.ref("tab"+e)}_getBackgroundColorStyle(){return this.state.modernizeConversationList?this._isPresentedInDesktopLeftNav()?void 0:h.default.getBackgroundColorStyle(this._useDarkTheme(),this._useAccessibleTheme(),this._themeStyles):this._isPresentedInDesktopLeftNav()?void 0:this._themeStyles.primaryBackgroundColorStyle}render(){let e;const t=[I.contentContainer,this._getBackgroundColorStyle(),r.default.tabBarHeightStyle(this.state.tabBarHeight)],i=n.map(this.props.tabs,(e=>this._descriptorForTab(this.props,e,this.state.isSyncInProgress)));if(this.state.useIOSLandscapeStyles){const t=i.length,n=10*t,s=Math.floor((k.default.measureWindow(this._getRootViewId()).width-n)/t);e=t?o.Styles.createViewStyle({width:s},!1):void 0}this.state.safeAreaPadding&&(t.push(_.default.paddingBottomStyle(this.state.safeAreaPadding)),t.push(_.default.heightStyle(r.default.tabBarHeight(this.state.tabBarHeight)+this.state.safeAreaPadding))),this.props.style&&t.push(this.props.style);return o.createElement(o.View,{style:t,onKeyPress:this.props.onKeyPress,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onLayout:this.props.onLayout,accessibilityTraits:r.default.useTabListContainer()?o.Types.AccessibilityTrait.TabList:void 0},undefined,n.map(i,(t=>this._renderTab(t,this.state.tabBarHeight,e))))}_descriptorForTab(e,t,i){let n,o=0,a=e.showSpinnerWhenSyncing&&i&&t===f.HubTab.Recents;return t===f.HubTab.Recents?o=e.activeConversationsCount||0:t===f.HubTab.Notifications&&(o=e.unreadAlertsCount||0),t===f.HubTab.People&&(n=s.CoachMarkType.People),Object.assign(Object.assign({},w._displayInfoForTab(t,o,this.state.modernizeHubTabIcons)),{selected:e.currentHubTab===t,tab:t,badgeCount:o,showSpinner:a,coachMarkType:n,disabled:e.disableCamera&&t===f.HubTab.CaptureHub})}static _displayInfoForTab(e,t,i){switch(e){case f.HubTab.Recents:const n=g.getString("Hub.RecentsTabTitle");return{icon:v.SkypeIcon.Message,selectedIcon:i?v.SkypeIcon.ChatsInvertedGradient:v.SkypeIcon.ChatsInverted,title:n,accessibilityLabel:a.default.combinedAccessibilityLabel(n,g.getString("Hub.UnreadCounterScreenReaderLabel",{count:t}))};case f.HubTab.MeetNowChats:case f.HubTab.MeetNowCalls:const o=g.getString("MeetNow.FeatureName");return{icon:p.default.getMeetNowIcon(),title:o,accessibilityLabel:o};case f.HubTab.Calls:return{icon:v.SkypeIcon.CallStart,selectedIcon:i?v.SkypeIcon.CallsInvertedGradient:v.SkypeIcon.CallsInverted,title:g.getString("Hub.CallsTabTitle")};case f.HubTab.CaptureHub:return{icon:v.SkypeIcon.Camera,selectedIcon:v.SkypeIcon.CameraInverted,title:g.getString("Hub.CameraButtonTitle")};case f.HubTab.People:return{icon:v.SkypeIcon.People,selectedIcon:i?v.SkypeIcon.PeopleFillGradient:v.SkypeIcon.PeopleFill,title:g.getString("Hub.ContactsTabTitle")};case f.HubTab.Notifications:const s=g.getString("Notifications.Notify");return{icon:v.SkypeIcon.Alert,selectedIcon:i?v.SkypeIcon.AlertFillNewFontGradient:v.SkypeIcon.AlertFillNewFont,title:s,accessibilityLabel:a.default.combinedAccessibilityLabel(s,g.getString("Hub.NotificationCounterScreenReaderLabel",{count:t}))};default:return A.default.switchStatementExhaustiveChecking(e)}}_pauseWhenNotVisible(){return!0}}t.HubTabBar=w,t.default=w},89951:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(31844),s=i(15069),a=i(16778),r=i(83267),l=i(72105),c=i(89391),d=i(77605),u=i(90239),g=i(97775),h=i(11009),p=i(11930),m=i(47204),S=i(44252),C=i(12429),f=i(45892),y=i(21847),_=i(37490),v=i(80843),b=i(68894),T=i(46096),P=i(11375),A=i(46195),k=i(90070),I=i(13944),w=i(36237),N=i(39769),M=i(15877),E=i(33754),x=i(44285),L=i(64723),R=i(12462),D=i(66127),B=i(93486),O=i(34537),F=i(78735),V=i(88273),U=i(18078),H=i(4735),W=i(17093),z=i(82052),G=i(95697),K=i(29130),j=i(51070),q=i(81115),Q=i(36150),X=i(26978),J=i(16392),$=i(22538),Y=i(81760),Z=i(11828),ee=i(34528),te=i(11010),ie=i(80837),ne=i(60305),oe=i(19675),se=i(24576),ae=i(2301),re=i(67977),le=i(72758),ce=i(92772),de=i(53374),ue=i(5470),ge=i(30124),he=i(93194),pe=i(67024),me=i(15963);var Se;!function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(Se||(Se={}));const Ce=5*Z.IconSize.size24,fe=2*Z.IconSize.size24,ye="MeControlModal",_e=(0,M.lazyProperties)({hubHeader:()=>a.Styles.createViewStyle({flex:1,flexDirection:"row",alignSelf:"stretch",alignItems:"center",justifyContent:"space-between",backgroundColor:Y.Color.transparent,overflow:"visible"}),titleWrapper:()=>a.Styles.createViewStyle({height:Z.IconSize.default,justifyContent:"center",alignItems:"center",overflow:"visible"}),titleWrapperLandscape:()=>a.Styles.createViewStyle({height:Z.IconSize.size32}),leftControls:()=>a.Styles.createViewStyle({flexDirection:"row"}),leftControlWidth:()=>a.Styles.createViewStyle({width:Ce}),rightControls:()=>a.Styles.createViewStyle({flexDirection:"row",justifyContent:"flex-end"}),rightControlsWidth:()=>a.Styles.createViewStyle({width:Ce}),smallControls:()=>a.Styles.createViewStyle({width:fe}),iconContainer:()=>a.Styles.createViewStyle({flexDirection:"row",justifyContent:"center",alignItems:"center",width:Z.IconSize.default,height:Z.IconSize.default}),iconContainerSmall:()=>a.Styles.createViewStyle({width:Z.IconSize.size32,marginRight:4}),iconContainerLandscape:()=>a.Styles.createViewStyle({height:Z.IconSize.size32,marginTop:5}),badgeStyle:()=>a.Styles.createViewStyle({position:"absolute",top:2,right:2}),title:()=>a.Styles.createTextStyle({textAlign:"center"}),redBadge:()=>a.Styles.createViewStyle({backgroundColor:Y.Color.red}),userIconLeftContainer:()=>a.Styles.createViewStyle({marginLeft:10}),userNameAndMoodContainer:()=>a.Styles.createViewStyle({marginLeft:10,justifyContent:"flex-start"}),extraHorizontalPaddingStyle:()=>a.Styles.createViewStyle({paddingHorizontal:6}),userNameControl:()=>a.Styles.createTextStyle({justifyContent:"flex-start",flexDirection:"row"}),limitArea:()=>a.Styles.createViewStyle({flexShrink:1})});class ve extends se.default{constructor(){super(...arguments),this.handleFocusEvent=e=>!(e!==P.FocusEvent.CloseRightPanel||!this._userIconRef)&&(this._userIconRef.requestFocus(),!0),this._onLayoutChanged=e=>{this.state.viewWidth!==e.width&&this.setState({viewWidth:e.width})},this._onPlusButtonRef=e=>{this._plusButton=e||void 0},this._onNotificationsSettingsButtonRef=e=>{this._notificationsSettingsButton=e||void 0},this._onRecentsFilterButtonRef=e=>{this._recentsFilterButton=e||void 0},this._onContactsFilterButtonRef=e=>{this._contactsFilterButton=e||void 0},this._onMeetNowButtonRef=e=>{this._meetNowButton=e||void 0},this._onQuickCallButtonClick=(e,t)=>{t&&t.stopPropagation&&t.stopPropagation();const i=de.default.newCauseId();w.log(T.LogTraceArea.Navigation,"MobileHubHeader._onQuickCallButtonClick, causeId: "+i),this._registerMobileFocusHandler((()=>this._quickCallButton)),H.default.navigateToQuickCallPanelWithParams({causeId:i,newGroup:this.props.modernizeMobileHubFabs},this._getRootViewId())},this._onFeedbackButtonClick=(e,t)=>{t&&t.stopPropagation&&t.stopPropagation(),G.default.reportProblem(!0,e)},this._onMeetNowButtonClick=(e,t)=>{t&&t.stopPropagation&&t.stopPropagation();const i=de.default.newCauseId();t&&pe.default.createOneShotTrackerAndMarkPressTime(i,me.ScenarioName.ResponsivenessMeetNow,t);let n=L.MeetNowOrigin.Unknown;this.state.currentHubTab===W.HubTab.Recents?n=L.MeetNowOrigin.RecentChatsTabMobile:this.state.currentHubTab===W.HubTab.Calls&&(n=L.MeetNowOrigin.CallsTabMobile),c.default.getS4LCMCFeatures().redesignedLobbiesEnabled&&ge.default.isUsingStackNavigationContext()?ue.default.navigateToCreateOrJoinFlyout():ne.default.isTablet()?this._showMeetNowPopup(n,e,t):x.MeetNowHelpers.showNewMeetNow(n)},this._onNotificationsSettingsButtonClick=(e,t)=>{t&&t.stopPropagation&&t.stopPropagation();const i=()=>this._notificationsSettingsButton;this._registerMobileFocusHandler(i),r.default.showMenu(this.state.hasUnreadAlerts,i,this._getRootViewId(),t)},this._onRecentsFilterButtonClick=()=>{z.default.showOptionsMenu(void 0,(()=>this._recentsFilterButton),this._getRootViewId(),void 0)},this._onContactsFilterButtonClick=(e,t)=>{S.default.showOptionsMenu((()=>this._contactsFilterButton),this._getRootViewId(),t)},this._onUserIconAnchorClick=()=>{this._onUserIconButtonClick()},this._onUserIconRef=e=>{this._userIconRef=e||void 0,$.EnsureStarted(v.default).then((()=>{v.default.setAnchor(b.EngagementTooltipType.Profile,e)}))},this._onTitleRef=e=>{this._titleRef=e||void 0},this._onQuickCallButtonRef=e=>{this._quickCallButton=e||void 0},this._onUserIconButtonClick=e=>{e&&e.stopPropagation&&e.stopPropagation();const t=de.default.newCauseId();let i;if(w.log(T.LogTraceArea.Navigation,"MobileHubHeader._onUserIconButtonClick navigateToMeControl, causeId: "+t),_.dismissAll(),e&&(i=de.default.newCauseId(),pe.default.createTrackerAndMarkPressTime(i,me.ScenarioName.ResponsivenessOpenProfile,e)),this._registerMobileFocusHandler((()=>this._userIconRef)),ne.default.useTabletUINoSubscription()){const e=a.createElement(y.default,{key:"DesktopMeControlPanel",userMri:U.default.getSkypeMri(),dialogId:ye,anchor:()=>this._userIconRef});m.default.showModal(e,ye,{rootViewId:this._getRootViewId()})}else H.default.navigateToMeControl(this._getRootViewId(),t,J.StackNavigationDirection.Present);i&&pe.default.markActionDoneAndRemoveTracker(i)},this._onNotificationsButtonClick=(e,t)=>{t&&t.stopPropagation&&t.stopPropagation(),H.default.navigateToAlertsHub()}}_buildState(e,t){const i=this._isPresentedInTabletLeftNav();let s=j.default.statusBarHeight();s&&i&&(s-=ne.default.useTabletUI()?1:7);const r=le.default.getFullUserProfileByMri(U.default.getSkypeMri());let d,g;const h=Q.default.isMobileScreenReaderEnabled();if(h){const e=V.default.getStatus();d=n.includes(ce.myAllowedStatuses(),e)?e:u.UserStatus.Online,g=r.gender}const p=c.default.getS4LContactsFeatures(),m=c.default.getOnboardingFeatures(),{modernizeConversationList:S}=c.default.getS4LMessagingFeatures(),C=D.default.canModernizeMobileTabHeader()||D.default.canModernizeMobileTabHeaderTablets(),f=c.default.getS4LMessagingFeatures().modernizeMobileTopOfTheScreen,y=O.default.getRowPadding(!1),_=this._getRootViewId(),v=r.getDisplayName(),b=r.mood,T={left:y.left,right:y.right};let P={leavePaddingForStatusBar:a.StatusBar.isOverlay()&&(e.deviceOrientation===o.DeviceOrientation.Portrait||i),statusBarHeight:s,safeAreaHorizontalPaddingStyle:j.default.horizontalPaddingStyle(T),safeAreaHorizontalInsets:j.default.horizontalInsets(T),hasUnreadAlerts:!!e.shouldTrackUnreadAlerts&&l.default.hasUnreadAlerts(!0),contactsPanelTabSelected:F.default.getUserPreferencesLocal().contactsPanelV2Filter,enableAlwaysShowActiveNowFilter:p.enableAlwaysShowActiveNowFilter,enableHeartEntryPoint:c.default.getConfigSettings().brb.enableHeartEntryPoint,userStatus:d,gender:g,isMobileScreenReaderEnabled:h,displayUserIconInAllHubs:m.displayUserIconInAllHubs,isChild:B.default.isChild(),modernizeConversationList:S,modernizeMobileTabHeader:C,modernizeMobileTopOfTheScreen:f,moodString:b,userName:v,viewWidth:i?X.default.getWidth():K.default.getWidth(_)};return t&&(P.currentHubTab=e.initialHubTab),P}componentDidMount(){super.componentDidMount(),this._plusButton&&!this.props.suppressFocus&&this._plusButton.requestFocus(),P.register(P.FocusEvent.ConversationDeleted,this)}componentWillUnMount(){super.componentWillUnmount(),P.unregister(P.FocusEvent.ConversationDeleted,this)}_shouldComponentUpdate(e,t,i,n,o,s){return e?t.isVisible!==n.isVisible||t.deviceOrientation!==n.deviceOrientation||i.currentHubTab!==o.currentHubTab||i.userName!==o.userName:super._shouldComponentUpdate(e,t,i,n,o,s)}_componentDidUpdate(e,t,i){super._componentDidUpdate(e,t,i);const n=this.state.currentHubTab!==t.currentHubTab;(this.props.isVisible&&!e.isVisible||n)&&this._plusButton&&!this.props.suppressFocus&&this._plusButton.requestFocus()}UNSAFE_componentWillReceiveProps(e,t){if(super.UNSAFE_componentWillReceiveProps(e,t),e.unreadAlertsCount!==this.props.unreadAlertsCount){const t=E.getString("Hub.NotificationCounterScreenReaderLabel",{count:e.unreadAlertsCount||0});a.Accessibility.announceForAccessibility(t)}}updateHubTab(e){return!(!this.isComponentMounted()||this.state.currentHubTab===e)&&(this.setState({currentHubTab:e}),!0)}requestFocus(){this._plusButton&&!this.props.suppressFocus&&this._plusButton.requestFocus()}focusCenterControl(){this._userIconRef?this._userIconRef.requestFocus():this._titleRef&&this._titleRef.requestFocus()}render(){const e=k.default.headerButtonLayoutForHubTab({hubTab:this.state.currentHubTab,useTabletUI:this._isPresentedInTabletLeftNav(),enableHeartEntryPoint:this.state.enableHeartEntryPoint,mobileHubFABEnabled:!!this.props.mobileHubFABEnabled,hideAlertsButton:!!this.props.hideAlertsButton,modernizeHubFabs:!!this.props.modernizeMobileHubFabs,modernizeMobileTabHeader:!!this.state.modernizeMobileTabHeader,modernizeMobileTopOfTheScreen:this.state.modernizeMobileTopOfTheScreen}),t=this._getLeftControls(e),i=this._getCenterControls(e),n=this._getRightControls(e);let o=[_e.hubHeader];return this.state.leavePaddingForStatusBar&&o.push(q.default.marginTopStyle(this.state.statusBarHeight)),this.props.style&&o.push(this.props.style),this.state.safeAreaHorizontalPaddingStyle&&o.push(this.state.safeAreaHorizontalPaddingStyle),this.state.modernizeMobileTopOfTheScreen&&o.push(_e.extraHorizontalPaddingStyle),a.createElement(a.View,{style:o,onLayout:this._onLayoutChanged},t,i,n)}_renderIconButton(e,t){let i=this._useLandscapeLayout()?Z.IconSize.size20:this.state.modernizeMobileTabHeader?Z.IconSize.size28:Z.IconSize.size24;const n=e.onPressCallback;let o=n?e=>n(this._getRootViewId(),e):void 0;o&&t&&(o=i=>{e.onPressCallback&&e.onPressCallback(this._getRootViewId(),i,void 0,t)});const s=e.coachMarkDescriptor,r={style:e.iconButtonStyles,size:i,color:this._themeColors.headerIconColor,hoverColor:this._themeColors.iconHoverColor,icon:e.icon,title:e.title,accessibilityLabel:e.accessibilityLabel||e.title,disabled:e.disabled,key:e.key,onPress:o};return s?a.createElement(g.default.IconButton,Object.assign({anchorRef:e.ref,coachMarkType:s.type,positions:s.positions,onAnchorPress:s.onPress,anchorAccessibilityLabel:s.accessibilityLabel},r)):a.createElement(I.default,Object.assign({ref:e.ref},r))}_renderPlusButton(e){const t=k.default.actionButtonForHubTab(this.state.currentHubTab,!!this.props.disableHighBandwidthOperations,!!this.props.modernizeMobileHubFabs,!this.props.showCallsActionButton);if(t){const i=this.state.currentHubTab===W.HubTab.Recents&&this._isPresentedInTabletLeftNav()?{type:h.CoachMarkType.Plus,onPress:()=>{t.onPressCallback&&t.onPressCallback(this._getRootViewId())},accessibilityLabel:t.title}:void 0;return this._renderIconButton(Object.assign(Object.assign({},t),{ref:this._onPlusButtonRef,iconButtonStyles:e,coachMarkDescriptor:i,key:"plus"}),(()=>this._plusButton))}}_renderSearchButton(e){const t=k.default.searchButtonForHubTab(this.state.currentHubTab,this.state.isMobileScreenReaderEnabled);if(t)return this._renderIconButton(Object.assign(Object.assign({},t),{iconButtonStyles:e,key:"search"}))}_renderMeetNowButton(e){return this._renderIconButton({title:E.getString("MeetNow.FeatureName"),icon:R.default.getMeetNowIcon(),iconButtonStyles:e,onPressCallback:this._onMeetNowButtonClick,key:"meetnow",ref:this._onMeetNowButtonRef})}_renderFeedbackButton(e){if(this.state.isChild)return;const t=E.getString("HubHeaderPanel.FeedbackButtonLabel");return this._renderIconButton({title:t,icon:Z.SkypeIcon.HeartOutline,iconButtonStyles:e,onPressCallback:this._onFeedbackButtonClick,key:"feedback"})}_renderNotificationsSettingsButton(e){return this._renderIconButton({title:E.getString("Global.MoreOptions"),icon:this.state.modernizeMobileTabHeader?Z.SkypeIcon.Settings:ee.moreIcon(),iconButtonStyles:e,ref:this._onNotificationsSettingsButtonRef,onPressCallback:this._onNotificationsSettingsButtonClick,key:"notificationsettings"})}_renderRecentsFilterButton(e,t){const i=t===Se.Right&&s.default.isMobile()?[...e,_e.iconContainerSmall]:e;return this._renderIconButton({title:E.getString("MobileRecentsFilter.ManageChats"),icon:t===Se.Right?ee.moreIcon():Z.SkypeIcon.Filter,iconButtonStyles:i,ref:this._onRecentsFilterButtonRef,onPressCallback:this._onRecentsFilterButtonClick,key:"filter"})}_renderContactsFilterButton(e,t){const i=t===Se.Right&&s.default.isMobile()?[...e,_e.iconContainerSmall]:e;return this.state.contactsPanelTabSelected!==C.ContactsPanelFilter.All||this.state.enableAlwaysShowActiveNowFilter?this._renderIconButton({title:E.getString("ContactsPanelFilter.FilterOptions"),icon:t===Se.Right?ee.moreIcon():Z.SkypeIcon.Filter,iconButtonStyles:i,ref:this._onContactsFilterButtonRef,onPressCallback:this._onContactsFilterButtonClick,key:"contactsFilter"}):void 0}_renderNotificationButton(e){const t=E.getString("Hub.NotificationCounterScreenReaderLabel",{count:this.props.unreadAlertsCount||0}),i=this._renderIconButton({title:t,accessibilityLabel:t,icon:Z.SkypeIcon.Alert,iconButtonStyles:e,onPressCallback:this._onNotificationsButtonClick,key:"notifications"});let n;return n=this.props.unreadAlertsCount?a.createElement(a.View,{key:"notifications",style:e},i,a.createElement(d.default,{style:_e.badgeStyle,blockPointerEvents:!0,count:this.props.unreadAlertsCount.toString(),rawCount:this.props.unreadAlertsCount,colorStyle:_e.redBadge,borderColor:this._getBorderColor(),badgeSize:d.BadgeSize.Medium,borderWidth:2,isHighPriority:!0,fixedSize:!0,importantForAccessibility:a.Types.ImportantForAccessibility.NoHideDescendants})):i,a.createElement(a.View,{key:"notifications"},n)}_getBorderColor(){return this.state.modernizeConversationList&&this._isPresentedInTabletLeftNav()?O.default.getBackgroundColor(this._useDarkTheme(),this._useAccessibleTheme(),this._themeColors):this._themeColors.primaryBackgroundColor}getMoodStyle(){return O.default.getItemSubtitleTextStyle(this._useDarkTheme(),!1,this._useAccessibleTheme(),this._themeStyles,!0)}_getLeftControls(e){const t=[_e.iconContainer];this._useLandscapeLayout()&&t.push(_e.iconContainerLandscape);const i=n.map(e.leftControls,(e=>this._renderControlForType(e,t,Se.Left))),o=[_e.leftControls,this.state.modernizeMobileTopOfTheScreen?ie.default.flexOne:_e.leftControlWidth];return!this.state.modernizeMobileTopOfTheScreen&&e.leftControls.length<=1&&e.rightControls.length<=1&&o.push(_e.smallControls),a.createElement(a.View,{style:o},i)}_renderControlForType(e,t,i){const n=E.getString("UserIcon.MyInfo");switch(e){case A.HeaderButtonType.Profile:return a.createElement(g.default.Button,{key:"usericon",onPress:this._onUserIconButtonClick,style:_e.userIconLeftContainer,activeOpacity:.8,coachMarkType:h.CoachMarkType.Profile,accessibilityLabel:n,anchorAccessibilityLabel:n,onAnchorPress:this._onUserIconAnchorClick,anchorRef:this._onUserIconRef},this._renderUserIcon());case A.HeaderButtonType.NameAndMoodText:return a.createElement(g.default.Button,{key:"usernameandmood",onPress:this._onUserIconButtonClick,style:[_e.userIconLeftContainer,_e.limitArea,ie.default.flexOne],coachMarkType:h.CoachMarkType.Profile,accessibilityLabel:n,anchorAccessibilityLabel:n,onAnchorPress:this._onUserIconAnchorClick,anchorRef:this._onUserIconRef},this._renderUserName(),this._renderUserMood());case A.HeaderButtonType.Notifications:return this._renderNotificationButton(t);case A.HeaderButtonType.RecentsFilter:return this._renderRecentsFilterButton(t,i);case A.HeaderButtonType.Feedback:return this._renderFeedbackButton(t);case A.HeaderButtonType.Action:return this._renderPlusButton(t);case A.HeaderButtonType.Search:return this._renderSearchButton(t);case A.HeaderButtonType.NotificationsSettings:return this._renderNotificationsSettingsButton(t);case A.HeaderButtonType.Call:return this._renderIconButton({title:this.props.modernizeMobileHubFabs?E.getString("QuickCallPanel.PanelHeaderNewCall"):E.getString("HubHeaderPanel.QuickCallButtonLabel"),icon:this.props.modernizeMobileHubFabs?Z.SkypeIcon.CallAdd:Z.SkypeIcon.CallList,iconButtonStyles:t,onPressCallback:this._onQuickCallButtonClick,ref:this._onQuickCallButtonRef,key:"quickcall"});case A.HeaderButtonType.ContactsFilter:return this._renderContactsFilterButton(t,i);case A.HeaderButtonType.MeetNow:return this._renderMeetNowButton(t)}}_renderUserIcon(){return a.createElement(ae.UserIcon,{key:"usericon",size:re.UserIconSize.Size40,userMri:U.default.getSkypeMri(),hideBlockedOverlay:!0,statusTypes:ce.myAllowedStatuses(),statusBorderColor:this._themeColors.primaryBackgroundColor})}_shouldRenderUserIcon(e){return e.centerControl===A.HeaderButtonType.Profile||(0,N.shouldRunUserIconExperiment)(e,this.state.displayUserIconInAllHubs)}_renderUserName(){return a.createElement(a.Text,{key:"userName",numberOfLines:1,style:[te.default.modernizeSmallHeaderMobileFontStyle(),_e.userNameControl],ellipsizeMode:"tail"},this.state.userName)}_renderUserMood(){return a.createElement(f.default,{key:"userMood",shouldRenderEditor:!1,hideIcons:!0,moodMessageInStore:this.state.moodString,placeholderText:E.getString("UserSettingsPanel.SetMoodTitle"),onShowMoodEditor:this._onUserIconAnchorClick})}_getCenterControls(e){if(this.state.modernizeMobileTopOfTheScreen)return;let t,i,o;if(this._shouldRenderUserIcon(e))t=this._renderUserIcon();else if(e.centerControl===A.HeaderButtonType.Title){let t;switch(this.state.currentHubTab){case W.HubTab.Recents:t=E.getString("Hub.RecentsTabTitle");break;case W.HubTab.Calls:t=E.getString("Hub.CallsTabTitle");break;case W.HubTab.People:t=E.getString("Hub.ContactsTabTitle");break;case W.HubTab.Notifications:t=E.getString("Notifications.Notify")}if(t&&this.state.viewWidth){const n=e.leftControls.length>1||e.rightControls.length>1?Ce:fe,o=this.state.viewWidth-2*n-this.state.safeAreaHorizontalInsets.left-this.state.safeAreaHorizontalInsets.right,s=a.Styles.createViewStyle({width:o},!1),r=p.default.headerAccessibilityInfo(t);i=a.createElement(a.View,{style:[_e.titleWrapper,this._useLandscapeLayout()?_e.titleWrapperLandscape:void 0],ref:this._onTitleRef,accessibilityLabel:r.accessibilityLabel,importantForAccessibility:a.Types.ImportantForAccessibility.Yes,accessibilityTraits:r.accessibilityTraits},a.createElement(oe.PanelHeader,{key:"title",numberOfLines:1,style:[_e.title,s],accessibilityHidden:!0},t))}}if(i)o=i;else{const e=E.getString("UserIcon.MyInfo")+(n.isUndefined(this.state.userStatus)?"":", "+ce.userStatusLabel(this.state.userStatus,this.state.gender));o=a.createElement(g.default.Button,{key:"usericon",onPress:this._onUserIconButtonClick,style:_e.iconContainer,activeOpacity:.8,coachMarkType:h.CoachMarkType.Profile,accessibilityLabel:e,anchorAccessibilityLabel:e,onAnchorPress:this._onUserIconAnchorClick,anchorRef:this._onUserIconRef},t)}return this.props.animatedTransitionStyle&&(o=a.createElement(a.Animated.View,{style:this.props.animatedTransitionStyle},o)),a.createElement(a.View,{style:ie.default.overflowVisible},o)}_getRightControls(e){const t=[_e.iconContainer];this._useLandscapeLayout()&&t.push(_e.iconContainerLandscape);const i=n.map(e.rightControls,(e=>this._renderControlForType(e,t,Se.Right))),o=[_e.rightControls,this.state.modernizeMobileTopOfTheScreen?void 0:_e.rightControlsWidth];return!this.state.modernizeMobileTopOfTheScreen&&e.leftControls.length<=1&&e.rightControls.length<=1&&o.push(_e.smallControls),a.createElement(a.View,{style:o},i)}_showMeetNowPopup(e,t,i){const n=()=>this._meetNowButton;this._registerMobileFocusHandler(n),he.default.showWithOptions({id:he.default.menuId(),config:{anchor:n,useTheme:!0,positionPriorities:["bottom"]},getMenuItems:x.MeetNowHelpers.getMeetNowMenuItems,handleMenuCommand:t=>x.MeetNowHelpers.handleMeetNowActionMenuCommand(t,e),rootViewId:t,invokingEvent:i})}_useLandscapeLayout(){return this.props.deviceOrientation===o.DeviceOrientation.Landscape&&!this._getContext().isPresentedInDesktopLeftNav}_registerMobileFocusHandler(e){ne.default.useTabletUINoSubscription()&&p.default.registerMobileFocusHandler(P.FocusEvent.CloseMobileModal,e)}_pauseWhenNotVisible(){return!0}}t.default=ve},19436:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(15069),s=i(16778),a=i(75352),r=i(67930),l=i(94224),c=i(24506),d=i(98278),u=i(87134),g=i(46096),h=i(36237),p=i(15877),m=i(33754),S=i(35337),C=i(85683),f=i(39182),y=i(42484),_=i(40363),v=i(11828),b=i(53374),T=i(47447),P=(0,p.lazyProperties)({container:()=>s.Styles.createViewStyle({marginHorizontal:20}),sectionTitle:()=>s.Styles.createViewStyle({marginTop:20})});class A extends r.default{constructor(){super(...arguments),this._callInitiatedByAVSettings=!1,this._handleTestCall=()=>{const e=b.default.newCauseId();this.state.activeEchoCallId?(h.log(g.LogTraceArea.AVSettings,"User requested to end the test call, causeId: "+e),this._callInitiatedByAVSettings=!1,l.default.CallingStore.endCall(this.state.activeEchoCallId,e)):(h.log(g.LogTraceArea.AVSettings,"User requested to start the test call, causeId: "+e),this._callInitiatedByAVSettings=!0,l.default.CallNavigationHelper.startEchoCallWithoutUI(e),this.props.onTestCallPerformed&&this.props.onTestCallPerformed())}}_buildState(e,t){return{isInCall:l.default.CallingStore.hasConnectedCalls(),activeEchoCallId:n.first(l.default.CallingStore.getCallIdsForConversationMri(_.default.getEchoMri())),microphones:l.default.DeviceStore.getMicrophones(),speakers:l.default.DeviceStore.getSpeakers(),callingNotAllowed:!l.default.CallNavigationHelper.isOutgoingCallingAllowed(_.default.getEchoMri())}}componentWillUnmount(){super.componentWillUnmount();const e=b.default.newCauseId();h.log(g.LogTraceArea.AVSettings,"componentWillUnmount causeId: "+e),this.state.activeEchoCallId&&this._callInitiatedByAVSettings&&(h.log(g.LogTraceArea.AVSettings,"User is closing AV settings, ending the test call, causeId: "+e),this._callInitiatedByAVSettings=!1,l.default.CallingStore.endCall(this.state.activeEchoCallId,e))}render(){const e=this.props.settingsMode===a.SettingsMode.All||this.props.settingsMode===a.SettingsMode.Video,t=this.props.settingsMode===a.SettingsMode.All||this.props.settingsMode===a.SettingsMode.Audio;let i,o,r,l,g;const h=this.props.settingsMode!==a.SettingsMode.All&&this.props.isInOnboarding?void 0:s.createElement(u.default,{colorThemeOverride:this.props.colorThemeOverride});if(t){if(i=s.createElement(C.SectionTitle,{key:"audiotitle",title:m.getString("AudioVideoSettings.AudioLabel"),titleStyles:P.sectionTitle,colorThemeOverride:this.props.colorThemeOverride}),r=s.createElement(S.default,{onMicrophoneSelected:this.props.onMicrophoneSelected,onToggleAGC:this.props.onMicrophoneAutoAdjustChanged,onToggleAEC:this.props.onEchoCancellationChanged,onToggleMusicMode:this.props.onMusicModeChanged,onNoiseSuppressionChanged:this.props.onNoiseSuppressionControlChanged,onAdjustVolume:this.props.onMicrophoneAdjusted,backgroundColor:this.props.backgroundColor,isInOnboarding:this.props.isInOnboarding,colorThemeOverride:this.props.colorThemeOverride,origin:a.MicrophoneSettingsOrigin.AVSettings}),this._isTestCallSupported()&&(!this.state.isInCall||this.state.activeEchoCallId)){const e=this.state.activeEchoCallId?v.SkypeIcon.CallEnd:v.SkypeIcon.CallStart,t=this.state.activeEchoCallId?"AudioVideoSettings.EndTestCallButton":"AudioVideoSettings.StartTestCallButton";o=s.createElement(f.default,{style:d.ListItem.small.shortHeightStyle,title:m.getString(t),icon:e,disabled:this.state.callingNotAllowed,colorThemeOverride:this.props.colorThemeOverride,onPress:this._handleTestCall,hideDivider:!0})}n.isEmpty(this.state.speakers)||(l=s.createElement(y.default,{onSpeakerSelected:this.props.onSpeakerSelected,isInOnboarding:this.props.isInOnboarding,colorThemeOverride:this.props.colorThemeOverride,onAdjustVolume:this.props.onSpeakerVolumeChanged,onAudioTestPerformed:this.props.onAudioTestPerformed,onRingingDeviceSelected:this.props.onRingingDeviceSelected}))}return e&&(g=s.createElement(c.default,{onCameraSelected:this.props.onCameraSelected,isInOnboarding:this.props.isInOnboarding,hideBackgroundBlurCapability:this.props.hideBackgroundBlurCapability,showNewBackgroundReplacementUI:!0,forceUpdateDefaultDevice:!0})),s.createElement(s.View,{style:P.container},g,e?h:void 0,this.props.isInOnboarding?void 0:i,r,t?h:void 0,l,o)}_isTestCallSupported(){return T.CallingCapabilities.anyCallingSupported()&&!n.isEmpty(this.state.microphones)&&(!n.isEmpty(this.state.speakers)||o.BrowserEnvironment.isEngineEdgeHTML()||o.BrowserEnvironment.isEngineWebkit()||o.BrowserEnvironment.isEngineGecko())}_getHeaderText(e){return A.getHeaderText()}static getHeaderText(){return m.getString("UserSettingsPanel.AudioVideoSettingsTitle")}}t.default=A},42961:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(11930),a=i(98278),r=i(15877),l=i(80837),c=i(19675),d=i(24576),u=i(99615),g=(0,r.lazyProperties)({oneRowContainer:()=>o.Styles.createViewStyle({justifyContent:"space-between",flexDirection:"row",alignItems:"center",alignSelf:"stretch"}),container:()=>o.Styles.createViewStyle({flexDirection:"column",justifyContent:"center"}),button:()=>o.Styles.createButtonStyle({flexDirection:"row",alignItems:"stretch",marginLeft:10})});class h extends d.default{render(){const e=s.default.combinedAccessibilityLabel(this.props.title,this._getSelectedItemLabel()),t=this.props.title?o.createElement(c.RowTitle,{colorThemeOverride:this._currentTheme},this.props.title):void 0,i=n.isEmpty(this.props.items)?void 0:o.createElement(u.default,{id:"avSettingsPickerMenu",items:this.props.items,selectedValue:this.props.selectedValue,onValueChange:this.props.onValueChange,labelColor:this.props.labelColor,labelMaxWidth:this.props.labelMaxWidth||266,accessibilityLabel:e,tabIndex:this.props.tabIndex}),r=o.createElement(o.View,{style:g.oneRowContainer},t,i);return o.createElement(o.View,{style:[g.container,a.ListItem.small.shortHeightStyle,this.props.style]},this.props.subtitle?o.createElement(o.View,{style:l.default.flexOne},r,this.props.subtitle):r)}_getSelectedItemLabel(){const e=n.find(this.props.items,(e=>e.value===this.props.selectedValue));return e?e.label:""}}t.default=h},12951:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(11930),a=i(46096),r=i(10117),l=i(15877),c=i(40522),d=i(33754),u=i(81760),g=i(11828),h=i(59433),p=i(19675),m=i(24576),S=(0,l.lazyProperties)({deviceNotPresentContainer:()=>n.Styles.createViewStyle({flex:1,marginVertical:10,alignSelf:"stretch"}),deviceNotPresentInnercontainer:()=>n.Styles.createViewStyle({flex:1,flexDirection:"row",marginTop:10}),deviceNotPresentTextContainer:()=>n.Styles.createViewStyle({flex:1,flexWrap:"wrap"}),errorIconPadding:()=>n.Styles.createViewStyle({paddingTop:0,paddingRight:10,paddingLeft:1,paddingBottom:1})});class C extends m.default{constructor(){super(...arguments),this._onLearnMorePressed=()=>{const e="AudioVideoSettings.WebcamMaybeNotPresent"===this.props.errorStringKey?o.default.getS4LCMCFeaturesNoSubscription().cameraHelp.cameraIssuesLink:o.default.getConfigSettingsNoSubscription().avSettings.learnMoreLink;c.openUrlWithParams({origin:a.BrowserOrigin.AudioVideoSettings,url:e,rootViewId:this._getRootViewId()})}}render(){const e=d.getString("AudioVideoSettings.LearnMore"),t=n.createElement(h.default,{url:"#",key:"learnMoreLink",blue:!0,colorThemeOverride:this.props.colorThemeOverride,onPress:this._onLearnMorePressed},e);let i;if(this.props.errorStringKey&&this.props.errorIcon){const o=d.getParts(this.props.errorStringKey,{learnMoreLink:t}),a=!1,l=[n.createElement(r.default,{key:"icon",icon:this.props.errorIcon,size:g.IconSize.size20,color:u.Color.red,style:S.errorIconPadding}),n.createElement(n.View,{key:"label",style:S.deviceNotPresentTextContainer,importantForAccessibility:a?n.Types.ImportantForAccessibility.NoHideDescendants:void 0},n.createElement(p.BodyText,{colorThemeOverride:this.props.colorThemeOverride,textThemeColor:p.TextThemeColor.Secondary},o))];if(a){const t=d.getString(this.props.errorStringKey,{learnMoreLink:e});i=s.default.wrapLinkWithAccessibilityView(l,t,this._onLearnMorePressed,S.deviceNotPresentInnercontainer)}else i=n.createElement(n.View,{style:S.deviceNotPresentInnercontainer},l)}const o=this.props.audioTitleKey?n.createElement(p.RowTitle,{colorThemeOverride:this.props.colorThemeOverride},d.getString(this.props.audioTitleKey)):void 0;return n.createElement(n.View,{style:S.deviceNotPresentContainer},o,i)}}t.default=C},56879:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(36345),o=i(16778),s=i(1130),a=i(67930),r=i(98278),l=i(35268),c=i(46096),d=i(36237),u=i(15877),g=i(33754),h=(i(10909),i(30124)),p=i(51070),m=i(36150),S=i(90631),C=i(10056),f=i(12187),y=i(40363),_=i(11828),v=i(19675),b=i(53374),T=(i(451),(0,u.lazyProperties)({panel:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),marginTopVersion:()=>o.Styles.createTextStyle({marginTop:20,textAlign:"center"}),otherVersion:()=>o.Styles.createTextStyle({textAlign:"center"}),buttonsContainer:()=>o.Styles.createViewStyle({alignSelf:"stretch"}),copyright:()=>o.Styles.createTextInputStyle({marginTop:2}),upperTextContainer:()=>o.Styles.createViewStyle({alignItems:"center",marginHorizontal:10,marginTop:18}),panelContainer:()=>o.Styles.createViewStyle({flex:1,flexDirection:"column"}),panelContainerCompositeNav:()=>o.Styles.createViewStyle({marginHorizontal:10})}));class P extends a.default{constructor(){super(...arguments),this._onVersionPress=()=>{0},this._onLeftButtonPressed=()=>{const e=b.default.newCauseId();d.log(c.LogTraceArea.Navigation,"AboutPanel._onLeftButtonPressed,  causeId: "+e),this._goBack(e)}}_buildState(e,t){return{isUsingStackNavigationContext:h.default.isUsingStackNavigationContext(),safeAreaHorizontalPaddingStyle:this._getContext().isPresentedInDesktopSubview?void 0:p.default.horizontalPaddingStyle(r.HorizontalInsetDefault),isMobileScreenReaderEnabled:m.default.isMobileScreenReaderEnabled()}}componentDidMount(){super.componentDidMount(),this._updateStatusBarStyle(f.default.createBarStyle(this._themeColors.defaultStatusBarTheme))}render(){let e;if(this.props.showHeader){const t=this.props.isAloneInNavStack&&this._getContext().isPresentedInSplitView?void 0:{closeButtonType:this.props.isAloneInNavStack?S.CloseButtonType.Close:S.CloseButtonType.Back,onPress:this.state.isUsingStackNavigationContext?void 0:this._onLeftButtonPressed};e=this.props.isAloneInNavStack&&!this.state.isMobileScreenReaderEnabled&&this._getContext().isPresentedInSplitView?void 0:o.createElement(S.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:t})}n.default.getVersion();const t=[];let i;this.state.isUsingStackNavigationContext||t.push(T.panelContainerCompositeNav),this.state.safeAreaHorizontalPaddingStyle&&t.push(this.state.safeAreaHorizontalPaddingStyle);const s=y.default.getUWPPackageVersion()||y.default.getMSIXPackageVersion();s&&(i=o.createElement(v.BodyText,{style:T.otherVersion,selectable:!0},g.getString("AboutPanel.UWPPackageVersion",{version:s})));let a=o.createElement(v.BodyText,{style:T.marginTopVersion,selectable:!0},g.getString("AboutPanel.SkypeVersion",{version:y.default.getAppVersion()}));let r=o.createElement(o.View,{style:this.props.isPartOfOtherPanel?void 0:t},o.createElement(o.View,{style:T.upperTextContainer},o.createElement(C.SkypeLogo,{size:_.IconSize.size64}),a,i,undefined,o.createElement(v.Caption,{style:T.copyright},g.getString("AboutPanel.Copyright")),o.createElement(l.default,null),this.props.isPartOfOtherPanel?void 0:this._getAboutButtons()));return this.props.isPartOfOtherPanel||(r=o.createElement(o.ScrollView,{style:T.panelContainer},r)),o.createElement(o.View,{style:[T.panel,this._themeStyles.primaryBackgroundColorStyle]},e,r)}_getAboutButtons(){return o.createElement(s.default,{buttonStyles:this.state.isUsingStackNavigationContext?void 0:r.ListItem.small.shortHeightStyle,style:this.props.isPartOfOtherPanel?void 0:T.buttonsContainer})}_getHeaderText(e){return e.isUsingStackNavigationContext?g.getString("AboutPanel.AboutTitle"):g.getString("UserSettingsPanel.AboutButton")}}t.default=P},64282:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(89391),a=i(47447),r=i(11930),l=i(77381),c=i(46096),d=i(36237),u=i(40522),g=i(33754),h=i(78735),p=i(4735),m=i(17093),S=i(85683),C=i(90602),f=i(63823),y=i(59433),_=i(80837),v=i(19675),b=i(53374),T=i(77524);class P extends l.default{constructor(){super(...arguments),this._onLocalHotKeysPress=()=>{const e=b.default.newCauseId();d.log(c.LogTraceArea.Navigation,"AccessibilitySettings._onLocalHotKeysPress causeId: "+e),p.default.navigateToDesktopSettingsGroup(m.SettingsGroup.HotKeys,this._getRootViewId(),e)},this._onSystemHotKeysChanged=(e,t)=>{h.default.setUserPreferencesLocal({enableSystemHotKeys:t}),d.track(new f.GlobalShortcutsSettingTelemetryEvent(t))},this._getHotkeysCaptionWithAccessibility=(e,t)=>n.createElement(n.View,{accessibilityLabel:t.label,accessibilityTraits:t.traits,importantForAccessibility:n.Types.ImportantForAccessibility.Yes},n.createElement(v.Caption,{style:C.default.subtitleMediumSemiLarge},e)),this._onHotkeysLearnMore=()=>{u.openUrlWithParams({origin:c.BrowserOrigin.HotkeysSettingsDescription,url:s.default.getConfigSettingsNoSubscription().hotkeys.learnMoreUrl,rootViewId:this._getRootViewId()})}}_buildState(e,t){return{enableHotKeysPanel:!0,userEnableSystemHotKey:!!h.default.getUserPreferencesLocal().enableSystemHotKeys}}render(){let e;this.state.enableHotKeysPanel&&(e=n.createElement(T.WideButton,{key:"hotkeys",label:g.getString("KeyboardShortcuts.Title2"),labelStyle:C.default.titleMediumSemiLarge,onPressed:this._onLocalHotKeysPress}));const t=g.getString("UserSettingsPanel.HotkeysLearnMoreLink"),i=n.createElement(y.default,{url:s.default.getConfigSettingsNoSubscription().hotkeys.learnMoreUrl,onPress:this._onHotkeysLearnMore,blue:!0,key:"hotkeysLearnMoreLink "},t);let l;if(a.UICapabilities.systemHotKeysSupported()){const e=g.getString("KeyboardShortcuts.GlobalHotkeysHeader"),s=g.getString("UserSettingsPanel.GlobalHotkeys"),a=r.default.combinedAccessibilityLabel(e,g.getString("UserSettingsPanel.GlobalHotkeysSecondary",{learnMoreLink:""})),c=g.getParts("UserSettingsPanel.GlobalHotkeysSecondary",{learnMoreLink:i}),d=r.default.linkAccessibilityInfo(g.getString("UserSettingsPanel.GlobalHotkeysSecondary",{learnMoreLink:t})),u=this._getHotkeysCaptionWithAccessibility(c,d);l=n.createElement(n.View,{key:"systemHotKeysPanel"},n.createElement(o.default,{key:"systemHotKeysToggle",style:C.default.controlRowWithDescription,isOn:this.state.userEnableSystemHotKey,accessibilityLabel:a,onChange:this._onSystemHotKeysChanged},n.createElement(n.View,{style:_.default.flexOne},n.createElement(v.RowTitle,{style:C.default.switchTitleMediumSemiLarge},s))),u)}return e||l?n.createElement(n.View,null,n.createElement(S.SectionTitle,{title:g.getString("UserSettingsPanel.AccessibilityTitleUpper")}),e,l):null}}t.default=P},84122:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(67930),s=i(52262),a=i(46096),r=i(36237),l=i(33754),c=i(79430),d=i(18078),u=i(95224),g=i(93818),h=i(85683),p=i(11828),m=i(45200);class S extends o.default{_buildState(e,t){return{showAddPhotoLabel:!s.default.getDisplayableProfile(d.default.getSkypeMri()).getAvatarUrl()}}render(){return n.createElement(n.View,{style:this.props.style,forceDirection:!0},n.createElement(h.SectionTitle,{title:l.getString("UserSettingsPanel.YourProfileTitleUpper")}),n.createElement(u.default,{buttonStyles:this.props.buttonStyles,icon:p.SkypeIcon.Picture,showAddPhotoLabel:this.state.showAddPhotoLabel}),n.createElement(m.default,{userMri:d.default.getSkypeMri()}),n.createElement(c.default,{buttonStyles:this.props.buttonStyles}))}componentDidMount(){super.componentDidMount(),r.track(new g.ProfileOpened(a.ProfileType.My,a.ProfileOpenOrigin.AppSettings))}_getHeaderText(e){return S.getHeaderText()}static getHeaderText(){return l.getString("UserSettingsPanel.AccountAndProfileSettingsTitle")}}t.default=S},36348:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(42961),a=i(99401),r=i(94224),l=i(46096),c=i(36237),d=i(15877),u=i(33754),g=i(78735),h=i(19675),p=i(24576),m=i(53374),S=(0,d.lazyProperties)({toggleContainer:()=>n.Styles.createViewStyle({flexDirection:"row",alignItems:"center",marginBottom:5}),toggleText:()=>n.Styles.createTextStyle({flexGrow:1,flexShrink:1,marginRight:10})});class C extends p.default{constructor(){super(...arguments),this._onToggleSecondaryRingerEnabled=(e,t)=>{g.default.setUserPreferencesLocal({secondaryRingerOptionEnabled:t})},this._onRingingSpeakerSelected=e=>{const t=m.default.newCauseId();c.log(l.LogTraceArea.AVSettings,"_onRingingSpeakerSelected "+e+" causeId: "+t),this.props.onRingerDeviceSelected&&this.props.onRingerDeviceSelected(e!==this.state.selectedRingerDevice),r.default.DeviceStore.chooseSecondarySpeakerDevice(e,t)}}_buildState(e,t){return{secondaryRingerOptionEnabled:!!g.default.getUserPreferencesLocal().secondaryRingerOptionEnabled,ringerDevices:r.default.DeviceStore.getSecondarySpeakers(),selectedRingerDevice:r.default.DeviceStore.getCurrentSecondarySpeakerDevice()}}render(){return n.createElement(n.View,null,this._getRingerToggle(),this._getRingerDevicePicker())}_getRingerToggle(){return n.createElement(o.default,{key:"ringAdditionalDevices",style:S.toggleContainer,isOn:this.state.secondaryRingerOptionEnabled,accessibilityLabel:u.getString("AudioVideoSettings.RingAdditionalDeviceLabel"),onChange:this._onToggleSecondaryRingerEnabled},n.createElement(h.BodyText,{style:S.toggleText,colorThemeOverride:this.props.colorThemeOverride},u.getString("AudioVideoSettings.RingAdditionalDeviceLabel")))}_getRingerDevicePicker(){if(!this.state.secondaryRingerOptionEnabled)return;const e=a.formatDevicesForPicker(this.state.ringerDevices);return n.createElement(s.default,{title:u.getString("AudioVideoSettings.RingingDeviceLabel"),items:e,onValueChange:this._onRingingSpeakerSelected,selectedValue:this.state.selectedRingerDevice||"",colorThemeOverride:this.props.colorThemeOverride})}}t.default=C},24521:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(83267),a=i(42826),r=i(73424),l=i(72105),c=i(96074),d=i(71830),u=i(11930),g=i(24631),h=i(21444),p=i(29937),m=i(68894),S=i(11251),C=i(70942),f=i(53880),y=i(46096),_=i(36237),v=i(15877),b=i(33754),T=i(78735),P=i(66127),A=i(34537),k=i(4735),I=i(30124),w=i(17282),N=i(74478),M=i(44824),E=i(48367),x=i(90631),L=i(12187),R=i(34528),D=i(80837),B=i(60305),O=i(21788),F=i(53374),V=[a.AlertTypeFilter.All,a.AlertTypeFilter.HighPriorityMessages,a.AlertTypeFilter.Reactions],U=(0,v.lazyProperties)({container:()=>o.Styles.createViewStyle({alignSelf:"stretch",flex:1})});class H extends c.default{constructor(){super(...arguments),this._shadowVisible=!1,this._shadowOpacityValue=new o.Animated.Value(0),this._shadowOpacityStyle=o.Styles.createAnimatedViewStyle({opacity:this._shadowOpacityValue}),this._handleMenuCommand=e=>{if(!this.isComponentMounted())return;if(s.default.handleOverflowActionMenuCommand(e,this._getRootViewId()))return;const t=s.default.filterForCommand(e);n.isUndefined(t)||(T.default.setUserPreferencesLocal({alertsFilter:t}),this.setState({filter:t}))},this._onAlertsPanelRef=e=>{this._alertsPanel=e||void 0},this._onPressAlertCard=e=>{const t=F.default.newCauseId();switch(_.log(y.LogTraceArea.Navigation,"AlertsHubPanel._onPressAlertCard, causeId: "+t),e.alertType){case a.AlertType.MissedCallbackReminder:e.missedCallbackReminderCalleeMri&&k.default.navigateToConversation({convId:e.missedCallbackReminderCalleeMri,causeId:t,origin:y.NavigationConversationOrigin.AlertsPanel});break;case a.AlertType.Engagement:if(e.popCardInfo)if(this.state.isUsingStackNavigationContext)k.default.navigateToHub(t),M.default.toggleCardById(!0,e.popCardInfo.guid);else{const t=M.default.getCardsById([e.popCardInfo.guid]);N.default.openPopCard(t,this._getRootViewId())}break;case a.AlertType.Notice:if(e.noticeMessageInfo){const t=e.noticeMessageInfo;let i={eventType:C.EngagementTelemetryEventType.NoticeTapCard,campaignId:t.campaignId,campaignTrackId:f.default.getTrackingQueryParam(t.mainActionUri),actionOrigin:C.ActionOrigin.Notification,messageCorrelationId:t.messageCorrelationId,engagementTelemetryAttributes:t.engagementTelemetryAttributes};if(t.contentType===w.NoticeMessageContentType.NoticeWithAvatar&&t.skypeId&&t.showStatusIndicator){const e=d.skypeIdToMri(d.asSkypeId(t.skypeId));if(d.isMriWithUserMetadata(e)){const t=O.default.getUserStatusWithOptions(e,h.default.getAllowedUserStatuses());i.userStatus=t}}_.track(new C.EngagementNoticeTelemetryEvent(i));const n=()=>{e.noticeMessageInfo&&S.default.onNoticeOpen(e.noticeMessageInfo)};if(!e.noticeMessageInfo.mainActionUri)return;p.default.openUri({onDone:n,type:m.EngagementType.Notice,title:e.noticeMessageInfo.modalTitle,uri:e.noticeMessageInfo.mainActionUri,target:e.noticeMessageInfo.mainActionTarget,campaignId:e.noticeMessageInfo.campaignId,messageCorrelationId:e.noticeMessageInfo.messageCorrelationId},this._getRootViewId())}}},this._onScroll=(e,t)=>{if(this.props.useExperimentalDesktopUtilityBar){const t=e>0;this._shadowVisible!==t&&(this._shadowOpacityValue.setValue(t?.5:0),this._shadowVisible=t)}},this._onOverflowButtonPress=e=>{s.default.showMenu(this.state.hasUnreadAlerts,(()=>this._overflowIconButton),this._getRootViewId(),e)},this._onOverflowButtonRef=e=>{this._overflowIconButton=e||void 0}}_buildState(e,t){let i=a.AlertTypeFilter.All;e.useExperimentalDesktopUtilityBar&&(i=T.default.getUserPreferencesLocal().alertsFilter||a.AlertTypeFilter.All);return{isUsingStackNavigationContext:I.default.isUsingStackNavigationContext(),useTabletUI:B.default.useTabletUI(),hasUnreadAlerts:l.default.hasUnreadAlerts(!0),filter:i,modernizeConversationList:P.default.canModernizeConversationList()}}scrollToTop(){this._alertsPanel&&this._alertsPanel.scrollToTop()}_getColorStyle(){return this.state.modernizeConversationList&&(this._isPresentedInDesktopLeftNav()||this._isPresentedInTabletLeftNav())?A.default.getBackgroundColorStyle(this._useDarkTheme(),this._useAccessibleTheme(),this._themeStyles):this._isPresentedInDesktopLeftNav()?this._themeStyles.secondaryBackgroundColorStyle:this._getContext().isPresentedInDesktopSubview&&!this._getContext().isPresentedInDesktopLeftNav?this._themeStyles.popoverBackgroundColorStyle:this._themeStyles.primaryBackgroundColorStyle}render(){this._statusBarTheme!==this._currentTheme&&(L.default.createBarStyle(this._themeColors.defaultStatusBarTheme,!0),this._statusBarTheme=this._currentTheme);const e=this.props.useExperimentalDesktopUtilityBar?this._renderUtilityBar():void 0,t=this.props.useExperimentalDesktopUtilityBar?this._renderShadow():void 0,i=[U.container,this._getColorStyle()];let n=o.createElement(r.default,{ref:this._onAlertsPanelRef,filter:this.state.filter,onScroll:this.props.useExperimentalDesktopUtilityBar?this._onScroll:void 0,onPressAlertCard:this._onPressAlertCard});return t&&(n=o.createElement(o.View,{style:D.default.flexOne},n,t)),o.createElement(o.View,{style:i},this._renderSimpleHeader(),e,n)}_renderUtilityBar(){const e=s.default.menuItemTitle(this.state.filter),t=u.default.combinedAccessibilityLabel(b.getString("AlertsPanel.ViewByMenu"),e);return o.createElement(E.default,{getMenuSections:this._getMenuSections(),currentMenuText:e,accessibilityText:t,onHandleMenuCommand:this._handleMenuCommand})}_renderShadow(){return o.createElement(g.default,{opacityStyle:this._shadowOpacityStyle})}_getMenuSections(){return[{key:"alertfilters",menuItems:n.map(V,(e=>({text:s.default.menuItemTitle(e),command:s.default.menuItemCommand(e),selected:e===this.state.filter,isCheckbox:!0})))},{key:"alertcommands",menuItems:s.default.menuItems(this.state.hasUnreadAlerts)}]}_renderSimpleHeader(){if(this.props.hideHeader)return;const e=this._getContext().isPresentedInDesktopSubview,t=e?void 0:{closeButtonType:x.CloseButtonType.Close},i=e?void 0:{icon:R.moreIcon(),title:b.getString("MyProfilePanel.OverflowButtonTitle"),onPress:this._onOverflowButtonPress,setButtonRef:this._onOverflowButtonRef};return o.createElement(x.SimplePanelHeader,{panelName:b.getString("SettingsHubHeader.NotificationsTitle"),leftButton:t,rightButtons:i,useTransparentBackground:e})}}t.default=H},33204:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(67930),s=i(17033),a=i(15877),r=i(33754),l=i(90631),c=i(80837),d=(0,a.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),container:()=>n.Styles.createViewStyle({alignSelf:"stretch",padding:20,overflow:"visible",flexGrow:1})});class u extends o.default{_getHeaderText(){return r.getString("AudioVideoSettings.CameraBackgroundReplacementLabel")}render(){const e=this.props.isAloneInNavStack&&this._getContext().isPresentedInSplitView?void 0:{closeButtonType:this.props.isAloneInNavStack?l.CloseButtonType.Close:l.CloseButtonType.Back},t=n.createElement(l.SimplePanelHeader,{panelName:this._getHeaderText(),leftButton:e});return n.createElement(n.View,{style:[d.panel,this._themeStyles.primaryBackgroundColorStyle]},t,n.createElement(n.ScrollView,{style:c.default.flexOne},n.createElement(n.View,{style:d.container},n.createElement(s.default,{fullList:!0}))))}}t.default=u},78931:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(67930),s=i(98278),a=i(15877),r=i(51070),l=i(90631),c=i(80837),d=i(97634),u=(0,a.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),settingsBlockContainer:()=>n.Styles.createViewStyle({alignSelf:"stretch",paddingHorizontal:10,overflow:"visible"})});class g extends o.BaseNavigationViewPresentedInModal{_buildState(e,t){return{safeAreaPaddingStyle:r.default.horizontalPaddingStyle(s.HorizontalInsetZero)}}render(){const e=[u.settingsBlockContainer],t=this.state;t.safeAreaPaddingStyle&&e.push(t.safeAreaPaddingStyle);const i=n.createElement(l.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:{closeButtonType:this.props.route.params.isAloneInNavStack?l.CloseButtonType.Close:l.CloseButtonType.Back}}),{primaryBackgroundColorStyle:o}=d.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:[u.panel,o]},i,n.createElement(n.ScrollView,{style:c.default.flexOne},n.createElement(n.View,{style:e},this._renderContent())))}}t.default=g},1130:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(96486),s=i(89391),a=i(77381),r=i(75913),l=i(33754),c=i(4735),d=i(77524);class u extends a.default{constructor(){super(...arguments),this._onThirdPartyNoticesPressed=()=>{c.default.navigateToThirdPartyNotices(this._getRootViewId())},this._openPrivacy=()=>{r.default.openPrivacy()},this._openFrenchAccessibilityConformance=()=>{r.default.openAccessibilityConformance()},this._openTerms=()=>{r.default.openTerms()}}render(){const e=o.compact([n.createElement(d.WideButton,{label:l.getString("AboutPanel.ThirdPartyNoticesLabel"),onPressed:this._onThirdPartyNoticesPressed,buttonStyles:this.props.buttonStyles}),n.createElement(d.WideButton,{label:l.getString("AboutPanel.PrivacyPolicyLabel"),onPressed:this._openPrivacy,buttonStyles:this.props.buttonStyles}),this._getAccesibiltyConformanceButton(),n.createElement(d.WideButton,{label:l.getString("AboutPanel.TermsOfUseLabel"),onPressed:this._openTerms,buttonStyles:this.props.buttonStyles})]);return n.createElement(n.View,{style:this.props.style},e)}_getAccesibiltyConformanceButton(){if("fr-FR"===l.getLocale())return n.createElement(d.WideButton,{label:s.default.getConfigSettingsNoSubscription().frenchAccessibilityConformanceUrl.label,onPressed:this._openFrenchAccessibilityConformance,buttonStyles:this.props.buttonStyles})}}t.default=u},26217:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(11930),a=i(36237),r=i(33754),l=i(1246),c=i(78735),d=i(85683),u=i(90602),g=i(24576);class h extends g.default{constructor(){super(...arguments),this._onChange=(e,t)=>{this.state.autoDownloadFilesEnabled!==t&&(c.default.setUserPreferencesLocal({autoDownloadFiles:t}),a.track(new l.AutoDownloadFilesToggleSetting(t)))}}_buildState(e,t){return{autoDownloadFilesEnabled:!!c.default.getUserPreferencesLocal().autoDownloadFiles}}render(){const e=r.getString("UserSettingsPanel.AutoDownloadFilesTitle"),t=r.getString("UserSettingsPanel.AutoDownloadFilesSubtitle"),i=[u.default.controlRow,this._themeStyles.dividerBorderColorStyle],a=s.default.combinedAccessibilityLabel(e,t);return n.createElement(o.default,{key:"autoDownloadFiles",style:[i,this.props.style],isOn:this.state.autoDownloadFilesEnabled,accessibilityLabel:a,onChange:this._onChange},n.createElement(d.SwitchLabel,{title:e,subtitle:t}))}}t.default=h},89928:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(89391),a=i(39119),r=i(11930),l=i(98278),c=i(77381),d=i(4604),u=i(33754),g=i(4735),h=i(22222),p=i(11828),m=i(17719),S=i(77524);class C extends c.default{constructor(){super(...arguments),this._onUserInfoSectionPress=()=>{g.default.navigateToBalanceStatePanel("MySettingsPanel.fromCTA",this._getRootViewId())},this._onSkypeToPhonePress=()=>{g.default.navigateToBalanceStatePanel("MySettingsPanel.fromCombinedSettings",this._getRootViewId())}}_buildState(e,t){const i=d.default.getCreditEntitlement(),o=d.default.getSubscriptions();return{userFormattedBalance:a.getFormattedBalance(i),userSubscriptionsCount:o?n.size(o):0,userEntitlementsSummary:a.getEntitlementCombination(i,o),skypeToPhoneInProfile:s.default.getS4LEntitlementFeatures().SCE.UserServices.Client.Experiments.SkypeToPhoneInProfile}}render(){const e=this.state.userFormattedBalance?u.getString("BalanceStatePanel.SkypeCreditAndSubscriptionsAccessibilityText",{amount:this.state.userFormattedBalance,count:this.state.userSubscriptionsCount}):void 0;if("none"===this.state.userEntitlementsSummary&&this.state.skypeToPhoneInProfile){const t=u.getString("Entitlements.SkypeToPhoneTitle"),i=u.getString("Entitlements.AddFundsLabel"),n=u.getString("Entitlements.SkypeToPhoneIntro"),s=r.default.combinedAccessibilityLabel(e||t,i);return o.createElement(m.default,{icon:p.SkypeIcon.SkypeCredit,label:t,labelBottom:n,labelBottomSingleLine:!0,onPress:this._onUserInfoSectionPress,accessibilityLabel:s},o.createElement(h.default,{buttonSize:l.SXButtonSize.Small,buttonStyle:l.SXButtonStyle.ThemeStroke,title:u.getString("Entitlements.AddFundsLabel"),accessibilityHidden:!0,allowTextWrap:!0}))}const t=this.state.userSubscriptionsCount>0?u.getString("Entitlements.Subscriptions",{count:this.state.userSubscriptionsCount}):void 0;return o.createElement(S.WideButton,{icon:p.SkypeIcon.SkypeCredit,label:u.getString("Entitlements.SkypeToPhoneTitle"),labelBottom:t,labelBottomSingleLine:!0,key:"user-credit-and-subscriptions",onPressed:this._onSkypeToPhonePress,labelRight:this.state.userFormattedBalance,accessibilityLabel:e,buttonStyles:this.props.buttonStyles})}}t.default=C},14425:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(2604),o=i(16778),s=i(87720),a=i(70570),r=i(43858),l=i(46096),c=i(36237),d=i(52461),u=i(33754),g=i(78735),h=i(85683),p=i(90602),m=i(24576),S=i(93486);class C extends m.default{constructor(){super(...arguments),this._onToggleBingLocation=(e,t)=>{t?a.default.displayModal(this._getRootViewId(),{onModalClosed:this._onBingConsentModalClosed}):(c.track(new r.BingPermissionsInteractionEvent(l.BingPermissionsEntryPoint.BingSettings,n.PermissionStatus.Denied)),g.default.setUserPreferencesLocal({bingLocationConsentGranted:!1,locationStoreLastPromptTime:Date.now()}))},this._onShareLocationWithBingRef=e=>{this._shareLocationWithBingRef=e||void 0},this._onBingConsentModalClosed=()=>{this._shareLocationWithBingRef&&this._shareLocationWithBingRef.focusToggle()}}_buildState(e,t){return{bingEnabled:!!d.default.getBingIntegration(),bingLocationEnabled:!!g.default.getUserPreferencesLocal().bingLocationConsentGranted,isChild:S.default.isChild()}}render(){const e=u.getString("UserSettingsPanel.BingLocation");return this.state.isChild||!this.state.bingEnabled?null:o.createElement(s.default,{key:"bingLocationEnabled",ref:this._onShareLocationWithBingRef,style:[p.default.controlRow,this._themeStyles.dividerBorderColorStyle],isOn:this.state.bingLocationEnabled,accessibilityLabel:e,onChange:this._onToggleBingLocation},o.createElement(h.SwitchLabel,{title:e}))}}t.default=C},79807:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(11930),a=i(47662),r=i(33754),l=i(46929),c=i(18078),d=i(85683),u=i(90602),g=i(78262),h=i(24576),p=i(72758);class m extends h.default{constructor(){super(...arguments),this._onChange=(e,t)=>{l.default.setCallNotificationsWhileDNDEnabled(t)}}_buildState(e,t){const i=p.default.getFullUserProfileByMri(c.default.getSkypeMri());return{callNotificationsWhileDNDEnabled:!!l.default.getCallNotificationsWhileDNDEnabled(),gender:i&&i.gender||g.eGender.Unspecified}}render(){const e=r.getString("UserSettingsPanel.CallNotificationsDuringDNDLabel"),t=r.getString("UserSettingsPanel.CallNotificationsDuringDNDSecondary",{gender:a.getLocalizeParamForGender(this.state.gender)});return n.createElement(o.default,{key:"callNotificationsDuringDND",style:[u.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:this.state.callNotificationsWhileDNDEnabled,accessibilityLabel:s.default.combinedAccessibilityLabel(e,t),onChange:this._onChange},n.createElement(d.SwitchLabel,{title:e,subtitle:t}))}}t.default=m},30723:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(11930),a=i(47662),r=i(33754),l=i(32638),c=i(46929),d=i(18078),u=i(85683),g=i(90602),h=i(78262),p=i(24576),m=i(72758);class S extends p.default{constructor(){super(...arguments),this._onChange=(e,t)=>{c.default.setChatNotificationsWhileDNDEnabled(t)}}_buildState(e,t){const i=m.default.getFullUserProfileByMri(d.default.getSkypeMri());return{chatNotificationsWhileDNDEnabled:!!c.default.getChatNotificationsWhileDNDEnabled(),gender:i&&i.gender||h.eGender.Unspecified,enableChatNotifications:l.areNotificationsEnabled()}}render(){const e=r.getString("UserSettingsPanel.ChatNotificationsDuringDNDLabel"),t=r.getString("UserSettingsPanel.ChatNotificationsDuringDNDSecondary",{gender:a.getLocalizeParamForGender(this.state.gender)});return n.createElement(o.default,{key:"chatNotificationsDuringDND",style:[g.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:this.state.chatNotificationsWhileDNDEnabled,accessibilityLabel:s.default.combinedAccessibilityLabel(e,t),onChange:this._onChange,disable:!this.state.enableChatNotifications},n.createElement(u.SwitchLabel,{title:e,subtitle:t}))}}t.default=S},2737:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});i(96486);const n=i(16778),o=i(89391),s=i(77381),a=(i(46096),i(36237)),r=(i(40522),i(33754)),l=(i(69108),i(4735),i(30124)),c=i(93818),d=i(90602),u=i(11828),g=i(77524);class h extends s.default{constructor(){super(...arguments),this._onPressCloseAccount=()=>{{a.track(new c.CloseMyAccountInfoLinkClicked);const e=`${this.state.closeMyAccountWebUrl}?setlang=${r.getLocale()}`;return void n.Linking.openUrl(e)}}}_buildState(e,t){const i=o.default.getConfigSettings().profileCard;return{closeMyAccountEndUrl:i.closeMyAccountEndUrl,closeMyAccountUrl:i.closeMyAccountUrl,closeMyAccountWebUrl:i.closeMyAccountWebUrl,isUsingStackNavigation:l.default.isUsingStackNavigationContext()}}render(){return n.createElement(g.WideButton,{icon:u.SkypeIcon.Cancel,key:"closeAccountButton",label:r.getString("UserSettingsPanel.CloseAccountLabel"),labelStyle:d.default.titleMediumSemiLarge,buttonStyles:this.props.buttonStyles,labelBottom:r.getString("UserSettingsPanel.CloseAccountDescription"),onPressed:this._onPressCloseAccount})}}t.default=h},62168:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(67877),a=i(15877),r=i(33754),l=i(82052),c=i(93003),d=i(85683),u=i(90602),g=i(24576),h=(0,a.lazyProperties)({noBorder:()=>n.Styles.createViewStyle({borderBottomWidth:0})});class p extends g.default{constructor(){super(...arguments),this._onChangeListMode=(e,t)=>{this.state.rowSize===c.RowSize.Compact||this.state.rowSize===c.RowSize.ExtraCompact?l.default.setRowSizeToDefault():l.default.setRowSizeToCompact(!0),this.props.onChangeListMode&&this.props.onChangeListMode()},this._onChangeAvatarMode=(e,t)=>{const i=this.state.rowSize===c.RowSize.ExtraCompact;l.default.setRowSizeToCompact(i)}}_buildState(e,t){return{rowSize:l.default.recentRowSizeAndChanges(),isLastMessageAuthorAvatarEnabled:l.default.lastMessageAuthorAvatarEnabled()}}render(){const e=[u.default.controlRow,this.props.buttonStyles],t=this.state.rowSize===c.RowSize.Compact||this.state.rowSize===c.RowSize.ExtraCompact;let i;const s=r.getString("ColorThemeDialog.EnableCompactLayoutIcons"),a=[...e];this.props.hideBottomBorder?a.push(h.noBorder):a.push(this._themeStyles.dividerBorderColorStyle),i=n.createElement(o.default,{key:"enableCompactLayoutIcons",style:a,isOn:this.state.rowSize===c.RowSize.Compact,accessibilityLabel:s,onChange:this._onChangeAvatarMode,disable:!t},n.createElement(d.SwitchLabel,{title:s,disabled:!t}));const l=[...e];!this.props.hideBottomBorder||i?l.push(this._themeStyles.dividerBorderColorStyle):l.push(h.noBorder);const g=r.getString("ColorThemeDialog.EnableCompactLayout");return n.createElement(n.View,null,n.createElement(d.SectionTitle,{title:r.getString("ColorThemeDialog.SidebarUpper"),titleStyles:this.props.titleStyles}),this._getLastAuthorAvatarToggle(),n.createElement(o.default,{key:"enableCompactLayout",style:l,isOn:t,accessibilityLabel:g,onChange:this._onChangeListMode},n.createElement(d.SwitchLabel,{title:g})),i)}_getLastAuthorAvatarToggle(){return this.state.isLastMessageAuthorAvatarEnabled?n.createElement(s.default,{style:this.props.buttonStyles,forceTurnOff:this.state.rowSize===c.RowSize.Compact||this.state.rowSize===c.RowSize.ExtraCompact}):void 0}}t.default=p},58046:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(11930),a=i(33754),r=i(78735),l=i(85683),c=i(90602),d=i(24576);class u extends d.default{constructor(){super(...arguments),this._onChangeAllowHugeEmoticons=(e,t)=>{r.default.setUserPreferencesLocal({allowHugeEmoticons:t})}}_buildState(e,t){return{allowHugeEmoticons:!!r.default.getUserPreferencesLocal().allowHugeEmoticons}}render(){const e=a.getString("UserSettingsPanel.DisplayLargeEmoticons"),t=a.getString("UserSettingsPanel.DisplayLargeEmoticonsSubtitle");return n.createElement(o.default,{key:"allowHugeEmoticons",style:[c.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:this.state.allowHugeEmoticons,accessibilityLabel:s.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeAllowHugeEmoticons},n.createElement(l.SwitchLabel,{title:e,subtitle:t}))}}t.default=u},80039:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(11930),a=i(33754),r=i(46929),l=i(85683),c=i(90602),d=i(24576);class u extends d.default{constructor(){super(...arguments),this._onDisplayUrlPreviewsEnabled=(e,t)=>{this.state.displayUrlPreviewsEnabled!==t&&r.default.setDisplayUrlPreviewsEnabled(t)}}_buildState(e,t){return{displayUrlPreviewsEnabled:!!r.default.getDisplayUrlPreviews()}}render(){const e=a.getString("UserSettingsPanel.DisplayUrlPreviews"),t=a.getString("UserSettingsPanel.DisplayUrlPreviewsSubtitle"),i=[c.default.controlRow,this._themeStyles.dividerBorderColorStyle];return n.createElement(o.default,{key:"displayUrlPreviews",style:[i,this.props.style],isOn:this.state.displayUrlPreviewsEnabled,accessibilityLabel:s.default.combinedAccessibilityLabel(e,t),onChange:this._onDisplayUrlPreviewsEnabled},n.createElement(l.SwitchLabel,{title:e,subtitle:t}))}}t.default=u},5763:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(47204),a=i(77381),r=i(97136),l=i(59799),c=i(46096),d=i(10117),u=i(36237),g=i(15877),h=i(33754),p=i(78735),m=i(46929),S=i(4735),C=i(35426),f=i(85683),y=i(90602),_=i(11828),v=i(81760),b=i(24576),T=i(53374),P=(0,g.lazyProperties)({togglePadding:()=>n.Styles.createViewStyle({paddingBottom:10}),iconPadding:()=>n.Styles.createViewStyle({padding:10})}),A="E911LocationConsentConfirmationModal";class k extends b.default{constructor(){super(...arguments),this._onToggleRef=e=>{this._toggleRef=e||void 0},this._onToggleChange=(e,t)=>{if(t)if(m.default.isE911Acknowledged())p.default.setE911LocationConsentGranted(!0),u.track(new C.E911LocationConsentEvent(!0)),l.default.updateLocationWithPermission(c.LocationUpdateReason.E911ConsentUpdate);else{const e=T.default.newCauseId();u.log(c.LogTraceArea.Navigation,"E911LocationConsentToggle._onToggleChange, causeId: "+e),S.default.navigateToE911AcknowledgementPanel(e,this._getRootViewId(),this._onAcknowledgementPanelComplete,!0)}else s.default.showModal(n.createElement(I,{onClose:this._onConfirmationModalClose}),A,{rootViewId:this._getRootViewId()})},this._onAcknowledgementPanelComplete=()=>{const e=T.default.newCauseId();u.log(c.LogTraceArea.Navigation,"E911LocationConsentToggle._onAcknowledgementPanelComplete, causeId: "+e),S.default.goBack(e,this._getContext()),p.default.setE911LocationConsentGranted(!0),l.default.updateLocationWithPermission(c.LocationUpdateReason.E911ConsentUpdate)},this._onConfirmationModalClose=()=>{this._toggleRef&&this._toggleRef.focusToggle()}}_buildState(e,t){return{isConsentGranted:!!p.default.isE911LocationConsentGranted()}}render(){const e=h.getString("UserSettingsPanel.E911LocationConsentToggleLabel"),t=h.getString("UserSettingsPanel.E911LocationConsentToggleExplanation"),i=e+", "+t;return n.createElement(o.default,{ref:this._onToggleRef,style:[y.default.controlRow,this._themeStyles.dividerBorderColorStyle,P.togglePadding],isOn:this.state.isConsentGranted,accessibilityLabel:i,onChange:this._onToggleChange},n.createElement(f.SwitchLabel,{title:e,subtitle:t}))}}t.default=k;class I extends a.default{constructor(){super(...arguments),this._onOkButtonClick=()=>{p.default.setE911LocationConsentGranted(!1),u.track(new C.E911LocationConsentEvent(!1))}}render(){const e=n.createElement(d.default,{size:_.IconSize.size67,color:v.Color.gray300,icon:_.SkypeIcon.Location,style:P.iconPadding});return n.createElement(r.default,{dialogId:A,title:h.getString("UserSettingsPanel.E911LocationConsentConfirmationTitle"),description:h.getString("UserSettingsPanel.E911LocationConsentConfirmationText"),iconView:e,okButtonLabel:h.getString("UserSettingsPanel.E911LocationConsentConfirmationButtonTitle"),onOkButtonClick:this._onOkButtonClick,cancelButtonLabel:h.getString("Global.CancelLabel"),onModalClosed:this.props.onClose})}}},19108:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(87720),a=i(11930),r=i(36237),l=i(33754),c=i(1246),d=i(78735),u=i(85683),g=i(90602),h=i(24576),p=i(15877),m=i(46096),S=i(89391),C=(0,p.lazyProperties)({baseStyle:()=>o.Styles.createViewStyle({alignSelf:"stretch"})});class f extends h.default{constructor(){super(...arguments),this._onChange=(e,t)=>{const i=!t;if(this.props.isGlobalToggle)d.default.setUserPreferencesLocal({doNotFormat:i});else{if(n.isUndefined(this.props.conversationId))return void r.error(m.LogTraceArea.Formatting,"Invariant violation: conversationId is undefined");d.default.setLocalDoNotFormatPreference(this.props.conversationId,i)}r.track(new c.FormattingToggleSetting(i))}}_buildState(e,t){const i=S.default.getConfigSettingsNoSubscription().formatting.learnMoreUrl;return e.isGlobalToggle?{doNotFormat:d.default.getUserPreferencesLocal().doNotFormat,learnMoreUrl:i}:n.isUndefined(e.conversationId)?(r.error(m.LogTraceArea.Formatting,"conversationId: undefined, but isGlobalToggle: false"),{}):{doNotFormat:d.default.getUserPreferencesForConversationLocal(e.conversationId).doNotFormat,learnMoreUrl:i}}render(){const e=l.getString("UserSettingsPanel.FormattingToggleTitle"),t=this.props.isGlobalToggle?l.getString("UserSettingsPanel.GlobalFormattingToggleSubtitle"):l.getString("UserSettingsPanel.FormattingToggleSubtitle");return o.createElement(s.default,{key:"formatting",style:[C.baseStyle,g.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:!this.state.doNotFormat,accessibilityLabel:a.default.combinedAccessibilityLabel(e,t),onChange:this._onChange},o.createElement(u.SwitchLabel,{title:e,subtitle:t,learnMoreUrl:this.state.learnMoreUrl}))}}t.default=f},16214:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(33754),a=i(78735),r=i(85683),l=i(90602),c=i(24576);class d extends c.default{constructor(){super(...arguments),this._onChange=(e,t)=>{this.state.enabled!==t&&a.default.setUserPreferencesLocal({openUrlInExternalBrowser:!t})}}_buildState(e,t){return{enabled:!a.default.getUserPreferencesLocal().openUrlInExternalBrowser}}render(){const e=s.getString("UserSettingsPanel.InternalBrowserToggleButton"),t=[l.default.controlRow,this._themeStyles.dividerBorderColorStyle];return n.createElement(o.default,{key:"internalBrowserToggle",style:[t,this.props.style],isOn:this.state.enabled,accessibilityLabel:e,onChange:this._onChange},n.createElement(r.SwitchLabel,{title:e}))}}t.default=d},17924:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(77381),s=i(33754),a=i(4735),r=i(77524);class l extends o.default{constructor(){super(...arguments),this._onPress=()=>{a.default.navigateToTranslationSettingsPanel(!1,this._getContext())}}render(){return n.createElement(r.WideButton,{buttonStyles:this.props.buttonStyles,label:s.getString("UserSettingsPanel.TranslationSettingsTitle"),onPressed:this._onPress})}}t.default=l},93620:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(77381),s=i(33754),a=i(4735),r=i(11828),l=i(77524);class c extends o.default{constructor(){super(...arguments),this._onPress=()=>{a.default.navigateToLanguagePicker(!1,this._getRootViewId())}}render(){return n.createElement(l.WideButton,{buttonStyles:this.props.buttonStyles,icon:r.SkypeIcon.SkypeTranslator,label:s.getString("SettingsLanguages.LanguageLabel"),onPressed:this._onPress})}}t.default=c},67877:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(11930),a=i(36237),r=i(33754),l=i(1246),c=i(78735),d=i(82052),u=i(85683),g=i(90602),h=i(24576);class p extends h.default{constructor(){super(...arguments),this._onChange=(e,t)=>{c.default.setUserPreferencesLocal({lastMessageAuthorAvatarEnabled:t}),a.track(new l.LastMessageAuthorAvatarToggleSetting(t))}}_buildState(){return{lastMessageAuthorAvatarEnabled:d.default.lastMessageAuthorAvatarEnabled()&&c.default.getLastMessageAuthorAvatarSwitchedOn()}}render(){const e=r.getString("UserSettingsPanel.LastMessageAuthorAvatarToggleLabel");return n.createElement(o.default,{key:"lastMessageAuthorAvatar",style:[g.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:this.state.lastMessageAuthorAvatarEnabled&&!this.props.forceTurnOff,accessibilityLabel:s.default.combinedAccessibilityLabel(e),onChange:this._onChange,disable:this.props.forceTurnOff},n.createElement(u.SwitchLabel,{title:e}))}}t.default=p},14951:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(77381),s=i(33754),a=i(4735),r=i(90602),l=i(77524);class c extends o.default{constructor(){super(...arguments),this._onPressManageBlockedUsers=()=>{a.default.navigateToBlockedUsersList(this._getRootViewId())},this._onPressManageConnectedUsers=()=>{a.default.navigateToConnectedUsersList(this._getRootViewId())}}render(){return n.createElement(n.View,null,this._getManageConnectedContactsButton(),this._getBlockedContactsButton())}_getManageConnectedContactsButton(){return n.createElement(l.WideButton,{key:"connectedUsers",label:s.getString("UserSettingsPanel.ConnectedContactsTitle"),labelStyle:r.default.titleMediumSemiLarge,buttonStyles:this.props.buttonStyles,onPressed:this._onPressManageConnectedUsers})}_getBlockedContactsButton(){return n.createElement(l.WideButton,{key:"blockedUsers",label:s.getString("UserSettingsPanel.BlockedContactsTitle"),labelStyle:r.default.titleMediumSemiLarge,buttonStyles:this.props.buttonStyles,onPressed:this._onPressManageBlockedUsers})}}t.default=c},21725:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(77381),s=i(33754),a=i(4735),r=i(49140),l=i(90602),c=i(77524);class d extends o.default{constructor(){super(...arguments),this._onPress=()=>{a.default.navigateToManageSearchInfoPanel(r.ManageSearchOrigin.ApplicationSettings,this._getRootViewId())}}render(){const e=s.getString("ManageSearchInfoPanel.PanelTitleContactsPrivacy");return n.createElement(c.WideButton,{key:"manageSearchInfo",label:e,labelStyle:l.default.titleMediumSemiLarge,buttonStyles:this.props.buttonStyles,onPressed:this._onPress})}}t.default=d},32932:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(11930),a=i(46096),r=i(36237),l=i(47662),c=i(33754),d=i(46929),u=i(18078),g=i(47922),h=i(85683),p=i(90602),m=i(78262),S=i(24576),C=i(72758);class f extends S.default{constructor(){super(...arguments),this._onChange=(e,t)=>{d.default.setNotifyOnPresenceChangeEnabled(t),r.track(new g.PresenceChangeNotificationToggleSetting(t)),r.log(a.LogTraceArea.PresenceChangeNotification,"Setting notify on presence change, enabled="+t)}}_buildState(e,t){const i=C.default.getFullUserProfileByMri(u.default.getSkypeMri());return{notifyOnPresenceChangeEnabled:!!d.default.getNotifyOnPresenceChangeEnabled(),gender:i&&i.gender||m.eGender.Unspecified}}render(){const e=c.getString("UserSettingsPanel.NotifyOnPresenceChangeLabel"),t=c.getString("UserSettingsPanel.NotifyOnPresenceChangeSecondary",{gender:l.getLocalizeParamForGender(this.state.gender)});return n.createElement(o.default,{key:"notifyOnPresenceChange",style:[p.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:this.state.notifyOnPresenceChangeEnabled,accessibilityLabel:s.default.combinedAccessibilityLabel(e,t),onChange:this._onChange},n.createElement(h.SwitchLabel,{title:e,subtitle:t}))}}t.default=f},6879:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(89391),a=i(11930),r=i(36237),l=i(33754),c=i(1246),d=i(78735),u=i(85683),g=i(90602),h=i(24576);class p extends h.default{constructor(){super(...arguments),this._onChange=(e,t)=>{d.default.setUserPreferencesLocal({pasteAsQuotesEnabled:t}),r.track(new c.PasteAsQuoteToggleSetting(t))}}_buildState(){return{pasteAsQuotesEnabled:s.default.getS4LMessagingFeatures().enableMultiMessageQuoteOnKeyboard&&d.default.getUserPreferencesLocal().pasteAsQuotesEnabled}}render(){const e=l.getString("UserSettingsPanel.PasteAsQuotesToggleLabel");return n.createElement(o.default,{key:"pasteAsQuote",style:[g.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:this.state.pasteAsQuotesEnabled,accessibilityLabel:a.default.combinedAccessibilityLabel(e),onChange:this._onChange},n.createElement(u.SwitchLabel,{title:e}))}}t.default=p},91426:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(98278),a=i(36237),r=i(33754),l=i(1246),c=i(78735),d=i(24387),u=i(90602),g=i(24576),h=i(77524);class p extends g.default{constructor(){super(...arguments),this._onChange=e=>{this._prefetchOptionsMenu.show((()=>this._wideButton),this._getRootViewId(),e)},this._handleModeChange=e=>{void 0!==e&&this.state.prefetchStatus!==e&&(c.default.setUserPreferencesLocal({picturePrefetchMode:e}),a.track(new l.PicturePrefetchToggleSetting(e)))},this._onRefWideButton=e=>{this._wideButton=e||void 0}}_buildState(e,t){return t&&(this._prefetchOptionsMenu=new d.default(this._handleModeChange)),{prefetchStatus:c.default.getUserPreferencesLocal().picturePrefetchMode||o.default.getS4LCMCFeatures().picturePrefetch.status}}render(){const e=r.getString("UserSettingsPanel.PicturePrefetchTitle");let t;switch(this.state.prefetchStatus){case"Off":t=r.getString("UserSettingsPanel.PicturePrefetchStatusOff");break;case"On":t=r.getString("UserSettingsPanel.PicturePrefetchStatusOn");break;case"Wifi":t=r.getString("UserSettingsPanel.PicturePrefetchStatusWifi")}return n.createElement(h.WideButton,{ref:this._onRefWideButton,key:"manageProfile",label:e,labelStyle:u.default.titleMediumSemiLarge,buttonStyles:s.ListItem.small.shortHeightStyle,labelBottom:t,onPressed:this._onChange,hideArrow:!0,treatAsLink:!1})}}t.default=p},76943:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(89391),a=i(36237),r=i(33754),l=i(1246),c=i(78735),d=i(85683),u=i(90602),g=i(24576);class h extends g.default{constructor(){super(...arguments),this._onChange=(e,t)=>{if(this.state.prefetchEnabled!==t){const e=t?"On":"Off";c.default.setUserPreferencesLocal({picturePrefetchMode:e}),a.track(new l.PicturePrefetchToggleSetting(e))}}}_buildState(e,t){return{prefetchEnabled:"Off"!==(c.default.getUserPreferencesLocal().picturePrefetchMode||s.default.getS4LCMCFeatures().picturePrefetch.status)}}render(){const e=r.getString("UserSettingsPanel.PicturePrefetchTitle");return n.createElement(o.default,{key:"autoDownloadFiles",style:[u.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:this.state.prefetchEnabled,accessibilityLabel:e,onChange:this._onChange},n.createElement(d.SwitchLabel,{title:e}))}}t.default=h},95224:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(77381),s=i(33754),a=i(4735),r=i(90602),l=i(77524);class c extends o.default{constructor(){super(...arguments),this._onPress=()=>{a.default.navigateToProfilePicturePanel(this._getRootViewId())}}render(){return n.createElement(l.WideButton,{icon:this.props.icon,key:"profilePicturePrivacy",label:s.getString("UserSettingsPanel.ProfilePictureTitle"),labelRight:this.props.showAddPhotoLabel?s.getString("UserSettingsPanel.AddPhotoLabel"):void 0,labelStyle:r.default.titleMediumSemiLarge,buttonStyles:this.props.buttonStyles,onPressed:this._onPress})}}t.default=c},31524:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(11930),a=i(33754),r=i(46929),l=i(30124),c=i(85683),d=i(90602),u=i(24576);class g extends u.default{constructor(){super(...arguments),this._onChange=(e,t)=>{r.default.setReactionNotificationsEnabled(t)}}_buildState(e,t){return{isUsingStackNavigation:l.default.isUsingStackNavigationContext(),reactionNotificationsEnabled:!!r.default.getReactionNotificationsEnabled()}}render(){const e=a.getString("UserSettingsPanel.EnableReactionPushNotifications"),t=a.getString("UserSettingsPanel.EnableReactionPushNotificationsSecondary");return n.createElement(o.default,{style:[d.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:this.state.reactionNotificationsEnabled,accessibilityLabel:s.default.combinedAccessibilityLabel(e,t),onChange:this._onChange,disable:this.props.disable},n.createElement(c.SwitchLabel,{title:e,subtitle:t}))}}t.default=g},38707:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(11930),a=i(46096),r=i(36237),l=i(33754),c=i(1246),d=i(78735),u=i(85683),g=i(90602),h=i(40363),p=i(60305),m=i(24576);class S extends m.default{constructor(){super(...arguments),this._onChangeSendMessageWithEnter=(e,t)=>{d.default.setUserPreferencesLocal({sendMessageWithEnter:t}),r.track(new c.SendMessageWithEnterToggleSetting(t))}}_buildState(e,t){return{sendMessageWithEnterEnabled:!!d.default.getUserPreferencesLocal().sendMessageWithEnter}}render(){const e=l.getString("UserSettingsPanel.SendMessageWithEnterToggleLabel"),t=this._getSubtitle();return n.createElement(o.default,{key:"sendMessageWithEnter",style:[g.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:this.state.sendMessageWithEnterEnabled,accessibilityLabel:s.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeSendMessageWithEnter},n.createElement(u.SwitchLabel,{title:e,subtitle:t}))}_getSubtitle(){if(p.default.isTabletNoSubscription())return l.getString("UserSettingsPanel.TabletSubtextSendMessageWithEnter");const e=h.default.getPlatformType();return e===a.PlatformType.Windows?this.state.sendMessageWithEnterEnabled?l.getString("UserSettingsPanel.PcSubtextSendMessageWithEnterToggleOn"):l.getString("UserSettingsPanel.PcSubtextSendMessageWithEnterToggleOff"):e===a.PlatformType.OSX||e===a.PlatformType.Linux?this.state.sendMessageWithEnterEnabled?l.getString("UserSettingsPanel.MacSubtextSendMessageWithEnterToggleOn"):l.getString("UserSettingsPanel.MacSubtextSendMessageWithEnterToggleOff"):void 0}}t.default=S},94866:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(89391),a=i(90239),r=i(11930),l=i(46096),c=i(15877),d=i(40522),u=i(33754),g=i(1246),h=i(46929),p=i(88273),m=i(4735),S=i(27357),C=i(85683),f=i(90602),y=i(59433),_=i(19675),v=i(24576),b=(0,c.lazyProperties)({descriptionRow:()=>n.Styles.createViewStyle({paddingBottom:5,borderBottomWidth:1})});class T extends v.default{constructor(){super(...arguments),this._onReadReceiptsLearnMore=()=>{d.openUrlWithParams({origin:l.BrowserOrigin.ReadReceiptsSettingsDescription,url:s.default.getConfigSettingsNoSubscription().readReceipts.learnMoreLink,rootViewId:this._getRootViewId()})},this._onChangeSendReadReceiptsEnabled=(e,t)=>{this.state.sendReadReceiptsEnabled!==t&&(h.default.setReadReceiptsEnabled(t,g.ReadReceiptsSettingOrigin.UserAction),!t&&this.state.activeConversationId&&m.default.fetchMemberConsumptionHorizon(this.state.activeConversationId))}}_buildState(e,t){return{sendReadReceiptsEnabled:!!h.default.getReadReceiptsEnabled(),sendReadReceiptsOptionDisabled:p.default.getStatus()===a.UserStatus.Hidden,activeConversationId:S.default.getActiveConversationId(this._getRootViewId())}}render(){return this.state.sendReadReceiptsOptionDisabled?n.createElement(n.View,{style:[this._themeStyles.dividerBorderColorStyle,b.descriptionRow]},this._renderToggleButton(),this._getDisabledButtonDescription()):this._renderToggleButton()}_renderToggleButton(){const e=u.getString("UserSettingsPanel.SendReadReceipts"),t=u.getString("UserSettingsPanel.SendReadReceiptsSubtitle"),i=this.state.sendReadReceiptsOptionDisabled?f.default.controlRowWithDescription:[f.default.controlRow,this._themeStyles.dividerBorderColorStyle];return n.createElement(o.default,{key:"sendReadReceipts",style:[i,this.props.style],isOn:this.state.sendReadReceiptsEnabled,accessibilityLabel:r.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeSendReadReceiptsEnabled,disable:this.state.sendReadReceiptsOptionDisabled},n.createElement(C.SwitchLabel,{title:e,subtitle:t}))}_getDisabledButtonDescription(){const e=u.getString("UserSettingsPanel.SendReadReceiptsLearnMore"),t=n.createElement(y.default,{url:s.default.getConfigSettingsNoSubscription().readReceipts.learnMoreLink,onPress:this._onReadReceiptsLearnMore,textThemeColor:_.TextThemeColor.Secondary,blue:!0,key:"readReceiptsLearnMoreLink "},e);return n.createElement(_.Caption,{key:"disabledReadReceiptsComment",style:f.default.subtitleMediumSemiLarge},u.getParts("UserSettingsPanel.SendReadReceiptsDisabledComment",{learnMoreLink:t}))}}t.default=T},85822:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(98278),s=i(87134),a=i(46096),r=i(61317),l=i(69382),c=i(36400),d=i(36237),u=i(15877),g=i(33754),h=i(1246),p=i(78735),m=i(90602),S=i(59433),C=i(80837),f=i(19675),y=i(24576),_=i(53374),v=(0,u.lazyProperties)({container:()=>n.Styles.createViewStyle({justifyContent:"space-between",flexDirection:"row",alignItems:"center",alignSelf:"stretch"}),changeLocationText:()=>n.Styles.createTextStyle({maxWidth:270})});class b extends y.default{constructor(){super(...arguments),this._fallbackPathName="Downloads",this._onLocationLinkPress=e=>{e.preventDefault();const t=_.default.newCauseId();d.log(a.LogTraceArea.FileNode,"SetFileDownloadLocationButton._onLocationLinkPress causeId: "+t),l.openFolderLocation(this.state.fileDownloadPathDesktop)},this._onChangeLocationPress=e=>{e.preventDefault();r.FilePickerUtils.showOpenDialog({properties:["openDirectory"]},(e=>{if(e.path===this.state.fileDownloadPathDesktop&&e.displayName===this.state.fileDownloadDisplayNameDesktop)return;p.default.setFileDownloadPath(e);const t=_.default.newCauseId();d.track(new h.FileDownloadPathDesktopSetting),d.log(a.LogTraceArea.FileNode,"SetFileDownloadLocationButton._onChangeLocationPress causeId: "+t)}))}}_buildState(e,t){const i=p.default.getUserPreferencesLocal();return{fileDownloadPathDesktop:i.fileDownloadPathDesktop||this._fallbackPathName,fileDownloadDisplayNameDesktop:i.fileDownloadDisplayNameDesktop||this._fallbackPathName}}render(){const e=g.getString("UserSettingsPanel.FileDownloadLocationLabel"),t=g.getString("UserSettingsPanel.ChangeFileDownloadLocationButton"),i=e+t,a=n.createElement(f.RowTitle,{colorThemeOverride:this._currentTheme,numberOfLines:2,style:m.default.switchTitleMediumSemiLarge,key:"title"},e),r=n.createElement(S.default,{url:"#",key:"keyDownloadPath",blue:!0,onPress:this._onLocationLinkPress},this.state.fileDownloadDisplayNameDesktop),l=g.getParts("UserSettingsPanel.FileDownloadDefaultLocation",{downloadLocationLink:r}),d=n.createElement(f.Caption,{style:m.default.subtitleMediumSemiLarge,numberOfLines:4,key:"subtitle"},l);return n.createElement(n.View,null,n.createElement(n.View,{style:[v.container,o.ListItem.small.shortHeightStyle]},n.createElement(n.View,{style:C.default.flexOne},a,d),n.createElement(c.HoverableButton,{style:C.default.noncollapsibleView,accessibilityTraits:[n.Types.AccessibilityTrait.Button,n.Types.AccessibilityTrait.HasPopup],onPress:this._onChangeLocationPress,accessibilityLabel:i},n.createElement(f.BodyText,{size:f.BodyTextSize.SmallDeprecated,style:v.changeLocationText,textThemeColor:f.TextThemeColor.Secondary},t))),n.createElement(s.default,null))}}t.default=b},17558:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(36400),a=i(15877),r=i(33754),l=i(19675),c=(0,a.lazyProperties)({moreButton:()=>n.Styles.createButtonStyle({height:44})});class d extends o.ComponentBase{render(){const e=r.getString("DetailsPanelHeader.ShowMoreTitle");return n.createElement(n.View,{style:this.props.style},n.createElement(s.HoverableButton,{style:c.moreButton,accessibilityLabel:this.props.accessibilityLabel||e,accessibilityTraits:n.Types.AccessibilityTrait.Button,onPress:this.props.onPress},n.createElement(l.Caption,null,e)))}}t.default=d},48201:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(87720),a=i(81627),r=i(16402),l=i(72822),c=i(46096),d=i(24393),u=i(36237),g=i(15877),h=i(18460),p=i(41209),m=i(33754),S=i(78735),C=i(4735),f=i(17093),y=i(30124),_=i(28377),v=i(85683),b=i(90602),T=i(81760),P=i(40363),A=i(11010),k=i(11828),I=i(80837),w=i(77806),N=i(19675),M=i(24576),E=i(53374),x=(0,g.lazyProperties)({refreshSyncContainer:()=>o.Styles.createViewStyle({flexGrow:0,flexShrink:1,flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}),customCaptionStyle:()=>o.Styles.createViewStyle({flexGrow:0,flexShrink:1,flexDirection:"row",marginRight:0,marginTop:5}),refreshButtonTitle:()=>o.Styles.createTextStyle({marginHorizontal:5}),refreshButtonContainer:()=>o.Styles.createViewStyle({height:25}),syncContainer:()=>o.Styles.createViewStyle({flex:1,flexDirection:"row",marginTop:5,marginBottom:5,paddingRight:5,height:15}),refreshSyncContainerWithLastSyncTime:()=>o.Styles.createViewStyle({paddingLeft:10}),subtitleContainer:()=>o.Styles.createViewStyle({flex:1,flexDirection:"row"})});class L extends M.default{constructor(){super(...arguments),this._onRefreshPress=e=>{this.setState({isSyncingContacts:!0}),h.default.syncLocalAddressBook(!1,!0),a.ContactsTelemetryHelper.syncABContactsRefreshClicked()},this._onChangeSyncAddressBook=(e,t)=>{const i=E.default.newCauseId();u.log(c.LogTraceArea.Navigation,"SyncAddressBookButton._onChangeSyncAddressBook causeId: "+i),this.state.syncAddressBookEnabled!==t&&(t?this.state.isUsingStackNavigationContext?C.default.navigateToSyncAddressBook({origin:l.DialogNavOrigin.Settings,hideSkipButton:!0,hideCloseButton:!1},void 0,this._getRootViewId()):C.default.navigateToDesktopSettingsGroup(f.SettingsGroup.SyncAddressBook,this._getRootViewId(),i):_.default.setSyncAddressBookPrivacySetting(t))}}_buildState(e,t){const i=S.default.getUserPreferencesLocal().lastAddressbookSyncTime;return{syncAddressBookEnabled:_.default.getSyncAddressBookPrivacySetting(),isUsingStackNavigationContext:y.default.isUsingStackNavigationContext(),lastSyncTime:i,isSyncingContacts:h.default.isFetching(),isRefreshDisabled:!n.isUndefined(i)&&!(Date.now()-i>18e5)}}render(){if(!p.isAddressBookEnabled())return null;let e="";if(this.state.lastSyncTime){const t=r.default.getLastSyncTime(this.state.lastSyncTime);e=m.getString("UserSettingsPanel.SyncAddressBookSubtitle")+t}const t=""!==e,i=o.Styles.createTextStyle({color:this.state.isRefreshDisabled?this._themeColors.secondaryTextColor:T.Color.blue},!1),n=[I.default.noncollapsibleView,x.refreshButtonContainer,t?x.refreshSyncContainerWithLastSyncTime:void 0],a=o.createElement(d.default,{size:k.IconSize.size12,color:this.state.isRefreshDisabled?this._themeColors.secondaryTextColor:T.Color.blue,icon:k.SkypeIcon.Refresh,title:m.getString("InAppWebBrowser.RefreshTitle"),accessibilityLabel:m.getString("SyncAddressBookDialog.RefreshContacts")+(e?", "+e:""),titleStyle:[A.default.captionFontStyle(this._currentTheme),i,x.refreshButtonTitle],onPress:this._onRefreshPress,style:n,disabled:this.state.isRefreshDisabled}),l=o.createElement(o.View,{style:[x.subtitleContainer,t?x.refreshSyncContainerWithLastSyncTime:void 0],accessibilityLabel:m.getString("SyncAddressBookDialog.SyncingContacts")},o.createElement(o.View,{style:x.syncContainer},o.createElement(w.SyncIndicator,{size:15,color:T.Color.transparent,indicatorColor:this._themeColors.secondaryTextColor,largeIndicator:!0})),o.createElement(o.View,{style:x.syncContainer},o.createElement(N.Caption,null,m.getString("UserSettingsPanel.Syncing")))),c=this.state.isSyncingContacts?l:a,u=P.default.isElectronOsx()&&this.state.syncAddressBookEnabled?o.createElement(o.View,{style:x.subtitleContainer},o.createElement(N.Caption,{style:[b.default.subtitleMediumSemiLarge,x.customCaptionStyle]},e),o.createElement(o.View,{style:x.refreshSyncContainer},c)):void 0,g=m.getString("UserSettingsPanel.SyncAddressBook");return o.createElement(o.View,null,o.createElement(s.default,{key:"syncAddressBook",style:[b.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.syncAddressBookEnabled,accessibilityLabel:g+(e?", "+e:""),onChange:this._onChangeSyncAddressBook},o.createElement(o.View,{style:I.default.flexOne},o.createElement(v.SwitchLabel,{title:g}),u)))}}t.default=L},14749:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(36237),s=i(33754),a=i(78735),r=i(46929),l=i(90602),c=i(24576),d=(i(80837),i(49140)),u=i(89391),g=i(11930),h=i(46096),p=i(59433),m=i(15877),S=i(40522),C=i(19675),f=i(47447),y=i(77524),_=(0,m.lazyProperties)({switchStyle:()=>n.Styles.createViewStyle({marginBottom:15})});class v extends c.default{constructor(){super(...arguments),this._onTelemetryConsentToggle=e=>{const t=!this.state.telemetryConsentGiven;r.default.setOptionalTelemetryPreferences({enabled:t,onboardingCompleted:!0}),o.track(new d.SendFullTelemetryEvent(t,d.SendFullTelemetryOrigin.ApplicationSettings))},this._onLearnMoreLinkPress=()=>{S.openUrlWithParams({origin:h.BrowserOrigin.TelemetryConsentSettingsDescription,url:u.default.getConfigSettingsNoSubscription().telemetryInfoUrl.url,rootViewId:this._getRootViewId()})}}_buildState(e,t){return{telemetryConsentGiven:a.default.shouldSendOptionalTelemetryData()}}render(){const e=s.getString("UserSettingsPanel.TelemetryConsentSwitch"),t=s.getString("UserSettingsPanel.TelemetryConsentSwitchLearnMoreLinkText"),i=n.createElement(p.default,{url:u.default.getConfigSettingsNoSubscription().telemetryInfoUrl.url,onPress:this._onLearnMoreLinkPress,blue:!0,key:"telemetryLearnMoreLink "},t),o=s.getParts("UserSettingsPanel.TelemetryConsentSwitchDescription",{learnMoreLink:i}),a=g.default.linkAccessibilityInfo(s.getString("UserSettingsPanel.TelemetryConsentSwitchDescription",{learnMoreLink:t}));return n.createElement(n.View,{key:"diagnosticInfoPanel",style:_.switchStyle},n.createElement(y.WideButton,{label:e,labelRight:this._getConsentValue(),onPressed:this._onTelemetryConsentToggle,labelNumberOfLines:3,disabled:!f.UICapabilities.telemetryConsentOptOutSupported(),showFullOpacityWhenDisabled:!0,hideDivider:!0}),n.createElement(n.View,{accessibilityLabel:a.label,accessibilityTraits:a.traits,importantForAccessibility:n.Types.ImportantForAccessibility.Yes},n.createElement(C.Caption,{style:l.default.subtitleMediumSemiLarge},o)))}_getConsentValue(){return this.state.telemetryConsentGiven?s.getString("CallingSettingsPanel.Enabled"):s.getString("CallingSettingsPanel.Disabled")}}t.default=v},35169:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(89391),a=i(47126),r=i(74606),l=i(19784),c=i(10683),d=i(16625),u=i(72416),g=i(98278),h=i(62602),p=i(87134),m=i(39285),S=i(13944),C=i(10117),f=i(36237),y=i(15877),_=i(33754),v=i(6250),b=i(72136),T=i(81760),P=i(11828),A=i(59433),k=i(80837),I=i(19675),w=i(24576),N=(0,y.lazyProperties)({number:()=>o.Styles.createViewStyle({flexDirection:"row",alignItems:"center",marginVertical:10}),numberWithCountry:()=>o.Styles.createViewStyle({flex:1,flexDirection:"row",flexWrap:"wrap",alignItems:"center"}),numberText:()=>o.Styles.createTextStyle({paddingRight:4,paddingBottom:4,lineHeight:20}),numberLabelText:()=>o.Styles.createTextStyle({flex:1,marginBottom:4}),countryLabel:()=>o.Styles.createViewStyle({paddingBottom:4}),countryLabelText:()=>o.Styles.createTextStyle({paddingVertical:2,paddingHorizontal:4,borderRadius:3,lineHeight:16,fontWeight:"bold"}),countryLabelTextHighContrast:()=>o.Styles.createTextStyle({borderWidth:1,borderStyle:"solid"}),capabilityLabel:()=>o.Styles.createViewStyle({flex:1,flexDirection:"row",alignItems:"center",marginTop:2,marginBottom:4}),capabilityLabelText:()=>o.Styles.createTextStyle({flex:1}),capabilityIcon:()=>o.Styles.createViewStyle({marginRight:2})});class M extends w.default{constructor(){super(...arguments),this._mountedRefsMap=new v.default,this._getNumberItem=e=>{const t=this._hasMultipleNumbers(),i=this._isPrimaryNumber(e.id),n=this._isCallerIdCapableNumber(e),s=this._getAccessibilityTraits(e.id),a=this._getAccessibilityLabel(e,i),r=t?m.default:o.View,l=this._getRadioButton(e),c=this._getNumberWithCountry(e),d=this._getNumberLabelByType(e.type),u=this._getCapabilityLabel(e),g=this._getRemoveButton(e);return o.createElement(o.View,{key:e.id},o.createElement(o.View,{ref:n?this._mountedRefsMap.onComponentRef(e.id):void 0,style:t&&n?k.default.pointerCursor:void 0,tabIndex:t&&n?0:void 0,onPress:t&&n?t=>{this._onNumberPress(e,t)}:void 0,onKeyPress:t&&n?t=>{this._onNumberKeyPress(e,t)}:void 0,accessibilityTraits:s,accessibilityLabel:a,importantForAccessibility:t?o.Types.ImportantForAccessibility.Yes:void 0},o.createElement(r,{style:N.number},l,o.createElement(o.View,{style:k.default.flexOne},c,d,u),g)),o.createElement(p.default,null))},this._onLearnMorePress=e=>{e.stopPropagation(),e.preventDefault();const{learnMoreLink:t}=s.default.getS4LCommerceFeaturesNoSubscription().callingSettingsPanel.callerId;o.Linking.openUrl(t)},this._onNumberPress=(e,t)=>{t.stopPropagation(),!this._isPrimaryNumber(e.id)&&this._isCallerIdCapableNumber(e)&&(d.default.setCallerId(e.id),f.track(new u.CallerIdSettingsEvent(u.CallerIdSettingsAction.SetPrimaryNumber,e.type)))},this._onNumberKeyPress=(e,t)=>{h.default.maybeHandleKeyPress(t,(()=>{this._onNumberPress(e,t)}))},this._onNumberRemovePress=(e,t)=>{if(t.stopPropagation(),"mobile"!==e.type)return;const i=_.getString("CallerIdSettingsPanel.RemoveNumberLabel"),n=this._getNumberRemoveMessage(e),o=[{text:_.getString("Global.RemoveLabel"),onPress:()=>this._onNumberRemoveConfirm(e),isSubmit:!0},{text:_.getString("Global.CancelLabel"),isCancel:!0}];l.default.showWithOptions({title:i,dialogAccessibilityTitle:n,message:n,buttons:o,rootViewId:this._getRootViewId()})},this._onNumberRemoveConfirm=e=>{d.default.removeCallerIdNumber(e.id),f.track(new u.CallerIdSettingsEvent(u.CallerIdSettingsAction.RemoveNumber,"mobile"))},this._onNumberPickerKeyPress=e=>{let t=this.state.focusedIndex;switch(e.keyCode){case a.default.UP:case a.default.LEFT:t-=1;break;case a.default.DOWN:case a.default.RIGHT:t+=1}t<0||t>=this._getCallerIdCapableNumbers().length||this.setState({focusedIndex:t})}}_buildState(e,t){var i;return{isCallerIdAutoSelectEnabled:d.default.isCallerIdAutoSelectEnabled(),callerIdNumbers:d.default.getCallerIdNumbers(),callerIdPrimaryNumber:d.default.getCallerIdPrimaryNumber(),callerIdAutoSelectNumbers:d.default.getCallerIdAutoSelectNumbers(),countries:b.default.getCountries(),focusedIndex:(null===(i=this.state)||void 0===i?void 0:i.focusedIndex)||0}}componentDidUpdate(e,t,i){var n;if(super.componentDidUpdate(e,t,i),this.state.focusedIndex!==t.focusedIndex){const e=null===(n=this._getCallerIdCapableNumbers()[this.state.focusedIndex])||void 0===n?void 0:n.id,t=e&&this._mountedRefsMap.ref(e);t&&t.requestFocus()}}render(){const e=this._hasMultipleNumbers();return o.createElement(o.View,{onKeyPress:e?this._onNumberPickerKeyPress:void 0},n.map(this.state.callerIdNumbers,this._getNumberItem))}_getRadioButton(e){if(this._hasMultipleNumbers())return o.createElement(r.default,{isOn:this._isPrimaryNumber(e.id),disable:!this._isCallerIdCapableNumber(e),disableSelectionAnimation:!0})}_getRemoveButton(e){if("mobile"===e.type)return o.createElement(S.default,{size:P.IconSize.size20,color:this._themeColors.secondaryTextColor,hoverColor:this._themeColors.primaryTextColor,icon:P.SkypeIcon.Delete,title:_.getString("CallerIdSettingsPanel.RemoveNumberLabel"),onPress:t=>{this._onNumberRemovePress(e,t)}})}_getNumberWithCountry(e){const t=this._getNumberTextFormatted(e.number),i=this._getCountryLabelText(e),n=this._isCallerIdCapableNumber(e),s=o.createElement(I.RowTitle,{style:N.numberText,disabled:!n},t);if(!i)return o.createElement(o.View,{style:N.numberWithCountry},s);const a=[N.countryLabelText];this._useAccessibleTheme()?(a.push(N.countryLabelTextHighContrast),a.push(o.Styles.createTextStyle({color:this._themeColors.primaryTextColor,borderColor:this._themeColors.primaryTextColor},!1))):a.push(o.Styles.createTextStyle({backgroundColor:T.Color.blueOverlay10,color:this._useDarkTheme()?T.Color.blueMedium:T.Color.blue},!1));const r=o.createElement(o.View,{style:N.countryLabel},o.createElement(I.Caption,{style:a},i));return o.createElement(o.View,{style:N.numberWithCountry},s,r)}_getNumberTextFormatted(e){return n.startsWith(e,"+")||(e="+"+e),e}_getCountryLabelText(e){if(!this.state.isCallerIdAutoSelectEnabled||!this._isCallerIdCapableNumber(e))return;const t=n.find(this.state.callerIdAutoSelectNumbers,(({id:t})=>t===e.id));if(!t)return;const i=this.state.countries[n.toLower(t.country)];return i?i.countryName:void 0}_getNumberLabelByType(e){const t=this._getNumberLabelTextByType(e);if(t)return o.createElement(I.Caption,{style:N.numberLabelText},t)}_getNumberLabelTextByType(e){switch(e){case"skypein":return _.getString("CallerIdSettingsPanel.SkypeNumberLabel");case"mobile":return _.getString("CallerIdSettingsPanel.MobileLabel")}}_getCapabilityLabel(e){const t=this._isCallerIdCapableNumber(e);if(!e.smsCapable&&t)return;const i=t?P.SkypeIcon.MobileSmsNew:P.SkypeIcon.CallErrorFilled,n=t?_.getString("CallerIdSettingsPanel.SmsCapableLabel"):_.getParts("CallerIdSettingsPanel.NoCallerIdAvailableLabel",{link:o.createElement(A.default,{key:"learnMore",url:"#",linkTextStyle:g.LinkTextStyle.Caption,blue:!0,underline:!0,onPress:this._onLearnMorePress},_.getString("Global.LearnMore"))});return o.createElement(o.View,{style:N.capabilityLabel},o.createElement(C.default,{icon:i,size:P.IconSize.size14,color:this._themeColors.primaryTextColor,style:N.capabilityIcon}),o.createElement(I.Caption,{style:N.capabilityLabelText,textThemeColor:I.TextThemeColor.Primary},n))}_hasMultipleNumbers(){return n.size(this.state.callerIdNumbers)>1}_isPrimaryNumber(e){var t;return(null===(t=this.state.callerIdPrimaryNumber)||void 0===t?void 0:t.id)===e}_isCallerIdCapableNumber(e){return"mobile"===e.type||"skypein"===e.type&&!!e.callerIdCapable}_getCallerIdCapableNumbers(){return n.filter(this.state.callerIdNumbers,(e=>this._isCallerIdCapableNumber(e)))}_getAccessibilityTraits(e){if(!this._hasMultipleNumbers())return;const t=[o.Types.AccessibilityTrait.CheckBox];return this._isPrimaryNumber(e)&&t.push(o.Types.AccessibilityTrait.Checked),t}_getAccessibilityLabel(e,t){if(!this._hasMultipleNumbers())return;const i=[];i.push(this._getNumberTextFormatted(e.number)),i.push(this._getCountryLabelText(e)),i.push(this._getNumberLabelTextByType(e.type)),e.smsCapable&&i.push(_.getString("CallerIdSettingsPanel.SmsCapableLabel")),this._isCallerIdCapableNumber(e)||i.push(_.getString("CallerIdSettingsPanel.NoCallerIdAvailableAccessibilityLabel"));const o=n.join(n.filter(i,(e=>!!e))," "),s=t?_.getString("FeedbackMechanism.AccLabelCheckboxChecked"):_.getString("FeedbackMechanism.AccLabelCheckboxUnchecked");return _.getString("FeedbackMechanism.AccLabelCheckbox",{checkboxTitle:o,state:s})}_getNumberRemoveMessage(e){const t=this._getNumberTextFormatted(e.number),i=d.default.getCallerIdNumberRemoveType(e.id);if(i===c.CallerIdNumberRemoveType.Disable)return _.getString("CallerIdSettingsPanel.RemoveNumberAndDisableConfirmation",{number:t});if(i===c.CallerIdNumberRemoveType.Replace){const i=d.default.getCallerIdPrimaryNumberAfterRemove(e.id);if(i)return _.getString("CallerIdSettingsPanel.RemoveNumberAndReplaceConfirmation",{number:t,newNumber:this._getNumberTextFormatted(i.number)})}return _.getString("CallerIdSettingsPanel.RemoveNumberConfirmation",{number:t})}}t.default=M},17033:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(48540),a=i(44770),r=i(89391),l=i(29675),c=i(94224),d=i(9520),u=i(9505),g=i(11009),h=i(77381),p=i(46096),m=i(61317),S=i(73439),C=i(53559),f=i(13944),y=i(10117),_=i(36237),v=i(61253),b=i(15877),T=i(33754),P=i(46929),A=i(78735),k=i(4735),I=i(81760),w=i(11010),N=i(11828),M=i(80837),E=i(19675),x=i(24576),L=i(62751),R=70;var D;!function(e){e[e.merged=0]="merged",e[e.compact=1]="compact",e[e.full=2]="full",e[e.onboarding=3]="onboarding"}(D||(D={}));const B=[{label:T.getString("AudioVideoSettings.CameraBackgroundReplacementNone"),effectType:s.VideoEffectType.Off,value:p.BackgroundEffect.Off},{label:T.getString("AudioVideoSettings.CameraBackgroundReplacementBlur"),effectType:s.VideoEffectType.BackgroundBlurDefault,value:p.BackgroundEffect.Blur}],O=[l.BING_CATEGORY_NAME],F=(0,b.lazyProperties)({itemButtonWrapper:()=>o.Styles.createViewStyle({overflow:"visible"}),category:()=>o.Styles.createViewStyle({marginBottom:0}),sectionBackgroundReplacementTitle:()=>o.Styles.createTextStyle({marginBottom:10,fontSize:w.default.controlFontSize.tabHeaderSmall}),itemSize:()=>o.Styles.createViewStyle({width:R,height:50}),itemWrapper:()=>o.Styles.createViewStyle({borderRadius:4,borderWidth:1,alignItems:"center",justifyContent:"center",marginBottom:5}),itemContainer:()=>o.Styles.createViewStyle({maxWidth:R,justifyContent:"center",marginBottom:10,marginRight:10}),itemWrapperSelected:()=>o.Styles.createViewStyle({borderColor:I.Color.blue}),categories:()=>o.Styles.createViewStyle({marginBottom:10}),itemsContainerRow:()=>o.Styles.createViewStyle({flexDirection:"row",flexWrap:"wrap",flex:1,marginBottom:5,overflow:"visible"}),bingSettingContainerRow:()=>o.Styles.createViewStyle({flexDirection:"row",flexWrap:"nowrap",alignItems:"stretch",flex:1,borderRadius:3,borderWidth:1,padding:8,marginBottom:15}),bingSettingsWrapper:()=>o.Styles.createViewStyle({flexDirection:"row",flexWrap:"nowrap",alignItems:"stretch",flexGrow:1}),bingSettingsImgContainer:()=>o.Styles.createViewStyle({borderRadius:3,borderWidth:1,alignItems:"center",justifyContent:"center",maxWidth:R,marginRight:8}),bingSettingsTextContainer:()=>o.Styles.createViewStyle({flexGrow:1,marginRight:8,paddingVertical:0,flexDirection:"column",alignItems:"flex-start"}),bingSettingsTextCaptionContainer:()=>o.Styles.createViewStyle({flexDirection:"row",alignItems:"flex-start"}),bingSettingsTextCaption:()=>o.Styles.createViewStyle({marginTop:8}),bingSettingsTextContainerFont:()=>o.Styles.createTextStyle({fontSize:w.default.controlFontSize.tabHeaderSmall,fontWeight:"bold"}),itemContainerExtraMargin:()=>o.Styles.createViewStyle({marginBottom:100}),itemContainerExtraAndTooltipMargin:()=>o.Styles.createViewStyle({marginBottom:170}),itemLabel:()=>o.Styles.createTextStyle({textAlign:"center"}),removeIconWrapper:()=>o.Styles.createViewStyle({position:"absolute",top:4,right:14,backgroundColor:I.Color.blackOverlay35,borderRadius:N.IconSize.size12/2,borderStyle:"solid",borderWidth:1,borderColor:I.Color.white,alignItems:"center",justifyContent:"center",width:N.IconSize.size12,height:N.IconSize.size12}),blurLabelStyle:()=>o.Styles.createTextStyle({position:"absolute",bottom:0,width:R,paddingVertical:2,backgroundColor:I.Color.blackOverlay35,color:I.Color.white,textAlign:"center",fontSize:11}),bingLabelStyle:()=>o.Styles.createViewStyle({position:"absolute",bottom:0,width:R,paddingTop:2,paddingBottom:1,backgroundColor:I.Color.blackOverlay35,alignContent:"center",alignItems:"center"}),bingCoachmarkStyle:()=>o.Styles.createViewStyle({position:"absolute",top:50}),bingLabelLogoStyle:()=>o.Styles.createViewStyle({width:11,height:16}),itemImageWrapper:()=>o.Styles.createViewStyle({position:"relative"}),GIFIcon:()=>o.Styles.createViewStyle({position:"absolute",bottom:5,left:5}),bingWatermarkStyle:()=>o.Styles.createTextStyle({position:"absolute",flexDirection:"row",alignContent:"center",bottom:0,width:R,paddingBottom:2,paddingHorizontal:4}),itemBingWatermark:()=>o.Styles.createTextStyle({height:10,width:61}),bingArrow:()=>o.Styles.createViewStyle({borderRadius:8,borderWidth:1,padding:3,height:16,width:16,borderColor:I.Color.gray300,alignItems:"center",alignContent:"center"}),bingArrowContainer:()=>o.Styles.createViewStyle({padding:8,marginLeft:8})});class V extends h.default{constructor(){super(...arguments),this._getImageCompressType=e=>{const t=C.default.getFileContentTypeFromExtension(C.default.extractFileExtension(e));return t===C.default.imageContentTypes.jpeg?"JPEG":t===C.default.imageContentTypes.gif?"GIF":t===C.default.imageContentTypes.png?"PNG":void 0},this._createFileUrl=e=>{if(!e.imagePath)return;const t=this._getImageCompressType(e.imagePath);(0,L.getThumbnailFromFilePath)(e.imagePath,R,0,t).then((e=>this.setState(e)))}}componentDidMount(){super.componentDidMount(),this._createFileUrl(this.props.item)}render(){return this.state.imageUri?o.createElement(o.View,{style:[F.itemImageWrapper,F.itemSize]},o.createElement(o.Image,{source:this.state.imageUri,style:F.itemSize,resizeMode:"cover"}),"GIF"===this.state.compressFormat&&o.createElement(y.default,{style:F.GIFIcon,color:I.Color.white,icon:N.SkypeIcon.VideoFilled,size:N.IconSize.size14})):null}}class U extends x.default{constructor(){super(...arguments),this._getGroupedItems=()=>{const{lastUsedBackgroundEffects:e,items:t}=this.state,{true:i,false:o}=n.groupBy(t,(t=>n.includes(e,t.value))),s=r.default.getS4LCMCFeaturesNoSubscription().numberOfVisibleLastUsedEffects;return[...n.slice(n.sortBy(n.filter(o,(e=>n.isNumber(e.order))),(e=>e.order)),0,s-n.size(i)),...null!=i?i:[]]},this._renderContent=()=>{switch(this.state.layoutType){case D.full:return this._renderCategories();case D.compact:const e=[...this.state.cameraEffects,...this._getBingBackgroundsMenuItem(),...n.filter(this.state.items,(e=>n.includes(this.state.lastUsedBackgroundEffects,e.value)&&!n.includes(O,e.category)))];return this._renderList(e,!0,!0,!1);case D.onboarding:const t=[...this.state.cameraEffects,...this._getBingBackgroundsMenuItem(),...n.sortBy(n.filter(this.state.items,(e=>n.isNumber(e.order)&&!n.includes(O,e.category))),(e=>e.order))];return this._renderList(t,!1,!1);case D.merged:default:return this._renderList(this.state.items)}},this._renderCategories=()=>o.createElement(o.View,{style:F.categories},this.state.backgroundCategories.map((e=>{var t;const i=null===(t=this.state.itemsByCategory)||void 0===t?void 0:t[e];return i?o.createElement(o.View,{key:e,style:F.category},o.createElement(E.RowTitle,{colorThemeOverride:this._currentTheme,style:F.sectionBackgroundReplacementTitle},this._getLocalizedStringByCategory(e)),this._renderList(i,"myBackgrounds"===e,!1,e===l.BING_CATEGORY_NAME)):null}))),this._renderList=(e,t=!0,i=!1,s=!1)=>{const a=s?n.orderBy(e,(e=>e.order)):n.clone(e);return o.createElement(o.View,{style:F.itemsContainerRow},a&&a.map((e=>this._renderItem(e))),t&&this._renderAddButton(i),this._renderTooltips())},this._renderItem=e=>{const{isNewBackgroundEffectsLayoutEnabled:t}=this.state,i=[F.itemWrapper,F.itemSize,this._themeStyles.dividerBorderColorStyle],n=[F.itemLabel,w.default.captionFontStyle()];return e.value===this.state.selectedItem&&(i.push(F.itemWrapperSelected),n.push(w.default.selectedCaptionFontStyle())),o.createElement(o.View,{key:e.value,style:F.itemButtonWrapper},o.createElement(o.Button,{accessibilityLabel:e.label,importantForAccessibility:o.Types.ImportantForAccessibility.NoHideDescendants,accessibilityTraits:o.Types.AccessibilityTrait.Button,onPress:t=>{this._onPress(t,e)},style:F.itemContainer},o.createElement(o.View,{style:i},this._renderItemContent(e)),!t&&o.createElement(o.Text,{ellipsizeMode:"tail",numberOfLines:1,style:n},C.default.extractFileName(e.label))),this._renderItemRemove(e))},this._onBackgroundChangePress=e=>{m.FilePickerUtils.showSingleFilePicker((e=>{const t=null==e?void 0:e.file;if(t){const i=t.path||e.path||void 0,o=S.default.getBackgroundEffectPrefix(i),a={label:t.name,effectType:s.VideoEffectType.BackgroundReplacement,imagePath:i,category:"myBackgrounds",value:o};if(n.some(this.state.items,{value:o}))return;this._trackItem(a),this._changeCameraEffect(a)}}),this._getRootViewId(),e,{acceptType:m.FilePickerAcceptType.Image})},this._navigateToBackgroundEffectsList=()=>{k.default.navigateToBackgroundEffectsSettings(this._getRootViewId())}}_buildState(e,t){let i={};const o=S.default.getAllBackgroundEffectsFiles(),a=n.map(o,(({localFileName:e,localUri:t,originalUrl:i,category:n,order:o},a)=>({label:e,effectType:s.VideoEffectType.BackgroundReplacement,imagePath:t,value:a,isPredefinedImage:n===l.BING_CATEGORY_NAME||!!i,category:n||(i?"myBackgrounds":"skypebackgroundimage"),order:o}))),d=r.default.getS4LCMCFeatures();if(i.isNewBackgroundEffectsLayoutEnabled=d.enableNewBackgroundEffectsLayout,i.isBackgroundEffectsCategoriesEnabled=d.enableBackgroundEffectsCategories,i.backgroundCategories=r.default.getS4LCMCFeatures().backgroundCategories,i.layoutType=this._getLayoutType(i.isBackgroundEffectsCategoriesEnabled,e.fullList),i.lastUsedBackgroundEffects=A.default.getLastUsedBackgroundEffects(),i.cameraEffects=B,i.items=[...i.cameraEffects,...n.sortBy(a,{isPredefinedImage:!1})],i.itemsByCategory=n.groupBy(a,"category"),i.activeCallId=c.default.CallingStore.getConnectedOrOutgoingAndNotOnHoldCallId(),i.selectedItem=c.default.DeviceStore.getBackgroundEffectType(),i.selectedItem){const e=l.default.getImageIsoDateFromId(i.selectedItem);i.isBingPictureOfDayBgSelected=!!e}else i.isBingPictureOfDayBgSelected=!1;return i.isBingPictureofDayBgTooltipDismissed=P.default.getBingBackgroundsEffectDismissed(),i.isBingPictureOfDayBgLoaded=n.filter(a,(e=>e.category===l.BING_CATEGORY_NAME)).length>0,i}componentDidMount(){super.componentDidMount();const e=this.state.items.filter((e=>e.value===this.state.selectedItem))[0],t=this._getGroupedItems().map((e=>e.value));A.default.setAllLastUsedBackgroundEffects(t),e&&this._changeCameraEffect(e)}componentDidUpdate(e,t,i){if(super.componentDidUpdate(e,t,i),!(0,v.default)(this.state.items,t.items)||t.selectedItem!==this.state.selectedItem){const e=this.state.items.filter((e=>e.value===this.state.selectedItem))[0];e&&this._changeCameraEffect(e)}}render(){const e=[M.default.flexOne,M.default.overflowVisible];return this.props.isInOnboarding&&(this._isTooltipVisible()?e.push(F.itemContainerExtraAndTooltipMargin):e.push(F.itemContainerExtraMargin)),o.createElement(o.View,{style:e},this._renderContent())}_getBingItem(){const e=n.filter(this.state.items,(e=>e.category===l.BING_CATEGORY_NAME));if(0!==e.length)return e[0]}_getBingBackgroundsMenuItem(){const e=r.default.getS4LCMCFeaturesNoSubscription().bingBackgrounds,t=this._getBingItem();return t&&e.enabled&&e.showInSettings?[t]:[]}_enableBingBackgroundEffect(){const e=this._getBingItem();e&&this._onPress(void 0,e)}_getBingBackgroundsEffectTooltip(){const e={y:0,x:160,width:R,height:50},t=[{title:T.getString("AudioVideoSettings.BackgroundEffectBingCoachMarkDismiss"),closeOnClick:!0,onClick:e=>{P.default.setBingBackgroundsEffectDismissed(!0),this.setState({isBingPictureofDayBgTooltipDismissed:!0})}},{title:T.getString("AudioVideoSettings.BackgroundEffectBingCoachMarkTurnOn"),closeOnClick:!0,onClick:e=>{this._enableBingBackgroundEffect(),P.default.setBingBackgroundsEffectDismissed(!0),this.setState({isBingPictureofDayBgTooltipDismissed:!0})}}];return o.createElement(u.default,{id:"bingtooltip",title:T.getString("AudioVideoSettings.BackgroundEffectCategoryBing"),body:[T.getString("AudioVideoSettings.BackgroundEffectBingCoachMarkText")],getElement:()=>{},positions:[g.PopupAnchorPositon.Bottom],anchorAccessibilityLabel:"Title",onPress:this.props.onPress,anchorInfoOverride:e,widthOverride:236,buttonOverrides:t})}_isTooltipVisible(){return!this.state.isBingPictureofDayBgTooltipDismissed&&this.state.isBingPictureOfDayBgLoaded&&(this.state.layoutType===D.compact||this.state.layoutType===D.onboarding)}_renderTooltips(){const e=[];return this._isTooltipVisible()&&e.push(this._getBingBackgroundsEffectTooltip()),e}_renderItemRemove(e){if(!e.isPredefinedImage&&!n.includes([s.VideoEffectType.Off,s.VideoEffectType.BackgroundBlurDefault],e.effectType))return o.createElement(o.View,{style:F.removeIconWrapper},o.createElement(f.default,{icon:N.SkypeIcon.ClosePanel,color:I.Color.white,hoverColor:I.Color.white,size:N.IconSize.size8,onPress:()=>this._onItemRemove(e.value),title:T.getString("MediaPreview.RemoveItem",{fileName:e.label})}))}_renderAddButton(e=!1){const{isNewBackgroundEffectsLayoutEnabled:t}=this.state,{secondaryBackgroundColorStyle:i,dividerBorderColorStyle:n}=this._themeStyles;return o.createElement(o.Button,{accessibilityLabel:T.getString("AudioVideoSettings.AddMoreMedia"),onPress:e?this._navigateToBackgroundEffectsList:this._onBackgroundChangePress,style:F.itemContainer},o.createElement(o.View,{style:[F.itemWrapper,F.itemSize,i,n]},o.createElement(y.default,{color:this._themeColors.iconDisabledColor,icon:e?N.SkypeIcon.More:N.SkypeIcon.Plus,size:N.IconSize.size18})),!t&&o.createElement(o.Text,{ellipsizeMode:"tail",numberOfLines:1,style:[F.itemLabel,w.default.captionFontStyle()]},T.getString("AudioVideoSettings.AddImage")))}_renderItemContent(e){if(e.effectType===s.VideoEffectType.Off)return o.createElement(y.default,{color:this._themeColors.iconDisabledColor,icon:N.SkypeIcon.PresenceBlocked,size:N.IconSize.size18});if(e.effectType===s.VideoEffectType.BackgroundBlurDefault){const t=o.createElement(o.Image,{key:"CameraEffectBlurImage",source:a.Collection.OFFICE_BLUR_BACKGROUND,style:F.itemSize,resizeMode:"cover"}),i=o.createElement(o.Text,{key:"CameraEffectBlurLabel",ellipsizeMode:"tail",numberOfLines:1,style:F.blurLabelStyle},C.default.extractFileName(e.label));return this.state.isNewBackgroundEffectsLayoutEnabled?[t,i]:t}if(e.effectType===s.VideoEffectType.BackgroundReplacement&&e.category===l.BING_CATEGORY_NAME){return[o.createElement(V,{key:"BingImage",item:e}),o.createElement(o.View,{key:"CameraEffectBingLabel",style:F.bingLabelStyle},o.createElement(o.Image,{key:"CameraEffectBingImage",source:a.Collection.BING_LOGO_SMALL,style:F.bingLabelLogoStyle,resizeMode:"cover"}))]}return e.effectType===s.VideoEffectType.BackgroundReplacement?o.createElement(V,{key:"Image-"+e.label,item:e}):null}_onItemRemove(e){S.default.removeTrackedFile(e),this._setBackgroundEffect(p.BackgroundEffect.Off)}_onPress(e,t){this._changeCameraEffect(t);const i=this._getEffectTypeFromVideoEffect(t.effectType);_.track(new d.BackgroundEffectsSettingsEvent(!!this.state.activeCallId,!!t.isPredefinedImage,i,t.isPredefinedImage?t.label:void 0,t.category))}_getEffectTypeFromVideoEffect(e){switch(e){case s.VideoEffectType.BackgroundReplacement:return p.BackgroundEffect.BackgroundImage;case s.VideoEffectType.BackgroundBlurDefault:return p.BackgroundEffect.Blur;case s.VideoEffectType.Off:default:return p.BackgroundEffect.Off}}_changeCameraEffect(e){e.effectType===s.VideoEffectType.BackgroundReplacement?(this._shouldSaveItemToHistory(e)&&A.default.setLastUsedBackgroundEffects(e.value),this._setBackgroundEffect(e.value)):this._setBackgroundEffect(this._getEffectTypeFromVideoEffect(e.effectType))}_shouldSaveItemToHistory(e){return!n.includes(O,e.category)}_setBackgroundEffect(e){c.default.DeviceStore.setBackgroundEffectType(e)}_trackItem(e){S.default.canTrackFiles()&&e.imagePath&&S.default.addFileInformationForTracking(e.value,e.imagePath,e.label,{category:e.category})}_getLocalizedStringByCategory(e){switch(e){case"myBackgrounds":return T.getString("AudioVideoSettings.BackgroundEffectCategoryMyBackgrounds");case"holidays":return T.getString("AudioVideoSettings.BackgroundEffectCategoryHolidays");case"movies":return T.getString("AudioVideoSettings.BackgroundEffectCategoryMovies");case"nature":return T.getString("AudioVideoSettings.BackgroundEffectCategoryNature");case"professional":return T.getString("AudioVideoSettings.BackgroundEffectCategoryProfessional");case"featured":return T.getString("AudioVideoSettings.BackgroundEffectCategoryFeatured");case"new":return T.getString("AudioVideoSettings.BackgroundEffectCategoryNew");case"fun":return T.getString("AudioVideoSettings.BackgroundEffectCategoryFun");case"colors":return T.getString("AudioVideoSettings.BackgroundEffectCategoryColors");case"textures":return T.getString("AudioVideoSettings.BackgroundEffectCategoryTextures");case"cultural":return T.getString("AudioVideoSettings.BackgroundEffectCategoryCultural");case"pride":return T.getString("AudioVideoSettings.BackgroundEffectCategoryPride");case"animated":return T.getString("AudioVideoSettings.BackgroundEffectCategoryAnimated");case"bing":return T.getString("AudioVideoSettings.BackgroundEffectCategoryBing");default:return T.getString("AudioVideoSettings.BackgroundEffectCategoryOther")}}_getLayoutType(e,t){return e?t?D.full:this.props.isInOnboarding?D.onboarding:D.compact:D.merged}}t.default=U},24506:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CameraSettingsSeparateWindowWidth=t.CameraSettingsStandardWidth=void 0;const n=i(96486),o=i(2604),s=i(16778),a=i(97691),r=i(44770),l=i(87720),c=i(89391),d=i(42961),u=i(12951),g=i(99401),h=i(29675),p=i(94224),m=i(17033),S=i(47447),C=i(46096),f=i(10117),y=i(36237),_=i(15877),v=i(33754),b=i(73773),T=i(81736),P=i(64956),A=i(85683),k=i(81760),I=i(40363),w=i(11010),N=i(80837),M=i(11828),E=i(78262),x=i(19675),L=i(24576),R=i(53374);t.CameraSettingsStandardWidth=440,t.CameraSettingsSeparateWindowWidth=410;const D=(0,_.lazyProperties)({sectionTitle:()=>s.Styles.createViewStyle({marginTop:20}),sectionBackgroundReplacementTitle:()=>s.Styles.createTextStyle({marginBottom:20,fontSize:w.default.controlFontSize.tabHeaderSmall}),videoPreviewContainer:()=>s.Styles.createViewStyle({backgroundColor:k.Color.black,marginBottom:20,alignSelf:"center",alignItems:"stretch",justifyContent:"center"}),videoPreviewContainerStandardSize:()=>s.Styles.createViewStyle({width:t.CameraSettingsStandardWidth,height:Math.round(t.CameraSettingsStandardWidth*(5/9))}),videoPreviewContainerWindowSize:()=>s.Styles.createViewStyle({width:t.CameraSettingsSeparateWindowWidth,height:Math.round(t.CameraSettingsSeparateWindowWidth*(5/9))}),toggleContainer:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"center",marginBottom:5}),toggleText:()=>s.Styles.createTextStyle({flexGrow:1,flexShrink:1,marginRight:10}),webcamSettingsView:()=>s.Styles.createViewStyle({flex:1,marginBottom:20}),webcamSettingText:()=>s.Styles.createTextStyle({color:k.Color.blue}),videoPreviewBingInfo:()=>s.Styles.createViewStyle({position:"absolute",overflow:"hidden",alignItems:"flex-start",justifyContent:"flex-start",flexDirection:"row",left:5,top:5,backgroundColor:k.Color.blackOverlay50,borderRadius:4,paddingHorizontal:8,paddingVertical:5}),videoPreviewBingInfoIcon:()=>s.Styles.createViewStyle({height:16}),videoPreviewBingLogoInfoIcon:()=>s.Styles.createViewStyle({height:16,width:16}),videoPreviewBingInfoTextContainer:()=>s.Styles.createTextStyle({position:"absolute",overflow:"hidden",alignItems:"center",justifyContent:"center",flexDirection:"row",left:0,right:0,bottom:10}),videoPreviewBingInfoTextContainerStandardSize:()=>s.Styles.createViewStyle({maxWidth:t.CameraSettingsStandardWidth}),videoPreviewBingInfoTextContainerWindowSize:()=>s.Styles.createViewStyle({maxWidth:t.CameraSettingsSeparateWindowWidth}),videoPreviewBingInfoText:()=>s.Styles.createTextStyle({padding:3,fontSize:10,backgroundColor:k.Color.blackOverlay50,borderRadius:4,textAlign:"center",color:k.Color.white})});class B extends L.default{constructor(){super(...arguments),this._shouldStartVideoOnClose=!1,this._shouldShowNewBackgroundReplacement=()=>this.state.enableBackgroundReplacement&&this.props.showNewBackgroundReplacementUI,this._shouldStartVideo=()=>!!this._shouldStartVideoOnClose&&!!this.state.enableStartVideoOnSettingsClose&&!this.props.skipVideoOnClose,this._openWebCamSetting=()=>{const e=this._getSelectedCamera();e&&p.default.DeviceStore.popupCameraSettings(e)},this._onCameraSelected=e=>{const t=R.default.newCauseId();y.log(C.LogTraceArea.AVSettings,"_onCameraSelected "+e+" causeId: "+t),this.props.onCameraSelected&&this.props.onCameraSelected(e!==this._getSelectedCamera(),e),this.props.forceUpdateDefaultDevice?e!==this.state.selectedCamera&&this.state.callId&&(p.default.CallingStore.isProvidingVideo(this.state.callId)||this.props.forceVideoOnClose)?(this._shouldStartVideoOnClose=!0,p.default.CallingStore.stopVideo(this.state.callId,t).then((()=>{p.default.DeviceStore.choosePreferredDevices({camera:e},t)}))):p.default.DeviceStore.choosePreferredDevices({camera:e},t):this.setState({selectedCameraForPreview:e})},this._onToggleBlur=(e,t)=>{this.props.onToggleBlur&&this.props.onToggleBlur(t),p.default.DeviceStore.setBackgroundBlurred(t)},this._getSelectedCamera=()=>this.props.forceUpdateDefaultDevice?this.state.selectedCamera:this.state.selectedCameraForPreview}_buildState(e,t){const i=p.default.DeviceStore.getCurrentDevices(),n=c.default.getS4LCMCFeatures(),s=p.default.CallingStore.getConnectedAndNotOnHoldCallId(),a={cameras:p.default.DeviceStore.getCameras(),selectedCamera:null==i?void 0:i.camera,cameraPreviewSupported:S.CallingCapabilities.avSettingsCameraPreviewSupported()&&T.default.permissionStatus(E.PermissionType.Camera)===o.PermissionStatus.Granted,cameraPermissionStatus:T.default.permissionStatus(E.PermissionType.Camera),enableStartVideoOnSettingsClose:n.enableStartVideoOnSettingsClose,callId:s,localPreviewAndroidV2:p.default.CallingStore.isLocalPreviewAndroidV2Enabled(),backgroundBlurCapable:p.default.DeviceStore.isBackgroundBlurCapable(),backgroundBlurred:p.default.DeviceStore.isBackgroundBlurred(),hasConnectedCalls:p.default.CallingStore.hasConnectedCalls(),enableBackgroundReplacement:p.default.DeviceStore.isBackgroundReplacementEnabled(),showCameraIssuesText:n.cameraHelp.showCameraIssuesText,backgroundReplaceEffectId:p.default.DeviceStore.getBackgroundEffectType()};return t&&(a.selectedCameraForPreview=a.selectedCamera),a}componentDidMount(){if(super.componentDidMount(),this.state.cameras&&this.state.cameraPermissionStatus===o.PermissionStatus.Unknown){const e=E.PermissionPromptOptions.SkipPrePrompt|E.PermissionPromptOptions.PromptAgainIfDenied|E.PermissionPromptOptions.SkipAugmentedWebPanel;T.default.requestPermission(E.PermissionType.Camera,e,this.props.isInOnboarding?o.PermissionOrigin.OnboardingAVSettings:o.PermissionOrigin.AVSettings)}}componentWillUnmount(){super.componentWillUnmount();const e=R.default.newCauseId();y.log(C.LogTraceArea.AVSettings,"componentWillUnmount causeId: "+e),p.LocalStreamInfo.previewPromise.chainPromise((()=>this._shouldStartVideo()&&this.state.callId?p.default.CallingStore.startVideo(this.state.callId,e):a.Resolved()),"stop",e)}render(){let e,t,i,a,p,S,C,y,_;this.props.hideVideoLabel||this.props.isOutgoingVideoDisabled||this.props.isInOnboarding||(e=s.createElement(A.SectionTitle,{key:"videotitle",title:v.getString("AudioVideoSettings.VideoLabel"),titleStyles:D.sectionTitle,colorThemeOverride:this.props.colorThemeOverride})),this._shouldShowNewBackgroundReplacement()&&(t=s.createElement(x.RowTitle,{colorThemeOverride:this._currentTheme,style:D.sectionBackgroundReplacementTitle},v.getString("AudioVideoSettings.CameraBackgroundReplacementLabel")),i=s.createElement(m.default,{isInOnboarding:this.props.isInOnboarding}));const T=g.formatDevicesForPicker(this.state.cameras),w=this._getSelectedCamera();if(this.props.isOutgoingVideoDisabled)p=s.createElement(u.default,{audioTitleKey:"AudioVideoSettings.OutgoingVideoDisabled",colorThemeOverride:this.props.colorThemeOverride});else if(n.isEmpty(T))p=s.createElement(u.default,{audioTitleKey:"AudioVideoSettings.CameraLabel",errorStringKey:"AudioVideoSettings.NoDevicePresent",errorIcon:M.SkypeIcon.Error,colorThemeOverride:this.props.colorThemeOverride});else if(this.props.isVideoDisabledDuringScreenSharing)p=s.createElement(u.default,{audioTitleKey:"AudioVideoSettings.CameraLabel",errorStringKey:"CallPanel.OutgoingVideoDisabledScreenSharing",errorIcon:M.SkypeIcon.Error,colorThemeOverride:this.props.colorThemeOverride});else{if(this.state.cameraPreviewSupported){const e=this.props.isInOnboarding?D.videoPreviewContainerStandardSize:D.videoPreviewContainerWindowSize,t=this.props.overrideVideoPreviewDimensions?s.Styles.createViewStyle({width:this.props.overrideVideoPreviewDimensions.width,height:this.props.overrideVideoPreviewDimensions.height}):void 0,i=this.props.overrideVideoPreviewDimensions?s.Styles.createViewStyle({maxWidth:this.props.overrideVideoPreviewDimensions.width},!1):this.props.isInOnboarding?D.videoPreviewBingInfoTextContainerStandardSize:D.videoPreviewBingInfoTextContainerWindowSize;let n=[];if(this.state.backgroundReplaceEffectId){const e=c.default.getS4LCMCFeaturesNoSubscription().bingBackgrounds;if(h.default.getImageFromId(this.state.backgroundReplaceEffectId)){e.useBingLogoInsteadOfSearchIcon?n.push(s.createElement(s.View,{key:"BingIconView",style:D.videoPreviewBingInfo},s.createElement(s.Image,{key:"BingIcon",source:r.Collection.BING_LOGO_SMALL,style:[D.videoPreviewBingInfoIcon,D.videoPreviewBingLogoInfoIcon],resizeMode:"cover"}))):n.push(s.createElement(s.View,{key:"SearchIconView",style:D.videoPreviewBingInfo},s.createElement(f.default,{key:"SearchIcon",icon:M.SkypeIcon.Search,color:k.Color.white,size:M.IconSize.size16,style:D.videoPreviewBingInfoIcon})));const t=v.getString("AudioVideoSettings.BackgroundEffectBingCameraTitle");n.push(s.createElement(s.View,{key:"BingFeatureLabel",accessibilityLabel:t,style:D.videoPreviewBingInfoTextContainer},s.createElement(s.Text,{style:[D.videoPreviewBingInfoText,i]},t)))}}a=s.createElement(s.View,{style:[D.videoPreviewContainer,e,t]},s.createElement(b.default,{nametag:"video_local_avSettings",localPreviewAndroidV2:this.state.localPreviewAndroidV2,device:w}),n),C=void 0,this.state.backgroundBlurCapable&&!this.state.enableBackgroundReplacement&&(_=s.createElement(l.default,{style:[D.toggleContainer],accessibilityLabel:v.getString("CallControls.CallMenuBlurBackground"),onChange:this._onToggleBlur,isOn:this.state.backgroundBlurred},s.createElement(x.BodyText,{style:D.toggleText,colorThemeOverride:this.props.colorThemeOverride},v.getString("CallControls.CallMenuBlurBackground"))))}if(this.state.cameraPermissionStatus===o.PermissionStatus.Denied){const e=P.default.getDeniedPromptKey(E.PermissionType.Camera);e&&(S=s.createElement(u.default,{audioTitleKey:"AudioVideoSettings.CameraLabel",errorStringKey:e,errorIcon:M.SkypeIcon.Error,colorThemeOverride:this.props.colorThemeOverride}))}else p=s.createElement(d.default,{title:v.getString("AudioVideoSettings.CameraLabel"),items:T,onValueChange:this._onCameraSelected,labelMaxWidth:this.props.labelMaxWidth,selectedValue:w||"",colorThemeOverride:this.props.colorThemeOverride})}return I.default.isElectronWindows()&&w&&(y=s.createElement(s.Button,{style:D.webcamSettingsView,accessibilityLabel:v.getString("AudioVideoSettings.WebcamSettingsLabel"),onPress:this._openWebCamSetting},s.createElement(x.BodyText,{style:D.webcamSettingText,colorThemeOverride:this.props.colorThemeOverride},v.getString("AudioVideoSettings.WebcamSettingsLabel")))),s.createElement(s.View,{style:N.default.overflowVisible},e,p,S,C,a,_,t,i,y)}_getWebcamMayNotBePresentLabel(){return s.createElement(u.default,{audioTitleKey:void 0,errorStringKey:"AudioVideoSettings.WebcamMaybeNotPresent",errorIcon:M.SkypeIcon.Warning,colorThemeOverride:this.props.colorThemeOverride})}}t.default=B},72514:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(26217),a=i(67930),r=i(58046),l=i(80039),c=i(6652),d=i(19108),u=(i(16214),i(33754)),g=i(6879),h=i(26424),p=(i(91426),i(76943)),m=i(38707),S=i(94866),C=i(85822),f=i(85683);i(60305);class y extends a.default{_buildState(){const e=o.default.getS4LMessagingFeatures();return{hugeEmoticonsFeatureEnabled:e.singleEmoticonSize>=h.EmoticonSize.ExtraLarge,sendReadReceiptsFeatureEnabled:e.enableReadReceipts,customFileDownloadLocationEnabled:e.enableCustomFileDownloadLocation,enableDoNotFormat:e.enableDoNotFormat,autoDownloadFileEnabled:!1,picturePrefetchEnabled:o.default.getS4LCMCFeatures().picturePrefetchEnabled,enableMultiMessageQuoteOnKeyboard:e.enableMultiMessageQuoteOnKeyboard}}render(){return n.createElement(n.View,{style:this.props.style},n.createElement(f.SectionTitle,{title:u.getString("UserSettingsPanel.MessagingAndChatsUpperTitle")}),this._getSendReadReceiptsToggle(),this._getDisplayLargeEmoToggle(),this._getDisplayUrlPreviewsToggle(),this._getFontSizePicker(),this._getExternalBrowserToggle(),this._getSendMessageWithEnterButton(),this._getPasteAsQuoteToggle(),this._getFormattingToggle(),this._getPicturePrefetchButton(),this._getAutoDownloadToggle(),this._setFileDownloadLocationButton())}_getDisplayLargeEmoToggle(){return this.state.hugeEmoticonsFeatureEnabled?n.createElement(r.default,{style:this.props.buttonStyles}):void 0}_getSendReadReceiptsToggle(){return this.state.sendReadReceiptsFeatureEnabled?n.createElement(S.default,{style:this.props.buttonStyles}):void 0}_getAutoDownloadToggle(){return this.state.autoDownloadFileEnabled?n.createElement(s.default,{style:this.props.buttonStyles}):void 0}_getPicturePrefetchButton(){return this.state.picturePrefetchEnabled?n.createElement(p.default,null):void 0}_getDisplayUrlPreviewsToggle(){return n.createElement(l.default,{style:this.props.buttonStyles})}_getExternalBrowserToggle(){}_getSendMessageWithEnterButton(){return n.createElement(m.default,{style:this.props.buttonStyles})}_getPasteAsQuoteToggle(){return this.state.enableMultiMessageQuoteOnKeyboard?n.createElement(g.default,{style:this.props.buttonStyles}):void 0}_getFormattingToggle(){return this.state.enableDoNotFormat?n.createElement(d.default,{style:this.props.buttonStyles,isGlobalToggle:!0}):null}_setFileDownloadLocationButton(){return this.state.customFileDownloadLocationEnabled?n.createElement(C.default,{style:this.props.buttonStyles}):void 0}_getFontSizePicker(){return n.createElement(c.default,null)}_getHeaderText(e){return y.getHeaderText()}static getHeaderText(){return u.getString("UserSettingsPanel.MessagingAndChatsTitle")}}t.default=y},5114:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(98278),s=i(77381),a=i(93620),r=i(33754),l=i(30124),c=i(85683);class d extends s.default{_buildState(e,t){return{isUsingStackNavigationContext:l.default.isUsingStackNavigationContext()}}render(){return n.createElement(n.View,{style:this.props.style},n.createElement(c.SectionTitle,{title:r.getString("UserSettingsPanel.GeneralTitleUpper")}),n.createElement(a.default,{buttonStyles:this.state.isUsingStackNavigationContext?void 0:o.ListItem.small.shortHeightStyle}))}}t.default=d},73175:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(67930),s=i(33754),a=i(21725),r=i(93486),l=i(4735),c=i(85683),d=i(90602),u=i(48201),g=(i(60305),i(77524));class h extends o.default{constructor(){super(...arguments),this._onPressManageBlockedUsers=()=>{l.default.navigateToBlockedUsersList(this._getRootViewId())}}_buildState(e,t){return{isChild:r.default.isChild()}}static getHeaderText(){return s.getString("UserSettingsPanel.ContactsTitle")}render(){const e=n.createElement(c.SectionTitle,{key:"contacts",title:s.getString("UserSettingsPanel.ContactsUpperTitle")}),t=this.state.isChild?void 0:n.createElement(u.default,{buttonStyles:this.props.buttonStyles});return n.createElement(n.View,{style:this.props.style},e,t,this._getBlockedContactsButton(),n.createElement(a.default,{buttonStyles:this.props.buttonStyles}))}_getHeaderText(e){return h.getHeaderText()}_getBlockedContactsButton(){return n.createElement(g.WideButton,{key:"blockedUsers",label:s.getString("UserSettingsPanel.BlockedContactsTitle"),labelStyle:d.default.titleMediumSemiLarge,buttonStyles:this.props.buttonStyles,onPressed:this._onPressManageBlockedUsers})}}t.default=h},49070:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(19784),o=i(46096),s=i(36237),a=i(33754),r=i(78735),l=i(46929),c=i(4735),d=i(17093),u=i(53374);var g;!function(e){e[e.None=0]="None",e[e.Call=1]="Call",e[e.Chat=2]="Chat",e[e.CallAndChat=3]="CallAndChat"}(g||(g={}));class h{static showDNDSettingDialog(e,t){s.log(o.LogTraceArea.DNDSetting,"Showing DND setting dialog."),this._showDNDDialogHelper(e,t)}static _getEnableNotificationState(){return l.default.getCallNotificationsWhileDNDEnabled()||l.default.getChatNotificationsWhileDNDEnabled()?l.default.getCallNotificationsWhileDNDEnabled()?l.default.getChatNotificationsWhileDNDEnabled()?g.None:g.Chat:g.Call:g.CallAndChat}static _getContentText(e){let t;switch(e){case g.CallAndChat:t=a.getString("DNDSettingDialog.CallAndChatNotificationDuringDNDDialogContent");break;case g.Call:t=a.getString("DNDSettingDialog.CallNotificationDuringDNDDialogContent");break;case g.Chat:t=a.getString("DNDSettingDialog.ChatNotificationDuringDNDDialogContent");break;case g.None:default:t=a.getString("DNDSettingDialog.NotificationDuringDNDDialogContent")}return t}static _onAppSettingsButtonPressed(e){const t=u.default.newCauseId();s.log(o.LogTraceArea.DNDSetting,"DNDSettingDialog._onAppSettingsButtonPressed causeId: "+t),c.default.navigateToDesktopSettingsGroup(d.SettingsGroup.Notifications,e,t)}static _showDNDDialogHelper(e,t){const i=[{text:a.getString("DNDSettingDialog.DontAskMeAgain"),onPress:this._dialogActionHandler(this._presentDNDPopupPressed,t)},{text:a.getString("DNDSettingDialog.DoNothing"),onPress:t},{text:a.getString("DNDSettingDialog.ViewNotificationsSetting"),onPress:this._dialogActionHandler((()=>this._onAppSettingsButtonPressed(e)),t),isSubmit:!0}],o=a.getString("DNDSettingDialog.DNDSettingTitle");let s=this._getEnableNotificationState();const r=this._getContentText(s);s!==g.None&&n.default.showWithOptions({title:o,message:r,dialogAccessibilityTitle:r,buttons:i,onClickOutside:t,rootViewId:e})}static _dialogActionHandler(e,t){return t?()=>{e(),t&&t()}:e}}t.default=h,h._presentDNDPopupPressed=()=>{l.default.setPresentDNDSetting(),r.default.setUserPreferencesLocal({presentDNDSetting:!1})}},96623:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(78735),s=i(4735),a=i(90602),r=i(24576),l=i(77524);class c extends r.default{constructor(){super(...arguments),this._getDevFeatures=()=>[],this._onPressTelemetryMonitor=()=>{s.default.navigateToTelemetryPerformanceMonitor(this._getRootViewId())},this._onPressPhoneNumberVerification=()=>{s.default.navigateToPnvEnterNumber(void 0,this._getRootViewId())},this._onPressPnvDebugTool=()=>{s.default.navigateToPnvDebugTool()},this._onPressManageFeatureFlags=()=>{s.default.navigateToFeatureFlags(this._getRootViewId())},this._onPressShowRawConfig=()=>{s.default.navigateToRawPreferences(this._getRootViewId())}}_buildState(e,t){return{ignoreActiveEndpoint:!!o.default.getUserPreferencesLocal().ignoreActiveEndpointFiltering}}render(){return n.createElement(n.View,null,this._getTelemetryMonitorButton(),this._getPhoneNumberVerificationButton(),this._getPressPnvDebugToolButton(),this._getDevFeatures())}_getPressPnvDebugToolButton(){return n.createElement(l.WideButton,{key:"pnvDebugTool",label:"PNV Debug Tool",labelStyle:a.default.titleMediumSemiLarge,labelBottom:"Remove registered phone number from profile",onPressed:this._onPressPnvDebugTool})}_getPhoneNumberVerificationButton(){return n.createElement(l.WideButton,{key:"enterPhoneNumber",label:"Phone Number Verification",labelStyle:a.default.titleMediumSemiLarge,labelBottom:"Verify phone number",onPressed:this._onPressPhoneNumberVerification})}_getTelemetryMonitorButton(){return n.createElement(l.WideButton,{key:"manageProfile",label:"Telemetry Monitor",labelStyle:a.default.titleMediumSemiLarge,labelBottom:"Telemetry events statistics",onPressed:this._onPressTelemetryMonitor})}}t.default=c},32977:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(2604),o=i(16778),s=i(87720),a=i(89391),r=i(96074),l=i(70570),c=i(43858),d=i(98278),u=i(72822),g=i(52262),h=i(58046),p=i(87134),m=i(46096),S=i(36237),C=i(15877),f=i(41209),y=i(33754),_=i(46634),v=i(93486),b=i(78735),T=i(18078),P=i(4735),A=i(20941),k=i(28377),I=i(49140),w=i(94866),N=i(85683),M=i(28574),E=i(30428),x=i(19675),L=i(77524),R="chat",D="privacy",B=(0,C.lazyProperties)({container:()=>o.Styles.createViewStyle({marginHorizontal:20}),settingsContainer:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),settingsBlockContainer:()=>o.Styles.createViewStyle({alignSelf:"stretch",overflow:"visible"}),settingContainer:()=>o.Styles.createViewStyle({flexDirection:"row",alignItems:"center",alignSelf:"stretch",justifyContent:"space-between"}),switchLabelWrapper:()=>o.Styles.createTextStyle({flex:1,marginVertical:5}),switchLabel:()=>o.Styles.createTextStyle({flex:1,paddingRight:10}),title:()=>o.Styles.createTextStyle({paddingTop:30,paddingBottom:10})});class O extends r.default{constructor(){super(...arguments),this._toggleSwitchWithTextStyle=[B.settingContainer,d.ListItem.small.shortHeightStyle],this._onShareLocationWithBingRef=e=>{this._shareLocationWithBingRef=e||void 0},this._onChangeBingLocationConsentGranted=(e,t)=>{t?l.default.displayModal(this._getRootViewId(),{onModalClosed:this._onBingConsentModalClosed}):(S.track(new c.BingPermissionsInteractionEvent(m.BingPermissionsEntryPoint.BingSettings,n.PermissionStatus.Denied)),b.default.setUserPreferencesLocal({bingLocationConsentGranted:!1,locationStoreLastPromptTime:Date.now()}))},this._onBingConsentModalClosed=()=>{this._shareLocationWithBingRef&&this._shareLocationWithBingRef.focusToggle()},this._onPressProfilePicture=()=>{P.default.navigateToProfilePicturePanel(this._getRootViewId())},this._onPressManageUsers=()=>{P.default.navigateToManageUsersSettingsPanel(this._getRootViewId())},this._onPressManageSearchInfo=()=>{P.default.navigateToManageSearchInfoPanel(I.ManageSearchOrigin.ApplicationSettings,this._getRootViewId())},this._onPressDiagnosticTools=()=>{P.default.navigateToDiagnosticTools(this._getRootViewId())},this._onChangeSyncAddressBook=(e,t)=>{this.state.syncAddressBookEnabled!==t&&(t?P.default.navigateToSyncAddressBook({origin:u.DialogNavOrigin.Settings,hideSkipButton:!0},void 0,this._getRootViewId()):k.default.setSyncAddressBookPrivacySetting(t))}}_buildState(e,t){const i=b.default.getUserPreferencesLocal();return{syncAddressBookEnabled:k.default.getSyncAddressBookPrivacySetting(),enableLocationSharing:a.default.getS4LMessagingFeatures().enableLocationSharingOnDesktopAndWeb,bingLocationConsentGranted:_.default.bingLocationConsentAndPermissionGranted(),suggestionsEnabled:E.default.getSuggestionsEnabled(),isBingAuthCookieInSync:!!i.isBingAuthCookieInSync,sendReadReceiptsFeatureEnabled:a.default.getS4LMessagingFeatures().enableReadReceipts,showAddPhotoLabel:!g.default.getDisplayableProfile(T.default.getSkypeMri()).getAvatarUrl(),isChild:v.default.isChild()}}render(){return this.props.notificationsOnly?o.createElement(o.View,{style:B.container},o.createElement(A.default,{buttonStyles:d.ListItem.small.shortHeightStyle})):o.createElement(o.View,{style:B.container,forceDirection:!0},this._renderChatSettings(),o.createElement(A.default,{buttonStyles:d.ListItem.small.shortHeightStyle}),o.createElement(M.default,null),this._renderPrivacySettings())}_renderChatSettings(){return this._getSettingsSection(R,y.getString("UserSettingsPanel.ChatHeaderUpper"),[o.createElement(h.default,{style:this._toggleSwitchWithTextStyle,key:"displaylargeemoticons"})])}_renderPrivacySettings(){let e=[];return f.isAddressBookEnabled()&&!this.state.isChild&&(e.push(o.createElement(s.default,{key:"syncAddressBook",style:this._toggleSwitchWithTextStyle,isOn:this.state.syncAddressBookEnabled,accessibilityLabel:y.getString("UserSettingsPanel.SyncAddressBook"),onChange:this._onChangeSyncAddressBook},this._renderSwitchLabel(y.getString("UserSettingsPanel.SyncAddressBook")))),e.push(o.createElement(p.default,{key:"syncAddressBookDivider"}))),this.state.enableLocationSharing&&!this.state.isChild&&(e.push(o.createElement(s.default,{key:"shareLocationWithBing",ref:this._onShareLocationWithBingRef,style:this._toggleSwitchWithTextStyle,isOn:this.state.bingLocationConsentGranted,accessibilityLabel:y.getString("UserSettingsPanel.BingLocation"),onChange:this._onChangeBingLocationConsentGranted},this._renderSwitchLabel(y.getString("UserSettingsPanel.BingLocation")))),e.push(o.createElement(p.default,{key:"shareLocationWithBingDivider"}))),this.state.sendReadReceiptsFeatureEnabled&&e.push(o.createElement(w.default,{style:this._toggleSwitchWithTextStyle,key:"sendReadReceipts"})),this.state.ecsDiagnosticToolsEnabled&&e.push(o.createElement(L.WideButton,{key:"diagnosticTools",label:y.getString("UserSettingsPanel.DiagnosticToolsTitle"),onPressed:this._onPressDiagnosticTools,buttonStyles:d.ListItem.small.shortHeightStyle})),e.push(o.createElement(L.WideButton,{key:"profilePicture",label:y.getString("UserSettingsPanel.ProfilePictureTitle"),onPressed:this._onPressProfilePicture,buttonStyles:d.ListItem.small.shortHeightStyle,labelRight:this.state.showAddPhotoLabel?y.getString("UserSettingsPanel.AddPhotoLabel"):void 0})),e.push(o.createElement(L.WideButton,{key:"manageUsers",label:y.getString("UserSettingsPanel.ManageContactsTitle"),onPressed:this._onPressManageUsers,buttonStyles:d.ListItem.small.shortHeightStyle})),e.push(o.createElement(L.WideButton,{key:"manageSearchInfo",label:y.getString("ManageSearchInfoPanel.PanelTitle"),onPressed:this._onPressManageSearchInfo,buttonStyles:d.ListItem.small.shortHeightStyle})),this._getSettingsSection(D,y.getString("UserSettingsPanel.PrivacyHeaderUpper"),e)}_getSettingsSection(e,t,i){return o.createElement(o.View,{key:e,style:B.settingsBlockContainer},o.createElement(N.SectionTitle,{key:e,title:t,titleStyles:B.title}),o.createElement(o.View,{style:[B.settingsContainer,this._themeStyles.primaryBackgroundColorStyle]},i))}_renderSwitchLabel(e){return o.createElement(o.View,{style:B.switchLabelWrapper},o.createElement(x.RowTitle,{style:B.switchLabel,numberOfLines:2},e))}}t.default=O},82476:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(75208),s=i(16778),a=i(89391),r=i(67930),l=i(46096),c=i(36237),d=i(15877),u=i(33754),g=i(69108),h=i(93818),p=i(90631),m=(0,d.lazyProperties)({modalBackground:()=>s.Styles.createViewStyle({flex:1,alignItems:"stretch"})});class S extends r.default{constructor(){super(...arguments),this._closeMyAccountUrl=a.default.getConfigSettings().profileCard.closeMyAccountUrl,this._closeMyAccountEndUrl=a.default.getConfigSettings().profileCard.closeMyAccountEndUrl,this._onNavigationStateChange=e=>{if(this.setState({currentUrl:e.url}),e.url&&n.startsWith(e.url,this._closeMyAccountEndUrl)&&-1!==e.url.toLowerCase().indexOf("message=closeacctself"))return c.track(new h.CloseMyAccountClicked),void g.default.redirectToLogout(l.LogoutReason.CloseAccount,!0,!1)}}_buildState(e,t){return{currentUrl:a.default.getConfigSettings().profileCard.closeMyAccountUrl}}_renderPanelContent(){const e=s.Types.WebViewSandboxMode.AllowForms|s.Types.WebViewSandboxMode.AllowScripts|s.Types.WebViewSandboxMode.AllowPopups|s.Types.WebViewSandboxMode.AllowSameOrigin;return s.createElement(o.WebViewBridge,{style:this.props.style,url:this._closeMyAccountUrl,javaScriptEnabled:!0,scalesPageToFit:!1,onNavigationStateChange:this._onNavigationStateChange,startInLoadingState:!0,domStorageEnabled:!0,sandbox:e,ariaLabel:u.getString("UserSettingsPanel.CloseAccountLabel")})}render(){return s.createElement(s.View,{style:m.modalBackground},s.createElement(p.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:{closeButtonType:this.props.isAloneInNavStack?p.CloseButtonType.Close:p.CloseButtonType.Back}}),this._renderPanelContent())}_getHeaderText(e){return S.getHeaderText()}static getHeaderText(){return u.getString("UserSettingsPanel.CloseAccountLabel")}}t.default=S},6417:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(74634),s=i(3056),a=i(96074),r=i(11930),l=i(47204),c=i(15877),d=i(33754),u=i(29130),g=i(90631),h=i(57981),p=(0,c.lazyProperties)({modalInnerContainer:()=>n.Styles.createViewStyle({flex:1,paddingTop:10,paddingHorizontal:25,paddingBottom:25})}),m="desktopModal";class S extends a.default{constructor(){super(...arguments),this._closeAnimationEvent=new o.default,this._onAnimateCloseModal=()=>{const e=this._getRootViewId();this._closeAnimationEvent.fire((()=>this._onCloseModal(e)))}}_buildState(e,t){const i=this._getRootViewId();return{isMobileScreenSize:u.default.isMobileScreenSize(i)}}static displayModalWithConfig(e){const t=e.isPopup?r.default.combinedAccessibilityLabel(d.getString("Global.PopupAnnouncement"),e.title):e.title,i=n.createElement(s.default,{isPresentedInDesktopSubview:!0},n.createElement(S,{title:e.title,accessibilityTitle:t,content:e.content,modalHeight:e.modalHeight,modalWidth:e.modalWidth}));l.default.showModal(i,m,{rootViewId:e.rootViewId})}static closeModel(e){l.default.dismissModal(m,e)}render(){const e={onPress:this._onAnimateCloseModal,closeButtonType:g.CloseButtonType.Close};return n.createElement(h.default,{modalTitle:this.props.title,modalWidth:this.props.modalWidth||400,modalHeight:this.props.modalHeight||void 0,onClickOutside:this._onAnimateCloseModal,closeAnimationEvent:this._closeAnimationEvent,fullSize:!!this.state.isMobileScreenSize},n.createElement(g.SimplePanelHeader,{panelName:this.props.title,accessibleName:this.props.accessibilityTitle,leftButton:e,useTransparentBackground:!0,hideBottomBorder:!0}),n.createElement(n.View,{style:p.modalInnerContainer},this.props.content))}_onCloseModal(e){l.default.dismissModal(m,e)}}t.default=S},57004:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(89391),a=i(39119),r=i(67930),l=i(98278),c=i(66957),d=i(4604),u=i(46096),g=i(36237),h=i(15877),p=i(33754),m=i(88273),S=i(18078),C=i(4735),f=i(17093),y=i(95691),_=i(24148),v=i(49140),b=i(36150),T=i(85683),P=i(96242),A=i(90631),k=i(81760),I=i(11828),w=i(78262),N=i(80837),M=i(60305),E=i(75793),x=i(67977),L=i(45200),R=i(72758),D=i(53374),B=i(13565),O=i(77524),F=(0,h.lazyProperties)({panel:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),pannelPadding:()=>o.Styles.createViewStyle({paddingBottom:16}),container:()=>o.Styles.createViewStyle({marginHorizontal:20}),sectionHeader:()=>o.Styles.createTextStyle({paddingTop:30,paddingBottom:10})});class V extends r.default{constructor(){super(...arguments),this._onScroll=(e,t)=>{const i=e>c.DetailsPanelHeaderSizes.scrollOffsetDesktop;this.state.showHeader!==i&&this.setState({showHeader:i})},this._onUserCardRef=e=>{this._userCardRef=e||void 0},this._onHelpAndFeedbackButtonPressed=()=>{const e=D.default.newCauseId();g.log(u.LogTraceArea.Navigation,"DesktopMySettingsPanel._onHelpAndFeedbackButtonPressed causeId: "+e),g.track(new _.NavigationHelpAndFeedback(y.NavigationSettingsItem.HelpAndFeedback,y.NavigationSettingsOrigin.MySettingsPanel)),C.default.navigateToDesktopSettingsGroup(f.SettingsGroup.HelpAndFeedback,this._getRootViewId(),e)},this._goToPrivacy=()=>{C.default.navigateToManageSearchInfoPanel(v.ManageSearchOrigin.ApplicationSettings,this._getRootViewId())},this._closeModal=()=>{const e=D.default.newCauseId();g.log(u.LogTraceArea.Navigation,"DesktopMySettingsPanel.causeId causeId: "+e),this._goBack(e)}}_buildState(e,t){const i=R.default.getFullUserProfileByMri(S.default.getSkypeMri()),o=d.default.getCreditEntitlement(),s=d.default.getSubscriptions(),r={userFormattedBalance:a.getFormattedBalance(o),userSubscriptionsCount:s?n.size(s):0,displayName:i.getDisplayName(),gender:i&&i.gender||w.eGender.Unspecified,myUserStatus:m.default.getStatus(),useTabletUI:M.default.useTabletUI(),showScreenReaderHeader:b.default.isMobileScreenReaderEnabled()};return t&&(r.showHeader=!1),r}componentDidMount(){super.componentDidMount(),s.default.getS4LCommerceFeatures().offerStore.prefetch&&B.default.requestUpdate()}render(){const e=this.state.showHeader||this.state.showScreenReaderHeader,t={closeButtonType:A.CloseButtonType.Close,color:e?this._themeColors.primaryIconColor:k.Color.white,hoverColor:e?this._themeColors.iconHoverColor:k.Color.whiteOverlay80,onPress:this._closeModal,title:p.getString("UserSettingsPanel.CloseSettings")},i=e?this.state.showScreenReaderHeader?p.getString("UserSettingsPanel.SettingsTitle"):this.state.displayName:void 0,n=o.createElement(A.SimplePanelHeader,{floating:!this.state.showScreenReaderHeader,panelName:i,useTransparentBackground:!e,hideBottomBorder:!e,leftButton:t,ignorePointerEvents:!e,delayHeaderFocus:!1}),s=o.createElement(P.default,{origin:u.ContactInviteOrigin.ShareProfile,desktop:!0}),a=this._getSectionTitle(p.getString("UserSettingsPanel.OtherHeaderUpper"),"other");return o.createElement(o.Animated.View,{style:[F.panel,this._themeStyles.primaryBackgroundColorStyle]},o.createElement(o.View,{style:[F.panel,this._themeStyles.primaryBackgroundColorStyle]},n,o.createElement(o.ScrollView,{style:N.default.flexOne,onScroll:this._onScroll,scrollEventThrottle:32},o.createElement(o.View,{style:[F.panel,F.pannelPadding,this._themeStyles.primaryBackgroundColorStyle]},o.createElement(E.default,{ref:this._onUserCardRef,allowEditAvatar:!0,allowOpenAvatarInMediaViewer:!1,replaceHeader:!0,userIconSize:x.UserIconSize.Size120,userMri:S.default.getSkypeMri(),readOnlyView:!1}),o.createElement(o.View,{style:F.container},s,this._getSectionTitle(p.getString("UserSettingsPanel.MyProfileTitleUpper"),"profile"),o.createElement(L.default,{userMri:S.default.getSkypeMri()}),a,this._getSupportSettings())))))}_getSectionTitle(e,t){return o.createElement(T.SectionTitle,{key:t,title:e,titleStyles:F.sectionHeader})}_getSupportSettings(){return o.createElement(o.View,null,this._getManagePrivacyButton(),this._getHelpAndFeedbackButton())}_getHelpAndFeedbackButton(){return this._getWideButton({icon:I.SkypeIcon.Question,label:p.getString("UserSettingsPanel.HelpAndAboutTitle"),key:f.SettingsGroup[f.SettingsGroup.HelpAndFeedback],onPressed:this._onHelpAndFeedbackButtonPressed})}_getManagePrivacyButton(){return this._getWideButton({icon:I.SkypeIcon.ContactGroup,label:p.getString("MyUserInfo.ManagePrivacyTitle"),onPressed:this._goToPrivacy})}_getWideButton(e){return o.createElement(O.WideButton,Object.assign({},e,{buttonStyles:l.ListItem.small.shortHeightStyle}))}_getHeaderText(e){return e.displayName+" "+p.getString("MyProfilePanel.SettingsTitle")}}t.default=V},57595:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(56879),s=i(84122),a=i(19436),r=i(75352),l=i(62165),c=i(67930),d=i(72514),u=i(98278),g=i(73175),h=i(32977),p=i(4336),m=i(70635),S=i(72822),C=i(46096),f=i(54365),y=i(34452),_=i(36237),v=i(12150),b=i(15877),T=i(33754),P=i(79430),A=i(89808),k=i(17093),I=i(20941),w=i(6476),N=i(36150),M=i(90631),E=i(19865),x=i(11828),L=i(80837),R=i(51699),D=i(18956),B=i(53374);var O;!function(e){e[e.Default=0]="Default",e[e.HeaderOnly=1]="HeaderOnly",e[e.None=2]="None"}(O||(O={}));const F=(0,b.lazyProperties)({container:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),innerContainer:()=>n.Styles.createViewStyle({marginHorizontal:20})}),V={[k.SettingsGroup.AppSettings]:"DesktopProfileMenu.AppSettingsTitle",[k.SettingsGroup.AudioVideoSettings]:"AudioVideoSettings.Title",[k.SettingsGroup.AudioSettings]:"AudioVideoSettings.AudioSettingsTitle",[k.SettingsGroup.AccountAndProfile]:"UserSettingsPanel.AccountAndProfileSettingsTitle",[k.SettingsGroup.ThemeSettings]:"ColorThemeDialog.HeaderText",[k.SettingsGroup.HelpAndFeedback]:"UserSettingsPanel.HelpAndAboutTitle",[k.SettingsGroup.About]:"UserSettingsPanel.AboutButton",[k.SettingsGroup.Notifications]:"UserSettingsPanel.NotificationsTitle",[k.SettingsGroup.Chat]:"UserSettingsPanel.MessagingAndChatsTitle",[k.SettingsGroup.General]:"UserSettingsPanel.GeneralTitle",[k.SettingsGroup.Privacy]:"UserSettingsPanel.PrivacyHeader",[k.SettingsGroup.Contacts]:"UserSettingsPanel.ContactsTitle",[k.SettingsGroup.MyAccountAndProfile]:"UserSettingsPanel.MyAccountAndProfileTitle",[k.SettingsGroup.BalanceState]:"BalanceStatePanel.Title",[k.SettingsGroup.SkypeNumber]:"SkypeNumberPanel.Title",[k.SettingsGroup.SyncAddressBook]:"SyncAddressBookDialog.HeaderText",[k.SettingsGroup.HotKeys]:"KeyboardShortcuts.Title2",[k.SettingsGroup.ReportProblem]:"FeedbackMechanism.ReportAProblemDialogTitle",[k.SettingsGroup.ManagePayments]:"UserSettingsPanel.ManagePaymentsSettingsTitle"},U=Object.assign(Object.assign({},V),{[k.SettingsGroup.HotKeys]:"KeyboardShortcuts.Title2",[k.SettingsGroup.ReportProblem]:"FeedbackMechanism.ReportAProblemDialogTitle",[k.SettingsGroup.ThemeSettings]:"ColorThemeDialog.HeaderTextShort"});class H extends c.default{constructor(){super(...arguments),this._setRightButton=e=>{this.setState({rightButton:e})},this._closeModal=()=>{const e=B.default.newCauseId();_.log(C.LogTraceArea.Navigation,"DesktopSettingsGroupPanel._closeModal,  causeId: "+e),this._goBack(e)}}static getHeaderText(e,t){const i=t?V[e]:U[e];return i||_.warn(C.LogTraceArea.GenericUnsafe,"DesktopSettingsGroupPanel._getHeaderText, no title key found"),T.getString(i||"UserSettingsPanel.SettingsTitle")}_buildState(e,t){const i={isMobileScreenReaderEnabled:N.default.isMobileScreenReaderEnabled(),myUserColor:A.default.getColorInfo(!0)};return t&&(i.rightButton=void 0),i}render(){let e;switch(this._contentContainerStyle()){case O.None:e=this._renderContent();break;case O.HeaderOnly:e=this._renderContentInContainer(!1);break;case O.Default:e=this._renderContentInContainer(!0)}return n.createElement(n.View,{style:F.container},e)}_contentContainerStyle(){switch(this.props.group){case k.SettingsGroup.About:case k.SettingsGroup.BalanceState:return O.None;case k.SettingsGroup.SyncAddressBook:case k.SettingsGroup.ReportProblem:return O.HeaderOnly;default:return O.Default}}_renderContentInContainer(e){const t=this.props.isAloneInNavStack&&this._getContext().isPresentedInSplitView?void 0:{closeButtonType:this.props.isAloneInNavStack?M.CloseButtonType.Close:M.CloseButtonType.Back,onPress:this._closeModal,title:T.getString(this.props.isAloneInNavStack?"Global.CloseButtonTitle":"Global.BackButtonTitle")};let i;this.props.isAloneInNavStack&&!this.state.isMobileScreenReaderEnabled&&this._getContext().isPresentedInSplitView||this.props.group===k.SettingsGroup.SyncAddressBook||(i=n.createElement(M.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:t,rightButtons:this.state.rightButton,useTransparentBackground:!0,delayHeaderFocus:!1}));let o=this._renderContent();if(e){const e=this._getContext().isPresentedInSplitView&&this.props.group===k.SettingsGroup.AccountAndProfile&&!0;o=n.createElement(n.ScrollView,{style:L.default.flexOne,ignoreRTL:e},o)}return n.createElement(n.View,{style:F.container},i,o)}_renderContent(){const e={isAloneInNavStack:this.props.isAloneInNavStack,isFullScreenModal:this.props.isFullScreenModal,buttonStyles:u.ListItem.small.shortHeightStyle,closeModal:this.props.closeModal,setRightButton:this._setRightButton};switch(this.props.group){case k.SettingsGroup.AppSettings:return n.createElement(h.default,null);case k.SettingsGroup.Notifications:return n.createElement(I.default,Object.assign({style:F.innerContainer},e));case k.SettingsGroup.AudioVideoSettings:return n.createElement(a.default,Object.assign({settingsMode:r.SettingsMode.All},e));case k.SettingsGroup.AudioSettings:return n.createElement(a.default,Object.assign({settingsMode:r.SettingsMode.Audio},e));case k.SettingsGroup.MyAccountAndProfile:return n.createElement(P.default,Object.assign({style:F.innerContainer},e));case k.SettingsGroup.AccountAndProfile:return n.createElement(s.default,Object.assign({style:F.innerContainer},e));case k.SettingsGroup.BalanceState:return n.createElement(l.default,Object.assign({showHeader:!0,source:"DesktopSettings.navigateBalanceState"},e));case k.SettingsGroup.SkypeNumber:return n.createElement(E.default,{route:{params:Object.assign({},e)}});case k.SettingsGroup.ThemeSettings:return n.createElement(D.default,Object.assign({origin:S.DialogNavOrigin.Settings,style:F.innerContainer},e));case k.SettingsGroup.HelpAndFeedback:return n.createElement(y.default,Object.assign({style:F.innerContainer},e));case k.SettingsGroup.About:return n.createElement(o.default,Object.assign({showHeader:!0},e));case k.SettingsGroup.Chat:return n.createElement(d.default,Object.assign({style:F.innerContainer},e));case k.SettingsGroup.Contacts:return n.createElement(g.default,Object.assign({style:F.innerContainer},e));case k.SettingsGroup.General:return n.createElement(f.default,Object.assign({style:F.innerContainer},e));case k.SettingsGroup.Privacy:return n.createElement(w.default,Object.assign({style:F.innerContainer},e));case k.SettingsGroup.SyncAddressBook:return n.createElement(R.default,Object.assign({origin:S.DialogNavOrigin.Settings,contentTopOffest:0,hideHeader:!0,hideSkipButton:!0,hideCloseButton:!0,nextButtonIcon:x.SkypeIcon.Ok,compositeNavContainerWidth:p.DefaultWidth},e));case k.SettingsGroup.HotKeys:return n.createElement(v.default,Object.assign({},e));case k.SettingsGroup.ReportProblem:return n.createElement(m.default,Object.assign({},e));default:return}}_getHeaderText(e){return H.getHeaderText(this.props.group,!!this._getContext().isPresentedInSplitView)}}t.default=H},38558:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(67930),s=i(98278),a=i(46096),r=i(39285),l=i(36237),c=i(15877),d=i(33754),u=i(4735),g=i(17093),h=i(34170),p=i(90631),m=i(11010),S=i(80837),C=i(53374),f=i(91066),y=(0,c.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),titleContainer:()=>n.Styles.createViewStyle({paddingTop:30,paddingHorizontal:15,paddingBottom:15})});class _ extends o.default{constructor(){super(...arguments),this._closeSettings=()=>{const e=C.default.newCauseId();l.log(a.LogTraceArea.Navigation,"DesktopSettingsMenu._closeSettings, causeId: "+e),this.props.closeModal?this.props.closeModal():u.default.closeGenericDesktopModal(e,this._getRootViewId())}}static getHeaderText(){return d.getString("MyProfilePanel.SettingsButtonTitle")}_buildState(e,t){var i;const n={};return(null===(i=e.detailContext)||void 0===i?void 0:i[0])instanceof g.DesktopSettingsGroupNavigationContext?n.settingsGroup=e.detailContext[0].state.group:n.settingsGroup=void 0,n}render(){const e=this.props.isAloneInNavStack&&!this._getContext().isPresentedInSplitView?n.createElement(p.SimplePanelHeader,{panelName:this._getContext().isPresentedInSplitView?void 0:this.props.title,leftButton:{closeButtonType:p.CloseButtonType.Close,onPress:this._closeSettings},useTransparentBackground:this._getContext().isPresentedInSplitView}):void 0,t=[y.panel];!this._getContext().isPresentedInSplitView||this.props.isAloneInNavStack?t.push(this._themeStyles.primaryBackgroundColorStyle):t.push(this._themeStyles.secondaryBackgroundColorStyle);const i=this._getContext().rootViewType===s.RootViewType.NativeWindow;return n.createElement(f.default,{style:t,shouldGroupAccessibilityChildren:!1},e,n.createElement(n.ScrollView,{style:S.default.flexOne},n.createElement(n.View,null,i?this._getTitle():void 0,n.createElement(h.default,{detailContext:this.props.detailContext,isAloneInNavStack:this.props.isAloneInNavStack,title:this.props.title,resetFocus:this.props.resetFocus}))))}_getTitle(){const e=d.getString("UserSettingsPanel.SettingsTitle");let t=e,i=n.Types.AccessibilityTrait.Header;return n.createElement(n.View,{style:y.titleContainer,accessibilityLabel:t,accessibilityTraits:i,importantForAccessibility:n.Types.ImportantForAccessibility.Yes},n.createElement(r.HiddenText,{style:[m.default.fontStyle.messagingHeaderSmall,this._themeStyles.headerTextColorStyle]},e))}_getHeaderText(e){return _.getHeaderText()}}t.default=_},35268:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=(i(98278),i(10167)),s=(i(2519),i(32910)),a=i(46096),r=(i(10117),i(15877)),l=i(33754),c=(i(15415),i(22222),i(81760),i(40363)),d=(i(11828),i(19675),i(24576)),u=i(11010);(0,r.lazyProperties)({wrapper:()=>n.Styles.createViewStyle({marginTop:6,marginBottom:6,flexDirection:"row",alignItems:"center"}),statusMessage:()=>n.Styles.createTextStyle({marginLeft:6,flexShrink:1}),actionButton:()=>n.Styles.createButtonStyle({marginLeft:12,alignSelf:"center"}),actionButtonText:()=>n.Styles.createTextStyle({fontSize:u.default.fontSize.size14})});class g extends d.default{constructor(){super(...arguments),this._onActionButtonPress=()=>{g._installUpdate(this._getRootViewId())},this._onActionButtonHoverStart=()=>{this.setState({updateStatus:this.state.updateStatus,isHoveringActionButton:!0})},this._onActionButtonHoverEnd=()=>{this.setState({updateStatus:this.state.updateStatus,isHoveringActionButton:!1})}}_buildState(){return{updateStatus:o.default.getUpdateStatus(),isHoveringActionButton:!1}}componentDidMount(){super.componentDidMount(),o.default.checkForUpdates()}render(){return null}_getUpdateMessage(){return c.default.getPlatformType()===a.PlatformType.Linux?l.getString("AboutPanel.UpdateDownloadedLinux"):l.getString("AboutPanel.UpdateDownloaded")}_getUpdateButtonText(){return c.default.getPlatformType()===a.PlatformType.Linux?l.getString("AboutPanel.UpdateButtonLinux"):l.getString("AboutPanel.UpdateButton")}}t.default=g,g._retryUpdate=()=>{o.default.checkForUpdates()},g._installUpdate=e=>{s.tryToQuitAndInstallUpdate(e)}},23886:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackCategoryPicker=t.ReportCategories=void 0;const n=i(96486),o=i(16778),s=i(15877),a=i(33754),r=i(24576),l=i(53374),c=i(93194),d=(0,s.lazyProperties)({picker:()=>o.Styles.createPickerStyle({height:44,borderRadius:8,paddingLeft:16}),mobilePicker:()=>o.Styles.createPickerStyle({flex:1,alignContent:"center",borderWidth:1,borderStyle:"solid"})});var u;!function(e){e.default="0",e.call="3",e.phoneCallsAndSms="13",e.chat="4",e.performanceCrashing="6",e.contactsAndSearch="12",e.accessibility="1",e.notifications="5",e.other="11"}(u=t.ReportCategories||(t.ReportCategories={}));class g extends r.default{constructor(){super(...arguments),this._onHandleMenuCommand=e=>{this.props.onHandleMenuCommand(e)},this._onPickerButtonRef=e=>{this._pickerButton=e||void 0},this._onPickerClick=e=>{const t={anchor:()=>this._pickerButton,useTheme:!0,positionPriorities:["bottom","top"]};return c.default.showWithOptions({id:"FeedbackCategoryPicker",config:t,getMenuItems:()=>this.state.items.map((e=>({text:e.label,command:e.value,isCheckbox:!0}))),handleMenuCommand:e=>{e!==c.SXActionMenuCancel&&this._onHandleMenuCommand(e)},rootViewId:this._getRootViewId(),invokingEvent:e})}}_buildState(e,t){return{items:n.map(u,(e=>({label:this._getCategoryName(e),value:e})))}}render(){const e=[d.picker,{backgroundColor:this._themeColors.primaryBackgroundColor,borderColor:this._themeColors.dividerColor,color:this._themeColors.primaryTextColor}];return o.createElement(o.Picker,{items:this.state.items,style:e,selectedValue:this.props.selectedReportCategory,onValueChange:this._onHandleMenuCommand})}_getCategoryName(e){switch(e){case u.default:return a.getString("FeedbackMechanism.FeedbackCategoryDefault");case u.call:return a.getString("FeedbackMechanism.FeedbackCategoryCall");case u.phoneCallsAndSms:return a.getString("FeedbackMechanism.FeedbackCategoryPhoneCallsAndSms");case u.chat:return a.getString("FeedbackMechanism.FeedbackCategoryChat");case u.performanceCrashing:return a.getString("FeedbackMechanism.FeedbackCategoryPerformanceCrashing");case u.contactsAndSearch:return a.getString("FeedbackMechanism.FeedbackCategoryContactsAndSearch");case u.notifications:return a.getString("FeedbackMechanism.FeedbackCategoryNotifications");case u.accessibility:return a.getString("FeedbackMechanism.FeedbackCategoryAccessibility");case u.other:return a.getString("FeedbackMechanism.FeedbackCategoryOther");default:return l.default.switchStatementExhaustiveChecking(e)}}_renderMobilePicker(e){return o.createElement(o.Button,{ref:this._onPickerButtonRef,style:[e,d.mobilePicker],onPress:this._onPickerClick},o.createElement(o.Text,{style:{color:this._themeColors.primaryTextColor}},this._getCategoryName(this.props.selectedReportCategory)))}}t.FeedbackCategoryPicker=g},6652:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(98278),a=i(87134),r=i(65110),l=i(15877),c=i(33754),d=i(71639),u=i(6658),g=i(1246),h=i(78735),p=i(93194),m=i(19675),S=i(24576),C=(0,l.lazyProperties)({container:()=>o.Styles.createViewStyle({justifyContent:"space-between",flexDirection:"row",alignItems:"center",alignSelf:"stretch"}),button:()=>o.Styles.createButtonStyle({flexDirection:"row",alignItems:"stretch",marginLeft:10}),chevron:()=>o.Styles.createTextStyle({marginTop:4})});class f extends S.default{constructor(){super(...arguments),this._items=[{label:c.getString("UserSettingsPanel.TextSizeSmaller"),value:u.MessageStreamFontSize[u.MessageStreamFontSize.Smaller]},{label:c.getString("UserSettingsPanel.TextSizeSmall"),value:u.MessageStreamFontSize[u.MessageStreamFontSize.Small]},{label:c.getString("UserSettingsPanel.TextSizeNormal"),value:u.MessageStreamFontSize[u.MessageStreamFontSize.Normal]},{label:c.getString("UserSettingsPanel.TextSizeLarge"),value:u.MessageStreamFontSize[u.MessageStreamFontSize.Large]},{label:c.getString("UserSettingsPanel.TextSizeLarger"),value:u.MessageStreamFontSize[u.MessageStreamFontSize.Larger]}],this._onPickerButtonRef=e=>{this._pickerButton=e},this._onPickerClick=e=>{const t={anchor:()=>this._pickerButton,useTheme:!0,positionPriorities:["bottom","top"]};return p.default.showWithOptions({id:"fontSizePickerMenu",config:t,getMenuItems:this._getMenuItems,handleMenuCommand:this._onHandleMenuCommand,rootViewId:this._getRootViewId(),invokingEvent:e})},this._getMenuItems=()=>this._items.map((e=>({text:e.label,command:e.value,selected:e.value===u.MessageStreamFontSize[this.state.currentFontSize],isCheckbox:!0}))),this._onHandleMenuCommand=e=>{if(e===p.SXActionMenuCancel)return;let t;switch(e){case u.MessageStreamFontSize[u.MessageStreamFontSize.Smaller]:t=u.MessageStreamFontSize.Smaller;break;case u.MessageStreamFontSize[u.MessageStreamFontSize.Small]:t=u.MessageStreamFontSize.Small;break;case u.MessageStreamFontSize[u.MessageStreamFontSize.Large]:t=u.MessageStreamFontSize.Large;break;case u.MessageStreamFontSize[u.MessageStreamFontSize.Larger]:t=u.MessageStreamFontSize.Larger;break;case u.MessageStreamFontSize[u.MessageStreamFontSize.Normal]:default:t=u.MessageStreamFontSize.Normal}d.setFontSize(t,g.FontSizeChangeOrigin.Settings)}}_buildState(e,t){return{currentFontSize:h.default.getMessageStreamFontSize()}}render(){const e=c.getString("UserSettingsPanel.TextSize")+", "+this._getSelectedItemLabel()+", "+c.getString("Global.SelectedAccessibilityLabel");return o.createElement(o.View,null,o.createElement(o.View,{style:[C.container,s.ListItem.small.shortHeightStyle]},o.createElement(m.RowTitle,{colorThemeOverride:this._currentTheme},c.getString("UserSettingsPanel.TextSize")),o.createElement(r.default,{ref:this._onPickerButtonRef,style:C.button,label:this._getSelectedItemLabel(),useBodyBoldLabel:!0,labelMaxWidth:270,chevronStyle:C.chevron,onPress:this._onPickerClick,accessibilityLabel:e})),o.createElement(a.default,null))}_getSelectedItemLabel(){const e=n.find(this._items,(e=>e.value===u.MessageStreamFontSize[this.state.currentFontSize]));return e?e.label:""}}t.default=f},54365:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(64282),s=i(67930),a=i(5114),r=i(33754),l=i(28574),c=i(80982);class d extends s.default{static getHeaderText(){return r.getString("UserSettingsPanel.GeneralTitle")}render(){return n.createElement(n.View,{style:this.props.style},n.createElement(a.default,null),n.createElement(l.default,null),n.createElement(o.default,null),n.createElement(c.default,null))}_getHeaderText(e){return d.getHeaderText()}}t.default=d},34452:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(1130),s=i(56879),a=i(67930),r=i(33413),l=i(15877),c=i(33754),d=i(85683),u=(0,l.lazyProperties)({container:()=>n.Styles.createViewStyle({paddingBottom:20})});class g extends a.default{static getHeaderText(){return c.getString("UserSettingsPanel.HelpAndAboutTitle")}render(){return n.createElement(n.View,{style:[u.container,this.props.style]},n.createElement(s.default,{isPartOfOtherPanel:!0}),n.createElement(r.default,{buttonStyles:this.props.buttonStyles}),n.createElement(d.SectionTitle,{title:c.getString("UserSettingsPanel.AboutTitleUpper")}),n.createElement(o.default,{buttonStyles:this.props.buttonStyles}))}_getHeaderText(e){return g.getHeaderText()}}t.default=g},33413:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(87720),a=i(89391),r=(i(51587),i(31733)),l=i(36237),c=i(33754),d=i(93486),u=i(78735),g=i(4735),h=i(95691),p=i(24148),m=i(95697),S=i(85683),C=i(90602),f=i(82445),y=(i(40363),i(24576)),_=i(77524);class v extends y.default{constructor(){super(...arguments),this._onDisableShakeAndSendChange=(e,t)=>{u.default.setDisableShakeAndSend(!t)},this._getDevFeatures=()=>[],this._onPressManageFeatureFlags=()=>{g.default.navigateToFeatureFlags(this._getRootViewId())},this._onPressManageSlimcoreFlags=()=>{g.default.navigateToSlimcoreFlags(this._getRootViewId())},this._onPressShowRawConfig=()=>{g.default.navigateToRawPreferences(this._getRootViewId())},this._sxPlaygroundPress=()=>{g.default.navigateToSXPlayground()},this._getSXPlayground=()=>{},this._onSendFeedbackButtonPressed=()=>{l.track(new p.NavigationHelpAndFeedback(h.NavigationSettingsItem.SendFeedback,h.NavigationSettingsOrigin.HelpAndFeedbackMenu)),m.default.openFeedbackUrl(a.default.getConfigSettings().feedbackAndProblemGoParam.feedback,c.getString("MyProfilePanel.SendFeedbackButtonTitle"),this._getRootViewId())},this._onBrowseKnownIssuesButtonPressed=()=>{const e=r.getTelemetryCorrelationId();l.track(new p.NavigationHelpAndFeedback(h.NavigationSettingsItem.BrowseKnownIssues,h.NavigationSettingsOrigin.HelpAndFeedbackMenu,e)),this._openHelpUrlWithTrackingParams(a.default.getConfigSettings().helpGoParam.browseKnownIssues,c.getString("MyProfilePanel.BrowseKnownIssuesButtonTitle"),e)},this._onSkypeStatusButtonTitleButtonPressed=()=>{const e=r.getTelemetryCorrelationId();l.track(new p.NavigationHelpAndFeedback(h.NavigationSettingsItem.SkypeStatus,h.NavigationSettingsOrigin.HelpAndFeedbackMenu,e)),this._openHelpUrlWithTrackingParams(a.default.getConfigSettings().helpGoParam.skypeStatus,c.getString("MyProfilePanel.SkypeStatusButtonTitle"),e)},this._onSupportArticlesButtonPressed=()=>{const e=r.getTelemetryCorrelationId();l.track(new p.NavigationHelpAndFeedback(h.NavigationSettingsItem.GetHelp,h.NavigationSettingsOrigin.HelpAndFeedbackMenu,e)),this._openHelpUrlWithTrackingParams(a.default.getConfigSettings().helpGoParam.supportArticles,c.getString("MyProfilePanel.GetHelpTitle"),e)},this._onReportAProblemButtonPressed=()=>{l.track(new p.NavigationHelpAndFeedback(h.NavigationSettingsItem.ReportAProblem,h.NavigationSettingsOrigin.HelpAndFeedbackMenu)),m.default.reportProblem(!0,this._getRootViewId())},this._onRateUsButtonPressed=()=>{l.track(new p.NavigationHelpAndFeedback(h.NavigationSettingsItem.RateUs,h.NavigationSettingsOrigin.HelpAndFeedbackMenu)),m.default.openFeedbackUrl(a.default.getConfigSettings().feedbackAndProblemGoParam.rating,c.getString("MyProfilePanel.RateUsButtonTitle"),this._getRootViewId())},this._onUserVoiceLinkPressed=()=>{l.track(new p.NavigationHelpAndFeedback(h.NavigationSettingsItem.UserVoice,h.NavigationSettingsOrigin.HelpAndFeedbackMenu)),o.Linking.openUrl(r.getUserVoiceLinkUrl())}}_buildState(e,t){return{ecsShakeToSendEnabled:a.default.getOnboardingFeatures().enableReportProblemViaBot||a.default.getOnboardingFeatures().features.enableReportProblemDirectly,enableShakeAndSend:!u.default.isShakeAndSendDisabled(),enableUserVoiceLink:r.isUserVoiceLinkEnabled(),enableBrowseKnownIssuesLink:a.default.getS4LUiFeatures().enableBrowseKnownIssuesLink,isChild:d.default.isChild()}}render(){const e=[o.createElement(S.SectionTitle,{key:"helpTitle",title:c.getString("MyProfilePanel.HelpTitle")}),this._getHelpbutton(),this.state.enableBrowseKnownIssuesLink?this._getBrowseKnownIssuesButton():void 0,this._getSkypeStatusButton(),...this._getDevFeatures()];return this.state.isChild||e.push(o.createElement(S.SectionTitle,{key:"feedbackTitle",title:c.getString("MyProfilePanel.FeedbackTitle")}),this._getSendFeedbackButton(),this._getReportAProblemButton(),this.state.enableUserVoiceLink?this._getUserVoiceLinkButton():void 0,this._getRateUsButton(),void 0),o.createElement(o.View,{style:this.props.style},n.compact(e))}_getReportAProblemButton(){return o.createElement(_.WideButton,{label:c.getString("MyProfilePanel.ReportAProblemButtonTitle"),onPressed:this._onReportAProblemButtonPressed,key:"reportAProblem",buttonStyles:this.props.buttonStyles,hideArrow:!0})}_getSendFeedbackButton(){return o.createElement(_.WideButton,{label:c.getString("MyProfilePanel.GiveFeedbackButtonTitle"),onPressed:this._onSendFeedbackButtonPressed,key:"sendFeedback",buttonStyles:this.props.buttonStyles,hideArrow:!0})}_getSkypeStatusButton(){return o.createElement(_.WideButton,{label:c.getString("MyProfilePanel.SkypeStatusButtonTitle"),onPressed:this._onSkypeStatusButtonTitleButtonPressed,key:"skypeStatus",buttonStyles:this.props.buttonStyles,hideArrow:!0})}_getBrowseKnownIssuesButton(){return o.createElement(_.WideButton,{label:c.getString("MyProfilePanel.BrowseKnownIssuesButtonTitle"),onPressed:this._onBrowseKnownIssuesButtonPressed,key:"browseKnownIssues",buttonStyles:this.props.buttonStyles,hideArrow:!0})}_getHelpbutton(){return o.createElement(_.WideButton,{label:c.getString("MyProfilePanel.GetHelpTitle"),onPressed:this._onSupportArticlesButtonPressed,key:"supportArticles",buttonStyles:this.props.buttonStyles,hideArrow:!0})}_getRateUsButton(){return o.createElement(_.WideButton,{label:c.getString("MyProfilePanel.RateUsButtonTitle"),onPressed:this._onRateUsButtonPressed,key:"rateUs",buttonStyles:this.props.buttonStyles,hideArrow:!0})}_getShakeAndSendButton(){const e=c.getString("UserSettingsPanel.EnableShakeAndSend");return o.createElement(s.default,{key:"enableShakeAndSend",style:[C.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enableShakeAndSend,accessibilityLabel:e,onChange:this._onDisableShakeAndSendChange},o.createElement(S.SwitchLabel,{title:e}))}_getUserVoiceLinkButton(){return o.createElement(_.WideButton,{label:c.getString("MyProfilePanel.UserVoice"),onPressed:this._onUserVoiceLinkPressed,key:"userVoiceLink",buttonStyles:this.props.buttonStyles,hideArrow:!0})}_openHelpUrlWithTrackingParams(e,t,i){let n=f.addSsoFlagToUrl(e,!0);n=r.addCommonTrackingParams(n,!0,!0);const o={tcg:i};g.default.navigateToHelpAndFeedbackLink(n,"",t,this._getRootViewId(),o)}}t.default=v},85683:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SectionTitle=t.SwitchLabel=void 0;const n=i(16778),o=i(11930),s=i(15877),a=i(90602),r=i(80837),l=i(19675),c=i(24576),d=i(59433),u=i(98278),g=i(33754),h=(0,s.lazyProperties)({title:()=>n.Styles.createTextStyle({paddingTop:30,paddingBottom:10})});class p extends c.default{constructor(){super(...arguments),this._onLearnMore=e=>{e.stopPropagation(),e.preventDefault(),n.Linking.openUrl(this.props.learnMoreUrl)}}render(){const e=[a.default.switchTitleMediumSemiLarge];this.props.disabled&&e.push(this._themeStyles.disabledTextColorStyle);const t=n.createElement(l.RowTitle,{style:e,numberOfLines:2},this.props.title);let i;return this.props.subtitle&&(i=n.createElement(n.View,null,n.createElement(l.Caption,{style:a.default.subtitleMediumSemiLarge,numberOfLines:4},this.props.subtitle,this.props.learnMoreUrl?" ":null,this._getOptionalLearnMoreLink()))),n.createElement(n.View,{style:r.default.flexOne},t,i)}_getOptionalLearnMoreLink(){return this.props.learnMoreUrl?n.createElement(d.default,{linkTextStyle:u.LinkTextStyle.Caption,url:"#",key:"learnMore",blue:!0,onPress:this._onLearnMore},g.getString("Global.LearnMore")):null}}t.SwitchLabel=p;class m extends c.default{render(){let e=n.createElement(l.Subtitle,{style:this.props.titleStyles||h.title,numberOfLines:this.props.numberOfLines||1,colorThemeOverride:this.props.colorThemeOverride,accessibilityHidden:!0},this.props.title);{const t=o.default.headerAccessibilityInfo(this.props.title);e=n.createElement(n.View,{style:this.props.containerStyles,accessibilityLabel:t.accessibilityLabel,accessibilityTraits:t.accessibilityTraits,importantForAccessibility:n.Types.ImportantForAccessibility.Yes},e)}return e}}t.SectionTitle=m},90602:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(15877);t.default=(0,o.lazyProperties)({controlRow:()=>n.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"space-between",minHeight:60,borderBottomWidth:1}),titleMediumSemiLarge:()=>n.Styles.createTextStyle({flex:1,marginRight:12}),switchTitleMediumSemiLarge:()=>n.Styles.createTextStyle({flex:1,marginRight:12,marginTop:4,marginBottom:2}),subtitleMediumSemiLarge:()=>n.Styles.createTextStyle({flex:1,marginRight:12,marginTop:2,marginBottom:4}),controlRowWithDescription:()=>n.Styles.createViewStyle({paddingTop:5,flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingBottom:0,marginVertical:0})})},12150:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(89391),a=i(67930),r=i(47447),l=i(11930),c=i(87134),d=i(46096),u=i(36237),g=i(72490),h=i(15877),p=i(33754),m=i(93486),S=i(78735),C=i(85683),f=i(80837),y=i(19675),_=i(53374);var v;!function(e){e[e.General=0]="General",e[e.Messaging=1]="Messaging",e[e.Calling=2]="Calling",e[e.Accessibility=3]="Accessibility",e[e.Global=4]="Global"}(v||(v={}));const b=[{category:v.General,shortcuts:[d.KeyboardShortcut.OpenKeyboardShortcuts,d.KeyboardShortcut.OpenMainWindow,d.KeyboardShortcut.CloseSplitViewConversation,d.KeyboardShortcut.OpenAppSettings,d.KeyboardShortcut.OpenHelpInABrowser,d.KeyboardShortcut.SendFeedback,d.KeyboardShortcut.OpenThemePicker,d.KeyboardShortcut.ToggleTheme,d.KeyboardShortcut.NavigateToRecents,d.KeyboardShortcut.OpenNotificationPanel,d.KeyboardShortcut.Search,d.KeyboardShortcut.NavigateToNextConversation,d.KeyboardShortcut.NavigateToPreviousConversation,d.KeyboardShortcut.ZoomIn,d.KeyboardShortcut.ZoomOut,d.KeyboardShortcut.ResetZoom,d.KeyboardShortcut.Quit]},{category:v.Messaging,shortcuts:[d.KeyboardShortcut.StartNewConversation,d.KeyboardShortcut.NewGroup,d.KeyboardShortcut.OpenContactsPanel,d.KeyboardShortcut.ShowConversationProfile,d.KeyboardShortcut.AddPeopleToConversation,d.KeyboardShortcut.SendFile,d.KeyboardShortcut.ToggleGallery,d.KeyboardShortcut.MarkAsUnread,d.KeyboardShortcut.EditMessage,d.KeyboardShortcut.FocusMessageComposer,d.KeyboardShortcut.EnableMultipleSelectMessages,d.KeyboardShortcut.ArchiveConversation,d.KeyboardShortcut.SearchInConversation]},{category:v.Calling,shortcuts:[d.KeyboardShortcut.AcceptIncomingCall,d.KeyboardShortcut.HangupOrRejectCall,d.KeyboardShortcut.StartVideoCall,d.KeyboardShortcut.StartAudioCall,d.KeyboardShortcut.ToggleMicrophone,d.KeyboardShortcut.ToggleCamera,d.KeyboardShortcut.ResizeVideoPreview,d.KeyboardShortcut.OpenDialpad,d.KeyboardShortcut.AddPeopleToCall,d.KeyboardShortcut.TakeCallSnapshot]},{category:v.Accessibility,shortcuts:[d.KeyboardShortcut.AnnounceMuteStatus,d.KeyboardShortcut.AnnounceSelfVideoOnOffStatus]}],T=(0,h.lazyProperties)({row:()=>o.Styles.createViewStyle({flexDirection:"row",justifyContent:"space-between",marginVertical:8}),rowWithKeyViews:()=>o.Styles.createViewStyle({marginVertical:2,paddingBottom:6,alignItems:"center"}),innerRow:()=>o.Styles.createViewStyle({marginHorizontal:12}),sectionTitleRow:()=>o.Styles.createViewStyle({marginHorizontal:12,paddingBottom:8,paddingTop:24}),firstSectionTitleRow:()=>o.Styles.createViewStyle({paddingTop:12}),keyBase:()=>o.Styles.createTextStyle({margin:1}),keyWrapper:()=>o.Styles.createTextStyle({paddingVertical:8}),keyView:()=>o.Styles.createTextStyle({borderWidth:1,borderRadius:5,margin:1,textAlign:"center",paddingVertical:6,paddingHorizontal:8}),dividerStyle:()=>o.Styles.createViewStyle({position:"absolute",left:0,right:0,bottom:0,height:1})});class P extends a.default{constructor(){super(...arguments),this._handleKeyboardCommand=()=>{const e=_.default.newCauseId();return u.log(d.LogTraceArea.Navigation,"KeyboardShortcutsPanel._handleKeyboardCommand causeId: "+e),this._goBack(e),!0},this._onContainerLayout=e=>{this.state.viewWidth!==e.width&&this.setState({viewWidth:e.width})},this._renderShortcutsGroup=(e,t,i)=>{const s=n.map(e.shortcuts,(e=>this._renderShortcutRow(e,i)));if(s.length>0){let i;switch(e.category){case v.General:i=p.getString("KeyboardShortcuts.GeneralCategoryHeader");break;case v.Messaging:i=p.getString("KeyboardShortcuts.MessagingCategoryHeader");break;case v.Calling:i=p.getString("KeyboardShortcuts.CallingCategoryHeader");break;case v.Accessibility:i=p.getString("KeyboardShortcuts.AccessibilityCategoryHeader");break;case v.Global:i=p.getString("KeyboardShortcuts.GlobalCategoryHeader");break;default:i=_.default.switchStatementExhaustiveChecking(e.category)}const n=[T.sectionTitleRow];0===t&&n.push(T.firstSectionTitleRow);return[o.createElement(C.SectionTitle,{key:"title"+e.category,title:i,titleStyles:n}),...s]}},this._renderShortcutRow=(e,t)=>{if(!this.state.enableKeyboardNavigationBetweenConversations&&(e===d.KeyboardShortcut.NavigateToNextConversation||e===d.KeyboardShortcut.NavigateToPreviousConversation))return;if(this.state.isChild&&e===d.KeyboardShortcut.SendFeedback)return;const i=g.default.shortcutListItemForShortcut(e);return i?this._renderRow(e.toString(),i.action,i.command,i.commandParts,i.accessibleCommand,t,!0):void 0}}static getHeaderText(){return p.getString("KeyboardShortcuts.Title2")}_buildState(e,t){const i={enableKeyboardNavigationBetweenConversations:!this._getContext().isPresentedInSplitView&&s.default.getS4LMessagingFeatures().enableKeyboardNavigationBetweenConversations,showGlobalHotkeySection:r.UICapabilities.systemHotKeysSupported()&&!!S.default.getUserPreferencesLocal().enableSystemHotKeys,enableScreenSharingToolbar:s.default.getS4LCMCFeatures().enableScreenSharingToolbar,isChild:m.default.isChild()};return t&&(i.viewWidth=0),i}componentDidMount(){super.componentDidMount(),g.default.addHandler(d.KeyboardShortcut.OpenKeyboardShortcuts,this._handleKeyboardCommand)}componentWillUnmount(){super.componentWillUnmount(),g.default.removeHandler(d.KeyboardShortcut.OpenKeyboardShortcuts,this._handleKeyboardCommand)}render(){let e;if(this.state.viewWidth){const t=o.Styles.createViewStyle({width:this.state.viewWidth/2-24},!1),i=!b.some((e=>e.category===v.Global));if(this.state.showGlobalHotkeySection&&i){let e=[d.KeyboardShortcut.AcceptIncomingCall,d.KeyboardShortcut.HangupOrRejectCall,d.KeyboardShortcut.ToggleMicrophone];this.state.enableScreenSharingToolbar&&e.push(d.KeyboardShortcut.FocusScreenSharingToolbar),b.push({category:v.Global,shortcuts:e})}else this.state.showGlobalHotkeySection||i||b.pop();e=o.createElement(o.View,null,n.map(b,((e,i)=>this._renderShortcutsGroup(e,i,t))))}return o.createElement(o.View,{style:[f.default.flexOne,this.props.style],onLayout:this._onContainerLayout},e)}_renderRow(e,t,i,s,a,r,d,u=!1){const g=a?l.default.combinedAccessibilityLabel(t,a,". "):void 0,h=g?o.Types.ImportantForAccessibility.NoHideDescendants:void 0,p=[T.row];let m,S;{S=o.createElement(c.default,{style:T.dividerStyle,marginLeft:12,marginRight:12}),p.push(T.rowWithKeyViews);const e=o.Styles.createViewStyle({borderColor:this._themeColors.secondaryTextColor},!1),t=n.map(s,((t,i)=>o.createElement(y.BodyText,{size:d?y.BodyTextSize.SmallDeprecated:void 0,style:[T.keyBase,T.keyView,e],key:"key"+i},t)));m=o.createElement(o.Text,{style:[T.keyBase,T.keyWrapper]},t)}return o.createElement(o.View,{key:e,style:p,accessibilityLabel:g,ariaRoleDescription:g?"":void 0,tabIndex:g?0:void 0,importantForAccessibility:u?o.Types.ImportantForAccessibility.NoHideDescendants:void 0},o.createElement(o.View,{style:[T.innerRow,r],importantForAccessibility:h},o.createElement(y.BodyText,{size:d?y.BodyTextSize.SmallDeprecated:void 0},t)),o.createElement(o.View,{style:[T.innerRow,r],importantForAccessibility:h},m),S)}_getHeaderText(e){return P.getHeaderText()}}t.default=P},32182:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(11930),s=i(98278),a=i(65110),r=i(15877),l=i(33754),c=i(36150),d=i(90602),u=i(93194),g=(i(80837),i(19675)),h=i(24576),p=(0,r.lazyProperties)({container:()=>n.Styles.createViewStyle({justifyContent:"center"}),content:()=>n.Styles.createViewStyle({justifyContent:"space-between",flexDirection:"row",alignItems:"center",alignSelf:"stretch"}),button:()=>n.Styles.createButtonStyle({flexDirection:"row",alignItems:"stretch",marginLeft:10}),chevron:()=>n.Styles.createTextStyle({marginTop:4}),withCaption:()=>n.Styles.createViewStyle({marginTop:10,marginBottom:5}),marginLeft:()=>n.Styles.createViewStyle({marginLeft:0})});class m extends h.default{constructor(){super(...arguments),this._onPickerButtonRef=e=>{this._pickerButton=e||void 0},this._onPickerClick=e=>{const t={anchor:()=>this._pickerButton,useTheme:!0,positionPriorities:["bottom","top"]};return u.default.showWithOptions({id:this.props.id,config:t,getMenuItems:this._getMenuItems,handleMenuCommand:this._onHandleMenuCommand,rootViewId:this._getRootViewId(),invokingEvent:e})},this._getMenuItems=()=>this.props.items.map((e=>({text:e.label,command:e.value,selected:this.props.isItemSelected(e.value),isCheckbox:!0}))),this._onHandleMenuCommand=e=>{e!==u.SXActionMenuCancel&&this.props.onHandleItemSelection(e)}}_buildState(e,t){return{isMobileScreenReaderEnabled:c.default.isMobileScreenReaderEnabled()}}render(){const e=o.default.combinedAccessibilityLabel(this.props.rowTitle+", "+this.props.selectedItemLabel,l.getString("Global.SelectedAccessibilityLabel")),t=[p.container,s.ListItem.small.shortHeightStyle,this.props.style];let i=[p.content];const r=[p.button,this.props.rowTitle?void 0:p.marginLeft],c=this._getCaption();return c&&i.push(p.withCaption),n.createElement(n.View,{style:t},n.createElement(n.View,{style:i},this._getRowTitle(),n.createElement(a.default,{ref:this._onPickerButtonRef,style:r,label:this.props.selectedItemLabel,labelColor:this.props.labelColor,useBodyBoldLabel:!0,labelMaxWidth:270,chevronStyle:p.chevron,onPress:this._onPickerClick,accessibilityLabel:e})),c)}_getRowTitle(){return this.props.rowTitle?n.createElement(g.RowTitle,{colorThemeOverride:this._currentTheme,importantForAccessibility:this.state.isMobileScreenReaderEnabled?n.Types.ImportantForAccessibility.No:void 0},this.props.rowTitle):void 0}_getCaption(){if(this.props.caption)return"string"==typeof this.props.caption?n.createElement(g.Caption,{style:d.default.subtitleMediumSemiLarge},this.props.caption):this.props.caption}}t.default=m},35337:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(2604),s=i(16778),a=i(48540),r=i(87720),l=i(89391),c=i(42961),d=i(12951),u=i(99401),g=i(94224),h=i(2278),p=i(47447),m=i(11930),S=i(46096),C=i(39285),f=i(36237),y=i(15877),_=i(40522),v=(i(32182),i(33754)),b=i(21284),T=i(46989),P=i(81736),A=i(64956),k=i(90602),I=i(63823),w=i(81760),N=i(11010),M=i(11828),E=i(59433),x=i(78262),L=(i(80837),i(19675)),R=i(24576),D=i(53374),B=i(85683),O=(0,y.lazyProperties)({toggleContainer:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"center",marginBottom:5}),toggleText:()=>s.Styles.createTextStyle({flexGrow:1,flexShrink:1,marginRight:10}),sliderStyle:()=>s.Styles.createViewStyle({marginBottom:10}),sliderScaleStyle:()=>s.Styles.createViewStyle({flexDirection:"row",justifyContent:"space-between",marginLeft:10,marginRight:7}),sliderScaleMark:()=>s.Styles.createTextStyle({color:w.Color.gray300,fontSize:N.default.fontSize.size13Deprecated,maxWidth:270})});class F extends R.default{constructor(){super(...arguments),this._onMicrophoneSelected=e=>{const t=D.default.newCauseId();f.log(S.LogTraceArea.AVSettings,"_onMicrophoneSelected "+e+" causeId: "+t),this.props.onMicrophoneSelected&&this.props.onMicrophoneSelected(e!==this.state.selectedMicrophone),g.default.DeviceStore.choosePreferredDevices({microphone:e},t)},this._onToggleAGC=e=>{let t=!this.state.enableAGC;g.default.DeviceStore.enableAGC(t),this.props.onToggleAGC&&this.props.onToggleAGC(t)},this._noiseSuppressionLevels=[{label:v.getString("AudioVideoSettings.NoiseSuppressionOff"),value:a.NoiseSuppressionMode[a.NoiseSuppressionMode.Off]},{label:v.getString("AudioVideoSettings.NoiseSuppressionAuto"),value:a.NoiseSuppressionMode[a.NoiseSuppressionMode.Auto]},{label:v.getString("AudioVideoSettings.NoiseSuppressionLow"),value:a.NoiseSuppressionMode[a.NoiseSuppressionMode.Low]},{label:v.getString("AudioVideoSettings.NoiseSuppressionHigh"),value:a.NoiseSuppressionMode[a.NoiseSuppressionMode.High]}],this._onSelectNoiseSuppression=e=>{const t=g.default.DeviceStore.getNoiseSuppressionMode();f.log(S.LogTraceArea.AVSettings,"_onSelectNoiseSuppression new mode:"+e),g.default.DeviceStore.setNoiseSuppressionMode(e),this.state.isInCall&&(g.default.CallingStore.setNoiseSuppressionMode(e),g.default.CallingStore.getConnectedCallIds().forEach((t=>{h.default.updateCallTelemetry(t,D.default.newCauseId(),(t=>t.setNoiseSuppressionMode(e)))}))),f.track(new I.NoiseSuppressionSettingsEvent(this.state.isInCall,t,e,this.props.origin))},this._onNoiseSuppressionSelected=e=>e===a.NoiseSuppressionMode[this.state.selectedNoiseSuppressionMode],this._onToggleAECMode=e=>{const t=D.default.newCauseId(),i=!this.state.enableAECMode;g.default.DeviceStore.setAEC(i),this.props.onToggleAEC&&this.props.onToggleAEC(i),this.state.isInCall&&g.default.CallingStore.applyCallAudioConfig({enableAEC:i,musicMode:this.state.enableMusicMode},t)},this._onToggleMusicMode=e=>{const t=D.default.newCauseId(),i=!this.state.enableMusicMode;g.default.DeviceStore.setMusicMode(i),this.props.onToggleMusicMode&&this.props.onToggleMusicMode(i),this.state.isInCall&&g.default.CallingStore.applyCallAudioConfig({musicMode:i,enableAEC:this.state.enableAECMode},t)},this._getNoiseSuppressionCaptionWithAccessibility=()=>{const e=v.getString("AudioVideoSettings.LearnMore"),t=s.createElement(E.default,{url:l.default.getConfigSettingsNoSubscription().noiseSuppression.learnMoreUrl,onPress:this._onNoiseSuppressionLearnMore,blue:!0,key:"noiseSuppressionLearnMoreLink "},e),i=v.getParts("AudioVideoSettings.NoiseSuppressionLearnMore",{learnMoreLink:t}),n=m.default.linkAccessibilityInfo(v.getString("AudioVideoSettings.NoiseSuppressionLearnMore",{learnMoreLink:e}));return s.createElement(s.View,{accessibilityLabel:n.label,accessibilityTraits:n.traits,importantForAccessibility:s.Types.ImportantForAccessibility.Yes},s.createElement(L.Caption,{style:k.default.subtitleMediumSemiLarge},i))},this._onNoiseSuppressionLearnMore=()=>{_.openUrlWithParams({origin:S.BrowserOrigin.AudioVideoSettings,url:l.default.getConfigSettingsNoSubscription().noiseSuppression.learnMoreUrl,rootViewId:this._getRootViewId()})}}_buildState(e,t){const i=g.default.DeviceStore.getCurrentDevices();return{microphones:g.default.DeviceStore.getMicrophones(),enableAGC:g.default.DeviceStore.getAGC(),selectedNoiseSuppressionMode:g.default.DeviceStore.getNoiseSuppressionMode(),isInCall:g.default.CallingStore.hasConnectedCalls(),selectedMicrophone:i?i.microphone:void 0,enableMicrophoneMeter:p.CallingCapabilities.microphoneLevelMeterSupported(),microphonePermissionStatus:P.default.permissionStatus(x.PermissionType.Microphone),enableNoiseSuppression:l.default.getS4LCMCFeaturesNoSubscription().enableNoiseSuppression,allowMusicMode:l.default.getS4LCMCFeaturesNoSubscription().audioConfig.enableMusicMode,enableMusicMode:g.default.DeviceStore.getMusicMode(),allowAECMode:l.default.getS4LCMCFeaturesNoSubscription().audioConfig.enableAEC,enableAECMode:g.default.DeviceStore.getAEC()}}componentDidMount(){super.componentDidMount(),this.state.microphonePermissionStatus===o.PermissionStatus.Unknown&&P.default.requestPermission(x.PermissionType.Microphone,x.PermissionPromptOptions.SkipPrePrompt|x.PermissionPromptOptions.PromptAgainIfDenied)}render(){let e,t,i,a;if(n.isEmpty(this.state.microphones))e=s.createElement(d.default,{audioTitleKey:"AudioVideoSettings.MicrophoneLabel",errorStringKey:"AudioVideoSettings.NoDevicePresent",errorIcon:M.SkypeIcon.Error,colorThemeOverride:this.props.colorThemeOverride});else{const n=this.state.enableMicrophoneMeter&&this.state.microphonePermissionStatus===o.PermissionStatus.Granted?s.createElement(b.default,{steps:this.props.micLevelMeterSteps,colorThemeOverride:this.props.colorThemeOverride,backgroundColor:this.props.backgroundColor}):void 0;let l;if(this.state.microphonePermissionStatus===o.PermissionStatus.Denied){const e=A.default.getDeniedPromptKey(x.PermissionType.Microphone);e&&(a=s.createElement(d.default,{audioTitleKey:"AudioVideoSettings.MicrophoneLabel",errorStringKey:e,errorIcon:M.SkypeIcon.Error,colorThemeOverride:this.props.colorThemeOverride}))}else{i=this.props.hideAutoAdjustSetting||!p.CallingCapabilities.agcSupported()?void 0:s.createElement(r.default,{style:[O.toggleContainer],accessibilityLabel:v.getString("AudioVideoSettings.AutomaticGainControlLabel"),onChange:this._onToggleAGC,isOn:this.state.enableAGC},s.createElement(L.BodyText,{style:O.toggleText,colorThemeOverride:this.props.colorThemeOverride},v.getString("AudioVideoSettings.AutomaticGainControlLabel"))),!this.state.enableAGC&&p.CallingCapabilities.microphoneVolumeControlSupported()&&(l=[this._getSliderScale(),s.createElement(T.default,{style:O.sliderStyle,trackHeight:10,handleSize:26,colorThemeOverride:this.props.colorThemeOverride,key:"MicrophoneVolumeSlider",onAdjustVolume:this.props.onAdjustVolume})]);{const e=u.formatDevicesForPicker(this.state.microphones);t=s.createElement(c.default,{title:v.getString("AudioVideoSettings.MicrophoneLabel"),items:e,onValueChange:this._onMicrophoneSelected,selectedValue:this.state.selectedMicrophone||"",labelMaxWidth:this.props.labelMaxWidth,colorThemeOverride:this.props.colorThemeOverride})}e=s.createElement(s.View,null,t,n,i,l,...this._renderOptionalMicSettings())}}return s.createElement(s.View,null,e,a)}_renderOptionalMicSettings(){const e=[];return this.state.enableNoiseSuppression&&e.push(s.createElement(s.View,{key:"noiseSuppressionPanel"},s.createElement(c.default,{title:v.getString("AudioVideoSettings.NoiseSuppressionControlLabel"),subtitle:this._getNoiseSuppressionCaptionWithAccessibility(),items:this._noiseSuppressionLevels,onValueChange:this._onSelectNoiseSuppression,selectedValue:this.state.selectedNoiseSuppressionMode||a.NoiseSuppressionMode.Auto,labelMaxWidth:this.props.labelMaxWidth,colorThemeOverride:this.props.colorThemeOverride}))),this.state.allowMusicMode&&e.push(s.createElement(r.default,{style:O.toggleContainer,accessibilityLabel:v.getString("AudioVideoSettings.MusicModeControlLabel"),onChange:this._onToggleMusicMode,isOn:this.state.enableMusicMode},s.createElement(B.SwitchLabel,{title:v.getString("AudioVideoSettings.MusicModeControlLabel"),subtitle:v.getString("AudioVideoSettings.MusicModeLearnMore"),learnMoreUrl:l.default.getConfigSettingsNoSubscription().musicMode.learnMoreUrl}))),this.state.allowAECMode&&e.push(s.createElement(r.default,{style:O.toggleContainer,accessibilityLabel:v.getString("AudioVideoSettings.EchoCancellation"),onChange:this._onToggleAECMode,isOn:this.state.enableAECMode},s.createElement(B.SwitchLabel,{title:v.getString("AudioVideoSettings.EchoCancellation"),subtitle:v.getString("AudioVideoSettings.EchoCancellationLearnMore")}))),e}_getSliderScale(){const e=[];for(let t=0;t<=10;t++)e.push(s.createElement(C.HiddenText,{style:O.sliderScaleMark,key:t},t.toString()));return s.createElement(s.View,{style:O.sliderScaleStyle,key:"SliderScale"},e)}}t.default=F},79430:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(89928),a=i(2737),r=i(77381),l=i(98278),c=i(36237),d=i(33754),u=i(4735),g=i(93818),h=i(85683),p=i(90602),m=i(86095),S=i(11828),C=i(77524);class f extends r.default{constructor(){super(...arguments),this._onPressManageProfile=()=>{c.track(new g.ManageMyProfileOnlineClicked),u.default.navigateToSsoWebFlow(this.state.manageProfileGoLink,"userInfo.profile",d.getString("UserSettingsPanel.ManageProfileWindowTitle"),this._getRootViewId(),this.state.pathsRequiringHeaders,!1,{},!1)},this._onPressManageAccount=()=>{c.track(new g.ManageMyAccountOnlineClicked),u.default.navigateToSsoWebFlow(this.state.manageAccountGoLink,"userInfo.myaccount",d.getString("UserSettingsPanel.ManageAccountWindowTitle"),this._getRootViewId(),this.state.pathsRequiringHeaders,!1,{},!1)}}_buildState(e,t){const i=o.default.getConfigSettings().profileCard;return{closeMyAccountEndUrl:i.closeMyAccountEndUrl,closeMyAccountUrl:i.closeMyAccountUrl,closeMyAccountWebUrl:i.closeMyAccountWebUrl,ecsCloseMyAccountEnabled:o.default.getS4LSisuFeatures().enableCloseMyAccount,manageAccountGoLink:i.manageAccountGoLink,manageProfileGoLink:i.manageProfileGoLink,pathsRequiringHeaders:o.default.getS4LCommerceFeatures().webConfig.pathsRequiringHeaders}}render(){const e=this.state.ecsCloseMyAccountEnabled?this._getCloseAccountButton():void 0;return n.createElement(n.View,{style:this.props.style},n.createElement(h.SectionTitle,{title:d.getString("UserSettingsPanel.ManageButtonUpper")}),this._getBalanceSettingsButton(),this._getSkypeNumberProfileButton(),this._getManageProfileButton(),this._getManageAccountButton(),e)}_getBalanceSettingsButton(){return n.createElement(s.default,{buttonStyles:this.props.buttonStyles})}_getSkypeNumberProfileButton(){return n.createElement(m.default,{buttonStyles:this.props.buttonStyles})}_getManageAccountButton(){return n.createElement(C.WideButton,{icon:S.SkypeIcon.Card,key:"manageAccount",label:d.getString("UserSettingsPanel.ManageAccountLabel"),labelStyle:p.default.titleMediumSemiLarge,buttonStyles:l.ListItem.small.shortHeightStyle,labelBottom:d.getString("UserSettingsPanel.ManageAccountDescription"),onPressed:this._onPressManageAccount,hideArrow:!0,treatAsLink:!0})}_getManageProfileButton(){return n.createElement(C.WideButton,{icon:S.SkypeIcon.Topic,key:"manageProfile",label:d.getString("UserSettingsPanel.ManageProfileLabel"),labelStyle:p.default.titleMediumSemiLarge,buttonStyles:l.ListItem.small.shortHeightStyle,labelBottom:d.getString("UserSettingsPanel.ManageProfileDescription"),onPressed:this._onPressManageProfile,hideArrow:!0,treatAsLink:!0})}_getCloseAccountButton(){return n.createElement(a.default,{buttonStyles:this.props.buttonStyles})}}t.default=f},99615:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(81760),s=i(24576),a=i(15877),r=i(11010),l=i(36400),c=i(80837),d=(0,a.lazyProperties)({picker:()=>n.Styles.createPickerStyle({backgroundColor:o.Color.transparent,borderColor:o.Color.transparent,cursor:"pointer"}),hoverStyle:()=>n.Styles.createViewStyle({opacity:.8}),button:()=>n.Styles.createButtonStyle({flexDirection:"row",alignItems:"stretch",marginLeft:10})}),u={picker:{textAlignLast:"end"}};class g extends s.default{constructor(){super(...arguments),this._onPickerRef=e=>{this.pickerRef=e||void 0}}render(){const e=[d.picker];this.props.labelMaxWidth&&e.push(n.Styles.createPickerStyle({maxWidth:this.props.labelMaxWidth},!1)),this.props.labelColor?e.push(n.Styles.createPickerStyle({color:this.props.labelColor},!1)):this._useAccessibleTheme()&&e.push(this._themeStyles.primaryTextColorStyle),e.push(r.default.subtitleFontStyle(this._currentTheme));const t=[c.default.noncollapsibleView,d.button];return n.createElement(l.HoverableButton,Object.assign({},this.props,{style:t,accessibilityTraits:[n.Types.AccessibilityTrait.Button,n.Types.AccessibilityTrait.HasPopup],tabIndex:-1}),n.createElement("div",{style:u.picker},n.createElement(n.Picker,{accessibilityLabel:this.props.id,key:this.props.id,items:this.props.items,selectedValue:this.props.selectedValue,onValueChange:this.props.onValueChange,style:e,ref:this._onPickerRef,tabIndex:this.props.tabIndex})))}}t.default=g},20941:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(26999),s=i(26999),a=i(16778),r=i(87720),l=i(19784),c=i(89391),d=i(67930),u=i(79807),g=i(39549),h=i(47447),p=i(30723),m=i(11930),S=i(98278),C=i(16402),f=i(29565),y=i(46096),_=i(36237),v=i(15877),b=i(47662),T=i(33754),P=i(32638),A=i(1246),k=i(41539),I=i(78735),w=i(18078),N=i(30124),M=i(97223),E=i(32932),x=i(31524),L=i(29130),R=i(85683),D=i(90602),B=i(63823),O=i(93194),F=i(78262),V=i(72758),U=i(77524),H=(0,v.lazyProperties)({title:()=>a.Styles.createTextStyle({paddingTop:30,paddingBottom:10}),settingsContainer:()=>a.Styles.createViewStyle({marginBottom:30})});class W extends d.default{constructor(){super(...arguments),this._onChangeEnableInAppEngagementNotifications=(e,t)=>{I.default.setUserPreferencesLocal({enableInAppEngagementNotifications:t}),this._onChangeEnablePushEngagementNotifications(e,t)},this._onChangeEnablePushEngagementNotifications=(e,t)=>{if(I.default.setUserPreferencesLocal({enablePushEngagementNotifications:t}),this.state.conciergeBotSettings.enableVisibility){const e=(0,g.default)();n.each(this.state.engagementSenderIdentity,(i=>{var n;const o=null===(n=e.getConversation(i))||void 0===n?void 0:n.isArchived();t&&o?f.default.unarchiveEngagementBot(i,N.default.isUsingStackNavigationContext(),this._getContext(),y.UnarchiveConversationOrigin.NotificationSettings):t||o||f.default.archiveEngagementBot(i,this._getRootViewId(),y.ArchiveConversationOrigin.NotificationSettings)}))}},this._onChangeEmailMissedCallReminders=(e,t)=>{k.default.setEmailMissedCallRemindersEnabled(t)},this._onChangeEmailMissedMessageReminders=(e,t)=>{k.default.setEmailMissedMessageRemindersEnabled(t)},this._onResetNotificationChannelSettingsRequested=()=>{this._showAlertDialog(T.getString("Notifications.ResetNotificationSettingsLabel"),T.getString("Notifications.AndroidNotificationChannelResetToDefaultsConfirmation"),T.getString("Global.OkLabel"),T.getString("Global.CancelLabel"),(()=>{this._resetNotificationChannelSettings()}))},this._onAndroidSystemNotificationChannelSettingsLinkPressed=()=>{s.LocalNotifications.openSystemNotificationConfiguration()},this._onChatNotificationsRef=e=>{this._chatNotificationsRef=e||void 0},this._onChangeEnableScheduleCallReminderNotifications=(e,t)=>{I.default.setUserPreferencesLocal({enableScheduledCallNotifications:t})},this._onChangeEnableIgnoreActiveEndpointFiltering=(e,t)=>{I.default.setUserPreferencesLocal({ignoreActiveEndpointFiltering:t})},this._onChangeEnableInAppScheduleCallReminderNotifications=(e,t)=>{I.default.setUserPreferencesLocal({enableInAppScheduledCallNotifications:t})},this._onChangeEnablePollReminderNotifications=(e,t)=>{I.default.setUserPreferencesLocal({enablePollNotifications:t})},this._onChangeEnableInAppPollReminderNotifications=(e,t)=>{I.default.setUserPreferencesLocal({enableInAppPollNotifications:t})},this._onChangeEnableAndroidNotificationLight=(e,t)=>{I.default.setUserPreferencesLocal({androidNotificationLight:t})},this._onChangeEnableAndroidNotificationVibration=(e,t)=>{I.default.setUserPreferencesLocal({androidNotificationVibration:t})},this._onChangeEnableInAppNotifications=(e,t)=>{I.default.setUserPreferencesLocal({enableInAppNotifications:t})},this._onChangeEnableNotificationSounds=(e,t)=>{I.default.setUserPreferencesLocal({enableNotificationSounds:t})},this._onChangeEnablePushNotificationSounds=(e,t)=>{I.default.setUserPreferencesLocal({enablePushNotificationSounds:t})},this._onChangeBubbleNotification=(e,t)=>{I.default.setUserPreferencesLocal({enableConversationBubbles:t})},this._onChatNotificationsChanged=(e,t)=>{!t&&this.state.enableNotificationPeriodsFeature?O.default.showWithOptions({id:"disableNotificationPeriodsMenu",config:{anchor:()=>this._chatNotificationsRef,useTheme:!0},menuTitle:T.getString("UserSettingsPanel.NotificationsDisabledPeriodTitle"),getMenuItems:()=>[{text:T.getString("UserSettingsPanel.NotificationsDisabledPeriod1Hour"),command:M.NotificationPeriodsCommands.oneHourPeriod},{text:T.getString("UserSettingsPanel.NotificationsDisabledPeriod8Hours"),command:M.NotificationPeriodsCommands.eightHoursPeriod},{text:T.getString("UserSettingsPanel.NotificationsDisabledPeriod1Day"),command:M.NotificationPeriodsCommands.oneDayPeriod},{text:T.getString("UserSettingsPanel.NotificationsDisabledPeriod1Week"),command:M.NotificationPeriodsCommands.oneWeekPeriod},{text:T.getString("UserSettingsPanel.NotificationsDisabledPeriodIndefinitely"),command:M.NotificationPeriodsCommands.indefinitelyPeriod}],handleMenuCommand:this._onChatNotificationsDisabled,rootViewId:this._getRootViewId(),invokingEvent:e}):(I.default.setUserPreferencesLocal({enableChatNotifications:t,disableChatNotificationsUntil:void 0}),o.PushNotifications.chatNotficationsToggleButtonChanged(t),_.track(new A.ChatNotificationsToggleSetting(t)))},this._onChatNotificationsDisabled=e=>{let t=!0,i=0,n=0;switch(e){case M.NotificationPeriodsCommands.oneHourPeriod:i=1;break;case M.NotificationPeriodsCommands.eightHoursPeriod:i=8;break;case M.NotificationPeriodsCommands.oneDayPeriod:n=1;break;case M.NotificationPeriodsCommands.oneWeekPeriod:n=7;break;case M.NotificationPeriodsCommands.indefinitelyPeriod:t=!1;break;case O.SXActionMenuCancel:default:return}const o=C.default.add(Date.now(),0,n,i);I.default.setUserPreferencesLocal({disableChatNotificationsUntil:o,enableChatNotifications:t}),_.track(new A.ChatNotificationsToggleSetting(!1,e)),this.setState({disabledNotificationsFor:e})}}static getHeaderText(){return T.getString("UserSettingsPanel.NotificationsTitle")}_buildState(e,t){const i=I.default.getUserPreferencesLocal(),o=V.default.getFullUserProfileByMri(w.default.getSkypeMri()),s=c.default.getS4LMessagingFeatures(),a=c.default.getEngagementFeatures(),r=a.notificationSettings,l=s.enableNotificationPeriods&&!1,d={enableAndroidNotificationLight:!!i.androidNotificationLight,enableAndroidNotificationVibration:!!i.androidNotificationVibration,enableScheduledCallNotifications:!!i.enableScheduledCallNotifications,enableInAppScheduledCallNotifications:!!i.enableInAppScheduledCallNotifications,enableNotificationSounds:!!i.enableNotificationSounds,enablePushNotificationSounds:!!i.enablePushNotificationSounds,enableInAppEngagementNotifications:!!i.enableInAppEngagementNotifications,enableInAppNotifications:!!i.enableInAppNotifications,enablePushEngagementNotifications:!!i.enablePushEngagementNotifications&&!!i.enableInAppEngagementNotifications,gender:o&&o.gender||F.eGender.Unspecified,isUsingStackNavigation:N.default.isUsingStackNavigationContext(),enableChatNotifications:P.areNotificationsEnabled(),enableNotificationPeriodsFeature:l,isPollEnabled:s.enablePollExtension,enableInAppPollNotifications:!!i.enableInAppPollNotifications,enablePollNotifications:!!i.enablePollNotifications,enableIgnoreActiveEndpointFiltering:!!i.ignoreActiveEndpointFiltering,emailNotificationsSettingsEnabled:r.emailNotificationsSettingsEnabled,emailMissedCallRemindersEnabled:r.emailMissedCallReminders.enabled,emailMissedCallRemindersTimeWindowInHours:r.emailMissedCallReminders.timeWindowInHours,emailMissedMessageRemindersEnabled:r.emailMissedMessageReminders.enabled,emailMissedMessageRemindersTimeWindowInHours:r.emailMissedMessageReminders.timeWindowInHours,isPresenceChangeNotificationEnabled:c.default.getConfigSettings().presence.enablePresenceChangeNotification&&!0,conciergeBotSettings:a.conciergeBotSettings,engagementSenderIdentity:a.engagementSenderIdentity,areConversationBubblesAvailabe:c.default.getS4LNativePlatformsEcsConfig().enableAndroidRConversationBubbles,enableConversationBubbles:!!i.enableConversationBubbles};return d.emailNotificationsSettingsEnabled&&(d.emailMissedCallRemindersEnabled&&(d.enableEmailMissedCallReminders=k.default.isEmailMissedCallRemindersEnabled()),d.emailMissedMessageRemindersEnabled&&(d.enableEmailMissedMessageReminders=k.default.isEmailMissedMessageRemindersEnabled())),t&&(this._initTelemetrySettingsState=n.clone(d)),d}render(){return a.createElement(a.View,{style:[this.props.style,H.settingsContainer]},this.state.isUsingStackNavigation?this._getMobileSettings():this._getCompositeNotificationSettings())}_getCompositeNotificationSettings(){const e=[];e.push(a.createElement(R.SectionTitle,{key:"notificationsHeader",title:T.getString("UserSettingsPanel.NotificationsTitleUpper"),titleStyles:H.title})),e.push(this._getChatNotificationButton()),this.state.isPresenceChangeNotificationEnabled&&e.push(this._getNotifyOnPresenceChangeButton()),e.push(this._getReactionNotificationsToggle()),e.push(this._getPushNotificationSoundsButton()),e.push(this._getInAppEngagementNotificationsButton()),e.push(this._getScheduledCallRemindersButton()),this.state.isPollEnabled&&e.push(this._getPollRemindersButton()),h.UICapabilities.inAppBrowserNotificationsSupported()&&L.default.isTinyScreenSizeNoSubscription(S.MainRootViewId)&&(e.push(a.createElement(R.SectionTitle,{key:"inAppNotificationsTitle",title:T.getString("UserSettingsPanel.InAppNotificationsSectionTitleUpper"),numberOfLines:2})),e.push(this._getInAppNotificationsButton()),e.push(this._getInAppEngagementNotificationsButton()),e.push(this._getInAppSoundsButton()),e.push(this._getInAppScheduledCallRemindersButton()));const t=b.getLocalizeParamForGender(this.state.gender);return e.push(a.createElement(R.SectionTitle,{key:"dndTitle",title:T.getString("UserSettingsPanel.DoNotDisturbTitleUpper",{gender:t}),numberOfLines:2})),e.push(this._getChatNotificationsDuringDNDButton()),e.push(this._getCallNotificationsDuringDNDButton()),n.each(this._getEmailNotificationsSettings(),(t=>e.push(t))),a.createElement(a.View,null,e)}_getMobileSettings(){let e=[];const t=h.UICapabilities.androidNotificationChannelSupported();e.push(this._getChatNotificationButton()),e.push(a.createElement(R.SectionTitle,{key:"pushNotificationsTitle",title:T.getString("UserSettingsPanel.PushNotificationsTitleUpper"),numberOfLines:2})),this.state.isPresenceChangeNotificationEnabled&&e.push(this._getNotifyOnPresenceChangeButton()),e.push(this._getReactionNotificationsToggle()),t||e.push(this._getPushNotificationSoundsButton()),e.push(this._getScheduledCallRemindersButton()),this.state.isPollEnabled&&e.push(this._getPollRemindersButton()),t&&e.push(this._getAndroidSystemNotificationChannelSettingsLink()),e.push(a.createElement(R.SectionTitle,{key:"inAppNotificationsTitle",title:T.getString("UserSettingsPanel.InAppNotificationsSectionTitleUpper"),numberOfLines:2})),e.push(this._getInAppNotificationsButton()),e.push(this._getInAppEngagementNotificationsButton()),e.push(this._getInAppSoundsButton()),e.push(this._getInAppScheduledCallRemindersButton()),this.state.isPollEnabled&&e.push(this._getInAppPollRemindersButton());const i=b.getLocalizeParamForGender(this.state.gender);return e.push(a.createElement(R.SectionTitle,{key:"dndTitle",title:T.getString("UserSettingsPanel.DoNotDisturbTitleUpper",{gender:i}),numberOfLines:2})),e.push(this._getChatNotificationsDuringDNDButton()),e.push(this._getCallNotificationsDuringDNDButton()),n.each(this._getEmailNotificationsSettings(),(t=>e.push(t))),e}_getEmailNotificationsSettings(){let e=[];return this.state.emailNotificationsSettingsEnabled&&(this.state.emailMissedMessageRemindersEnabled||this.state.emailMissedCallRemindersEnabled)&&(e.push(a.createElement(R.SectionTitle,{key:"emailNotifications",title:T.getString("UserSettingsPanel.EmailNotificationsTitleUpper"),numberOfLines:2})),this.state.emailMissedMessageRemindersEnabled&&e.push(this._getEmailMissedMessageRemindersButton()),this.state.emailMissedCallRemindersEnabled&&e.push(this._getEmailMissedCallRemindersButton())),e}_getChatNotificationButton(){const e=T.getString("UserSettingsPanel.ChatNotifications"),t=T.getString("UserSettingsPanel.ChatNotificationsSecondary");return a.createElement(r.default,{key:"chatNotifications",ref:this._onChatNotificationsRef,style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enableChatNotifications,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChatNotificationsChanged},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getBubblesNotificationToggle(){const e=T.getString("UserSettingsPanel.MessageBubble");return a.createElement(r.default,{key:"bubbleNotifications",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enableConversationBubbles,accessibilityLabel:e,onChange:this._onChangeBubbleNotification},a.createElement(R.SwitchLabel,{title:e}))}_getScheduledCallRemindersButton(){const e=T.getString("UserSettingsPanel.ScheduledCallNotifications"),t=T.getString("UserSettingsPanel.ScheduledCallNotificationsSecondary");return a.createElement(r.default,{key:"scheduledCallReminderNotifications",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enableScheduledCallNotifications,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEnableScheduleCallReminderNotifications},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getIgnoreActiveEndpointFilteringButton(){const e=T.getString("UserSettingsPanel.IgnoreActiveEndpointFiltering"),t=T.getString("UserSettingsPanel.IgnoreActiveEndpointFilteringSecondary");return a.createElement(r.default,{key:"ignoreActiveEndpointFiltering",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enableIgnoreActiveEndpointFiltering,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEnableIgnoreActiveEndpointFiltering,disable:!this.state.enableChatNotifications},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getInAppScheduledCallRemindersButton(){const e=T.getString("UserSettingsPanel.InAppScheduledCallNotifications"),t=T.getString("UserSettingsPanel.InAppScheduledCallNotificationsSecondary");return a.createElement(r.default,{key:"inAppScheduledCallReminderNotifications",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enableInAppScheduledCallNotifications,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEnableInAppScheduleCallReminderNotifications},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getPollRemindersButton(){const e=T.getString("UserSettingsPanel.PollNotifications"),t=T.getString("UserSettingsPanel.PollNotificationsSecondary");return a.createElement(r.default,{key:"pollReminderNotifications",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enablePollNotifications,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEnablePollReminderNotifications},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getInAppPollRemindersButton(){const e=T.getString("UserSettingsPanel.InAppPollNotifications"),t=T.getString("UserSettingsPanel.InAppPollNotificationsSecondary");return a.createElement(r.default,{key:"inAppPollReminderNotifications",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enableInAppPollNotifications,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEnableInAppPollReminderNotifications},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getReactionNotificationsToggle(){return a.createElement(x.default,{key:"reactionNotifications",style:this.props.buttonStyles,disable:!this.state.enableChatNotifications})}_getPushEngagementNotificationButton(){const e=T.getString("UserSettingsPanel.PushEngagementNotifications"),t=T.getString("UserSettingsPanel.PushEngagementNotificationsSecondary");return a.createElement(r.default,{key:"pushEngagementNotifications",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enablePushEngagementNotifications,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEnablePushEngagementNotifications,disable:!this.state.enableInAppEngagementNotifications},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getEmailMissedCallRemindersButton(){const e=T.getString("UserSettingsPanel.EmailMissedCallRemindersEnabledLabel"),t=T.getString("UserSettingsPanel.EmailMissedCallRemindersEnabledDescriptionV2",{count:this.state.emailMissedCallRemindersTimeWindowInHours});return a.createElement(r.default,{key:"emailMissedCallReminders",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:!!this.state.enableEmailMissedCallReminders,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEmailMissedCallReminders,disable:n.isUndefined(this.state.enableEmailMissedCallReminders)},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getEmailMissedMessageRemindersButton(){const e=T.getString("UserSettingsPanel.EmailMissedMessageRemindersEnabledLabelV2"),t=T.getString("UserSettingsPanel.EmailMissedMessageRemindersEnabledDescriptionV2",{count:this.state.emailMissedMessageRemindersTimeWindowInHours});return a.createElement(r.default,{key:"emailMissedMessageReminders",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:!!this.state.enableEmailMissedMessageReminders,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEmailMissedMessageReminders,disable:n.isUndefined(this.state.enableEmailMissedMessageReminders)},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getAndroidNotificationLightButton(){const e=T.getString("UserSettingsPanel.AndroidNotificationLight"),t=T.getString("UserSettingsPanel.AndroidNotificationLightSecondary");return a.createElement(r.default,{key:"androidNotificationLight",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enableAndroidNotificationLight,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEnableAndroidNotificationLight,disable:!this.state.enableChatNotifications},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getAndroidNotificationVibrationButton(){const e=T.getString("UserSettingsPanel.AndroidNotificationVibration"),t=T.getString("UserSettingsPanel.AndroidNotificationVibrationSecondary");return a.createElement(r.default,{key:"androidNotificationVibration",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enableAndroidNotificationVibration,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEnableAndroidNotificationVibration,disable:!this.state.enableChatNotifications},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getAndroidSystemNotificationChannelSettingsLink(){const e=T.getString("Notifications.AndroidNotificationChannelConfigurationTitle"),t=T.getString("Notifications.AndroidNotificationChannelConfigurationSubtitle"),i=T.getString("Notifications.ResetNotificationSettingsLabel");return a.createElement(a.View,{key:"androidAdvancedNotificationConfiguration"},a.createElement(U.WideButton,{label:e,labelBottom:t,hideDivider:!1,treatAsLink:!0,onPressed:this._onAndroidSystemNotificationChannelSettingsLinkPressed}),a.createElement(U.WideButton,{label:i,treatAsLink:!0,hideDivider:!1,onPressed:this._onResetNotificationChannelSettingsRequested}))}_resetNotificationChannelSettings(){s.LocalNotifications.resetNotificationSettings().then((e=>{e&&(I.default.setUserPreferencesLocal({shouldSkipAndroidNotificationChannelMigration:!1,androidNotificationVibration:!0,androidNotificationLight:!0,enablePushNotificationSounds:!0,enableInAppEngagementNotifications:!0,ignoreActiveEndpointFiltering:!1,enableScheduledCallNotifications:!0,enablePollNotifications:!0,enableChatNotifications:!0}),s.LocalNotifications.createNotificationChannelsIfNeeded())}))}_getInAppNotificationsButton(){const e=T.getString("UserSettingsPanel.InAppNotifications"),t=T.getString("UserSettingsPanel.InAppNotificationsSecondary");return a.createElement(r.default,{key:"inAppNotifications",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enableInAppNotifications,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEnableInAppNotifications,disable:!this.state.enableChatNotifications},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getInAppEngagementNotificationsButton(){const e=T.getString("UserSettingsPanel.InAppEngagementNotifications"),t=T.getString("UserSettingsPanel.InAppEngagementNotificationsSecondary");return a.createElement(r.default,{key:"inAppEngagementNotifications",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enableInAppEngagementNotifications,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEnableInAppEngagementNotifications},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getPushNotificationSoundsButton(){const e=T.getString("UserSettingsPanel.NotificationSounds"),t=T.getString("UserSettingsPanel.NotificationSoundsSecondary");return a.createElement(r.default,{key:"pushSounds",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enablePushNotificationSounds,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEnablePushNotificationSounds,disable:!this.state.enableChatNotifications},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getInAppSoundsButton(){const e=T.getString("UserSettingsPanel.InAppSounds"),t=T.getString("UserSettingsPanel.InAppSoundsSecondary");return a.createElement(r.default,{key:"inAppSounds",style:[D.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.buttonStyles],isOn:this.state.enableNotificationSounds,accessibilityLabel:m.default.combinedAccessibilityLabel(e,t),onChange:this._onChangeEnableNotificationSounds,disable:!this.state.enableChatNotifications||!this.state.enableInAppNotifications},a.createElement(R.SwitchLabel,{title:e,subtitle:t}))}_getChatNotificationsDuringDNDButton(){return a.createElement(p.default,{key:"chatNotificationsDuringDND"})}_getNotifyOnPresenceChangeButton(){return a.createElement(E.default,{key:"notifyOnPresenceChangeButton"})}_getCallNotificationsDuringDNDButton(){return a.createElement(u.default,{key:"callNotificationsDuringDND"})}_getHeaderText(e){return W.getHeaderText()}_getNotificationSettingValueIfChanged(e,t){return e===t?void 0:t}_generateChangedSettings(){const e={didEnableAndroidNotificationLight:this._getNotificationSettingValueIfChanged(this._initTelemetrySettingsState.enableAndroidNotificationLight,this.state.enableAndroidNotificationLight),didEnableAndroidNotificationVibration:this._getNotificationSettingValueIfChanged(this._initTelemetrySettingsState.enableAndroidNotificationVibration,this.state.enableAndroidNotificationVibration),didEnableChatNotifications:this._getNotificationSettingValueIfChanged(this._initTelemetrySettingsState.enableChatNotifications,this.state.enableChatNotifications),didEnableInAppNotifications:this._getNotificationSettingValueIfChanged(this._initTelemetrySettingsState.enableInAppNotifications,this.state.enableInAppNotifications),didEnableInAppEngagementNotifications:this._getNotificationSettingValueIfChanged(this._initTelemetrySettingsState.enableInAppEngagementNotifications,this.state.enableInAppEngagementNotifications),didEnableNotificationSounds:this._getNotificationSettingValueIfChanged(this._initTelemetrySettingsState.enableNotificationSounds,this.state.enableNotificationSounds),didEnablePushNotificationSounds:this._getNotificationSettingValueIfChanged(this._initTelemetrySettingsState.enablePushNotificationSounds,this.state.enablePushNotificationSounds),didEnablePushEngagementNotifications:this._getNotificationSettingValueIfChanged(this._initTelemetrySettingsState.enablePushEngagementNotifications,this.state.enablePushEngagementNotifications),didEnableIgnoreActiveEndpointFiltering:this._getNotificationSettingValueIfChanged(this._initTelemetrySettingsState.enableIgnoreActiveEndpointFiltering,this.state.enableIgnoreActiveEndpointFiltering),disabledNotificationsFor:this._getNotificationSettingValueIfChanged(this._initTelemetrySettingsState.disabledNotificationsFor,this.state.disabledNotificationsFor)};return n.omitBy(e,n.isUndefined)}componentWillUnmount(){super.componentWillUnmount();const e=this._generateChangedSettings();n.isEmpty(e)||_.track(new B.NotificationSettingsChangeTelemetry(e))}_showAlertDialog(e,t,i,n,o){const s=[{text:i,onPress:()=>{o&&o()},isSubmit:!0}];n&&s.splice(0,0,{text:n,isCancel:!0}),l.default.showWithOptions({title:e,message:t,buttons:s,dialogAccessibilityTitle:e,rootViewId:this._getRootViewId(),useFocussedWindowFallback:!0})}}t.default=W},6476:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(89391),a=i(67930),r=i(14425),l=i(7095),c=i(11930),d=i(87134),u=i(5763),g=i(59799),h=i(75913),p=i(33754),m=i(78735),S=i(85683),C=i(90602),f=i(9211),y=(i(80837),i(14749)),_=i(19675),v=i(72235),b=i(52461),T=i(77524),P=i(46096),A=i(59433),k=i(40522),I=i(93486);class w extends a.default{constructor(){super(...arguments),this._onLearnMoreLinkPress=()=>{k.openUrlWithParams({origin:P.BrowserOrigin.TelemetryConsentSettingsDescription,url:s.default.getConfigSettingsNoSubscription().telemetryInfoUrl.url,rootViewId:this._getRootViewId()})},this._toggleContactsOnly=(e,t)=>{m.default.setUserPreferencesLocal({allowCallsFromContactsOnly:t})},this._openPrivacy=()=>{h.default.openPrivacy()}}static getHeaderText(){return p.getString("UserSettingsPanel.PrivacyHeader")}_buildState(e,t){const i=m.default.getUserPreferencesLocal(),n=s.default.getS4LCMCFeatures(),o=s.default.getS4LTelemetryFeatures();return{telemetryFilteringFeatureEnabled:o.enableTelemetryFiltering,telemetryConsentUIEnabled:o.enableTelemetryConsentUI,allowCallsFromContactsOnly:i.allowCallsFromContactsOnly,isSpeechConsentFlowEnabled:n.enableSpeechConsentFlow,bingEnabled:!!b.default.getBingIntegration(),e911LocationEnabled:!g.default.requiresSystemPermission&&g.default.isLocationEnabled(),isChild:I.default.isChild()}}render(){return n.createElement(n.View,{style:this.props.style},this._getLocationSection(),this._getTranslationSection(),this._getCallingSection(),this._getTelemetrySection(),this._getAboutSection())}_getLocationSection(){let e,t;if(this.state.e911LocationEnabled&&(e=n.createElement(u.default,null)),!this.state.isChild&&this.state.bingEnabled&&(t=n.createElement(r.default,null)),e||t)return n.createElement(n.View,null,n.createElement(S.SectionTitle,{title:p.getString("UserSettingsPanel.LocationTitleUpper")}),e,t)}_getTranslationSection(){if(this.state.isChild)return;const e=this.state.isSpeechConsentFlowEnabled?n.createElement(f.default,null):n.createElement(v.default,null);return n.createElement(n.View,null,n.createElement(S.SectionTitle,{title:p.getString("LanguageAndTranslationSettingsPanel.TranslationHeader")}),e,n.createElement(d.default,null))}_getCallingSection(){return this.state.isChild?null:n.createElement(n.View,null,n.createElement(S.SectionTitle,{title:p.getString("UserSettingsPanel.CallingSettingsWindowTitleUpper")}),this._getContactsOnlySettings())}_getTelemetrySection(){return!this.state.isChild&&this.state.telemetryFilteringFeatureEnabled&&this.state.telemetryConsentUIEnabled?n.createElement(n.View,null,n.createElement(S.SectionTitle,{title:p.getString("UserSettingsPanel.TelemetrySettingsTitleUpper")}),this._getTelemetryDescription(),n.createElement(y.default,null),n.createElement(d.default,null)):null}_getTelemetryDescription(){const e=p.getString("UserSettingsPanel.TelemetryConsentSwitchLearnMoreLinkText"),t=n.createElement(A.default,{url:s.default.getConfigSettingsNoSubscription().telemetryInfoUrl.url,onPress:this._onLearnMoreLinkPress,blue:!0,key:"telemetryLearnMoreLink "},e),i=p.getParts("UserSettingsPanel.RequiredTelemetryInfoText",{learnMoreLink:t}),o=c.default.linkAccessibilityInfo(p.getString("UserSettingsPanel.RequiredTelemetryInfoText",{learnMoreLink:e}));return n.createElement(n.View,{accessibilityLabel:o.label,accessibilityTraits:o.traits,importantForAccessibility:n.Types.ImportantForAccessibility.Yes},n.createElement(_.Caption,{style:C.default.subtitleMediumSemiLarge},i))}_getAboutSection(){return n.createElement(n.View,null,n.createElement(S.SectionTitle,{title:p.getString("UserSettingsPanel.AboutTitleUpper")}),n.createElement(T.WideButton,{label:p.getString("AboutPanel.PrivacyPolicyLabel"),onPressed:this._openPrivacy,buttonStyles:this.props.buttonStyles}))}_getContactsOnlySettings(){const e=p.getString("UserSettingsPanel.AllowCallsFromContactsOnlyOldPanel"),t=(0,l.renderLabels)(e);return n.createElement(o.default,{style:[C.default.controlRow,this._themeStyles.dividerBorderColorStyle],isOn:this.state.allowCallsFromContactsOnly,accessibilityLabel:e,onChange:this._toggleContactsOnly},t)}_getHeaderText(e){return w.getHeaderText()}}t.default=w},34170:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(47447),a=i(5531),r=i(98278),l=i(36237),c=i(47126),d=i(15877),u=i(33754),g=i(6250),h=i(18078),p=i(4735),m=i(17093),S=i(17093),C=i(30124),f=i(95691),y=i(24148),_=i(11828),v=i(24576),b=i(72758),T=i(53374),P=i(77524);var A;!function(e){e[e.AccountAndProfile=0]="AccountAndProfile",e[e.General=1]="General",e[e.Privacy=2]="Privacy",e[e.Appearance=3]="Appearance",e[e.AudioVideo=4]="AudioVideo",e[e.Calling=5]="Calling",e[e.Messaging=6]="Messaging",e[e.Notifications=7]="Notifications",e[e.Contacts=8]="Contacts",e[e.HelpAndAbout=9]="HelpAndAbout",e[e.ManagePayments=10]="ManagePayments"}(A||(A={}));const k=[A.AccountAndProfile,A.General,A.Privacy,A.Appearance,A.AudioVideo,A.Calling,A.Messaging,A.Notifications,A.Contacts,A.HelpAndAbout],I="menuitem",w=(0,d.lazyProperties)({menuItem:()=>o.Styles.createViewStyle({paddingHorizontal:10})});class N extends v.default{constructor(){super(...arguments),this._mountedRefsMap=new g.default,this._renderMenuItem=e=>{const t=I+e;switch(e){case A.AccountAndProfile:return this._getAccountAndProfileSettings(t);case A.General:return this._getGeneralSettings(t);case A.Privacy:return this._getPrivacySettings(t);case A.Appearance:return this._getAppearanceSettings(t);case A.AudioVideo:return this._getAudioVideoSettings(t);case A.Calling:return this._getCallingVoiceMailSettings(t);case A.Messaging:return this._getMessagingAndChatsSettings(t);case A.Notifications:return this._getNotificationsSettings(t);case A.Contacts:return this._getContactsSettings(t);case A.HelpAndAbout:return this._getHelpAndAboutSettings(t);case A.ManagePayments:return this._getManagePaymentsSettings(t);default:return T.default.switchStatementExhaustiveChecking(e)}},this._onHelpAndFeedbackButtonPressed=()=>{l.track(new y.NavigationHelpAndFeedback(f.NavigationSettingsItem.HelpAndFeedback,f.NavigationSettingsOrigin.ApplicationSettings)),p.default.navigateToSettingsGroup(S.SettingsGroup.HelpAndFeedback,this._getRootViewId())},this._onAudioVideoSettingsButtonPressed=()=>{this._navigateToSettingsGroup(S.SettingsGroup.AudioVideoSettings)},this._onMyAccountAndProfileSettingsButtonPressed=()=>{this._navigateToSettingsGroup(S.SettingsGroup.AccountAndProfile)},this._onMessagingAndChatsButtonPressed=()=>{this._navigateToSettingsGroup(S.SettingsGroup.Chat)},this._onAppearanceSettingsButtonPressed=()=>{this._navigateToSettingsGroup(S.SettingsGroup.ThemeSettings)},this._onNotificationsButtonPressed=()=>{l.track(new y.NavigationNotificationSettings(f.NavigationSettingsOrigin.ApplicationSettings)),this._navigateToSettingsGroup(S.SettingsGroup.Notifications)},this._onContactsButtonPressed=()=>{this._navigateToSettingsGroup(S.SettingsGroup.Contacts)},this._onCallingSettingsButtonPressed=()=>{const e=this.props.detailContext&&1===this.props.detailContext.length&&n.first(this.props.detailContext)instanceof m.CallingSettingsPanelNavigationContext;p.default.navigateToCallingSettingsPanel(!0,this._getContext()),e&&this.props.resetFocus&&this.props.resetFocus()},this._onOtherSettingsButtonPressed=()=>{this._navigateToSettingsGroup(S.SettingsGroup.General)},this._onPrivacySettingsButtonPressed=()=>{this._navigateToSettingsGroup(S.SettingsGroup.Privacy)},this._onKeyPress=e=>{let t=this.state.focusedIndex;e.keyCode!==c.default.UP&&e.keyCode!==c.default.LEFT||(t-=1),e.keyCode!==c.default.DOWN&&e.keyCode!==c.default.RIGHT||(t+=1),t<0||t>=this.state.menuCategories.length||this.setState({focusedIndex:t})}}_buildState(e,t){const i=b.default.getFullUserProfileByMri(h.default.getSkypeMri()),o=C.default.isUsingStackNavigationContext(),r={displayName:i.getDisplayName(),isUsingStackNavigation:o};return e.detailContext&&e.detailContext[0]instanceof m.DesktopSettingsGroupNavigationContext?r.settingsGroup=e.detailContext[0].state.group:r.settingsGroup=void 0,t&&(r.focusedIndex=0),r.menuCategories=n.filter(k,(e=>{switch(e){case A.AccountAndProfile:return a.default.navigation().canAccessProfileSettings;case A.General:return a.default.navigation().canAccessGeneralSettings;case A.AudioVideo:return s.UICapabilities.avSettingsSupported();case A.Calling:return a.default.navigation().canAccessCallingSettings;case A.Messaging:return a.default.navigation().canAccessMessagingSettings;case A.Appearance:return a.default.userSettings().canChangeAppearance;case A.Contacts:return a.default.contacts().canHaveContacts;case A.ManagePayments:return a.default.navigation().canAccessPaymentsSettings;default:return!0}})),r}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.state.focusedIndex!==t.focusedIndex&&this._focusItem(this.state.focusedIndex)}render(){return this.props.isAloneInNavStack&&this._getContext().isPresentedInSplitView?null:o.createElement(o.View,{onKeyPress:this._onKeyPress},n.map(this.state.menuCategories,this._renderMenuItem))}_getAccountAndProfileSettings(e){const t=this._isSettingsGroupSelected(S.SettingsGroup.AccountAndProfile);return this._getWideButton({icon:_.SkypeIcon.Contact,label:u.getString("UserSettingsPanel.AccountAndProfileSettingsTitle"),key:e,selected:t,onPressed:this._onMyAccountAndProfileSettingsButtonPressed,ref:this._mountedRefsMap.onComponentRef(e)})}_getAppearanceSettings(e){const t=this._isSettingsGroupSelected(S.SettingsGroup.ThemeSettings);return this._getWideButton({icon:_.SkypeIcon.MagicWand,label:u.getString("UserSettingsPanel.AppearanceButton"),key:e,selected:t,onPressed:this._onAppearanceSettingsButtonPressed,ref:this._mountedRefsMap.onComponentRef(e)})}_getAudioVideoSettings(e){const t=this._isSettingsGroupSelected(S.SettingsGroup.AudioVideoSettings);return this._getWideButton({icon:_.SkypeIcon.Microphone,label:u.getString("UserSettingsPanel.AudioVideoSettingsTitle"),key:e,selected:t,onPressed:this._onAudioVideoSettingsButtonPressed,ref:this._mountedRefsMap.onComponentRef(e)})}_getCallingVoiceMailSettings(e){const t=n.first(this.props.detailContext)instanceof m.CallingSettingsPanelNavigationContext;return this._getWideButton({icon:_.SkypeIcon.CallStart,label:u.getString("UserSettingsPanel.CallingSettingsWindowTitle"),key:e,selected:t,onPressed:this._onCallingSettingsButtonPressed,ref:this._mountedRefsMap.onComponentRef(e)})}_getMessagingAndChatsSettings(e){const t=this._isSettingsGroupSelected(S.SettingsGroup.Chat);return this._getWideButton({icon:_.SkypeIcon.Message,label:u.getString("UserSettingsPanel.MessagingAndChatsTitle"),key:e,selected:t,onPressed:this._onMessagingAndChatsButtonPressed,ref:this._mountedRefsMap.onComponentRef(e)})}_getNotificationsSettings(e){const t=this._isSettingsGroupSelected(S.SettingsGroup.Notifications);return this._getWideButton({icon:_.SkypeIcon.Alert,label:u.getString("UserSettingsPanel.NotificationsTitle"),key:e,selected:t,onPressed:this._onNotificationsButtonPressed,ref:this._mountedRefsMap.onComponentRef(e)})}_getContactsSettings(e){const t=this._isSettingsGroupSelected(S.SettingsGroup.Contacts);return this._getWideButton({icon:_.SkypeIcon.SkypeAddressbook,label:u.getString("UserSettingsPanel.ContactsTitle"),key:e,selected:t,onPressed:this._onContactsButtonPressed,ref:this._mountedRefsMap.onComponentRef(e)})}_getGeneralSettings(e){const t=this._isSettingsGroupSelected(S.SettingsGroup.General);return this._getWideButton({icon:_.SkypeIcon.Settings,label:u.getString("UserSettingsPanel.GeneralTitle"),key:e,selected:t,onPressed:this._onOtherSettingsButtonPressed,ref:this._mountedRefsMap.onComponentRef(e)})}_getPrivacySettings(e){return this._getWideButton({icon:_.SkypeIcon.Privacy,label:u.getString("UserSettingsPanel.PrivacyHeader"),key:e,selected:this._isSettingsGroupSelected(S.SettingsGroup.Privacy),onPressed:this._onPrivacySettingsButtonPressed,ref:this._mountedRefsMap.onComponentRef(e)})}_getHelpAndAboutSettings(e){return this._getWideButton({icon:_.SkypeIcon.Info,label:u.getString("UserSettingsPanel.HelpAndAboutTitle"),key:e,selected:this._isSettingsGroupSelected(S.SettingsGroup.HelpAndFeedback),onPressed:this._onHelpAndFeedbackButtonPressed,hideDivider:!0,ref:this._mountedRefsMap.onComponentRef(e)})}_getManagePaymentsSettings(e){const t=this._isSettingsGroupSelected(S.SettingsGroup.AccountAndProfile);return this._getWideButton({icon:_.SkypeIcon.SkypeCredit,label:u.getString("UserSettingsPanel.ManagePaymentsSettingsTitle"),key:e,selected:t,onPressed:this._onMyAccountAndProfileSettingsButtonPressed,ref:this._mountedRefsMap.onComponentRef(e)})}_getWideButton(e){const t=this.props.isAloneInNavStack||this.state.isUsingStackNavigation,i=[t?r.ListItem.small.regularHeightStyle:r.ListItem.small.shortHeightStyle,w.menuItem];let n=e.accessibilityLabel||e.label;return e.selected&&(i.push(this._themeStyles.secondaryRowHighlightViewStyle),n+=", "+u.getString("Global.SelectedAccessibilityLabel")),o.createElement(P.WideButton,Object.assign({},e,{accessibilityLabel:n,buttonStyles:i,hideArrow:!t}))}_navigateToSettingsGroup(e){const t=this._shouldRefreshFocusForSettingsGroup(e);p.default.navigateToSettingsGroup(e,this._getRootViewId()),t&&this.props.resetFocus&&this.props.resetFocus()}_isSettingsGroupSelected(e){return this.state.settingsGroup===e}_shouldRefreshFocusForSettingsGroup(e){return this.props.detailContext&&1===this.props.detailContext.length&&this._isSettingsGroupSelected(e)}_focusItem(e=0){if(e<0||e>this.state.menuCategories.length-1)return;const t=this.state.menuCategories[e];if(this.state.focusedIndex===e){const e=this._mountedRefsMap.ref(I+t);e&&e.requestFocus()}else this.setState({focusedIndex:e})}_getHeaderText(e){return e.displayName+" "+u.getString("MyProfilePanel.SettingsTitle")}}t.default=N},70523:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(19784),s=i(89391),a=i(47204),r=i(21444),l=i(29937),c=i(68894),d=i(15877),u=i(33754),g=i(69108),h=i(93486),p=i(78735),m=i(444),S=i(56266),C=i(81760),f=i(18037),y=i(97634),_=i(53374),v=480,b=800,T=(0,d.lazyProperties)({spinnerStyle:()=>n.Styles.createViewStyle({alignItems:"center",alignSelf:"stretch",backgroundColor:C.Color.white,flex:1})});class P{static showSignOutConfirmation(e,t){m.default.isQuickSignOnEnabled()?this._showSignOutConfirmationV2(e,t):this._showSignOutConfirmationV1(e,t)}static _openSignoutSurvey(e,t){const i=_.default.newGuid(),n=r.default.addTrackingParamsToUri("https://feedback.skype.com/survey/answer/sosu",i);l.default.openUri({campaignId:i,uri:n,type:c.EngagementType.SignOutFeedback,target:c.ActionTarget.FeedbackBrowser,onDone:t,modalSizeOverride:{width:v,height:b}},e),p.default.setUserPreferencesLocal({hasSignOutSurveyShown:!0})}static _showSignOutSpinner(e){const t=u.getString("SignInSignUp.SignOutAnnouncement"),i=y.isDarkTheme(f.default.colorThemeNoSubscription()),o=n.createElement(n.View,{importantForAccessibility:n.Types.ImportantForAccessibility.Yes,accessibilityTraits:n.Types.AccessibilityTrait.Status,accessibilityLabel:t,style:T.spinnerStyle,autoFocus:!0,tabIndex:-1},n.createElement(S.default,{darkThemeEnabled:i}));a.default.showModal(o,"SignOutSpinner",{rootViewId:e})}static _onFinalSignoutPress(e,t,i=!1,n){!h.default.isChild()&&s.default.getS4LSisuFeatures().signoutSurveyEnabled&&!p.default.getUserPreferencesLocal().hasSignOutSurveyShown?P._openSignoutSurvey(e,(()=>{P._showSignOutSpinner(e),g.default.redirectToLogout(t,i,n)})):(P._showSignOutSpinner(e),g.default.redirectToLogout(t,i,n))}static _showSignOutConfirmationV1(e,t){const i=[{text:u.getString("Global.CancelLabel"),isCancel:!0},{text:u.getString("SignOutConfirmation.SignOutButtonTitle"),isSubmit:!0,onPress:()=>P._onFinalSignoutPress(t,e)}],n=u.getString("SignOutConfirmation.SignOutTitle"),s=u.getString("SignOutConfirmation.SignOutContent");o.default.showWithOptions({title:n,dialogAccessibilityTitle:s,message:s,buttons:i,rootViewId:t})}static _showSignOutConfirmationV2(e,t){const i={text:u.getString("Global.CancelLabel"),isCancel:!0},n={text:u.getString("Global.YesLabel"),onPress:()=>P._onFinalSignoutPress(t,e,!1,!0),isSubmit:!0},a=s.default.getS4LSisuFeatures().enableRemoveAccountOnSignOut;let r;r=[n,{text:a?u.getString("Global.NoLabel"):u.getString("SignOutConfirmation.SignOutForgetMeButtonTitle"),onPress:()=>P._onFinalSignoutPress(t,e,a,!1),isSubmit:!0},i];const l=u.getString("SignOutConfirmation.SignOutTitle"),c=a?u.getString("SignOutConfirmation.SignOutRememberYourAccountContent"):u.getString("SignOutConfirmation.SignOutContent");o.default.showWithOptions({title:l,dialogAccessibilityTitle:c,message:c,buttons:r,rootViewId:t})}}t.default=P},42484:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(2604),s=i(16778),a=i(97691),r=i(87720),l=i(36348),c=i(89391),d=i(42961),u=i(12951),g=i(99401),h=i(94224),p=i(47447),m=i(75209),S=i(98278),C=i(46096),f=i(39285),y=i(36237),_=i(15877),v=i(33754),b=i(78735),T=i(81736),P=i(64956),A=i(39182),k=i(62232),I=i(54863),w=i(81760),N=i(11010),M=i(11828),E=i(78262),x=i(19675),L=i(24576),R=i(53374),D=(0,_.lazyProperties)({sliderStyle:()=>s.Styles.createViewStyle({marginBottom:10}),sliderScaleStyle:()=>s.Styles.createViewStyle({flexDirection:"row",justifyContent:"space-between",marginLeft:10,marginRight:7}),sliderScaleMark:()=>s.Styles.createTextStyle({color:w.Color.gray300,fontSize:N.default.fontSize.size13Deprecated,maxWidth:270}),toggleContainer:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"center",marginBottom:5}),toggleText:()=>s.Styles.createTextStyle({flexGrow:1,flexShrink:1,marginRight:10})});class B extends L.default{constructor(){super(...arguments),this._testAudioPromiseChain=new m.default("TestAudio",C.LogTraceArea.AVSettings),this._onSpeakerSelected=e=>{const t=R.default.newCauseId();y.log(C.LogTraceArea.AVSettings,"_onSpeakerSelected "+e+" causeId: "+t),this.props.onSpeakerSelected&&this.props.onSpeakerSelected(e!==this.state.selectedSpeaker),h.default.DeviceStore.choosePreferredDevices({speaker:e},t)},this._onStartTestAudioPress=()=>{this.setState({activeTestAudio:!0})},this._onStopTestAudioPress=()=>{this.setState({activeTestAudio:!1})},this._onToggleUnmuteOnRingEnabled=(e,t)=>{b.default.setUserPreferencesLocal({unmuteOnIncomingRing:t})}}_buildState(e,t){const i=h.default.DeviceStore.getCurrentDevices(),o=c.default.getS4LCMCFeatures();return{speakers:h.default.DeviceStore.getSpeakers(),microphonePermissionStatus:T.default.permissionStatus(E.PermissionType.Microphone),selectedSpeaker:i?i.speaker:void 0,isAudioOutputSelectionSupported:h.default.DeviceStore.getIsAudioOutputSelectionSupported(),activeTestAudio:!n.isUndefined(this._testAudioPlayerToken),ringingDeviceOptionSupported:p.CallingCapabilities.secondaryRingingSupported()&&o.enableSecondaryRinging&&!n.isEmpty(h.default.DeviceStore.getSecondarySpeakers()),unmuteOnRingSupported:p.CallingCapabilities.unmuteDeviceSupported()&&o.enableUnmuteOnRing,unmuteOnRingEnabled:!!b.default.getUserPreferencesLocal().unmuteOnIncomingRing}}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.state.activeTestAudio!==t.activeTestAudio&&this._onTestAudioToggle(this.state.activeTestAudio)}componentWillUnmount(){super.componentWillUnmount();const e=R.default.newCauseId();y.log(C.LogTraceArea.AVSettings,"componentWillUnmount, causeId: "+e),this._stopTestAudioWithCauseId(e)}_onTestAudioToggle(e){const t=R.default.newCauseId();e?this._startTestAudioWithCauseId(t):this._stopTestAudioWithCauseId(t)}_startTestAudioWithCauseId(e){y.log(C.LogTraceArea.AVSettings,"Starting audio test, causeId: "+e),this._testAudioPromiseChain.chainPromise((()=>k.default.SkypeCallRinging.playRepeating(e).then((e=>{this._testAudioPlayerToken=e,this.props.onAudioTestPerformed&&this.props.onAudioTestPerformed()})).catch((t=>{y.error(C.LogTraceArea.AVSettings,`Failed to start audio test, causeId: ${e}, error: ${t}`),this.setState({activeTestAudio:!1})}))),"start",e)}_stopTestAudioWithCauseId(e){y.log(C.LogTraceArea.AVSettings,"Stopping audio test, causeId: "+e),this._testAudioPromiseChain.chainPromise((()=>(n.isUndefined(this._testAudioPlayerToken)||(k.default.SkypeCallRinging.dispose(this._testAudioPlayerToken,e),this._testAudioPlayerToken=void 0),a.Resolved())),"stop",e)}_getSliderScale(){const e=n.times(11,(e=>s.createElement(f.HiddenText,{style:D.sliderScaleMark,key:e},e.toString())));return s.createElement(s.View,{style:D.sliderScaleStyle,key:"SliderScale"},e)}render(){let e,t,i,a,c;if(n.isEmpty(this.state.speakers)&&this.state.isAudioOutputSelectionSupported)e=s.createElement(u.default,{audioTitleKey:"AudioVideoSettings.SpeakersLabel",errorStringKey:"AudioVideoSettings.NoDevicePresent",errorIcon:M.SkypeIcon.Error,colorThemeOverride:this.props.colorThemeOverride});else if(this.state.microphonePermissionStatus===o.PermissionStatus.Denied){const t=P.default.getDeniedPromptKey(E.PermissionType.Microphone);t&&(e=s.createElement(u.default,{audioTitleKey:"AudioVideoSettings.SpeakersLabel",errorStringKey:t,errorIcon:M.SkypeIcon.Error,colorThemeOverride:this.props.colorThemeOverride}))}else if(!n.isEmpty(this.state.speakers)||!this.props.compactView){const t=g.formatDevicesForPicker(this.state.speakers);e=s.createElement(d.default,{title:v.getString("AudioVideoSettings.SpeakersLabel"),items:t,onValueChange:this._onSpeakerSelected,selectedValue:this.state.selectedSpeaker||"",labelMaxWidth:this.props.labelMaxWidth,colorThemeOverride:this.props.colorThemeOverride})}return!n.isEmpty(this.state.speakers)&&p.CallingCapabilities.speakerVolumeControlSupported()&&(t=[this.props.compactView?void 0:this._getSliderScale(),s.createElement(I.default,{style:D.sliderStyle,onAdjustVolume:this.props.onAdjustVolume,trackHeight:10,handleSize:26,colorThemeOverride:this.props.colorThemeOverride,key:"VolumeSlider"})]),this.props.compactView||n.isEmpty(this.state.speakers)&&this.state.isAudioOutputSelectionSupported||(i=s.createElement(A.default,{style:S.ListItem.small.shortHeightStyle,title:v.getString("AudioVideoSettings.TestAudioButtonLabel"),accessibilityLabel:this.state.activeTestAudio?v.getString("AudioVideoSettings.TestAudioButtonStopLabel"):v.getString("AudioVideoSettings.TestAudioButtonStartLabel"),icon:this.state.activeTestAudio?M.SkypeIcon.Stop:M.SkypeIcon.Play,hideDivider:!0,colorThemeOverride:this.props.colorThemeOverride,onPress:this.state.activeTestAudio?this._onStopTestAudioPress:this._onStartTestAudioPress})),this.props.compactView||!this.state.unmuteOnRingSupported||this.props.isInOnboarding||n.isEmpty(this.state.speakers)&&this.state.isAudioOutputSelectionSupported||(a=s.createElement(r.default,{key:"unmuteSpeakersOnRing",style:D.toggleContainer,isOn:this.state.unmuteOnRingEnabled,accessibilityLabel:v.getString("AudioVideoSettings.UnmuteRingingTitle"),onChange:this._onToggleUnmuteOnRingEnabled},s.createElement(x.BodyText,{style:D.toggleText,colorThemeOverride:this.props.colorThemeOverride},v.getString("AudioVideoSettings.UnmuteRingingTitle")))),this.props.compactView||!this.state.ringingDeviceOptionSupported||this.props.isInOnboarding||(c=s.createElement(l.default,{onRingerDeviceSelected:this.props.onRingingDeviceSelected,colorThemeOverride:this.props.colorThemeOverride})),s.createElement(s.View,null,e,t,i,a,c)}}t.default=B},9211:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(98278),a=i(15877),r=i(33754),l=i(4735),c=i(55585),d=i(59433),u=i(19675),g=i(24576),h=i(53374),p=i(77524),m=(0,a.lazyProperties)({switchStyle:()=>n.Styles.createViewStyle({marginBottom:15})});class S extends g.default{constructor(){super(...arguments),this._onVoiceClipContributionLearnMore=e=>{e.stopPropagation(),e.preventDefault(),n.Linking.openUrl(o.default.getConfigSettingsNoSubscription().translator.learnMoreUrl)},this._onVoiceClipsContributionSettingPressed=()=>{l.default.showSpeechConsentPanel({causeId:h.default.newCauseId(),rootViewId:this._getRootViewId()})}}_buildState(e,t){return{speechConsentValue:o.default.getS4LCMCFeatures().enableSpeechConsentFlow&&c.default.getSpeechConsentValue()}}render(){const e=r.getString("SpeechConsentPanel.VoiceClipContribution"),t=n.createElement(p.WideButton,{label:e,accessibilityLabel:e,labelRight:this._getConsentValue(),onPressed:this._onVoiceClipsContributionSettingPressed,labelNumberOfLines:3,hideDivider:!0}),i=n.createElement(u.Caption,null,r.getString("SpeechConsentPanel.VoiceClipContributionCaption"),this._getVoiceClipContributionLearnMoreLink());return n.createElement(n.View,{style:m.switchStyle},t,i)}_getConsentValue(){return this.state.speechConsentValue?r.getString("CallingSettingsPanel.Enabled"):r.getString("CallingSettingsPanel.Disabled")}_getVoiceClipContributionLearnMoreLink(){return n.createElement(d.default,{linkTextStyle:s.LinkTextStyle.Caption,url:"#",key:"learnMore",blue:!0,onPress:this._onVoiceClipContributionLearnMore},r.getString("Global.LearnMore"))}}t.default=S},4775:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThankYouReceipt=void 0;const n=i(16778),o=i(44770),s=i(89391),a=i(98278),r=i(87134),l=i(15877),c=i(33754),d=i(51070),u=i(81115),g=i(22222),h=i(11010),p=i(59433),m=i(80837),S=i(19675),C=i(24576),f=(0,l.lazyProperties)({bodyStyleContainer:()=>n.Styles.createTextStyle({marginTop:10,marginBottom:20}),panelContainer:()=>n.Styles.createViewStyle({marginHorizontal:20,flex:1}),image:()=>n.Styles.createViewStyle({height:192,width:223,margin:20,alignSelf:"center"}),doneButton:()=>n.Styles.createViewStyle({width:260,marginVertical:30,alignSelf:"center"}),privacyLinkStyle:()=>n.Styles.createViewStyle({marginTop:10}),secondaryHeadingContainer:()=>n.Styles.createViewStyle({marginTop:10}),secondaryBodyContainer:()=>n.Styles.createViewStyle({marginBottom:10}),detailsBodyContainer:()=>n.Styles.createViewStyle({padding:10})});class y extends C.default{constructor(){super(...arguments),this._onPrivacyStatementPress=e=>{e.stopPropagation(),e.preventDefault(),n.Linking.openUrl(this.state.privacyStatementUrl)},this._onLearnMorePress=e=>{e.stopPropagation(),e.preventDefault(),n.Linking.openUrl(this.state.learnMoreUrl)}}_buildState(e,t){return{privacyStatementUrl:s.default.getConfigSettings().translator.privacyStatementUrl,learnMoreUrl:s.default.getConfigSettings().translator.speechConsentLearnMoreUrl,statusBarHeight:this._getContext().isPresentedInDesktopSubview?0:d.default.statusBarPadding()}}_renderThankYouReceiptContent(){const e=[h.default.captionFontStyle(this._currentTheme),this._themeStyles.primaryTextColorStyle,f.secondaryBodyContainer];return n.createElement(n.View,{style:f.panelContainer},this._getImage(o.Collection.SPEECH_CONSENT_THANK_YOU,f.image),n.createElement(S.PanelHeader,null,c.getString("SpeechConsentPanel.ThankYouReceiptMainTitle")),n.createElement(n.Text,{style:[h.default.bodyFontStyle(),f.bodyStyleContainer]},c.getString("SpeechConsentPanel.ThankYouReceiptMainBody")),n.createElement(n.View,{style:f.detailsBodyContainer},n.createElement(n.Text,{style:h.default.rowTitleFontStyle()},c.getString("SpeechConsentPanel.ReceiptSectionMainTitle")),n.createElement(r.default,{marginTop:10}),this._getSecondaryTitleElement("SpeechConsentPanel.ReceiptSectionTitle1"),this._getSecondaryBodyElement("SpeechConsentPanel.ReceiptSectionBody1",e),this._getSecondaryTitleElement("SpeechConsentPanel.ReceiptSectionTitle2"),this._getSecondaryBodyElement("SpeechConsentPanel.ReceiptSectionBody2",e),this._getSecondaryTitleElement("SpeechConsentPanel.ReceiptSectionTitle3"),this._getSecondaryBodyElement("SpeechConsentPanel.ReceiptSectionBody3",e),this._getSecondaryTitleElement("SpeechConsentPanel.ReceiptSectionTitle4"),this._getSeondaryBodyWithPannelSettingsPath(e),n.createElement(r.default,{marginTop:10})),this._getLink(c.getString("SpeechConsentPanel.ThankYouReceiptLearnMore"),this._onLearnMorePress),this._getLink(c.getString("SpeechConsentPanel.PrivacyStatement"),this._onPrivacyStatementPress))}_getSecondaryTitleElement(e){const t=[h.default.selectedCaptionFontStyle(this._currentTheme),f.secondaryHeadingContainer];return n.createElement(n.Text,{style:t},c.getString(e))}_getSecondaryBodyElement(e,t){return n.createElement(n.Text,{style:t},c.getString(e))}_getSeondaryBodyWithPannelSettingsPath(e){return n.createElement(n.Text,{style:e},c.getString("SpeechConsentPanel.ReceiptSectionBody4"),n.createElement(n.Text,{style:[h.default.selectedCaptionFontStyle(this._currentTheme),this._themeStyles.primaryTextColorStyle]},c.getString("SpeechConsentPanel.PanelSettingsPath")))}_getImage(e,t){return n.createElement(n.Image,{source:e,style:t,resizeMode:"contain"})}_getLink(e,t){return n.createElement(p.default,{style:f.privacyLinkStyle,linkTextStyle:a.LinkTextStyle.BodyTextSmall,url:"#",blue:!0,onPress:t},e)}_renderDoneButton(){const e=n.createElement(g.default,{style:f.doneButton,buttonStyle:a.SXButtonStyle.ColorFill,buttonSize:a.SXButtonSize.Medium,title:c.getString("Global.DoneButtonTitle"),onPress:this.props.onDone});return e}render(){const e=[m.default.flexOne,this._themeStyles.primaryBackgroundColorStyle];let t;this.state.statusBarHeight&&(e.push(u.default.marginTopStyle(this.state.statusBarHeight),m.default.overflowVisible),t=u.default.marginTopStyle(-1*this.state.statusBarHeight));let i=this._renderThankYouReceiptContent();return t&&(i=n.createElement(n.View,{style:t},i)),n.createElement(n.View,{style:[m.default.flexOne,this._themeStyles.primaryBackgroundColorStyle]},n.createElement(n.ScrollView,{style:e,keyboardShouldPersistTaps:!0},i),this._renderDoneButton())}}t.ThankYouReceipt=y,t.default=y},92798:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceClipsContribution=void 0;const n=i(16778),o=i(44770),s=i(89391),a=i(98278),r=i(87134),l=i(15877),c=i(33754),d=i(51070),u=i(81115),g=i(55585),h=i(22222),p=i(11010),m=i(59433),S=i(80837),C=i(19675),f=i(24576),y=(0,l.lazyProperties)({bodyStyleContainer:()=>n.Styles.createTextStyle({marginVertical:10}),titleContainer:()=>n.Styles.createTextStyle({paddingBottom:6}),panelContainer:()=>n.Styles.createViewStyle({marginHorizontal:20}),privacyImageDesktop:()=>n.Styles.createViewStyle({height:64,width:102,marginBottom:16,alignSelf:"center"}),privacyImageMobile:()=>n.Styles.createViewStyle({height:96,width:155,marginTop:14,marginBottom:16,alignSelf:"center"}),voiceClipsImageDesktop:()=>n.Styles.createViewStyle({height:64,width:64,marginBottom:16,alignSelf:"center"}),voiceClipsImageMobile:()=>n.Styles.createViewStyle({height:96,width:122,marginTop:40,marginBottom:16,alignSelf:"center"}),noLimitsImage:()=>n.Styles.createViewStyle({height:32,width:32}),imageContainer:()=>n.Styles.createViewStyle({flexDirection:"row",padding:16}),imageContainerMobile:()=>n.Styles.createViewStyle({flexDirection:"column",paddingVertical:16}),privacyContainerDesktop:()=>n.Styles.createViewStyle({paddingRight:16}),voiceClipsContainerDesktop:()=>n.Styles.createViewStyle({paddingLeft:16}),noLimitsMainContainer:()=>n.Styles.createViewStyle({flexDirection:"row",padding:16}),noLimitsMainContainerMobile:()=>n.Styles.createViewStyle({marginVertical:16}),noLimitsRightContainer:()=>n.Styles.createViewStyle({flex:1,marginLeft:16}),buttonsWrapper:()=>n.Styles.createViewStyle({alignSelf:"stretch",alignItems:"center",flexDirection:"row",justifyContent:"center",margin:20}),buttonWrapperMobile:()=>n.Styles.createViewStyle({margin:0,paddingTop:20,paddingBottom:30,paddingHorizontal:10}),leftButton:()=>n.Styles.createViewStyle({flex:1,marginRight:10}),rightButton:()=>n.Styles.createViewStyle({flex:1,flexShrink:0,marginLeft:10}),privacyLinkStyle:()=>n.Styles.createViewStyle({marginTop:16,marginBottom:16})});class _ extends f.default{constructor(){super(...arguments),this._onLearnMore=e=>{e.stopPropagation(),e.preventDefault(),n.Linking.openUrl(s.default.getConfigSettingsNoSubscription().translator.speechConsentLearnMoreUrl)},this._onPrivacyStatementPress=e=>{e.stopPropagation(),e.preventDefault(),n.Linking.openUrl(s.default.getConfigSettingsNoSubscription().translator.privacyStatementUrl)},this._onContributePress=()=>{this.props.onContribute()},this._onDoNotContributePress=()=>{this.props.onDoNotContribute()},this._setScrollViewRef=e=>{this._scrollView=e||void 0}}_buildState(e,t){return{statusBarHeight:this._getContext().isPresentedInDesktopSubview?0:d.default.statusBarPadding(),currentSpeechConsentValue:g.default.getSpeechConsentValue()}}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.state.statusBarHeight!==t.statusBarHeight&&this._scrollView&&this._scrollView.setScrollTop(0)}_getImage(e,t){return n.createElement(n.Image,{source:e,style:t,resizeMode:"contain"})}_getLearnMoreLink(){return n.createElement(m.default,{linkTextStyle:a.LinkTextStyle.Caption,url:"#",key:"learnMore",blue:!0,onPress:this._onLearnMore},c.getString("Global.LearnMore"))}_getPrivacyStatementLink(){return n.createElement(m.default,{style:y.privacyLinkStyle,linkTextStyle:a.LinkTextStyle.BodyTextSmall,url:"#",key:"privacyStatement",blue:!0,onPress:this._onPrivacyStatementPress},c.getString("SpeechConsentPanel.PrivacyStatement"))}_renderButtons(){let e,t;this.state.currentSpeechConsentValue?(e=c.getString("SpeechConsentPanel.ContinueContribute"),t=c.getString("SpeechConsentPanel.StopContribute")):(e=c.getString("SpeechConsentPanel.AgreeToContributeButton"),t=c.getString("SpeechConsentPanel.DisagreeToContributeButton"));const i=n.Styles.createViewStyle({backgroundColor:this._themeColors.primaryBackgroundColor},!1);return n.createElement(n.View,{style:[y.buttonsWrapper,i,void 0]},n.createElement(h.default,{style:y.leftButton,buttonStyle:a.SXButtonStyle.ColorFill,buttonSize:a.SXButtonSize.Medium,title:e,onPress:this._onContributePress}),n.createElement(h.default,{style:y.rightButton,buttonStyle:a.SXButtonStyle.ColorFill,buttonSize:a.SXButtonSize.Medium,title:t,onPress:this._onDoNotContributePress}))}_renderRequestingConsentPanelContent(){const e=[p.default.captionFontStyle(this._currentTheme),this._themeStyles.primaryTextColorStyle];return n.createElement(n.View,{style:y.panelContainer},n.createElement(C.PanelHeader,null,c.getString("SpeechConsentPanel.PanelTitle")),n.createElement(n.Text,{style:[p.default.bodyFontStyle(),y.bodyStyleContainer]},c.getString("SpeechConsentPanel.PanelMainContent")),this._getPrivacyAndVoiceClipsContent(e),this._getNoLimitsContent(e),this._getPrivacyStatementLink())}_getPrivacyAndVoiceClipsContent(e){return n.createElement(n.View,{style:[y.imageContainer]},n.createElement(n.View,{style:[S.default.flexOne,y.privacyContainerDesktop]},this._getImage(o.Collection.SPEECH_CONSENT_PRIVACY,y.privacyImageDesktop),n.createElement(n.Text,{style:e},c.getString("SpeechConsentPanel.PanelPriorityHeading")),n.createElement(n.Text,{style:e},c.getString("SpeechConsentPanel.PanelPriorityBody"),this._getLearnMoreLink())),n.createElement(n.View,{style:[S.default.flexOne,y.voiceClipsContainerDesktop]},this._getImage(o.Collection.SPEECH_CONSENT_VOICE_CLIPS,y.voiceClipsImageDesktop),n.createElement(n.Text,{style:e},c.getString("SpeechConsentPanel.PanelVoiceHeading")),n.createElement(n.Text,{style:e},c.getString("SpeechConsentPanel.PanelVoiceBody"))))}_getNoLimitsContent(e){const t=[p.default.subtitleFontStyle(this._currentTheme),this._themeStyles.primaryTextColorStyle],i=n.Styles.createViewStyle({backgroundColor:this._themeColors.secondaryBackgroundColor},!1);return n.createElement(n.View,{style:[y.noLimitsMainContainer,i,void 0]},this._getImage(o.Collection.SPEECH_CONSENT_TRANSLATOR,y.noLimitsImage),n.createElement(n.View,{style:y.noLimitsRightContainer},n.createElement(n.Text,{style:e},c.getString("SpeechConsentPanel.PanelKeyContentHeading")),n.createElement(n.Text,{style:e},c.getString("SpeechConsentPanel.PanelKeyContentBody"),n.createElement(n.Text,{style:t},c.getString("SpeechConsentPanel.PanelSettingsPath")))))}render(){const e=[S.default.flexOne,this._themeStyles.primaryBackgroundColorStyle];let t;this.state.statusBarHeight&&(e.push(u.default.marginTopStyle(this.state.statusBarHeight),S.default.overflowVisible),t=u.default.marginTopStyle(-1*this.state.statusBarHeight));let i=this._renderRequestingConsentPanelContent();return t&&(i=n.createElement(n.View,{style:t},i)),n.createElement(n.View,{style:[S.default.flexOne,this._themeStyles.primaryBackgroundColorStyle]},n.createElement(n.ScrollView,{ref:this._setScrollViewRef,style:e,keyboardShouldPersistTaps:!0},i),n.createElement(r.default,{marginLeft:0,marginRight:0}),this._renderButtons())}}t.VoiceClipsContribution=_,t.default=_},70102:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(58666),a=i(32182),r=i(33754),l=i(46929),c=i(24576);class d extends c.default{constructor(){super(...arguments),this._getSelectedItemDefaultText=()=>{var e;return null!==(e=this.props.selectOptionText)&&void 0!==e?e:r.getString("CallSubtitleToast.SpokenLanguageDropdownOptionDefaultText")},this._getSelectedItemLabel=()=>{var e;return(null===(e=this.state.items.find((e=>e.value===this.state.spokenLanguageLocale)))||void 0===e?void 0:e.label)||this._getSelectedItemDefaultText()},this._isSelected=e=>e===this.state.spokenLanguageLocale}_buildState(e,t){const i=o.default.getS4LCMCFeatures().callTranslatorBotConfig.languageSupport.speech,n=r.getLanguageFromLocale();return{items:[...i].sort(((e,t)=>{const i=this._getLanguageShortNameFromLocale(e),o=this._getLanguageShortNameFromLocale(t);return i.localeCompare(o,n)})).map((e=>{const t=s.getLanguageTitle(e);return""!==t?{label:t,value:e}:void 0})).filter((e=>void 0!==e)),spokenLanguageLocale:e.showSelectOption?"default":l.default.getCallTranslatorBotSpokenLanguageLocale()}}render(){return n.createElement(a.default,{id:"spokenLanguagePicker",items:this.state.items,rowTitle:this._getRowTitle(),caption:this._getCaption(),isItemSelected:this._isSelected,onHandleItemSelection:this.props.onHandleMenuCommand,selectedItemLabel:this._getSelectedItemLabel(),style:this.props.style,labelColor:this.props.labelColor})}_getLanguageShortNameFromLocale(e){const t=s.getShortLanguageTitle(e);return null!=t?t:e}_getRowTitle(){return this.props.rowTitle?r.getString("LanguageAndTranslationSettingsPanel.SpokenLanguageLabel"):void 0}_getCaption(){if(this.props.caption)return o.default.getS4LCMCFeaturesNoSubscription().enableMessageTranslation?r.getString("SubtitlesSettingsPanel.SpokenLanguageNewExplanation"):r.getString("LanguageAndTranslationSettingsPanel.SpokenLanguageExplanation")}}t.default=d},28574:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(31844),o=i(16778),s=i(87720),a=i(98278),r=i(10167),l=i(46096),c=i(15877),d=i(33754),u=i(85683),g=i(90602),h=i(22222),p=i(40363),m=i(17719),S=i(24576);(0,c.lazyProperties)({container:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),settingsblockContainer:()=>o.Styles.createViewStyle({alignSelf:"stretch",overflow:"visible"})});class C extends S.default{constructor(){super(...arguments),this._openSystemStartupSettings=()=>{n.default.openSystemStartupSettings()}}_buildState(e,t){const i=r.default.getAppSettings();return{autoStartEnabled:!!i&&!!i.autoStartEnabled,launchMinimized:!!i&&!!i.launchMinimized,onCloseKeepRunning:!!i&&!!i.onCloseKeepRunning,isAutoStartSupported:!1,canControlAutoStart:!1}}render(){return null}_getAutoStartButton(){const e=d.getString("UserSettingsPanel.AutoStart"),t=p.default.getPlatformType();let i;return t===l.PlatformType.Linux?i=d.getString("UserSettingsPanel.AutoStartDescriptionLinux"):t===l.PlatformType.Windows&&(i=d.getString("UserSettingsPanel.AutoStartDescriptionWindows")),o.createElement(s.default,{key:"autoStartEnabled",style:[g.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:this.state.autoStartEnabled,accessibilityLabel:e,onChange:(e,t)=>this._toggleElectronAppSetting({autoStartEnabled:t})},o.createElement(u.SwitchLabel,{title:e,subtitle:i}))}_openAutoStartSettingsButton(){const e=d.getString("UserSettingsPanel.AutoStart");return o.createElement(m.default,{label:e,labelBottom:d.getString("UserSettingsPanel.AutoStartDescriptionWindows"),labelBottomSingleLine:!0,accessibilityLabel:e,treatAsLink:!0,accessoryIconMarginRight:20},o.createElement(h.default,{buttonSize:a.SXButtonSize.Small,buttonStyle:a.SXButtonStyle.ThemeStroke,title:d.getString("UserSettingsPanel.SettingsTitle"),accessibilityLabel:e,accessibilityHidden:!0,allowTextWrap:!0,onPress:this._openSystemStartupSettings}))}_getLaunchMinimizedButton(){const e=d.getString("UserSettingsPanel.LaunchMinimized"),t=p.default.getPlatformType();let i;return t===l.PlatformType.Linux?i=d.getString("UserSettingsPanel.LaunchMinimizedDescriptionLinux"):t===l.PlatformType.Windows&&(i=d.getString("UserSettingsPanel.LaunchMinimizedDescriptionWindows")),o.createElement(s.default,{key:"launchMinimizedEnabled",style:[g.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:this.state.launchMinimized,accessibilityLabel:e,onChange:(e,t)=>this._toggleElectronAppSetting({launchMinimized:t})},o.createElement(u.SwitchLabel,{title:e,subtitle:i}))}_getOnCloseKeepRunningButton(){const e=d.getString("UserSettingsPanel.OnCloseKeepRunning"),t=d.getString("UserSettingsPanel.OnCloseKeepRunningDescription");return o.createElement(s.default,{key:"onCloseKeepRunning",style:[g.default.controlRow,this._themeStyles.dividerBorderColorStyle,this.props.style],isOn:this.state.onCloseKeepRunning,accessibilityLabel:e,onChange:(e,t)=>this._toggleElectronAppSetting({onCloseKeepRunning:t})},o.createElement(u.SwitchLabel,{title:e,subtitle:t}))}_toggleElectronAppSetting(e){r.default.changeAppSettings(e)}}t.default=C},59452:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(89391),a=i(58666),r=i(32182),l=i(33754),c=i(46929),d=i(24576),u="default";class g extends d.default{constructor(){super(...arguments),this._isSelected=e=>{if(this.props.defaultOption){if(e===this.props.defaultOption)return!0}else if(e===this.state.subtitleLanguageLocale)return!0;return!1},this._onHandleMenuCommand=e=>{this.props.onHandleMenuCommand(e===u?"":e)}}_buildState(e,t){const i=[];if(e.defaultOption)i.push({label:e.defaultOption,value:u});else{const e=l.getString("SettingsLanguages.ResetLanguageOption");i.push({label:e,value:u})}return n.each(s.default.getS4LCMCFeatures().callTranslatorBotConfig.languageSupport.tts,(e=>{const t=a.getLanguageTitle(e);n.isEmpty(t)||i.push({label:t,value:e})})),{items:i,subtitleLanguageLocale:this._getCallTranslatorBotSubtitleLanguageLocale()}}render(){return o.createElement(r.default,{id:"subtitleLanguagePicker",items:this.state.items,rowTitle:l.getString("LanguageAndTranslationSettingsPanel.CallSubtitleLanguageLabel"),caption:this._getCaption(),isItemSelected:this._isSelected,onHandleItemSelection:this._onHandleMenuCommand,selectedItemLabel:this._getSelectedItemLabel()})}_getCaption(){return this.props.caption?l.getString("SubtitlesSettingsPanel.SubtitleLanguageExplanation"):void 0}_getCallTranslatorBotSubtitleLanguageLocale(){const e=c.default.getCallTranslatorBotSubtitleLanguageLocale();return!e||n.isEmpty(e)?u:e}_getSelectedItemLabel(){if(this.props.defaultOption)return this.props.defaultOption;const e=n.find(this.state.items,(e=>e.value===this.state.subtitleLanguageLocale));return e?e.label:u}}t.default=g},16874:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(94224),a=i(5581),r=i(58666),l=i(33754),c=i(36150),d=i(90602),u=i(59433),g=i(80837),h=i(19675),p=i(24576);class m extends p.default{constructor(){super(...arguments),this._onLanguageLinkPress=e=>{e.preventDefault(),s.default.CallNavigationHelper.navigateToTranslationSettingsPanel(!1,this._getRootViewId())},this._onLearnMoreLinkPress=e=>{n.Linking.openUrl(o.default.getConfigSettingsNoSubscription().translator.help)}}_buildState(e,t){const i=a.default.getLocalCallTranslatorBotSpokenLanguageLocale(),n=a.default.getLocalCallTranslatorBotSubtitleLanguageLocale(),o=a.default.isDeviceLanguageSupportedForTranslation();return{spokenLanguageLocale:i,subtitleLanguageLocale:n,isMobileScreenReaderEnabled:c.default.isMobileScreenReaderEnabled(),isSpokenLanguageSupported:o}}render(){const e=l.getString("SubtitlesSettingsPanel.LanguageSettingLink"),t=n.createElement(u.default,{url:"#",key:"keyLanguageSetting",blue:!0,onPress:this._onLanguageLinkPress},e),i=n.createElement(u.default,{url:"#",key:"keyLearnMore",blue:!0,onPress:this._onLearnMoreLinkPress},l.getString("UserSettingsPanel.TranslateMessagesAndCallsExplanationLearnMoreLinkText"));let o;if(this.state.isSpokenLanguageSupported){const e=r.getLanguageTitle(this.state.subtitleLanguageLocale),i=r.getLanguageTitle(this.state.spokenLanguageLocale);o=this.state.spokenLanguageLocale===this.state.subtitleLanguageLocale?l.getParts("SubtitlesSettingsPanel.SubtitleLanguageSpokenLanguageMatchLink",{language:e,languageSettingsLink:t}):l.getParts("SubtitlesSettingsPanel.SubtitleLanguageSpokenLanguageMisMatchLink",{subtitleLanguage:e,spokenLanguage:i,languageSettingsLink:t})}else o=l.getParts("UserSettingsPanel.TranslateMessagesAndCallsAppLanguageNotSupportedExplanation",{spokenLanguageLink:t,learnMoreLink:i});let s=n.createElement(h.Caption,{style:d.default.subtitleMediumSemiLarge,key:"subtitle",importantForAccessibility:n.Types.ImportantForAccessibility.Yes,onPress:this.state.isMobileScreenReaderEnabled?this._onLanguageLinkPress:void 0},o);return n.createElement(n.View,{style:g.default.flexOne},s)}}t.default=m},61596:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(98278),a=i(65110),r=i(15877),l=i(33754),c=i(93194),d=i(19675),u=i(24576),g=(0,r.lazyProperties)({container:()=>o.Styles.createViewStyle({justifyContent:"space-between",flexDirection:"row",alignItems:"center",alignSelf:"stretch"}),button:()=>o.Styles.createButtonStyle({flexDirection:"row",alignItems:"stretch",marginLeft:10})});class h extends u.default{constructor(){super(...arguments),this._onPickerButtonRef=e=>{this._pickerButton=()=>e||void 0},this._onPickerClick=e=>{e.stopPropagation();const t={anchor:this._pickerButton,useTheme:!0,positionPriorities:["bottom","top"],colorThemeOverride:this.props.colorThemeOverride};return c.default.showWithOptions({id:"textPickerMenu",config:t,getMenuItems:this._getMenuItems,handleMenuCommand:this._onHandleMenuCommand,rootViewId:this._getRootViewId(),invokingEvent:e})},this._getMenuItems=()=>this.props.items.map((e=>({text:e.label,command:e.value}))),this._onHandleMenuCommand=e=>{if(e===c.SXActionMenuCancel)return;const t=n.findIndex(this.props.items,(t=>t.value===e));this.props.onValueChange(e,t)}}render(){const e=this.props.title+", "+this._getSelectedItemLabel()+", "+l.getString("Global.SelectedAccessibilityLabel");return o.createElement(o.View,{style:[g.container,s.ListItem.small.shortHeightStyle]},o.createElement(d.RowTitle,{colorThemeOverride:this._currentTheme,disabled:this.props.disabled},this.props.title),o.createElement(a.default,{disabled:this.props.disabled,ref:this._onPickerButtonRef,style:g.button,label:this._getSelectedItemLabel(),labelMaxWidth:270,onPress:this._onPickerClick,accessibilityLabel:e,tabIndex:this.props.tabIndex}))}_getSelectedItemLabel(){const e=n.find(this.props.items,(e=>e.value===this.props.selectedValue));return e?e.label:""}}t.default=h},80982:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(98278),a=i(77381),r=i(17924),l=i(15877),c=i(33754),d=i(30124),u=i(85683),g=(0,l.lazyProperties)({container:()=>n.Styles.createViewStyle({paddingBottom:10})});class h extends a.default{_buildState(e,t){const i=o.default.getS4LCMCFeatures();return{isUsingStackNavigationContext:d.default.isUsingStackNavigationContext(),isTranslationEnabled:i.callTranslatorBotConfig.enabledTranslatorOneOnOneCall||i.callTranslatorBotConfig.enabledTranslatorGroupCall||i.enableMessageTranslation}}render(){return this.state.isTranslationEnabled?n.createElement(n.View,{style:[this.props.style,g.container]},n.createElement(u.SectionTitle,{title:c.getString("LanguageAndTranslationSettingsPanel.TranslationHeader")}),n.createElement(r.default,{buttonStyles:this.state.isUsingStackNavigationContext?void 0:s.ListItem.small.shortHeightStyle})):null}}t.default=h},33574:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(38891),a=i(32182),r=i(33754),l=i(46929),c=i(24576),d=s.Gender.female;class u extends c.default{constructor(){super(...arguments),this._isSelected=e=>e===this.state.translationVoice,this._onHandleGenderSelection=e=>{const t=e;l.default.setCallTranslatorBotTranslationVoice(t)}}_buildState(e,t){const i=[];return n.each(s.Gender,(e=>{i.push({label:u.getLabelForGender(e),value:e})})),{items:i,translationVoice:this._getCallTranslatorBotVoice()}}render(){return o.createElement(a.default,{id:"translationVoicePicker",items:this.state.items,rowTitle:r.getString("LanguageAndTranslationSettingsPanel.TranslationVoiceLabel"),caption:r.getString("LanguageAndTranslationSettingsPanel.TranslationVoiceExplanation"),isItemSelected:this._isSelected,onHandleItemSelection:this._onHandleGenderSelection,selectedItemLabel:this._getSelectedItemLabel()})}_getCallTranslatorBotVoice(){return l.default.getCallTranslatorBotTranslationVoice()||d}_getSelectedItemLabel(){const e=n.find(this.state.items,(e=>e.value===this.state.translationVoice));return e?e.label:u.getLabelForGender(d)}static getLabelForGender(e){switch(e){case s.Gender.male:return r.getString("LanguageAndTranslationSettingsPanel.TranslatedVoiceOptionMale");case s.Gender.female:return r.getString("LanguageAndTranslationSettingsPanel.TranslatedVoiceOptionFemale");default:return""}}}t.default=u},72235:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(15877),a=i(33754),r=i(46929),l=i(36150),c=i(90602),d=i(59433),u=i(19675),g=i(24576),h=i(87331),p=(0,s.lazyProperties)({switchStyle:()=>n.Styles.createViewStyle({marginVertical:10,flexDirection:"row"}),privacyStatementTextStyle:()=>n.Styles.createTextStyle({paddingRight:15})});class m extends g.default{constructor(){super(...arguments),this._onLearnMoreLinkPress=e=>{e.stopPropagation(),e.preventDefault(),n.Linking.openUrl(this.state.learnMoreUrl)},this._onPrivacySettingChanged=(e,t)=>{r.default.setCallTranslatorPrivacyConsent(t)}}_buildState(e,t){return{learnMoreUrl:o.default.getConfigSettings().translator.learnMoreUrl,isMobileScreenReaderEnabled:l.default.isMobileScreenReaderEnabled(),isPrivacyEnabled:!!r.default.getCallTranslatorPrivacyConsent()}}render(){const e=a.getParts("UserSettingsPanel.TranslationPrivacyConsentSwitch",{learnMoreLink:this._getLearnMoreLink()});return n.createElement(n.View,{style:p.switchStyle},n.createElement(u.Caption,{style:[c.default.subtitleMediumSemiLarge,p.privacyStatementTextStyle],key:"spokenLanguageSubtitle",onPress:this.state.isMobileScreenReaderEnabled?this._onLearnMoreLinkPress:void 0},e),n.createElement(h.default,{key:"spokenLanguageToggle",isOn:this.state.isPrivacyEnabled,accessibilityLabel:a.getString("UserSettingsPanel.TranslationPrivacyConsentSwitchNoLink"),onChange:this._onPrivacySettingChanged}))}_getLearnMoreLink(){return n.createElement(d.default,{url:"#",key:"keyLearnMore",blue:!0,onPress:this._onLearnMoreLinkPress},a.getString("UserSettingsPanel.TranslationCELAStatementLearnMore"))}}t.default=m},48367:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleDesktopUtilityBar=void 0;const n=i(7417);class o extends n.default{_getMenuSections(){return this.props.getMenuSections}_currentMenuText(){return this.props.currentMenuText}_accessibilityText(){return this.props.accessibilityText}_onHandleMenuCommand(e){super._onHandleMenuCommand(e),this.props.onHandleMenuCommand(e)}}t.SimpleDesktopUtilityBar=o,t.default=o},9995:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74634),o=i(77484),s=i(6514),a=i(17093),r=i(48199),l=i(16392);class c extends o.default{constructor(){super(...arguments),this._selectedConversationIdEvent=new n.default,this._getSelectedConversationIdEvent=()=>this._selectedConversationIdEvent}componentDidMount(){super.componentDidMount(),this.props.selectedConversationId&&this._selectedConversationIdEvent.fire(this.props.selectedConversationId)}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i),this.props.selectedConversationId!==e.selectedConversationId&&this._selectedConversationIdEvent.fire(e.selectedConversationId)}_renderSceneContent(e,t){if(!e)return;const i={ref:this._mountedRefsMap.onComponentRef(t)};return e instanceof a.ConversationsListNavigationContext?s.default.renderComponent(e,Object.assign(Object.assign({},i),{getSelectedConversationIdEvent:this._getSelectedConversationIdEvent}),this.props.useDesktopUI):s.default.renderComponent(e,i,this.props.useDesktopUI)}_navigatorSceneConfigTypeForNavContext(e,t){return e instanceof a.SearchNavigationContext?t&&t instanceof a.ConversationsListNavigationContext?r.default.sceneConfigForSearchTransition():r.default.fade():e instanceof a.QuickCallNavigationContext?t&&t instanceof a.ConversationsListNavigationContext&&e.state.searchOnly?r.default.sceneConfigForSearchTransition():r.default.floatFromBottom(0):e.state.navigationDirection===l.StackNavigationDirection.Present?r.default.floatFromBottom(0):r.default.floatFromRight(0)}}t.default=c},6514:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(24521),s=i(88110),a=i(99620),r=i(3056),l=i(91e3),c=i(28805),d=i(10706),u=i(17093),g=i(70170),h=i(45695);class p{static renderComponentForLeftNavContext(e,t,i,o,s){const a=e.getConversationsListContext(),r=a?a.state.selectedConversationId:void 0;switch(t){case u.LeftNavViewMode.Recents:return n.createElement(c.default,Object.assign({selectedConversationId:r,useMobileView:!1,isScrollToTopTarget:!1,isActiveTab:!0,useDesktopUtilityBar:o,newActionPickerContext:o?u.HubTab.Recents:void 0,disableChangeAnimation:s},i));case u.LeftNavViewMode.Search:const t=e.getSearchContext();return p.renderComponent(t,i,o);case u.LeftNavViewMode.ConversationInCall:const a=e.getConversationInCallContext();return a?p.renderComponent(a,i,o):void 0;case u.LeftNavViewMode.Calls:const l=o?Object.assign(Object.assign({},i),{selectedConversationId:r}):i,d=e.getCallsContext();return p.renderComponent(d,l,o);case u.LeftNavViewMode.Contacts:const g=o?Object.assign(Object.assign({},i),{selectedConversationId:r}):i,h=e.getContactsV2Context();return p.renderComponent(h,g,o);case u.LeftNavViewMode.Notifications:const m=e.getNotificationsContext();return p.renderComponent(m,i,o)}}static renderComponent(e,t,i,c){let p;if(e instanceof u.ConversationsListNavigationContext?p=n.createElement(d.default,Object.assign({route:{params:{hubTab:e.state.currentTab,hideHeader:i}}},t)):e instanceof u.SearchNavigationContext?p=n.createElement(h.default,{route:{params:Object.assign({showGroupsFilter:!0,searchPanelInitiator:e.state.searchOrigin,initialSearchFilter:e.state.initialSearchFilter,searchInputSmallMode:i,selectedConversationId:c},t)}}):e instanceof u.ConversationInCallNavigationContext?p=n.createElement(a.default,Object.assign({key:"callConversationPanel",conversationId:e.state.conversationId,callId:e.state.callId,onClose:e.state.onClose},t)):e instanceof u.QuickCallNavigationContext?p=n.createElement(g.default,Object.assign({conversationId:e.state.conversationId,callId:e.state.callId,newGroup:e.state.newGroup,searchOnly:e.state.searchOnly,navigationDirection:e.state.navigationDirection,hideHeader:i,hideSearchBar:i,useExperimentalDesktopUtilityBar:i,newActionPickerContext:i?u.HubTab.Calls:void 0},t)):e instanceof u.ContactsPanelV2NavigationContext?p=n.createElement(l.default,Object.assign({initialTab:e.state.currentTab,hideHeader:i,hideSearchBar:i,useExperimentalDesktopUtilityBar:i,newActionPickerContext:i?u.HubTab.People:void 0},t)):e instanceof u.AlertsHubNavigationContext?p=n.createElement(o.default,Object.assign({hideHeader:i,useExperimentalDesktopUtilityBar:i},t)):e instanceof u.ArchivedConversationsPanelNavigationContext&&(p=n.createElement(s.default,{route:{params:Object.assign(Object.assign({},e.state),t)}})),p)return n.createElement(r.default,{isPresentedInDesktopLeftNav:!0},p)}}t.default=p},61213:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(89391),a=i(78547),r=i(62033),l=i(96074),c=i(82773),d=i(94894),u=i(96418),g=i(11009),h=i(3056),p=i(98278),m=i(92758),S=i(76850),C=i(10482),f=i(46172),y=i(92718),_=i(46096),v=i(13944),b=i(36237),T=i(15877),P=i(6514),A=i(9995),k=i(33754),I=i(66127),w=i(34537),N=i(4735),M=i(17093),E=i(27357),x=i(46068),L=i(81736),R=i(82052),D=i(4101),B=i(26978),O=i(81760),F=i(11828),V=i(80837),U=i(60305),H=i(12770),W=i(53374),z=i(78440),G=i(56129),K=[M.HubTab.Recents,M.HubTab.Calls,M.HubTab.People,M.HubTab.Notifications],j=(0,T.lazyProperties)({viewContainer:()=>o.Styles.createViewStyle({alignSelf:"stretch"}),innerContainer:()=>o.Styles.createViewStyle({alignSelf:"stretch"}),rightBorder:()=>o.Styles.createViewStyle({borderRightWidth:1,borderStyle:"solid",borderColor:O.Color.gray50}),rightBorderCompensation:()=>o.Styles.createViewStyle({paddingRight:1}),searchOverlayContainerHidden:()=>o.Styles.createViewStyle({height:0}),searchBoxContainer:()=>o.Styles.createViewStyle({alignSelf:"stretch",alignItems:"stretch",justifyContent:"center",flexDirection:"row",height:44,paddingLeft:8,paddingRight:10,paddingTop:10,paddingBottom:0}),searchBoxContainerTopTabs:()=>o.Styles.createViewStyle({paddingLeft:16,paddingRight:16,paddingBottom:4,paddingTop:4}),searchButtonContainer:()=>o.Styles.createViewStyle({flex:1,flexDirection:"row",justifyContent:"center"}),dialpadButton:()=>o.Styles.createViewStyle({borderRadius:10,marginLeft:8,padding:7}),dialpadBackgroundLight:()=>o.Styles.createViewStyle({backgroundColor:O.Color.white,borderColor:O.Color.black,borderWidth:1}),dialpadBackgroundDark:()=>o.Styles.createViewStyle({backgroundColor:O.Color.black,borderColor:O.Color.white,borderWidth:1}),fullScreenOverrides:()=>(0,T.lazyProperties)({mainContent:()=>o.Styles.createViewStyle({flex:1,borderRightWidth:0,paddingRight:0})}),dragHandle:()=>o.Styles.createViewStyle({position:"absolute",top:0,right:-15,bottom:0,width:20,backgroundColor:O.Color.transparent}),dragHandleDesktop:()=>o.Styles.createViewStyle({cursor:"ew-resize"}),tabsWrapper:()=>o.Styles.createViewStyle({paddingBottom:8,paddingTop:2}),tabsWrapperBorder:()=>o.Styles.createViewStyle({borderBottomWidth:1,borderColor:O.Color.transparent}),tabsWrapperMoreSpace:()=>o.Styles.createViewStyle({marginTop:10,paddingBottom:12}),floatingShadow:()=>o.Styles.createViewStyle({shadowOffset:{height:0,width:0},shadowRadius:16,shadowColor:O.Color.blackOverlay20}),callBackground:()=>o.Styles.createViewStyle({backgroundColor:O.Color.gray400})});class q extends l.default{constructor(){super(...arguments),this._animatedWrapperWidthValue=new o.Animated.Value(0),this._animatedWrapperWidthStyle=o.Styles.createAnimatedViewStyle({width:this._animatedWrapperWidthValue}),this._animatedContentWidthValue=new o.Animated.Value(0),this._animatedContentWidthStyle=o.Styles.createAnimatedViewStyle({width:this._animatedContentWidthValue}),this._coachMarkContext={coachMarkArea:g.CoachMarkAreaType.LeftNavigation},this._headerPanelRef=()=>this._headerRef?this._headerRef.getUserIconRef():void 0,this._onWhatsNewTooltipPress=()=>this._headerRef?this._headerRef.openMeControl():void 0,this._onTabPress=(e,t)=>{const i=W.default.newCauseId();switch(b.log(_.LogTraceArea.Navigation,"LeftNavigationView._onTabPress, causeId: "+i),e){case M.HubTab.Recents:N.default.navigateToDesktopRecents(i);break;case M.HubTab.Calls:N.default.navigateToQuickCallPanelInLeftNav({causeId:i});break;case M.HubTab.People:N.default.navigateToContactsPanelInLeftNav(i);break;case M.HubTab.Notifications:N.default.navigateToNotificationsInLeftNav()}},this._onTabLongPress=(e,t)=>{const i=W.default.newCauseId();switch(b.log(_.LogTraceArea.Navigation,"LeftNavigationView._onTabLongPress, causeId: "+i),e){case M.HubTab.Recents:case M.HubTab.Notifications:R.default.showDesktopTabOptionsMenu(e,(()=>this._tabRef(e)),this._getRootViewId(),t)}},this._onDesktopHubTabBarRef=e=>{this._tabBar=e||void 0},this._onDesktopNavigationHeaderRef=e=>{this._headerRef=e||void 0},this._onPanDragHandle=e=>{let t;t=this._isDragging?e.pageX-this._currentDragX:e.pageX-e.initialPageX,this._currentDragX=e.pageX,this._currentWidth+=t,this._currentWidth<this.state.minWidth?this._currentWidth=this.state.minWidth:this._currentWidth>p.SideBarWidths.max&&(this._currentWidth=p.SideBarWidths.max),this._animatedContentWidthValue.setValue(this._currentWidth),e.isComplete?(this._expandedWidth=this._currentWidth,this._animatedWrapperWidthValue.setValue(this._expandedWidth),B.default.putWidth(B.SideBar.Left,this._expandedWidth),this._isDragging=!1,this.forceUpdate()):this._isDragging||(this._isDragging=!0,this.forceUpdate());const i=this._currentWidth<p.SideBarWidths.compact;this.state.useCompactIcons!==i&&this.setState({useCompactIcons:i})},this._onSearchButtonClick=e=>{const t=W.default.newCauseId();b.log(_.LogTraceArea.Navigation,"LeftNavigationView._onSearchButtonClick, causeId: "+t),e&&e.stopPropagation(),N.default.navigateToSearch({searchOrigin:_.SearchPanelInitiator.RecentsListSearchButton},t)},this._onTabletBackButtonPressed=()=>{const e=W.default.newCauseId();switch(b.log(_.LogTraceArea.Navigation,"LeftNavigationView._onTabletBackButtonPressed, causeId: "+e),this.props.viewMode){case M.LeftNavViewMode.Search:return N.default.closeSearchPanel(e,this._getContext()),!0;case M.LeftNavViewMode.CallSearch:return N.default.closeCallSearchPanel(e,this._getContext()),!0}return!1},this._onDialpadButtonClick=()=>{const e=W.default.newCauseId();b.log(_.LogTraceArea.Navigation,"DesktopNavigation._onDialpadButtonClick causeId: "+e),N.default.navigateToPSTNDialerWithParams({causeId:e,navigationSource:_.DialerNavigationSource.DesktopNavigationSearchBox},this._getRootViewId())}}_buildState(e,t){const i=U.default.useTabletUI(),n=!i&&f.default.collapseDesktopStackNavContext(),o=B.default.resizingEnabled(B.SideBar.Left),r=e.viewMode===M.LeftNavViewMode.Search,l=e.viewMode===M.LeftNavViewMode.ConversationInCall?p.SideBarWidths.base:p.SideBarWidths.min,d=s.default.getS4LMessagingFeatures().enableNotificationPrompt&&L.default.shouldShowNotificationsPrompt(),u=c.default.isBookmarkAdded(),g=s.default.getEngagementFeatures().whatsNewSetting,h={useDesktopUI:n,useTabletUI:i,isResizeable:o,showNotificationsPrompt:d,mainStageViewMode:o?E.default.getCompositeMainStageNavViewMode(p.MainRootViewId):void 0,renderPreMountedSearch:r||!t&&this.state.renderPreMountedSearch,minWidth:l,conversationsListMode:i?m.default.getConversationsListMode():void 0,useExtraCompactLayout:R.default.useExtraCompactLayoutAndChanges(),isBookmarkAdded:u,isWhatsNewTooltipEnabled:g.enabled&&g.coachmarkEnabled,showWhatsNewTooltip:z.default.showTooltip()&&a.default.isAppUpdated(),modernizeConversationList:I.default.canModernizeConversationList()};if(t||l!==this.state.minWidth){this._currentDragX=0,this._expandedWidth=Math.max(l,B.default.getWidth(B.SideBar.Left)),this._currentWidth=this._expandedWidth,this._animatedWrapperWidthValue.setValue(this._currentWidth),this._animatedContentWidthValue.setValue(this._currentWidth);const e=this._currentWidth<=p.SideBarWidths.compact;t&&(this._useCompactIconsOnMount=e),h.useCompactIcons=e}return h}componentDidMount(){super.componentDidMount(),this.state.useTabletUI&&r.default.subscribe(this._onTabletBackButtonPressed),this.state.renderPreMountedSearch||H.default.setTimeout((()=>{this.isComponentMounted()&&this.setState({renderPreMountedSearch:!0})}),2500),this._timeoutId=H.default.setTimeout((()=>{this.isComponentMounted()&&(z.default.maybeSetTooltipVisibility(!0),z.default.maybeSetRedDotVisibility(!0),this._timeoutId=void 0)}),2500)}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i),this._isDragging||(this._currentWidth=e.viewMode===M.LeftNavViewMode.None?0:this._expandedWidth,this._animatedWrapperWidthValue.setValue(this._currentWidth),this._animatedContentWidthValue.setValue(this._currentWidth)),this._shouldFocusSearchButton=!n.isUndefined(e.viewMode)&&this.props.viewMode===M.LeftNavViewMode.Search&&!e.navContext.state.isMessageSent}componentWillUnmount(){super.componentWillUnmount(),r.default.unsubscribe(this._onTabletBackButtonPressed),this._timeoutId&&(H.default.clearTimeout(this._timeoutId),this._timeoutId=void 0)}_getBackgroundColorStyle(){return this.state.modernizeConversationList?w.default.getBackgroundColorStyle(this._useDarkTheme(),this._useAccessibleTheme(),this._themeStyles):this.state.useTabletUI?this._themeStyles.primaryBackgroundColorStyle:this._themeStyles.secondaryBackgroundColorStyle}render(){if(this.props.viewMode===M.LeftNavViewMode.None)return null;const e=[j.viewContainer],t=[j.innerContainer];let i,s;!this.state.modernizeConversationList||this._useAccessibleTheme()?t.push(j.rightBorder):t.push(j.rightBorderCompensation),t.push(this._getBackgroundColorStyle()),this.state.isResizeable&&t.push(V.default.flexOne),this._getContext().isPresentedInDesktopContentPanel?(e.push(V.default.flexOne),t.push(j.fullScreenOverrides.mainContent)):(e.push(this._animatedWrapperWidthStyle,V.default.overflowVisible),t.push(this._themeStyles.dividerBorderColorStyle,this._animatedContentWidthStyle)),this._useDarkTheme()&&t.push(this._themeStyles.headerShadowBorderColorStyle),this._isDragging&&t.push(j.floatingShadow),this.props.viewMode!==M.LeftNavViewMode.ConversationInCall&&(i=this._renderHeader(),s=this._renderSearchBox());const a=this.state.isResizeable?o.createElement(o.GestureView,{style:[j.dragHandle,j.dragHandleDesktop],preferredPan:o.Types.PreferredPanGesture.Horizontal,onPanHorizontal:this._onPanDragHandle}):void 0;let r,l;if(this.state.useDesktopUI){const e=this.props.viewMode,t=e===M.LeftNavViewMode.Search;let i=q._hubTabForNavigationContext(this.props.navContext.state.searchViewModeContext,this.props.viewMode);n.isUndefined(i)&&(i=M.HubTab.Recents);const s=i===M.HubTab.Recents||i===M.HubTab.Calls||i===M.HubTab.People?o.createElement(y.default,{selectedHubTab:i}):void 0,a=[j.tabsWrapper,this.state.modernizeConversationList?void 0:j.tabsWrapperBorder,this.state.modernizeConversationList?void 0:this._themeStyles.dividerBorderColorStyle,j.tabsWrapperMoreSpace],l=q._showTabsForViewMode(e)?o.createElement(S.default,{ref:this._onDesktopHubTabBarRef,style:a,tabs:K,currentHubTab:i,smallTabsThreshold:p.SideBarWidths.compact,useSmallTabsOnMount:this._useCompactIconsOnMount,hideLabels:this.state.useExtraCompactLayout,onTabPress:this._onTabPress,onTabLongPress:this._onTabLongPress}):void 0,c=this.state.showNotificationsPrompt?o.createElement(x.default,null):void 0,d=t?this._renderSearchContextContent():this._renderContent();let u;if(this.state.renderPreMountedSearch||this._isShowingSearch()){const e=[V.default.absoluteFill,t?void 0:j.searchOverlayContainerHidden];u=o.createElement(o.View,{style:e},this._renderSearchPanel())}let g,h=[V.default.flexOne];t&&(h.push(V.default.displayNone),g=o.Types.ImportantForAccessibility.NoHideDescendants),r=o.createElement(o.View,{style:V.default.flexOne},o.createElement(o.View,{style:h,importantForAccessibility:g},c,l,s,d),u)}else l=this._renderSearchPanel(),this._isShowingSearch()||(r=this._renderContent());let c=o.createElement(o.Animated.View,{style:t,importantForLayout:!this.state.isResizeable,importantForAccessibility:this.state.isResizeable?void 0:this.props.importantForAccessibility},i,s,l,r,a,this._getBookmarkTooltip(),this._getWhatsNewTooltip());return this.state.isResizeable&&(this._isDragging&&e.push(V.default.floatingStyle),e.push(this._backgroundColorStyle()),c=o.createElement(o.Animated.View,{style:e,importantForLayout:!0,importantForAccessibility:this.props.importantForAccessibility},c)),o.createElement(h.default,{isPresentedInDesktopLeftNav:!0},o.createElement(g.CoachMarkContext.Provider,{value:this._coachMarkContext},c))}_getBookmarkTooltip(){return this.state.isBookmarkAdded&&!u.default.isCoachMarkBeingShown()?o.createElement(d.default,{title:k.getString("BookmarksTooltips.BookmarkAdded"),accessibilityLabel:k.getString("BookmarksTooltips.BookmarkAdded"),anchor:this._headerPanelRef,offsetY:-2}):void 0}_getWhatsNewTooltip(){return this.state.isWhatsNewTooltipEnabled&&this.state.showWhatsNewTooltip?o.createElement(G.default,{title:k.getString("Onboarding.LandingScreenWithCardsCardTitle1"),accessibilityLabel:k.getString("Onboarding.LandingScreenWithCardsCardTitle1"),anchor:this._headerPanelRef,offsetY:-2,onPress:this._onWhatsNewTooltipPress}):void 0}_tabRef(e){return this._tabBar?this._tabBar.tabRef(e):void 0}_renderHeader(){if(!this.state.useTabletUI)return o.createElement(C.default,{ref:this._onDesktopNavigationHeaderRef})}_renderSearchBox(){if(!q._showSearchBoxForNavigationContext(this.props.viewMode)||this.state.useTabletUI)return;const e=[j.searchBoxContainer];return this.state.useDesktopUI&&e.push(j.searchBoxContainerTopTabs),o.createElement(o.View,{style:e},o.createElement(o.View,{style:j.searchButtonContainer},o.createElement(D.default,{placeholderText:k.getString("HubHeaderPanel.SearchHubTitle"),accessibilityLabel:k.getString("HubHeaderPanel.SearchHubAccessibilityLabel"),buttonOnly:!0,showSearchIcon:!0,onPress:this._onSearchButtonClick,autoFocusButton:this._shouldFocusSearchButton}),this.state.useDesktopUI?this._renderDialpadButton():void 0))}_renderContent(){const e=this.props.navContext;if(this.state.useTabletUI){const t=q._convertLevNavContextToNavStack(e,this.state.conversationsListMode),i=e.getConversationsListContext();return o.createElement(A.default,{navContextStack:t,selectedConversationId:i?i.state.selectedConversationId:void 0,useDesktopUI:this.state.useDesktopUI})}const t={isPresentedInDesktopLeftNav:!0,isCollapsed:!1,useCompactIcon:this.state.useCompactIcons};return P.default.renderComponentForLeftNavContext(e,this.props.viewMode,t,this.state.useDesktopUI)}_isShowingSearch(){return this.props.viewMode===M.LeftNavViewMode.Search}_renderSearchPanel(){const e=this.props.navContext.getConversationsListContext(),t=e?e.state.selectedConversationId:void 0,i={isCollapsed:!1,hidden:!this._isShowingSearch(),useCompactIcon:this.state.useCompactIcons},n=this.props.navContext.getSearchContext();return P.default.renderComponent(n,i,!1,t)}_renderSearchContextContent(){if(!this.props.navContext.state.searchViewModeContext||!this.state.useDesktopUI)return;const e={isPresentedInDesktopLeftNav:!0,isCollapsed:!1,useCompactIcon:this.state.useCompactIcons};return P.default.renderComponentForLeftNavContext(this.props.navContext,this.props.navContext.state.searchViewModeContext,e,this.state.useDesktopUI,!0)}_renderDialpadButton(){return o.createElement(v.default,{key:"dialpad",size:F.IconSize.size18,color:this._themeColors.primaryIconColor,hoverColor:this._themeColors.iconHoverColor,icon:F.SkypeIcon.Dialpad,title:k.getString("PeopleList.PstnDialpadLabel"),onPress:this._onDialpadButtonClick,style:[j.dialpadButton,this._useAccessibleTheme()?this._useDarkTheme()?j.dialpadBackgroundDark:j.dialpadBackgroundLight:this._themeStyles.searchHeaderColorStyle]})}_backgroundColorStyle(){switch(this.state.mainStageViewMode){case M.MainStageNavViewMode.Call:case M.MainStageNavViewMode.MeetNow:return j.callBackground;case M.MainStageNavViewMode.DesktopContentPanel:return this._themeStyles.messageStreamBackgroundColorStyle;case M.MainStageNavViewMode.WelcomeScreen:return this._themeStyles.primaryBackgroundColorStyle;default:return}}static _convertLevNavContextToNavStack(e,t){const i=n.clone(e.getConversationsListContext());switch(i.id=-1,e.state.viewMode){case M.LeftNavViewMode.Recents:if(t===m.ConversationsListMode.ArchivedConversations){return[i,n.clone(e.getArchivedConversationsContext())]}return[i];case M.LeftNavViewMode.Search:const o=n.clone(e.getSearchContext());return o.id=-2,[i,o];case M.LeftNavViewMode.CallSearch:const s=n.clone(e.getCallSearchContext());return s.id=-4,[i,s];case M.LeftNavViewMode.ConversationInCall:const a=n.clone(e.getConversationInCallContext());return a?(a.id=-3,[a]):[]}return[]}static _showSearchBoxForNavigationContext(e){return e!==M.LeftNavViewMode.Search}static _hubTabForNavigationContext(e,t){return t===M.LeftNavViewMode.Search&&e?this._hubTabForViewMode(e):this._hubTabForViewMode(t)}static _hubTabForViewMode(e){switch(e){case M.LeftNavViewMode.Recents:return M.HubTab.Recents;case M.LeftNavViewMode.Calls:return M.HubTab.Calls;case M.LeftNavViewMode.Contacts:return M.HubTab.People;case M.LeftNavViewMode.Notifications:return M.HubTab.Notifications;default:return}}static _showTabsForViewMode(e){switch(e){case M.LeftNavViewMode.Recents:case M.LeftNavViewMode.Calls:case M.LeftNavViewMode.Contacts:case M.LeftNavViewMode.Notifications:case M.LeftNavViewMode.Search:return!0;default:return!1}}}t.default=q},86673:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(96074),s=i(3056),a=i(11009),r=i(98278),l=i(15877),c=i(6514),d=i(81760),u=i(60305),g=(0,l.lazyProperties)({viewContainer:()=>n.Styles.createViewStyle({alignSelf:"stretch",borderRightWidth:1,borderStyle:"solid",borderColor:d.Color.gray50})});class h extends o.default{constructor(){super(...arguments),this._coachMarkContext={coachMarkArea:a.CoachMarkAreaType.LeftNavigation}}_buildState(e,t){return{sidebarWidth:r.SideBarWidths.base,useTabletUI:u.default.useTabletUI()}}render(){if(!this.props.navContext)return null;const e=c.default.renderComponent(this.props.navContext,{isCollapsed:!1},!0),t=[g.viewContainer,this.state.useTabletUI?this._themeStyles.primaryBackgroundColorStyle:this._themeStyles.secondaryBackgroundColorStyle,this._themeStyles.dividerBorderColorStyle,n.Styles.createViewStyle({width:this.state.sidebarWidth},!1)];return this._useDarkTheme()&&t.push(this._themeStyles.headerShadowBorderColorStyle),n.createElement(n.View,{style:t,importantForLayout:!0,importantForAccessibility:this.props.importantForAccessibility},n.createElement(s.default,{isPresentedInDesktopLeftNav:!0},n.createElement(a.CoachMarkContext.Provider,{value:this._coachMarkContext},e)))}}t.default=h},66630:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(83940),a=i(58187),r=i(91707),l=i(81374),c=i(52525),d=i(61213),u=i(33754),g=i(7593),h=i(17093),p=i(11411),m=(i(67888),i(97634)),S=i(63841),C=i(18037);t.default=class{static renderComponentForContext(e){let t,i,f;if(e instanceof h.JoiningGuestScreenContext)t=o.createElement(p.default,{showSpinner:!0,statusText:u.getString("UrlConverter.JoiningConversationMessage"),showLoginFallback:!1,loginCallback:n.noop,darkThemeEnabled:C.default.useDarkThemeNoSubscription()});else if(e instanceof h.WelcomeScreenContext)t=o.createElement(a.CommonContext.Consumer,null,(e=>{const t=m.isDarkTheme(e.theme)&&!m.isAccessibleTheme(e.theme)?S.Theme.ColorfulDark:void 0;return o.createElement(c.default,{colorThemeOverride:t})}));else if(e instanceof h.DesktopContentPanelNavigationContext){const n=e.getConversationContext();n&&(i=n?n.state.conversationId:void 0,t=o.createElement(r.default,{navContext:n}))}else e instanceof h.CallNavigationContext?(f=e.state.callId,i=e.state.initialConversationMri,t=o.createElement(s.default,{key:"call"+f,route:{params:{initialConversationMri:i,callId:f,navigationReason:e.state.navigationReason,convertedVideoToAudio:e.state.convertedVideoToAudio,meetNowParameters:e.state.meetNowParameters}}})):e instanceof g.default.NavigationContext.MeetNowNavigationContext?t=g.default.StackNavigator.renderSceneContent(e):e instanceof h.ForcedUpgradeContext?t=o.createElement(l.default,null):e instanceof h.LeftNavigationViewContext?t=o.createElement(d.default,{navContext:e,viewMode:e.state.viewMode}):h.SXPlaygroundNavigationContext;return{component:t,conversationMri:i,callId:f}}}},94355:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(71830),a=i(3056),r=i(77381),l=i(46096),c=i(11375),d=i(36237),u=i(72490),g=i(33754),h=i(66630),p=i(4735),m=i(17093),S=i(27357),C=i(53374);class f extends r.default{constructor(){super(...arguments),this._navigateToRecents=(e,t)=>{if(t!==this._getRootViewId())return!1;const i=C.default.newCauseId();return d.log(l.LogTraceArea.Navigation,"MainStageNavigationView._navigateToRecents, causeId: "+i),p.default.navigateToDesktopRecents(i,this._conversationMri,this._callId?l.NavigationConversationOrigin.Call:void 0),c.setFocusWithDelay(c.FocusEvent.Recent,0),!0},this._toggleGallery=(e,t)=>{if(t!==this._getRootViewId())return!1;const i=C.default.newCauseId();return d.log(l.LogTraceArea.Navigation,"MainStageNavigationView._toggleGallery,  causeId: "+i),!this._conversationMri||s.isConversationWithPhoneNumber(this._conversationMri)||s.isS4BBridgeMri(this._conversationMri)||(this.state.isGalleryShowing?(o.Accessibility.announceForAccessibility(g.getString("AccessibilityLabel.GalleryClosed")),p.default.closeGalleryPanel(i,this._getContext())):(o.Accessibility.announceForAccessibility(g.getString("AccessibilityLabel.GalleryOpened")),p.default.navigateToGallery(this._conversationMri,m.GalleryViewMode.All,this._getContext()))),!0}}_buildState(e,t){return{isGalleryShowing:S.default.isGalleryShowing(this._getRootViewId())}}componentDidMount(){super.componentDidMount(),this._registerKeyboardHandlers()}componentWillUnmount(){super.componentWillUnmount(),this._unregisterKeyboardHandlers()}render(){if(!this.props.splitNavContext)return null;const e=this.props.splitNavContext.getNavStack(),t=h.default.renderComponentForContext(n.last(e));return this._conversationMri=t.conversationMri,this._callId=t.callId,t.component?o.createElement(a.default,{isPresentedInDesktopContentPanel:!0},t.component):null}_registerKeyboardHandlers(){u.default.addHandler(l.KeyboardShortcut.NavigateToRecents,this._navigateToRecents),u.default.addHandler(l.KeyboardShortcut.NavigateToHistory,this._navigateToRecents),u.default.addHandler(l.KeyboardShortcut.ToggleGallery,this._toggleGallery)}_unregisterKeyboardHandlers(){u.default.removeHandler(l.KeyboardShortcut.NavigateToRecents,this._navigateToRecents),u.default.removeHandler(l.KeyboardShortcut.NavigateToHistory,this._navigateToRecents),u.default.removeHandler(l.KeyboardShortcut.ToggleGallery,this._toggleGallery)}}t.default=f},51072:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MaybeListItem=void 0;const n=i(96486),o=i(34828),s=i(16778);function a(e,t,i,n){const o=e;let a=!1;t.disabled&&(a=!0);const r=a?void 0:t.onPress;if(t.onContextMenu&&(n.onContextMenu=t.onContextMenu,delete i.onContextMenu),r)o._isMaybeListItemPressed=!1,o._maybeListItemOnPress||(o._maybeListItemOnPress=e=>{o._isMaybeListItemPressed=!0}),o._maybeLitItemOrigOnPress!==r&&(o._maybeListItemWrappedOnPress=(e,t)=>{(s.UserInterface.isNavigatingWithKeyboard()||o._isMaybeListItemPressed||t)&&(o._isMaybeListItemPressed=!1,r&&r(e))},o._maybeLitItemOrigOnPress=r);else{if(!o._maybeLitItemOrigOnPress)return;o._isMaybeListItemPressed=!1,delete o._maybeLitItemOrigOnPress,delete o._maybeListItemOnPress,delete o._maybeListItemWrappedOnPress}i.onPress=o._maybeListItemOnPress,n.onPress=o._maybeListItemWrappedOnPress}function r(e,t,i,n){const o=e,s=t.onLongPress;t.onContextMenu&&(n.onContextMenu=t.onContextMenu,delete i.onContextMenu),s&&(o._isMaybeListItemPressed=!1,o._maybeListItemOnLongPress||(o._maybeListItemOnLongPress=e=>{s(e)}),i.onLongPress=o._maybeListItemOnLongPress)}class l extends s.Component{constructor(){super(...arguments),this._onRef=e=>{this._ref=e||void 0}}render(){return s.createElement(o.Types.VirtualListCellContext.Consumer,null,(e=>{const t=this._processProps(this.props,e),i=t.Component;return s.createElement(i,Object.assign({ref:this._onRef},t.props))}))}requestFocus(){this._focus?this._focus():this._ref&&this._ref.requestFocus()}_processProps(e,t){let i,o;if(t.onListItemDetails){o=n.clone(e);const s=!!e.keepOriginalProps;delete o.ref,delete o.keepOriginalProps,s||delete o.tabIndex;const a={};i=this.processProps(e,s,o,a),this._focus=t.onListItemDetails(a)}return{Component:i||this.DefaultComponent,props:o||e}}}t.MaybeListItem={View:class extends l{constructor(){super(...arguments),this.DefaultComponent=s.View}processProps(e,t,i,n){return e.accessibilityTraits&&(n.accessibilityTrait=e.accessibilityTraits instanceof Array?e.accessibilityTraits[0]:e.accessibilityTraits,t||delete i.accessibilityTraits),e.accessibilityLabel&&(n.accessibilityLabel=e.accessibilityLabel,t||delete i.accessibilityLabel),e.importantForAccessibility&&(n.importantForAccessibility=e.importantForAccessibility,t||delete i.importantForAccessibility),a(this,e,i,n),r(this,e,i,n),e.onFocus&&(n.onFocus=e.onFocus,delete i.onFocus),e.onBlur&&(n.onBlur=e.onBlur,delete i.onBlur),e.onMouseEnter&&(n.onHoverStart=e.onMouseEnter,delete i.onMouseEnter),i.onMouseLeave&&(n.onHoverEnd=i.onMouseLeave,delete i.onMouseLeave),s.View}},Button:class extends l{constructor(){super(...arguments),this.DefaultComponent=s.Button}processProps(e,t,i,n){return e.accessibilityTraits&&(n.accessibilityTrait=e.accessibilityTraits instanceof Array?e.accessibilityTraits[0]:e.accessibilityTraits,t||delete i.accessibilityTraits),e.accessibilityLabel&&(n.accessibilityLabel=e.accessibilityLabel,t||delete i.accessibilityLabel),e.importantForAccessibility&&(n.importantForAccessibility=e.importantForAccessibility,t||delete i.importantForAccessibility),a(this,e,i,n),r(this,e,i,n),e.onFocus&&(n.onFocus=e.onFocus,delete i.onFocus),e.onBlur&&(n.onBlur=e.onBlur,delete i.onBlur),e.onHoverStart&&(n.onHoverStart=e.onHoverStart,delete i.onHoverStart),i.onHoverEnd&&(n.onHoverEnd=i.onHoverEnd,delete i.onHoverEnd),t?s.Button:s.View}}},t.default=t.MaybeListItem},95674:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(19436),s=i(75352),a=i(67930),r=i(3056),l=i(72822),c=i(46096),d=i(36237),u=i(33754),g=i(28159),h=i(53154),p=i(38980),m=i(83643),S=i(63823),C=i(81760),f=i(11828),y=i(63841),_=i(53374);class v extends a.default{constructor(){super(...arguments),this._goBack=e=>(d.log(c.LogTraceArea.Navigation,"AVSettingsDialog._goBack,  causeId: "+e),this.props.scenarioNavigator?(this.props.scenarioNavigator.goBack(),!0):super._goBack(e)),this._onCloseButtonClicked=()=>{const e=_.default.newCauseId();d.log(c.LogTraceArea.Navigation,"AVSettingsDialog._onCloseButtonClicked,  causeId: "+e),this._sendTelemetryEvent(l.DialogNavExit.Close),this._goBack(e)},this._onNextButtonClicked=()=>{const e=_.default.newCauseId();d.log(c.LogTraceArea.Navigation,"AVSettingsDialog._onNextButtonClicked,  causeId: "+e),this._sendTelemetryEvent(l.DialogNavExit.Submit),this.props.scenarioNavigator?this.props.scenarioNavigator.goNext():this._goBack(e)},this._onSkipButtonClicked=()=>{const e=_.default.newCauseId();d.log(c.LogTraceArea.Navigation,"AVSettingsDialog._onSkipButtonClicked,  causeId: "+e),this._sendTelemetryEvent(l.DialogNavExit.Skip),this.props.scenarioNavigator?this.props.scenarioNavigator.goNext():this._goBack(e)},this._onCameraSelected=e=>{this._telemetryEvent&&e&&this._telemetryEvent.markDidChangeCameraSetting()},this._onMicrophoneSelected=e=>{this._telemetryEvent&&e&&this._telemetryEvent.markDidChangeMicSetting()},this._onSpeakerSelected=e=>{this._telemetryEvent&&e&&this._telemetryEvent.markDidChangeSpeakerSetting()},this._onRingingDeviceSelected=e=>{this._telemetryEvent&&e&&this._telemetryEvent.markDidChangeRingingDeviceSetting()},this._onMicrophoneAdjusted=()=>{this._telemetryEvent&&this._telemetryEvent.markDidAdjustMicrophone()},this._onMicrophoneAutoAdjustChanged=e=>{this._telemetryEvent&&this._telemetryEvent.markDidChangeMicrophoneAutoAdjustment(e)},this._onAudioTestPerformed=()=>{this._telemetryEvent&&this._telemetryEvent.markAudioTestPerformed()},this._onTestCallPerformed=()=>{this._telemetryEvent&&this._telemetryEvent.markTestCallPerformed()},this._onSpeakerVolumeChanged=()=>{this._telemetryEvent&&this._telemetryEvent.markDidChangeSpeakerVolume()},this._onEchoCancellationChanged=e=>{this._telemetryEvent&&this._telemetryEvent.markDidChangeEchoCancellation(e)},this._onMusicModeChanged=e=>{this._telemetryEvent&&this._telemetryEvent.markDidChangeMusicMode(e)}}static getHeaderText(e){return e===s.SettingsMode.Audio?u.getString("AudioVideoSettings.AudioTestTitle"):e===s.SettingsMode.Video?u.getString("AudioVideoSettings.VideoTestTitle"):u.getString("AudioVideoSettings.Title")}_buildState(e,t){let i={};if(t){this._setupTelemetryEvent(e);let t=(0,m.getOnboardingFeatures)(e.scenarioNavigator);i.themeAwareOnboardingEnabled=t.themeAwareOnboardingEnabled}return i}render(){const e=this.props.origin===l.DialogNavOrigin.Onboarding?h.OnboardingDialogWizardNextButtonVariant.TextAndIcon:h.OnboardingDialogWizardNextButtonVariant.IconOnly,t=this._getNextButtonTitle(),i=this.props.scenarioNavigator&&!this.state.themeAwareOnboardingEnabled&&!this._useDarkTheme(),s=this._useDarkTheme()?C.Color.darkThemeBackground:C.Color.white;return n.createElement(r.default,{goBack:this._goBack},n.createElement(g.default,{headerText:this._getHeaderText(this.state),descriptionElement:u.getString("AudioVideoSettings.AVTestBody"),hideSkipButton:this.props.hideSkipButton,nextButtonIcon:this.props.nextButtonIcon||f.SkypeIcon.Ok,hideCloseButton:this.props.hideCloseButton,closeButtonIcon:this.props.closeButtonIcon,nextButtonVariant:e,nextButtonTitle:t,scenarioNavigator:this.props.scenarioNavigator,onSkipButtonClicked:this._onSkipButtonClicked,onNextButtonClicked:this._onNextButtonClicked,onCloseButtonClicked:this._onCloseButtonClicked,disablePresentationAnimation:!0,isContentScrollable:!0},n.createElement(o.default,{settingsMode:this.props.settingsMode,colorThemeOverride:i?y.Theme.Colorful:void 0,backgroundColor:i?C.Color.white:s,onCameraSelected:this._onCameraSelected,onMicrophoneSelected:this._onMicrophoneSelected,onSpeakerSelected:this._onSpeakerSelected,onRingingDeviceSelected:this._onRingingDeviceSelected,onMicrophoneAdjusted:this._onMicrophoneAdjusted,onMicrophoneAutoAdjustChanged:this._onMicrophoneAutoAdjustChanged,onSpeakerVolumeChanged:this._onSpeakerVolumeChanged,onAudioTestPerformed:this._onAudioTestPerformed,onTestCallPerformed:this._onTestCallPerformed,onMusicModeChanged:this._onMusicModeChanged,onEchoCancellationChanged:this._onEchoCancellationChanged,isInOnboarding:!0,hideBackgroundBlurCapability:!0})))}componentWillUnmount(){super.componentWillUnmount(),this._sendTelemetryEvent(l.DialogNavExit.CancelOrBack)}_componentId(){return"AVSettingsDialog"}_getNextButtonTitle(){if(this.props.origin===l.DialogNavOrigin.Onboarding)return u.getString("Onboarding.WizardGenericStepContinueButton")}_setupTelemetryEvent(e){let t,i,n=(0,m.getTypedScenarioNavigator)(e.scenarioNavigator);n&&(t=n.getCurrentStep(),i=n.getTotalNumberOfSteps()),this._telemetryEvent=new S.AVSettingsDialogEvent(e.settingsMode,e.origin,t,i)}_sendTelemetryEvent(e){this._telemetryEvent&&(this._telemetryEvent.setExit(e),p.default.track(this._telemetryEvent),this._telemetryEvent=void 0)}_getHeaderText(e){return v.getHeaderText(this.props.settingsMode)}}t.default=v},7499:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(97691),o=i(19784),s=i(77381),a=i(37490),r=i(33754),l=i(78735);class c extends s.default{static showIfRequired(e){if(l.default.getUserPreferencesLocalNoSubscription().isArchiveConversationDialogRequired){a.dismissAll();const t=r.getString("HideConversation.DialogTitle"),i=r.getString("HideConversation.DialogBody");return o.default.showOKAlertWithPromise(t,i,e,!1,i).then((()=>{l.default.setUserPreferencesLocal({isArchiveConversationDialogRequired:!1})}))}return n.Resolved()}}t.default=c},97136:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(74634),s=i(35440),a=i(47204),r=i(77381),l=i(46096),c=i(15877),d=i(33754),u=i(4735),g=i(86045),h=i(10265),p=i(81760),m=i(11010),S=i(19675),C=i(77524),f=(0,c.lazyProperties)({contentContainer:()=>n.Styles.createViewStyle({backgroundColor:p.Color.transparent,justifyContent:"center",alignItems:"center"}),innerContainer:()=>n.Styles.createViewStyle({justifyContent:"center",alignItems:"center"}),title:()=>n.Styles.createTextStyle({color:p.Color.white,textAlign:"center",alignSelf:"center",marginTop:10}),description:()=>n.Styles.createTextStyle({color:p.Color.white,alignSelf:"center",textAlign:"center",marginVertical:20,paddingHorizontal:10}),linkButton:()=>n.Styles.createButtonStyle({minHeight:40,paddingLeft:10}),linkText:()=>n.Styles.createTextStyle({font:m.default.font.uiDisplayBold,fontSize:m.default.controlFontSize.bodySmallDeprecated,color:p.Color.white})});class y extends r.default{constructor(){super(...arguments),this._closeAnimationEvent=new o.default,this._onOkButtonClick=()=>{a.default.dismissModal(this.props.dialogId,this._getRootViewId()),this.props.onOkButtonClick&&this.props.onOkButtonClick()},this._onCancelButtonClick=()=>{a.default.dismissModal(this.props.dialogId,this._getRootViewId()),this.props.onCancelButtonClick&&this.props.onCancelButtonClick()},this._onPrivacyStatementPressed=()=>{a.default.dismissModal(this.props.dialogId,this._getRootViewId()),this.props.privacyStatementUrl&&u.default.navigateToInAppBrowser({origin:l.BrowserOrigin.ConsentModal,url:this.props.privacyStatementUrl,openUrlOptions:{onInAppWebBrowserClose:this._onPrivacyStatementClose},openSecondaryBrowserIfNecessary:!0},this._getRootViewId())},this._onTermsPressed=()=>{a.default.dismissModal(this.props.dialogId,this._getRootViewId()),this.props.termsOfServiceUrl&&u.default.navigateToInAppBrowser({origin:l.BrowserOrigin.ConsentModal,url:this.props.termsOfServiceUrl,openUrlOptions:{onInAppWebBrowserClose:this._onTermsOfServiceClose},openSecondaryBrowserIfNecessary:!0},this._getRootViewId())},this._onPrivacyStatementClose=()=>{this.props.onPrivacyStatementClose&&this.props.onPrivacyStatementClose()},this._onTermsOfServiceClose=()=>{this.props.onTermsOfServiceClose&&this.props.onTermsOfServiceClose()}}componentWillUnmount(){super.componentWillUnmount(),this.props.onModalClosed&&this.props.onModalClosed()}render(){let e,t,i=[{text:this.props.cancelButtonLabel||d.getString("Global.CancelLabel"),onPress:this._onCancelButtonClick,isCancel:!0},{text:this.props.okButtonLabel||d.getString("Global.OkLabel"),onPress:this._onOkButtonClick,isSubmit:!0,autoFocus:!g.default.shouldAnnounceForAccessibility()||void 0}];this.props.privacyStatementLabel&&this.props.privacyStatementUrl&&(e=n.createElement(C.WideButton,{key:"privacyStatementLink",buttonStyles:f.linkButton,hideDivider:!0,label:this.props.privacyStatementLabel,accessibilityLabel:this.props.privacyStatementLabel,labelStyle:f.linkText,onPressed:this._onPrivacyStatementPressed})),this.props.termsOfServiceLabel&&this.props.termsOfServiceUrl&&(t=n.createElement(C.WideButton,{key:"termsLink",buttonStyles:f.linkButton,hideDivider:!0,label:this.props.termsOfServiceLabel,accessibilityLabel:this.props.termsOfServiceLabel,labelStyle:f.linkText,onPressed:this._onTermsPressed}));const o=d.getString("ConsentModal.ConsentNeededAccessibilityLabel",{description:this.props.description||""});return n.createElement(h.default,{dialogId:this.props.dialogId,buttons:i,buttonAlignment:s.SimpleDialogButtonAlignment.HorizontalStack,closeAnimationEvent:this._closeAnimationEvent,accessibilityLabel:o,horizontalPadding:30},n.createElement(n.View,{style:f.contentContainer},n.createElement(n.View,{style:f.innerContainer,importantForAccessibility:n.Types.ImportantForAccessibility.No},this.props.iconView,n.createElement(n.Text,{autoFocus:!!g.default.isMobileScreenReaderEnabled()&&void 0,style:[m.default.fontStyle.messagingHeader,f.title]},this.props.title),n.createElement(S.BodyText,{size:S.BodyTextSize.SmallDeprecated,style:f.description},this.props.description)),e,t))}}t.default=y},54360:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FullScreenLoadingDialog=t.getFullScreenLoadingDialog=void 0;const n=i(16778),o=i(47204),s=i(11411),a=(i(71445),i(18037));t.getFullScreenLoadingDialog="getFullScreenLoadingDialog";t.FullScreenLoadingDialog=class{static show(e,t,i){let r;r=n.createElement(s.default,{key:"appFullScreenDialog",statusText:e.dialogText,showSpinner:e.showActivityIndicator,showLoginFallback:!1,loginCallback:()=>{},isPartnerFlow:!0,darkThemeEnabled:a.default.useDarkThemeNoSubscription()}),o.default.showModal(r,e.dialogId,{rootViewId:t,useFocussedWindowFallback:i})}static dismiss(e,t){o.default.dismissModal(e,t)}static isDisplayed(e,t){return o.default.isModalDisplayed(e,t)}}},9238:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74958),o=i(96486),s=i(16778),a=i(74634),r=i(47261),l=i(81878),c=i(89391),d=i(96074),u=i(98278),g=i(4336),h=i(72822),p=i(46096),m=i(36237),S=i(15877),C=i(33754),f=i(18065),y=i(4735),_=i(21090),v=i(94021),b=i(29130),T=i(40363),P=i(57981),A=i(80837),k=i(60305),I=i(24576),w=i(53374),N=i(30124),M=(0,S.lazyProperties)({splitInnerContainer:()=>s.Styles.createViewStyle({flex:1,flexDirection:"row"}),masterContainer:()=>s.Styles.createViewStyle({width:g.DefaultSplitMasterWidth,borderRightWidth:1}),masterContainerNativeBase:()=>s.Styles.createViewStyle({width:g.DefaultSplitMasterWidth,borderRightWidth:1,flexGrow:1})}),E=r.StyleSheet.create({masterView:{flexShrink:1,flexGrow:0},leftCloseButton:{left:12,right:"auto"}});class x extends I.default{constructor(){super(...arguments),this._childProps={onAccessibilityTitleChange:e=>{this.isComponentMounted()&&this.state.title!==e&&this.setState({title:e})}},this._closeAnimationEvent=new a.default,this._willResetFocus=()=>{this._masterContextContainerRef&&this._masterContextContainerRef.setFocusLimited(!0)},this._didResetFocus=()=>{this._masterContextContainerRef&&this._masterContextContainerRef.setFocusLimited(!1)},this._onClickOutside=()=>{this.state.activeDetailContext&&this.state.activeDetailContext.state.isFirstLogin?this._onboardingFlowClickedOutsideTracked||(this._onboardingFlowClickedOutsideTracked=!0,m.track(new v.SetupWizardClickedOutside(h.DialogNavOrigin.Onboarding))):(m.log(p.LogTraceArea.Navigation,"GenericDesktopModal._onAnimateCloseModal"),this._closeAnimationEvent.fire(this._onCloseModal))},this._onCloseModal=()=>{const e=w.default.newCauseId();m.log(p.LogTraceArea.Navigation,"GenericDesktopModal._onCloseModal causeId: "+e),y.default.closeGenericDesktopModal(e,this._getRootViewId())},this._onResetFocus=()=>{this._modalRef&&this._modalRef.resetFocus()},this._onMasterContextContainerRef=e=>{this._masterContextContainerRef=e||void 0},this._onModalRef=e=>{this._modalRef=e||void 0},this._goBack=e=>{const t=1===this.state.modalNavStackSize,i=this.state.animationType===u.SXModalAnimationType.Bottom?this._onClickOutside:void 0;return m.log(p.LogTraceArea.Navigation,"GenericDesktopModal._goBack isAloneInNavStack: "+t+" closeModal: "+!!i+" causeId: "+e),!(!t||!i)&&(i(),!0)}}_buildState(e,t){let i,n;const s=!1,a=c.default.getS4LUiFeatures().enableNativeBaseModals;e.activeModalSplitContext?(i=o.last(e.activeModalSplitContext.getNavStack()),n=e.activeModalSplitContext.getMasterContext(s)):(i=void 0,n=void 0);const r=k.default.useTabletUI(),l=this._getRootViewId();return{isMobileScreenSize:N.default.isUsingMobileSplitView()||b.default.isMobileScreenSize(l),animationType:r?u.SXModalAnimationType.Bottom:u.SXModalAnimationType.Default,modalNavStackSize:e.activeModalSplitContext?e.activeModalSplitContext.getNavStack().length:0,activeDetailContext:i,activeMasterContext:n,nativeModalWindow:s,enableNativeBaseModals:a}}componentDidMount(){super.componentDidMount();const e=_.modalNavigatorIdForRootViewId(this._getRootViewId()),t=w.default.newCauseId();m.log(p.LogTraceArea.Navigation,"GenericDesktopModal.componentDidMount navigatorId: "+n.pii.Omit(e)+" causeId: "+t),y.default.collapseSplitNavContext(e,this.state.isMobileScreenSize,t),this._masterContextContainerRef&&!this.state.nativeModalWindow&&this._masterContextContainerRef.setFocusLimited(!1)}UNSAFE_componentWillUpdate(e,t,i){if(super.UNSAFE_componentWillUpdate(e,t,i),t.isMobileScreenSize!==this.state.isMobileScreenSize){const e=_.modalNavigatorIdForRootViewId(this._getRootViewId()),i=w.default.newCauseId();m.log(p.LogTraceArea.Navigation,"GenericDesktopModal.UNSAFE_componentWillUpdate navigatorId: "+n.pii.Omit(e)+" causeId: "+i),y.default.collapseSplitNavContext(e,t.isMobileScreenSize,i)}}render(){const e=this._renderMasterFromNavContext(this.state.activeMasterContext),t=!!(null==e?void 0:e.content),i=this._renderDetailFromNavContext(this.state.activeDetailContext,t,this._childProps),n=i?i.component:void 0,o=(i?i.title:void 0)||this.state.title||C.getString("Global.DialogAccessibilityLabel");let a=g.DefaultHeight,r=e?g.DefaultSplitViewWidth:g.DefaultWidth;this.state.activeDetailContext&&this.state.activeDetailContext.state&&(this.state.activeDetailContext.state.customizedWidth&&(r=this.state.activeDetailContext.state.customizedWidth),this.state.activeDetailContext.state.customizedHeight&&(a=this.state.activeDetailContext.state.customizedHeight));const u=this.state.activeDetailContext&&this.state.activeDetailContext.state.isFirstLogin;let h,p=!0;if((null==e?void 0:e.content)?(h=this.state.enableNativeBaseModals?s.createElement(l.HStack,{flex:1},s.createElement(l.ScrollView,{style:E.masterView,_contentContainerStyle:{flexGrow:1}},e.content),s.createElement(l.ScrollView,{flex:1,_contentContainerStyle:{flexGrow:1}},n)):s.createElement(s.View,{style:M.splitInnerContainer},e.content,n),p=!1):h=n,h=s.createElement(d.BaseNavigationWrapper,{isPresentedInGenericDesktopModal:!0,isPresentedInDesktopSubview:!0,isPresentedInSplitView:t,goBack:this._goBack},null!=h?h:null),(null==e?void 0:e.content)&&this.state.enableNativeBaseModals){const t=52,i=c.default.getS4LUiFeaturesNoSubscription().enableWindowRightClose&&!T.default.isWindowCloseOnRight()?E.leftCloseButton:void 0;return s.createElement(l.Modal,{defaultIsOpen:!0,onClose:this._onCloseModal,avoidKeyboard:u},s.createElement(l.Modal.Content,{width:r,maxWidth:r},s.createElement(l.Modal.CloseButton,{color:this._getContext().themeColors.headerTextColor,style:i,_focusVisible:{style:i},accessibilityLabel:C.getString("Global.CloseButtonTitle")}),s.createElement(l.Modal.Header,{height:t,_text:{fontWeight:"bold",color:this._getContext().themeColors.primaryTextColor,textAlign:"center"},backgroundColor:this._getContext().themeColors.primaryBackgroundColor},null==e?void 0:e.title),s.createElement(l.Modal.Body,{padding:0,_scrollview:{scrollEnabled:p,width:r,maxHeight:a-t},width:r,maxHeight:a-t,backgroundColor:this._getContext().themeColors.primaryBackgroundColor},s.createElement(l.Box,{width:r,height:a-t},h))))}return s.createElement(P.default,{ref:this._onModalRef,modalWidth:r,modalHeight:a,onClickOutside:this._onClickOutside,closeAnimationEvent:this._closeAnimationEvent,fullSize:this.state.isMobileScreenSize,modalTitle:o,animationType:this.state.animationType,showOverflow:this.props.showOverflow,skipEscHandling:u,willResetFocus:this._willResetFocus,didResetFocus:this._didResetFocus,showTitlebar:!(!(null==e?void 0:e.content)||!n),title:null==e?void 0:e.title,close:this._onClickOutside},s.createElement(s.View,{style:A.default.flexOne},h))}_renderDetailFromNavContext(e,t,i){if(!e)return;const n=Object.assign(Object.assign({},i),{isAloneInNavStack:1===this.state.modalNavStackSize,closeModal:this.state.animationType===u.SXModalAnimationType.Bottom?this._onClickOutside:void 0,isPresentedInSplitView:this._getContext().isPresentedInSplitView});return f.default.renderComponent(e,n)}_renderMasterFromNavContext(e){if(!e)return;const t={closeModal:this.state.animationType===u.SXModalAnimationType.Bottom?this._onClickOutside:void 0,resetFocus:this._onResetFocus,detailContext:this.props.activeModalSplitContext?this.props.activeModalSplitContext.getNavStack():void 0,isPresentedInSplitView:this._getContext().isPresentedInSplitView},i=f.default.renderComponent(e,t);let n=i?i.component:void 0;if(n){const e=this.state.enableNativeBaseModals?M.masterContainerNativeBase:M.masterContainer;n=s.createElement(s.View,{ref:this._onMasterContextContainerRef,style:[e,this._themeStyles.dividerBorderColorStyle],limitFocusWithin:this.state.nativeModalWindow?void 0:s.Types.LimitFocusType.Limited},n)}return{content:n,title:null==i?void 0:i.title}}}t.default=x},50556:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingDialog=void 0;const n=i(16778),o=i(47204),s=i(98278),a=i(15877),r=i(89808),l=i(15415),c=i(22222),d=i(81760),u=i(19675),g=(0,a.lazyProperties)({modalBackground:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch",alignItems:"center",justifyContent:"center",backgroundColor:d.Color.blackOverlay50}),modal:()=>n.Styles.createViewStyle({backgroundColor:d.Color.white,maxWidth:300,maxHeight:300,borderRadius:8,alignSelf:"center",justifyContent:"center",alignItems:"center",paddingVertical:20}),modalText:()=>n.Styles.createTextStyle({color:d.Color.gray400,alignSelf:"stretch",justifyContent:"center",alignItems:"center",paddingVertical:20,marginHorizontal:20}),button:()=>n.Styles.createButtonStyle({alignSelf:"stretch",justifyContent:"center",alignItems:"center"})});t.LoadingDialog=class{static show(e,t,i){let a,d;e.showActivityIndicator&&(a=n.createElement(l.default,{size:s.SXActivityIndicatorSize.Medium,tintColor:r.default.getPrimaryColorNoSubscription()})),e.showCancelButton&&(d=n.createElement(c.default,{style:g.button,buttonSize:s.SXButtonSize.Medium,buttonStyle:s.SXButtonStyle.DarkFill,title:e.buttonText||"",onPress:e.onButtonPress}));const h=n.createElement(n.View,{style:g.modalBackground},n.createElement(n.View,{style:g.modal,restrictFocusWithin:!0,accessibilityTraits:n.Types.AccessibilityTrait.Dialog,accessibilityLabel:e.dialogText,tabIndex:-1,autoFocus:!0},a,n.createElement(u.BodyText,{style:g.modalText,autoFocus:!1},e.dialogText),d));o.default.showModal(h,e.dialogId,{rootViewId:t,useFocussedWindowFallback:i})}static dismiss(e,t){o.default.dismissModal(e,t)}static isDisplayed(e,t){return o.default.isModalDisplayed(e,t)}}},18065:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(17096),s=i(62477),a=i(96283),r=i(96894),l=i(66964),c=i(66376),d=i(73709),u=i(63531),g=i(23975),h=i(22139),p=i(17517),m=i(95674),S=i(75352),C=i(33204),f=i(62165),y=i(24899),_=i(91848),v=i(4096),b=i(51013),T=i(35517),P=i(53028),A=i(98032),k=i(41260),I=i(92626),w=i(72619),N=i(7095),M=i(17756),E=i(79624),x=i(91e3),L=i(24360),R=i(18946),D=i(32749),B=i(21847),O=i(4336),F=i(57004),V=i(57595),U=i(38558),H=i(57231),W=i(66957),z=i(79274),G=i(94641),K=i(32687),j=i(55898),q=i(46096),Q=i(90135),X=i(95153),J=i(49899),$=i(50035),Y=i(50876),Z=i(65752),ee=i(51424),te=i(34887),ie=i(7593),ne=i(76359),oe=i(78887),se=i(18078),ae=i(17093),re=i(41235),le=i(6855),ce=i(58962),de=i(69197),ue=i(41736),ge=i(62393),he=i(15308),pe=i(34898),me=i(90940),Se=i(26286),Ce=i(70170),fe=i(10250),ye=i(47473),_e=i(34273),ve=i(45695),be=i(28076),Te=i(46999),Pe=i(60180),Ae=i(5327),ke=i(90574),Ie=i(99223),we=i(19865),Ne=i(46337),Me=i(5793),Ee=i(64821),xe=i(20044),Le=i(67164),Re=i(98155),De=i(36061),Be=i(82994),Oe=i(51699),Fe=i(30590),Ve=i(47358),Ue=i(77345),He=i(44699),We=i(59161),ze=i(4335),Ge=i(86766),Ke=i(51793),je=i(57538),qe=i(45092),Qe=i(89391),Xe=i(24793),Je=i(58454),$e=i(93801),Ye=i(82476),Ze=i(80321),et=i(51060);t.default=class{static renderComponent(e,t){let i,tt;if(e instanceof ae.PSTNDialerNavigationContext)i=n.createElement(z.default,{route:{params:Object.assign({callId:e.state.callId,conversationId:e.state.conversationId,prefilledNumber:e.state.prefilledNumber,reopenOnInvalidNumber:e.state.navigationSource===q.DialerNavigationSource.CallFailedInvalidNumber},t)}}),tt=z.default.getHeaderText();else if(e instanceof ae.QuickCallNavigationContext)i=n.createElement(Ce.default,Object.assign({conversationId:e.state.conversationId,callId:e.state.callId,newGroup:e.state.newGroup,searchOnly:e.state.searchOnly},t));else if(e instanceof ae.GetBalanceStateNavigationContext)i=n.createElement(f.default,Object.assign({showHeader:e.state.showHeader,source:e.state.source,scrollTo:e.state.scrollTo},t)),tt=f.default.getHeaderText();else if(e instanceof ae.PurchaseContinuationNavigationContext)i=n.createElement(Se.default,{route:{params:Object.assign({offerType:e.state.offerType,campaignRef:e.state.campaignRef},t)}}),tt=Se.default.getHeaderText(e.state.offerType);else if(e instanceof ae.SubscriptionIntroNavigationContext)i=n.createElement(xe.default,{route:{params:Object.assign({},t)}}),tt=xe.default.getHeaderText();else if(e instanceof ae.CallerIdPromptContext)i=n.createElement(P.default,{route:{params:Object.assign(Object.assign({},e.state),t)}}),tt=P.default.getHeaderText();else if(e instanceof ae.CallFailurePromptContext)i=n.createElement(A.default,{route:{params:Object.assign({dialogId:"pstnDialog",phoneNumber:e.state.phoneNumber,reason:e.state.reason},t)}}),tt=A.default.getHeaderText();else if(e instanceof ae.SmsFailurePromptContext)i=n.createElement(Ee.default,{route:{params:Object.assign({dialogId:e.state.dialogId,phoneNumber:e.state.phoneNumber,isSmsInfo:e.state.isSmsInfo},t)}}),tt=Ee.default.getHeaderText(e.state.isSmsInfo);else if(e instanceof ae.TasterPostCallPanelContext)i=n.createElement(Ue.default,{route:{params:Object.assign(Object.assign({},e.state),t)}}),tt=Ue.default.getHeaderText();else if(e instanceof ae.CallFailurePostPurchasePromptContext)i=n.createElement(Xe.CallFailurePostPurchasePromptPanel,{route:{params:Object.assign({dialogId:e.state.dialogId,phoneNumber:e.state.phoneNumber},t)}}),tt=Xe.CallFailurePostPurchasePromptPanel.getHeaderText();else if(e instanceof ae.DesktopSettingsGroupNavigationContext)i=n.createElement(V.default,Object.assign({key:e.state.group,group:e.state.group},t)),e.state.group!==ae.SettingsGroup.AccountAndProfile&&(tt=V.default.getHeaderText(e.state.group,!!t.isPresentedInSplitView));else if(e instanceof ae.ManageUsersSettingsPanelNavigationContext)i=n.createElement(te.default,{route:{params:Object.assign({},t)}}),tt=te.default.getHeaderText();else if(e instanceof ae.MySettingsNavigationContext)i=n.createElement(F.default,Object.assign({},t));else if(e instanceof ae.DesktopCloseAccountNavigationContext)i=n.createElement(Ye.default,Object.assign({},t)),tt=Ye.default.getHeaderText();else if(e instanceof ae.CreateConversationNavigationContext)i=n.createElement(Ge.default,{route:{params:Object.assign(Object.assign(Object.assign({},t),e.state),{navigator:e.navigator})}}),tt=Ge.default.getHeaderText(e.navigator.context.navigationOrigin===q.NavigationConversationOrigin.NewModeratedGroup);else if(e instanceof ae.ReportConcernNavigationContext)i=n.createElement(ye.default,{route:{params:Object.assign(Object.assign({},e.state),t)}}),tt=ye.default.getHeaderText();else if(e instanceof ae.ConversationParticipantsNavigationContext)i=n.createElement(Pe.default,{key:`setconvparticipants${e.state.isSuperComposer}`,route:{params:Object.assign(Object.assign(Object.assign({},t),e.state),{navigator:e.navigator})}});else if(e instanceof ae.DetailsNavigationContext)i=n.createElement(H.DetailsPanel,{key:"details",route:{params:Object.assign({mri:e.state.mri,conversationId:e.state.conversationId,showConversationSettings:e.state.showConversationSettings,origin:e.state.origin||W.DetailsPanelOrigin.Unknown},t)}});else if(e instanceof ae.ChatConfigNavigationContext)i=n.createElement(k.default,{key:"chatSettings",route:{params:Object.assign(Object.assign({},t),e.state)}}),tt=k.default.getHeaderText();else if(e instanceof ae.BotsListNavigationContext)i=n.createElement(g.default,Object.assign({filterFunction:e.state.filterBotsFunction,showHeader:!0,sortByProperty:e.state.sortBotsByProperty,title:e.state.botMarketplaceTitle},t));else if(e instanceof ae.BotDiscoveryNavigationContext)i=n.createElement(u.default,{route:{params:Object.assign({},t)}}),tt=u.default.getHeaderText();else if(e instanceof ae.ShareContactsToConversationContext)i=n.createElement(Ae.default,{key:"shareContactsToConversation",route:{params:Object.assign(Object.assign({},t),e.state)}}),tt=e.state.panelTitle;else if(e instanceof ae.ShareWithPanelNavigationContext)i=n.createElement(ke.default,Object.assign({key:"shareWithPanel",multipleMessagesParameters:e.state.multipleMessagesParameters,onShareComplete:e.state.onShareComplete,onPostComplete:e.state.onPostComplete,shareMessageTitle:e.state.shareMessageTitle,accessibilityLabelTitle:e.state.accessibilityLabelTitle,onShareCancel:e.state.onShareCancel,userMrisToExclude:e.state.userMrisToExclude,enableMediaPreview:e.state.enableMediaPreview,sharePreviewType:e.state.sharePreviewType,showForwardPreview:e.state.showForwardPreview,entryPoint:e.state.entryPoint},t));else if(e instanceof ae.CaptivePortalQuestionnaireContext)i=n.createElement(M.default,{key:"captivePortalQuestionnaire",route:{params:Object.assign({},t)}}),tt=M.default.getHeaderText();else if(e instanceof ae.PesSearchNavigationContext)e.state.searchType===ce.TabType.Emoticon?i=n.createElement(K.default,{searchType:e.state.searchType,conversationId:e.state.conversationId,onMessageSent:e.state.onMessageSent,onCloseSearch:e.state.onCloseSearch,clearEditInChatsComposer:e.state.clearEditInChatsComposer}):e.state.searchType===ce.TabType.Moji?i=n.createElement(ne.default,{searchType:e.state.searchType,conversationId:e.state.conversationId}):e.state.searchType===ce.TabType.ChatSticker&&(i=n.createElement(De.default,{searchType:e.state.searchType,conversationId:e.state.conversationId}));else if(e instanceof ae.UserProfileContext)i=n.createElement(ze.default,{route:{params:Object.assign({origin:e.state.origin,closeButtonIcon:e.state.closeButtonIcon,scenarioNavigator:e.state.scenarioNavigator},t)}});else if(e instanceof ae.ThemeContext)i=n.createElement(Ve.default,{route:{params:Object.assign({origin:e.state.origin,hideSkipButton:e.state.hideSkipButton,hideCloseButton:e.state.hideCloseButton,isFirstLogin:e.state.isFirstLogin,closeButtonIcon:e.state.closeButtonIcon,nextButtonIcon:e.state.nextButtonIcon,scenarioNavigator:e.state.scenarioNavigator},t)}}),tt=Ve.default.getHeaderText();else if(e instanceof ae.InviteLinkQRPanelNavigationContext)i=n.createElement(X.default,{route:{params:Object.assign(Object.assign({},e.state),t)}}),tt=X.default.getHeaderText();else if(e instanceof ae.AVSettingsContext){const o=e.state.settingsMode||S.SettingsMode.All;i=n.createElement(m.default,Object.assign({key:o,origin:e.state.origin,hideSkipButton:!!e.state.hideSkipButton,isFirstLogin:!!e.state.isFirstLogin,hideCloseButton:!!e.state.hideCloseButton,closeButtonIcon:e.state.closeButtonIcon,nextButtonIcon:e.state.nextButtonIcon,scenarioNavigator:e.navigator,settingsMode:o},t)),tt=m.default.getHeaderText(o)}else if(e instanceof ae.ChooseAvatarContext)i=n.createElement(p.default,{route:{params:Object.assign({origin:e.state.origin,hideSkipButton:e.state.hideSkipButton,isFirstLogin:e.state.isFirstLogin,hideCloseButton:e.state.hideCloseButton,closeButtonIcon:e.state.closeButtonIcon,nextButtonIcon:e.state.nextButtonIcon,scenarioNavigator:e.state.scenarioNavigator,showCaptureViewFirst:e.state.showCaptureViewFirst},t)}});else if(e instanceof ae.ChooseAvatarCommonPickerContext)i=n.createElement(h.default,{route:{params:Object.assign({origin:e.state.origin,hideSkipButton:e.state.hideSkipButton,isFirstLogin:e.state.isFirstLogin,hideCloseButton:e.state.hideCloseButton,closeButtonIcon:e.state.closeButtonIcon,nextButtonIcon:e.state.nextButtonIcon,scenarioNavigator:e.state.scenarioNavigator,showCaptureViewFirst:e.state.showCaptureViewFirst},t)}});else if(e instanceof ae.ContactsPanelV2NavigationContext)i=n.createElement(x.default,Object.assign({initialTab:e.state.currentTab},t)),tt=x.default.getHeaderText();else if(e instanceof ae.AddContactPanelNavigationContext)i=n.createElement(a.default,{route:{params:Object.assign(Object.assign({},t),e.state)}}),tt=a.default.getHeaderText();else if(e instanceof ae.DesktopMsaPhoneAccrualNavigationContext)i=n.createElement(oe.default,Object.assign({phoneNumber:e.state.phoneNumber,email:e.state.email,isEmailAccrual:e.state.isEmailAccrual},t));else if(e instanceof ae.SearchNavigationContext)i=n.createElement(ve.default,{route:{params:Object.assign({searchPanelInitiator:e.state.searchOrigin,isPresentedInModal:!0,modalTitle:e.state.modalTitle},t)}});else if(e instanceof ae.CallingSettingsEntryNavigationContext)i=n.createElement(R.DesktopCallingSettingsWebPanel,Object.assign({},t,{link:e.state.link,source:e.state.source,title:e.state.title,goTarget:e.state.goTarget,enableWebViewBackNavigation:e.state.enableWebViewBackNavigation,titleAccessibilityRegion:e.state.titleAccessibilityRegion}));else if(e instanceof ae.SkypeNumberWebFlowNavigationContext)i=n.createElement(Ze.default,{route:{params:Object.assign(Object.assign({},e.state),t)}});else if(e instanceof ae.Payments3dsNavigationContext)i=n.createElement(le.default,{route:{params:Object.assign(Object.assign({},e.state),t)}}),tt=le.default.getHeaderText();else if(e instanceof ae.SkypeNumberListNavigationContext)i=n.createElement(we.default,{route:{params:Object.assign({},t)}}),tt=we.default.getHeaderText();else if(e instanceof ae.SkypeNumberPanelPurchaseFlowNavigationContext)i=n.createElement(Me.default,{route:{params:Object.assign({},t)}}),tt=Me.default.getHeaderText();else if(e instanceof ae.CallingSettingsPanelNavigationContext)i=n.createElement(N.default,{route:{params:Object.assign({},t)}}),tt=N.default.getHeaderText();else if(e instanceof ae.BackgroundEffectsSettingsNavigationContext)i=n.createElement(C.default,Object.assign({},t)),tt=N.default.getHeaderText();else if(e instanceof ae.CallerIdCallingSettingsPanelNavigationContext)i=n.createElement(w.default,{route:{params:Object.assign({},t)}}),tt=w.default.getHeaderText();else if(e instanceof ae.CallerIdNumberCallingSettingsPanelNavigationContext)i=n.createElement(I.default,{route:{params:Object.assign({},t)}}),tt=I.default.getHeaderText();else if(e instanceof ae.CallCaptionsSettingsPanelNavigationContext)i=n.createElement(et.default,{route:{params:Object.assign(Object.assign({},e.state),t)}}),tt=et.default.getHeaderText();else if(e instanceof ae.AdvancedCallingSettingsPanelNavigationContext)i=n.createElement(d.default,{route:{params:Object.assign({},t)}}),tt=d.default.getHeaderText();else if(e instanceof ae.SubtitlesCallingSettingsPanelNavigationContext)i=n.createElement(Be.default,{route:{params:Object.assign({},t)}}),tt=Be.default.getHeaderText();else if(e instanceof ae.TranslationSettingsPanelNavigationContext)i=n.createElement(We.default,{route:{params:Object.assign({},t)}}),tt=We.default.getHeaderText();else if(e instanceof ae.CallRosterNavigationContext)i=n.createElement(_.default,{key:"CallRosterPanel",route:{params:Object.assign({conversationId:e.state.conversationId,callId:e.state.callId},t)}}),tt=_.default.getHeaderText();else if(e instanceof ae.BingBackgroundNavigationContext)i=n.createElement(y.default,{key:"BingBackgroundsPanel",route:{params:Object.assign({callId:e.state.callId},t)}}),tt=_.default.getHeaderText();else if(e instanceof ae.AddToCallNavigationContext)i=n.createElement(Ce.default,Object.assign({key:"quickCallPanel",conversationId:e.state.conversationId,callId:e.state.callId,searchOnly:e.state.searchOnly,addToCallTelemetryOrigin:e.state.origin,newGroup:e.state.newGroup},t));else if(e instanceof ae.DiagnosticToolsNavigationContext)i=n.createElement(J.default,{route:{params:{}}}),tt=J.default.getHeaderText();else if(e instanceof ae.SendDiagnosticLogsNavigationContext)i=n.createElement(Te.default,{route:{params:Object.assign({},t)}}),tt=Te.default.getHeaderText();else if(e instanceof ae.BlockedUsersListNavigationContext)i=n.createElement(b.default,{route:{params:Object.assign({},t)}}),tt=b.default.getHeaderText();else if(e instanceof ae.ConnectedUsersListNavigationContext)i=n.createElement(E.default,{route:{params:Object.assign({},t)}}),tt=E.default.getHeaderText();else if(e instanceof ae.ProfilePicturePanelNavigationContext)i=n.createElement(pe.default,{route:{params:Object.assign({},t)}}),tt=pe.default.getHeaderText();else if(e instanceof ae.SyncAddressBookContext)i=n.createElement(Oe.default,Object.assign({origin:e.state.origin,hideSkipButton:e.state.hideSkipButton,hideCloseButton:e.state.hideCloseButton,isFirstLogin:e.state.isFirstLogin,closeButtonIcon:e.state.closeButtonIcon,nextButtonIcon:e.state.nextButtonIcon,scenarioNavigator:e.state.scenarioNavigator,compositeNavContainerWidth:O.DefaultWidth},t));else if(e instanceof ae.PeopleYouMayKnowNoticeContext)i=n.createElement(re.default,{route:{params:Object.assign({origin:e.state.origin,hideSkipButton:e.state.hideSkipButton,hideCloseButton:e.state.hideCloseButton,isFirstLogin:e.state.isFirstLogin,closeButtonIcon:e.state.closeButtonIcon,nextButtonIcon:e.state.nextButtonIcon,scenarioNavigator:e.state.scenarioNavigator,compositeNavContainerWidth:O.DefaultWidth},t)}}),tt=re.default.getHeaderText();else if(e instanceof ae.TelemetryConsentContext)i=n.createElement(Fe.default,{route:{params:Object.assign({origin:e.state.origin,hideSkipButton:e.state.hideSkipButton,hideCloseButton:e.state.hideCloseButton,isFirstLogin:e.state.isFirstLogin,closeButtonIcon:e.state.closeButtonIcon,nextButtonIcon:e.state.nextButtonIcon,scenarioNavigator:e.state.scenarioNavigator,compositeNavContainerWidth:O.DefaultWidth},t)}}),tt=Fe.default.getHeaderText();else if(e instanceof ae.PnvEnterNumberContext)i=n.createElement(ue.default,Object.assign({initialPhoneNumber:e.state.phoneNumber,compositeNavContainerWidth:O.DefaultWidth},t));else if(e instanceof ae.PnvEnterCodeContext)i=n.createElement(de.default,Object.assign({compositeNavContainerWidth:O.DefaultWidth},t));else if(e instanceof ae.FeatureFlagListNavigationContext)i=n.createElement($.default,{route:{params:{}}});else if(e instanceof ae.SlimcoreFlagListNavigationContext)i=n.createElement(Le.default,{route:{params:Object.assign({},t)}});else if(e instanceof ae.RawPreferencesNavigationContext)i=n.createElement(fe.default,{route:{params:{}}});else if(e instanceof ae.LanguagePickerPanelNavigationContext)i=n.createElement(Y.default,{route:{params:Object.assign({},t)}}),tt=Y.default.getHeaderText();else if(e instanceof ae.ManageSearchInfoPanelNavigationContext)i=n.createElement(ee.default,{route:{params:Object.assign(Object.assign({},t),{origin:e.state.origin})}});else if(e instanceof ae.LoadingPanelNavigationContext)i=n.createElement(Z.default,{message:e.state.message});else if(e instanceof ae.PSTNCountrySelectorNavigationContext)i=n.createElement(L.default,{route:{params:Object.assign({onCountrySelected:e.state.onCountrySelected,countriesFiltered:e.state.countriesFiltered,hideRecentCountries:e.state.hideRecentCountries,searchAutoFocus:e.state.searchAutoFocus},t)}}),tt=L.default.getHeaderText();else if(e instanceof ae.SkypeNumberCountryAreaSelectorNavigationContext)i=n.createElement(Ie.default,{route:{params:Object.assign({onCountryAreaSelected:e.state.onCountryAreaSelected},t)}}),tt=Ie.default.getHeaderText();else if(e instanceof ae.SkypeNumberPrefixSelectorNavigationContext)i=n.createElement(Ne.default,{route:{params:Object.assign({onPrefixSelected:e.state.onPrefixSelected},t)}}),tt=Ne.default.getHeaderText();else if(e instanceof ae.ThirdPartyNoticesNavigationContext)i=n.createElement(He.default,{route:{params:Object.assign({},t)}}),tt=He.default.getHeaderText();else if(e instanceof ae.PromptPermissionContext)i=n.createElement(he.default,{route:{params:Object.assign({origin:e.state.origin,showUIPrompts:!0,scenarioNavigator:e.state.scenarioNavigator,hideCloseButton:e.state.hideCloseButton},t)}});else if(e instanceof ae.SettingsMenuContext)i=n.createElement(U.default,Object.assign({title:e.state.title},t)),tt=U.default.getHeaderText();else if(e instanceof ae.ActiveNowPanelNavigationContext)i=n.createElement(s.default,{route:{params:Object.assign(Object.assign({},t),e.state)}}),tt=s.default.getHeaderText();else if(e instanceof ae.InviteShareNavigationContext)i=n.createElement(me.default,{route:{params:Object.assign({skypeMri:e.state.skypeMri,displayName:e.state.displayName,origin:e.state.origin},t)}}),tt=me.default.getHeaderText();else if(e instanceof ae.ConversationShareNavigationContext)i=n.createElement($e.ConversationInviteSharePanel,{route:{params:Object.assign({skypeMri:e.state.skypeMri,displayName:e.state.displayName,origin:e.state.origin},t)}}),tt=$e.ConversationInviteSharePanel.getHeaderText();else if(e instanceof ae.GuestUpsellNavigationContext)i=n.createElement(Q.default,{route:{params:Object.assign(Object.assign({},e.state),t)}}),tt=Q.default.getHeaderText();else if(e instanceof ae.AddPhoneNumberPanelNavigationContext)i=n.createElement(c.default,{route:{params:Object.assign(Object.assign({},t),e.state)}}),tt=c.default.getHeaderText(e.state.origin);else if(e instanceof ae.EngagementSharePanelContext)i=n.createElement(j.default,{key:"engagementSharePanel",route:{params:Object.assign({onShareComplete:e.state.onShareComplete,onPostComplete:e.state.onPostComplete,onShareCancel:e.state.onShareCancel,shareableContentConfigs:e.state.shareableContentConfigs,accessibilityLabelTitle:e.state.accessibilityLabelTitle,userMrisToExclude:e.state.userMrisToExclude},t)}});else if(e instanceof ae.MeControlNavigationContext)i=n.createElement(B.default,Object.assign({key:"DesktopMeControlPanel",userMri:se.default.getSkypeMri(),isMoodMessageEditMode:e.state.isMoodMessageEditMode},t));else if(e instanceof _e.default.NavigationContext.ScheduleCallNavigationContext)tt=_e.default.StackNavigator.getHeaderText(),i=_e.default.StackNavigator.renderSceneContent(e,t);else if(e instanceof ie.default.NavigationContext.MeetNowNavigationContext)tt=ie.default.StackNavigator.getHeaderText(),i=ie.default.StackNavigator.renderSceneContent(e);else if(e instanceof ge.default.NavigationContext.PollCreationPanelNavigationContext||e instanceof ge.default.NavigationContext.PollSummaryPanelNavigationContext||e instanceof ge.default.NavigationContext.PollVotersListPanelNavigationContext)i=ge.default.StackNavigator.renderSceneContent(e,t),tt=ge.default.StackNavigator.getHeaderText();else if(e instanceof l.OneDriveAddinPanelNavigationContext)tt=e.state.integration.name,i=r.default.AddinStackNavigator.renderSceneContent(e,t);else if(e instanceof ae.LocationPickerContext)tt=D.default.getHeaderText(),i=n.createElement(D.default,Object.assign({conversationId:e.state.conversationId,displayInModal:!0},t));else if(e instanceof ae.InAppBrowserNavigationContext)i=n.createElement(T.default,{route:{params:Object.assign(Object.assign({},e.state),t)}});else if(e instanceof ae.CallingDebugPanelNavigationContext)i=n.createElement(v.default,{route:{params:{callId:e.state.callId||"",nativeWindow:e.state.nativeWindow||!1}}});else if(e instanceof ae.CustomReactionsPanelNavigationContext)i=n.createElement(Je.default,{route:{params:Object.assign(Object.assign({},t),e.state)}});else if(e instanceof ae.SpeechConsentNavigationContext)i=n.createElement(Re.default,{route:{params:Object.assign({},t)}});else if(e instanceof ae.SendCreditPanelNavigationContext)i=n.createElement(be.default,{route:{params:Object.assign({},t)}}),tt=be.default.getHeaderText();else if(e instanceof ae.E911AcknowledgementPanelNavigationContext)i=n.createElement(G.default,{route:{params:Object.assign({shouldSkipLocationConsent:e.state.shouldSkipLocationConsent,onComplete:e.state.onComplete},t)}}),tt=G.default.getHeaderText();else if(e instanceof ae.TwinCamModalContext)i=n.createElement(o.default,{route:{params:Object.assign({callId:e.state.callId,conversationMri:e.state.conversationMri,onStopTwinCamPressed:e.state.onStopTwinCamPressed},t)}}),tt=o.default.getHeaderText();else if(e instanceof ae.CallPreviewNavigationContext){const t=Qe.default.getS4LCMCFeaturesNoSubscription(),o=t.redesignedLobbiesEnabled,s=t.enableCallPreviewPermissionOnLoad;i=o?n.createElement(Ke.default,{meetNowParameters:{origin:je.MeetNowOrigin.JoinLobby,convId:e.state.conversationMri},isCallPreviewLobby:!0}):n.createElement(qe.default,{dialogId:"CallPreview",conversationMri:e.state.conversationMri,activeCallId:e.state.activeCallId,callOrigin:e.state.callOrigin,isGoLive:e.state.isGoLive,isTwinCam:e.state.isTwinCam,isModal:!0,permissionAlreadyAsked:s,skipPermissionPanel:e.state.skipPermissionPanel,isNewCallPreviewStyle:!1})}return i?{component:i,title:tt}:void 0}}},46880:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(96074),s=i(3056),a=i(98278),r=i(46096),l=i(36237),c=i(15877),d=i(28159),u=i(72136),g=i(25313),h=i(89871),p=i(15415),m=i(81760),S=i(11010),C=i(11828),f=i(19675),y=i(53374),_=(0,c.lazyProperties)({spinner:()=>n.Styles.createViewStyle({position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:m.Color.transparent,justifyContent:"center",alignItems:"center",alignSelf:"stretch"}),textInput:()=>n.Styles.createTextInputStyle({padding:6,borderRadius:10,font:S.default.font.uiDisplayRegular,fontSize:S.default.controlFontSize.body,backgroundColor:m.Color.gray100,color:m.Color.black,marginLeft:50,marginRight:50,height:32,textAlignVertical:"top"}),statusLabel:()=>n.Styles.createTextStyle({color:m.Color.white,paddingHorizontal:20,marginTop:50}),errorText:()=>n.Styles.createTextStyle({color:m.Color.white,paddingHorizontal:20,marginTop:10,alignItems:"center",textAlign:"center"})});class v extends o.default{constructor(){super(...arguments),this._goBack=e=>(l.log(r.LogTraceArea.Navigation,"PnvDebugDialog._goBack,  causeId: "+e),this.props.scenarioNavigator?(this.props.scenarioNavigator.goBack(),!0):super._goBack(e)),this._onCloseButtonClicked=()=>{const e=y.default.newCauseId();l.log(r.LogTraceArea.Navigation,"PnvDebugDialog._onCloseButtonClicked,  causeId: "+e),this._goBack(e)},this._onSkipButtonClicked=()=>{const e=y.default.newCauseId();l.log(r.LogTraceArea.Navigation,"PnvDebugDialog._onSkipButtonClicked,  causeId: "+e),this.props.scenarioNavigator?this.props.scenarioNavigator.goNext():this.props.onNextButtonPressed?this.props.onNextButtonPressed():this._goBack(e)},this._onChangeText=e=>{this.setState({phoneNumber:e})},this._onPressNextButton=e=>{e.stopPropagation();const t=y.default.newCauseId();if(l.log(r.LogTraceArea.Navigation,"PnvDebugDialog._onPressNextButton,  causeId: "+t),this.state.removalExecuted)this._goBack(t);else{this.setState({removalInProgress:!0});const e=u.default.getCountryByCode(this.state.countryIsoCode.toLowerCase()),t=e?e.countryCode:1;g.default.removePhoneFromProfile(this.state.phoneNumber,this.state.countryIsoCode,t.toString()).then((e=>{this.isComponentMounted()&&this.setState({errorCode:e})})).finally((()=>{this.isComponentMounted()&&this.setState({removalInProgress:!1,removalExecuted:!0})}))}}}componentDidMount(){super.componentDidMount(),h.default.initializeCountrySelection()}_buildState(e,t){let i={},n=g.default.getLastPhoneVerificationStatus();if(i.phoneNumber=n.PhoneNumber,i.countryIsoCode=n.CountryIsoCode,i.countryCallingCode=n.CountryCallingCode,i.errorCode=n.ErrorCode,!this.state||!this.state.countryIsoCode){const e=h.default.getSelectedCountry();e&&(i.countryIsoCode=e.country)}return i}render(){const e=this.state.removalInProgress?n.createElement(n.Button,{style:_.spinner},n.createElement(p.default,{size:a.SXActivityIndicatorSize.Medium,tintColor:m.Color.white})):void 0,t=this.state.removalExecuted?void 0:n.createElement(n.TextInput,{style:_.textInput,value:this.state.phoneNumber,multiline:!1,blurOnSubmit:!0,keyboardType:"numeric",onChangeText:this._onChangeText,clearButtonMode:"never"}),i=n.createElement(f.Header,{size:a.HeaderSize.h5,style:_.statusLabel,importantForAccessibility:n.Types.ImportantForAccessibility.Yes},"Last Error Code:"),o=n.createElement(f.BodyText,{bold:!0,style:_.errorText,importantForAccessibility:n.Types.ImportantForAccessibility.Yes},this.state.errorCode?this.state.errorCode:"Success");return n.createElement(s.default,{goBack:this._goBack},n.createElement(d.default,{headerText:"PNV Debug Tool",descriptionElement:"Remove your registered number from your profile",hideSkipButton:this.props.hideSkipButton,nextButtonIcon:this.props.nextButtonIcon||C.SkypeIcon.Ok,hideCloseButton:this.props.hideCloseButton,closeButtonIcon:this.props.closeButtonIcon,onSkipButtonClicked:this._onSkipButtonClicked,onNextButtonClicked:this._onPressNextButton,onCloseButtonClicked:this._onCloseButtonClicked,scenarioNavigator:this.props.scenarioNavigator},t,e,i,o))}_componentId(){return"PnvDebugDialog"}}t.default=v},69197:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(31844),s=i(16778),a=i(39696),r=i(67930),l=i(3056),c=i(98278),d=i(46096),u=i(36237),g=i(47126),h=i(15877),p=i(33754),m=i(4735),S=i(28159),C=i(25313),f=i(97822),y=i(26851),_=i(86045),v=i(78780),b=i(81760),T=i(40363),P=i(11010),A=i(11828),k=i(34528),I=i(19675),w=i(12770),N=i(53374),M=i(73877),E=1e3,x="",L="pnvsmsreader",R=(0,h.lazyProperties)({codeContainer:()=>s.Styles.createViewStyle({flexDirection:"row",justifyContent:"center"}),codeInput:()=>s.Styles.createTextInputStyle({padding:6,font:P.default.font.uiDisplayRegular,fontSize:P.default.fontSize.size32,backgroundColor:b.Color.transparent,color:b.Color.white,width:48,height:48,textAlignVertical:"top"}),resendContainer:()=>s.Styles.createViewStyle({flexDirection:"row",justifyContent:"space-between",marginTop:40}),resendButton:()=>s.Styles.createButtonStyle({marginLeft:20,borderRadius:30,backgroundColor:b.Color.black}),callmeButton:()=>s.Styles.createButtonStyle({marginLeft:20,marginTop:20,borderRadius:30,backgroundColor:b.Color.black}),resendButtonText:()=>s.Styles.createTextStyle({color:b.Color.white,padding:5,alignSelf:"center",textAlign:"center"}),timerText:()=>s.Styles.createTextStyle({color:b.Color.white,font:P.default.font.uiDisplayBold,fontSize:P.default.fontSize.size18,alignSelf:"center",marginRight:20}),animationContainer:()=>s.Styles.createViewStyle({height:300,alignSelf:"stretch",alignItems:"center",justifyContent:"center",overflow:"visible"}),errorDescriptionText:()=>s.Styles.createTextStyle({color:b.Color.pink}),descriptionText:()=>s.Styles.createTextStyle({marginBottom:10,color:b.Color.white,paddingHorizontal:20,alignItems:"center",textAlign:"center"})});class D extends r.default{constructor(){super(...arguments),this._automaticallyFocusKeyboardOnce=!1,this._stopWatchTimer=0,this._isSMSReaderRegistered=!1,this._onVerifyingTextContentViewRef=e=>{this._verifyingTextContentView=e||void 0},this._onVerifiedTextContentViewRef=e=>{this._verifiedTextContentView=e||void 0},this._goBack=e=>(u.log(d.LogTraceArea.Navigation,"PnvEnterCodeDialog._goBack, causeId: "+e),!!this.state.verifying||(this.state.verified?this._closeDialog():(this._navigateToPnvEnterNumber(),!0))),this._onOnboardingDialogWizardRef=e=>{if(e){this._onboardingDialogWizard=e;let t=!!this.state&&this.state.verified;this._onboardingDialogWizard.disableNextButton(!t)}},this._onTextInputRefCode1=e=>{this._textInputCode1=e||void 0},this._onTextInputRefCode2=e=>{this._textInputCode2=e||void 0},this._onTextInputRefCode3=e=>{this._textInputCode3=e||void 0},this._onTextInputRefCode4=e=>{this._textInputCode4=e||void 0},this._onCloseButtonClicked=()=>{this._sendScenarioEvent(y.PnvScenarioStep.CodeBack),this._navigateToPnvEnterNumber()},this._onSkipButtonClicked=()=>{this._sendScenarioEvent(y.PnvScenarioStep.CodeSkip),this._goNext()},this._onKeyDown=e=>!(e.keyCode!==g.default.ENTER||!this.state.verified)&&(this._goNext(),!0),this._onChangeTextCode1=e=>{this._textInputCode2&&e.match(/^\d+$/)&&this._textInputCode2.requestFocus(),this._checkToken(e,this.state.code2,this.state.code3,this.state.code4),this.setState({code1:e})},this._onChangeTextCode2=e=>{this._textInputCode3&&e.match(/^\d+$/)&&this._textInputCode3.requestFocus(),this._checkToken(this.state.code1,e,this.state.code3,this.state.code4),this.setState({code2:e})},this._onChangeTextCode3=e=>{this._textInputCode4&&e.match(/^\d+$/)&&this._textInputCode4.requestFocus(),this._checkToken(this.state.code1,this.state.code2,e,this.state.code4),this.setState({code3:e})},this._onChangeTextCode4=e=>{this._checkToken(this.state.code1,this.state.code2,this.state.code3,e),this.setState({code4:e})},this._onKeyPress2=e=>{this._textInputCode1&&e.keyCode===g.default.DELETE&&!this.state.code2&&this._textInputCode1.requestFocus()},this._onKeyPress3=e=>{this._textInputCode2&&e.keyCode===g.default.DELETE&&!this.state.code3&&this._textInputCode2.requestFocus()},this._onKeyPress4=e=>{this._textInputCode3&&e.keyCode===g.default.DELETE&&!this.state.code4&&this._textInputCode3.requestFocus()},this._onSubmitEditing=()=>{this._submitCode(this._getToken())},this._onPressNextButton=e=>{e.stopPropagation(),this._submitCode(this._getToken())},this._onPressResendButton=e=>{e.stopPropagation(),this._resendCode(C.VerificationMethod.SMS),this._sendScenarioEvent(y.PnvScenarioStep.CodeResend)},this._onPressCallmeButton=e=>{e.stopPropagation(),this._resendCode(C.VerificationMethod.Voice),this._sendScenarioEvent(y.PnvScenarioStep.CodeCall)}}_buildState(e,t){let i={},n=C.default.getLastPhoneVerificationStatus();return i.phoneNumber=n.PhoneNumber,i.countryIsoCode=n.CountryIsoCode,i.countryCallingCode=n.CountryCallingCode,i.errorCode=n.ErrorCode,i.verified=n.Verified,t&&n.ThrottleDuration&&n.ThrottleDuration>0&&(i.resendButtonDisabled=!0),n.ErrorCode&&(i.code1="",i.code2="",i.code3="",i.code4="",this._automaticallyFocusKeyboardOnce=!1),i}componentDidMount(){super.componentDidMount(),this.state.resendButtonDisabled&&this._scheduleEnableResendButton(),s.Input.keyDownEvent.subscribe(this._onKeyDown),f.default.canAutoSubmitCode()&&(this._isSMSReaderRegistered=!0,o.default.registerSMSReader(L,(e=>{if(e){let t;n.each(e,(e=>{const i=e.match(/\b[0-9]{4}\b/);i&&1===i.length&&(t=i[0])})),t&&this._submitCode(t,!0)}})))}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),_.default.isMobileScreenReaderEnabled()&&(this._verifyingTextContentView&&this.state.verifying&&!t.verifying&&(this._verifyingTextContentView.requestFocus(),T.default.getPlatformType()===d.PlatformType.Android&&s.Accessibility.announceForAccessibility(p.getString("PhoneNumberVerification.EnterCodeVerifyingText"))),this._verifiedTextContentView&&this.state.verified&&!t.verified&&this._verifiedTextContentView.requestFocus())}_componentDidRender(){if(super._componentDidRender(),!this._getToken()&&this._textInputCode1&&!this._automaticallyFocusKeyboardOnce)if(this._automaticallyFocusKeyboardOnce=!0,_.default.shouldAnnounceForAccessibility()){const e=500;this._textInputCode1.setAccessibilityFocus(),w.default.setTimeout((()=>{this._textInputCode1&&this._textInputCode1.requestFocus()}),e)}else this._textInputCode1.requestFocus()}componentWillUnmount(){super.componentWillUnmount(),this._clearStopWatchTimer(),s.Input.keyDownEvent.unsubscribe(this._onKeyDown),this._isSMSReaderRegistered&&o.default.unregisterSMSReader(L)}_getCodeInputComponent(){const e=s.createElement(s.TextInput,{style:this._isValidCode(this.state.code1)?R.codeInput:[R.codeInput,R.errorDescriptionText],value:this.state.code1,multiline:!1,blurOnSubmit:!0,placeholder:x,placeholderTextColor:b.Color.white,keyboardType:"numeric",accessibilityLabel:p.getString("AccessibilityLabel.EnterCode"),maxLength:1,ref:this._onTextInputRefCode1,onChangeText:this._onChangeTextCode1,onSubmitEditing:this._isPossibleToken(this._getToken())?this._onSubmitEditing:void 0,clearButtonMode:"never"}),t=s.createElement(s.TextInput,{style:this._isValidCode(this.state.code2)?R.codeInput:[R.codeInput,R.errorDescriptionText],value:this.state.code2,multiline:!1,blurOnSubmit:!0,placeholder:x,placeholderTextColor:b.Color.white,keyboardType:"numeric",accessibilityLabel:p.getString("AccessibilityLabel.EnterCode"),maxLength:1,ref:this._onTextInputRefCode2,onKeyPress:this._onKeyPress2,onChangeText:this._onChangeTextCode2,onSubmitEditing:this._isPossibleToken(this._getToken())?this._onSubmitEditing:void 0,clearButtonMode:"never"}),i=s.createElement(s.TextInput,{style:this._isValidCode(this.state.code3)?R.codeInput:[R.codeInput,R.errorDescriptionText],value:this.state.code3,multiline:!1,placeholder:x,placeholderTextColor:b.Color.white,keyboardType:"numeric",accessibilityLabel:p.getString("AccessibilityLabel.EnterCode"),maxLength:1,ref:this._onTextInputRefCode3,onKeyPress:this._onKeyPress3,onChangeText:this._onChangeTextCode3,onSubmitEditing:this._isPossibleToken(this._getToken())?this._onSubmitEditing:void 0,clearButtonMode:"never"}),n=s.createElement(s.TextInput,{style:this._isValidCode(this.state.code4)?R.codeInput:[R.codeInput,R.errorDescriptionText],value:this.state.code4,multiline:!1,placeholder:x,placeholderTextColor:b.Color.white,keyboardType:"numeric",accessibilityLabel:p.getString("AccessibilityLabel.EnterCode"),maxLength:1,ref:this._onTextInputRefCode4,onKeyPress:this._onKeyPress4,onChangeText:this._onChangeTextCode4,onSubmitEditing:this._isPossibleToken(this._getToken())?this._onSubmitEditing:void 0,clearButtonMode:"never"});return s.createElement(s.View,{style:R.codeContainer},e,t,i,n)}_getHeaderText(e){return e.verified||e.verifying?void 0:p.getString("PhoneNumberVerification.EnterCodeHeaderText")}render(){const e=this.props.compositeNavContainerWidth||M.default.measureWindow(this._getRootViewId()).width,t=this.state.verified||this.state.verifying?s.createElement(s.View,{style:R.animationContainer},s.createElement(a.default,{animation:this.state.verified?v.default.ONBOARDING_SYNC_ADDRESSBOOK:v.default.SPLASH_LOADER,loop:!0,shortSide:e})):void 0,i=this.state.verified||this.state.verifying?void 0:this._getCodeInputComponent(),n=this._getHeaderText(this.state);let o,r;this.state.verified||this.state.verifying?o=void 0:this.state.errorCode?(o=p.getString("PhoneNumberVerification.EnterCodeErrorText"),r=R.errorDescriptionText):o=p.getString("PhoneNumberVerification.EnterCodeDescriptionText",{phonenumber:this.state.phoneNumber});const d=this.state.verified?s.createElement(I.Header,{size:c.HeaderSize.h4,style:R.descriptionText,importantForAccessibility:s.Types.ImportantForAccessibility.Yes,ref:this._onVerifiedTextContentViewRef},p.getString("PhoneNumberVerification.NumberVerifiedText")):void 0,u=this.state.verifying?s.createElement(I.Header,{size:c.HeaderSize.h4,style:R.descriptionText,importantForAccessibility:s.Types.ImportantForAccessibility.Yes,ref:this._onVerifyingTextContentViewRef},p.getString("PhoneNumberVerification.EnterCodeVerifyingText")):void 0,g=this.state.verifying?s.createElement(I.BodyText,{style:R.descriptionText},p.getString("PhoneNumberVerification.EnterCodeTakeMinuteText")):void 0,h=this.state.verified||this.state.verifying?void 0:this._getResendComponent(),m=this.state.verifying||this.state.verified,C=this.state.verifying||this.state.verified;return s.createElement(l.default,{goBack:this._goBack},s.createElement(S.default,{headerText:n,descriptionElement:o,descriptionElementStyle:r,hideSkipButton:m,nextButtonIcon:this.props.nextButtonIcon||A.SkypeIcon.Ok,hideCloseButton:C,closeButtonIcon:k.backIcon(),hideNextButton:this.state.verifying,onSkipButtonClicked:this._onSkipButtonClicked,onNextButtonClicked:this._onPressNextButton,onCloseButtonClicked:this._onCloseButtonClicked,ref:this._onOnboardingDialogWizardRef,scenarioNavigator:this.props.scenarioNavigator,disablePresentationAnimation:!0,isContentScrollable:!1},i,t,d,u,g,h))}_getResendComponent(){const e=s.createElement(s.Button,{style:R.resendButton,onPress:this._onPressResendButton,disabled:this.state.resendButtonDisabled},s.createElement(s.Text,{style:[P.default.fontStyle.secondaryButton,R.resendButtonText]},p.getString("PhoneNumberVerification.ResendCodeText"))),t=s.createElement(s.Button,{style:R.callmeButton,onPress:this._onPressCallmeButton,disabled:this.state.resendButtonDisabled},s.createElement(s.Text,{style:[P.default.fontStyle.secondaryButton,R.resendButtonText]},p.getString("PhoneNumberVerification.CallMeText")));return s.createElement(s.View,{style:R.resendContainer},s.createElement(s.View,null,e,t),s.createElement(s.Text,{style:R.timerText,numberOfLines:1},this.state.timerText))}_componentId(){return"PnvEnterCodeDialog"}_navigateToPnvEnterNumber(){this._closeDialog(),m.default.navigateToPnvEnterNumber(void 0,this._getRootViewId())}_closeDialog(){const e=N.default.newCauseId();return u.log(d.LogTraceArea.Navigation,"PnvEnterCodeDialog._closeDialog, causeId: "+e),this.props.scenarioNavigator?(this.props.scenarioNavigator.goBack(),!0):super._goBack(e)}_goNext(){this.props.scenarioNavigator?this.props.scenarioNavigator.goNext():this.props.onNextButtonPressed?this.props.onNextButtonPressed():this._closeDialog()}_isValidCode(e){return!e||e===x||e.match(/^\d+$/)}_checkToken(e,t,i,n){let o=!1;if(e&&t&&i&&n){const s=e+t+i+n;this._isPossibleToken(s)&&(o=!0)}this._onboardingDialogWizard.disableNextButton(!o)}_getToken(){let e="";return this.state.code1&&this.state.code2&&this.state.code3&&this.state.code4&&(e=this.state.code1+this.state.code2+this.state.code3+this.state.code4),e}_isPossibleToken(e){return!!e&&(4===e.length&&e.match(/^\d+$/))}_submitCode(e,t=!1){this._sendScenarioEvent(y.PnvScenarioStep.CodeNext),this.state.verified?this._goNext():C.default.isVerifyingToken(this.state.phoneNumber,this.state.countryIsoCode,this.state.countryCallingCode)||(this.setState({verifying:!0}),C.default.verifyPhoneWithToken(this.state.phoneNumber,this.state.countryIsoCode,this.state.countryCallingCode,e).then((e=>{t&&e.Verified&&w.default.setTimeout((()=>{this.isComponentMounted()&&this._goNext()}),5e3)})).finally((()=>{this.isComponentMounted()&&this.setState({verifying:!1})})))}_scheduleEnableResendButton(){if(this.isComponentMounted()){let e=C.default.getTokenRequestThrottleDurationInMS(),t=this._convertMStoMinutesSeconds(e);this.setState({timerText:t}),this._clearStopWatchTimer(),this._stopWatchTimer=w.default.setInterval((()=>{let i=!0;e-=E,e>0?t=this._convertMStoMinutesSeconds(e):(this._clearStopWatchTimer(),t="",i=!1),this.isComponentMounted()&&this.setState({timerText:t,resendButtonDisabled:i})}),E)}}_clearStopWatchTimer(){this._stopWatchTimer&&(w.default.clearInterval(this._stopWatchTimer),this._stopWatchTimer=0)}_resendCode(e){this.setState({resendButtonDisabled:!0}),C.default.provisionPhoneForVerification(this.state.phoneNumber,this.state.countryIsoCode,this.state.countryCallingCode,e,p.getLocale()).then((e=>{this.isComponentMounted()&&this._textInputCode1&&this._textInputCode1.requestFocus()})).finally((()=>{this._scheduleEnableResendButton()}))}_convertMStoMinutesSeconds(e){const t=Math.floor(e/6e4),i=Math.floor((e-6e4*t)/E);let n=i<10?":0":":";return t.toString()+n+i.toString()}_sendScenarioEvent(e){this.state.verified||this.state.verifying||y.default.get().markStep(e)}}t.default=D},41736:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(31844),o=i(16778),s=i(39696),a=i(96074),r=i(3056),l=i(47204),c=i(98278),d=i(17456),u=i(37490),g=i(46096),h=i(39285),p=i(10117),m=i(36237),S=i(15877),C=i(33754),f=i(4735),y=i(30124),_=i(28159),v=i(72136),b=i(25313),T=i(97822),P=i(27683),A=i(26851),k=i(89871),I=i(86045),w=i(78780),N=i(81760),M=i(40363),E=i(11010),x=i(11828),L=i(34528),R=i(79669),D=i(19675),B=i(12770),O=i(53374),F=i(73877),V="pnvCountrySelectorPopup",U=(0,S.lazyProperties)({phoneNumberContainer:()=>o.Styles.createViewStyle({flexDirection:"row",justifyContent:"center"}),underline:()=>o.Styles.createViewStyle({borderBottomWidth:1,borderStyle:"solid",borderColor:N.Color.white,marginTop:2}),callingCodeView:()=>o.Styles.createViewStyle({marginLeft:50,marginRight:10}),callingCodeText:()=>o.Styles.createTextInputStyle({padding:6,font:E.default.font.uiDisplayRegular,fontSize:E.default.controlFontSize.body,backgroundColor:N.Color.transparent,width:50,height:32,textAlignVertical:"top"}),phoneNumberView:()=>o.Styles.createViewStyle({marginRight:50}),textInput:()=>o.Styles.createTextInputStyle({padding:6,font:E.default.font.uiDisplayRegular,fontSize:E.default.controlFontSize.body,backgroundColor:N.Color.transparent,color:N.Color.white,marginLeft:10,width:200,height:32,textAlignVertical:"top"}),animationContainer:()=>o.Styles.createViewStyle({height:300,alignSelf:"stretch",alignItems:"center",justifyContent:"center",overflow:"visible"}),descriptionText:()=>o.Styles.createTextStyle({marginBottom:10,color:N.Color.white,paddingHorizontal:20,alignItems:"center",textAlign:"center"}),errorDescriptionText:()=>o.Styles.createTextStyle({color:N.Color.pink}),callMeButton:()=>o.Styles.createButtonStyle({alignSelf:"center",justifyContent:"center",padding:20,marginTop:60,borderRadius:30,backgroundColor:N.Color.black}),callMeButtonText:()=>o.Styles.createTextStyle({color:N.Color.white,alignSelf:"center",textAlign:"center",fontSize:E.default.fontSize.size20}),iconStyle:()=>o.Styles.createViewStyle({marginTop:6,paddingLeft:3}),countryList:()=>o.Styles.createViewStyle({flexDirection:"row",marginTop:50,marginLeft:50,marginRight:50}),countryTextContainer:()=>o.Styles.createTextStyle({flexDirection:"row"}),countrySelectorPopupContainer:()=>o.Styles.createViewStyle({height:350,width:300}),countryText:()=>o.Styles.createTextStyle({color:N.Color.white,font:E.default.font.uiDisplayBold,fontSize:E.default.fontSize.size18,textAlign:"center",marginRight:5})});class H extends a.default{constructor(e){super(e),this._automaticallyFocusKeyboardOnce=!1,this._onVerifyingTextContentViewRef=e=>{this._verifyingTextContentView=e||void 0},this._onCountryListRef=e=>{this._countryListRef=e||void 0},this._onCountrySelectorPress=e=>{e.stopPropagation(),this._automaticallyFocusKeyboardOnce=!1,y.default.isUsingStackNavigationContext()?(u.dismissAll(),f.default.navigateToCountrySelector(this._getRootViewId())):this._openCountrySelectorModal()},this._openCountrySelectorModal=()=>{const e=e=>{const t=this.state.countries[e];k.default.setSelectedCountry(t),l.default.dismissPopup(V,this._getRootViewId()),this._numberTextInput&&this._numberTextInput.requestFocus()},t={getAnchor:()=>this._countryListRef,renderPopup:(t,i,n,s)=>o.createElement(R.default,{anchorPosition:t,anchorOffset:i,popupWidth:n,popupHeight:s,fillColor:this._themeColors.popoverBackgroundColor,strokeColor:this._useDarkTheme()?this._themeColors.popupBorderColor:void 0,skipPopupAutoFocus:!0},o.createElement(o.View,{style:U.countrySelectorPopupContainer},o.createElement(d.default,{countries:this.state.countries,onSelect:e}))),positionPriorities:["top","bottom"],dismissIfShown:!0,rootViewId:this._getRootViewId()};l.default.showPopup(t,V)},this._goBack=e=>(m.log(g.LogTraceArea.Navigation,"PnvEnterNumberDialog._goBack, causeId: "+e),!!this.state.provisioning||(this.props.scenarioNavigator?(this.props.scenarioNavigator.goBack(),!0):super._goBack(e))),this._onPressCallMeButton=e=>{e.stopPropagation(),A.default.get().markStep(A.PnvScenarioStep.NumberCall),this._submitPhoneNumber(b.VerificationMethod.Voice)},this._onNumberTextInputRef=e=>{this._numberTextInput=e||void 0},this._onCloseButtonClicked=()=>{A.default.get().markStep(A.PnvScenarioStep.NumberBack),this._closeDialog()},this._onOnboardingDialogWizardRef=e=>{e&&(this._onboardingDialogWizard=e,this._disableNextButton())},this._onChangeText=e=>{this.setState({phoneNumber:e})},this._onSubmitEditing=()=>{this._submitPhoneNumber()},this._onPressNextButton=e=>{e.stopPropagation(),this._submitPhoneNumber()},b.default.initialize()}_buildState(e,t){let i={},n=b.default.getLastPhoneVerificationStatus();return!t&&this.state.phoneNumber||(i.phoneNumber=n.PhoneNumber),t&&e.initialPhoneNumber&&(i.phoneNumber=e.initialPhoneNumber),i.countries=v.default.getCountries(),i.selectedCountry=k.default.getSelectedCountry(),i.errorCode=n.ErrorCode,i}componentDidMount(){super.componentDidMount(),k.default.initializeCountrySelection(),T.default.canPrefillPhoneNumber()&&n.default.getPhoneNumber().then((e=>{if(this.isComponentMounted()&&e&&!this.state.phoneNumber){const t=P.default.parseAndFormat(e,P.PhoneNumberFormat.NATIONAL,this.state.selectedCountry.country);t&&this.setState({phoneNumber:t})}}))}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this._verifyingTextContentView&&this.state.provisioning&&!t.provisioning&&I.default.isMobileScreenReaderEnabled()&&(this._verifyingTextContentView.requestFocus(),M.default.getPlatformType()===g.PlatformType.Android&&o.Accessibility.announceForAccessibility(C.getString("PhoneNumberVerification.EnterNumberVerifyingText"))),this._disableNextButton()}_componentDidRender(){if(super._componentDidRender(),this.state.phoneNumber,this._numberTextInput&&!this._automaticallyFocusKeyboardOnce)if(this._automaticallyFocusKeyboardOnce=!0,I.default.shouldAnnounceForAccessibility()){const e=500;this._numberTextInput.setAccessibilityFocus(),B.default.setTimeout((()=>{this._numberTextInput&&this._numberTextInput.requestFocus()}),e)}else this._numberTextInput.requestFocus()}_getCountryListComponent(){let e=C.getString("PSTNDialerPanel.UnknownCountry");return this.state.selectedCountry&&(e=this.state.selectedCountry.countryName),o.createElement(o.Button,{style:U.countryList,onPress:this._onCountrySelectorPress,accessibilityLabel:C.getString("PSTNDialerPanel.CountriesAndRegionsAccessibilityLabel",{countryTitle:e})},o.createElement(h.default,{ref:this._onCountryListRef,style:U.countryTextContainer},o.createElement(o.Text,{style:U.countryText,numberOfLines:1},e),o.createElement(p.default,{icon:x.SkypeIcon.DownChevron,size:x.IconSize.size12,color:N.Color.white,style:U.iconStyle})))}_getPhoneNumberInputComponent(){const e=this.state.selectedCountry?"+"+this.state.selectedCountry.countryCode:"+00",t=o.createElement(o.TextInput,{style:U.callingCodeText,multiline:!1,blurOnSubmit:!0,placeholder:e,placeholderTextColor:N.Color.gray300,editable:!1,importantForAccessibility:o.Types.ImportantForAccessibility.No,clearButtonMode:"never"}),i=o.createElement(o.View,{style:U.underline}),n=o.createElement(o.TextInput,{style:U.textInput,value:this.state.phoneNumber,multiline:!1,blurOnSubmit:!0,placeholder:C.getString("PhoneNumberVerification.EnterNumberPlaceHolderText"),placeholderTextColor:N.Color.white,keyboardType:"numeric",accessibilityLabel:C.getString("AccessibilityLabel.EnterPhoneNumber"),ref:this._onNumberTextInputRef,onChangeText:this._onChangeText,onSubmitEditing:this._isCurrentPhoneNumberValid()?this._onSubmitEditing:void 0,clearButtonMode:"never"});return o.createElement(o.View,{style:U.phoneNumberContainer},o.createElement(o.View,{style:U.callingCodeView},t,i),o.createElement(o.View,{style:U.phoneNumberView},n,i))}_renderProgress(){const e=this.props.compositeNavContainerWidth||F.default.measureWindow(this._getRootViewId()).width,t=o.createElement(o.View,{style:U.animationContainer},o.createElement(s.default,{animation:w.default.SPLASH_LOADER,loop:!0,shortSide:e})),i=o.createElement(D.Header,{size:c.HeaderSize.h4,style:U.descriptionText,importantForAccessibility:o.Types.ImportantForAccessibility.Yes,ref:this._onVerifyingTextContentViewRef},C.getString("PhoneNumberVerification.EnterNumberVerifyingText")),n=o.createElement(D.BodyText,{style:U.descriptionText},C.getString("PhoneNumberVerification.EnterCodeTakeMinuteText"));return o.createElement(_.default,{hideSkipButton:!0,nextButtonIcon:this.props.nextButtonIcon||x.SkypeIcon.Ok,hideCloseButton:!0,closeButtonIcon:L.backIcon(),hideNextButton:!0,onNextButtonClicked:this._onPressNextButton,onCloseButtonClicked:this._onCloseButtonClicked,ref:this._onOnboardingDialogWizardRef,scenarioNavigator:this.props.scenarioNavigator,disablePresentationAnimation:!0},t,i,n)}render(){if(this.state.provisioning)return o.createElement(r.default,{goBack:this._goBack},this._renderProgress());const e=this.state.errorCode?C.getString("PhoneNumberVerification.EnterNumberErrorText"):C.getString("PhoneNumberVerification.EnterNumberDescriptionText"),t=this.state.errorCode?U.errorDescriptionText:void 0,i=this._showCallMeButton()?o.createElement(o.Button,{style:U.callMeButton,onPress:this._onPressCallMeButton,disabled:!this._isCurrentPhoneNumberValid()},o.createElement(o.Text,{style:[E.default.fontStyle.primaryButtonLarge,U.callMeButtonText]},C.getString("PhoneNumberVerification.CallMeText"))):void 0;return o.createElement(r.default,{goBack:this._goBack},o.createElement(_.default,{headerText:C.getString("PhoneNumberVerification.EnterNumberHeaderText"),descriptionElement:e,descriptionElementStyle:t,hideSkipButton:!0,nextButtonIcon:this.props.nextButtonIcon||x.SkypeIcon.Ok,hideCloseButton:this.props.hideCloseButton,closeButtonIcon:this.props.closeButtonIcon,onNextButtonClicked:this._onPressNextButton,onCloseButtonClicked:this._onCloseButtonClicked,ref:this._onOnboardingDialogWizardRef,scenarioNavigator:this.props.scenarioNavigator,disablePresentationAnimation:!0,isContentScrollable:!1},this._getPhoneNumberInputComponent(),this._getCountryListComponent(),i))}_componentId(){return"PnvEnterNumberDialog"}_showCallMeButton(){return"SendTokenError:UnsupportedVerifyMethod"===this.state.errorCode}_closeDialog(){const e=O.default.newCauseId();return m.log(g.LogTraceArea.Navigation,"PnvEnterNumberDialog._closeDialog, causeId: "+e),this.props.scenarioNavigator?(this.props.scenarioNavigator.goBack(),!0):super._goBack(e)}_isPossiblePhoneNumber(e,t){let i=!1;return e&&t&&(i=P.default.isPossibleNumber(e,t)),i}_isCurrentPhoneNumberValid(){let e=!1;if(this.state&&this.state.selectedCountry&&this.state.phoneNumber&&(e=this._isPossiblePhoneNumber(this.state.phoneNumber,this.state.selectedCountry.country),e)){const t=P.default.parse(this.state.phoneNumber,this.state.selectedCountry.country);e=P.default.isValidNumber(t)}return e}_disableNextButton(){this._onboardingDialogWizard&&this._onboardingDialogWizard.disableNextButton(!this._isCurrentPhoneNumberValid())}_submitPhoneNumber(e=b.VerificationMethod.SMS){if(A.default.get().markStep(A.PnvScenarioStep.NumberNext),b.default.isWaitingForToken(this.state.phoneNumber,this.state.selectedCountry.country,this.state.selectedCountry.countryCode.toString()))this._navigateToPnvEnterCode();else if(!b.default.isProvisioningPhone(this.state.phoneNumber,this.state.selectedCountry.country,this.state.selectedCountry.countryCode.toString())){this.setState({provisioning:!0});const t=P.default.parse(this.state.phoneNumber,this.state.selectedCountry.country),i=t?P.default.format(t,P.PhoneNumberFormat.NATIONAL):"";b.default.provisionPhoneForVerification(i,this.state.selectedCountry.country,this.state.selectedCountry.countryCode.toString(),e,C.getLocale()).then((e=>{e.ErrorCode||this._navigateToPnvEnterCode()})).finally((()=>{this.isComponentMounted()&&this.setState({provisioning:!1})}))}}_navigateToPnvEnterCode(){this._closeDialog(),f.default.navigateToPnvEnterCode(this._getRootViewId())}}t.default=H},24387:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(33754),o=i(93194),s=o.default.menuId();t.default=class{constructor(e){this._feedbackHandler=e,this._menuOptions=()=>[{text:n.getString("UserSettingsPanel.PicturePrefetchStatusOn"),command:"On"},{text:n.getString("UserSettingsPanel.PicturePrefetchStatusWifi"),command:"Wifi"},{text:n.getString("UserSettingsPanel.PicturePrefetchStatusOff"),command:"Off"}],this._handleMenuCommand=(e,t)=>{e!==o.SXActionMenuCancel?this._feedbackHandler(e):this._feedbackHandler(void 0)}}show(e,t,i){const a={anchor:e,useTheme:!0,popupBeakSize:{height:0,width:0},positionPriorities:["top","left"]};o.default.showWithOptions({id:s,config:a,getMenuItems:this._menuOptions,handleMenuCommand:e=>this._handleMenuCommand(e,t),menuTitle:n.getString("UserSettingsPanel.PicturePrefetchTitle"),rootViewId:t,invokingEvent:i})}}},95697:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(19784),s=i(89391),a=i(62033),r=i(29825),l=(i(47204),i(98278)),c=i(6417),d=i(46096),u=i(70635),g=i(36237),h=i(15340),p=i(15877),m=i(75913),S=i(74606),C=i(50556),f=i(33754),y=i(10909),_=i(93486),v=i(78735),b=i(4735),T=i(52803),P=(i(90631),i(82445)),A=i(22222),k=i(81760),I=i(40363),w=i(11010),N=i(19675),M=i(24576),E=i(63841),x=i(18037),L=i(58874),R=i(26712),D="reportingAProblem",B=20,O=(0,p.lazyProperties)({dialog:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),headerText:()=>n.Styles.createTextStyle({paddingTop:30,paddingBottom:10,marginLeft:B}),textInputContainer:()=>n.Styles.createViewStyle({borderRadius:10,marginLeft:B,marginRight:B}),textInput:()=>n.Styles.createTextInputStyle({padding:6,borderRadius:10,font:w.default.font.uiDisplayRegular,fontSize:w.default.controlFontSize.body,wordBreak:"break-word",backgroundColor:k.Color.transparent,height:180,textAlignVertical:"top"}),buttonContainer:()=>n.Styles.createViewStyle({alignItems:"stretch"}),sendButton:()=>n.Styles.createButtonStyle({marginLeft:B,marginRight:B,marginTop:10}),checkboxAndTextContainer:()=>n.Styles.createViewStyle({marginLeft:B,justifyContent:"center",marginBottom:16}),checkboxView:()=>n.Styles.createViewStyle({flexDirection:"row",alignSelf:"flex-start",paddingTop:6}),checkboxLabel:()=>n.Styles.createTextStyle({paddingTop:4,flex:-1,marginLeft:-4}),linksContainer:()=>n.Styles.createViewStyle({flex:1,alignItems:"flex-end",justifyContent:"center",flexDirection:"row",marginBottom:B,marginTop:50}),linkDivider:()=>n.Styles.createTextStyle({marginLeft:8,marginRight:8})});class F extends M.default{constructor(){super(...arguments),this._openTerms=()=>{m.default.openTerms()},this._openPrivacy=()=>{m.default.openPrivacy()},this._onScrollViewRef=e=>{this._scrollView=e||void 0},this._onFocus=e=>{this._scrollView&&this._scrollView.setScrollTop(100,!1)},this._onPressSendButton=e=>{e.stopPropagation(),this._sendProblemReport()},this._onCancelButtonPress=e=>{e.stopPropagation(),C.LoadingDialog.dismiss(D,this._getRootViewId())},this._onChangeText=e=>{this.setState({problemText:e})},this._onPressAttachLogsCheckboxButton=e=>{e.stopPropagation(),this.setState({isAttachLogsAndScreenshotChecked:!this.state.isAttachLogsAndScreenshotChecked})},this._onPressShakeToSendFeedbackCheckboxButton=e=>{e.stopPropagation(),this.setState({isShakeAndSendChecked:!this.state.isShakeAndSendChecked}),v.default.setDisableShakeAndSend(this.state.isShakeAndSendChecked)},this._onBack=()=>(this._dismiss(),g.log(d.LogTraceArea.HardwareBackButton,"goBack: true componentId: ReportAProblemDialog"),!0),this._dismiss=()=>{c.default.closeModel(this._getRootViewId())}}static canReportFeedback(e){return e||s.default.getOnboardingFeatures().features.enableReportProblemDirectly||s.default.getOnboardingFeatures().enableReportProblemViaBot}static reportProblem(e,t,i,n,o){_.default.isChild()||(g.track(new T.ReportProblemDialogOpenedEvent(!0)),u.default.showFeedbackDialog(t,i,n,o))}static openFeedbackUrl(e,t,i,n=!1){if(!_.default.isChild()){const o=e,a=!R.default.isUrlValid(o);let r=R.default.addUrlParameter(o,"lang",f.getLocale(),a);r=R.default.addUrlParameter(r,"p",I.default.getSkypePlatformId().toString(),a),r=R.default.addUrlParameter(r,"v",I.default.getAppVersion(),a),r=R.default.addUrlParameter(r,"eTag",encodeURIComponent(s.default.getCachedEcsConfigEtag()),a),r=R.default.addUrlParameter(r,"e",L.UIFactor[L.UIFactorHelper.getUIFactor()],a),r=R.default.addUrlParameter(r,"theme",E.Theme[x.default.colorTheme()],a),r=P.addSsoFlagToUrl(r,a);let l={};n&&(l={tcg:this._triggerULUploadAndGetCorrelationId()}),b.default.navigateToHelpAndFeedbackLink(r,"",t,i,l)}}static _triggerULUploadAndGetCorrelationId(){const e=I.default.getSessionId()+"_"+Date.now();return g.log(d.LogTraceArea.SkypeFeedback,"SendFeedback: log submitting event. logCorrelationId: "+e),e}_buildState(e,t){let i={};return t&&(i.isAttachLogsAndScreenshotChecked=s.default.getConfigSettings().feedback.sendLogsByDefault,i.isShakeAndSendChecked=!v.default.isShakeAndSendDisabled(),i.problemText="",i.isChild=_.default.isChild()),i}componentDidMount(){super.componentDidMount(),a.default.subscribe(this._onBack)}componentWillUnmount(){super.componentWillUnmount(),a.default.unsubscribe(this._onBack)}render(){if(this.state.isChild)return;return n.createElement(h.default,{style:[O.dialog,this._themeStyles.primaryBackgroundColorStyle]},undefined,n.createElement(n.ScrollView,{ref:this._onScrollViewRef,keyboardShouldPersistTaps:!0},n.createElement(N.Header,{size:4,style:O.headerText,numberOfLines:2},f.getString("ReportAProblemDialog.Header")),n.createElement(n.View,{style:O.checkboxAndTextContainer},n.createElement(n.View,{style:O.checkboxView,onPress:this._onPressAttachLogsCheckboxButton,accessibilityTraits:n.Types.AccessibilityTrait.None,accessibilityLabel:this._getCheckboxAccessibilityLabel(f.getString("ReportAProblemDialog.AttachLogsAndScreenCheckbox"),this.state.isAttachLogsAndScreenshotChecked)},n.createElement(S.default,{isOn:this.state.isAttachLogsAndScreenshotChecked}),n.createElement(N.BodyText,{style:O.checkboxLabel},f.getString("ReportAProblemDialog.AttachLogsAndScreenCheckbox"))),undefined),n.createElement(n.View,{style:[O.textInputContainer,this._themeStyles.rowHighlightViewStyle]},n.createElement(n.TextInput,{autoCorrect:!0,value:this.state.problemText,style:[O.textInput,this._themeStyles.primaryTextColorStyle],multiline:!0,onFocus:this._onFocus,onChangeText:this._onChangeText,placeholder:f.getString("ReportAProblemDialog.Placeholder"),placeholderTextColor:this._themeColors.secondaryTextColor,autoCapitalize:"sentences",maxLength:1e3,clearButtonMode:"never"})),n.createElement(n.View,{style:O.buttonContainer},n.createElement(A.default,{style:O.sendButton,buttonStyle:l.SXButtonStyle.ThemeFill,onPress:this._onPressSendButton,disabled:0===this.state.problemText.length,title:f.getString("ReportAProblemDialog.SendButton")})),n.createElement(n.View,{style:O.linksContainer},n.createElement(n.Button,{onPress:this._openTerms},n.createElement(N.Subtitle,null,f.getString("ReportAProblemDialog.TermsOfUseButton"))),n.createElement(N.Subtitle,{style:O.linkDivider},"|"),n.createElement(n.Button,{onPress:this._openPrivacy},n.createElement(N.Subtitle,null,f.getString("ReportAProblemDialog.PrivacyAndCookiePolicyButton"))))))}_getCheckboxAccessibilityLabel(e,t){const i=this._getCheckboxCheckedState(t);return f.getString("ReportAProblemDialog.AccLabelCheckbox",{checkboxTitle:e,state:i})}_getCheckboxCheckedState(e){return e?f.getString("ReportAProblemDialog.AccLabelCheckboxChecked"):f.getString("ReportAProblemDialog.AccLabelCheckboxUnchecked")}_sendProblemReport(){this._dismiss(),C.LoadingDialog.show({dialogId:D,dialogText:f.getString("ReportAProblemDialog.ReportingProblem"),showActivityIndicator:!0,buttonText:f.getString("Global.CancelLabel"),onButtonPress:this._onCancelButtonPress,showCancelButton:!0},this._getRootViewId());let e={ReportTitle:this.state.problemText,ReportDescription:this.state.problemText,feedbackSendLogsAndScreenshot:this.state.isAttachLogsAndScreenshotChecked,screenShotUri:this.props.screenshotUri,vsoTags:this.props.vsoTags};r.default.sendBRB(e).then((()=>{y.default.scheduleTextMessage(f.getString("ReportAProblemDialog.ProblemReportedSuccessfully"),void 0,this._getRootViewId())}),(e=>{o.default.showErrorAlert(e,this._getRootViewId())})).finally((()=>{C.LoadingDialog.dismiss(D,this._getRootViewId())}))}}t.default=F},57981:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(98356),o=i(16778),s=i(18330),a=i(98278),r=i(46096),l=i(32235),c=(i(11375),i(36237)),d=i(61253),u=i(72490),g=i(15877),h=i(33754),p=i(30124),m=i(16582),S=i(90631),C=(i(50795),i(81760)),f=i(79669),y=i(80837),_=i(60305),v=i(24576),b=i(12770),T=i(73877),P=(0,g.lazyProperties)({modalContainerBackgroundDesktop:()=>o.Styles.createViewStyle({position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center"}),modalContainerAnimatedDesktop:()=>o.Styles.createViewStyle({backgroundColor:C.Color.blackOverlay50}),modalContainerAnimatedTablet:()=>o.Styles.createViewStyle({bottom:-100}),modalContainerBackgroundMobile:()=>o.Styles.createViewStyle({position:"absolute",backgroundColor:C.Color.blackOverlay50,left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center"}),modalContainerInner:()=>o.Styles.createViewStyle({position:"absolute",left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center"}),modalContainerInnerFullSize:()=>o.Styles.createViewStyle({flex:1,position:"absolute",left:0,right:0,top:0,bottom:0}),modalContainer:()=>o.Styles.createViewStyle({flex:-1,flexDirection:"row"}),modalContainerMobile:()=>[o.Styles.createViewStyle({flex:-1,justifyContent:"center"}),y.default.noncollapsibleView],modalContainerFullSize:()=>[o.Styles.createViewStyle({flex:1,justifyContent:"center"}),y.default.noncollapsibleView],modalContainerTablet:()=>o.Styles.createViewStyle({flex:-1,alignItems:"flex-start",overflow:"visible"}),modalBox:()=>o.Styles.createViewStyle({flex:-1,margin:32}),modalBoxTablet:()=>o.Styles.createViewStyle({margin:20}),modalBoxDesktop:()=>o.Styles.createViewStyle({borderRadius:3,transform:[{translateX:0}]}),modalBoxDesktopFullSize:()=>o.Styles.createViewStyle({flex:1,position:"absolute",left:0,right:0,top:0,bottom:0}),fullScreenView:()=>o.Styles.createViewStyle({position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:C.Color.transparent})}),A="SXModal";class k extends v.default{constructor(){super(...arguments),this._contentOpacityValue=new o.Animated.Value(1),this._suppressDismissalEvents=!1,this._renderPopup=(e,t,i,n,a)=>o.createElement(f.default,{anchorPosition:s.default.popupAnchorPositionToString(e),anchorOffset:t,popupWidth:i,popupHeight:n,borderRadius:10,strokeColor:this.props.popupColorInfo?this.props.popupColorInfo.strokeColor:this._themeColors.popupBorderColor,fillColor:this.props.popupColorInfo?this.props.popupColorInfo.fillColor:this._themeColors.popoverBackgroundColor,shadow:"0px 2px 4px rgba(0, 0, 0, 0.25)",popupAccessibilityTitle:this._modalAccessibilityLabel()},o.createElement(o.View,{style:[this.state.widthStyle,this.state.heightStyle]},this.props.children)),this._arbitrateFocus=e=>(0,l.arbitrateModalOrPopupFocus)(A,e),this._onContainerRef=e=>{this._container=e||void 0},this._onEscape=()=>(this._intClickOutside(),!0),this._onLayout=e=>{if(this.isComponentMounted()){const t={width:e.width,height:e.height};(0,d.default)(t,this.state.viewDimensions)||this.setState({viewDimensions:t})}},this._clickInside=e=>{e.stopPropagation()},this._onLongPressOutside=e=>{e.stopPropagation()},this._clickOutside=e=>{e.stopPropagation(),this._intClickOutside()},this._intClickOutside=()=>{this.props.onClickOutside&&this.props.onClickOutside()}}_buildState(e,t){let i={isUsingStackNavigationContext:p.default.isUsingStackNavigationContext(),useTabletUI:!e.fullSize&&_.default.useTabletUI()};const n=this._getRootViewId();if(!i.isUsingStackNavigationContext)if(i.widthStyle=e.modalWidth?o.Styles.createViewStyle({width:e.modalWidth},!1):void 0,e.modalHeight){const t=i.useTabletUI?Math.min(e.modalHeight,T.default.measureWindow(n).height-60):e.modalHeight;i.heightStyle=o.Styles.createViewStyle({height:t},!1)}else i.heightStyle=void 0;if(t){if(this._suppressDismissalEvents=!!e.suppressDismissalEvents,this._opacityAnimationValue=new o.Animated.Value(i.isUsingStackNavigationContext||e.fullSize?0:1),this._opacityAnimationStyle=e.animationType!==a.SXModalAnimationType.None?o.Styles.createAnimatedViewStyle({opacity:this._opacityAnimationValue}):void 0,e.animationType===a.SXModalAnimationType.Bottom){const t=k._yOffset(e.modalHeight,!!e.fullSize,n);this._contentTransformYValue=new o.Animated.Value(t),this._bottomAnimationStyle=o.Styles.createAnimatedViewStyle({transform:[{translateY:this._contentTransformYValue}]})}else e.animationType!==a.SXModalAnimationType.None&&(this._contentScaleValue=new o.Animated.Value(1),this._defaultAnimationStyle=o.Styles.createAnimatedViewStyle({transform:[{scale:this._contentScaleValue}],opacity:this._contentOpacityValue}));e.closeAnimationEvent&&(this._closeAnimationSubcriptionToken=e.closeAnimationEvent.subscribe((e=>this._animateClose(e))));const t=T.default.measureWindow(n);i.viewDimensions={width:t.width,height:t.height}}return i}UNSAFE_componentWillMount(){super.UNSAFE_componentWillMount(),this.props.skipEscHandling||u.default.addEscapeHandler(this._onEscape)}componentDidMount(){super.componentDidMount(),c.log(r.LogTraceArea.CoreUI,"SXModal componentDidMount, animationType: "+this.props.animationType);const e=!0,t=[];this.props.animationType===a.SXModalAnimationType.None?(this._contentScaleValue&&this._contentScaleValue.setValue(1),this._contentTransformYValue&&this._contentTransformYValue.setValue(0),this._opacityAnimationValue&&this._opacityAnimationValue.setValue(1)):this.props.animationType===a.SXModalAnimationType.Bottom?(this._contentTransformYValue&&t.push(n.timing.easeOut({value:this._contentTransformYValue,toValue:0,useNativeDriver:e})),this._opacityAnimationValue&&t.push(n.timing.easeOut({value:this._opacityAnimationValue,toValue:1,useNativeDriver:e})),this._contentScaleValue&&this._contentScaleValue.setValue(1)):this.state.isUsingStackNavigationContext||this.props.fullSize?(this._opacityAnimationValue&&t.push(n.timing.easeOut({value:this._opacityAnimationValue,toValue:1,useNativeDriver:e})),this._contentScaleValue&&this._contentScaleValue.setValue(1)):(this._contentScaleValue,this._contentTransformYValue&&this._contentTransformYValue.setValue(0),this._opacityAnimationValue&&this._opacityAnimationValue.setValue(1)),t.length&&o.Animated.parallel(t).start()}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),e.modalTitle!==this.props.modalTitle&&e.modalTitle&&this.resetFocus()}componentWillUnmount(){if(super.componentWillUnmount(),u.default.removeEscapeHandler(this._onEscape),this._closeAnimationSubcriptionToken&&this._closeAnimationSubcriptionToken.unsubscribe(),!this._suppressDismissalEvents){const e=h.getString("AccessibilityLabel.DialogClosed",{dialogTitle:this.props.modalTitle});o.Accessibility.announceForAccessibility(e)}}resetFocus(){if(this._container){this.props.willResetFocus&&this.props.willResetFocus(),this._container.setFocusRestricted(!1),this._container.requestFocus();const e=e=>{c.log(r.LogTraceArea.CoreUI,"SXModal resetFocus, timedOut: "+e),this._clearFocusRestrictionTimeout(),this.props.didResetFocus&&this.props.didResetFocus()};this._clearFocusRestrictionTimeout(),this._focusRestrictionTimeout=b.default.setTimeout((()=>{e(!0)}),1e3),this._container.setFocusRestricted(!0,(()=>{e(!1)}))}}suppressDismissalEvents(e){this._suppressDismissalEvents=e}_clearFocusRestrictionTimeout(){this._focusRestrictionTimeout&&(b.default.clearTimeout(this._focusRestrictionTimeout),this._focusRestrictionTimeout=void 0)}_modalAccessibilityLabel(){return this.props.modalTitle?this.props.modalTitle:void 0}render(){const e=this._modalAccessibilityLabel(),t="modal",i=this.props.backgroundStyle||this._themeStyles.primaryBackgroundColorStyle,n=this.props.showTitlebar?o.createElement(S.SimplePanelHeader,{leftButton:{closeButtonType:S.CloseButtonType.Close,onPress:this.props.close},panelName:this.props.title,useCenteredControls:!0}):void 0;if(this.state.isUsingStackNavigationContext){let e;const t=[P.modalContainerBackgroundMobile];this.props.overlayColor&&t.push(o.Styles.createViewStyle({backgroundColor:this.props.overlayColor},!1)),this.props.animationType!==a.SXModalAnimationType.None&&t.push(this.props.animationType===a.SXModalAnimationType.Bottom?this._bottomAnimationStyle:this._opacityAnimationStyle);const i=[this.props.fullSize?P.modalContainerFullSize:P.modalContainerMobile];return this.props.horizontalPadding&&i.push(o.Styles.createViewStyle({maxWidth:this.state.viewDimensions.width-2*this.props.horizontalPadding},!1)),this.props.verticalPadding&&i.push(o.Styles.createViewStyle({maxHeight:this.state.viewDimensions.height-2*this.props.verticalPadding},!1)),o.createElement(o.Animated.View,{style:t,onDragEnter:this._clickInside,onLayout:this.props.horizontalPadding||this.props.verticalPadding?this._onLayout:void 0},e,o.createElement(o.View,{style:this.props.fullSize?P.modalContainerInnerFullSize:P.modalContainerInner},o.createElement(o.View,{style:i,restrictFocusWithin:!0},this.props.children)))}if(this.props.fullSize){const s=[P.modalBoxDesktopFullSize,i];return this.props.animationType!==a.SXModalAnimationType.None&&s.push(this.props.animationType===a.SXModalAnimationType.Bottom?this._bottomAnimationStyle:this._opacityAnimationStyle),o.createElement(o.Animated.View,{style:s},o.createElement(o.View,{key:t,style:P.modalContainerFullSize,restrictFocusWithin:!0,accessibilityId:A,accessibilityTraits:o.Types.AccessibilityTrait.Dialog,accessibilityLabel:e,tabIndex:-1,autoFocus:!0,arbitrateFocus:this._arbitrateFocus},n,this.props.children))}{let s;if(this.props.anchor)s=o.createElement(m.default,{key:t,animateDismissal:!0,renderPopup:(e,t,i,n,o)=>this._renderPopup(e,t,i,n,o),allowTaps:!0,ignorePointerEvents:!0,getAnchorElement:this.props.anchor,getPopupPositions:this.props.getPopupPositions});else{const r=[this.state.useTabletUI?P.modalBoxTablet:P.modalBox,this.props.showOverflow?y.default.overflowVisible:void 0,P.modalBoxDesktop,i];this.state.widthStyle&&r.push(this.state.widthStyle),this._useDarkTheme()&&r.push(this._themeStyles.viewBorderStyle);const l=[this.state.useTabletUI?P.modalContainerTablet:P.modalContainer,this.props.showOverflow?y.default.overflowVisible:void 0];this.props.animationType!==a.SXModalAnimationType.None&&l.push(this.props.animationType===a.SXModalAnimationType.Bottom?this._bottomAnimationStyle:this._defaultAnimationStyle),this.state.heightStyle&&(this.state.useTabletUI?r.push(this.state.heightStyle):l.push(this.state.heightStyle)),s=o.createElement(o.Animated.View,{style:l},o.createElement(o.View,{key:t,style:r,ref:this._onContainerRef,onPress:this._clickInside,accessibilityId:A,accessibilityTraits:o.Types.AccessibilityTrait.Dialog,restrictFocusWithin:!0,disableTouchOpacityAnimation:!0,tabIndex:-1,accessibilityLabel:e,autoFocus:!0,arbitrateFocus:this._arbitrateFocus},n,this.props.children))}const r=[P.modalContainerBackgroundDesktop];let l;if(!this.props.hideBackground){const e=[y.default.absoluteFill,P.modalContainerAnimatedDesktop];this.props.showOverflow&&(this.state.useTabletUI,r.push(y.default.overflowVisible)),this._opacityAnimationStyle&&e.push(this._opacityAnimationStyle),l=o.createElement(o.Animated.View,{style:e})}return o.createElement(o.View,{style:r},l,o.createElement(o.View,{style:P.fullScreenView,onPress:this._clickOutside,onLongPress:this._onLongPressOutside,disableTouchOpacityAnimation:!0}),s)}}_animateClose(e){c.log(r.LogTraceArea.CoreUI,"SXModal _animateClose, animationType: "+this.props.animationType);const t=()=>{this.isComponentMounted()&&e&&e()};if(this.props.animationType===a.SXModalAnimationType.None)return void t();const i=!0,s=[];this.props.animationType===a.SXModalAnimationType.Bottom?(this._contentTransformYValue&&s.push(n.timing.easeOut({value:this._contentTransformYValue,toValue:k._yOffset(this.props.modalHeight,!!this.props.fullSize,this._getRootViewId()),useNativeDriver:i})),this._opacityAnimationValue&&s.push(n.timing.easeOut({value:this._opacityAnimationValue,toValue:0,useNativeDriver:i}))):(this._opacityAnimationValue&&s.push(n.timing.easeOut({value:this._opacityAnimationValue,toValue:0,useNativeDriver:i})),this.state.isUsingStackNavigationContext||this.props.fullSize||s.push(n.timing.easeOut({value:this._contentOpacityValue,toValue:0,useNativeDriver:i}))),o.Animated.parallel(s).start(t)}static _yOffset(e,t,i){const n=T.default.measureWindow(i).height;return e&&!t?n-(n-e)/2:n}}t.default=k},10265:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(74634),a=i(35440),r=i(62033),l=i(11930),c=i(47204),d=i(77381),u=i(46096),g=i(36237),h=i(47126),p=i(15877),m=i(33754),S=i(29130),C=i(81760),f=i(57981),y=i(80837),_=i(19675),v=i(212),b=(0,p.lazyProperties)({container:()=>o.Styles.createViewStyle({flex:1}),titleText:()=>o.Styles.createTextStyle({textAlign:"center",padding:16}),contentText:()=>o.Styles.createTextStyle({textAlign:"center",paddingVertical:16}),contentTextLeftAligned:()=>o.Styles.createTextStyle({textAlign:"left"}),contentContainer:()=>o.Styles.createViewStyle({flex:1,paddingHorizontal:16}),buttonContainer:()=>o.Styles.createViewStyle({alignItems:"stretch"}),horizontalButtonContainer:()=>o.Styles.createViewStyle({flexDirection:"row"}),buttonsContainerFullSize:()=>o.Styles.createViewStyle({backgroundColor:C.Color.white}),button:()=>o.Styles.createButtonStyle({justifyContent:"center",alignItems:"center",borderTopWidth:1,paddingVertical:16,flex:1}),buttonText:()=>o.Styles.createTextStyle({textAlign:"center",marginHorizontal:12})}),T=(e,t=!1,i)=>{const n=v.default.themeColorsForTheme(e);return t?{containerBackground:{backgroundColor:i||n.primaryBackgroundColor},titleText:{},contentText:{},button:{borderColor:n.dividerColor},buttonText:{},buttonHover:{color:n.textHoverColor}}:{containerBackground:{backgroundColor:i||C.Color.gray400},titleText:{color:C.Color.white},contentText:{color:C.Color.white},button:{borderColor:C.Color.black},buttonText:{color:C.Color.white},buttonHover:{color:C.Color.gray300}}};class P extends d.default{constructor(){super(...arguments),this._closeAnimationEvent=new s.default,this._buttonPressHandled=!1,this._renderButton=(e,t)=>{const i=T(this.state.theme,this.props.isThemeAware),n=[b.button,i.button],s=[b.buttonText,i.buttonText];return e.buttonStyle&&n.push(e.buttonStyle),e.textStyle&&s.push(e.textStyle),t!==this.state.hoverButtonIndex||e.isDisabled||s.push(i.buttonHover),o.createElement(o.Button,{style:n,onHoverStart:()=>this.setState({hoverButtonIndex:t}),onHoverEnd:this._onHoverEnd,onPress:t=>this._onButtonPress(t,e),key:t,disabled:e.isDisabled,accessibilityLabel:e.text,ref:e.ref,autoFocus:e.autoFocus},o.createElement(_.BodyText,{bold:e.isSubmit,style:s},e.text))},this._onHoverEnd=()=>{this.setState({hoverButtonIndex:-1})},this._onClickOutside=()=>{this.props.onClickOutside&&this.props.onClickOutside(),this.props.closeOnClickOutside&&this._getCloseAnimationEvent().fire((()=>{c.default.dismissModal(this.props.dialogId,this._getRootViewId(),this.props.useScopedModalId)}))},this._onKeyUp=e=>{let t;return e.keyCode===h.default.ESCAPE?n.each(this.props.buttons,(e=>{e.isCancel&&(t=e)})):e.keyCode!==h.default.ENTER||o.UserInterface.isNavigatingWithKeyboard()||n.each(this.props.buttons,(e=>{!e.isDisabled&&e.isSubmit&&(t=e)})),t?(this._completeButtonPress(t),g.log(u.LogTraceArea.GenericUnsafe,"onKeyUp: true componentId: SimpleDialog"),!0):(g.log(u.LogTraceArea.GenericUnsafe,"onKeyUp: false componentId: SimpleDialog"),!1)},this._onBack=()=>{let e;return n.each(this.props.buttons,(t=>{t.isCancel&&(e=t)})),e?(this._completeButtonPress(e),g.log(u.LogTraceArea.HardwareBackButton,"goBack: true componentId: SimpleDialog"),!0):(g.log(u.LogTraceArea.HardwareBackButton,"goBack: false componentId: SimpleDialog"),!1)},this._onHeaderContentLayout=e=>{this.props.allowScrolling&&e.height!==this.state.headerHeight&&this.setState({headerHeight:e.height},this._checkIfScrollingNeeded)},this._onDialogContentLayout=e=>{this.props.allowScrolling&&e.height!==this.state.dialogHeight&&this.setState({dialogHeight:e.height},this._checkIfScrollingNeeded)},this._onButtonsContentLayout=e=>{this.props.allowScrolling&&e.height!==this.state.buttonsHeight&&this.setState({buttonsHeight:e.height},this._checkIfScrollingNeeded)}}_buildState(e,t){const i={screenWidth:S.default.getWidth(this._getRootViewId()),screenHeight:S.default.getHeight(this._getRootViewId()),theme:this._getContext().theme};return t?Object.assign(Object.assign({},i),{hoverButtonIndex:-1}):i}componentDidMount(){super.componentDidMount(),r.default.subscribe(this._onBack),o.Input.keyUpEvent.subscribe(this._onKeyUp)}componentWillUnmount(){super.componentWillUnmount(),r.default.unsubscribe(this._onBack),o.Input.keyUpEvent.unsubscribe(this._onKeyUp)}render(){const e=T(this.state.theme,this.props.isThemeAware,this.props.backgroundColor);let t,i;if(this.props.text){const i=!0;if(t=o.createElement(_.PanelHeader,{style:[b.titleText,e.titleText],accessibilityHidden:!!i},this.props.text),i){const e=l.default.headerAccessibilityInfo(this.props.text);t=o.createElement(o.View,{accessibilityLabel:e.accessibilityLabel,importantForAccessibility:o.Types.ImportantForAccessibility.Yes,accessibilityTraits:e.accessibilityTraits,autoFocus:!1,onLayout:this._onHeaderContentLayout},t)}}if(this.props.simpleContent){const t=[b.contentText,e.contentText];this.props.leftAlignContent&&t.push(b.contentTextLeftAligned),i=o.createElement(_.BodyText,{style:t,autoFocus:!1},this.props.simpleContent)}const s=n.map(this.props.buttons,this._renderButton),r=[b.buttonContainer];let c;if(this.props.fullScreen&&r.push(b.buttonsContainerFullSize),this.props.buttonAlignment&&this.props.buttonAlignment===a.SimpleDialogButtonAlignment.HorizontalStack&&r.push(b.horizontalButtonContainer),this.props.buttons&&this.props.buttons.length>0)if(this.props.allowScrolling&&this.state.useScrolling){const e=o.Styles.createViewStyle({height:this.state.buttonsContainerHeight});c=o.createElement(o.View,{style:[r,y.default.flexGrowOne]},o.createElement(o.ScrollView,{style:[y.default.flexOne,e],showsVerticalScrollIndicator:!0},o.createElement(o.View,{style:r,onLayout:this._onButtonsContentLayout},s)))}else c=o.createElement(o.View,{style:r,onLayout:this._onButtonsContentLayout},s);const d=[this.props.fullScreen?y.default.flexOne:b.container,this.props.showOverflow?y.default.overflowVisible:void 0,e.containerBackground];this.props.containerStyle&&d.push(this.props.containerStyle);const u=this.props.anchor?{fillColor:C.Color.gray400,strokeColor:C.Color.gray400}:void 0;return o.createElement(f.default,{modalWidth:this.props.maxWidth||Math.min(this.state.screenWidth-32,450),modalHeight:this.props.maxHeight||(this.props.allowScrolling&&this.state.useScrolling&&this.state.dialogHeight?this.state.screenHeight:void 0),horizontalPadding:this.props.horizontalPadding||this.props.allowScrolling?16:void 0,verticalPadding:this.props.allowScrolling?16:void 0,onClickOutside:this._onClickOutside,closeAnimationEvent:this._getCloseAnimationEvent(),fullSize:this.props.fullScreen,modalTitle:this.props.accessibilityLabel||m.getString("Global.DialogAccessibilityLabel"),anchor:this.props.anchor,popupColorInfo:u,suppressDismissalEvents:this.props.suppressModalDismissalEvents,backgroundStyle:e.containerBackground,showOverflow:this.props.showOverflow},o.createElement(o.View,{style:d,onLayout:this._onDialogContentLayout},t,o.createElement(o.View,{style:[this.props.fullScreen||this.props.useFullSizeContainer?y.default.flexOne:b.contentContainer,this.props.showOverflow?y.default.overflowVisible:void 0,this.state.useScrolling?y.default.flexGrowZero:void 0]},this.props.children,i),c))}_getCloseAnimationEvent(){return this.props.closeAnimationEvent||this._closeAnimationEvent}_onButtonPress(e,t){e.stopPropagation(),this._completeButtonPress(t)}_completeButtonPress(e){this._buttonPressHandled||(e.onPress&&e.onPress(),this._getCloseAnimationEvent().fire((()=>{c.default.dismissModal(this.props.dialogId,this._getRootViewId(),this.props.useScopedModalId)})),this._buttonPressHandled=!0)}_checkIfScrollingNeeded(){if(this.props.allowScrolling&&this.state.screenHeight&&this.state.dialogHeight&&this.state.headerHeight){const e=this.state.screenHeight-64<=this.state.dialogHeight,t=this.state.dialogHeight-this.state.headerHeight;this.setState({useScrolling:e,buttonsContainerHeight:t})}}}t.default=P},46110:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestionCommandTypes=void 0;const n=i(33754),o=i(93194);var s;!function(e){e[e.NegativeFeedback=0]="NegativeFeedback",e[e.LearnMore=1]="LearnMore"}(s=t.SuggestionCommandTypes||(t.SuggestionCommandTypes={}));const a=o.default.menuId();t.default=class{constructor(e){this._feedbackHandler=e,this._menuOptions=()=>[{text:n.getString("SwiftQuickReplyListView.TheseAreBad"),command:s[s.NegativeFeedback]},{text:n.getString("SwiftQuickReplyListView.LearnMore"),command:s[s.LearnMore]}],this._handleMenuCommand=(e,t)=>{if(e===s[s.NegativeFeedback])this._feedbackHandler()}}show(e,t,i){const s={anchor:e,useTheme:!0,popupBeakSize:{height:0,width:0},positionPriorities:["top","left"]};o.default.showWithOptions({id:a,config:s,getMenuItems:this._menuOptions,handleMenuCommand:e=>this._handleMenuCommand(e,t),menuTitle:n.getString("SwiftQuickReplyListView.SuggestionsMenuTitle"),rootViewId:t,invokingEvent:i})}}},49882:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeColorPicker=t.ThemeColorOption=void 0;const n=i(96486),o=i(38933),s=i(16778),a=i(88837),r=i(10102),l=i(15877),c=i(74606),d=i(66127),u=i(33754),g=i(81760),h=(0,l.lazyProperties)({container:()=>s.Styles.createViewStyle({flexDirection:"row",flexWrap:"wrap",alignSelf:"stretch"}),colorSwatchContainer:()=>s.Styles.createViewStyle({paddingRight:6,paddingBottom:6}),colorSwatch:()=>s.Styles.createViewStyle({width:44,height:44,borderRadius:22,backgroundColor:g.Color.gray300}),checkmark:()=>s.Styles.createViewStyle({position:"absolute",right:3,bottom:3,marginRight:0})});var p;!function(e){e[e.Classic=1]="Classic",e[e.Colorful=2]="Colorful",e[e.Blue=3]="Blue",e[e.Fuschia=4]="Fuschia",e[e.Mint=5]="Mint",e[e.Orange=6]="Orange",e[e.Rose=7]="Rose",e[e.Yellow=8]="Yellow"}(p=t.ThemeColorOption||(t.ThemeColorOption={}));class m extends a.ComponentBase{constructor(){super(...arguments),this._allColors=[],this._colorSwatch=e=>{let t;e.option===p.Classic&&(t=this.props.useDarkTheme?g.Color.delphiDarkBubbleColorSelf:this.state.modernizeConversationList?g.Color.delphiBubbleColorSelfModernize:g.Color.delphiBubbleColorSelf);const i=e.option===this.props.selectedColorOption;return s.createElement(S,{key:"swatch"+e.option,themeColorInfo:e,backgroundColor:t,toggleBorderColor:i?this.props.backgroundColor:void 0,selected:i,disabled:this.props.disabled,onSelected:this._onColorSelected})},this._onColorSelected=e=>{this.props.onSelectColor(e.option)}}_buildState(e,t){return{modernizeConversationList:d.default.canModernizeConversationList()}}UNSAFE_componentWillMount(){super.UNSAFE_componentWillMount();const e=n.compact([p.Classic,p.Blue,p.Fuschia,p.Mint,p.Rose,p.Yellow]);this._allColors=n.map(e,(e=>({option:e,colorInfo:m.themeColorOptionToColorInfo(e),accessibilityLabel:m.accessibilityLabelForThemeColorOption(e)})))}render(){return s.createElement(s.View,{style:[h.container,this.props.style]},n.map(this._allColors,(e=>this._colorSwatch(e))))}static themeColorOptionToColorInfo(e){let t;switch(e){case p.Blue:t=r.SerializedColorByNumber.Blue;break;case p.Fuschia:t=r.SerializedColorByNumber.Fuschia;break;case p.Mint:t=r.SerializedColorByNumber.Mint;break;case p.Orange:t=r.SerializedColorByNumber.Orange;break;case p.Rose:t=r.SerializedColorByNumber.Rose;break;case p.Yellow:t=r.SerializedColorByNumber.Yellow;case p.Colorful:case p.Classic:}return n.isUndefined(t)?void 0:r.getColorInfoForSerializedColor(t)}static accessibilityLabelForThemeColorOption(e){switch(e){case p.Blue:return u.getString("Colors.Blue");case p.Fuschia:return u.getString("Colors.Fuschia");case p.Mint:return u.getString("Colors.Mint");case p.Orange:return u.getString("Colors.Orange");case p.Rose:return u.getString("Colors.Rose");case p.Yellow:return u.getString("Colors.Yellow");case p.Colorful:return u.getString("Colors.Multi");case p.Classic:return u.getString("Colors.Classic")}return u.getString("Colors.Custom")}}t.ThemeColorPicker=m;class S extends a.ComponentBase{constructor(){super(...arguments),this._onPress=()=>{this.props.onSelected(this.props.themeColorInfo);const e=u.getString("ColorPickerDialog.ColorWasSetAnnouncement",{color:m.accessibilityLabelForThemeColorOption(this.props.themeColorInfo.option)});s.Accessibility.announceForAccessibility(e)}}render(){let e;const t=[h.colorSwatch];this.props.backgroundColor&&t.push(s.Styles.createViewStyle({backgroundColor:this.props.backgroundColor},!1)),e=this.props.themeColorInfo.colorInfo?s.createElement(o.GradientView,{style:t,colors:this.props.themeColorInfo.colorInfo.colors,direction:o.GradientDirection.BOTTOM_RIGHT}):s.createElement(s.View,{style:t});const i=this.props.selected?s.createElement(c.default,{style:h.checkmark,selectionBorderColor:this.props.toggleBorderColor,isOn:!0}):void 0,n=[s.Types.AccessibilityTrait.Button];let a=this.props.themeColorInfo.accessibilityLabel;return this.props.disabled?(n.push(s.Types.AccessibilityTrait.Disabled),a+=", "+u.getString("AccessibilityLabel.Disabled")):this.props.selected&&(n.push(s.Types.AccessibilityTrait.Selected),a+=", "+u.getString("Global.SelectedAccessibilityLabel")),s.createElement(s.Button,{style:[h.colorSwatchContainer,this.props.style],accessibilityLabel:a,accessibilityTraits:n,disabled:this.props.disabled,onPress:this._onPress},e,i)}}t.default=m},18956:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(87720),a=i(67930),r=i(62168),l=i(72822),c=i(46096),d=i(39285),u=i(13944),g=i(36237),h=i(15877),p=i(33754),m=i(89808),S=i(4735),C=i(30124),f=i(38980),y=i(54976),_=i(82052),v=i(21579),b=i(85683),T=i(90602),P=i(63823),A=i(12187),k=i(11010),I=i(11828),w=i(80837),N=i(212),M=i(49882),E=i(65186),x=i(63841),L=i(18037),R=i(97634),D=i(53374),B=i(44330),O=i(6977),F="light",V="dark",U="lightAccessible",H="darkAccessible",W="system",z=(0,h.lazyProperties)({container:()=>o.Styles.createViewStyle({paddingBottom:4}),title:()=>o.Styles.createTextStyle({paddingTop:16,paddingBottom:8}),colorPicker:()=>o.Styles.createViewStyle({marginBottom:4}),rowStyle:()=>o.Styles.createViewStyle({minHeight:50}),previewLabelWrapper:()=>o.Styles.createViewStyle({flexDirection:"row",justifyContent:"space-between"}),flipIcon:()=>o.Styles.createViewStyle({width:I.IconSize.default,height:I.IconSize.default}),noBorder:()=>o.Styles.createViewStyle({borderBottomWidth:0})});class G extends a.default{constructor(){super(...arguments),this._onModeSelected=e=>{this._telemetryEvent&&this._telemetryEvent.markDidToggleLightDarkTab();const t=R.isAccessibleTheme(this.state.currentTheme);switch(e){case F:t?this._setTheme(x.Theme.Delphi,!1):this.state.isDarkTheme?this._onLightDarkTogglePressed():this.state.useSystemTheme&&this._setTheme(this._currentTheme,!1);break;case V:t?this._setTheme(x.Theme.DelphiDark,!1):this.state.isDarkTheme?this.state.useSystemTheme&&this._setTheme(this._currentTheme,!1):this._onLightDarkTogglePressed();break;case W:this._setTheme(L.default.getSystemThemeNoSubscription(),!0);break;case U:this._setTheme(x.Theme.Accessible,!1);break;case H:this._setTheme(x.Theme.AccessibleDark,!1)}},this._onThemeColorSelected=e=>{const t=D.default.newCauseId();g.log(c.LogTraceArea.Theme,"ThemeDialog._onThemeColorSelected causeId: "+t);const i=G._themeColorOptionToTheme(e,R.isDarkTheme(this.state.currentTheme)),n=M.default.themeColorOptionToColorInfo(e);i!==this.state.currentTheme&&this._setTheme(i,this.state.useSystemTheme);const o=e=>{this._remoteUserAppearanceTelemetryEvent&&this._remoteUserAppearanceTelemetryEvent.setDidUpdateColorInfo(),this.state.updateImmediately?m.default.setUserColor(e,t):this.setState({userColor:e})};n?n!==this.state.userColor&&o(n):o(this.state.initialUserColor)},this._isFlippedSelected=()=>{this._remoteUserAppearanceTelemetryEvent&&this._remoteUserAppearanceTelemetryEvent.setDidToggleFlipBubbleColors();const e=!this.state.isFlipped,t=D.default.newCauseId();g.log(c.LogTraceArea.Theme,"ThemeDialog._isFlippedSelected flipped: "+e+" causeId: "+t);const i=G._flipAvailableForTheme(this.state.currentTheme)&&e;this.state.updateImmediately?L.default.setFlipBubbleColors(i):this.setState({isFlipped:i})},this._onCompactListModeChange=()=>{this._remoteUserAppearanceTelemetryEvent&&this._remoteUserAppearanceTelemetryEvent.setDidUpdateRecentsRowSize()},this._onSplitViewChange=(e,t)=>{if(this.state.splitViewEnabled!==t){const e=D.default.newCauseId();O.default.toggleSplitView(e)}},this._applyThemeChanges=()=>{const e=D.default.newCauseId();g.log(c.LogTraceArea.Theme,"ThemeDialog._commitChanges causeId: "+e),this.state.updateImmediately||(L.default.setTheme(this.state.currentTheme,this.state.useSystemTheme),m.default.setUserColor(this.state.userColor,e),L.default.setFlipBubbleColors(G._flipAvailableForTheme(this.state.currentTheme)&&this.state.isFlipped),S.default.navigateBack(e,this._getContext()),this._sendTelemetryEvent(l.DialogNavExit.Submit),o.Accessibility.announceForAccessibility(p.getString("ColorThemeDialog.ThemeAppliedAnnouncement")))}}static getHeaderText(){return p.getString("UserSettingsPanel.AppearanceButton")}_buildState(e,t){const i=L.default.colorTheme(),n={updateImmediately:this._isPresentedInDesktopModal(),lastMessageAuthorAvatarEnabled:_.default.lastMessageAuthorAvatarEnabled(),systemThemeEnabled:R.systemThemeEnabled(),systemTheme:L.default.getSystemTheme(),splitViewEnabled:C.default.isUsingSplitView(),splitViewSupported:B.default.isSplitViewSupported()};if((t||n.updateImmediately)&&(n.isDarkTheme=L.default.useDarkTheme(),n.useSystemTheme=L.default.useSystemTheme(),n.currentTheme=i,n.userColor=m.default.getColorInfo(!0),n.isFlipped=L.default.flipBubbleColors()),t)n.initialTheme=n.currentTheme,n.initialUserColor=n.userColor,n.initialIsFlipped=n.isFlipped,n.initialUseSystemTheme=n.useSystemTheme,this._setupTelemetryEvents(e);else if(!n.updateImmediately&&this.state.systemTheme!==n.systemTheme){const e=L.default.previewThemeNoSubscription();this.state.initialUseSystemTheme?(n.initialTheme=i,e||(n.isDarkTheme=L.default.useDarkThemeNoSubscription(),n.currentTheme=i)):this.state.useSystemTheme&&e&&(n.isDarkTheme=R.isDarkTheme(n.systemTheme),n.currentTheme=n.systemTheme,L.default.setPreviewTheme(n.currentTheme))}return n}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i);const n=R.isDarkTheme(this.state.currentTheme);if(n!==R.isDarkTheme(t.currentTheme)){const e=p.getString(n?"ColorThemeDialog.SelectedDarkToggleTitleAccessible":"ColorThemeDialog.SelectedLightToggleTitleAccessible");o.Accessibility.announceForAccessibility(e)}const s=R.isAccessibleTheme(this.state.currentTheme);if(s!==R.isAccessibleTheme(t.currentTheme)){const e=p.getString(s?"ColorThemeDialog.SelectedHighContrastTitleAccessible":"ColorThemeDialog.DeselectedHighContrastTitleAccessible");o.Accessibility.announceForAccessibility(e)}if(!this.state.updateImmediately){if(this.state.useSystemTheme&&this.state.currentTheme!==t.currentTheme){const e=N.default.themeColorsForTheme(this.state.currentTheme);this._updateStatusBarStyle(A.default.mergeStyles([A.default.createBarStyle(e.defaultStatusBarTheme),A.default.createBackgroundColorStyle(e.defaultStatusBarBackgroundColor,!0)]))}if(this.props.setRightButton&&(this.state.currentTheme!==t.currentTheme||this.state.userColor!==t.userColor||this.state.isFlipped!==t.isFlipped||this.state.useSystemTheme!==t.useSystemTheme)){const e=this.state.currentTheme!==this.state.initialTheme||this.state.useSystemTheme!==this.state.initialUseSystemTheme||this.state.userColor!==this.state.initialUserColor||this.state.isFlipped!==this.state.initialIsFlipped?{text:p.getString("Global.ApplyButtonTitle"),onPress:this._applyThemeChanges}:void 0;this.props.setRightButton(e)}}}componentWillUnmount(){super.componentWillUnmount(),L.default.setPreviewTheme(void 0),this._sendTelemetryEvent(l.DialogNavExit.CancelOrBack)}_setupTelemetryEvents(e){this._telemetryEvent=new P.ThemeDialogEvent(e.origin),this._remoteUserAppearanceTelemetryEvent=new v.RemoteUserAppearanceTelemetryEvent}_getHeaderText(e){return G.getHeaderText()}_componentId(){return"ThemeDialogV2"}_onLightDarkTogglePressed(){this._setTheme(R.matchingLightOrDarkTheme(this.state.currentTheme),!1)}_setTheme(e,t){const i=!n.isUndefined(t);if(this._remoteUserAppearanceTelemetryEvent&&(e!==this.state.currentTheme&&this._remoteUserAppearanceTelemetryEvent.setDidUpdateColorTheme(),t&&this._remoteUserAppearanceTelemetryEvent.setDidToggleSystemTheme()),this.state.updateImmediately)L.default.setTheme(e,!!t);else{const n={currentTheme:e,isDarkTheme:R.isDarkTheme(e)};i&&(n.useSystemTheme=!!t),this.setState(n),n.currentTheme===this.state.initialTheme&&n.useSystemTheme===this.state.initialUseSystemTheme?L.default.setPreviewTheme(void 0):L.default.setPreviewTheme(e)}this._updateStatusBarStyle(A.default.mergeStyles([A.default.createBarStyle(this._themeColors.defaultStatusBarTheme),A.default.createBackgroundColorStyle(this._themeColors.defaultStatusBarBackgroundColor,!0)]))}_sendTelemetryEvent(e){if(this._telemetryEvent){this._telemetryEvent.setExit(e);const t=e===l.DialogNavExit.Submit||this.state.updateImmediately;this.state.initialTheme!==this.state.currentTheme&&t&&this._telemetryEvent.markDidSelectNewTheme(),this._telemetryEvent.setFinalTheme(t?this.state.currentTheme:this.state.initialTheme),f.default.track(this._telemetryEvent),this._telemetryEvent=void 0}this._remoteUserAppearanceTelemetryEvent&&(g.track(this._remoteUserAppearanceTelemetryEvent),this._remoteUserAppearanceTelemetryEvent=void 0)}render(){let e;const t=G._flipAvailableForTheme(this.state.currentTheme);t&&(e=o.createElement(u.default,{icon:I.SkypeIcon.PreviousNext,style:void 0,size:I.IconSize.size18,color:this._themeColors.secondaryTextColor,hoverColor:this._themeColors.iconHoverColor,title:p.getString("ColorThemeDialog.ReverseThemeTitle"),onPress:this._isFlippedSelected}));let i=o.createElement(b.SectionTitle,{key:"previewTitle",title:p.getString("ColorThemeDialog.PreviewUpper"),titleStyles:z.title});e&&(i=o.createElement(o.View,{style:z.previewLabelWrapper},i,e));const a=o.createElement(b.SectionTitle,{key:"colorTitle",title:p.getString("ColorThemeDialog.ColorUpper"),titleStyles:z.title}),l=o.createElement(b.SectionTitle,{key:"themeTitle",title:p.getString("ColorThemeDialog.ModesUpper"),titleStyles:z.title}),c=o.createElement(b.SectionTitle,{key:"accessibleThemeTitle",title:p.getString("ColorThemeDialog.AccessibleModesUpper"),titleStyles:z.title}),g=o.createElement(r.default,{titleStyles:z.title,hideBottomBorder:!0,onChangeListMode:this._onCompactListModeChange}),h=this.state.splitViewSupported?o.createElement(b.SectionTitle,{key:"splitViewTitle",title:p.getString("ColorThemeDialog.SplitViewUpper"),titleStyles:z.title}):void 0,m=this.state.splitViewSupported?o.createElement(s.default,{style:[T.default.controlRow,z.noBorder],key:"enableCompactLayout",isOn:this.state.splitViewEnabled,accessibilityLabel:p.getString("ColorThemeDialog.EnableSplitView"),onChange:this._onSplitViewChange},o.createElement(b.SwitchLabel,{title:p.getString("ColorThemeDialog.EnableSplitView")})):void 0,S=n.compact([{key:F,text:p.getString("ColorThemeDialog.LightToggleTitle")},{key:V,text:p.getString("ColorThemeDialog.DarkToggleTitle")},this.state.systemThemeEnabled?{key:W,text:p.getString("ColorThemeDialog.SystemModeLabel")}:void 0]),C=R.isAccessibleTheme(this.state.currentTheme),f=C?void 0:this.state.useSystemTheme?W:this.state.isDarkTheme?V:F,_=o.createElement(y.default,{radioButtons:S,selectedKey:f,rowStyle:z.rowStyle,textStyle:k.default.rowTitleFontStyle(this._currentTheme),dividerType:y.DividerType.Between,disableSelectionAnimation:!0,onSelected:this._onModeSelected,fullWidth:!0}),v=n.compact([{key:U,text:p.getString("ColorThemeDialog.HighContrastLight")},R.isAccessibleTheme(x.Theme.AccessibleDark)?{key:H,text:p.getString("ColorThemeDialog.HighContrastDark")}:void 0]),P=C?this.state.isDarkTheme?H:U:void 0,A=o.createElement(y.default,{radioButtons:v,selectedKey:P,rowStyle:z.rowStyle,textStyle:k.default.rowTitleFontStyle(this._currentTheme),dividerType:y.DividerType.Between,disableSelectionAnimation:!0,onSelected:this._onModeSelected,fullWidth:!0}),N=o.createElement(d.default,{style:t?w.default.pointerCursor:void 0,onPress:t?this._isFlippedSelected:void 0,activeOpacity:.8},o.createElement(E.default,{key:this.state.currentTheme,colorTheme:this.state.currentTheme,userColor:this.state.userColor,isFlipped:this.state.isFlipped})),L=R.isAccessibleTheme(this.state.currentTheme)?void 0:G._themeToThemeColorOption(this.state.currentTheme,this.state.userColor),D=o.createElement(M.default,{style:z.colorPicker,useDarkTheme:this.state.isDarkTheme,disabled:C,backgroundColor:this._themeColors.primaryBackgroundColor,selectedColorOption:L,onSelectColor:this._onThemeColorSelected});return o.createElement(o.View,{style:[z.container,this.props.style]},i,N,a,D,l,_,c,A,g,h,m)}static _flipAvailableForTheme(e){return R.isMonoTheme(e)}static _themeColorOptionToTheme(e,t){switch(e){case M.ThemeColorOption.Classic:return t?x.Theme.DelphiDark:x.Theme.Delphi;case M.ThemeColorOption.Colorful:return t?x.Theme.ColorfulDark:x.Theme.Colorful;default:return t?x.Theme.MonoDark:x.Theme.Mono}}static _themeToThemeColorOption(e,t){switch(e){case x.Theme.DelphiDark:case x.Theme.Delphi:return M.ThemeColorOption.Classic;case x.Theme.ColorfulDark:case x.Theme.Colorful:return M.ThemeColorOption.Colorful}if(t)switch(t.key){case"blue":return M.ThemeColorOption.Blue;case"fuschia":return M.ThemeColorOption.Fuschia;case"mint":return M.ThemeColorOption.Mint;case"orange":return M.ThemeColorOption.Orange;case"rose":return M.ThemeColorOption.Rose;case"yellow":return M.ThemeColorOption.Yellow}}}t.default=G},65186:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThemePage=void 0;const n=i(96486),o=i(38933),s=i(16778),a=i(10102),r=i(77381),l=i(39285),c=i(15877),d=i(33754),u=i(30124),g=i(66127),h=i(29130),p=i(36150),m=i(81760),S=i(212),C=i(19675),f=i(97634),y=(0,c.lazyProperties)({pageInner:()=>s.Styles.createViewStyle({flex:1,borderTopLeftRadius:20,borderTopRightRadius:20,borderBottomLeftRadius:20,borderBottomRightRadius:20,backgroundColor:m.Color.white,alignItems:"center",paddingTop:25,paddingBottom:25,borderWidth:1,borderStyle:"solid",borderColor:m.Color.transparent}),pageInnerCompact:()=>s.Styles.createViewStyle({borderTopLeftRadius:10,borderTopRightRadius:10,borderBottomLeftRadius:10,borderBottomRightRadius:10,paddingTop:10,paddingBottom:6,borderWidth:1}),bubble:()=>s.Styles.createViewStyle({backgroundColor:m.Color.gray400,borderTopRightRadius:10,borderBottomLeftRadius:10,borderBottomRightRadius:10,padding:13,alignSelf:"flex-start",marginBottom:4,marginLeft:20,marginRight:50}),bubbleCompact:()=>s.Styles.createViewStyle({marginLeft:10}),bubbleSelf:()=>s.Styles.createViewStyle({backgroundColor:m.Color.gray50,borderTopLeftRadius:10,borderTopRightRadius:10,borderBottomLeftRadius:10,padding:13,alignSelf:"flex-end",marginBottom:4,marginRight:30,marginLeft:20}),bubbleSelfCompact:()=>s.Styles.createViewStyle({marginRight:10}),bubbleWithGradient:()=>s.Styles.createViewStyle({backgroundColor:m.Color.transparent}),bubbleWithSmallerPadding:()=>s.Styles.createViewStyle({padding:10}),bubbleRTL:()=>s.Styles.createViewStyle({borderTopRightRadius:0,borderTopLeftRadius:10,borderBottomRightRadius:10,borderBottomLeftRadius:10}),bubbleSelfRTL:()=>s.Styles.createViewStyle({borderBottomLeftRadius:0,borderTopRightRadius:10,borderTopLeftRadius:10,borderBottomRightRadius:10}),gradient:()=>s.Styles.createViewStyle({position:"absolute",top:0,left:0,right:0,bottom:0,borderTopRightRadius:10,borderBottomLeftRadius:10,borderBottomRightRadius:10}),gradientSelf:()=>s.Styles.createViewStyle({position:"absolute",top:0,left:0,right:0,bottom:0,borderTopLeftRadius:10,borderTopRightRadius:10,borderBottomLeftRadius:10}),bubbleText:()=>s.Styles.createTextStyle({color:m.Color.white,backgroundColor:m.Color.transparent})});class _ extends r.default{constructor(){super(...arguments),this._bubbleText=(e,t)=>{let i;return 0===t?i="ColorThemeDialog.ClassicThemeBubble1":1===t?i="ColorThemeDialog.ClassicThemeBubble2":2===t?i="ColorThemeDialog.ClassicThemeBubble3":3===t&&(i="ColorThemeDialog.ClassicThemeBubble4"),i?d.getString(i):""},this._renderBubble=(e,t)=>{const i=S.default.themeStylesForTheme(this.props.colorTheme),n=[e.fromSelf?y.bubbleSelf:y.bubble],a=[e.fromSelf?y.gradientSelf:y.gradient];let r;n.push(e.fromSelf?y.bubbleSelfCompact:y.bubbleCompact),this._getContext().isRTL&&(n.push(e.fromSelf?y.bubbleSelfRTL:y.bubbleRTL),a.push(e.fromSelf?y.bubbleSelfRTL:y.bubbleRTL));const c=e.fromSelf&&!e.isFlipped||!e.fromSelf&&e.isFlipped;c&&i.bubbleColorSelfStyle&&!this.state.modernizeConversationList?n.push(i.bubbleColorSelfStyle):c&&i.bubbleColorSelfStyleModernize&&this.state.modernizeConversationList?n.push(i.bubbleColorSelfStyleModernize):i.bubbleColorOtherStyle?n.push(i.bubbleColorOtherStyle):e.gradientColors&&(n.push(y.bubbleWithGradient),r=s.createElement(o.GradientView,{style:a,colors:e.gradientColors,direction:o.GradientDirection.RIGHT})),this.state.useSmallPaddingBubbles&&n.push(y.bubbleWithSmallerPadding);const d=[y.bubbleText];let u;return c&&i.bubbleTextColorSelfStyle?d.push(i.bubbleTextColorSelfStyle):i.bubbleTextColorOtherStyle&&d.push(i.bubbleTextColorOtherStyle),u=s.createElement(C.BodyText,{style:d,allowFontScaling:!1},e.text),s.createElement(l.default,{key:"bubble"+t,style:n},r,u)}}_buildState(e,t){const i={isMobileScreenReaderEnabled:p.default.isMobileScreenReaderEnabled(),isUsingStackNavigationContext:u.default.isUsingStackNavigationContext(),useSmallPaddingBubbles:h.default.isHeightSmallerThanThreshold(630,this._getRootViewId()),modernizeConversationList:g.default.canModernizeConversationList()};return t&&this._initColorPages(e,i),i}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i),this._initColorPages(e,t)}_initColorPages(e,t){const i=f.isMonoTheme(e.colorTheme),o=e.isFlipped&&i,s=i?a.gradientColorsForColorInfo(e.userColor):void 0;this._bubbleTextConfigs=[{text:this._bubbleText(e,0),gradientColors:s||a.gradientColorsForSerializedColor(a.SerializedColorByNumber.Yellow),isFlipped:o},{text:this._bubbleText(e,1),gradientColors:s||a.gradientColorsForSerializedColor(a.SerializedColorByNumber.Fuschia),isFlipped:o},{text:this._bubbleText(e,2),fromSelf:!0,gradientColors:s,isFlipped:o},{text:this._bubbleText(e,3),gradientColors:s||a.gradientColorsForSerializedColor(a.SerializedColorByNumber.Mint),isFlipped:o}];let r=3;h.default.isHeightSmallerThanThresholdNoSubscription(630,this._getRootViewId())&&(r=Math.min(r,this._bubbleTextConfigs.length-1)),this._bubbleTextConfigs=n.take(this._bubbleTextConfigs,r)}render(){const e=S.default.themeStylesForTheme(this.props.colorTheme),t=this.props.pageWidth?s.Styles.createViewStyle({width:this.props.pageWidth-5},!1):void 0,i=[y.pageInner,t,e.messageStreamBackgroundColorStyle,e.dividerBorderColorStyle,y.pageInnerCompact];return s.createElement(l.default,{style:this.props.style,accessibilityLabel:f.getAccessibilityLabel(this.props.colorTheme),onPress:this.state.isMobileScreenReaderEnabled?this.props.onSelectedThemePress:void 0,tabIndex:-1},s.createElement(l.default,{style:i},n.map(this._bubbleTextConfigs,this._renderBubble)))}}t.ThemePage=_,t.default=_},64867:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeThumbnail=t.ThumbnailSize=void 0;const n=i(16778),o=i(88837),s=i(15877),a=i(74606),r=i(81760),l=i(80837),c=i(66127);!function(e){e[e.Default=0]="Default",e[e.Small=1]="Small"}(t.ThumbnailSize||(t.ThumbnailSize={}));const d=(0,s.lazyProperties)({thumbnail:()=>n.Styles.createViewStyle({width:130,height:130,borderRadius:10,borderWidth:2,borderColor:r.Color.transparent,paddingHorizontal:10,paddingVertical:24,justifyContent:"space-between",overflow:"visible"}),thumbnailCompact:()=>n.Styles.createViewStyle({width:110,height:110,paddingVertical:14}),thumbnailLight:()=>n.Styles.createViewStyle({backgroundColor:r.Color.white,borderColor:r.Color.gray200}),thumbnailDark:()=>n.Styles.createViewStyle({backgroundColor:r.Color.black}),selectedThumbnail:()=>n.Styles.createViewStyle({borderColor:r.Color.blue}),bubble:()=>n.Styles.createViewStyle({height:21,width:80,borderRadius:4,backgroundColor:r.Color.delphiBubbleColorOther}),bubbleCompact:()=>n.Styles.createViewStyle({width:67}),bubbleWide:()=>n.Styles.createViewStyle({width:90}),bubbleAccessible:()=>n.Styles.createViewStyle({backgroundColor:r.Color.gray400}),bubbleDark:()=>n.Styles.createViewStyle({backgroundColor:r.Color.delphiDarkBubbleColorOther}),bubbleAccessibleDark:()=>n.Styles.createViewStyle({backgroundColor:r.Color.white}),myBubble:()=>n.Styles.createViewStyle({alignSelf:"flex-end",backgroundColor:r.Color.delphiBubbleColorSelf}),myBubbleModernize:()=>n.Styles.createViewStyle({alignSelf:"flex-end",backgroundColor:r.Color.delphiBubbleColorSelfModernize}),myBubbleAccessible:()=>n.Styles.createViewStyle({backgroundColor:r.Color.gray50}),myBubbleDark:()=>n.Styles.createViewStyle({backgroundColor:r.Color.delphiDarkBubbleColorSelf}),myBubbleAccessibleDark:()=>n.Styles.createViewStyle({backgroundColor:r.Color.gray400}),toggle:()=>n.Styles.createViewStyle({position:"absolute",top:-9,right:-9,marginRight:0})});class u extends o.ComponentBase{_buildState(e,t){return{modernizeConversationList:c.default.canModernizeConversationList()}}render(){const e=[d.thumbnail,this.props.compact?d.thumbnailCompact:void 0,this.props.dark?d.thumbnailDark:d.thumbnailLight,this.props.selected?d.selectedThumbnail:void 0],t=[this._renderBubble(0),this._renderBubble(1),this._renderBubble(2)],i=this.props.selected?n.createElement(a.default,{style:d.toggle,isOn:!0,selectionColor:r.Color.blue,colorThemeOverride:this.props.colorThemeOverride,importantForAccessibility:n.Types.ImportantForAccessibility.NoHideDescendants}):void 0;return n.createElement(n.View,{style:[l.default.overflowVisible,this.props.style]},n.createElement(n.Button,{style:e,importantForAccessibility:this.props.importantForAccessibility,accessibilityLabel:this.props.accessibilityLabel,accessibilityTraits:this.props.accessibilityTraits,tabIndex:this.props.tabIndex,activeOpacity:.8,onPress:this.props.onPress},t),i)}_renderBubble(e){const t=[d.bubble];return 1===e?this.state.modernizeConversationList?t.push(d.myBubbleModernize):t.push(d.myBubble):2===e&&t.push(d.bubbleWide),this.props.compact&&t.push(d.bubbleCompact),this.props.highContrast?1===e?t.push(this.props.dark?d.myBubbleAccessibleDark:d.myBubbleAccessible):t.push(this.props.dark?d.bubbleAccessibleDark:d.bubbleAccessible):this.props.dark&&t.push(1===e?d.myBubbleDark:d.bubbleDark),n.createElement(n.View,{key:"bubble"+e,style:t})}}t.ThemeThumbnail=u,t.default=u},39320:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(15877),a=i(33754),r=i(81760),l=i(11010),c=(0,s.lazyProperties)({newLabel:()=>n.Styles.createViewStyle({backgroundColor:r.Color.red,paddingHorizontal:6,borderRadius:8}),newLabelText:()=>n.Styles.createTextStyle({color:r.Color.white,fontSize:l.default.controlFontSize.smallBadge,font:l.default.font.uiDisplayBold})});class d extends o.ComponentBase{render(){return n.createElement(n.View,{style:[c.newLabel,this.props.style]},n.createElement(n.Text,{style:[c.newLabelText]},a.getString("Global.NewIndicatorUpper")))}}t.default=d},58115:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(98293),s=i(51077),a=i(71830),r=i(22854),l=i(70891),c=i(10117),d=i(15877),u=i(33754),g=i(23752),h=i(6658),p=i(81760),m=i(11010),S=i(11828),C=i(19675),f=i(2301),y=i(67977),_=h.messageTextLineHeight,v=(0,d.lazyProperties)({toastContentContainer:()=>n.Styles.createViewStyle({flexDirection:"row",alignSelf:"stretch",alignItems:"flex-start",justifyContent:"flex-start",paddingHorizontal:10}),toastTextContentContainer:()=>n.Styles.createViewStyle({flex:1,alignItems:"center",justifyContent:"center",marginTop:10,marginHorizontal:10}),toastContent:()=>n.Styles.createViewStyle({flex:1,marginLeft:12,alignSelf:"stretch",justifyContent:"center"}),toastTitle:()=>n.Styles.createTextStyle({color:p.Color.white}),toastMessageContentContainer:()=>n.Styles.createViewStyle({marginTop:2,alignSelf:"stretch",height:_}),toastLastMessageOverrideText:()=>n.Styles.createTextStyle({flex:1,lineHeight:_,color:p.Color.white}),toastTextContainer:()=>n.Styles.createTextStyle({color:p.Color.white,textAlign:"center",backgroundColor:p.Color.transparent}),iconContainer:()=>n.Styles.createViewStyle({height:12,width:17})});class b extends o.default{_renderNotificationContent(){if(!this.state.currentMessage&&!this.state.messageText)return;let e;if(this.state.currentMessage){const t=[m.default.fontStyle.body,v.toastLastMessageOverrideText],i=n.Styles.combine({},t),o={processing:l.ProcessingDefaults.Preview,trimToFirstLine:!0,forceLayoutInRTL:!0,allowLargeEmoticons:!1,renderMedia:!1,mediaPlaceholderIconColor:p.Color.white,numberOfLines:1,message:this.state.currentMessage,textOverrideStyle:i,atMentionStyle:i,atMentionMeOverrideStyle:i,renderSimpleAtMentions:!0};e=n.createElement(n.View,{style:v.toastContent},n.createElement(C.RowTitle,{style:v.toastTitle,numberOfLines:1},this.state.headerText),this._getLastMessageContent(o))}else this.state.messageText&&(e=n.createElement(n.View,{style:v.toastTextContentContainer},n.createElement(C.BodyText,{bold:!0,style:v.toastTextContainer},this.state.messageText)));return n.createElement(n.View,{style:v.toastContentContainer},this._getNotificationIcon(),e)}_getNotificationIcon(){return this.state.toastCreator?n.createElement(f.UserIcon,{key:"userIcon",userMri:this.state.toastCreator,size:y.UserIconSize.Size40,useCircleForAgentMask:!0}):this.state.conversationId?n.createElement(r.ConversationIcon,{conversationId:this.state.conversationId,size:y.ConversationIconSize.Size40}):void 0}_getLastMessageContent(e){if(this.state.currentMessage){let t;if(a.isEncryptedThread(this.state.currentMessage.conversationId))t=n.createElement(C.BodyText,{style:v.toastTitle},u.getString("Notifications.E2eeTextNotificationLabel"));else if(s.isScheduledCallType(this.state.currentMessage.messagetype)){let e;this.state.messageTextIcon&&(e=n.createElement(n.View,{key:"placeholderIcon",style:v.iconContainer},n.createElement(c.IconView,{color:p.Color.white,size:S.IconSize.size12,icon:this.state.messageTextIcon}))),t=n.createElement(C.BodyText,{style:v.toastTitle,numberOfLines:1},e,this.state.messageText)}else t=n.createElement(g.default,{message:this.state.currentMessage,options:e});return n.createElement(n.View,{style:v.toastMessageContentContainer},t)}}}t.default=b},85639:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationPermissionPromptActionButton=void 0;const n=i(2604),o=i(87466),s=i(16778),a=i(88837),r=i(60),l=i(98278),c=i(46096),d=i(36237),u=i(15877),g=i(88553),h=i(29143),p=i(81736),m=i(22222),S=i(81760),C=i(11010),f=i(78262),y=(0,u.lazyProperties)({buttonTextStyle:()=>s.Styles.createTextStyle({fontSize:C.default.controlFontSize.smallButton})});class _ extends a.ComponentBase{constructor(){super(...arguments),this._displayTracked=!1,this._pressed=!1,this._onPress=()=>{this._pressed=!0;const e=p.default.permissionStatus(f.PermissionType.Notifications);n.PermissionStatus.Granted,this._log("permission "+n.PermissionStatus[e]+", prompting"),g.default.initNotificationsAndRequestPermissions().then((e=>{this._onAttemptToChangeNotificationPermissionStatus(e?n.PermissionStatus.Granted:n.PermissionStatus.Denied),e||this._launchSettings()}),this._handlePermissionRequestFailure)},this._handlePermissionRequestFailure=()=>{this._log("NotificationQueueService initialization failed"),this.props.onNotificationPermissionRequestFailed&&this.props.onNotificationPermissionRequestFailed(),this._launchSettings()}}componentDidMount(){super.componentDidMount(),n.default.notificationsPermissionStatus().then((e=>this._status=e)),this._activationSubscription=r.default.subscribeForChanges("NotificationPermissionPromptActionButton",(e=>{switch(e){case s.Types.AppActivationState.Background:this._appBackgrounded=!0;break;case s.Types.AppActivationState.Active:this._appBackgrounded&&(this._appBackgrounded=!1,n.default.notificationsPermissionStatus().then((e=>{this._onAttemptToChangeNotificationPermissionStatus(e)})))}})),this._displayTracked||(d.track(new h.NotificationsPromptDisplayed(this.props.origin)),this._displayTracked=!0)}componentWillUnmount(){super.componentWillUnmount(),this._activationSubscription&&(this._activationSubscription.unsubscribe(),this._activationSubscription=void 0)}render(){return s.createElement(m.default,{buttonSize:l.SXButtonSize.Small,buttonStyle:l.SXButtonStyle.Custom,textStyleDeprecated:this.props.textStyle||y.buttonTextStyle,style:this.props.style,title:this.props.title,allowTextWrap:!0,buttonConfig:this._getButtonConfig(),onPress:this._onPress})}_getButtonConfig(){return this.props.buttonConfig?this.props.buttonConfig:{textColor:S.Color.black,backgroundColor:S.Color.white}}_onAttemptToChangeNotificationPermissionStatus(e){this._log("notification permission status changed: "+n.PermissionStatus[e]),this._openSettingsEvent?(e===n.PermissionStatus.Granted&&this._openSettingsEvent.enabledNotifications(),d.track(this._openSettingsEvent),this._openSettingsEvent=void 0,p.default.setPermissionStatus(f.PermissionType.Notifications,e,e,n.PermissionOrigin.NotificationPrompt)):e===n.PermissionStatus.Granted&&p.default.setPermissionStatus(f.PermissionType.Notifications,e,e,n.PermissionOrigin.NotificationPromptExternal),this._status===e&&this._pressed&&(this._pressed=!1),this.props.onAttemptToChangeNotificationPermissionStatus&&this.props.onAttemptToChangeNotificationPermissionStatus(e)}_launchSettings(){this._openSettingsEvent=new h.NotificationsPromptSettingsOpened(this.props.origin),o.default.openAppNotificationsSettings()}_log(e){d.log(c.LogTraceArea.Permissions,"NotificationPermissionPromptActionButton in "+h.NotificationPromptOrigin[this.props.origin]+" area: "+e)}}t.NotificationPermissionPromptActionButton=_},46068:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(15069),o=i(31844),s=i(2604),a=i(16778),r=i(13944),l=i(10117),c=i(36237),d=i(15877),u=i(33754),g=i(85639),h=i(29143),p=i(81736),m=i(29130),S=i(81760),C=i(11010),f=i(11828),y=i(78262),_=i(60305),v=i(19675),b=i(24576),T=(0,d.lazyProperties)({container:()=>a.Styles.createViewStyle({paddingVertical:15,paddingHorizontal:15,borderStyle:"solid",borderBottomWidth:1}),containerBottomBorder:()=>a.Styles.createViewStyle({borderBottomWidth:10}),alternativePortraitContent:()=>a.Styles.createViewStyle({alignItems:"center",paddingBottom:20}),desktopContent:()=>a.Styles.createViewStyle({alignItems:"flex-end",paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:10,marginBottom:5}),blueBackground:()=>a.Styles.createViewStyle({backgroundColor:S.Color.blue}),paragraphMargin:()=>a.Styles.createViewStyle({marginBottom:10}),centeredParagraph:()=>a.Styles.createViewStyle({justifyContent:"center"}),headingRow:()=>a.Styles.createViewStyle({flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),textHeader:()=>a.Styles.createTextStyle({marginHorizontal:10,textAlign:"center"}),headingRowPortrait:()=>a.Styles.createViewStyle({flexDirection:"row",justifyContent:"center",alignSelf:"stretch",paddingTop:5}),headingRowDesktop:()=>a.Styles.createViewStyle({flexDirection:"row",alignSelf:"stretch",paddingTop:9}),descriptionRow:()=>a.Styles.createTextStyle({textAlign:"center",marginHorizontal:5}),descriptionRowDesktop:()=>a.Styles.createTextStyle({marginHorizontal:12,fontSize:C.default.controlFontSize.subtitle}),button:()=>a.Styles.createViewStyle({marginTop:5}),buttonDesktop:()=>a.Styles.createButtonStyle({marginRight:12}),buttonTextStyle:()=>a.Styles.createTextStyle({fontSize:C.default.controlFontSize.smallButton}),closeButton:()=>a.Styles.createViewStyle({position:"absolute",right:-10,top:-10,padding:10}),closeButtonDesktop:()=>a.Styles.createViewStyle({position:"absolute",right:-3,top:-3,padding:10}),titleIcon:()=>a.Styles.createViewStyle({marginTop:3,marginLeft:12,marginRight:5}),whiteText:()=>a.Styles.createTextStyle({color:S.Color.white}),lightThemeBorder:()=>a.Styles.createViewStyle({borderColor:S.Color.gray50}),darkThemeBorder:()=>a.Styles.createViewStyle({borderColor:S.Color.gray400})});class P extends b.default{constructor(){super(...arguments),this._onNotificationPermissionRequestFailed=()=>{p.default.closeNotificationsPrompt()},this._onAttemptToChangeNotificationPermissionStatus=e=>{e===s.PermissionStatus.Granted&&p.default.closeNotificationsPrompt()},this._onClose=()=>{p.default.closeNotificationsPrompt(),c.track(new h.NotificationsPromptClosed(h.NotificationPromptOrigin.ConversationList))}}static containsLargeContent(){return P.getHeadingText().length>100}static getHeadingText(){return u.getString("NotificationsPrompt.Text")}_buildState(e,t){const i=this._getContext().isPresentedInDesktopLeftNav&&!_.default.isTablet();return{isDesktop:i,hideButton:p.default.permissionStatus(y.PermissionType.Notifications)===s.PermissionStatus.Denied,deviceOrientation:i?o.DeviceOrientation.Portrait:m.default.getDeviceOrientation(this._getRootViewId())}}render(){if(!n.BrowserEnvironment.supportsNotifications())return null;const e=[this._themeStyles.primaryBackgroundColorStyle,this._themeStyles.dividerBorderColorStyle,T.container],t=this.state.deviceOrientation===o.DeviceOrientation.Landscape,i=!t;this.state.isDesktop||e.push(T.containerBottomBorder),e.push(this._useDarkTheme()?T.darkThemeBorder:T.lightThemeBorder),this.state.isDesktop?e.push(T.desktopContent):i&&e.push(T.alternativePortraitContent),e.push(T.blueBackground),this.props.style&&e.push(this.props.style);const s=this.state.isDesktop?[T.paragraphMargin,T.headingRowDesktop]:i?[T.paragraphMargin,T.headingRowPortrait]:[T.headingRow],r=T.whiteText,l=this._renderTitleIcon(),c=this._renderCloseButton();let d;if(this.state.isDesktop){const e=[T.paragraphMargin];d=a.createElement(a.View,{style:e},a.createElement(a.Text,{style:[T.descriptionRowDesktop,r]},P.getHeadingText()))}else if(i){const e=[T.paragraphMargin,T.centeredParagraph];d=a.createElement(a.View,{style:e},a.createElement(a.Text,{style:[T.descriptionRow,r],numberOfLines:3,ellipsizeMode:"tail"},P.getHeadingText()))}const p=this.state.isDesktop?T.buttonDesktop:t?void 0:T.button,m={textColor:S.Color.black,backgroundColor:S.Color.white},C=this.state.hideButton?void 0:a.createElement(g.NotificationPermissionPromptActionButton,{origin:h.NotificationPromptOrigin.ConversationList,title:u.getString("NotificationsPrompt.ButtonLabel"),style:p,textStyle:T.buttonTextStyle,buttonConfig:m,onAttemptToChangeNotificationPermissionStatus:this._onAttemptToChangeNotificationPermissionStatus,onNotificationPermissionRequestFailed:this._onNotificationPermissionRequestFailed}),f=this._getHeadingVariant(),y=this.state.isDesktop?r:[r,T.textHeader];return a.createElement(a.View,{style:e},a.createElement(a.View,{style:s},l,a.createElement(v.RowTitle,{style:y},f),c,t?C:void 0),d,i?C:void 0)}_getHeadingVariant(){const e=this.state.deviceOrientation===o.DeviceOrientation.Landscape;return this.state.isDesktop?u.getString("NotificationsPrompt.HeadingEnableWeb"):e?u.getString("NotificationsPrompt.ShortText"):u.getString("NotificationsPrompt.Heading")}_renderTitleIcon(){if(this.state.isDesktop)return a.createElement(l.default,{size:f.IconSize.size16,color:S.Color.white,icon:f.SkypeIcon.Alert,style:T.titleIcon})}_renderCloseButton(){if(this.state.deviceOrientation!==o.DeviceOrientation.Landscape)return a.createElement(r.default,{size:f.IconSize.size16,color:S.Color.white,hoverColor:S.Color.white,icon:f.SkypeIcon.ClosePanel,style:this.state.isDesktop?T.closeButtonDesktop:T.closeButton,title:u.getString("NotificationsPrompt.CloseButtonTitle"),onPress:this._onClose})}}t.default=P},9709:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(38933),o=i(16778),s=i(88837),a=i(23293),r=i(15877),l=i(89808),c=i(81760),d=i(11010),u=i(80837),g=(0,r.lazyProperties)({gradientView:()=>o.Styles.createViewStyle({borderRadius:10,alignItems:"center",justifyContent:"center"}),overlayText:()=>o.Styles.createTextStyle({color:c.Color.white,font:d.default.font.uiDisplayBold,fontSize:d.default.fontSize.size18})});class h extends s.ComponentBase{_buildState(e,t){return{gradientColors:e.conversationId?a.default.getGradientColors(e.conversationId):l.default.getGradientColors()}}render(){return o.createElement(o.View,{ignorePointerEvents:!0,style:u.default.absoluteFill},o.createElement(n.GradientView,{style:[u.default.absoluteFill,g.gradientView],colors:this.state.gradientColors,direction:n.GradientDirection.BOTTOM_RIGHT},o.createElement(o.Text,{style:g.overlayText},this.props.label)))}}t.default=h},32808:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(3291),s=i(10117),a=i(15877),r=i(33754),l=i(81760),c=i(11828),d=i(19675),u=i(24576),g=(0,a.lazyProperties)({overlayPanel:()=>n.Styles.createViewStyle({alignSelf:"stretch",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:l.Color.whiteOverlay90}),overlayPanelDarkTheme:()=>n.Styles.createViewStyle({backgroundColor:l.Color.blackOverlay70}),overlayPanelDashedInner:()=>n.Styles.createViewStyle({flex:1,flexDirection:"row",alignSelf:"stretch",alignItems:"center",justifyContent:"center",margin:10,borderColor:l.Color.gray300,borderWidth:2,borderStyle:"dashed"}),messageContainer:()=>n.Styles.createViewStyle({flex:-1,flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:20}),messageText:()=>n.Styles.createTextStyle({flex:-1,color:l.Color.gray400,marginLeft:10}),messageTextDarkTheme:()=>n.Styles.createTextStyle({color:l.Color.gray100})});class h extends u.default{render(){const e=[g.messageText],t=[g.overlayPanel],i=this._useDarkTheme();i&&(e.push(g.messageTextDarkTheme),t.push(g.overlayPanelDarkTheme));let o=r.getString("DragAndDrop.FileUploadMessage");return this._canDragContacts()&&(o=r.getString("DragAndDrop.FileUploadOrContactShareMessage")),n.createElement(n.View,{style:t,ignorePointerEvents:!0},n.createElement(n.View,{style:g.overlayPanelDashedInner},n.createElement(n.View,{style:g.messageContainer},n.createElement(s.default,{icon:c.SkypeIcon.Media,size:c.IconSize.size24,color:i?l.Color.gray100:l.Color.gray400}),n.createElement(d.Header,{size:5,style:e},o))))}_canDragContacts(){return o.default.isDragAndDropContactsEnabled()}}t.default=h},62216:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(96894),s=i(35517),a=i(99620),r=i(4096),l=i(91),c=i(75942),d=i(32749),u=i(21063),g=i(50517),h=i(17093),p=i(30124),m=i(62393),S=i(34273);t.default=class{static renderComponent(e,t,i){return e instanceof h.GalleryNavigationContext?n.createElement(c.default,Object.assign({},t,{conversationId:e.state.conversationId,viewMode:e.state.viewMode,callId:e.state.callId,parentConversationId:e.state.parentConversationId,onClose:e.state.onClose})):e instanceof h.FindPanelNavigationContext?n.createElement(u.default,Object.assign({key:"find",conversationId:e.state.conversationId,overflowActionConfig:e.state.overflowActionConfig,onFindComplete:e.state.onFindComplete,showHeader:!0},t)):e instanceof h.LocationPickerContext?p.default.isMobileSplitView()?n.createElement(g.default,{route:{params:Object.assign(Object.assign({},t),e.state)}}):n.createElement(d.default,Object.assign({key:"location",conversationId:e.state.conversationId},t)):e instanceof h.InAppBrowserNavigationContext?n.createElement(s.default,{key:"browser",route:{params:{origin:e.state.origin,url:e.state.url,integrationCorrelationId:e.state.integrationCorrelationId,headers:e.state.headers,injectedJavaScript:e.state.injectedJavaScript,onNavigationStateChange:e.state.onNavigationStateChange,onClose:i,onShareComplete:e.state.onShareComplete,onWebViewClose:e.state.onWebViewClose,onMessage:e.state.onMessage,headerTitle:e.state.headerTitle,conversationId:e.state.conversationId,messageId:e.state.messageId,suggestionAttributes:e.state.suggestionAttributes,openIntegrationScenario:e.state.perfScenario,useBingMiniCanvas:e.state.useBingMiniCanvas}}}):e instanceof o.default.AddinNavigationContext?o.default.AddinStackNavigator.renderSceneContent(e,t):e instanceof S.default.NavigationContext.ScheduleCallNavigationContext?S.default.StackNavigator.renderSceneContent(e,t):e instanceof m.default.NavigationContext.PollNavigationContext?m.default.StackNavigator.renderSceneContent(e,t):e instanceof h.ConversationInCallNavigationContext?n.createElement(a.default,Object.assign({},t,{key:"callConversationPanel",conversationId:e.state.conversationId,callId:e.state.callId,onClose:e.state.onClose})):e instanceof h.SubtitlesNavigationContext?n.createElement(l.default,Object.assign({key:"callTranscriptionPanelView",callId:e.state.callId,reactionsMri:e.state.conversationMri,onPressClose:e.state.onClose},t)):e instanceof h.CallingDebugPanelNavigationContext?n.createElement(r.default,{route:{params:{callId:e.state.callId||"",nativeWindow:e.state.nativeWindow||!1}}}):void 0}}},10226:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(98356),s=i(16778),a=i(3056),r=i(98278),l=i(37490),c=i(46096),d=i(11375),u=i(36237),g=i(72490),h=i(15877),p=i(4735),m=i(17093),S=i(29130),C=i(62216),f=i(51070),y=i(26978),_=i(81760),v=i(40363),b=i(80837),T=i(60305),P=i(24576),A=i(53374),k=r.SideBarWidths.base,I=(0,h.lazyProperties)({absoluteStyle:()=>s.Styles.createViewStyle({position:"absolute",top:0,bottom:0}),flyoutContainer:()=>s.Styles.createViewStyle({left:0,width:k,flex:0,flexDirection:"column",borderLeftWidth:2,borderStyle:"solid",borderColor:_.Color.gray50}),flyoutInnerUnspecified:()=>s.Styles.createViewStyle({flex:1,minWidth:k,alignSelf:"stretch",borderLeftWidth:2,borderStyle:"solid",borderColor:_.Color.gray50}),flyoutInnerPreview:()=>s.Styles.createViewStyle({borderLeftWidth:2,borderStyle:"solid",borderColor:_.Color.gray50}),flyoutContainerNarrow:()=>s.Styles.createViewStyle({right:0,left:0}),floating:()=>s.Styles.createViewStyle({right:0}),floatingShadow:()=>s.Styles.createViewStyle({shadowOffset:{height:0,width:0},shadowRadius:16,shadowColor:_.Color.blackOverlay20}),floatingNarrow:()=>s.Styles.createViewStyle({right:0,left:0}),animatedRightPanelContainer:()=>s.Styles.createViewStyle({alignSelf:"stretch"}),fixedWidth:()=>s.Styles.createViewStyle({width:k}),dragHandle:()=>s.Styles.createViewStyle({position:"absolute",top:0,left:-10,bottom:0,width:20,backgroundColor:_.Color.transparent}),elevationAndroid:()=>s.Styles.createViewStyle({elevation:6})});class w extends P.default{constructor(){super(...arguments),this._wrapperWidthValue=new s.Animated.Value(0),this._wrapperWidthStyle=s.Styles.createAnimatedViewStyle({width:this._wrapperWidthValue}),this._contentWidthValue=new s.Animated.Value(0),this._contentWidthStyle=s.Styles.createAnimatedViewStyle({width:this._contentWidthValue}),this._rightPanelXValue=new s.Animated.Value(w._xValue(k+20)),this._rightPanelXStyle=s.Styles.createAnimatedViewStyle({transform:[{translateX:this._rightPanelXValue}]}),this._rightPanelOpacityValue=new s.Animated.Value(0),this._rightPanelOpacityStyle=s.Styles.createAnimatedViewStyle({opacity:this._rightPanelOpacityValue}),this._mainViewRefCallback=e=>{this._mainView=e||void 0},this.onPan=(e,t)=>{let i=e.pageX-e.initialPageX;if(this._getContext().isRTL?i>0&&(i=0):i<0&&(i=0),this._rightPanelXValue.setValue(i),e.isComplete){let n=!1;n=this._getContext().isRTL?e.velocityX<-.1||i<k/2*-1:e.velocityX>.1||i>k/2,n?this._closeRightPanel(t):this._openRightPanel()}},this._isRestrictedFocus=()=>{const e=this._isRightPanelVisible(this.props),t=this._isFlyoutFloating(this.props,this.state);return e&&t},this._onPanDragHandle=e=>{let t;t=this._isDragging?e.pageX-this._currentDragX:e.pageX-e.initialPageX,this._currentDragX=e.pageX,this._currentWidth-=t,this._currentWidth<r.SideBarWidths.base?this._currentWidth=r.SideBarWidths.base:this._currentWidth>r.SideBarWidths.maxRight&&(this._currentWidth=r.SideBarWidths.maxRight),this._contentWidthValue.setValue(this._currentWidth),e.isComplete?(this._expandedWidth=this._currentWidth,y.default.putWidth(y.SideBar.Right,this._expandedWidth),this.state.resizeOnCommit&&this._wrapperWidthValue.setValue(this._currentWidth),this._setIsDragging(!1)):this._isDragging||this._setIsDragging(!0)},this._onEscapeKey=()=>{const e=A.default.newCauseId();return u.log(c.LogTraceArea.Navigation,"RightSidebarView._onKeyUp, causeId: "+e),p.default.closeRightPanel(e,this._getRootViewId()),!0},this._openRightPanel=()=>{if(l.dismissAll(),this.state.useTabletUI)this._animateRightPanel(this._rightPanelXValue,0,!0,!0),this._contentWidthValue.setValue(this._currentWidth),this.state.resizeOnCommit&&this._wrapperWidthValue.setValue(this._currentWidth),this._rightPanelOpacityValue.setValue(1);else if(this.state.isMinDesktopSize)this._animateRightPanel(this._rightPanelOpacityValue,1,!0,!1),this._contentWidthValue.setValue(this.state.windowWidth),this.state.resizeOnCommit&&this._wrapperWidthValue.setValue(this.state.windowWidth),this._rightPanelXValue.setValue(0);else{const e=!!this.props.suppressAnimation&&!this._isFlyoutFloating(this.props,this.state);this.state.resizeOnCommit?(this._contentWidthValue.setValue(this._currentWidth),this._animateRightPanel(this._wrapperWidthValue,this._currentWidth,!e,!1)):this._animateRightPanel(this._contentWidthValue,this._currentWidth,!e,!1),this._rightPanelOpacityValue.setValue(1),this._rightPanelXValue.setValue(0)}},this._closeRightPanel=e=>{this._intCloseRightPanel((()=>{e&&e(),this.isComponentMounted()&&this.setState({viewMode:m.RightSidebarViewMode.None,renderedNavContext:void 0}),d.setFocus(d.FocusEvent.CloseRightPanel)}))},this._intCloseRightPanel=e=>{if(this.state.useTabletUI)this._animateRightPanel(this._rightPanelXValue,w._xValue(k+20),!0,!0,e),this._contentWidthValue.setValue(0),this.state.resizeOnCommit&&this._wrapperWidthValue.setValue(0),this._rightPanelOpacityValue.setValue(0);else if(this.state.isMinDesktopSize)this._animateRightPanel(this._rightPanelOpacityValue,0,!0,!1,e),this._contentWidthValue.setValue(0),this.state.resizeOnCommit&&this._wrapperWidthValue.setValue(0),this._rightPanelXValue.setValue(w._xValue(k));else{const t=!!this.props.suppressAnimation&&!this._isFlyoutFloating(this.props,this.state);this.state.resizeOnCommit?this._animateRightPanel(this._wrapperWidthValue,0,!t,!1,(()=>{this._contentWidthValue.setValue(0),e()})):this._animateRightPanel(this._contentWidthValue,0,!t,!1,e),this._rightPanelOpacityValue.setValue(0),this._rightPanelXValue.setValue(w._xValue(k))}},this._onInAppWebBrowserClose=()=>{if(this.state.renderedNavContext instanceof m.InAppBrowserNavigationContext){const e=this.state.renderedNavContext;e.state.onInAppWebBrowserClose&&e.state.onInAppWebBrowserClose(),this._onClose()}return!1},this._onClose=()=>{const e=A.default.newCauseId();u.log(c.LogTraceArea.Navigation,"RightSidebarView._onClose, causeId: "+e),p.default.closeRightPanel(e,this._getRootViewId())}}_buildState(e,t){const i=this._getRootViewId(),o=T.default.useTabletUI(),s=y.default.resizingEnabled(y.SideBar.Right);let a={windowWidth:S.default.getWidth(i),isMinDesktopSize:S.default.isMinDesktopWidth(i),useTabletUI:o,forceFloat:o,isResizeable:s,resizeOnCommit:s,topPadding:o?f.default.statusBarHeight():0};if(e.stackNavContext){const t=e.stackNavContext.getNavStack();t.length>0&&(a.renderedNavContext=n.last(t))}const l=a.renderedNavContext&&a.renderedNavContext instanceof m.InAppBrowserNavigationContext&&a.renderedNavContext.state.useBingMiniCanvas?r.SideBarWidths.miniCanvasRight:r.SideBarWidths.base;return this._expandedWidth=Math.max(l,y.default.getWidth(y.SideBar.Right)),this._currentWidth=this._expandedWidth,t&&(this._currentDragX=0,this._isDragging=!1),a}_isFlyoutFloating(e,t){if(t.forceFloat)return!0;return t.windowWidth-k-(e.leftNavCollapsedOrHidden?0:y.default.getWidthNoSubscription())<500&&!t.isMinDesktopSize}render(){const e=[I.animatedRightPanelContainer];let t=[I.absoluteStyle],i=!1;this.state.useTabletUI?(e.push(I.absoluteStyle,I.floating,I.floatingShadow,I.fixedWidth,this._rightPanelXStyle),t.push(I.flyoutContainer)):this.state.isMinDesktopSize?(e.push(this._rightPanelOpacityStyle,I.absoluteStyle),this._isRightPanelVisible(this.props)&&e.push(I.floatingNarrow),t.push(I.flyoutContainerNarrow)):(this.state.isResizeable?(i=!!this.state.renderedNavContext,this.state.resizeOnCommit?(e.push(this._wrapperWidthStyle,b.default.overflowVisible),t=[I.absoluteStyle,I.flyoutInnerPreview,this._contentWidthStyle],this._isDragging&&t.push(I.floating,I.floatingShadow)):(e.push(this._contentWidthStyle),t=[I.flyoutInnerUnspecified])):(e.push(this._contentWidthStyle),t.push(I.flyoutContainer)),this._isFlyoutFloating(this.props,this.state)&&(e.push(I.absoluteStyle,I.floating),this.state.resizeOnCommit?t.push(I.floatingShadow):e.push(I.floatingShadow))),this.props.mainStageNavigationViewUsesShadow,this._useDarkDivider()&&t.push(this._themeStyles.headerShadowBorderColorStyle);const n=i?s.createElement(s.GestureView,{style:I.dragHandle,preferredPan:s.Types.PreferredPanGesture.Horizontal,onPanHorizontal:this._onPanDragHandle,mouseOverCursor:s.Types.GestureMouseCursor.EWResize}):void 0,o=s.createElement(s.Animated.View,{style:t,restrictFocusWithin:this._isRestrictedFocus(),ref:this._mainViewRefCallback},this._renderRightPanelContent());return s.createElement(s.Animated.View,{key:"container"+this.state.useTabletUI,style:e},s.createElement(a.default,{isPresentedInDesktopSubview:!0,isPresentedInDesktopRightNav:!0},o,n))}UNSAFE_componentWillMount(){super.UNSAFE_componentWillMount(),v.default.isElectronOsx()&&g.default.addEscapeHandler(this._onEscapeKey)}componentDidMount(){super.componentDidMount(),this._isRightPanelVisible(this.props)?this._openRightPanel():this._mainView&&this._mainView.setFocusRestricted(!1)}componentWillUnmount(){super.componentWillUnmount(),g.default.removeEscapeHandler(this._onEscapeKey)}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i);const n=this._isRightPanelVisible(e),o=this._isRightPanelVisible(this.props),s=this._isFlyoutFloating(this.props,this.state);this._mainView&&this._mainView.setFocusRestricted(this._isRestrictedFocus()),o&&!n&&this._openRightPanel(),o&&n&&t.isMinDesktopSize&&this._openRightPanel(),!o&&n&&this._closeRightPanel(),y.default.putRightSideBarFloating(s)}_setIsDragging(e){this._isDragging!==e&&(this._isDragging=e,this.state.resizeOnCommit&&this.forceUpdate())}_renderRightPanelContent(){const e={isPresentedInDesktopSubview:!0,isPresentedInDesktopRightNav:!0,topPadding:this.state.topPadding,onClose:this._onClose};return C.default.renderComponent(this.state.renderedNavContext,e,this.state.renderedNavContext instanceof m.InAppBrowserNavigationContext?this._onInAppWebBrowserClose:void 0)}_useDarkDivider(){return this._useDarkTheme()||this._isPresentedInTabletRightNav()}_isRightPanelVisible(e){return!!e.stackNavContext&&e.stackNavContext.getNavStack().length>0}_animateRightPanel(e,t,i,n,a){this._rightPanelAnimation&&this._rightPanelAnimation.stop(),i?(this._rightPanelAnimation=s.Animated.timing(e,{toValue:t,easing:o.Easing.SkypeExpoInOut5,duration:o.Common.Duration.Default,useNativeDriver:n}),this._rightPanelAnimation.start((()=>{this.isComponentMounted()&&(this._rightPanelAnimation=void 0,a&&a())}))):(e.setValue(t),a&&a())}static _xValue(e){return e*(v.default.isRTL()?-1:1)}}t.default=w},24735:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(15069),s=i(29359),a=i(2604),r=i(19895),l=i(14069),c=i(75208),d=(i(78045),i(16778)),u=i(88837),g=i(35440),h=i(89391),p=i(78547),m=i(51587),S=i(94224),C=i(47447),f=i(47204),y=i(98278),_=i(13560),v=i(73145),b=i(46096),T=i(36237),P=i(15340),A=i(15877),k=i(33754),I=i(79154),w=i(10909),N=i(7581),M=i(30124),E=i(81736),x=i(94474),L=i(51070),R=i(83181),D=i(10265),B=i(90631),O=i(11411),F=(i(71445),i(22538)),V=i(69203),U=i(12187),H=(i(4057),i(81760)),W=i(40363),z=i(78262),G=i(80837),K=i(212),j=i(60305),q=i(63841),Q=i(97634),X=i(18037),J=i(12770),$=(i(28069),i(98180)),Y=i(26712),Z=i(53374),ee="RootAppView",te=(0,A.lazyProperties)({lightBackground:()=>d.Styles.createViewStyle({backgroundColor:H.Color.white}),darkBackground:()=>d.Styles.createViewStyle({backgroundColor:H.Color.darkThemeBackground}),fillScreen:()=>d.Styles.createViewStyle({flex:1,alignSelf:"stretch",flexDirection:"column"}),loadingScreen:()=>d.Styles.createViewStyle({position:"absolute",top:0,left:0,right:0,bottom:0,paddingTop:20,backgroundColor:H.Color.white})}),ie="upgradealertdialog";class ne extends u.ComponentBase{constructor(){super(...arguments),this._animateSplashScreenStarted=!1,this._shouldOpenForceUpgradeLinkExternalWindow=e=>{const t=h.default.getConfigSettings().helpGoParam.upgradeLearnMore+"/";return Y.default.removeHost(e)===t},this._onSplashScreenRef=e=>{this._splashScreen=e||void 0},this._onUpgradeDialogOkButtonClick=()=>{this._dismissUpgradeAlertDialog(),m.openAppStore()},this._onUpgradeDialogCancelButtonClick=()=>{this._dismissUpgradeAlertDialog()}}_buildState(e,t){const i=h.default.getS4LFeatures(),n=j.default.useTabletUI();let s={startupComplete:R.default.getStartupUIState()===R.StartupUIState.StartupComplete,incomingCallIds:S.default.CallingStore.getIncomingCallIds(),uiShown:R.default.isUIDisplayed(),isShowingCustomActionMenu:_.default.isCustomActionMenuShown(),useMobileCustomActionMenu:M.default.isUsingStackNavigationContext()||n,bottomSafeAreaInset:L.default.bottomSafeAreaInset(y.BottomInsetDefault),useTabletUI:n,appActivationState:p.default.getAppState(),darkThemeEnabled:F.HasStarted(X.default)?Q.isDarkTheme(X.default.colorTheme()):e.isDarkThemeActiveCached,theme:X.default.colorTheme()};if(t){o.BrowserEnvironment.isMobile()||d.UserInterface.useCustomScrollbars(),s.showSplashScreen=!s.startupComplete,s.upgradeScreendHasBeenDisplayed=!1}return!s.startupComplete||!t&&this.state.startupComplete||(i.upgrade&&i.upgrade.noticeUrl&&(s.shouldForceUpgrade=!0,T.log(b.LogTraceArea.RootAppView,"Displaying force upgrade screen on initial startup")),s.cameraRollGranted=E.default.permissionStatus(z.PermissionType.CameraRoll)===a.PermissionStatus.Granted),i.upgrade&&(s.upgradeUrl=i.upgrade.noticeUrl,s.upgradeRequired=i.upgrade.required),!this._hasRingsForState(s)&&this._presentingIncomingCallId&&(T.log(b.LogTraceArea.RootAppView,"No incoming ring, clearing ring"),this._presentingIncomingCallId=void 0),d.UserInterface.setNativeFocusOutlineEnabled(!1),s}UNSAFE_componentWillMount(){super.UNSAFE_componentWillMount();const e=K.default.themeColorsForTheme(this.props.isDarkThemeActiveCached?q.Theme.DelphiDark:q.Theme.Delphi),t=U.default.mergeStyles([U.default.createBarStyle(e.defaultStatusBarTheme),U.default.createBackgroundColorStyle(e.defaultStatusBarBackgroundColor)]);V.default.addOrUpdateStyle(ee,t,!0)}componentDidMount(){var e;super.componentDidMount();const t=Z.default.newCauseId();T.log(b.LogTraceArea.RootAppView,"componentDidMount causeId: "+t),this.state.startupComplete&&this._startAnimateSplashScreen(),this._maybePresentIncomingRing(t),this._maybeShowPartialBrowserSupportToast(t),this.state.cameraRollGranted&&this._preHeatMediaPicker();const i=K.default.themeColorsForTheme(null!==(e=this.state.theme)&&void 0!==e?e:this.props.isDarkThemeActiveCached?q.Theme.DelphiDark:q.Theme.Delphi);V.default.setDefaultStatusBarStyle(i.defaultStatusBarBackgroundColor,i.defaultStatusBarTheme),w.default.setBottomMarginDefault(this.state.bottomSafeAreaInset),I.default.open()}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i),!this.state.startupComplete&&t.startupComplete&&this._startAnimateSplashScreen()}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i);const n=Z.default.newCauseId();T.log(b.LogTraceArea.RootAppView,"componentDidUpdate rings: "+JSON.stringify(this.state.incomingCallIds)+" appState: "+this.state.appActivationState+" causeId: "+n),this._maybePresentIncomingRing(n),this._hasRingsForState(this.state)||this.state.appActivationState===d.Types.AppActivationState.Background||this._checkAndInstallAppUpgrades(n),this._checkElectronForceUpgrade(),this.state.cameraRollGranted&&!t.cameraRollGranted&&this._preHeatMediaPicker(),this.state.bottomSafeAreaInset!==t.bottomSafeAreaInset&&w.default.setBottomMarginDefault(this.state.bottomSafeAreaInset)}componentWillUnmount(){super.componentWillUnmount(),T.log(b.LogTraceArea.RootAppView,"RootAppView componentWillUnmount"),V.default.removeStyle(ee)}render(){let e=[];e.push(d.createElement(r.default,{key:"customFocusOutline",window}));const t=this.state.darkThemeEnabled?te.darkBackground:te.lightBackground;if(this.state.uiShown){const i=this.state.isShowingCustomActionMenu?d.Types.ImportantForAccessibility.NoHideDescendants:void 0,n=[te.fillScreen,t];this.state.useTabletUI&&n.push(G.default.overflowVisible),e.push(d.createElement(x.default,{key:"rootNavView",style:n,useTabletUI:this.state.useTabletUI,importantForAccessibility:i}))}if(this.state.showSplashScreen){const t=this._isWebPartnerFlow(),i=k.getString("SignInSignUp.MeetNowMeetingStartup");e.push(d.createElement(O.default,{key:"splashscreen",ref:this._onSplashScreenRef,statusText:t?i:this.props.startupStatusText,showSpinner:!0,darkThemeEnabled:this.state.darkThemeEnabled,showLoginFallback:this.props.showLoginFallback,loginCallback:this.props.loginCallback,errorCode:this.props.errorCode,isPartnerFlow:t}))}if(this.state.shouldForceUpgrade&&this.state.upgradeUrl&&!this.state.upgradeScreendHasBeenDisplayed){e=[];const t={onPress:()=>{this.setState({shouldForceUpgrade:!1,upgradeScreendHasBeenDisplayed:!0})},closeButtonType:B.CloseButtonType.Close,title:k.getString("Global.CancelLabel")};e.push(d.createElement(d.View,{style:te.fillScreen,key:"webViewForUpdate"},d.createElement(B.SimplePanelHeader,{leftButton:this.state.upgradeRequired?void 0:t,hideBottomBorder:!0,panelName:k.getString("RootAppView.Upgrade")}),d.createElement(d.View,{style:te.fillScreen},d.createElement(c.WebViewBridge,{style:te.loadingScreen,url:this.state.upgradeUrl,javaScriptEnabled:!0,ariaLabel:k.getString("RootAppView.Upgrade"),sandbox:d.Types.WebViewSandboxMode.AllowSameOrigin,shouldOpenExternalWindow:this._shouldOpenForceUpgradeLinkExternalWindow}))))}const i=this.state.useMobileCustomActionMenu&&this.state.startupComplete?d.createElement(N.default,null):void 0,n=d.createElement(v.DesktopContextMenuTarget,{key:"contextmenuanchor"}),o=C.UICapabilities.keyboardAwareViewSupported();if(o){const t=[G.default.flexOne];this.state.useTabletUI&&t.push(G.default.overflowVisible),e=d.createElement(P.default,{style:t,onLayout:this.props.onLayout},e)}return d.createElement(d.View,{style:G.default.flexOne,onLayout:o?void 0:this.props.onLayout},n,e,i)}_preHeatMediaPicker(){s.default.open().then((e=>{s.default.close(e)}))}_hasRingsForState(e){return!n.isEmpty(e.incomingCallIds)}_checkAndInstallAppUpgrades(e){0}_checkElectronForceUpgrade(){}_startAnimateSplashScreen(){this._animateSplashScreenStarted||(this._animateSplashScreenStarted=!0,T.log(b.LogTraceArea.RootAppView,"Starting to hide splash screen"),n.defer((()=>{this.props.onSplashScreenWillBeDismissed();const e=e=>{T.log(b.LogTraceArea.RootAppView,"Done hiding splash screen, animation timed out: "+e),this._splashScreenTimeout&&(J.default.clearTimeout(this._splashScreenTimeout),this._splashScreenTimeout=void 0),this.isComponentMounted()&&this.setState({showSplashScreen:!1})};this._splashScreen?(this._splashScreen.animateLeave((()=>e(!1))),this._splashScreenTimeout=J.default.setTimeout((()=>{e(!0)}),1e3)):e(!1),l.default.onSplashScreenClosed()})))}_maybePresentIncomingRing(e){if(this._hasRingsForState(this.state)&&this.state.startupComplete&&this.state.appActivationState!==d.Types.AppActivationState.Background){const t=n.head(this.state.incomingCallIds);t&&t!==this._presentingIncomingCallId&&(this._presentingIncomingCallId=t,T.log(b.LogTraceArea.RootAppView,"_maybePresentIncomingRing for callId: "+t+" causeId: "+e),S.default.CallNavigationHelper.presentIncomingRing(t,e))}else this._presentingIncomingCallId=void 0}_maybeShowPartialBrowserSupportToast(e){C.CallingCapabilities.limitedSupportBrowser()&&(T.log(b.LogTraceArea.RootAppView,"_maybeShowPartialBrowserSupportToast causeId: "+e),S.default.CallNavigationHelper.showLimitedSupportBrowser({}))}_showUpgradeAlertDialog(e,t=!1){const i=[{text:k.getString(e?"UpgradeAlertDialog.UpgradeRequiredButtonLabel":"UpgradeAlertDialog.UpgradeButtonLabel"),onPress:this._onUpgradeDialogOkButtonClick}];let n,o;e?(n=k.getString("UpgradeAlertDialog.TitleRequired"),o=k.getString("UpgradeAlertDialog.BodyRequired")):(n=k.getString("UpgradeAlertDialog.Title"),o=k.getString("UpgradeAlertDialog.Body"),i.unshift({text:k.getString("UpgradeAlertDialog.CancelButtonLabel"),onPress:this._onUpgradeDialogCancelButtonClick}));const s=d.createElement(D.default,{dialogId:ie,buttonAlignment:g.SimpleDialogButtonAlignment.HorizontalStack,closeOnClickOutside:!e,text:n,simpleContent:o,buttons:t?void 0:i,horizontalPadding:20,accessibilityLabel:n});f.default.showModal(s,ie,{rootViewId:y.MainRootViewId,rootViewType:y.RootViewType.MainWindow})}_dismissUpgradeAlertDialog(){f.default.dismissModal(ie,y.MainRootViewId)}_isWebPartnerFlow(){var e;const t=Y.default.getURIComponents(W.default.getLoadPath());return!!(null===(e=null==t?void 0:t.queryParameterKeyValues)||void 0===e?void 0:e.action)&&n.includes([$.UrlNavigationAction.CreateWebPartnerFlow,$.UrlNavigationAction.JoinWebPartnerFlow],null==t?void 0:t.queryParameterKeyValues.action)}}t.default=ne},60508:(e,t,i)=>{const n=i(96486),o=i(98356),s=i(16778),a=i(89391),r=i(25310),l=i(46096),c=i(9238),d=i(39285),u=i(36237),g=i(48650),h=i(15877),p=i(61213),m=i(86673),S=i(94355),C=i(66127),f=i(4735),y=i(17093),_=i(27357),v=i(21090),b=i(29130),T=i(10226),P=i(69203),A=i(12187),k=i(81760),I=i(78262),w=i(80837),N=i(24576),M=i(18546),E=i(99056),x=i(53374),L=i(73877),R=i(29130),D=(0,h.lazyProperties)({contentContainerStyle:()=>s.Styles.createViewStyle({alignSelf:"stretch",flex:1}),contentWrapper:()=>s.Styles.createViewStyle({flexDirection:"row",alignSelf:"stretch"}),rightPanelShim:()=>s.Styles.createViewStyle({position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:k.Color.blackOverlay50}),leftShadowBase:()=>s.Styles.createViewStyle({shadowOffset:{width:0,height:2},shadowRadius:8,shadowColor:"rgba(0, 0, 0, 0.14)"}),leftShadowAndroidBase:()=>s.Styles.createViewStyle({elevation:3}),leftShadowIOS:()=>s.Styles.createViewStyle({shadowOpacity:1,overflow:"visible"})});class B extends N.default{constructor(){super(...arguments),this._statusBarKey=n.uniqueId("RootCompositeNavigationView:"),this._rightPanelShimOpacityValue=new s.Animated.Value(0),this._rightPanelShimOpacityStyle=s.Styles.createAnimatedViewStyle({opacity:this._rightPanelShimOpacityValue}),this._closeRightPanel=()=>{const e=x.default.newCauseId();u.log(l.LogTraceArea.Navigation,"RootCompositeNavigationView._closeRightPanel,  causeId: "+e),f.default.closeRightPanel(e,this._getRootViewId())},this._onRightSidebarView=e=>{this._rightSidebarView=e||void 0},this._onPan=e=>{this._rightSidebarView&&this._rightSidebarView.onPan(e,this._closeRightPanel)}}_buildState(e,t){const i=v.modalNavigatorIdForRootViewId(this._getRootViewId()),n=_.default.getCurrentModalStackNavigationContext(i),o=n&&n.isValid()?n:void 0,s=v.rightSideBarNavigatorIdForRootViewId(this._getRootViewId()),r=_.default.getCurrentSidebarStackNavigationContext(s),l=this._getRootViewId();return{responsiveWidth:b.default.getResponsiveWidth(l),showShimForRightPanel:e.useTabletUI,fixedContainerHeight:0,shouldDisplayRightNavigation:_.default.shouldDisplayRightNavigation(l),activeModalSplitContext:o,rightSidebarStackNavContext:r,showFooter:!R.default.isSmallOrTinyScreenSize(this._getRootViewId())&&(!_.default.getCompositeCallVisible(l)||a.default.getS4LUiFeatures().enableWebFooterEverywhere),modernizeConversationList:C.default.canModernizeConversationList()}}componentDidMount(){super.componentDidMount();const e=A.default.mergeStyles([A.default.createHiddenStyle(!1),A.default.createBarStyle(this._themeColors.defaultStatusBarTheme),A.default.createBackgroundColorStyle(this._themeColors.defaultStatusBarBackgroundColor)]);P.default.addOrUpdateStyle(this._statusBarKey,e,!0),this.state.showShimForRightPanel&&this._rightPanelShimOpacityValue.setValue(this._hasRightNavContext(this.props,this.state)?1:0),this._registerKeyboardHandlers()}componentDidUpdate(e,t,i){if(super.componentDidUpdate(e,t,i),this.state.showShimForRightPanel){const i=this._hasRightNavContext(this.props,this.state);i!==this._hasRightNavContext(e,t)&&o.timing.easeOut({value:this._rightPanelShimOpacityValue,toValue:i?1:0,duration:o.Common.Duration.Short,useNativeDriver:!0}).start()}}componentWillUnmount(){super.componentWillUnmount(),this._updateStatusBar(),this._unregisterKeyboardHandlers()}render(){this._statusBarTheme!==this._currentTheme&&(this._updateStatusBar(),this._statusBarTheme=this._currentTheme);const e=[w.default.flexOne];this.props.useTabletUI&&e.push(w.default.overflowVisible);const t=this._renderCompositeSplitView(this.props.splitNavContext,this.state.showFooter?void 0:e),i=this.state.showFooter?s.createElement(r.default,null):void 0;return s.createElement(s.View,{style:e},t,i)}_registerKeyboardHandlers(){this._keyboardShortcutToken=g.default.registerKeyboardHandlers()}_unregisterKeyboardHandlers(){this._keyboardShortcutToken&&(g.default.unregisterKeyboardHandlers(this._keyboardShortcutToken),this._keyboardShortcutToken=void 0)}_renderCompositeSplitView(e,t){let i=[];const o=e.getMasterContext(),a=!!o&&e instanceof y.RootCompositeSplitViewContext&&!e.shouldDisplayMainAreaFullScreen(),r=!!o&&o.state.viewMode===y.LeftNavViewMode.Search,l=this.state.showShimForRightPanel&&this._hasRightNavContext(this.props,this.state)?s.Types.ImportantForAccessibility.NoHideDescendants:void 0;let u=!0;o&&(o instanceof y.LeftNavigationViewContext?a&&(i.push(s.createElement(p.default,{key:"leftNav",navContext:o,viewMode:o.state.viewMode,importantForAccessibility:l})),this.state.responsiveWidth<=I.ResponsiveWidth.Tiny&&r&&(u=!1)):i.push(s.createElement(m.default,{key:"leftNav",navContext:o,importantForAccessibility:l})));let g=y.RightSidebarViewMode.None;const h=this.state.modernizeConversationList&&!this._useAccessibleTheme();if(u){if(this.state.rightSidebarStackNavContext){const e=n.last(this.state.rightSidebarStackNavContext.getNavStack());g=v.deriveViewModeFromRightNavContext(e)}const t=h?this._getLeftShadowStyle():void 0,o=[w.default.flexOne];h&&!this.props.useTabletUI&&o.push(w.default.flexOne,t);const a=[w.default.flexOne,t];let r=s.createElement(s.View,{key:"mainStage",style:o},s.createElement(S.default,{key:"mainStage",splitNavContext:e}));this.props.useTabletUI&&(r=s.createElement(s.View,{key:"mainStage",style:a,importantForAccessibility:l},r)),i.push(r)}if(this.state.shouldDisplayRightNavigation){if(this.state.showShimForRightPanel){g!==y.RightSidebarViewMode.None&&i.push(s.createElement(d.HiddenAnimatedView,{key:"rightNavShim",style:[D.rightPanelShim,this._rightPanelShimOpacityStyle],disableTouchOpacityAnimation:!0},s.createElement(s.GestureView,{style:w.default.flexOne,onPanHorizontal:this._onPan,onTap:this._closeRightPanel})))}let e=!1;const t=this.props.splitNavContext.getNavStack();e=!!t&&n.last(t)instanceof y.CallNavigationContext,i.push(s.createElement(T.default,{key:"rightNav",ref:this._onRightSidebarView,stackNavContext:this.state.rightSidebarStackNavContext,leftNavCollapsedOrHidden:!o||!a,suppressAnimation:e,mainStageNavigationViewUsesShadow:h}))}let C,f;this.state.activeModalSplitContext&&(C=s.createElement(c.default,{activeModalSplitContext:this.state.activeModalSplitContext,showOverflow:!!this.props.useTabletUI}));const _=[D.contentWrapper];C&&this.state.fixedContainerHeight?_.push(s.Styles.createViewStyle({height:this.state.fixedContainerHeight,width:L.default.measureWindow(this._getRootViewId()).width},!1)):_.push(w.default.flexOne);const b=[t||D.contentContainerStyle];return this.props.useTabletUI&&(b.push(w.default.overflowVisible),_.push(w.default.overflowVisible)),s.createElement(s.View,{style:b},s.createElement(M.default,null),s.createElement(s.View,{style:_,importantForAccessibility:f},i),C,s.createElement(E.default,null))}_getLeftShadowStyle(){return D.leftShadowBase}_updateStatusBar(){const e=A.default.mergeStyles([A.default.createHiddenStyle(!1),A.default.createBarStyle(this._themeColors.defaultStatusBarTheme),A.default.createBackgroundColorStyle(this._themeColors.defaultStatusBarBackgroundColor)]);P.default.addOrUpdateStyle(this._statusBarKey,e)}_hasRightNavContext(e,t){return!!t.rightSidebarStackNavContext&&t.rightSidebarStackNavContext.getNavStack().length>0}}t.Z=B},71243:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(67294),o=i(16778),s=i(81878),a=i(47261),r=i(58187),l=i(212),c=i(18037),d=i(33754);class u extends n.PureComponent{constructor(e){var t;super(e),this._setNewLanguage=e=>{this.state.language!==e&&this.setState({language:e,isRTL:o.International.isRTL()})},this._updateCurrentTheme=()=>{var e;const t=null!==(e=this.props.theme)&&void 0!==e?e:c.default.colorTheme();if(t!==this.state.theme){const e=l.default.themeStylesForTheme(t),i=l.default.themeColorsForTheme(t);this.setState({theme:t,themeStyles:e,themeColors:i})}};const i=null!==(t=e.theme)&&void 0!==t?t:c.default.colorTheme(),n=l.default.themeStylesForTheme(i),s=l.default.themeColorsForTheme(i);this.state={rootViewId:e.rootViewId,rootViewType:e.rootViewType,language:d.getLocale(),theme:i,themeColors:s,themeStyles:n,isRTL:o.International.isRTL()}}componentDidMount(){d.localeChangedEvent.subscribe(this._setNewLanguage),this._themeStoreToken=c.default.subscribe(this._updateCurrentTheme)}componentWillUnmount(){d.localeChangedEvent.unsubscribe(this._setNewLanguage),this._themeStoreToken&&(c.default.unsubscribe(this._themeStoreToken),this._themeStoreToken=void 0)}render(){const e=o.createElement(r.CommonContext.Provider,{value:this.state},o.createElement(s.StyleProvider,null,this.props.children));return o.createElement(a.ReactRootView,{rootTag:this.props.nativeRootComponent},e)}}t.default=u},94474:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(70183),a=i(89391),r=i(96074),l=i(23111),c=i(95975),d=i(80843),u=i(13560),g=i(46172),h=(i(47920),i(46096)),p=(i(13214),i(22003),i(36237)),m=i(20751),S=i(4735),C=i(30124),f=i(27357),y=i(58115),_=i(29130),v=i(16392),b=i(78262),T=i(80837),P=i(24576),A=i(53374);class k extends P.default{constructor(){super(...arguments),this._onDragDrop=e=>{e.preventDefault(),e.stopPropagation()},this._navigationRef=e=>{f.default.setStackNavigation(null!=e?e:void 0)}}_buildState(e,t){let i,n;const o=this._getRootViewId(),s=C.default.isUsingStackNavigationContext();s?i=f.default.getCurrentNavigationStack():n=f.default.getCurrentStackNavigationContext(v.StackNavigatorId.DesktopContent);const r={navContextStack:i,compositeSplitNavStack:n,isUsingStackNavigationContext:s,shouldCollapseSplitNav:g.default.collapseDesktopStackNavContext()&&_.default.getResponsiveWidth(o)<=b.ResponsiveWidth.Tiny,isCustomActionMenuShown:u.default.isCustomActionMenuShown(),enabledTooltips:[...d.default.getEnabledTooltips()]};return t&&(r.enableReactNavigation=a.default.getS4LUiFeaturesNoSubscription().enableStackReactNavigation&&s),r}componentDidMount(){if(super.componentDidMount(),g.default.collapseDesktopStackNavContextNoSubscription()){const e=A.default.newCauseId();p.log(h.LogTraceArea.Navigation,"RootNavigationView.componentDidMount, causeId: "+e),S.default.collapseSplitNavContext(v.StackNavigatorId.DesktopContent,this.state.shouldCollapseSplitNav,e)}}componentDidUpdate(e,t,i){if(super.componentDidUpdate(e,t,i),this.state.shouldCollapseSplitNav!==t.shouldCollapseSplitNav){const e=A.default.newCauseId();p.log(h.LogTraceArea.Navigation,"RootNavigationView.componentDidUpdate, causeId: "+e),S.default.collapseSplitNavContext(v.StackNavigatorId.DesktopContent,this.state.shouldCollapseSplitNav,e)}}render(){const e=[this.props.style,this._themeStyles.primaryBackgroundColorStyle];let t;return this.props.useTabletUI&&e.push(T.default.overflowVisible),this.state.compositeSplitNavStack?this._renderCompositeView(this.state.compositeSplitNavStack,e,t):this.state.enableReactNavigation?this._renderStackViewReactNavigation(e,t):this.state.navContextStack?this._renderStackView(this.state.navContextStack,e,t):o.createElement(o.View,{style:e,importantForAccessibility:this.props.importantForAccessibility},t)}_renderStackViewReactNavigation(e,t){const n=i(42623).Z;return o.createElement(s.NavigationContainer,{ref:this._navigationRef},o.createElement(r.BaseNavigationWrapper,{isPresentedByMobileStackNavigator:!0},o.createElement(o.View,{key:"app",style:e,importantForAccessibility:this.props.importantForAccessibility},o.createElement(n,null),this._renderOptionalPipView(),this._renderCoachmarkPresenter(),this._getOptionalEngagementTooltips(),this._renderNotificationToasts(),t)))}_renderStackView(e,t,n){const s=i(26718).Z;return o.createElement(o.View,{key:"app",style:t,importantForAccessibility:this.props.importantForAccessibility},o.createElement(s,{key:"stackView",navContextStack:e,isWholeStackInvisible:this.state.isCustomActionMenuShown}),this._renderOptionalPipView(),this._renderCoachmarkPresenter(),this._getOptionalEngagementTooltips(),this._renderNotificationToasts(),n)}_renderCompositeView(e,t,n){const s=[t];this.props.useTabletUI&&s.push(T.default.overflowVisible);const a=i(60508).Z;return o.createElement(o.View,{style:s,onDrop:this._onDragDrop,importantForAccessibility:this.props.importantForAccessibility},o.createElement(a,{key:"compositeView",splitNavContext:e,useTabletUI:this.props.useTabletUI}),null,this._renderOptionalPipView(),this._renderCoachmarkPresenter(),this._getOptionalEngagementTooltips(),this._renderNotificationToasts(),n)}_renderOptionalPipView(){return null}_renderCoachmarkPresenter(){return o.createElement(l.default,null)}_getOptionalEngagementTooltips(){return this.state.enabledTooltips.map(((e,t)=>{if(!n.isUndefined(e)&&d.default.isTooltipEnabled(e.type))return c.default.getEngagementTooltip(e,t)}))}_renderNotificationToasts(){return[o.createElement(y.default,{key:"notificationtoast"}),o.createElement(m.default,{key:"minitoast"})]}}t.default=k},26718:(e,t,i)=>{const n=i(96486),o=i(67294),s=i(16778),a=i(96894),r=i(89391),l=i(77484),c=i(45092),d=i(3056),u=i(66957),g=i(46096),h=i(36237),p=i(33754),m=i(7593),S=i(4735),C=i(17093),f=i(48199),y=i(21090),_=i(58962),v=i(9343),b=i(62393),T=i(34273),P=i(16392),A=i(53374),k=i(51793),I=i(57538),w=i(51060),N=(0,o.lazy)((()=>Promise.resolve().then((()=>i(56879))))),M=(0,o.lazy)((()=>Promise.resolve().then((()=>i(62477))))),E=(0,o.lazy)((()=>Promise.resolve().then((()=>i(96283))))),x=(0,o.lazy)((()=>Promise.resolve().then((()=>i(66376))))),L=(0,o.lazy)((()=>Promise.resolve().then((()=>i(73709))))),R=(0,o.lazy)((()=>Promise.resolve().then((()=>i(63531))))),D=(0,o.lazy)((()=>Promise.resolve().then((()=>i(23975))))),B=(0,o.lazy)((()=>Promise.resolve().then((()=>i(24521))))),O=(0,o.lazy)((()=>Promise.resolve().then((()=>i(88110))))),F=(0,o.lazy)((()=>Promise.resolve().then((()=>i(22139))))),V=(0,o.lazy)((()=>Promise.resolve().then((()=>i(17517))))),U=(0,o.lazy)((()=>Promise.resolve().then((()=>i(62165))))),H=(0,o.lazy)((()=>Promise.resolve().then((()=>i(24899))))),W=(0,o.lazy)((()=>Promise.resolve().then((()=>i(51013))))),z=(0,o.lazy)((()=>Promise.resolve().then((()=>i(35517))))),G=(0,o.lazy)((()=>Promise.resolve().then((()=>i(53028))))),K=(0,o.lazy)((()=>Promise.resolve().then((()=>i(92626))))),j=(0,o.lazy)((()=>Promise.resolve().then((()=>i(72619))))),q=(0,o.lazy)((()=>Promise.resolve().then((()=>i(61510))))),Q=(0,o.lazy)((()=>Promise.resolve().then((()=>i(98032))))),X=(0,o.lazy)((()=>Promise.resolve().then((()=>i(83940))))),J=(0,o.lazy)((()=>Promise.resolve().then((()=>i(91848))))),$=(0,o.lazy)((()=>Promise.resolve().then((()=>i(4096))))),Y=(0,o.lazy)((()=>Promise.resolve().then((()=>i(52120)))));(0,o.lazy)((()=>Promise.resolve().then((()=>i(49206)))));const Z=(0,o.lazy)((()=>Promise.resolve().then((()=>i(49206))))),ee=(0,o.lazy)((()=>Promise.resolve().then((()=>i(7095))))),te=(0,o.lazy)((()=>Promise.resolve().then((()=>i(17756))))),ie=(0,o.lazy)((()=>Promise.resolve().then((()=>i(92076))))),ne=(0,o.lazy)((()=>Promise.resolve().then((()=>i(23303))))),oe=(0,o.lazy)((()=>Promise.resolve().then((()=>i(69198))))),se=(0,o.lazy)((()=>Promise.resolve().then((()=>i(41260))))),ae=(0,o.lazy)((()=>Promise.resolve().then((()=>i(79624))))),re=(0,o.lazy)((()=>Promise.resolve().then((()=>i(91e3))))),le=(0,o.lazy)((()=>Promise.resolve().then((()=>i(24360))))),ce=(0,o.lazy)((()=>Promise.resolve().then((()=>i(58454))))),de=(0,o.lazy)((()=>Promise.resolve().then((()=>i(79274))))),ue=(0,o.lazy)((()=>Promise.resolve().then((()=>i(35266))))),ge=(0,o.lazy)((()=>Promise.resolve().then((()=>i(57231))))),he=(0,o.lazy)((()=>Promise.resolve().then((()=>i(49899))))),pe=(0,o.lazy)((()=>Promise.resolve().then((()=>i(95153))))),me=(0,o.lazy)((()=>Promise.resolve().then((()=>i(67337))))),Se=(0,o.lazy)((()=>Promise.resolve().then((()=>i(94641))))),Ce=(0,o.lazy)((()=>Promise.resolve().then((()=>i(32687))))),fe=(0,o.lazy)((()=>Promise.resolve().then((()=>i(55898))))),ye=(0,o.lazy)((()=>Promise.resolve().then((()=>i(90135))))),_e=((0,o.lazy)((()=>Promise.resolve().then((()=>i(50035))))),(0,o.lazy)((()=>Promise.resolve().then((()=>i(909)))))),ve=(0,o.lazy)((()=>Promise.resolve().then((()=>i(50876))))),be=(0,o.lazy)((()=>Promise.resolve().then((()=>i(65752))))),Te=(0,o.lazy)((()=>Promise.resolve().then((()=>i(50517))))),Pe=(0,o.lazy)((()=>Promise.resolve().then((()=>i(90474))))),Ae=(0,o.lazy)((()=>Promise.resolve().then((()=>i(51424))))),ke=(0,o.lazy)((()=>Promise.resolve().then((()=>i(34887))))),Ie=(0,o.lazy)((()=>Promise.resolve().then((()=>i(72071))))),we=(0,o.lazy)((()=>Promise.resolve().then((()=>i(5795))))),Ne=(0,o.lazy)((()=>Promise.resolve().then((()=>i(56397))))),Me=(0,o.lazy)((()=>Promise.resolve().then((()=>i(54399))))),Ee=(0,o.lazy)((()=>Promise.resolve().then((()=>i(58144))))),xe=(0,o.lazy)((()=>Promise.resolve().then((()=>i(19498))))),Le=(0,o.lazy)((()=>Promise.resolve().then((()=>i(72660))))),Re=(0,o.lazy)((()=>Promise.resolve().then((()=>i(76359))))),De=(0,o.lazy)((()=>Promise.resolve().then((()=>i(6855))))),Be=(0,o.lazy)((()=>Promise.resolve().then((()=>i(69739))))),Oe=(0,o.lazy)((()=>Promise.resolve().then((()=>i(51464))))),Fe=(0,o.lazy)((()=>Promise.resolve().then((()=>i(41235))))),Ve=(0,o.lazy)((()=>Promise.resolve().then((()=>i(15308))))),Ue=(0,o.lazy)((()=>Promise.resolve().then((()=>i(34898))))),He=(0,o.lazy)((()=>Promise.resolve().then((()=>i(46880))))),We=(0,o.lazy)((()=>Promise.resolve().then((()=>i(69197))))),ze=(0,o.lazy)((()=>Promise.resolve().then((()=>i(41736))))),Ge=(0,o.lazy)((()=>Promise.resolve().then((()=>i(90940))))),Ke=(0,o.lazy)((()=>Promise.resolve().then((()=>i(26286))))),je=(0,o.lazy)((()=>Promise.resolve().then((()=>i(70170))))),qe=(0,o.lazy)((()=>Promise.resolve().then((()=>i(10250))))),Qe=(0,o.lazy)((()=>Promise.resolve().then((()=>i(47473))))),Xe=(0,o.lazy)((()=>Promise.resolve().then((()=>i(45695))))),Je=(0,o.lazy)((()=>Promise.resolve().then((()=>i(28076))))),$e=(0,o.lazy)((()=>Promise.resolve().then((()=>i(46999))))),Ye=(0,o.lazy)((()=>Promise.resolve().then((()=>i(86766))))),Ze=(0,o.lazy)((()=>Promise.resolve().then((()=>i(60180))))),et=(0,o.lazy)((()=>Promise.resolve().then((()=>i(63201))))),tt=(0,o.lazy)((()=>Promise.resolve().then((()=>i(5327))))),it=(0,o.lazy)((()=>Promise.resolve().then((()=>i(90574))))),nt=(0,o.lazy)((()=>Promise.resolve().then((()=>i(99223))))),ot=(0,o.lazy)((()=>Promise.resolve().then((()=>i(19865))))),st=(0,o.lazy)((()=>Promise.resolve().then((()=>i(46337))))),at=(0,o.lazy)((()=>Promise.resolve().then((()=>i(5793))))),rt=(0,o.lazy)((()=>Promise.resolve().then((()=>i(64821))))),lt=((0,o.lazy)((()=>Promise.resolve().then((()=>i(67164))))),(0,o.lazy)((()=>Promise.resolve().then((()=>i(98155)))))),ct=(0,o.lazy)((()=>Promise.resolve().then((()=>i(11411))))),dt=(0,o.lazy)((()=>Promise.resolve().then((()=>i(50101))))),ut=(0,o.lazy)((()=>Promise.resolve().then((()=>i(22389))))),gt=(0,o.lazy)((()=>Promise.resolve().then((()=>i(36061))))),ht=(0,o.lazy)((()=>Promise.resolve().then((()=>i(20044))))),pt=(0,o.lazy)((()=>Promise.resolve().then((()=>i(82994))))),mt=(0,o.lazy)((()=>Promise.resolve().then((()=>i(67888))))),St=(0,o.lazy)((()=>Promise.resolve().then((()=>i(51699))))),Ct=(0,o.lazy)((()=>Promise.resolve().then((()=>i(30590))))),ft=(0,o.lazy)((()=>Promise.resolve().then((()=>i(77345))))),yt=(0,o.lazy)((()=>Promise.resolve().then((()=>i(21485))))),_t=(0,o.lazy)((()=>Promise.resolve().then((()=>i(77721))))),vt=(0,o.lazy)((()=>Promise.resolve().then((()=>i(17096))))),bt=(0,o.lazy)((()=>Promise.resolve().then((()=>i(47358))))),Tt=(0,o.lazy)((()=>Promise.resolve().then((()=>i(44699))))),Pt=(0,o.lazy)((()=>Promise.resolve().then((()=>i(59161))))),At=(0,o.lazy)((()=>Promise.resolve().then((()=>i(4335)))));class kt extends l.default{constructor(){super(...arguments),this._navigationDirections={},this._navigateBackCompleted=()=>{n.defer((()=>{const e=A.default.newCauseId();h.log(g.LogTraceArea.Navigation,"RootStackNavigationView: _navigateBackCompleted, causeId: "+e),S.default.navigateBack(e,this._getContext())}))},this._onInAppWebBrowserClose=e=>{const t=A.default.newCauseId();return h.log(g.LogTraceArea.Navigation,"RootStackNavigationView._onInAppWebBrowserClose, causeId: "+t),S.default.closeInAppBrowser(t,this._getContext()),e&&e(),!0}}_renderSceneContent(e,t){const i=this._renderSceneContentImpl(e,t);return s.createElement(o.Suspense,{fallback:null},i)}_renderSceneContentImpl(e,t){let i;const l={ref:this._mountedRefsMap.onComponentRef(t),navigationDirection:e?this._navigationDirections[e.id]:void 0};if(e instanceof C.MobileHubNavigationContext)i=s.createElement(Ee,{route:Object.assign({params:e.state},l)});else if(e instanceof C.JoiningGuestScreenContext)i=s.createElement(ct,{showSpinner:!0,statusText:p.getString("UrlConverter.JoiningConversationMessage"),showLoginFallback:!1,loginCallback:n.noop});else if(e instanceof C.MobileContentPanelNavigationContext){const t=e.getConversationContext();t&&(i=s.createElement(Me,{route:Object.assign({params:t.state},l)}))}else if(e instanceof C.CallNavigationContext)i=s.createElement(X,{route:{params:Object.assign({initialConversationMri:e.state.initialConversationMri,callId:e.state.callId,navigationReason:e.state.navigationReason,convertedVideoToAudio:e.state.convertedVideoToAudio,meetNowParameters:e.state.meetNowParameters},l)}});else if(e instanceof C.GalleryNavigationContext)i=s.createElement(ut,{route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.CallRosterNavigationContext)i=s.createElement(J,{route:{params:Object.assign({conversationId:e.state.conversationId,callId:e.state.callId},l)}});else if(e instanceof C.BingBackgroundNavigationContext)i=s.createElement(H,{route:{params:Object.assign({callId:e.state.callId},l)}});else if(e instanceof C.CreateConversationNavigationContext)i=s.createElement(Ye,{ref:l.ref,route:{params:Object.assign(Object.assign(Object.assign({},l),e.state),{navigator:e.navigator})}});else if(e instanceof C.CallCaptionsSettingsPanelNavigationContext)i=s.createElement(w.default,{ref:l.ref,route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.ReportConcernNavigationContext)i=s.createElement(Qe,{route:{params:Object.assign(Object.assign({},e.state),l)}});else if(e instanceof C.ConversationParticipantsNavigationContext)i=s.createElement(Ze,{ref:l.ref,route:{params:Object.assign(Object.assign(Object.assign({},l),e.state),{navigator:e.navigator})}});else if(e instanceof C.DetailsNavigationContext)i=s.createElement(ge,{route:{params:Object.assign({mri:e.state.mri,conversationId:e.state.conversationId,showConversationSettings:e.state.showConversationSettings,origin:e.state.origin||u.DetailsPanelOrigin.Unknown,onBotAdded:e.state.onBotAdded},l)}});else if(e instanceof C.ChatConfigNavigationContext)i=s.createElement(se,{key:"chatSettings",ref:l.ref,route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.BotsListNavigationContext)i=s.createElement(D,Object.assign({filterFunction:e.state.filterBotsFunction,showHeader:!0,sortByProperty:e.state.sortBotsByProperty,title:e.state.botMarketplaceTitle},l));else if(e instanceof C.BotDiscoveryNavigationContext)i=s.createElement(R,{route:{params:Object.assign({},l)}});else if(e instanceof C.AlertsHubNavigationContext)i=s.createElement(B,Object.assign({},l));else if(e instanceof C.MeControlNavigationContext)i=s.createElement(xe,{route:{params:Object.assign({isMoodMessageEditMode:e.state.isMoodMessageEditMode},l)}});else if(e instanceof C.MySettingsNavigationContext)i=s.createElement(Oe,{route:{params:Object.assign({useCloseIcon:e.state.navigationDirection===P.StackNavigationDirection.Present},l)}});else if(e instanceof C.PesSearchNavigationContext)e.state.searchType===_.TabType.Emoticon?i=s.createElement(Ce,Object.assign({searchType:e.state.searchType,conversationId:e.state.conversationId,onMessageSent:e.state.onMessageSent,onCloseSearch:e.state.onCloseSearch,clearEditInChatsComposer:e.state.clearEditInChatsComposer},l)):e.state.searchType===_.TabType.Moji?i=s.createElement(Re,Object.assign({searchType:e.state.searchType,conversationId:e.state.conversationId},l)):e.state.searchType===_.TabType.ChatSticker&&(i=s.createElement(gt,Object.assign({searchType:e.state.searchType,conversationId:e.state.conversationId},l)));else if(e instanceof C.ChooseAvatarContext)i=s.createElement(V,{route:{params:Object.assign({origin:e.state.origin,hideSkipButton:e.state.hideSkipButton,isFirstLogin:e.state.isFirstLogin,hideCloseButton:e.state.hideCloseButton,closeButtonIcon:e.state.closeButtonIcon,scenarioNavigator:e.state.scenarioNavigator,showCaptureViewFirst:e.state.showCaptureViewFirst},l)}});else if(e instanceof C.ChooseAvatarCommonPickerContext)i=s.createElement(F,{route:{params:Object.assign({origin:e.state.origin,hideSkipButton:e.state.hideSkipButton,isFirstLogin:e.state.isFirstLogin,hideCloseButton:e.state.hideCloseButton,closeButtonIcon:e.state.closeButtonIcon,scenarioNavigator:e.state.scenarioNavigator,showCaptureViewFirst:e.state.showCaptureViewFirst},l)}});else if(e instanceof C.PnvEnterNumberContext)i=s.createElement(ze,Object.assign({initialPhoneNumber:e.state.phoneNumber},l));else if(e instanceof C.PnvEnterCodeContext)i=s.createElement(We,Object.assign({},l));else if(e instanceof C.PnvDebugToolContext)i=s.createElement(He,Object.assign({},l));else if(e instanceof C.SettingsGroupNavigationContext)i=s.createElement(et,Object.assign({route:{params:e.state}},l));else if(e instanceof C.NewSettingsPanelNavigationContext)i=s.createElement(Le,{route:{params:Object.assign({},l)}});else if(e instanceof C.AboutNavigationContext)i=s.createElement(N,Object.assign({showHeader:!0},l));else if(e instanceof C.RawPreferencesNavigationContext)i=s.createElement(qe,{route:{params:{}}});else if(e instanceof C.ThirdPartyNoticesNavigationContext)i=s.createElement(Tt,{route:{params:Object.assign({},l)}});else if(e instanceof C.CapturePreviewNavigationContext)i=s.createElement(oe,Object.assign({localMediaObjectUri:e.state.localMediaObjectUri,localMediaThumbnailUri:e.state.localMediaThumbnailUri,localMediaIsVideo:e.state.localMediaIsVideo,mediaSelection:e.state.mediaSelection,fileSize:e.state.fileSize,mediaHeight:e.state.height,mediaWidth:e.state.width,skipShareWithPanel:e.state.skipShareWithPanel,onCaptureFlowComplete:e.state.onCaptureFlowComplete,conversationId:e.state.conversationId,callId:e.state.callId,markupEnabled:!0,unlockOrientation:e.state.unlockOrientation,performMarkupOnly:e.state.performMarkupOnly,capturedContentHandler:e.state.capturedContentHandler,captureSessionTelemetry:e.state.captureSessionTelemetry,entryPoint:e.state.entryPoint,inlinePreview:e.state.inlinePreview,iconForClose:e.state.iconForClose,onReject:e.state.onReject,showCoachmarksIfNeeded:!0,fileExtension:e.state.fileExtension},l));else if(e instanceof C.TogetherModeModalContext)i=s.createElement(_t,{route:{params:Object.assign({onChangeBackground:e.state.onChangeBackground,onStartTogetherMode:e.state.onStartTogetherMode,onClose:e.state.onClose,isAudienceBotInCall:e.state.isAudienceBotInCall,selectedBackground:e.state.selectedBackground},l)}});else if(e instanceof C.CaptureMultiPreviewNavigationContext)i=s.createElement(ne,{mediaPreviews:e.state.mediaPreviews,conversationId:e.state.conversationId,onReject:e.state.onReject});else if(e instanceof C.InAppBrowserNavigationContext)i=s.createElement(z,{route:{params:Object.assign({origin:e.state.origin,url:e.state.url,integrationCorrelationId:e.state.integrationCorrelationId,headers:e.state.headers,injectedJavaScript:e.state.injectedJavaScript,onNavigationStateChange:e.state.onNavigationStateChange,onClose:()=>this._onInAppWebBrowserClose(e.state.onInAppWebBrowserClose),onShareComplete:e.state.onShareComplete,onWebViewClose:e.state.onWebViewClose,onMessage:e.state.onMessage,headerTitle:e.state.headerTitle,conversationId:e.state.conversationId,messageId:e.state.messageId,suggestionAttributes:e.state.suggestionAttributes,hideBrowserActions:e.state.hideBrowserActions,openIntegrationScenario:e.state.perfScenario,useBingMiniCanvas:e.state.useBingMiniCanvas},l)}});else if(e instanceof C.ShareContactsToConversationContext)i=s.createElement(tt,{key:"shareContactsToConversation",ref:l.ref,route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.ShareWithPanelNavigationContext)i=s.createElement(it,Object.assign({multipleMessagesParameters:e.state.multipleMessagesParameters,onShareComplete:e.state.onShareComplete,onPostComplete:e.state.onPostComplete,shareMessageTitle:e.state.shareMessageTitle,accessibilityLabelTitle:e.state.accessibilityLabelTitle,userMrisToExclude:e.state.userMrisToExclude,onShareCancel:e.state.onShareCancel,enableMediaPreview:e.state.enableMediaPreview,sharePreviewType:e.state.sharePreviewType,showForwardPreview:e.state.showForwardPreview,entryPoint:e.state.entryPoint},l));else if(e instanceof C.MediaPickerNavigationContext)i=s.createElement(Ie,Object.assign({conversationId:e.state.conversationId,allowVideo:e.state.allowVideo,allowMultiple:e.state.allowMultiple,defaultToAlbums:e.state.defaultToAlbums,capturedContentHandler:e.state.capturedContentHandler,onSendFlowComplete:e.state.onSendFlowComplete,onHandleEditMediaSelection:e.state.onHandleEditMediaSelection},l));else if(e instanceof C.SearchNavigationContext)i=s.createElement(Xe,{route:{params:Object.assign({searchPanelInitiator:e.state.searchOrigin},l)}});else if(e instanceof C.QuickCallNavigationContext)i=s.createElement(je,Object.assign({conversationId:e.state.conversationId,callId:e.state.callId,newGroup:e.state.newGroup,searchOnly:e.state.searchOnly},l));else if(e instanceof C.PSTNDialerNavigationContext)i=s.createElement(de,{route:{params:Object.assign({callId:e.state.callId,conversationId:e.state.conversationId,prefilledNumber:e.state.prefilledNumber,reopenOnInvalidNumber:e.state.navigationSource===g.DialerNavigationSource.CallFailedInvalidNumber},l)}});else if(e instanceof C.PSTNCountrySelectorNavigationContext)i=s.createElement(le,{route:{params:Object.assign({onCountrySelected:e.state.onCountrySelected,countriesFiltered:e.state.countriesFiltered,hideRecentCountries:e.state.hideRecentCountries,searchAutoFocus:e.state.searchAutoFocus},l)}});else if(e instanceof C.SkypeNumberCountryAreaSelectorNavigationContext)i=s.createElement(nt,{route:{params:Object.assign({onCountryAreaSelected:e.state.onCountryAreaSelected},l)}});else if(e instanceof C.SkypeNumberPrefixSelectorNavigationContext)i=s.createElement(st,{route:{params:Object.assign({onPrefixSelected:e.state.onPrefixSelected},l)}});else if(e instanceof C.ContactsPanelV2NavigationContext)i=s.createElement(re,Object.assign({initialTab:e.state.currentTab},l));else if(e instanceof C.AddContactPanelNavigationContext)i=s.createElement(E,{ref:l.ref,route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.SyncAddressBookContext)i=s.createElement(St,Object.assign({origin:e.state.origin,hideSkipButton:e.state.hideSkipButton,hideCloseButton:e.state.hideCloseButton,isFirstLogin:e.state.isFirstLogin,closeButtonIcon:e.state.closeButtonIcon,nextButtonIcon:e.state.nextButtonIcon,scenarioNavigator:e.state.scenarioNavigator},l));else if(e instanceof C.PeopleYouMayKnowNoticeContext)i=s.createElement(Fe,{ref:l.ref,route:{params:Object.assign({origin:e.state.origin,hideSkipButton:e.state.hideSkipButton,hideCloseButton:e.state.hideCloseButton,isFirstLogin:e.state.isFirstLogin,closeButtonIcon:e.state.closeButtonIcon,nextButtonIcon:e.state.nextButtonIcon,scenarioNavigator:e.state.scenarioNavigator},l)}});else if(e instanceof C.TelemetryConsentContext)i=s.createElement(Ct,{route:{params:Object.assign({origin:e.state.origin,hideSkipButton:e.state.hideSkipButton,hideCloseButton:e.state.hideCloseButton,isFirstLogin:e.state.isFirstLogin,closeButtonIcon:e.state.closeButtonIcon,nextButtonIcon:e.state.nextButtonIcon,scenarioNavigator:e.state.scenarioNavigator},l)}});else if(e instanceof C.ThemeContext)i=s.createElement(bt,{route:{params:Object.assign({origin:e.state.origin,hideSkipButton:e.state.hideSkipButton,hideCloseButton:e.state.hideCloseButton,isFirstLogin:e.state.isFirstLogin,closeButtonIcon:e.state.closeButtonIcon,nextButtonIcon:e.state.nextButtonIcon,scenarioNavigator:e.state.scenarioNavigator},l)}});else if(e instanceof C.UserProfileContext)i=s.createElement(At,{route:{params:Object.assign({origin:e.state.origin,closeButtonIcon:e.state.closeButtonIcon,scenarioNavigator:e.state.scenarioNavigator},l)}});else if(e instanceof C.PromptPermissionContext)i=s.createElement(Ve,{ref:l.ref,route:{params:Object.assign({origin:e.state.origin,showUIPrompts:e.state.showUIPrompts,scenarioNavigator:e.state.scenarioNavigator,hideCloseButton:e.state.hideCloseButton},l)}});else if(e instanceof C.LocationPickerContext)i=s.createElement(Te,{ref:l.ref,route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.LocationViewerContext)i=s.createElement(Pe,{ref:l.ref,route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.DocumentViewerContext)i=s.createElement(me,{ref:l.ref,route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.MediaViewerPanelContext)i=s.createElement(we,Object.assign({initialMedia:e.state.initialMedia,controller:e.state.controller,totalMedia:e.state.totalMedia,onDidClose:e.state.onClose,onLeftBoundSwipe:e.state.onLeftBoundSwipe,onRightBoundSwipe:e.state.onRightBoundSwipe,closeOnLastItemSwipe:e.state.closeOnLastItemSwipe,mouseControlsSize:e.state.mouseControlsSize,message:e.state.message,cacheMode:e.state.cacheMode},l));else if(e instanceof C.ConversationMediaViewerPanelContext)i=s.createElement(Ne,Object.assign({},e.state,l));else if(e instanceof C.CaptureComboNavigationContext)i=s.createElement(ie,{ref:l.ref,route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.GetBalanceStateNavigationContext)i=s.createElement(U,Object.assign({showHeader:e.state.showHeader,source:e.state.source},l));else if(e instanceof C.PurchaseContinuationNavigationContext)i=s.createElement(Ke,{route:{params:Object.assign({offerType:e.state.offerType,campaignRef:e.state.campaignRef},l)}});else if(e instanceof C.SubscriptionIntroNavigationContext)i=s.createElement(ht,{route:{params:Object.assign({},l)}});else if(e instanceof C.GetProductWebFlowNavigationContext)i=s.createElement(Be,{route:{params:Object.assign({webPurchase:e.state.webPurchase,source:e.state.source,title:e.state.title,useDocumentTitle:e.state.useDocumentTitle},l)}});else if(e instanceof C.Payments3dsNavigationContext)i=s.createElement(De,{route:{params:Object.assign(Object.assign({},e.state),l)}});else if(e instanceof C.SsoWebFlowNavigationContext)i=s.createElement(dt,Object.assign({},e.state,l));else if(e instanceof C.CallingSettingsHeaderAuthWebFlowNavigationContext)i=s.createElement(Z,{route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.SkypeNumberWebFlowNavigationContext)i=s.createElement(_e,Object.assign({},e.state,l));else if(e instanceof C.SkypeNumberListNavigationContext)i=s.createElement(ot,{route:{params:Object.assign({},l)}});else if(e instanceof C.SkypeNumberPanelPurchaseFlowNavigationContext)i=s.createElement(at,{route:{params:Object.assign({},l)}});else if(e instanceof C.CallingSettingsPanelNavigationContext)i=s.createElement(ee,{route:{params:Object.assign({},l)}});else if(e instanceof C.CallerIdCallingSettingsPanelNavigationContext)i=s.createElement(j,{route:{params:Object.assign({},l)}});else if(e instanceof C.CallerIdNumberCallingSettingsPanelNavigationContext)i=s.createElement(K,{route:{params:Object.assign({},l)}});else if(e instanceof C.AdvancedCallingSettingsPanelNavigationContext)i=s.createElement(L,{route:{params:Object.assign({},l)}});else if(e instanceof C.SubtitlesCallingSettingsPanelNavigationContext)i=s.createElement(pt,{route:{params:Object.assign({},l)}});else if(e instanceof C.TranslationSettingsPanelNavigationContext)i=s.createElement(Pt,{route:{params:Object.assign({},l)}});else if(e instanceof C.TelemetryPerformanceMonitorNavigationContext)i=s.createElement(yt,{route:{params:Object.assign(Object.assign({},e.state),l)}});else if(e instanceof C.DiagnosticToolsNavigationContext)i=s.createElement(he,{route:{params:{}}});else if(e instanceof C.SendDiagnosticLogsNavigationContext)i=s.createElement($e,{route:{params:Object.assign({},l)}});else if(e instanceof C.ProfilePicturePanelNavigationContext)i=s.createElement(Ue,{route:{params:Object.assign({},l)}});else if(e instanceof C.ConnectedUsersListNavigationContext)i=s.createElement(ae,{route:{params:Object.assign({},l)}});else if(e instanceof C.BlockedUsersListNavigationContext)i=s.createElement(W,{route:{params:Object.assign({},l)}});else if(e instanceof C.ManageUsersSettingsPanelNavigationContext)i=s.createElement(ke,{route:{params:Object.assign({},l)}});else if(e instanceof C.LanguagePickerPanelNavigationContext)i=s.createElement(ve,{route:{params:Object.assign({},l)}});else if(e instanceof C.InviteLinkQRPanelNavigationContext)i=s.createElement(pe,{route:{params:Object.assign(Object.assign({},e.state),l)}});else if(e instanceof C.ManageSearchInfoPanelNavigationContext)i=s.createElement(Ae,{route:{params:Object.assign(Object.assign({},l),{origin:e.state.origin})}});else if(e instanceof C.LoadingPanelNavigationContext)i=s.createElement(be,Object.assign({message:e.state.message},l));else if(e instanceof C.InviteShareNavigationContext)i=s.createElement(Ge,{route:{params:Object.assign({skypeMri:e.state.skypeMri,displayName:e.state.displayName,origin:e.state.origin},l)}});else if(e instanceof C.ConversationShareNavigationContext)i=s.createElement(ue,{route:{params:Object.assign(Object.assign({},e.state),l)}});else if(e instanceof C.GuestUpsellNavigationContext)i=s.createElement(ye,{route:{params:Object.assign(Object.assign({},e.state),l)}});else if(e instanceof C.ActiveNowPanelNavigationContext)i=s.createElement(M,{ref:l.ref,route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.CallerIdPromptContext)i=s.createElement(G,{route:{params:Object.assign({dialogId:e.state.dialogId},l)}});else if(e instanceof C.CallFailurePromptContext)i=s.createElement(Q,{route:{params:Object.assign({dialogId:"pstnDialog",phoneNumber:e.state.phoneNumber,reason:e.state.reason},l)}});else if(e instanceof C.SmsFailurePromptContext)i=s.createElement(rt,{route:{params:Object.assign({dialogId:e.state.dialogId,phoneNumber:e.state.phoneNumber,isSmsInfo:e.state.isSmsInfo},l)}});else if(e instanceof C.TasterPostCallPanelContext)i=s.createElement(ft,{route:{params:Object.assign({dialogId:e.state.dialogId},l)}});else if(e instanceof C.CallFailurePostPurchasePromptContext)i=s.createElement(q,{route:{params:Object.assign({dialogId:e.state.dialogId,phoneNumber:e.state.phoneNumber},l)}});else if(e instanceof a.default.AddinNavigationContext)i=a.default.AddinStackNavigator.renderSceneContent(e,l);else if(e instanceof C.AddPhoneNumberPanelNavigationContext)i=s.createElement(x,{ref:l.ref,route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.ArchivedConversationsPanelNavigationContext)i=s.createElement(O,{ref:l.ref,route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof T.default.NavigationContext.ScheduleCallNavigationContext)i=T.default.StackNavigator.renderSceneContent(e,l);else if(e instanceof m.default.NavigationContext.MeetNowNavigationContext)i=m.default.StackNavigator.renderSceneContent(e);else if(e instanceof C.SXPlaygroundNavigationContext)i=s.createElement(mt,Object.assign({},l));else if(e instanceof b.default.NavigationContext.PollNavigationContext)i=b.default.StackNavigator.renderSceneContent(e,l);else if(e instanceof C.CaptivePortalQuestionnaireContext)i=s.createElement(te,{route:{params:Object.assign({},l)}});else if(e instanceof C.EngagementSharePanelContext)i=s.createElement(fe,{key:"engagementSharePanel",route:{params:Object.assign({onShareComplete:e.state.onShareComplete,onPostComplete:e.state.onPostComplete,onShareCancel:e.state.onShareCancel,shareableContentConfigs:e.state.shareableContentConfigs,accessibilityLabelTitle:e.state.accessibilityLabelTitle,userMrisToExclude:e.state.userMrisToExclude},l)}});else if(e instanceof C.SubtitlesNavigationContext)i=s.createElement(Y,Object.assign({key:"callTranscriptionPanelView",route:{params:{callId:e.state.callId,conversationMri:e.state.conversationMri,onClose:e.state.onClose}}},l));else if(e instanceof C.CallingDebugPanelNavigationContext)i=s.createElement($,{route:{params:{callId:e.state.callId||"",nativeWindow:e.state.nativeWindow||!1}}});else if(e instanceof C.CustomReactionsPanelNavigationContext)i=s.createElement(ce,{ref:l.ref,route:{params:Object.assign(Object.assign({},l),e.state)}});else if(e instanceof C.SpeechConsentNavigationContext)i=s.createElement(lt,{route:{params:Object.assign({},l)}});else if(e instanceof C.SendCreditPanelNavigationContext)i=s.createElement(Je,{route:{params:Object.assign({},l)}});else if(e instanceof C.E911AcknowledgementPanelNavigationContext)i=s.createElement(Se,{route:{params:Object.assign({shouldSkipLocationConsent:e.state.shouldSkipLocationConsent,onComplete:e.state.onComplete},l)}});else if(e instanceof C.TwinCamModalContext)i=s.createElement(vt,{route:{params:Object.assign({callId:e.state.callId,conversationMri:e.state.conversationMri,onStopTwinCamPressed:e.state.onStopTwinCamPressed},l)}});else if(e instanceof C.CallPreviewNavigationContext){const t=r.default.getS4LCMCFeaturesNoSubscription(),n=t.redesignedLobbiesEnabled,o=t.enableCallPreviewPermissionOnLoad;i=n?s.createElement(k.default,{meetNowParameters:{origin:I.MeetNowOrigin.JoinLobby,convId:e.state.conversationMri},isCallPreviewLobby:!0,showTwinCam:e.state.isTwinCam,activeCallId:e.state.activeCallId}):s.createElement(c.default,{dialogId:"CallPreview",conversationMri:e.state.conversationMri,activeCallId:e.state.activeCallId,callOrigin:e.state.callOrigin,isGoLive:e.state.isGoLive,isTwinCam:e.state.isTwinCam,isModal:!0,permissionAlreadyAsked:o,skipPermissionPanel:e.state.skipPermissionPanel,isNewCallPreviewStyle:!1})}return s.createElement(d.default,{isPresentedByMobileStackNavigator:!0},s.createElement(o.Suspense,{fallback:null},i))}_navigatorSceneConfigTypeForNavContext(e,t){if(this._navigationDirections[e.id]=y.stackNavigationDirection(e,t),f.default.transitionHintForPopCard())return f.default.popCardsQuickFade();if(e instanceof C.MobileContentPanelNavigationContext){return y.conversationNavigationDirection(t)===P.StackNavigationDirection.Push?f.default.floatFromRight(f.ConversationHorizontalGestureResponseDistance):f.default.floatFromBottom()}if(e instanceof C.ShareWithPanelNavigationContext&&e.state.isExternalShare)return e.state.navigationDirection===P.StackNavigationDirection.Push?f.default.floatFromRight(0):f.default.floatFromBottom(0);if(e instanceof C.InAppBrowserNavigationContext&&e.state.navigationDirection!==P.StackNavigationDirection.Push)return f.default.floatFromBottom(64);if(e instanceof C.SearchNavigationContext)return t&&(t instanceof C.ContactsPanelV2NavigationContext||t instanceof C.MobileHubNavigationContext)?f.default.sceneConfigForSearchTransition():f.default.fade();if(e instanceof C.QuickCallNavigationContext&&e.state.navigationDirection!==P.StackNavigationDirection.Push)return t&&t instanceof C.MobileHubNavigationContext&&e.state.searchOnly?f.default.sceneConfigForSearchTransition():f.default.floatFromBottom();if(e instanceof C.PSTNCountrySelectorNavigationContext)return f.default.floatFromBottomNoScale();if(e instanceof C.SyncAddressBookContext||e instanceof C.PeopleYouMayKnowNoticeContext||e instanceof C.TelemetryConsentContext||e instanceof C.ThemeContext)return e.state.isFirstLogin?f.default.noTransition():f.default.floatFromBottom();if(e instanceof C.PromptPermissionContext)return f.default.noTransition();if(e instanceof C.CaptureComboNavigationContext||e instanceof C.MediaPickerNavigationContext||e instanceof C.ConversationMediaViewerPanelContext)return t&&(t instanceof C.CallNavigationContext||t instanceof C.GalleryNavigationContext||t instanceof C.SubtitlesNavigationContext||t instanceof C.CallingDebugPanelNavigationContext)?f.default.floatFromBottomNoScale():f.default.floatFromBottom(100);if(e instanceof C.CallNavigationContext)return f.default.floatFromRight(0);if(e instanceof C.ConversationParticipantsNavigationContext&&t&&t instanceof C.MobileHubNavigationContext)return f.default.floatFromBottom();if(e instanceof C.CreateConversationNavigationContext){if(t&&t instanceof C.MobileHubNavigationContext)return f.default.floatFromBottom()}else if(e instanceof C.ReportConcernNavigationContext){if(t&&t instanceof C.MobileHubNavigationContext)return f.default.floatFromBottom()}else{if(e instanceof a.default.AddinNavigationContext&&(e.state.origin===v.AddinOrigin.SwiftQuickReplyView||e.state.origin===v.AddinOrigin.Messaging))return f.default.noTransition(!1);if(e.state.navigationDirection===P.StackNavigationDirection.Present)return f.default.floatFromBottom();if(e instanceof C.CustomReactionsPanelNavigationContext)return f.default.floatFromBottom();if(e instanceof C.UserProfileContext)return f.default.noTransition()}return f.default.floatFromRight(f.HorizontalGestureResponseDistance)}}t.Z=kt},42623:(e,t,i)=>{const n=i(16778),o=i(40036),s=i(66964),a=i(33754),r=i(62807),l=i(17093),c=i(54679),d=i(51088),u=i(90135),g=(i(44285),i(29314)),h=i(37799),p=i(80633),m=i(42596),S=i(49060),C=i(15315),f=i(24793),y=i(72508),_=i(85892),v=i(47709),b=i(21090),T=i(93801),P=(0,o.createNativeStackNavigator)(),A={animation:l.StackAnimationType.SLIDE_FROM_RIGHT};t.Z=function(){const e={headerShown:!1,title:a.getString("Global.AppTitle")},t={hubTab:l.HubTab.Recents};return n.createElement(P.Navigator,{initialRouteName:l.MobileHubNavigationId,screenOptions:({route:t})=>Object.assign(Object.assign({},e),{animation:b.getDirection(t.name)||l.StackAnimationType.SLIDE_FROM_RIGHT})},n.createElement(P.Screen,{name:l.MobileHubNavigationId,component:h.MobileHub,initialParams:t}),n.createElement(P.Screen,{name:s.OneDriveAddinPanelNavigationId,component:g.default}),n.createElement(P.Screen,{name:l.BingBackgroundNavigationId,component:C.BingBackgroundsPanelView}),n.createElement(P.Screen,{options:{gestureEnabled:!0},name:l.CallNavigationId,component:C.CallPanel}),n.createElement(P.Screen,{name:l.CallPreviewNavigationId,component:C.CallPreviewStackNavigation}),n.createElement(P.Screen,{name:l.CallRosterNavigationId,component:C.CallRosterPanel}),n.createElement(P.Screen,{name:l.CallingDebugPanelNavigationId,component:C.CallStatsView}),n.createElement(P.Screen,{name:l.SubtitlesNavigationId,component:C.CallTranscriptionStackPanel}),n.createElement(P.Screen,{name:l.PSTNCountrySelectorPanelId,component:C.CountrySelector}),n.createElement(P.Screen,{name:l.PSTNDialerPanelId,component:C.DialerPanel}),n.createElement(P.Screen,{name:l.E911AcknowledgementPanelId,component:C.E911AcknowledgementPanel}),n.createElement(P.Screen,{name:l.QuickCallPanelId,component:C.QuickCallNavigation}),n.createElement(P.Screen,{name:l.TogetherModeNavigationId,component:C.TogetherModePanel}),n.createElement(P.Screen,{name:l.TwinCamModalNavigationId,component:C.TwinCamPanel}),n.createElement(P.Screen,{name:l.CallCaptionsSettingsPanelNavigationId,component:C.CallCaptionsSettingsPanel}),n.createElement(P.Screen,{name:l.GetBalanceStateId,component:f.BalanceStatePanelNavigation}),n.createElement(P.Screen,{name:l.CallerIdPromptNavigationId,component:f.CallerIdPromptPanel}),n.createElement(P.Screen,{name:l.CallFailurePromptId,component:f.CallFailurePromptPanel}),n.createElement(P.Screen,{name:l.CallFailurePostPurchasePromptNavigationId,component:f.CallFailurePostPurchasePromptPanel}),n.createElement(P.Screen,{name:l.SkypeNumberPanelPurchaseFlowNavigationId,component:f.SkypeNumberPurchaseFlow}),n.createElement(P.Screen,{name:l.Payments3dsNavigationId,component:f.Payments3dsWebPanel}),n.createElement(P.Screen,{name:l.GetProductWebFlowNavigationId,component:f.PaymentsWebFlowPanel}),n.createElement(P.Screen,{name:l.PurchaseContinuationId,component:f.PurchaseContinuationPanel}),n.createElement(P.Screen,{name:l.SendCreditPanelNavigationId,component:f.SendCreditPanel}),n.createElement(P.Screen,{name:l.SkypeNumberCountryAreaSelectorPanelId,component:f.SkypeNumberCountryAreaSelector}),n.createElement(P.Screen,{name:l.SkypeNumberListNavigationId,component:f.SkypeNumberList}),n.createElement(P.Screen,{name:l.SkypeNumberPrefixSelectorPanelId,component:f.SkypeNumberPrefixSelector}),n.createElement(P.Screen,{name:l.SmsFailurePromptId,component:f.SmsFailurePrompt}),n.createElement(P.Screen,{name:l.SubscriptionIntroNavigationId,component:f.SubscriptionsIntro}),n.createElement(P.Screen,{name:l.TasterPostCallPanelId,component:f.TasterPostCallPanel}),n.createElement(P.Screen,{name:l.TelemetryPerfId,component:h.TelemetryPerfPanel}),n.createElement(P.Screen,{name:l.JoiningGuestNavigatorId,component:h.SplashScreenNavigation}),n.createElement(P.Screen,{name:l.CaptivePortalQuestionnaireNavigationId,component:h.CaptivePortalQuestionnaire}),n.createElement(P.Screen,{name:l.ReportConcernNavigationId,component:h.ReportConcernModal}),n.createElement(P.Screen,{name:l.DetailsNavigationId,component:h.DetailsPanel}),n.createElement(P.Screen,{name:l.BotDiscoveryNavigationId,component:y.AgentsDiscoveryPanel}),n.createElement(P.Screen,{name:l.BotsListNavigationId,component:y.AgentsPanelNavigation}),n.createElement(P.Screen,{name:l.InAppBrowserNavigationId,component:y.Browser}),n.createElement(P.Screen,{name:l.AvatarNavigationId,component:_.AvatarPickerDialog}),n.createElement(P.Screen,{name:l.CommonAvatarNavigationId,component:_.AvatarCommonPickerDialog}),n.createElement(P.Screen,{name:l.EngagementSharePanelNavigationId,component:_.EngagementSharePanel}),n.createElement(P.Screen,{name:l.PeopleYouMayKnowNoticeNavigationId,component:_.PeopleYouMayKnowNoticeDialog}),n.createElement(P.Screen,{name:l.PnvEnterCodeNavigationId,component:h.PnvEnterCodeNavigation}),n.createElement(P.Screen,{name:l.PnvEnterNumberNavigationId,component:h.PnvEnterNumberNavigation}),n.createElement(P.Screen,{name:l.PnvDebugToolNavigationId,component:h.PnvDebugNavigation}),n.createElement(P.Screen,{name:l.PromptPermissionsNavigatorId,component:h.PromptPermissionDialog}),n.createElement(P.Screen,{name:l.SsoWebFlowNavigationId,component:_.SsoWebFlowPanelNavigation}),n.createElement(P.Screen,{name:l.SyncAddressBookNavigationId,component:_.SyncAddressBookNavigation}),n.createElement(P.Screen,{name:l.TelemetryConsentNavigationId,component:_.TelemetryConsentDialog}),n.createElement(P.Screen,{name:l.ThemeNavigationId,component:h.ThemeDialog}),n.createElement(P.Screen,{name:l.UserProfileNavigationId,component:h.UserProfileDialog}),n.createElement(P.Screen,{name:l.AboutNavigationId,component:h.AboutPanelNavigation}),n.createElement(P.Screen,{name:l.AdvancedCallingSettingsPanelNavigationId,component:h.AdvancedCallingSettingsPanel}),n.createElement(P.Screen,{name:l.AlertsHubNavigationId,component:h.AlertsHubPanelNavigation}),n.createElement(P.Screen,{name:l.BlockedUsersListId,component:h.BlockedUsersListPanel}),n.createElement(P.Screen,{name:l.CallerIdCallingSettingsPanelNavigationId,component:h.CallerIdSettingsPanel}),n.createElement(P.Screen,{name:l.CallerIdNumberCallingSettingsPanelNavigationId,component:h.CallerIdNumberPanel}),n.createElement(P.Screen,{name:l.CallingSettingsPanelNavigationId,component:h.CallingSettingsPanel}),n.createElement(P.Screen,{name:l.ConnectedUsersListNavigationId,component:h.ConnectedUsersListPanel}),n.createElement(P.Screen,{name:l.DiagnosticToolsId,component:h.DiagnosticToolsPanel}),n.createElement(P.Screen,{name:l.FeatureFlagListId,component:h.FeatureFlags}),n.createElement(P.Screen,{name:l.LanguagePickerNavigationId,component:h.LanguagePickerPanel}),n.createElement(P.Screen,{name:l.ManageSearchInfoPanelId,component:h.ManageSearchInfoPanel}),n.createElement(P.Screen,{name:l.ManageUsersSettingsPanelNavigationId,component:h.ManageUsersSettingsPanel}),n.createElement(P.Screen,{name:l.NewSettingsPanelNavigationId,component:h.MobileSettingsPanel}),n.createElement(P.Screen,{name:l.MySettingsNavigationId,component:h.MySettingsPanel}),n.createElement(P.Screen,{name:l.ProfilePicturePanelId,component:h.ProfilePicturePanel}),n.createElement(P.Screen,{name:l.RawPreferencesId,component:h.RawPreferences}),n.createElement(P.Screen,{name:l.SendDiagnosticLogsId,component:h.SendDiagnosticLogsPanel}),n.createElement(P.Screen,{name:l.SettingsGroupNavigationId,component:h.SettingsGroupPanel}),n.createElement(P.Screen,{name:l.SlimcoreFlagListId,component:h.SlimcoreFlagsPanel}),n.createElement(P.Screen,{name:l.SpeechConsentNavigationId,component:h.SpeechConsentPanel}),n.createElement(P.Screen,{name:l.SubtitlesCallingSettingsPanelNavigationId,component:h.SubtitlesCallingSettingsPanel}),n.createElement(P.Screen,{name:l.ThirdPartyNoticesNavigationId,component:h.ThirdPartyNoticesPanel}),n.createElement(P.Screen,{name:l.TranslationSettingsPanelNavigationId,component:h.TranslationSettingsPanel}),n.createElement(P.Screen,{name:l.GuestUpsellNavigationId,component:u.default}),n.createElement(P.Screen,{name:r.MeetNowCreatorLobbyNavigationId,component:S.MeetNowCreatorLobbyWrapper,options:{gestureEnabled:void 0}}),n.createElement(P.Screen,{name:r.MeetNowJoinLinkPanelNavigationId,component:S.MeetNowJoinLinkPanel}),n.createElement(P.Screen,{name:r.JoinMeetNowPanelNavigationId,component:S.JoinMeetNowPanelNavigation}),n.createElement(P.Screen,{name:r.MeetNowLobbyNavigationId,component:S.MeetNowLobbyNavigation,options:{gestureEnabled:void 0}}),n.createElement(P.Screen,{name:r.MeetNowCreateOrJoinFlyoutNavigationId,component:S.MeetNowCreateOrJoinFlyout}),n.createElement(P.Screen,{name:r.MeetNowJoinFlyoutNavigationId,component:S.MeetNowJoinFlyout}),n.createElement(P.Screen,{name:l.ArchivedConversationsId,component:v.ArchivedConversationsNavigation}),n.createElement(P.Screen,{name:l.CreateConversationNavigationId,component:v.CreateConversationNavigation}),n.createElement(P.Screen,{name:l.ConversationParticipantsNavigationId,component:v.ConversationParticipantsNavigation}),n.createElement(P.Screen,{name:l.CaptureComboNavigationId,component:v.CaptureComboViewNavigation}),n.createElement(P.Screen,{name:l.CaptureMultiPreviewNavigationId,component:v.CaptureMultiplePreviewNavigation}),n.createElement(P.Screen,{name:l.CapturePreviewNavigationId,component:v.CapturePreviewNavigation}),n.createElement(P.Screen,{name:l.CustomReactionsPanelId,component:v.CustomReactionsNavigation}),n.createElement(P.Screen,{name:l.ConversationMediaViewerPanelNavigationId,component:v.ConversationMediaViewerNavigation}),n.createElement(P.Screen,{name:l.LoadingPanelNavigationId,component:v.LoadingNavigation}),n.createElement(P.Screen,{name:l.LocationPickerNavigationId,component:v.LocationPickerNavigation}),n.createElement(P.Screen,{name:l.LocationViewerNavigationId,component:v.LocationViewerNavigation}),n.createElement(P.Screen,{name:l.MediaPickerNavigationId,component:v.MediaPickerNavigation}),n.createElement(P.Screen,{name:l.ConversationNavigationId,options:A,component:v.MobileContentPanel}),n.createElement(P.Screen,{name:l.PesSearchNavigationId,component:v.PesSearchNavigation}),n.createElement(P.Screen,{name:l.ShareContactsToConversationNavigationId,component:v.ShareContactsToConversationNavigation}),n.createElement(P.Screen,{name:l.ShareWithPanelNavigationId,component:v.ShareWithNavigation}),n.createElement(P.Screen,{name:l.GalleryNavigationId,component:v.StackGalleryNavigation}),n.createElement(P.Screen,{name:l.MediaViewerNavigationId,component:v.MediaViewerNavigation}),n.createElement(P.Screen,{name:l.DocumentViewerNavigationId,component:v.DocumentViewerNavigation}),n.createElement(P.Screen,{name:l.ActiveNowPanelId,component:T.ActiveNowNavigation}),n.createElement(P.Screen,{name:l.AddContactPanelId,component:T.AddContactNavigation}),n.createElement(P.Screen,{name:l.AddPhoneNumberPanelNavigationId,component:T.AddPhoneNumberNavigation}),n.createElement(P.Screen,{name:l.CallingSettingsHeaderAuthWebFlowNavigationId,component:T.CallingSettingsHeaderAuthWebFlowNavigation}),n.createElement(P.Screen,{name:l.ChatConfigNavigationId,component:T.ChatSettingsNavigation}),n.createElement(P.Screen,{name:l.ContactsPanelId,component:T.ContactsNavigation}),n.createElement(P.Screen,{name:l.ConversationSharingScreenId,component:T.ConversationInviteSharePanel}),n.createElement(P.Screen,{name:l.InviteLinkQRPanelNavigationId,component:T.DisplayQRPanel}),n.createElement(P.Screen,{name:l.MeControlNavigationId,component:T.MobileMeControlPanel}),n.createElement(P.Screen,{name:l.InviteShareNavigationId,component:T.ProfileInviteSharePanel}),n.createElement(P.Screen,{name:l.SkypeNumberWebFlowNavigationId,component:T.HeaderAuthWebFlowNavigation}),n.createElement(P.Screen,{name:l.SearchNavigationId,component:T.SearchPanel}),n.createElement(P.Screen,{name:c.PollCreationPanelNavigationId,component:m.PollCreationPanel}),n.createElement(P.Screen,{name:c.PollSummaryPanelNavigationId,component:m.PollSummaryPanel}),n.createElement(P.Screen,{name:c.PollVotersListPanelNavigationId,component:m.PollVotersListPanel}),n.createElement(P.Screen,{name:d.ScheduleCallCreationPanelNavigationId,component:p.ScheduleCallCreationPanel}),n.createElement(P.Screen,{name:d.ScheduleCallReminderPanelNavigationId,component:p.ScheduleCallReminderPanel}),n.createElement(P.Screen,{options:{gestureEnabled:!1},name:d.ScheduledCallOrganizerEditPanelNavigationId,component:p.ScheduledCallOrganizerEditPanel}),n.createElement(P.Screen,{name:d.ScheduledCallsListPanelNavigationId,component:p.ScheduledCallsListPanel}),n.createElement(P.Screen,{name:d.ScheduledCallOverviewPanelNavigationId,component:p.ScheduledCallOverviewPanel}))}},4653:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(98356),s=i(16778),a=i(98278),r=i(15877),l=i(22222),c=i(31839),d=i(19675),u=100,g=(0,r.lazyProperties)({container:()=>s.Styles.createViewStyle({justifyContent:"space-between",paddingBottom:20}),component:()=>s.Styles.createViewStyle({height:u,width:u,backgroundColor:"red",marginBottom:20}),picker:()=>s.Styles.createPickerStyle({maxWidth:300,marginBottom:20}),buttons:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"center"})});class h extends c.default{constructor(e){super(e),this._fadeIn=()=>(this._sxAnimatedView.setValue({opacity:0}),{start:()=>{this._sxAnimatedView.fadeIn()},stop:n.noop}),this._fadeOut=()=>(this._sxAnimatedView.setValue({opacity:1}),{start:()=>{this._sxAnimatedView.fadeOut()},stop:n.noop}),this._getTranslateXToValue=()=>this._isRTL()?0:this._layout.width-u,this._onLayout=e=>{this._layout=e,this._resetAnimatedStyles()},this._onPickerValueChange=e=>{this.setState({selectedAnimation:e})},this._onSXAnimatedViewRef=e=>{this._sxAnimatedView=e},this._resetAnimatedStyles=()=>{const e=this._getInitX();this._sxAnimatedView.setValue({scale:1,x:e,y:0,opacity:1})},this._scale=()=>this._sxAnimatedView.getAnimation({scale:.5},"sxplayground"),this._scaleAndTranslateX=()=>{const e=this._getTranslateXToValue(),t=this._getInitX();return this._sxAnimatedView.setValue({x:t}),this._sxAnimatedView.getAnimation({x:e,scale:.5},"sxplayground")},this._start=()=>{this._resetAnimatedStyles(),this._testAnimations[this.state.selectedAnimation](this._layout,this._sxAnimatedView).start()},this._testAnimations={scale:(e,t)=>this._scale(),"x right":(e,t)=>this._translateX(),"x left":(e,t)=>this._translateX(),"scale, x right":(e,t)=>this._scaleAndTranslateX(),"scale, x left":(e,t)=>this._scaleAndTranslateX(),"fadeIn()":(e,t)=>this._fadeIn(),"fadeOut()":(e,t)=>this._fadeOut()},this._translateX=()=>{const e=this._getInitX(),t=this._getTranslateXToValue();return this._sxAnimatedView.setValue({x:e}),this._sxAnimatedView.getAnimation({x:t},"sxplayground")},this._pickerItems=n.map(n.keys(this._testAnimations),(e=>({label:e,value:e}))),this.state={selectedAnimation:this.state?this.state.selectedAnimation:this._pickerItems[0].value}}static getHeaderText(){return"Animations"}componentDidMount(){super.componentDidMount()}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.state.selectedAnimation!==t.selectedAnimation&&this._resetAnimatedStyles()}render(){return s.createElement(s.View,{style:g.container,onLayout:this._onLayout},s.createElement(d.Header,{size:3,selectable:!0},"More coming soon... "),s.createElement(o.View,{ref:this._onSXAnimatedViewRef,style:g.component}),s.createElement(s.Picker,{style:g.picker,items:this._pickerItems,selectedValue:this.state.selectedAnimation,onValueChange:this._onPickerValueChange}),s.createElement(s.View,{style:g.buttons},s.createElement(l.default,{buttonStyle:a.SXButtonStyle.ColorFill,buttonSize:a.SXButtonSize.Medium,title:"Start",onPress:this._start}),s.createElement(l.default,{buttonStyle:a.SXButtonStyle.ThemeNoBackground,buttonSize:a.SXButtonSize.Medium,title:"reset",onPress:this._resetAnimatedStyles})))}_getInitX(){return this._isRTL()?this._layout.width-u:0}_isRTL(){return n.includes(this.state.selectedAnimation,"left")}}t.default=h},58811:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(4736),a=i(98278),r=i(15877),l=i(22222),c=i(11828),d=i(31839),u=i(64893),g=i(87331),h=i(81760),p=(0,r.lazyProperties)({titleInput:()=>o.Styles.createTextInputStyle({width:100,borderWidth:1}),multilineWidth:()=>o.Styles.createViewStyle({maxWidth:120})}),m="Button";class S extends d.default{constructor(e){super(e),this.state={buttonStyle:0,title:m,subtitle:void 0,buttonSize:a.SXButtonSize.Medium,iconPositon:a.SXButtonIconPosition.Start}}render(){return[this._renderComponentSection("ActionButton.tsx",this._renderActionButton()),this._renderComponentSection("SXButton.tsx",this._renderSXButton())]}_renderActionButton(){return n.flatten([this._renderActionButtonSize(),this._renderActionButtonWithBackgroundColor()])}_renderActionButtonWithBackgroundColor(){return this._renderPropSection("props",{title:"ActionButton.tsx: props",url:"#"},[this._renderPropOptionSection("backgroundColor",o.createElement(s.default,{backgroundColor:h.Color.red,icon:c.SkypeIcon.Alert}),!1),this._renderPropOptionSection("disabled",o.createElement(s.default,{disabled:!0,icon:c.SkypeIcon.SkypeIcon}),!1),this._renderPropOptionSection("flipIcon",o.createElement(s.default,{flipIcon:!0,icon:c.SkypeIcon.SkypeIcon}),!1),this._renderPropOptionSection("iconSize",o.createElement(s.default,{iconSize:36,icon:c.SkypeIcon.SkypeIcon}),!1),this._renderPropOptionSection("iconColor",o.createElement(s.default,{iconColor:h.Color.red,icon:c.SkypeIcon.SkypeIcon}),!1),this._renderPropOptionSection("deselected",o.createElement(s.default,{deselected:!0,icon:c.SkypeIcon.SkypeIcon}),!1)])}_renderActionButtonSize(){const e=u.getEnumEntries(s.ActionButtonSize);return this._renderPropSection("size",{title:"ActionButton.tsx: ActionButtonSize",url:"#"},e.map(((e,t)=>this._renderPropOptionSection(e,o.createElement(s.default,{key:"actioButtonSize"+t,icon:c.SkypeIcon.Plus,size:t}),!1))))}_renderSXButton(){return n.flatten([this._renderTitle(),this._renderSubtitle(),this._renderMultiline(),this._renderSXButtonStyle(),this._renderButtonSize(),this._renderIconSection(),this._renderActivityIndicatorSection()])}_renderTitle(){const e=this._renderInput(m,(e=>{this.setState({title:e.length?e:m})}));return this._renderPropSection("title",{title:"string",url:"#"},e)}_renderSubtitle(){const e=this._renderInput("subtitle",(e=>{this.setState({subtitle:e.length?e:void 0})}));return this._renderPropSection("subtitle",{title:"string",url:"#"},e)}_renderMultiline(){const e=o.createElement(g.default,{isOn:this.state.allowTextWrap,accessibilityLabel:this.props.accessibilityLabel,onChange:(e,t)=>{this.setState({allowTextWrap:t})}});return this._renderPropSection("allowTextWrap",{title:"boolean",url:"#"},e)}_renderSXButtonStyle(){const e=u.getEnumEntries(a.SXButtonStyle),t=n.map(e,((e,t)=>this._renderButtonPropDemo(e+t,e,t===this.state.buttonStyle,{buttonStyle:t,onPress:()=>{this.setState({buttonStyle:t})}})));return this._renderPropSection("buttonStyle",{title:"CommonUiModels.ts: SXButtonStyle",url:"https://aka.ms/skype-coreui-sxbutton-props"},t)}_renderButtonSize(){const e=u.getEnumEntries(a.SXButtonSize),t=n.map(e,((e,t)=>this._renderButtonPropDemo(e+t,e,t===this.state.buttonSize,{buttonSize:t,onPress:()=>{this.setState({buttonSize:t})}})));return this._renderPropSection("buttonSize",{title:"CommonUIModels.ts: SXButtonSize",url:"https://aka.ms/skype-coreui-sxbutton-props"},t)}_renderIconSection(){const e=u.getEnumEntries(a.SXButtonIconPosition),t=this._renderPropSection("iconPosition",{title:"CommonUIModels.ts: SXButtonIconPosition",url:"https://aka.ms/skype-coreui-sxbutton-props"},n.map(e,((e,t)=>this._renderButtonPropDemo(e+t,e,t===this.state.iconPositon,{icon:c.SkypeIcon.SkypeIcon,iconPositon:t,onPress:()=>{this.setState({iconPositon:t})}})))),i=u.getEnumEntries(c.IconSize);return[t,this._renderPropSection("iconSize",{title:"SXIconModels.ts: IconSize",url:"https://aka.ms/skype-coreui-sxbutton-props"},n.map(i,((e,t)=>{const i=u.getIconSizeFromEnumPropertyName(e);return this._renderButtonPropDemo(e+t,e,!1,{icon:c.SkypeIcon.SkypeIcon,iconSize:i})})))]}_renderActivityIndicatorSection(){const e=n.map([!0,!1],(e=>{const t=e.toString();return this._renderButtonPropDemo("activityIndicator"+t,t,!1,{showActivityIndicator:e})}));return e.push(this._renderButtonPropDemo("activityIndicatortruewithicon","true with icon",!1,{showActivityIndicator:!0,icon:c.SkypeIcon.SkypeIcon})),this._renderPropSection("showActivityIndicator",{title:"boolean",url:"#"},e)}_renderButtonPropDemo(e,t,i,s){const a={buttonStyle:this.state.buttonStyle,title:this.state.title,buttonSize:this.state.buttonSize,subtitle:this.state.subtitle,iconPositon:this.state.iconPositon,allowTextWrap:this.state.allowTextWrap,style:this.state.allowTextWrap?p.multilineWidth:void 0,agnosticGradientColor:h.AgnosticGradientFillButtonColors.orange};return this._renderPropOptionSection(t,o.createElement(l.default,Object.assign({key:e},n.extend(a,s))),i)}_renderInput(e,t){return o.createElement(o.TextInput,{key:"textinput"+e,style:[p.titleInput,this._themeStyles.viewBorderStyle],placeholder:e,blurOnSubmit:!0,onChangeText:n.debounce(t,100)})}}t.default=S},34764:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(15877),a=i(81760),r=i(31839),l=i(80837),c=(0,s.lazyProperties)({colorContainer:()=>o.Styles.createViewStyle({width:45,height:45,borderRadius:45}),propSectionContainer:()=>o.Styles.createViewStyle({flexDirection:"column",alignItems:"flex-start"}),propOptionContainer:()=>o.Styles.createViewStyle({minWidth:450})});class d extends r.default{constructor(){super(...arguments),this._renderColor=(e,t)=>{const i=o.Styles.createViewStyle({backgroundColor:e},!1);return this._renderPropOptionSection(t,o.createElement(o.View,{style:[c.colorContainer,l.default.flexOne,i]}),!1,[c.propOptionContainer,l.default.flexOne])}}render(){const e=this._renderPropSection("Color",{title:"SXColorModels.ts",url:"https://aka.ms/skype-coreui-sxcolormodels"},n.map(a.Color,this._renderColor),[c.propSectionContainer]);return this._renderComponentSection("SXColorModels.ts",e)}}t.default=d},63227:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(13944),a=i(44973),r=i(81760),l=i(11828),c=i(31839),d=i(64893),u=i(80837);class g extends c.default{constructor(e){super(e),this._setIcon=e=>{this.setState({icon:e})},this._setIconSize=e=>{this.setState({size:e})},this.state={icon:l.SkypeIcon.SkypeIcon,size:l.IconSize.default}}render(){return this._renderSXIconsSection()}_renderSXIconsSection(){const e=d.getEnumEntries(l.IconSize),t=this._renderPropSection("iconSize",{title:"SXIconModels.ts: IconSize",url:"https://aka.ms/skype-coreui-sxbutton-props"},n.map(e,((e,t)=>{const i=d.getIconSizeFromEnumPropertyName(e);return this._renderPropOptionSection(e,o.createElement(s.default,{key:"Iconsize"+t,icon:this.state.icon,size:i,color:this._themeColors.primaryIconColor,hoverColor:this._themeColors.iconHoverColor,onPress:()=>{this._setIconSize(i)}}),this.state.size===i)}))),i=this._renderPropSection("SkypeIcon",{title:"https://skypeassets.azurewebsites.net/skype-assets/",url:"https://skypeassets.azurewebsites.net/skype-assets/"},n.map(Object.keys(l.SkypeIcon).filter((e=>isNaN(Number(e)))),(e=>this._renderPropOptionSection(e,o.createElement(s.default,{key:"icon"+e,icon:l.SkypeIcon[e],size:this.state.size,color:this._themeColors.primaryIconColor,hoverColor:this._themeColors.iconHoverColor,onPress:()=>this._setIcon(l.SkypeIcon[e])}),this.state.icon===l.SkypeIcon[e],[u.default.flexOne])))),c=this._renderPropSection("CompositeIcon",{title:"CompositeIcon.tsx",url:"https://skypeassets.azurewebsites.net/skype-assets/"},[o.createElement(a.default,{icons:[{icon:l.SkypeIcon.CallRecordStroke,color:r.Color.white},{icon:l.SkypeIcon.CallRecordDot,color:r.Color.red}],iconSize:this.state.size}),o.createElement(a.default,{icons:[{icon:l.SkypeIcon.GlobeCredit,color:r.Color.yellow},{icon:l.SkypeIcon.CreditGlobe,color:r.Color.blue}],iconSize:this.state.size})]);return this._renderComponentSection("SXIconModels.ts",[t,i,c])}}t.default=g},56634:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SXPlaygroundMenuItems=void 0;const n=i(96486),o=i(16778),s=i(98278),a=i(15877),r=i(4735),l=i(17093),c=i(90631),d=i(22222),u=i(11828),g=i(24576),h=i(53374),p=(0,a.lazyProperties)({container:()=>o.Styles.createViewStyle({alignSelf:"stretch"})});var m;!function(e){e[e.Colors=0]="Colors",e[e.Icons=1]="Icons",e[e.Buttons=2]="Buttons",e[e.Text=3]="Text",e[e.Animations=4]="Animations",e[e.NativeBase=5]="NativeBase"}(m=t.SXPlaygroundMenuItems||(t.SXPlaygroundMenuItems={}));class S extends g.default{constructor(){super(...arguments),this._onSettingsPress=()=>{const e=h.default.newCauseId();r.default.closeGenericDesktopModal(e,this._getRootViewId()),r.default.navigateToDesktopSettingsGroup(l.SettingsGroup.ThemeSettings,this._getRootViewId(),e)}}componentDidMount(){super.componentDidMount(),this.props.onMenuItemPress(0)}render(){return o.createElement(o.View,{style:p.container},o.createElement(c.SimplePanelHeader,{panelName:"SX Playground",leftButton:{closeButtonType:c.CloseButtonType.Back,onPress:this.props.onBackButtonPress},rightButtons:{icon:u.SkypeIcon.Settings,onPress:this._onSettingsPress}}),this._renderMenuItems())}_renderMenuItems(){return n.map(m,(e=>{const t=m[e];return n.isString(t)?o.createElement(d.default,{key:"sxmenu"+t,buttonStyle:s.SXButtonStyle.ThemeNoBackground,title:m[e],onPress:()=>{this.props.onMenuItemPress(e)}}):void 0}))}}t.default=S},62341:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SXPlaygroundNativeBase=void 0;const n=i(72150),o=i(81878),s=i(67294),a=i(16778),r=i(88837),l=i(58187),c=i(18037),d=i(11828),u=i(63841),g=i(10117),h=["2xs","xs","sm","md","lg"],p=["primary","secondary"],m=["solid","outline","outlineFilled"],S=(0,r.withResubAutoSubscriptions)((()=>{const e=(0,l.useCommonContext)(),t=(0,s.useCallback)((e=>{c.default.setTheme(Number(e))}),[]);return a.createElement(n.Radio.Group,{name:"theme",value:e.theme.toString(),onChange:t},a.createElement(n.Stack,{direction:{base:"row"},p:1},a.createElement(n.Radio,{size:"sm",mx:"1",value:u.Theme.Delphi.toString()},"Light"),a.createElement(n.Radio,{size:"sm",mx:"1",value:u.Theme.DelphiDark.toString()},"Dark"),a.createElement(n.Radio,{size:"sm",mx:"1",value:u.Theme.Accessible.toString()},"Accessible light"),a.createElement(n.Radio,{size:"sm",mx:"1",value:u.Theme.AccessibleDark.toString()},"Accessible dark")))})),C=()=>{const[e,t]=(0,s.useState)("md"),[i,r]=(0,s.useState)("Default"),[l,c]=(0,s.useState)("solid"),[u,C]=(0,s.useState)("primary"),[f,y]=(0,s.useState)(!1),[_,v]=(0,s.useState)(void 0),[b,T]=(0,s.useState)(void 0),[P,A]=(0,s.useState)("sm"),[k,I]=(0,s.useState)("sm"),w=(0,s.useMemo)((()=>_?a.createElement(g.ThemedIcon,{size:P,name:_}):void 0),[_,P]),N=(0,s.useMemo)((()=>b?a.createElement(g.ThemedIcon,{size:k,name:b}):void 0),[b,k]);return a.createElement(n.Column,null,a.createElement(S,null),a.createElement(n.Center,{height:"100px"},a.createElement(o.Button,{size:e,variant:l,colorScheme:u,leftIcon:w,rightIcon:N,isDisabled:f},i)),a.createElement(n.Row,null,a.createElement(n.Text,null,"Variant: "),a.createElement(n.Menu,{trigger:e=>a.createElement(n.Pressable,Object.assign({},e),a.createElement(n.Text,null,l))},m.map((e=>a.createElement(n.Menu.Item,{onPress:()=>c(e),key:e},null!=e?e:"solid"))))),a.createElement(n.Row,null,a.createElement(n.Text,null,"Color scheme: "),a.createElement(n.Menu,{trigger:e=>a.createElement(n.Pressable,Object.assign({},e),a.createElement(n.Text,null,u))},p.map((e=>a.createElement(n.Menu.Item,{onPress:()=>C(e),key:e},null!=e?e:"primary"))))),a.createElement(n.Row,{alignItems:"center"},a.createElement(n.Text,null,"Text: "),a.createElement(n.Input,{size:"xs",onChangeText:e=>r(e),value:i})),a.createElement(n.Row,null,a.createElement(n.Text,null,"Size: "),a.createElement(n.Menu,{trigger:t=>a.createElement(n.Pressable,Object.assign({},t),a.createElement(n.Text,null,e))},["sm","md","lg"].map((e=>a.createElement(n.Menu.Item,{onPress:()=>t(e),key:e},e))))),a.createElement(n.Row,null,a.createElement(n.Text,null,"Disabled: "),a.createElement(n.Switch,{isChecked:f,onToggle:()=>{y((e=>!e))}})),a.createElement(n.Row,{alignItems:"center"},a.createElement(n.Text,null,"Left icon: "),a.createElement(n.Menu,{trigger:e=>a.createElement(n.Pressable,Object.assign({},e),_?a.createElement(g.ThemedIcon,{size:"2xs",name:_}):a.createElement(n.Text,null,"undefined"))},Object.keys(d.SkypeIcon).slice(0,10).map((e=>a.createElement(n.Menu.Item,{onPress:()=>v(Number(e)),key:e},a.createElement(g.ThemedIcon,{size:"2xs",name:Number(e)}))))),a.createElement(n.Text,null," icon size: "),a.createElement(n.Menu,{trigger:e=>a.createElement(n.Pressable,Object.assign({},e),a.createElement(n.Text,null,P))},h.map((e=>a.createElement(n.Menu.Item,{onPress:()=>A(e),key:e},a.createElement(n.Text,null,e)))))),a.createElement(n.Row,{alignItems:"center"},a.createElement(n.Text,null,"Right icon: "),a.createElement(n.Menu,{trigger:e=>a.createElement(n.Pressable,Object.assign({},e),b?a.createElement(g.ThemedIcon,{size:"2xs",name:b}):a.createElement(n.Text,null,"undefined"))},Object.keys(d.SkypeIcon).slice(0,10).map((e=>a.createElement(n.Menu.Item,{onPress:()=>T(Number(e)),key:e},a.createElement(g.ThemedIcon,{size:"2xs",name:Number(e)}))))),a.createElement(n.Text,null," icon size: "),a.createElement(n.Menu,{trigger:e=>a.createElement(n.Pressable,Object.assign({},e),a.createElement(n.Text,null,k))},h.map((e=>a.createElement(n.Menu.Item,{onPress:()=>I(e),key:e},a.createElement(n.Text,null,e)))))))};t.SXPlaygroundNativeBase=()=>a.createElement(n.Column,null,a.createElement(n.Box,null,a.createElement(n.Column,null,a.createElement(n.Heading,null,"Button"),a.createElement(C,null))))},67888:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(96074),s=i(98278),a=i(15877),r=i(4653),l=i(58811),c=i(34764),d=i(63227),u=i(56634),g=i(45673),h=i(62341),p=i(80837),m=i(19675),S=(0,a.lazyProperties)({container:()=>n.Styles.createViewStyle({flexDirection:"row"}),leftSidebar:()=>n.Styles.createViewStyle({width:s.SideBarWidths.max,borderRightWidth:1}),innerScroll:()=>n.Styles.createScrollViewStyle({paddingHorizontal:10,paddingVertical:5}),contentContainer:()=>n.Styles.createViewStyle({paddingVertical:20,alignItems:"stretch"})});class C extends o.default{constructor(){super(...arguments),this._onScrollViewRed=e=>{this._scrollView=e||void 0},this._onBackButtonPress=e=>{this._goBack("sxplayground")},this._onMenuItemPress=e=>{this._scrollView&&this._scrollView.setScrollTop(0),this.setState({currentMenuItem:e})}}render(){const e=[S.container,this._themeStyles.primaryBackgroundColorStyle,p.default.absoluteFill],t=[S.leftSidebar,this._themeStyles.dividerBorderColorStyle];return n.createElement(n.View,{style:e},n.createElement(n.View,{style:t},n.createElement(u.default,{onBackButtonPress:this._onBackButtonPress,onMenuItemPress:this._onMenuItemPress})),n.createElement(n.ScrollView,{ref:this._onScrollViewRed,style:p.default.flexOne},n.createElement(n.View,{style:S.innerScroll},n.createElement(m.Header,{size:1},u.SXPlaygroundMenuItems[this.state.currentMenuItem]),n.createElement(n.View,{style:S.contentContainer},this._renderContent()))))}_renderContent(){switch(this.state.currentMenuItem){case u.SXPlaygroundMenuItems.Buttons:return n.createElement(l.default,null);case u.SXPlaygroundMenuItems.Animations:return n.createElement(r.default,null);case u.SXPlaygroundMenuItems.Icons:return n.createElement(d.default,null);case u.SXPlaygroundMenuItems.Colors:return n.createElement(c.default,null);case u.SXPlaygroundMenuItems.Text:return n.createElement(g.default,null);case u.SXPlaygroundMenuItems.NativeBase:return n.createElement(h.SXPlaygroundNativeBase,null);default:return}}}t.default=C},31839:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(96074),s=i(87134),a=i(15877),r=i(11010),l=i(80837),c=i(19675),d=(0,a.lazyProperties)({componentHeading:()=>n.Styles.createTextStyle({paddingVertical:20}),propContent:()=>n.Styles.createButtonStyle({flexDirection:"row",flexWrap:"wrap"}),propContainer:()=>n.Styles.createViewStyle({paddingVertical:20}),propHeading:()=>n.Styles.createTextStyle({paddingBottom:20}),propLink:()=>n.Styles.createTextStyle({marginBottom:20,textDecorationLine:"underline"}),propOptionContainer:()=>n.Styles.createViewStyle({padding:20}),propOptionContainerSelected:()=>n.Styles.createViewStyle({borderWidth:2}),propOptionCaption:()=>n.Styles.createTextStyle({paddingBottom:20}),propOptionContent:()=>n.Styles.createViewStyle({justifyContent:"space-between"})});class u extends o.default{_renderComponentSection(e,t){return n.createElement(n.View,{key:e},n.createElement(c.Header,{style:d.componentHeading,size:3,selectable:!0},e),n.createElement(n.View,null,t),n.createElement(s.default,null))}_renderPropSection(e,t,i,o){const s=t?n.createElement(n.Link,Object.assign({style:[r.default.subtitleFontStyle(),this._themeStyles.primaryTextColorStyle,this._themeStyles.linkTextColorStyle,d.propLink]},t,{selectable:!0}),t.title):void 0;return n.createElement(n.View,{key:e,style:d.propContainer},n.createElement(c.Header,{style:s?void 0:d.propHeading,size:5},e),s,n.createElement(n.View,{style:[d.propContent,o]},i))}_renderPropOptionSection(e,t,i=!1,o,s="auto"){const a=[l.default.alignItemsCenter,d.propOptionContainer];i&&(a.push(d.propOptionContainerSelected),a.push(this._themeStyles.viewBorderStyle)),o&&a.push(o);const r=n.Styles.createTextStyle({alignSelf:s},!1);return n.createElement(n.View,{key:e,style:a},n.createElement(c.CardTitle,{style:[d.propOptionCaption,r],selectable:!0},e),n.createElement(n.View,{style:d.propOptionContent},t))}}t.default=u},45673:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(15877),a=i(6658),r=i(31839),l=i(64893),c=i(19675),d="One Skype for all your devices",u=(0,s.lazyProperties)({propSectionContainer:()=>o.Styles.createViewStyle({flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start"})});class g extends r.default{render(){return[this._renderHeader(),this._renderBodyText(),this._renderCaption(),this._renderCardTitle(),this._renderPanelHeader(),this._renderRowTitle(),this._renderSubtitle()]}_renderHeader(){const e=l.getEnumEntries(c.HeaderSize);return this._renderComponentSection("Header",this._renderPropSection("size",{title:"SXTextModels.ts: HeaderSize",url:""},n.map(e,((e,t)=>this._renderPropOptionSection(e,o.createElement(c.Header,{key:"header"+e,size:t},d),!1,void 0,"flex-start"))),[u.propSectionContainer]))}_renderBodyText(){return this._renderComponentSection("BodyText",this._renderPropSection("bold",{title:"boolean",url:"#"},[this._renderPropOptionSection("false",o.createElement(c.BodyText,{key:"bodytext1"},d),!1,void 0,"flex-start"),this._renderPropOptionSection("true",o.createElement(c.BodyText,{key:"bodytext2",bold:!0},d),!1,void 0,"flex-start")],[u.propSectionContainer]))}_renderCaption(){const e=l.getEnumEntries(a.MessageStreamFontSize);return this._renderComponentSection("Caption",this._renderPropSection("messageStreamFontSize (optional)",{title:"MessageStreamModels.ts: MessageStreamFontSize",url:"#"},n.map(e,((e,t)=>this._renderPropOptionSection(e,o.createElement(c.Caption,{key:"caption"+t,messageStreamFontSize:t},d),!1,void 0,"flex-start"))),[u.propSectionContainer]))}_renderCardTitle(){return this._renderComponentSection("CardTitle",this._renderPropSection("",{title:"",url:"#"},this._renderPropOptionSection("",o.createElement(c.CardTitle,{key:"cardtitle1"},d),!1,void 0,"flex-start")))}_renderPanelHeader(){return this._renderComponentSection("PanelHeader",this._renderPropSection("",{title:"",url:"#"},this._renderPropOptionSection("",o.createElement(c.PanelHeader,{key:"panelheader1"},d),!1,void 0,"flex-start")))}_renderRowTitle(){return this._renderComponentSection("RowTitle",this._renderPropSection("disabled",{title:"boolean",url:"#"},[this._renderPropOptionSection("false",o.createElement(c.RowTitle,{key:"RowTitle1"},d),!1,void 0,"flex-start"),this._renderPropOptionSection("true",o.createElement(c.RowTitle,{key:"RowTitle2",disabled:!0},d),!1,void 0,"flex-start")],[u.propSectionContainer]))}_renderSubtitle(){return this._renderComponentSection("Subtitle",this._renderPropSection("",{title:"",url:"#"},this._renderPropOptionSection("",o.createElement(c.Subtitle,{key:"subtitle1"},d),!1,void 0,"flex-start")))}}t.default=g},64893:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIconSizeFromEnumPropertyName=t.getEnumEntries=void 0;const n=i(11828);t.getEnumEntries=function(e){return Object.keys(e).filter((t=>!isNaN(Number(e[t]))))},t.getIconSizeFromEnumPropertyName=function(e){return n.IconSize[e]}},80837:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(47447),s=i(81760),a={};class r{static dimensionsStyle(e){const t=`${e.width}x${e.height}`;return a[t]||(a[t]=n.Styles.createViewStyle({width:e.width,height:e.height})),a[t]}}t.default=r,r.absoluteFill=n.Styles.createViewStyle({position:"absolute",top:0,left:0,right:0,bottom:0}),r.flexOne=n.Styles.createViewStyle({flex:1}),r.flexNegativeOne=n.Styles.createViewStyle({flex:-1}),r.flexZero=n.Styles.createViewStyle({flex:0}),r.flexGrowOne=n.Styles.createViewStyle({flexGrow:1}),r.flexGrowZero=n.Styles.createViewStyle({flexGrow:0}),r.alignItemsCenter=n.Styles.createViewStyle({alignItems:"center"}),r.alignItemsFlexStart=n.Styles.createViewStyle({alignItems:"flex-start"}),r.overflowVisible=n.Styles.createViewStyle({overflow:"visible"}),r.transparentBackground=n.Styles.createViewStyle({backgroundColor:s.Color.transparent}),r.floatingStyle=n.Styles.createViewStyle({zIndex:1}),r.newStackingContext=n.Styles.createViewStyle({zIndex:0}),r.noncollapsibleView=r.transparentBackground,r.displayNone={display:"none"},r.noWrap={whiteSpace:"nowrap"},r.pointerCursor=o.UICapabilities.cursorTypesSupported()?n.Styles.createViewStyle({cursor:"pointer"}):void 0,r.defaultCursor=o.UICapabilities.cursorTypesSupported()?n.Styles.createViewStyle({cursor:"default"}):void 0,r.shadowStyle=n.Styles.createViewStyle({overflow:"visible",shadowColor:s.Color.black,shadowOpacity:.7,shadowRadius:2,shadowOffset:{height:2,width:0},elevation:3}),r.shadowLightStyle=n.Styles.createViewStyle({overflow:"visible",shadowColor:s.Color.blackOverlay20,shadowRadius:3,shadowOffset:{height:1,width:0}})},11411:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(98356),o=i(16778),s=i(44770),a=i(88837),r=i(98278),l=i(46096),c=i(36237),d=i(15877),u=i(33754),g=i(69108),h=i(10056),p=i(5103),m=i(15415),S=i(22222),C=i(81760),f=i(80837),y=i(19675),_=(0,d.lazyProperties)({splashScreenLight:()=>o.Styles.createViewStyle({backgroundColor:C.Color.white,appRegion:"drag"}),splashScreenDark:()=>o.Styles.createViewStyle({backgroundColor:C.Color.darkThemeBackground,appRegion:"drag"}),centerContent:()=>o.Styles.createViewStyle({alignItems:"center",justifyContent:"center"}),contentContainer:()=>o.Styles.createViewStyle({flex:0,height:200,marginTop:288,flexDirection:"column",alignItems:"center",marginHorizontal:30}),spinnerContainer:()=>o.Styles.createViewStyle({flexDirection:"row",overflow:"visible",marginTop:40}),spinnerContainerTransparent:()=>o.Styles.createViewStyle({opacity:0}),statusText:()=>o.Styles.createTextStyle({color:C.Color.gray400,textAlign:"center",lineHeight:20}),loginButtonWrap:()=>o.Styles.createViewStyle({marginTop:20,alignItems:"center",appRegion:"no-drag"}),loginButton:()=>o.Styles.createViewStyle({marginTop:40}),iconOffsetStyle:()=>o.Styles.createViewStyle({marginTop:2}),microsoftLogoContainer:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"}),microsoftLogo:()=>o.Styles.createImageStyle({marginBottom:60,height:24,width:112}),meetNow:()=>(0,d.lazyProperties)({contentContainer:()=>o.Styles.createViewStyle({marginTop:0})})});class v extends a.ComponentBase{constructor(){super(...arguments),this._animatedLogoScaleValue=new o.Animated.Value(1),this._animatedSplashScreenOpacityValue=new o.Animated.Value(1),this._animatedSplashScreenStyle=o.Styles.createAnimatedViewStyle({opacity:this._animatedSplashScreenOpacityValue}),this._handleLogin=e=>{this.props.loginCallback()},this._onSignOutPressed=()=>{g.default.redirectToLogout(l.LogoutReason.LoginRestarted,!0)}}_buildState(e,t){return{isBusy:!e.showLoginFallback&&!e.errorCode&&e.showSpinner}}animateLeave(e){c.log(l.LogTraceArea.Startup,"SplashScreen animateLeave");const t=()=>{this.setState({isBusy:!1}),e()};if(this.isComponentMounted()){const e=!0;n.parallel([n.timing.easeOut({value:this._animatedLogoScaleValue,toValue:1.4,useNativeDriver:e}),n.timing.easeOut({value:this._animatedSplashScreenOpacityValue,toValue:0,useNativeDriver:e})]).start((e=>{e.finished&&this.isComponentMounted()&&t()}))}else t()}_renderLoginFallbackIfNeeded(){if(this.props.showLoginFallback)return o.createElement(o.View,{key:"fallback",style:_.loginButtonWrap},o.createElement(y.BodyText,{size:y.BodyTextSize.SmallDeprecated,bold:!0,style:_.statusText},u.getString("SplashScreen.LoginErrorMessage")),o.createElement(S.default,{buttonSize:r.SXButtonSize.Medium,buttonStyle:r.SXButtonStyle.BlueFill,title:u.getString("SplashScreen.LoginButtonTitle"),onPress:this._handleLogin,style:_.loginButton}))}_renderSpinner(){const e=[_.spinnerContainer];return this.state.isBusy||e.push(_.spinnerContainerTransparent),o.createElement(o.View,{key:"spinner",style:e},o.createElement(m.default,{size:r.SXActivityIndicatorSize.Medium,tintColor:C.Color.blue,useRXIndicator:!0}))}_renderMessage(){if(this.props.statusText)return o.createElement(p.default,{key:"message",statusText:this.props.statusText,errorCode:this.props.errorCode,onSignOutPressed:this._onSignOutPressed,isPartnerFlow:this.props.isPartnerFlow,isDarkThemeEnabled:this.props.darkThemeEnabled})}_renderMicrosoftLogo(){return o.createElement(o.View,{key:"logo",style:_.microsoftLogoContainer},o.createElement(o.Image,{style:_.microsoftLogo,source:this.props.darkThemeEnabled?s.Collection.MICROSOFT_LOGO_COLOR_WHITE:s.Collection.MICROSOFT_LOGO_COLOR,resizeMode:"stretch"}))}render(){const e=[f.default.absoluteFill,this.props.darkThemeEnabled?_.splashScreenDark:_.splashScreenLight,this._animatedSplashScreenStyle],t=[_.contentContainer],i=o.createElement(o.View,{style:[f.default.absoluteFill,_.centerContent]},o.createElement(h.SkypeLogo,{isAnimated:!0}));let n=[this._renderMessage(),this._renderLoginFallbackIfNeeded(),this._renderSpinner()];return this.props.isPartnerFlow&&(n=[this._renderLoginFallbackIfNeeded(),this._renderSpinner(),this._renderMessage()],t.push(_.meetNow.contentContainer)),o.createElement(o.Animated.View,{style:e},this._renderMicrosoftLogo(),!this.props.isPartnerFlow&&i,o.createElement(o.View,{style:[f.default.absoluteFill,_.centerContent]},o.createElement(o.View,{style:t},n)))}}t.default=v},5103:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(98278),a=i(15877),r=i(33754),l=i(22222),c=i(81760),d=i(19675),u=(0,a.lazyProperties)({centerContent:()=>n.Styles.createViewStyle({alignItems:"center",justifyContent:"center"}),messageContainer:()=>n.Styles.createViewStyle({paddingHorizontal:30}),statusText:()=>n.Styles.createTextStyle({color:c.Color.gray400,textAlign:"center",backgroundColor:c.Color.transparent,marginVertical:30}),meetNowStatusText:()=>n.Styles.createTextStyle({textAlign:"center",backgroundColor:c.Color.transparent,marginVertical:30,fontSize:24})});class g extends o.ComponentBase{render(){return n.createElement(n.View,{style:[u.centerContent,u.messageContainer,this.props.style]},this._renderBodyText(),this._renderErrorInfo())}_renderErrorInfo(){return this.props.errorCode?n.createElement(n.View,null,n.createElement(l.default,{buttonStyle:s.SXButtonStyle.DarkFill,buttonSize:s.SXButtonSize.Medium,title:r.getString("SplashScreen.LoggingOutButtonTittle"),onPress:this.props.onSignOutPressed}),n.createElement(d.Caption,{style:u.statusText},this.props.errorCode)):null}_renderBodyText(){const e=[this.props.isPartnerFlow?u.meetNowStatusText:u.statusText];return this.props.isDarkThemeEnabled&&e.push(n.Styles.createTextStyle({color:c.Color.white})),n.createElement(d.BodyText,{bold:!0,style:e},this.props.statusText)}}t.default=g},71445:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SplashScreenNative=void 0;const n=i(98356),o=i(16778),s=i(88837),a=i(44770),r=i(46096),l=i(36237),c=i(15877),d=i(69108),u=i(5103),g=i(56266),h=i(69203),p=i(12187),m=i(81760),S=i(80837),C=i(212),f=i(63841),y=(0,c.lazyProperties)({containerLight:()=>o.Styles.createViewStyle({backgroundColor:m.Color.white}),containerDark:()=>o.Styles.createViewStyle({backgroundColor:m.Color.darkThemeBackground}),alternativeSpinner:()=>o.Styles.createViewStyle({paddingTop:64}),microsoftLogoContainer:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"}),microsoftLogo:()=>o.Styles.createImageStyle({marginBottom:40,height:24,width:112})});class _ extends s.ComponentBase{constructor(){super(...arguments),this._statusBarKey="SplashScreen",this._animatedOpacityValue=new o.Animated.Value(1),this._animatedOpacityStyle=o.Styles.createAnimatedViewStyle({opacity:this._animatedOpacityValue}),this._onSignOutPressed=()=>{d.default.redirectToLogout(r.LogoutReason.LoginRestarted,!0)}}componentDidMount(){super.componentDidMount();const e=C.default.themeColorsForTheme(this.props.darkThemeEnabled?f.Theme.DelphiDark:f.Theme.Delphi),t=p.default.mergeStyles([p.default.createBarStyle(e.defaultStatusBarTheme,!1),p.default.createBackgroundColorStyle(e.defaultStatusBarBackgroundColor,!1)]);h.default.addOrUpdateStyle(this._statusBarKey,t,!0)}componentWillUnmount(){super.componentWillUnmount(),h.default.removeStyle(this._statusBarKey)}_buildState(e,t){return{renderAlternative:!(!e.renderAlternative||e.renderIntro||e.statusText)}}animateLeave(e){l.log(r.LogTraceArea.Startup,"SplashScreen animateLeave"),this.isComponentMounted()?n.timing.easeOut({value:this._animatedOpacityValue,toValue:0,useNativeDriver:!0}).start((t=>{t.finished&&e()})):e()}_renderSpinner(){return this.props.statusText?null:o.createElement(o.View,{style:S.default.absoluteFill},o.createElement(g.default,{style:this.state.renderAlternative?y.alternativeSpinner:void 0,showBlueLogo:this.state.renderAlternative,darkThemeEnabled:this.props.darkThemeEnabled,onComplete:this.props.onComplete}))}_renderMessage(){return this.props.statusText?o.createElement(u.default,{style:S.default.absoluteFill,statusText:this.props.statusText,errorCode:this.props.errorCode,onSignOutPressed:this._onSignOutPressed}):null}_renderMicrosoftLogo(){return o.createElement(o.View,{style:y.microsoftLogoContainer},o.createElement(o.Image,{style:y.microsoftLogo,source:this.props.darkThemeEnabled?a.Collection.MICROSOFT_LOGO_COLOR_WHITE:a.Collection.MICROSOFT_LOGO_COLOR,resizeMode:"stretch"}))}render(){const e=[S.default.absoluteFill,this._animatedOpacityStyle,this.props.darkThemeEnabled?y.containerDark:y.containerLight];return o.createElement(o.Animated.View,{style:e},this._renderSpinner(),this._renderMessage(),this._renderMicrosoftLogo())}}t.SplashScreenNative=_,t.default=_},56266:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(39696),a=i(98278),r=i(77381),l=i(46096),c=i(15877),d=i(10056),u=i(15415),g=i(78780),h=i(81760),p=i(40363),m=i(80837),S=(0,c.lazyProperties)({containerLight:()=>n.Styles.createViewStyle({backgroundColor:h.Color.white}),containerDark:()=>n.Styles.createViewStyle({backgroundColor:h.Color.darkThemeBackground}),panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch",flexDirection:"column",alignItems:"center",justifyContent:"center"}),staticLogo:()=>n.Styles.createViewStyle({width:375,height:375,paddingBottom:50,justifyContent:"flex-end"}),iconContainer:()=>n.Styles.createViewStyle({justifyContent:"center",alignItems:"center"})});class C extends r.default{_buildState(e,t){return{useStaticLoader:!o.default.getS4LUiFeatures().jsonAnimationEnabled}}componentDidMount(){super.componentDidMount(),this.props.onComplete&&this.props.onComplete()}render(){let e;if(this.props.showBlueLogo)e=n.createElement(u.default,{size:a.SXActivityIndicatorSize.Large,tintColor:h.Color.blue});else if(this.state.useStaticLoader)e=n.createElement(n.View,{style:S.staticLogo},n.createElement(n.View,{style:[m.default.absoluteFill,S.iconContainer]},n.createElement(d.SkypeLogo,null)),n.createElement(u.default,{size:a.SXActivityIndicatorSize.Small,tintColor:h.Color.blue,useRXIndicator:!0}));else{const t=g.default.SPLASH_LOADER_NEXT,i=n.Styles.createViewStyle({width:t.intrinsicSize.width,height:t.intrinsicSize.height},!1);e=n.createElement(n.View,{style:i},n.createElement(s.default,{animation:t,delay:p.default.getPlatformType()===l.PlatformType.Android?100:50,loop:!0,sizeToFit:!0}))}return n.createElement(n.View,{style:[S.panel,this.props.darkThemeEnabled?S.containerDark:S.containerLight,this.props.style]},e)}}t.default=C},11397:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16426),s=i(16778),a=i(88837);class r extends a.ComponentBase{render(){const e=this.props.progressStrokeProperties.strokeWidth||1,t=this.props.size;let i=this.props.progress&&n.isFinite(this.props.progress)?this.props.progress:0;0===i&&(i=.03);const a=t/2,r=(t-e)/2,l=360*i,c=Math.PI*(l-90)/180;let d="M"+a+","+(a-r)+" A"+r+","+r+" 0 "+(l>180?1:0)+",1 "+(a+r*Math.cos(c))+","+(a+r*Math.sin(c));const u="M"+a+","+a+"m"+-r+",0a"+r+","+r+" 0 1,0 "+2*r+",0 a"+r+","+r+" 0 1,0 "+-2*r+",0";let g;return this.props.showCircleBackground&&(g=s.createElement(o.SvgPath,Object.assign({d:u},this.props.backgroundCircleProperties)),1===i&&(d=u)),s.createElement(o.ImageSvg,{viewBox:"0 0 "+t+" "+t,style:this.props.style,width:t,height:t},g,s.createElement(o.SvgPath,Object.assign({d},this.props.progressStrokeProperties)))}}t.default=r},68747:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TabTitleView=t.TabAnimationDirection=void 0;const n=i(98356),o=i(16778),s=i(15877),a=i(11010),r=i(80837),l=i(24576);!function(e){e[e.Up=0]="Up",e[e.Down=1]="Down"}(t.TabAnimationDirection||(t.TabAnimationDirection={}));const c=(0,s.lazyProperties)({defaultTabTextStyle:()=>o.Styles.createTextStyle({flex:1,font:a.default.font.uiDisplayRegular,fontSize:a.default.controlFontSize.tabHeader,textAlign:"center"}),defaultSmallTabTextStyle:()=>o.Styles.createTextStyle({fontSize:a.default.controlFontSize.tabHeaderSmall}),defaultTabTextStylePadding:()=>o.Styles.createTextStyle({paddingHorizontal:2}),defaultSelectedTabTextStyle:()=>o.Styles.createTextStyle({flex:-1,letterSpacing:-.5,font:a.default.font.uiDisplaySemibold,fontSize:a.default.controlFontSize.tabHeader,paddingHorizontal:2,textAlign:"center"}),tabTitleContainerStyle:()=>o.Styles.createViewStyle({flex:1,alignItems:"stretch",justifyContent:"flex-end"}),tabTitleStyle:()=>o.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"center",paddingBottom:9}),tabTitleStyleSmall:()=>o.Styles.createViewStyle({paddingBottom:5})});class d extends l.default{constructor(){super(...arguments),this._animated=!1,this._currentSelectedValue=0,this._animatedDeselectedOpacityValue=new o.Animated.Value(1),this._animatedDeselectedStyle=o.Styles.createAnimatedTextStyle({opacity:this._animatedDeselectedOpacityValue}),this._animatedSelectedOpacityValue=new o.Animated.Value(0),this._animatedSelectedStyle=o.Styles.createAnimatedTextStyle({opacity:this._animatedSelectedOpacityValue}),this._resetTransitionTransformValue=new o.Animated.Value(0),this._resetTransitionOpacityValue=new o.Animated.Value(1),this._resetTransitionStyle=o.Styles.createAnimatedViewStyle({opacity:this._resetTransitionOpacityValue,transform:[{translateY:this._resetTransitionTransformValue}]}),this._animatedContentOpacityValue=new o.Animated.Value(1),this._animatedContentOpacityStyle=o.Styles.createAnimatedViewStyle({opacity:this._animatedContentOpacityValue}),this._animatedShowHideStyle=this._resetTransitionStyle}componentDidMount(){super.componentDidMount(),n.NativeUtils.markAnimatedValue(this._animatedContentOpacityValue,1)}update(e,t=!1){this._currentSelectedValue=e,this._animated?t?(this._selectedAnimation&&this._selectedAnimation.stop(),this._selectedAnimation=n.parallel([n.timing.easeOut({value:this._animatedSelectedOpacityValue,toValue:e}),n.timing.easeOut({value:this._animatedDeselectedOpacityValue,toValue:1-e})]),this._selectedAnimation.start((e=>{e.finished&&delete this._selectedAnimation}))):(this._animatedSelectedOpacityValue.setValue(e),this._animatedDeselectedOpacityValue.setValue(1-e)):1!==e&&0!==e||this.isComponentMounted()&&this.forceUpdate()}showOrHide(e,t=0){n.timing.easeOut({value:this._animatedContentOpacityValue,toValue:e?1:0,duration:e?n.Common.Duration.Short:n.Common.Duration.Tiny,delay:t,useNativeDriver:!0}).start()}_getTabTextStyles(e){if(!this._animated)return e?[c.defaultSelectedTabTextStyle,this._themeStyles.primaryTextColorStyle]:[c.defaultTabTextStyle,this._themeStyles.secondaryTextColorStyle];let t;return t=e?[c.defaultSelectedTabTextStyle,this._themeStyles.primaryTextColorStyle,this._animatedSelectedStyle]:[c.defaultTabTextStyle,r.default.absoluteFill,this._themeStyles.secondaryTextColorStyle,this._animatedDeselectedStyle],this.props.useSmallFonts&&t.push(c.defaultSmallTabTextStyle),t}render(){const e=this._getTabTextStyles(!1),t=this._getTabTextStyles(!0),i=this._animated,n=i?o.createElement(o.Animated.Text,{style:e,numberOfLines:1},this.props.title):null;i||e.push(c.defaultTabTextStylePadding);const s=i||1===this._currentSelectedValue?t:e,a=[c.tabTitleStyle];return this._animated&&a.push(this._animatedShowHideStyle),this.props.useSmallFonts&&a.push(c.tabTitleStyleSmall),o.createElement(o.View,{style:c.tabTitleContainerStyle},o.createElement(o.Animated.View,{style:a},o.createElement(o.Animated.View,{style:[r.default.flexNegativeOne,this._animatedContentOpacityStyle]},n,o.createElement(o.Animated.Text,{style:s,numberOfLines:1},this.props.title))))}}t.TabTitleView=d,t.default=d},82481:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextCompletion=void 0;const n=i(96486),o=i(16778),s=(i(97174),i(47126)),a=i(15877),r=(i(33754),i(86045),i(81760)),l=i(11010),c=i(24576),d=(0,a.lazyProperties)({textCompletePopup:()=>o.Styles.createViewStyle({position:"absolute",left:0,right:0,bottom:1}),textCompletePopupTopBorder:()=>o.Styles.createViewStyle({borderTopWidth:1,borderStyle:"solid",height:1,alignSelf:"stretch"}),textCompletePopupDesktop:()=>o.Styles.createViewStyle({borderWidth:1,borderStyle:"solid",borderRadius:8,paddingVertical:4}),textCompleteItem:()=>o.Styles.createButtonStyle({justifyContent:"center",paddingHorizontal:8,height:38}),textCompleteItemSelected:()=>o.Styles.createButtonStyle({backgroundColor:r.Color.blueOverlay10}),textCompleteMenuText:()=>o.Styles.createTextStyle({fontSize:l.default.fontSize.size13Deprecated,font:l.default.font.uiDisplayRegular}),textCompleteMenuSelectedText:()=>o.Styles.createTextStyle({color:r.Color.blue})});class u extends c.default{constructor(){super(...arguments),this._animatedHeightValue=new o.Animated.Value(0),this._animatedHeightStyle=o.Styles.createAnimatedViewStyle({height:this._animatedHeightValue})}_buildState(e,t){if(t)return{currentEntityDetector:void 0,candidatesToDisplay:[],selectedIndex:0}}componentDidUpdate(e,t,i){if(super.componentDidUpdate(e,t,i),this.props.inputText!==e.inputText||this.props.maxMenuHeight!==e.maxMenuHeight){let e=this.props.candidatesToDisplay;38*e+8>this.props.maxMenuHeight&&(e=Math.max(Math.floor((this.props.maxMenuHeight-8)/38),1));let t=this.getReplacementCandidates(this.props.inputText,e);this.setState({currentEntityDetector:t.entityDetector,candidatesToDisplay:t.candidates,selectedIndex:0,selectionChangeKeyReceived:!1}),this.props.onTextReplacementCandidatesShown(t.candidates.length)}const n=this.state.candidatesToDisplay&&this.state.candidatesToDisplay.length,s=n&&t.candidatesToDisplay&&this.state.candidatesToDisplay.length!==t.candidatesToDisplay.length;if((t.selectedIndex!==this.state.selectedIndex||s)&&void 0!==this.state.selectedIndex&&n&&this.state.currentEntityDetector){const e=this.state.currentEntityDetector.createAccessibilityLabel(this.state.candidatesToDisplay[this.state.selectedIndex],this.state.selectedIndex+1,this.state.candidatesToDisplay.length);o.Accessibility.announceForAccessibility(e)}}render(){const e=this.state.candidatesToDisplay?this.state.candidatesToDisplay.length:0;if(0===e)return null;let t=n.map(this.state.candidatesToDisplay,((t,i)=>{let n=[d.textCompleteItem],s=[d.textCompleteMenuText];i===this.state.selectedIndex&&(n.push(d.textCompleteItemSelected),s.push(d.textCompleteMenuSelectedText));let a=this.state.currentEntityDetector?this.state.currentEntityDetector.render(t,i===this.state.selectedIndex&&!0):void 0;"string"==typeof a&&(a=o.createElement(o.Text,{style:s,numberOfLines:1},a));const r=this.state.currentEntityDetector?this.state.currentEntityDetector.createAccessibilityLabel(t,i+1,e):void 0;return o.createElement(o.Button,{style:n,key:t.uniqueKey||t.replacementText,onHoverStart:()=>this._onMouseOver(i),onPress:e=>this._onClick(e,i),underlayColor:this._themeColors.rowHighlightColor,accessibilityLabel:r},a)})),i=[d.textCompletePopup,this._themeStyles.popoverBackgroundColorStyle];return void 0!==this.props.leftOffset&&i.push(o.Styles.createViewStyle({left:this.props.leftOffset},!1)),this.state.currentEntityDetector&&(this.state.currentEntityDetector.maxPopupWidth&&i.push(o.Styles.createViewStyle({maxWidth:this.state.currentEntityDetector.maxPopupWidth},!1)),i.push([d.textCompletePopupDesktop,this._themeStyles.dividerBorderColorStyle])),this.props.style&&i.push(this.props.style),o.createElement(o.Animated.View,{style:i},undefined,t)}handleKeyDown(e){if(0===this.state.candidatesToDisplay.length)return!1;let t=!0;return e.keyCode===s.default.DOWN?!n.isUndefined(this.state.selectedIndex)&&this.state.selectedIndex<this.state.candidatesToDisplay.length-1&&this.setState({selectedIndex:this.state.selectedIndex+1,selectionChangeKeyReceived:!0}):e.keyCode===s.default.UP?!n.isUndefined(this.state.selectedIndex)&&this.state.selectedIndex>0&&this.setState({selectedIndex:this.state.selectedIndex-1,selectionChangeKeyReceived:!0}):e.keyCode===s.default.PAGEUP?0!==this.state.selectedIndex&&this.setState({selectedIndex:0,selectionChangeKeyReceived:!0}):e.keyCode===s.default.PAGEDOWN?this.state.selectedIndex!==this.state.candidatesToDisplay.length-1&&this.setState({selectedIndex:this.state.candidatesToDisplay.length-1,selectionChangeKeyReceived:!0}):e.keyCode===s.default.TAB||e.keyCode===s.default.RETURN&&!e.shiftKey&&!e.ctrlKey?void 0!==this.state.selectedIndex&&this._selectItem(this.state.selectedIndex):e.keyCode===s.default.ESCAPE&&this.state.candidatesToDisplay.length>0?this.setState({candidatesToDisplay:[]}):t=!1,t}_onMouseOver(e){e>=0&&e<this.state.candidatesToDisplay.length&&this.state.selectedIndex!==e&&this.setState({selectedIndex:e})}_onClick(e,t){e.stopPropagation(),t>=0&&t<this.state.candidatesToDisplay.length&&this._selectItem(t)}_selectItem(e){n.delay((()=>{let t=this.state.candidatesToDisplay[e];this.props.onReplaceText&&t&&t.entity&&this.state.currentEntityDetector&&this.props.onReplaceText(t.charsToReplace,t.replacementText,this.state.currentEntityDetector.entityType,t.entity)}),140)}getReplacementCandidates(e,t){if(e){const i=this.props.entityDetectors();if(i)for(let o=0;o<i.length;o++){let s=i[o],a=e.match(s.match);if(a&&a.length>1){const i=a.index;let o=0===i||" "===e[i]||" "===e[i-1]||"\n"===e[i-1],r=s.search(a[1],o,t);if(r.length>0)return r=n.sortBy(r,(e=>e.priority)),r.length>t&&(r=r.slice(0,t)),{entityDetector:s,candidates:r}}}}return{entityDetector:void 0,candidates:[]}}}t.TextCompletion=u,t.default=u},24576:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(77381),o=i(97634),s=i(212);class a extends n.default{get _themeStyles(){const e=this.props.colorThemeOverride;return e?s.default.themeStylesForTheme(e):this._getContext().themeStyles}get _themeColors(){const e=this.props.colorThemeOverride;return e?s.default.themeColorsForTheme(e):this._getContext().themeColors}get _currentTheme(){var e;return null!==(e=this.props.colorThemeOverride)&&void 0!==e?e:this._getContext().theme}_useAccessibleTheme(){return o.isAccessibleTheme(this._currentTheme)}_useDarkTheme(){return o.isDarkTheme(this._currentTheme)}}t.default=a},18546:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(89391),a=i(71727),r=i(98278),l=i(513),c=i(46509),d=i(9554),u=i(58262),g=i(19310),h=i(96223),p=i(90795),m=i(97122),S=i(42629),C=i(29908),f=i(53143),y=i(48222),_=i(11896),v=i(48942),b=i(77381),T=i(15877),P=i(78735),A=i(81760),k=i(63841),I=i(94224),w=(0,T.lazyProperties)({container:()=>o.Styles.createViewStyle({alignSelf:"stretch"}),backgroundDark:()=>o.Styles.createViewStyle({backgroundColor:r.CompositeNotificationToastInfo.color,borderColor:r.CompositeNotificationToastInfo.color,borderWidth:2}),backgroundLight:()=>o.Styles.createViewStyle({backgroundColor:A.Color.gray50Overlay50,borderColor:A.Color.white,borderWidth:2})});class N extends b.default{_buildState(e,t){const i=f.default.getToasts(this._getRootViewId()),n=I.default.CallingStore.getConnectedOrOutgoingAndNotOnHoldCallId(),o=s.default.getS4LCMCFeatures().enableNewCallScreen&&P.default.getNewCallScreenDesignEnabled()&&a.default.useLightTheme();return{activeCallId:n,useLightTheme:o,themeOverride:o?k.Theme.Colorful:k.Theme.ColorfulDark,toasts:i.map((e=>({id:e.id,type:e.type,onDismiss:e.onDismiss})))}}render(){let e=[];return n.each(this.state.toasts,(t=>{switch(t.type){case f.ToastType.IncomingCall:e.push(o.createElement(h.default,{id:t.id,key:t.id}));break;case f.ToastType.Notification:e.push(o.createElement(S.default,{colorThemeOverride:this.state.themeOverride,toastId:t.id,key:t.id}));break;case f.ToastType.CallRecorder:e.push(o.createElement(d.default,{colorThemeOverride:this.state.themeOverride,toastId:t.id,key:t.id}));break;case f.ToastType.RemoteCallMediaCapturer:e.push(o.createElement(c.RemoteCompositeCallMediaCapturerToast,{colorThemeOverride:this.state.themeOverride,toastId:t.id,key:t.id}));break;case f.ToastType.LocalCallMediaCapturer:e.push(o.createElement(c.LocalCompositeCallMediaCapturerToast,{colorThemeOverride:this.state.themeOverride,toastId:t.id,key:t.id}));break;case f.ToastType.IncomingVideoDisabled:e.push(o.createElement(p.default,{colorThemeOverride:this.state.themeOverride,toastId:t.id,key:t.id}));break;case f.ToastType.NetworkConnection:e.push(o.createElement(m.default,{toastId:t.id,key:t.id}));break;case f.ToastType.CallConnectionQuality:e.push(o.createElement(l.default,{colorThemeOverride:this.state.themeOverride,toastId:t.id,key:t.id}));break;case f.ToastType.SpokenLanguageConflictResolution:e.push(o.createElement(C.default,{colorThemeOverride:this.state.themeOverride,toastId:t.id,key:t.id}));break;case f.ToastType.CameraDeniedToast:e.push(o.createElement(u.default,{colorThemeOverride:this.state.themeOverride,toastId:t.id,key:t.id}));break;case f.ToastType.WebFeedback:e.push(o.createElement(_.default,{colorThemeOverride:this.state.themeOverride,toastId:t.id,key:t.id}));break;case f.ToastType.Translation:e.push(o.createElement(y.default,{colorThemeOverride:this.state.themeOverride,toastId:t.id,key:t.id}));break;case f.ToastType.LimitedSupportBrowser:e.push(o.createElement(v.default,{colorThemeOverride:this.state.themeOverride,toastId:t.id,key:t.id}));break;case f.ToastType.TeamsInterop:case f.ToastType.TogetherModeNotice:case f.ToastType.NewCallScreenRevertNotice:case f.ToastType.MusicModeEnabled:case f.ToastType.PstnTranslation:e.push(o.createElement(g.default,{colorThemeOverride:this.state.themeOverride,toastId:t.id,toastType:t.type,key:t.id,onDismiss:t.onDismiss}))}})),e.length?o.createElement(o.View,{style:[w.container,this.state.useLightTheme?w.backgroundLight:w.backgroundDark]},e):null}}t.default=N},79481:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(77381);class s extends o.default{constructor(){super(...arguments),this._isVisible=!0,this._onVisibilityChanged=e=>{this._isVisible!==e&&(this._isVisible=e,this.forceUpdate())}}componentDidMount(){super.componentDidMount();const e=this._getContext();e.componentVisibilityStatus&&(this._visibilitySubscriptionToken=e.componentVisibilityStatus.isVisibleEvent().subscribe(this._onVisibilityChanged),this._isVisible=e.componentVisibilityStatus.isVisible())}componentWillUnmount(){super.componentWillUnmount(),this._visibilitySubscriptionToken&&(this._visibilitySubscriptionToken.unsubscribe(),this._visibilitySubscriptionToken=void 0)}render(){const e=this._getContext();return e&&e.componentVisibilityStatus&&!e.componentVisibilityStatus.isVisible()?null:n.createElement(n.View,{style:this.props.style},this.props.children)}}t.default=s},91066:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(11930);class a extends o.ComponentBase{constructor(){super(...arguments),this._onContainerRef=e=>{this._containerRef=e||void 0}}setAnimatedStyle(e){this._animatedStyle!==e&&(this._animatedStyle=e,this.isComponentMounted()&&this.forceUpdate())}requestFocus(){this._containerRef&&this._containerRef.requestFocus()}render(){let e={ref:this._onContainerRef,style:[this.props.style,this._animatedStyle],importantForAccessibility:this.props.importantForAccessibility};return this.props.shouldGroupAccessibilityChildren&&(e=s.default.applyShouldGroupAccessibilityChildren(e)),n.createElement(n.Animated.View,Object.assign({},e),this.props.children)}}t.default=a},40522:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.openMailToLink=t.launchNativeEmail=t.launchNativeSms=t.openUrl=t.openUrlWithParams=void 0;const n=i(48663),o=i(16778),s=i(97691),a=i(19784),r=i(50576),l=i(98278),c=i(46096),d=i(14299),u=i(94031),g=i(33244),h=i(36237),p=i(32806),m=i(33754),S=i(36699),C=i(64723),f=i(4735),y=i(73714);function _(e,t,i,a={},l=!1){return t?a.openInExternalBrowser?n.default.openUrl(t).fail(T):y.default.getNavigationActionForDeepLink(t,c.NavigationConversationOrigin.LinkerUtil,i,e,l,void 0,a.conversationId,a.onShareComplete).then((n=>n?a.preventInAppNavigationForGuest?void f.default.navigateToGuestUpsell(d.GuestUpsellType.LeaveGroup):(p.trackEntryPoint(c.AppEntryPoint.URI),n.intent===g.Intent.Chat&&S.default.beginTrackingJoinMeetNow(l?C.MeetNowOrigin.JoinLinkDeeplink:C.MeetNowOrigin.ConversationDeeplink),void n.action()):!u.default.shouldLaunchInAppBrowser(t)||r.default.shouldLaunchExternalBrowser(t)?0===t.indexOf("skype:")?void 0:o.Linking.openUrl(t):void f.default.navigateToInAppBrowser({origin:e,url:t,openUrlOptions:{integrationCorrelationId:a.integrationCorrelationId,headers:a.headers,injectedJavaScript:a.injectedJavaScript,onNavigationStateChange:a.onNavigationStateChange,onInAppWebBrowserClose:a.onInAppWebBrowserClose,onShareComplete:a.onShareComplete,onWebViewClose:a.onWebViewClose,onMessage:a.onMessage,browserTitle:a.browserTitle,conversationId:a.conversationId,messageId:a.messageId,suggestionAttributes:a.suggestionAttributes,hideBrowserActions:a.hideBrowserActions,openIntegrationScenario:a.openIntegrationScenario,useBingMiniCanvas:a.useBingMiniCanvas}},i))).fail(T):s.Rejected()}function v(e){switch(e.code){case o.Types.LinkingErrorCode.NoAppFound:return m.getString("LinkerUtil.NoAppFoundError");case o.Types.LinkingErrorCode.UnexpectedFailure:default:return m.getString("LinkerUtil.UnexpectedFailureError")}}function b(e,t,i){i.code===o.Types.LinkingErrorCode.Blocked&&e?a.default.showConfirmationAlert(e.message,void 0,e.actionName,(()=>_(c.BrowserOrigin.LinkerUtil,i.url,t)),l.MainRootViewId):(a.default.showOKAlert(v(i),void 0,l.MainRootViewId),function(e){if(e){let t=v(e);e.description&&(t+=", URL: "+e.url+", Error: "+e.description),h.error(c.LogTraceArea.GenericUnsafe,t)}}(i))}function T(e){return b(void 0,l.MainRootViewId,e)}t.openUrlWithParams=function(e){_(e.origin,e.url,e.rootViewId,e.options,e.wasLaunchedFromExternalApp)},t.openUrl=_,t.launchNativeSms=function(e){o.Linking.launchSms(e).fail(T)},t.launchNativeEmail=function(e,t){o.Linking.launchEmail(e).fail((e=>b(t,l.MainRootViewId,e)))},t.openMailToLink=function(e,t){_(e,"mailto:"+t.to.join(",")+"?Subject="+t.subject+"&Body="+t.body,l.MainRootViewId)}},73714:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(2604),s=(i(25465),i(48663)),a=i(16778),r=i(97691),l=i(93705),c=i(71502),d=i(3486),u=i(76567),g=i(50556),h=i(19784),p=i(89391),m=i(51587),S=i(23592),C=i(94224),f=i(47447),y=i(5531),_=i(98447),v=i(14980),b=i(51267),T=i(22801),P=i(76621),A=i(61375),k=i(81697),I=i(71830),w=i(71830),N=i(98278),M=i(53143),E=i(984),x=i(75049),L=i(39549),R=i(82261),D=i(31761),B=i(10610),O=i(92487),F=i(43368),V=i(72822),U=i(52262),H=i(82433),W=i(21444),z=i(46096),G=i(81020),K=i(54360),j=i(97174),q=i(36237),Q=i(40267),X=i(73600),J=i(77478),$=i(74465),Y=i(58666),Z=i(33754),ee=i(69108),te=i(44285),ie=i(93974),ne=i(64723),oe=i(5470),se=i(65788),ae=i(98907),re=i(36699),le=(i(40897),i(33244)),ce=i(93486),de=i(18078),ue=i(46929),ge=(i(78735),i(4735)),he=i(17093),pe=i(30124),me=i(95691),Se=i(81736),Ce=i(64956),fe=i(58962),ye=i(97822),_e=i(27683),ve=i(9343),be=i(85207),Te=i(49140),Pe=i(50737),Ae=i(14976),ke=i(42808),Ie=i(79829),we=i(10541),Ne=i(22538),Me=i(4057),Ee=i(40363),xe=i(11828),Le=i(78262),Re=i(60213),De=i(12770),Be=i(61694),Oe=i(26712),Fe=i(53374),Ve=i(48790),Ue=i(44330),He=i(6977),We="bot",ze="highlights",Ge="invite",Ke=["call","chat","settings","openapp","generalsettings","notificationssettings","choosecolor","chooseprofilepic","newgroupcall","closeexternalbrowser","engagementsharecontent","backgroundexecution","meetnow","meetnowjoin"],je=/^buycredit/i;t.default=new class{getUrlForCompositeConversationNavigationContext(e){let t="/";return t=`${Ee.default.getFrontendBaseUrl()}/`,e&&(t+=e.otherPartyMri||e.conversationId),t}getUrlForNavigationContextStack(e,t){let i="/";if(i=`${Ee.default.getFrontendBaseUrl()}/`,e)if(e===he.MobileContentPanelId){const e=t;e&&(i+=e.otherPartyMri||e.conversationId)}else e===he.DetailsNavigationId&&(i+=t.mri);return i}getNavigationActionForDeepLink(e,t,i,a,l=!1,d,g,C){var y,T,P,A;const k=Fe.default.newCauseId();if(q.log(z.LogTraceArea.Navigation,`getNavigationActionForDeepLink: [${Ae.dev_unknownOmit(e)}] causeId: `+k),!Oe.default.isUrlValid(e))return q.error(z.LogTraceArea.Navigation,`getNavigationActionForDeepLink: invalid url [${Ae.dev_unknownOmit(e)}] causeId: `+k),r.Resolved(void 0);const w=Oe.default.getURIComponents(e);let M=g||(null===(y=null==w?void 0:w.queryParameterKeyValues)||void 0===y?void 0:y.threadId);const x=null==w?void 0:w.pathname;!M&&x&&x.includes(":")&&I.isThread(x)&&(M=x),w&&(w.pathname||w.queryParameterString)&&q.track(new O.OpenDeepLinkEvent(w,M,t,a,null===(T=w.queryParameterKeyValues)||void 0===T?void 0:T.launcher));const F=w&&w.queryParameterKeyValues&&w.queryParameterKeyValues[Q.WebLauncherOriginParamName]===Q.WebLauncherOriginParamValue;if(w&&n.includes(["http","https"],w.protocol)){const i=w.host&&w.host.toLowerCase(),o=w.pathname?n.compact(w.pathname.split("/")):[],s="latest-join.skype.com"===i,c="join.skype.com"===i||s;if(i===Ee.default.getFrontendHost()||c)if(2===o.length){const i=o[0].toLowerCase();if(i===We){const e=o[1]?I.sanitizeMri(o[1],I.Namespaces.Bot):void 0;if(e)return r.Resolved({intent:le.Intent.Chat,action:()=>this._navigateTo1on1Conversation(e,t,a)})}else if(i===Ge&&c)return d&&(d.markStepCompleted("AppInstalledOneOnOneInvite"),l&&d.markStepCompleted("LaunchedFromExternalApp")),(0,S.handleAutoBuddyInviteLinkFromUrl)(e,d).catch((e=>{q.warn(z.LogTraceArea.Navigation,`Failed to process invite link: ${Me.default.errorAsString(e)}`);const t=Z.getString("UrlConverter.ProcessingInviteLinkFailedMessage");return h.default.showOKAlert(t,void 0,N.MainRootViewId),d&&(d.markStepCompleted("ProcessingInviteLinkFailed"),d.fail(`ProcessingInviteLinkFailed ${Me.default.errorAsString(e)}`)),r.Resolved(n.noop)})).then((e=>({intent:le.Intent.Other,action:e})))}else{if(1===o.length){if(c){const[i]=o;F&&(a=z.BrowserOrigin.WebLauncher),d&&(d.markStepCompleted("RetrievedJoinLinkData"),l&&d.markStepCompleted("LaunchedFromExternalApp"));const s=de.default.getSkypeMri(),c=I.isGuestUserMri(s);if("meetnow"===i){if(!c)return r.Resolved({intent:le.Intent.CreateMeetNow,action:()=>this._navigateToMeetNowCreateFlow("skype-meetnow:?action=meetnow&source=InClientLink")});null===(P=w.queryParameterKeyValues)||void 0===P||P.threadId;0}if("join"===i){if(!c)return r.Resolved({intent:le.Intent.JoinMeetNow,action:()=>this._navigateToMeetNowJoinFlow("skype-meetnow:?action=meetnowjoin&source=InClientLink")});0}n.isEmpty((0,L.default)().getAllConversationsInMemory());return X.default.resolveJoinShortId(i).then((i=>{const n=le.Intent.Chat;if(c){const t=Object.assign(Object.assign({},ie.default.getPartnerParametersFromUri(e)),{convId:i.threadId});return r.Resolved({intent:n,action:()=>this._navigateGuestToMeetNow(t)})}return r.Resolved({intent:n,action:()=>this.navigateToConversation(i.threadId,t,a,d)})}))}if(o[0].toLowerCase()===ze)return r.Resolved({intent:le.Intent.Recents,action:()=>{pe.default.isUsingStackNavigationContext()?ge.default.navigateToRecentsTab():ge.default.navigateToDesktopRecents(k)}});{const i=I.sanitizeMri(o[0],I.Namespaces.SkypeId),{removeThreadIdFromUrlHistory:n}=p.default.getS4LCMCFeaturesNoSubscription();if(n){const{href:e}=window.location;if(e.toLowerCase().includes("@thread.skype")){const t=e.replace(/\/[^\/]+@thread.skype/i,"/");De.default.setTimeout((()=>{try{window.history.replaceState(null,"",t)}catch(e){q.error(z.LogTraceArea.Navigation,e.message)}}),0)}}const s=Object.assign(Object.assign({},ie.default.getPartnerParametersFromUri(e)),{convId:i});return s.origin===ne.MeetNowOrigin.Unknown&&(s.origin=ne.MeetNowOrigin.DeepLink),q.track(new se.MeetNowDeeplinkProcessedEvent(s)),s.origin===ne.MeetNowOrigin.CreatorPanel?ae.default.beginTrackingCreateMeetNow(ne.MeetNowOrigin.DeepLink,null==s?void 0:s.partner):s.origin===ne.MeetNowOrigin.JoinLobby&&(re.default.beginTrackingJoinMeetNow(ne.MeetNowOrigin.ConversationDeeplink,null==s?void 0:s.partner),re.default.trackValidJoinLinkEntered(i)),this._isGuest()?r.Resolved({intent:le.Intent.Call,action:()=>this._navigateGuestToMeetNow(s)}):r.Resolved({intent:le.Intent.Chat,action:()=>this.navigateToConversation(i,t,a,void 0,s)})}}if(0===o.length&&!c)return r.Resolved(void 0)}}if(w&&(w.type===Be.UrlType.Tel||w.type===Be.UrlType.CallTo))return r.Resolved({intent:le.Intent.Other,action:()=>ge.default.navigateToPSTNDialerWithParams({causeId:k,navigationSource:z.DialerNavigationSource.BrowseIntent,prefilledNumber:w.telNumber},i)});if(Oe.default.isContactUrlComponentsValid(w))return r.Resolved({action:n.noop,intent:le.Intent.Other});if(w&&(w.type===Be.UrlType.VoipAudio||w.type===Be.UrlType.VoipVideo)){const e=w.type===Be.UrlType.VoipVideo;return r.Resolved({intent:le.Intent.Call,action:()=>this._navigateToCall(w,e,i,k)})}if(w&&w.type===Be.UrlType.Messaging)return this._navigateToConversationForParticipants(w,!0,t,a,d).then((e=>({action:e,intent:le.Intent.Chat})));if(w&&w.type===Be.UrlType.SkypeWin)return w.queryParameterString?this.getNavigationActionForDeepLink(w.queryParameterString,t,i,a,l,d):r.Resolved({action:n.noop,intent:le.Intent.Recents});if((null==w?void 0:w.type)===Be.UrlType.Skype||(null==w?void 0:w.type)===Be.UrlType.Winshell){if(!w.queryParameterString||/^call/i.test(w.queryParameterString)){const e=w.queryParameterKeyValues.topic,t=w.queryParameterKeyValues.video,n=w.queryParameterKeyValues.twincam,o="true"===t,s="true"===n;return r.Resolved({intent:le.Intent.Call,action:()=>this._navigateToCall(w,o,i,k,e,s)})}if(/^chat/i.test(w.queryParameterString)){let i=w.queryParameterKeyValues.threadId;if(!i)return this._navigateToConversationForParticipants(w,!1,t,a,d).then((e=>({action:e,intent:le.Intent.Chat})));if(F&&(a=z.BrowserOrigin.WebLauncher),!this._isGuest())return r.Resolved({intent:le.Intent.Chat,action:()=>this._navigateToGroupConversation(i,t,a)});if(!!n.isEmpty((0,L.default)().getAllConversationsInMemory())){const t=ie.default.getPartnerParametersFromUri(e);return q.track(new se.MeetNowDeeplinkProcessedEvent(t)),r.Resolved({intent:le.Intent.Chat,action:()=>this._navigateGuestToMeetNow(t)})}this._createNewGuestUserAndJoinConversation(e,i)}else{if(/^action/i.test(w.queryParameterString)){const d=w.queryParameterKeyValues.action;if((l||this._shouldDenyBrowserOriginToOpenInternalLinks(a))&&!n.includes(Ke,d))return r.Resolved(void 0);let S,y=le.Intent.Other;switch(d){case"changeprofilevisibility":S=()=>ge.default.navigateToProfilePicturePanel(i);break;case"settings":S=()=>ge.default.navigateToMyProfile(i,z.ProfileOpenOrigin.DeepLink);break;case"openapp":S=()=>ge.default.navigateToDesktopRecents(k),this._sendSystemTrayTelemetry(w);break;case"generalsettings":S=()=>ge.default.navigateToSettingsGroup(he.SettingsGroup.General,i),this._sendSystemTrayTelemetry(w);break;case"privacysettings":S=()=>ge.default.navigateToSettingsGroup(he.SettingsGroup.Privacy,N.MainRootViewId);break;case"avsettings":f.UICapabilities.avSettingsSupported()?(S=()=>ge.default.navigateToRootDesktopSettingsGroup(he.SettingsGroup.AudioVideoSettings,i,Fe.default.newCauseId()),this._sendSystemTrayTelemetry(w)):S=n.noop;break;case"notificationssettings":S=()=>ge.default.navigateToSettingsGroup(he.SettingsGroup.Notifications,i);break;case"messagingsettings":S=()=>ge.default.navigateToSettingsGroup(he.SettingsGroup.Chat,i);break;case"languagesettings":const r=w.queryParameterKeyValues.lang;if(r&&Z.isLocaleSupported(r)){const e=Z.getStringUnsafe(`SettingsLanguages.${r}`);h.default.showConfirmationAlert(Z.getString("LanguagePickerAlert.ConfirmationTitle"),Z.getString("LanguagePickerAlert.ConfirmationMessage",{language:e}),Z.getString("LanguagePickerAlert.ConfirmationButton"),Y.setLocale.bind(this,r),N.MainRootViewId),S=n.noop}else S=()=>ge.default.navigateToLanguagePicker(!1,i);break;case"choosecolor":S=()=>ge.default.navigateToSettingsGroup(he.SettingsGroup.ThemeSettings,i);break;case"chooseprofilepic":S=()=>ge.default.navigateToAvatarPickerWithParams({hideSkipButton:!0,origin:V.DialogNavOrigin.PopCard,useCommonAvatarPicker:!1},i);break;case"playvideo":const l=w.queryParameterKeyValues.data;if(l){const e=decodeURIComponent(l);S=()=>this._navigateToPlayVideoFullScreen(e)}else S=n.noop;break;case"discoverbots":case"editphoto":default:S=n.noop;break;case"newgroup":S=()=>{new D.default({peopleType:we.PeopleType.All,filterPeopleType:we.FilterType.GroupCapable,navigationOrigin:t}).start(N.MainRootViewId)};break;case"newgroupcall":S=()=>ge.default.navigateToQuickCallPanelWithParams({newGroup:!0,causeId:k},i);break;case"rating":S=()=>m.openAppStore();break;case"personalizedoffers":const d=w.queryParameterKeyValues.offerType;if(d){if(Ee.default.getPlatformType()===z.PlatformType.iOS&&"calling"===d){S=n.noop;break}{const e=w.queryParameterKeyValues.campaign;S=()=>ge.default.navigateToPurchaseContinuationPanel(d,e,i)}}else S=n.noop;break;case"balancestate":S=()=>ge.default.navigateToBalanceStatePanel("Deeplink.navigateBalanceState",i);break;case"closeexternalbrowser":s.default.dismiss(),S=n.noop;break;case"sendemoticon":if(!w.skypeParticipants||n.includes(w.skypeParticipants,";")||!w.queryParameterKeyValues||!w.queryParameterKeyValues.emoticon){S=n.noop;break}const T=I.sanitizeMri(w.skypeParticipants,I.Namespaces.SkypeId),P="("+w.queryParameterKeyValues.emoticon+")",M=H.default.getEmoticonByShortcut(P);if(de.default.isMyMri(T)||!M){S=n.noop;break}const x=new j.EmoticonEntity(P,M.id,M.tone),L=R.createMessageInfo(T,z.PostSource.DeepLink,[x]);be.default.postMessage(L),S=()=>this.navigateToConversation(T,t,a),y=le.Intent.Chat;break;case"notifications":S=()=>ge.default.navigateToAlertsHub();break;case"recents":S=()=>ge.default.navigateToRecentsTab(),y=le.Intent.Recents;break;case"creditexpiration":S=()=>B.default.show();break;case"capture":switch(w.queryParameterKeyValues.mode){case"selfie":b.default.setCameraMode(b.CameraMode.Front);break;case"rear":b.default.setCameraMode(b.CameraMode.Back)}S=()=>v.navigateToCaptureComboWithParams({capturedContentHandler:new _.CapturedContentHandlerForSharing,allowVideo:!0,willDismissOnSend:!0,mediaPickerShouldCollapseFully:!0},void 0);break;case"calls":y=le.Intent.Dialpad,S=()=>{ge.default.navigateToQuickCallPanel(k,i);const e=w.queryParameterKeyValues.dialpad;e&&"true"===e&&ge.default.navigateToPSTNDialerWithParams({causeId:k,navigationSource:z.DialerNavigationSource.DeepLink},i)};break;case"supercomposer":S=()=>{new D.default({creating1on1Conversation:!0,useSuperComposerFor1on1Conversation:!0,peopleType:we.PeopleType.All,filterPeopleType:we.FilterType.None,isSingleContactSelect:!0,navigationOrigin:z.NavigationConversationOrigin.DeepLink,wizardSteps:[me.WizardSteps.setConvParticipants]}).start(N.MainRootViewId)};break;case"verifyphone":S=()=>{ye.default.startPhoneNumberVerification(N.MainRootViewId)};break;case"callerid":S=()=>{if(p.default.getS4LCommerceFeatures().callingSettingsPanel.callerId.enabled)return ge.default.navigateToCallerIdSettingsPanel(i,k)};break;case"synccontacts":S=()=>ge.default.navigateToSyncAddressBook({origin:V.DialogNavOrigin.DeepLink,hideSkipButton:!0},void 0,i);break;case"addin":if(!w.queryParameterKeyValues){S=n.noop;break}const F=w.queryParameterKeyValues.id;if(!F){S=n.noop;break}S=()=>u.default.AddinNavigationActions.navigateToAddin({integrationCorrelationId:F,origin:this.getAddinOriginFromBrowserOrigin(a),conversationId:g,url:e,onClose:C,isLaunch:!0});break;case"pesgifsearch":S=()=>{this._openPesTab(w,fe.TabType.Gif,t,a)};break;case"pesmojisearch":S=()=>{this._openPesTab(w,fe.TabType.Moji,t,a)};break;case"pesstickersearch":S=()=>{this._openPesTab(w,fe.TabType.ChatSticker,t,a)};break;case"pesemojisearch":S=()=>{this._openPesTab(w,fe.TabType.Emoticon,t,a)};break;case"captureavatar":S=()=>{const e={hideSkipButton:!0,origin:V.DialogNavOrigin.DeepLink,showCaptureViewFirst:!0,useCommonAvatarPicker:!1};Se.default.permissionStatus(Le.PermissionType.CameraRoll)===o.PermissionStatus.Unknown?Se.default.requestPermission(Le.PermissionType.CameraRoll,Le.PermissionPromptOptions.SkipPrePrompt).then((()=>{Se.default.permissionStatus(Le.PermissionType.Camera)===o.PermissionStatus.Unknown&&Se.default.requestPermission(Le.PermissionType.Camera,Le.PermissionPromptOptions.SkipPrePrompt)})).finally((()=>{ge.default.navigateToAvatarPickerWithParams(e,i)})):ge.default.navigateToAvatarPickerWithParams(e,i)};break;case"engagementsharecontent":if(!p.default.getEngagementFeatures().engagementShareableContent.enabled||!w.queryParameterKeyValues){S=n.noop;break}const U=w.queryParameterKeyValues.campaignId,K="true"===w.queryParameterKeyValues.shareButton,Q="true"===w.queryParameterKeyValues.reshare,X=w.queryParameterKeyValues.title;ge.default.navigateAfterUIStarted((()=>{const e=X?decodeURIComponent(X):void 0;W.default.shareEngagementContent(U,K,e,Q)})),S=n.noop;break;case"sharecontacts":if(!w.queryParameterKeyValues){S=n.noop;break}const J=w.queryParameterKeyValues.toSkypeId;if(!J||!I.isSkypeId(J)){S=n.noop;break}const $=I.skypeIdToMri(I.asSkypeId(J));S=()=>{ge.default.navigateAfterUIStarted((()=>{pe.default.isUsingStackNavigationContext()||this._navigateTo1on1Conversation($,t,a),ge.default.navigateToShareContactsToConversationPanel({panelTitle:Z.getString("DetailsPanelHeader.ShareContactToConversationTitle"),causeId:k,entryPoint:G.ShareContactOrigin.Deeplink,userMrisToExclude:[$],conversationId:$},pe.default.isUsingSplitView()?$:N.MainRootViewId)}))};break;case"scheduleCall":const ee=this._getParticipantMris(w.skypeParticipants,!1),ie=n.first(ee);if(1!==ee.length||!ie||!E.default.isContact(ie)){S=n.noop;break}const oe=w.queryParameterKeyValues&&w.queryParameterKeyValues.startDateTime?parseInt(w.queryParameterKeyValues.startDateTime,10):void 0,se=w.queryParameterKeyValues?w.queryParameterKeyValues.subject:void 0;S=()=>{ke.default.navigateToScheduleCallCreationPanel({conversationId:ie,entryPoint:Ie.ScheduleCallEntryPoint.Deeplink,dateTimeMs:!oe||n.isNaN(oe)?void 0:oe,subject:se},i)};break;case"backgroundexecution":S=()=>this._requestBackgroundExecutionPermission();break;case"enablesplitview":const ae=Ue.default.isSplitViewSupported(),re=pe.default.isUsingSplitViewNoSubscription();S=ae&&!re?()=>{h.default.showConfirmationAlert(Z.getString("SplitViewDeeplink.ConfirmationTitle"),Z.getString("SplitViewDeeplink.ConfirmationText"),Z.getString("SplitViewDeeplink.ConfirmationButton"),(()=>He.default.toggleSplitView(k)),N.MainRootViewId)}:n.noop;break;case"bookmarks":S=()=>{const e=Fe.default.newCauseId();q.log(z.LogTraceArea.Navigation,"Opening bookmarks browser from deeplink. causeId: "+e),ge.default.navigateToConversation({convId:I.BookmarksThreadId,origin:z.NavigationConversationOrigin.DeepLink,causeId:e})};break;case"meetnow":this._showMeetNowFullScreenLoadingDialog(),S=()=>{this._navigateToMeetNowCreateFlow(e)};break;case"meetnowcampaign":S=()=>{te.MeetNowHelpers.showNewMeetNow(ne.MeetNowOrigin.CampaignDeeplink,{origin:ne.MeetNowOrigin.CreatorPanel})};break;case"meetnowjoin":S=()=>{this._navigateToMeetNowJoinFlow(e)};break;case"enablephonenumber":c.default.getProfile().then((e=>{var t;const o=null===(t=e.Views[0])||void 0===t?void 0:t.Attributes;let s,a=n.noop,r=n.noop,l=n.noop;if(!o)return;({actionAfterConfirmation:a,dialogConfigs:s,actionAfterCancel:r,onClickOutside:l}=this.getConfigConfirmationDialog(o,i));const{dialogTitle:c,dialogContentText:d,confirmButtonText:u}=s;h.default.showConfirmationAlert(c,d,u,a,N.MainRootViewId,void 0,void 0,r,l),q.track(new O.PhoneDiscoverabilityEvent({command:O.PhoneDiscoverabilityDialogCommand.OpenConfirmation}))})),S=n.noop;break;case"telemetryoptin":if(S=n.noop,ce.default.isChild())break;const Ce=null===(A=w.queryParameterKeyValues)||void 0===A?void 0:A.optedin;if("true"===Ce){ue.default.setOptionalTelemetryPreferences({enabled:!0,onboardingCompleted:!0}),q.track(new Te.SendFullTelemetryEvent(!0,Te.SendFullTelemetryOrigin.DeepLink));const e=Z.getString("UrlConverter.EnableOptionalTelemetryOptinThankYouMessage");h.default.showCloseAlertWithOptions({dialogAccessibilityTitle:e,title:e,rootViewId:i})}else"false"===Ce&&(ue.default.setOptionalTelemetryPreferences({enabled:!1,onboardingCompleted:!0}),q.track(new Te.SendFullTelemetryEvent(!1,Te.SendFullTelemetryOrigin.DeepLink)))}return r.Resolved({intent:y,action:S})}if(/^home\b/i.test(w.queryParameterString))return(0,S.cancelOffnetworkInviteResolving)(),r.Resolved(void 0);if(/^quickaction/i.test(w.queryParameterString)){let e=n.noop,t=le.Intent.Other;if(w.queryParameterKeyValues){const n=w.queryParameterKeyValues.quickaction;[t,e]=this._quickActionsProtocolLaunch(n,i,t,e)}else q.error(z.LogTraceArea.Navigation,"No queryParameterString found!");return r.Resolved({intent:t,action:e})}if(je.test(w.queryParameterString))return r.Resolved({intent:le.Intent.Other,action:()=>ge.default.navigateToBalanceStatePanel("BuyCreditFlow.navigateBalanceState",i)})}}return r.Resolved(void 0)}_navigateToMeetNowCreateFlow(e){const t=ie.default.getPartnerParametersFromUri(e);q.track(new se.MeetNowDeeplinkProcessedEvent(t)),this._isGuest()?t.convId?this._navigateGuestToMeetNow(t):this._createNewGuestUserAndCreateConversation(e):te.MeetNowHelpers.showNewMeetNow(ne.MeetNowOrigin.CampaignDeeplink,t)}_navigateToMeetNowJoinFlow(e){const t=de.default.isUserLoggedIn(),i=this._isGuest(),n=ie.default.getPartnerParametersFromUri(e);if(i&&n.convId)q.track(new se.MeetNowDeeplinkProcessedEvent(n)),this._navigateGuestToMeetNow(n);else{const o=t=>{this._createNewGuestUserAndJoinConversation(e,t)},s=()=>{this._createNewGuestUserAndCreateConversation(e)};i||q.track(new se.MeetNowDeeplinkProcessedEvent(n)),oe.default.navigateToMeetNowJoinLinkPanel(t,n,i?o:void 0,i?s:void 0)}}_createNewGuestUserAndCreateConversation(e){de.default.isUserLoggedIn()&&q.track(new se.MeetNowRepeatedGuestLoginEvent(ie.default.getPartnerParametersFromUri(e))),ee.default.redirectToLogout(z.LogoutReason.GuestSessionEnded).then((()=>{a.Storage.setItem(z.StorageItemKeys[z.StorageItemKeys.StartupUrl],JSON.stringify(this._addName(e)))}))}_createNewGuestUserAndJoinConversation(e,t){de.default.isUserLoggedIn()&&q.track(new se.MeetNowRepeatedGuestLoginEvent(ie.default.getPartnerParametersFromUri(e))),ee.default.redirectToLogout(z.LogoutReason.GuestSessionEnded).then((()=>{a.Storage.setItem(z.StorageItemKeys[z.StorageItemKeys.StartupUrl],JSON.stringify(this._addName(e+"&threadId="+t)))}))}_addName(e){const t=U.default.getDisplayName(de.default.getSkypeMri());return t&&!t.startsWith(w.GuestUserMriPrefix)?e+"&name="+t:e}getConfigConfirmationDialog(e,t){const i=n.find(e,(e=>e.Name===l.AttributeNames.PersonalContactProfilePhones));if(n.isEmpty(null==i?void 0:i.Value)||!i)return{dialogConfigs:{dialogTitle:Z.getString("UrlConverter.EnablePhoneDiscoverableNoPhoneTitle"),dialogContentText:Z.getString("UrlConverter.EnablePhoneDiscoverableNoPhoneContentText"),confirmButtonText:Z.getString("UrlConverter.EnablePhoneDiscoverableNoPhoneButtonText")},actionAfterConfirmation:()=>{q.track(new O.PhoneDiscoverabilityEvent({origin:Te.PhoneDiscoverabilityOrigin.DeepLink,userPhonesCount:0,command:O.PhoneDiscoverabilityDialogCommand.Confirm})),ge.default.navigateToSettingsGroup(he.SettingsGroup.Contacts,t)},actionAfterCancel:()=>{this._trackPhoneDiscoverabilityCancelation(!1)},onClickOutside:()=>{this._trackPhoneDiscoverabilityCancelation(!0)}};if(i.Value.length>1)return{dialogConfigs:{dialogTitle:Z.getString("UrlConverter.EnablePhoneDiscoverableManyPhonesTitle"),dialogContentText:Z.getString("UrlConverter.EnablePhoneDiscoverableManyPhonesContentText"),confirmButtonText:Z.getString("UrlConverter.EnablePhoneDiscoverableManyPhonesButtonText")},actionAfterConfirmation:()=>{q.track(new O.PhoneDiscoverabilityEvent({origin:Te.PhoneDiscoverabilityOrigin.DeepLink,userPhonesCount:null==i?void 0:i.Value.length,command:O.PhoneDiscoverabilityDialogCommand.Confirm})),ge.default.navigateToSettingsGroup(he.SettingsGroup.Contacts,t)},actionAfterCancel:()=>{this._trackPhoneDiscoverabilityCancelation(!1,i)},onClickOutside:()=>{this._trackPhoneDiscoverabilityCancelation(!0,i)}};{const e=i.Value[0],t=d.default.getPhonePartsFromViewValue(e);return{dialogConfigs:{dialogTitle:Z.getString("UrlConverter.EnablePhoneDiscoverableOnePhoneTitle"),dialogContentText:Z.getString("UrlConverter.EnablePhoneDiscoverableOnePhoneContentText",{phoneNumber:t.Number}),confirmButtonText:Z.getString("UrlConverter.EnablePhoneDiscoverableOnePhoneButtonText")},actionAfterConfirmation:()=>{q.track(new O.PhoneDiscoverabilityEvent({origin:Te.PhoneDiscoverabilityOrigin.DeepLink,userPhonesCount:null==i?void 0:i.Value.length,command:O.PhoneDiscoverabilityDialogCommand.Confirm})),c.default.showPhoneNumberInSearch(t,null==e?void 0:e.Source).then((()=>{q.track(new Te.PhoneNumberDiscoverabilityPrivacyEvent(!0,Te.PhoneDiscoverabilityOrigin.DeepLink))})).catch((e=>{q.track(new Te.PhoneNumberDiscoverabilityPrivacyEvent(void 0,Te.PhoneDiscoverabilityOrigin.DeepLink,{errorStatusCode:null==e?void 0:e.code,errorMessage:Me.default.errorAsString(e)})),q.log(z.LogTraceArea.ManageSearchInfo,"Service error while trying to enable phone number for discoverability. Error: "+Me.default.errorAsString(e))}))},actionAfterCancel:()=>{this._trackPhoneDiscoverabilityCancelation(!1,i)},onClickOutside:()=>{this._trackPhoneDiscoverabilityCancelation(!0,i)}}}}_trackPhoneDiscoverabilityCancelation(e,t){const i=e?O.PhoneDiscoverabilityDialogCommand.RejectOutside:O.PhoneDiscoverabilityDialogCommand.Reject;q.track(new O.PhoneDiscoverabilityEvent({origin:Te.PhoneDiscoverabilityOrigin.DeepLink,userPhonesCount:null==t?void 0:t.Value.length,command:i}))}_openPesTab(e,t,i,n){if(!e.queryParameterKeyValues)return;let o;const s=e.queryParameterKeyValues.toSkypeId;s&&I.isSkypeId(s)&&(o=I.skypeIdToMri(I.asSkypeId(s)),pe.default.isUsingStackNavigationContext()?this.navigateToConversation(o,i,n):this._navigateTo1on1Conversation(o,i,n));const a=decodeURIComponent(e.queryParameterKeyValues.query);F.default.openInSearchMode(t,a,this._getRootViewId(o))}_sendSystemTrayTelemetry(e){if(e.queryParameterKeyValues){const t=e.queryParameterKeyValues.source,i=e.queryParameterKeyValues.caller;t&&"skypebridge"===t&&q.track(new Re.SystemTrayEvent(i))}}getNavigationActionForOffNetworkGroupJoin(e,t){return()=>this._navigateToGroupConversation(e,z.NavigationConversationOrigin.Campaign,void 0,t)}getAddinOriginFromBrowserOrigin(e){switch(e){case z.BrowserOrigin.LinkNode:return ve.AddinOrigin.LinkNode;case z.BrowserOrigin.FindPanel:return ve.AddinOrigin.FindPanel;case z.BrowserOrigin.PopCard:return ve.AddinOrigin.PopCard;case z.BrowserOrigin.SwiftActionView:return ve.AddinOrigin.SwiftActionView;case z.BrowserOrigin.SwiftQuickReplyView:return ve.AddinOrigin.SwiftQuickReplyView;case z.BrowserOrigin.LinkerUtil:return ve.AddinOrigin.LinkerUtil;case z.BrowserOrigin.AdaptiveCard:return ve.AddinOrigin.AdaptiveCard;default:return ve.AddinOrigin.DeepLinkRequest}}_getParticipantMris(e,t=!0){return e?n.map(n.compact(e.split(";")),(e=>{e=decodeURIComponent(e);const i=t&&_e.default.isPossiblyPhoneNumber(e)?I.Namespaces.PSTN:I.Namespaces.SkypeId;return I.sanitizeMri(e,i)})):[]}_navigateToCall(e,t,i,o,s,a=!1){const r=e.queryParameterKeyValues.threadId,l=this._getParticipantMris(e.skypeParticipants);if(l.length>1)q.log(z.LogTraceArea.Navigation,"UrlConverter getNavigationActionForDeepLink group call causeId:"+o),C.default.CallNavigationHelper.startNewGroupCallAndConversation(l,t,o,s,z.NavigationCallOrigin.DeepLink);else if(1===l.length){const e=n.head(l);if(e)if(I.isPhoneMri(e)){const t=I.stripMriNamespace(e);q.log(z.LogTraceArea.Navigation,"UrlConverter getNavigationActionForDeepLink PSTN call causeId:"+o),ge.default.navigateToPSTNDialerWithParams({causeId:o,navigationSource:z.DialerNavigationSource.DeepLink,prefilledNumber:t},i)}else I.isMri(e)?(q.log(z.LogTraceArea.Navigation,"UrlConverter getNavigationActionForDeepLink 1:1 call causeId:"+o),C.default.CallNavigationHelper.startCall({conversationMri:e,withVideo:t,origin:z.NavigationCallOrigin.DeepLink},o)):q.error(z.LogTraceArea.Navigation,"UrlConverter getNavigationActionForDeepLink invalid participant "+Ae.mriOrId(e)+" causeId:"+o);else q.error(z.LogTraceArea.Navigation,"UrlConverter getNavigationActionForDeepLink no participant in participants causeId:"+o)}else if(a&&r){const t=e.queryParameterKeyValues&&e.queryParameterKeyValues.callId;this._navigateToTwinCamPreview(t,r,o)}else q.log(z.LogTraceArea.Navigation,"UrlConverter getNavigationActionForDeepLink quick call panel causeId:"+o),ge.default.navigateToQuickCallPanel(o,i)}_navigateToTwinCamPreview(e,t,i){const n="loadingDialog",o=p.default.getS4LCMCFeaturesNoSubscription().twinCamOneOnOneForceUpdateEnabled,s=o=>{g.LoadingDialog.dismiss(n,this._getRootViewId(t)),o===t&&(k.default.finishedSyncingConversation.unsubscribe(s),q.log(z.LogTraceArea.Navigation,"UrlConverter getNavigationActionForDeepLink joining as twincam causeId:"+i),C.default.CallNavigationHelper.startCallWithPreview({callId:e,conversationMri:t,withVideo:!0,isTwinCam:!0,origin:z.NavigationCallOrigin.DeepLink},i))};!o&&I.isOneOnOneConversation(t)?(g.LoadingDialog.show({dialogId:n,dialogText:Z.getString("Global.LoadingStatus"),showActivityIndicator:!0,showCancelButton:!1},this._getRootViewId(t)),Ne.EnsureStarted([k.default]).then((()=>{k.default.finishedSyncingConversation.subscribe(s),k.default.forceResyncConversation(t)}))):s(t)}_navigateToConversationForParticipants(e,t,i,n,o){const s=this._getParticipantMris(e.skypeParticipants,!1);if(s){const a=s[0];if("buddy"===(e.queryParameterKeyValues?e.queryParameterKeyValues.utm_source:void 0)&&I.isMri(a)){const t=e.skypeParticipants,i=e.queryParameterKeyValues.utm_content;return o&&o.markStepCompleted("InviteReceived"),(0,S.handleInviteLink)(t,i,o)}return 1!==s.length&&t?r.Resolved((()=>{new D.default({invitedUsersMris:s,creating1on1Conversation:!1,navigationOrigin:i,isSingleContactSelect:!1,peopleType:we.PeopleType.All}).start(N.MainRootViewId)})):r.Resolved((()=>this._navigateTo1on1Conversation(a,i,n)))}return r.Resolved((()=>{new D.default({isSingleContactSelect:!0,creating1on1Conversation:!0,peopleType:we.PeopleType.All,filterPeopleType:we.FilterType.None,navigationOrigin:i}).start(N.MainRootViewId)}))}navigateToConversation(e,t,i,n,o){e&&(I.isGroupConversation(e)?this._navigateToGroupConversation(I.asSkypeThreadId(e),t,i,n,o):this._navigateTo1on1Conversation(e,t,i,n))}_navigateTo1on1Conversation(e,t,i,n){const o=Fe.default.newCauseId();if(q.log(z.LogTraceArea.Navigation,"UrlConverter._navigateTo1on1Conversation, causeId: "+o),!e||!I.isValidNamespaceMri(e))return;if(de.default.isMyMri(e))return;const s=(0,L.default)(),a=s.ableToViewConversation(e)&&!s.getConversation(e).isDeleted();!I.isAgent(e)||E.default.isContact(e)&&a?P.default.ensureConversationLoadedOrFaked(e,z.ConversationFakedOrigin.UrlConverter,{origin:z.NavigationConversationOrigin[t],browserOrigin:i?z.BrowserOrigin[i]:""}).then((()=>{ge.default.navigateToConversation({convId:e,origin:t,browserOrigin:i,causeId:o,inviteLinkScenario:n})})):ge.default.showDetailsPanelWithParams({mri:e,rootViewId:N.MainRootViewId,causeId:o})}_navigateToGroupConversation(e,t,i,n,o){if(!e||!I.isValidNamespaceMri(e))return;const s=Fe.default.newCauseId(),a=(0,L.default)();if(q.log(z.LogTraceArea.Navigation,"UrlConverter._navigateToGroupConversation, causeId: "+s),a.ableToViewConversation(e))re.default.trackUserIsConversationParticipant(e),J.default.navigateToGroupConversationAndJoinCall(e,!0,t,s,i,n,o);else{const l=this._getRootViewId(e);this._showMeetNowFullScreenLoadingDialog(l),this._addMemberToThread(e,t,i,n).then((()=>(this._prioritizeMeetNowThreadDetails(e),this._waitForConversationKnown(e,t,i).then((()=>a.ableToViewConversation(e)?(re.default.trackUserIsConversationParticipant(e),J.default.navigateToGroupConversationAndJoinCall(e,!1,t,s,i,n,o)):r.Rejected({meetNowError:ne.MeetNowError.UserUnableToViewConversation})))))).catch((r=>{const l=a.getConversation(e),c=r.meetNowError===ne.MeetNowError.WaitForConversationKnownTimedOut;let d;if(q.warn(z.LogTraceArea.Navigation,`UrlConverter._navigateToGroupConversation failed: MeetNowError: ${r.meetNowError} is conversation defined: ${!!l} timeout: ${c} isBlocked: ${a.isConversationBlocked(l)} causeId: ${s} `),o){const e=r.meetNowError||this._getMeetNowErrorFromConversation(l);q.track(new se.MeetNowErrorEvent(o,e,null==r?void 0:r.errorCode))}c&&(d=()=>this._navigateToGroupConversation(e,t,i,n,o)),this._showJoinConversationFailedAlert(Object.assign(Object.assign({},r),{retryAction:d}))})).finally((()=>{K.FullScreenLoadingDialog.dismiss(K.getFullScreenLoadingDialog,l)}))}}_navigateGuestToMeetNow(e){const t=e.convId;if(!t)return;const i=Fe.default.newCauseId();q.log(z.LogTraceArea.Navigation,"UrlConverter._navigateGuestToMeetNow, causeId: "+i),this._prioritizeMeetNowThreadDetails(t),e.call?J.default.navigateToMeetNowCall(e,i):oe.default.navigateToMeetNowLobby(this._getRootViewId(t),e),k.default.waitForConversationListSyncToFinish().then((()=>{const n=(0,L.default)();if(!n.ableToViewConversation(t)){q.warn(z.LogTraceArea.Navigation,`UrlConverter._guestNavigateToMeetNowPanel: guest user is not part of the conversation causeId: ${i}`),ee.default.redirectToLogout(z.LogoutReason.GuestSessionEnded);const o=n.getConversation(t),s=this._getMeetNowErrorFromConversation(o);q.track(new se.MeetNowErrorEvent(e,s))}}))}_getMeetNowErrorFromConversation(e){let t=ne.MeetNowError.Unknown;return e?e.isCurrentUserMember()?(0,L.default)().isConversationBlocked(e)&&(t=ne.MeetNowError.ConversationIsBlocked):t=ne.MeetNowError.UserIsNotAMember:t=ne.MeetNowError.ConversationIsUndefined,t}_showJoinConversationFailedAlert(e){const t=Z.getString("UrlConverter.JoinConversationFailedTitle");let i=Z.getString("UrlConverter.JoinConversationFailedGenericMessage");const n=[{text:Z.getString("Global.OkLabel"),isSubmit:!0}];if(e)if(void 0!==e.statusCode)switch(e.statusCode){case 403:i=Z.getString("UrlConverter.JoinConversationFailedJoinDisabledMessage");break;case 404:i=Z.getString("UrlConverter.JoinConversationFailedThreadNotFoundMessage");break;case 412:i=Z.getString("UrlConverter.JoinConversationFailedTooManyMembersMessage")}else e.retryAction&&n.unshift({text:Z.getString("ConfirmationDialog.RetryLabel"),onPress:e.retryAction});h.default.showWithOptions({title:t,message:i,dialogAccessibilityTitle:i,rootViewId:N.MainRootViewId,buttons:n})}_navigateToPlayVideoFullScreen(e,t=""){const i={mediaType:Ve.VideoViewer.MediaType,thumbnailUrl:t,videoUrl:e};ge.default.navigateToMediaViewerPanel({initialMedia:i,controller:{getOptions:()=>({})},totalMedia:1,onClose:()=>{const e=Fe.default.newCauseId();q.log(z.LogTraceArea.Navigation,"UrlConverter._navigateToPlayVideoFullScreen onClose, causeId:"+e),ge.default.navigateBack(e,void 0)}})}_quickActionsProtocolLaunch(e,t,i,n){const o=Fe.default.newCauseId();switch(q.log(z.LogTraceArea.Navigation,"UrlConverter._quickActionsProtocolLaunch, causeId:"+o),q.track(new Pe.QuickActionsEvent(e)),e){case"presence":n=()=>ge.default.navigateToMeControl(t,o);break;case"call":n=()=>{ge.default.navigateToQuickCallPanelWithParams({causeId:o,newGroup:!0},t)};break;case"dialpad":i=le.Intent.Dialpad,n=()=>{ge.default.navigateToPSTNDialerWithParams({causeId:o,navigationSource:z.DialerNavigationSource.DeepLink},t)};break;case"recents":i=le.Intent.Recents,n=()=>ge.default.navigateToRecentsTab();break;case"chat":n=()=>{new D.default({creating1on1Conversation:!0,peopleType:we.PeopleType.AllExcludingBots,filterPeopleType:we.FilterType.None,isSingleContactSelect:!0,navigationOrigin:z.NavigationConversationOrigin.DeepLink,wizardSteps:[me.WizardSteps.setConvParticipants]}).start(N.MainRootViewId)};break;default:q.error(z.LogTraceArea.Navigation,e+" is not a recognized shortcut.")}return[i,n]}_requestBackgroundExecutionPermission(){Se.default.requestPermission(Le.PermissionType.BackgroundExecution,Le.PermissionPromptOptions.SkipPrePrompt|Le.PermissionPromptOptions.PromptAgainIfDenied).then((e=>{let t=Ce.default.getDeniedPrompt(Le.PermissionType.BackgroundExecution);if(e===o.PermissionStatus.Denied&&t){const e=1e4;M.default.addNotificationToast({notificationText:t,icon:xe.SkypeIcon.Warning,timeout:e},N.MainRootViewId)}q.log(z.LogTraceArea.Navigation,"navigateToRequestBackgroundExecutionPrompt: "+o.PermissionStatus[e])}))}_shouldDenyBrowserOriginToOpenInternalLinks(e){switch(e){case z.BrowserOrigin.AuthActionLink:case z.BrowserOrigin.AudioVideoSettings:case z.BrowserOrigin.LinkNode:case z.BrowserOrigin.BotSettings:case z.BrowserOrigin.ConsentModal:case z.BrowserOrigin.SuggestionsLearnMore:case z.BrowserOrigin.NotebookLink:case z.BrowserOrigin.DeepLinkRequest:case z.BrowserOrigin.SyncAddressBookDialogPrivacyStatement:case z.BrowserOrigin.SwiftActionView:case z.BrowserOrigin.LinkerUtil:case z.BrowserOrigin.AdaptiveCard:case z.BrowserOrigin.ConnectorProfile:case z.BrowserOrigin.CreditExpiration:case z.BrowserOrigin.SuggestionsConsentLearnMore:case z.BrowserOrigin.ReadReceiptsSettingsDescription:case z.BrowserOrigin.NetworkConnectionAlert:case z.BrowserOrigin.FileSharingLimits:case z.BrowserOrigin.PrivacyProfile:case z.BrowserOrigin.PeopleYouMayKnowNoticeDialog:case z.BrowserOrigin.SubscriptionDataSection:case z.BrowserOrigin.MeProfile:case z.BrowserOrigin.MeControl:case z.BrowserOrigin.HotkeysSettingsDescription:case z.BrowserOrigin.GuestUpsellPanel:case z.BrowserOrigin.TelemetryConsentSettingsDescription:case z.BrowserOrigin.TelemetryConsentDialog:return!0;case z.BrowserOrigin.AddinMenu:case z.BrowserOrigin.CloseAccount:case z.BrowserOrigin.EngagementNotice:case z.BrowserOrigin.FindPanel:case z.BrowserOrigin.JoinLink:case z.BrowserOrigin.LocationNode:case z.BrowserOrigin.Moji:case z.BrowserOrigin.Plugins:case z.BrowserOrigin.PopCard:case z.BrowserOrigin.SearchSuggestionsSettings:case z.BrowserOrigin.SwiftQuickReplyView:case z.BrowserOrigin.TPUMRequest:case z.BrowserOrigin.WebLauncher:case z.BrowserOrigin.UserProfileOnboarding:case z.BrowserOrigin.CallPanel:case z.BrowserOrigin.EmptyStateCTA:case z.BrowserOrigin.PurchaseRedirect:case z.BrowserOrigin.AgeGroupRestrictions:case z.BrowserOrigin.BingBackgroundReplaceImage:case void 0:return!1;default:return Fe.default.switchStatementExhaustiveChecking(e,"Unknown browserOrigin"),!0}}_addMemberToThread(e,t,i,n){return new Promise(((o,s)=>{Ne.EnsureStarted([T.default]).then((()=>(n&&n.markStepCompleted("AddMemberToThread"),T.default.serviceAddMemberToThread(e,de.default.getSkypeMri(),A.AddMemberToThreadSource.JoiningConversation,!1)))).then((()=>o())).catch((n=>{$.default.trackAddMemberToThreadError(e,n,t,i),y.default.navigation().canAccessRecentsList||ee.default.redirectToLogout(z.LogoutReason.GuestSessionEnded),s(Object.assign(Object.assign({},n),{meetNowError:ne.MeetNowError.CannotAddUserToTheThread}))}))}))}_waitForConversationKnown(e,t,i){return new Promise(((n,o)=>{const s=p.default.getS4LCMCFeaturesNoSubscription().waitJoinKnowledgeTimeoutMs;r.raceTimer(P.default.waitForJoinedKnowledgeOfRealConversation(e),s).then((a=>{a.timedOut?($.default.trackWaitForJoinedKnowledgeTimedOut(s,e,t,i),o({meetNowError:ne.MeetNowError.WaitForConversationKnownTimedOut})):n()})).catch((()=>{o({meetNowError:ne.MeetNowError.WaitForJoinedKnowledgeFailed})}))}))}_showMeetNowFullScreenLoadingDialog(e=N.MainRootViewId){K.FullScreenLoadingDialog.show({dialogId:K.getFullScreenLoadingDialog,dialogText:Z.getString("SignInSignUp.MeetNowMeetingStartup"),showActivityIndicator:!0,showCancelButton:!1},e,!0)}_prioritizeMeetNowThreadDetails(e){Ne.EnsureStarted([k.default]).then((()=>{k.default.prioritizeMeetNowThreadDetails(e)}))}_isGuest(){return I.isGuestUserMri(de.default.getSkypeMri())}_getRootViewId(e){return pe.default.isUsingSplitView()?x.default.rootViewIdForConversationMri(e):N.MainRootViewId}}},10575:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.bannersRelatedCommands=void 0;i(2604),i(84469),i(68894),i(72146),i(83843),i(78735),i(40363),i(78262),i(81736);t.bannersRelatedCommands=[]},83843:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActionResult=void 0,function(e){e[e.None=0]="None",e[e.InvalidParameters=1]="InvalidParameters"}(t.ActionResult||(t.ActionResult={}))},67923:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(81169),s=i(39549),a=i(82261),r=i(82433),l=i(46096),c=i(97174),d=i(36237),u=i(83843),g=i(33754),h=i(17219),p=i(85329),m=i(46200),S={command:"addreactions",usageHint:"[emoticon1], [emoticon2], ...",description:g.getString("SlashCommandDescriptions.AddReactions"),isVisible:!0,isEnabled:()=>!0,action:(e,t,i)=>{if(!e)return u.ActionResult.InvalidParameters;const o=T(e,i);return n.size(o)>0&&((0,h.default)().addReactions(o),(0,h.default)().saveCurrentReactions(),d.track(new m.ReactionsManipulationTelemetry(m.ReactionsManipulationAction.ReactionListBatchAdd,{numberOfReactions:n.size(o)}))),u.ActionResult.None}},C={command:"addcallreactions",usageHint:"[emoticon1], [emoticon2], ...",description:g.getString("SlashCommandDescriptions.AddReactions"),isVisible:!0,isEnabled:()=>!0,action:(e,t,i)=>{if(!e)return u.ActionResult.InvalidParameters;const o=T(e,i);return n.size(o)>0&&((0,p.default)().addReactions(o),(0,p.default)().saveCurrentReactions(),d.track(new m.ReactionsManipulationTelemetry(m.ReactionsManipulationAction.CallReactionListBatchAdd,{numberOfReactions:n.size(o)}))),u.ActionResult.None}},f={command:"removereactions",usageHint:"[emoticon1], [emoticon2], ...",description:g.getString("SlashCommandDescriptions.RemoveReactions"),isVisible:!0,isEnabled:()=>!0,action:(e,t,i)=>{if(!e)return u.ActionResult.InvalidParameters;const o=T(e,i);return n.size(o)>0&&((0,h.default)().removeReactions(o),(0,h.default)().saveCurrentReactions(),d.track(new m.ReactionsManipulationTelemetry(m.ReactionsManipulationAction.ReactionListBatchRemove,{numberOfReactions:n.size(o)})),(0,h.default)().getLocalReactionsCount()||d.track(new m.ReactionsManipulationTelemetry(m.ReactionsManipulationAction.LastReactionRemovedCallReset))),u.ActionResult.None}},y={command:"removecallreactions",usageHint:"[emoticon1], [emoticon2], ...",description:g.getString("SlashCommandDescriptions.RemoveReactions"),isVisible:!0,isEnabled:()=>!0,action:(e,t,i)=>{if(!e)return u.ActionResult.InvalidParameters;const o=T(e,i);return n.size(o)>0&&((0,p.default)().removeReactions(o),(0,p.default)().saveCurrentReactions(),d.track(new m.ReactionsManipulationTelemetry(m.ReactionsManipulationAction.CallReactionListBatchRemove,{numberOfReactions:n.size(o)})),(0,h.default)().getLocalReactionsCount()||d.track(new m.ReactionsManipulationTelemetry(m.ReactionsManipulationAction.LastCallReactionRemovedCallReset))),u.ActionResult.None}},_=[Object.assign(Object.assign({},S),{command:"addreaction",isVisible:!1}),S,f,Object.assign(Object.assign({},f),{command:"removereaction",isVisible:!1}),C,Object.assign(Object.assign({},C),{command:"addcallreaction",isVisible:!1}),y,Object.assign(Object.assign({},y),{command:"removecallreaction",isVisible:!1}),{command:"resetreactions",description:"Resets reactions set back to default",isVisible:!0,isEnabled:()=>!0,action:()=>((0,h.default)().resetUnsavedReactions(),(0,h.default)().saveCurrentReactions(),d.track(new m.ReactionsManipulationTelemetry(m.ReactionsManipulationAction.ReactionListReset)),u.ActionResult.None)},{command:"resetcallreactions",description:"Resets call reactions set back to default",isVisible:!0,isEnabled:()=>!0,action:()=>((0,p.default)().resetUnsavedReactions(),(0,p.default)().saveCurrentReactions(),d.track(new m.ReactionsManipulationTelemetry(m.ReactionsManipulationAction.CallReactionListReset)),u.ActionResult.None)},{command:"removereactionsat",usageHint:"reaction positions, use /printreactions for more info",description:g.getString("SlashCommandDescriptions.RemoveReactionsAt"),isVisible:!1,isEnabled:()=>!0,action:(e,t,i)=>e&&v(e)?((0,h.default)().removeReactionsAt(b(e).map((e=>e-1))),(0,h.default)().saveCurrentReactions(),u.ActionResult.None):u.ActionResult.InvalidParameters},{command:"removecallreactionsat",usageHint:"reaction positions, use /printcallreactions for more info",description:g.getString("SlashCommandDescriptions.RemoveCallReactionsAt"),isVisible:!1,isEnabled:()=>!0,action:(e,t,i)=>e&&v(e)?((0,p.default)().removeReactionsAt(b(e).map((e=>e-1))),(0,p.default)().saveCurrentReactions(),u.ActionResult.None):u.ActionResult.InvalidParameters},{command:"printreactions",usageHint:"(optional) position",description:g.getString("SlashCommandDescriptions.PrintReactions"),isVisible:!1,isEnabled:()=>!0,action:(e,t,i,o)=>{if(e&&!v(e))return u.ActionResult.InvalidParameters;const r=n.isEmpty(e)?[]:b(e);if((0,s.default)().getConversation(t)){const e="Reactions:\n",i=(0,h.default)().getCustomReactions(),s=n.isEmpty(r)?i.reduce(((e,t,i)=>e.concat(`${i+1}. (${t})\n`)),e):r.reduce(((e,t)=>`${t}. (${i[t-1]})`),e);o(a.createMessageInfoFromEscapedText(t,l.PostSource.SlashCommand,s))}return u.ActionResult.None}},{command:"printcallreactions",usageHint:"(optional) position",description:g.getString("SlashCommandDescriptions.PrintReactions"),isVisible:!1,isEnabled:()=>!0,action:(e,t,i,o)=>{if(e&&!v(e))return u.ActionResult.InvalidParameters;const r=n.isEmpty(e)?[]:b(e);if((0,s.default)().getConversation(t)){const e="Call Reactions:\n",i=(0,p.default)().getCustomReactions(),s=n.isEmpty(r)?i.reduce(((e,t,i)=>e.concat(`${i+1}. (${t})\n`)),e):r.reduce(((e,t)=>`${t}. (${i[t-1]})`),e);o(a.createMessageInfoFromEscapedText(t,l.PostSource.SlashCommand,s))}return u.ActionResult.None}}];function v(e){return(e||"").match(/^(\d|\s)+$/)&&"0"!==e}function b(e){return(0,o.chain)(e,(e=>e.trim().toLowerCase().split(" ")),(e=>e.map(n.toInteger)))}function T(e,t){const i=t.slice(2);return n.size(i)>0&&n.every(i,(e=>e instanceof c.EmoticonEntity))?i.map((e=>e.emoticonName)):(0,o.chain)(e,(e=>e.trim().toLowerCase().split(" ")),(e=>e.map((e=>{return function(e,t){if(e&&(e.id===t||n.includes(e.shortcuts,t)))return e.id;0;return}((t=e,r.default.getEmoticonByShortcutNoSubscription(`(${t})`)||r.default.getEmoticonByShortcutNoSubscription(t)),e);var t}))),n.compact)}t.default=_},8420:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findSlashCommand=t.getVisibleCommands=t.getSlashCommands=t.FindResult=void 0;const n=i(96486),o=i(36345),s=i(52210),a=i(15069),r=i(24173),l=(i(26999),i(16778),i(48540),i(97691)),c=i(1706),d=(i(80843),i(72105)),u=i(89391),g=(i(78547),i(34581)),h=i(50781),p=(i(68734),i(94224)),m=(i(25489),i(98925)),S=(i(98925),i(32057)),C=i(22801),f=i(76621),y=i(71908),_=i(51077),v=i(90239),b=i(61375),T=i(81697),P=i(71830),A=i(62141),k=(i(98278),i(53445),i(59904)),I=i(984),w=i(65848),N=(i(85455),i(39549)),M=i(82261),E=(i(40276),i(99686),i(16402)),x=(i(84469),i(52262)),L=i(6452),R=(i(67121),i(59799),i(26646)),D=i(84334),B=i(21444),O=i(68894),F=i(46096),V=(i(65947),i(72146),i(5581),i(72685)),U=i(97174),H=i(36237),W=(i(52461),i(83843)),z=(i(59261),i(58666)),G=i(14532),K=i(18460),j=i(33754),q=(i(46634),i(69108)),Q=(i(24606),i(50513),i(44972)),X=(i(52914),i(78735)),J=i(46929),$=i(18078),Y=i(4735),Z=i(30124),ee=i(32226),te=(i(41998),i(32844),i(23521),i(73367),i(53891)),ie=i(71926),ne=(i(17707),i(99375)),oe=(i(56507),i(74478),i(85207)),se=i(67923),ae=i(31234),re=i(54416),le=i(50325),ce=i(14976),de=(i(34273),i(79829),i(14673)),ue=i(66765),ge=(i(95384),i(96856),i(60181)),he=i(55585),pe=i(22538),me=(i(50449),i(4057)),Se=i(40363),Ce=(i(12770),i(94214)),fe=i(26712),ye=i(72758),_e=i(53374),ve=i(10575),be=(i(34387),/^\/[a-z_!]+(?:\s|$)/i),Te=[{command:"refresh",isVisible:!1,usageHint:"[info|chat|alerts|all]",description:j.getString("SlashCommandDescriptions.Refresh"),action:(e,t)=>{const i=e.trim().toLowerCase();if("info"===i)V.default.fireAllEarly(),ye.default.slashCommand_refreshProfiles(),R.default.requestUpdate();else if("chat"===i)T.default.forceResyncAllConversations();else if("alerts"===i)d.default.slashCommand_refresh();else if("all"===i)V.default.fireAllEarly(),ye.default.slashCommand_refreshProfiles(),R.default.requestUpdate(),T.default.forceResyncAllConversations(),d.default.slashCommand_refresh();else{if(i)return W.ActionResult.InvalidParameters;T.default.forceResyncConversation(t)}return W.ActionResult.None}},{command:"crashapp",isVisible:!1,isEnabled:()=>u.default.isMurphyUser(),description:"Crashes the app",action:(e,t,i,n)=>{const o=e.trim().toLowerCase();return""===o||"js"===o?(void 0).boom():r.default.crashApp(o).catch((e=>{const i=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,e.message);n(i)})),W.ActionResult.None}},{command:"me",isVisible:!0,usageHint:"[emote text]",description:j.getString("SlashCommandDescriptions.Me"),action:(e,t,i)=>{if(!e.trim())return W.ActionResult.InvalidParameters;const o=x.default.getDisplayName($.default.getSkypeMri()),s=_e.default.escapeXml(o).length+1;let a=3,r=[];n.each(i,(e=>{if(a>0){const t=e.text();if(t.length<a)a-=t.length;else{const e=o+t.substr(a);r.push(new U.UnhandledEntity(e)),a=0}}else r.push(e)}));const l=M.createEmoteMessageInfo(t,F.PostSource.SlashCommand,r,s);return oe.default.postMessage(l),W.ActionResult.None}},{command:"swift",isVisible:!1,usageHint:"[todo | weather | trello | hotel | receipt | signin]",description:"Adds a test Swift card to the stream",action:(e,t,i,n)=>{const o=e.trim(),s=M.createSwiftFakeMessage(t,F.PostSource.SlashCommand,o);return s?(n(s),W.ActionResult.None):W.ActionResult.InvalidParameters}},{command:"adaptive",isVisible:!1,usageHint:"[text | news]",description:"Adds a test adaptive card to the stream",action:(e,t,i,n)=>{const o=e.trim(),s=M.createAdaptiveFakeMessage(t,F.PostSource.SlashCommand,o);return s?(n(s),W.ActionResult.None):W.ActionResult.InvalidParameters}},{command:"poll",isVisible:!0,usageHint:"[title],[option1],[option2],[option3], ...",description:j.getString("SlashCommandDescriptions.Poll"),isEnabled:()=>u.default.getS4LMessagingFeatures().enablePollExtension,action:(e,t)=>{const i=e.split(",");if(i&&i.length>te.MinPollOptionCount){const e=i[0],o=n.take(i.slice(1),te.MaxPollOptionCount);return ne.postPollMessage(t,e,o,ne.getDefaultExpirationTimeMs(),!1,ie.CreatePollOrigin.SlashCommand),W.ActionResult.None}return W.ActionResult.InvalidParameters}},{command:"tokenrefresh",isVisible:!1,description:"Force refresh of SkypeToken",action:()=>(Ce.default.skypeTokenInvalid(Ce.default.getRawSkypeToken()),W.ActionResult.None)},{command:"epidrefresh",isVisible:!1,description:"Force refresh of EndpointId",action:()=>(ue.default.markEndpointMissing(ue.default.getEndpointId()),W.ActionResult.None)},{command:"add",isVisible:!1,usageHint:"[user]",description:j.getString("SlashCommandDescriptions.Add"),action:(e,t)=>W.ActionResult.None},{command:"leave",isVisible:!0,description:j.getString("SlashCommandDescriptions.Leave"),isEnabled:e=>Pe(e),action:(e,t)=>{y.leaveConversationAsync(t,b.RemoveMemberFromThreadSource.LeaveCommand);const i=_e.default.newCauseId();return H.log(F.LogTraceArea.SlashCommandUtils,"/leave",ce.mriOrId(t)," causeId:",i),Z.default.isUsingStackNavigationContext()?Y.default.navigateToRecentsTab():Y.default.navigateToDesktopRecents(i),W.ActionResult.None}},{command:"kick",isVisible:!1,usageHint:"[Skype Name]",description:"Eject chat member",isEnabled:e=>{const t=(0,N.default)().getConversation(e);return Pe(e)&&!(0,Q.isRegularMemberInModeratedGroup)(t)},action:(e,t)=>{const i=e.trim();return i?(n.each(i.split(" "),(e=>{const i=P.sanitizeMri(e,P.Namespaces.SkypeId);y.removeParticipantFromConversation(i,t,b.RemoveMemberFromThreadSource.KickCommand)})),W.ActionResult.None):W.ActionResult.InvalidParameters}},{command:"kickban",isVisible:!0,usageHint:"[Skype Name]",description:j.getString("SlashCommandDescriptions.KickBan"),isEnabled:e=>{const t=(0,N.default)().getConversation(e);return Pe(e,!0)&&!(0,Q.isRegularMemberInModeratedGroup)(t)},action:(e,t)=>{const i=e.trim();if(!i)return W.ActionResult.InvalidParameters;const o=(0,N.default)().getConversation(t);let s=o?o.getBannedSkypeIds():[];return n.each(i.split(" "),(e=>{const i=P.sanitizeMri(e,P.Namespaces.SkypeId);y.removeParticipantFromConversation(i,t,b.RemoveMemberFromThreadSource.KickCommand),s.push(e)})),s=n.uniq(s),C.default.setBannedSkypeIds(t,s),W.ActionResult.None}},{command:"getbanlist",isVisible:!0,description:j.getString("SlashCommandDescriptions.GetBanList"),isEnabled:e=>{const t=(0,N.default)().getConversation(e);return Pe(e,!0)&&!(0,Q.isRegularMemberInModeratedGroup)(t)},action:(e,t,i,o)=>{const s=(0,N.default)().getConversation(t);if(s){let e="BANNED USERS:\n";const i=s.getBannedSkypeIds();n.each(i,(t=>{e+=`   ${t}\n`}));o(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,e))}return W.ActionResult.None}},{command:"setbanlist",isVisible:!0,usageHint:"[[+|-][Skype Name]]",description:j.getString("SlashCommandDescriptions.SetBanList"),isEnabled:e=>{const t=(0,N.default)().getConversation(e);return Pe(e,!0)&&!(0,Q.isRegularMemberInModeratedGroup)(t)},action:(e,t)=>{const i=e.trim();if(!i)return W.ActionResult.InvalidParameters;const o=(0,N.default)().getConversation(t);if(o){let e=!1,s=o.getBannedSkypeIds();if(n.each(i.split(" "),(t=>{"+"===t[0]?s.push(P.asSkypeId(t.slice(1))):"-"===t[0]?n.remove(s,(e=>e===t.slice(1))):e=!0})),e)return W.ActionResult.InvalidParameters;s=n.uniq(s),C.default.setBannedSkypeIds(t,s)}return W.ActionResult.None}},{command:"showmembers",isVisible:!0,description:j.getString("SlashCommandDescriptions.ShowMembers"),isEnabled:e=>Pe(e),action:(e,t,i,o)=>{const s=(0,N.default)().getConversation(t);if(s){let e="CONVERSATION MEMBERS:\n";const i=s.getThreadMembers();n.each(i,(t=>{if(P.isAgent(t.id)){const i=c.default.getAgentDescriptionForMri(t.id);e+=`   ${i.getDisplayName()} (${t.id}): ${t.role}\n`}else{const i=P.getSkypeIdFromMri(t.id);i&&(e+=`   ${i}: ${t.role}\n`)}}));o(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,e))}return W.ActionResult.None}},{command:"setrole",isVisible:!0,usageHint:"[Skype Name] [Admin|User]",description:j.getString("SlashCommandDescriptions.SetRole"),isEnabled:e=>{const t=(0,N.default)().getConversation(e);return Pe(e)&&!(0,Q.isRegularMemberInModeratedGroup)(t)},action:(e,t)=>{const i=e.split(" ");if(2!==i.length||i[1].toLowerCase()!==v.ThreadMemberRoles.Admin.toLowerCase()&&"master"!==i[1].toLowerCase()&&i[1].toLowerCase()!==v.ThreadMemberRoles.User.toLowerCase())return W.ActionResult.InvalidParameters;const n=P.sanitizeMri(i[0],P.Namespaces.SkypeId),o=(0,N.default)().getConversation(t);return o&&o.isUserMember(n)?($.default.getSkypeMri()===n||C.default.serviceAddMemberToThread(t,n,b.AddMemberToThreadSource.SetRoleCommand,i[1].toLowerCase()===v.ThreadMemberRoles.Admin.toLowerCase()||"master"===i[1].toLowerCase()),W.ActionResult.None):W.ActionResult.None}},{command:"showconv",isVisible:!1,description:"Displays raw conversation info",action:(e,t,i,n)=>{const o=(0,N.default)().getConversation(t);if(o){n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,JSON.stringify(o)))}return W.ActionResult.None}},{command:"showconvid",isVisible:!1,description:"Displays conversation id",action:(e,t,i,n)=>(n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,JSON.stringify(t))),W.ActionResult.None)},{command:"dumprawalerts",isVisible:!1,usageHint:"[count]",description:"Dumps raw alerts info",action:(e,t,i,n)=>{const o=d.default.test_getAllRawAlerts(),s=Number(e.trim());s>0&&o.splice(s);return n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,JSON.stringify(o))),W.ActionResult.None}},{command:"dumpalerts",isVisible:!1,usageHint:"[count]",description:"Dumps visible alerts info",action:(e,t,i,o)=>{let s=d.default.getRecentAlerts();const a=Number(e.trim());if(a>0){let e=n.clone(s);e.splice(a),s=e}return o(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,JSON.stringify(s))),W.ActionResult.None}},{command:"syncinfo",isVisible:!1,description:"Displays conversation's sync info",action:(e,t,i,n)=>{const o=f.default.getConversationMetaFromMemoryCache(t);if(!o)return W.ActionResult.None;let s="Conversation: "+t+", Version: "+o.conv.convViewVersion+", MessagesStale: "+o.syncInfo.messagesStale+", MessagesSyncState: "+o.syncInfo.messagesSyncState;o.conv.isThread()&&(s+=", ThreadDetailsVersion: "+o.conv.threadDetailsVersion+", ThreadPropsVersion: "+o.conv.getThreadProperty(P.ThreadProps.ThreadDetailsVersion));return n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,s)),W.ActionResult.None}},{command:"language",isVisible:!1,description:j.getString("SlashCommandDescriptions.Language"),usageHint:"[ll-CC|ll|reset]",action:e=>e.trim()?(H.track(new G.LanguageSlashCommandChangedEvent(j.getLocale(),e)),"reset"===e.trim()?(z.resetLocaleToSystem(),H.log(F.LogTraceArea.SlashCommandUtils,"Resetting language to default via slash command")):(z.setLocale(e),H.log(F.LogTraceArea.SlashCommandUtils,`Locale set via slash command to [${e}]`)),W.ActionResult.None):W.ActionResult.InvalidParameters},{command:"rtl",isVisible:!1,description:"Force right-to-left layout",usageHint:"[on|off]",action:(e,t,i,n)=>{const o=e.trim();if("on"!==o&&"off"!==o)return W.ActionResult.InvalidParameters;const s="on"===o;j.forceRTL(s),X.default.setUserPreferencesLocal({rtl:s});return n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,"The app needs to be restarted for this change to take effect")),W.ActionResult.None}},{command:"forcecqf",isVisible:!1,usageHint:"[on|off]",description:"Forces Call Quality Feedback for all calls",action:(e,t)=>{const i=e.trim().toLowerCase();return i&&"on"!==i&&"off"!==i?W.ActionResult.InvalidParameters:(X.default.setUserPreferencesLocal({forceCQF:"on"===i}),W.ActionResult.None)}},{command:"callinfo",isVisible:!1,description:"Display call info in the conversation",action:(e,t,i,o)=>{const s=p.default.CallingStore.getCallIdsForConversationMri(t),a=s.length?n.head(s):p.default.CallingStore.getMostRecentCallId();return a?(p.default.CallingStore.getDebugInformation(a,!!s.length).then((e=>{if(!e)return;const i=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,e);o(i)})),W.ActionResult.None):W.ActionResult.None}},{command:"calltechinfo",isVisible:!1,description:"Display call technical information in the conversation",action:(e,t,i,o)=>{const s=p.default.CallingStore.getCallIdsForConversationMri(t);s.length?n.head(s):p.default.CallingStore.getMostRecentCallId();return W.ActionResult.None}},{command:"golive",isVisible:!0,usageHint:"",description:j.getString("SlashCommandDescriptions.GoLive"),isEnabled:e=>{const t=(0,N.default)().getConversation(e);return P.isGroupConversation(e)&&!(0,Q.isRegularMemberInModeratedGroup)(t)},action:(e,t,i,n)=>{const o=_e.default.newCauseId();return P.isThread(t)?p.default.CallNavigationHelper.isGoLiveAllowed(t,o)?(H.log(F.LogTraceArea.SlashCommandUtils,"/golive",ce.mriOrId(t)," causeId:",o),p.default.CallNavigationHelper.startGoLiveCall({conversationMri:t,withVideo:!0,origin:F.NavigationCallOrigin.GoLiveSlashCommand},o),W.ActionResult.None):(H.log(F.LogTraceArea.SlashCommandUtils,"Ignoring /golive ",ce.mriOrId(t),"- golive is not allowed"),W.ActionResult.None):W.ActionResult.None}},{command:"flamingo",isVisible:!1,usageHint:"[on|off]",description:"Forces MSNP pushes for all calls",action:(e,t)=>{const i=e.trim().toLowerCase();return i&&"on"!==i&&"off"!==i?W.ActionResult.InvalidParameters:(X.default.setUserPreferencesLocal({forceFlamingo:"on"===i}),W.ActionResult.None)}},{command:"showbrowserinfo",isVisible:!1,description:"Show browser info",action:(e,t,i,n)=>{const o="BrowserName: "+a.default.SystemModel+" browserVersion: "+a.default.SystemManufacturer+" isMobile: "+a.default.isMobile()+" supportsDragAndDropEffect: "+a.BrowserEnvironment.supportsDragAndDropEffect()+" supportsScreenSharing: "+a.BrowserEnvironment.supportsScreenSharing()+" supportsCopy: "+a.BrowserEnvironment.supportsCopy()+" browserEngine: "+a.BrowserEnvironment.getBrowserEngine();return n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,o)),W.ActionResult.None}},{command:"showreconnect",isVisible:!1,usageHint:"[on|off|none]",description:"Force-render reconnect UI",action:(e,t,i,n)=>{if(!h.default.isCallingBundleLoaded())return W.ActionResult.InvalidParameters;const o=e.trim().toLowerCase();if(o&&"on"!==o&&"off"!==o&&"none"!==o)return W.ActionResult.InvalidParameters;const s="on"===o?m.NetworkConnectionState.Connecting:"off"===o?m.NetworkConnectionState.Connected:m.NetworkConnectionState.LostConnection,a=_e.default.newCauseId(),r=p.default.CallingStore.getConnectedAndNotOnHoldCallId();return r?(H.log(F.LogTraceArea.SlashCommandUtils,"Setting call reconnect UI networkState: "+m.NetworkConnectionState[s]+" callId: "+r+" causeId: "+a),p.default.CallingStore.networkConnectionEvent().fire({callId:r,eventType:m.CallNetworkQualityEventType.NetworkReconnection,networkState:s,causeId:a}),W.ActionResult.None):W.ActionResult.InvalidParameters}},{command:"showpoorconnection",isVisible:!1,usageHint:"[on|off]",description:"Force-render poor connection UI",action:(e,t,i,n)=>{const o=e.trim().toLowerCase();if(o&&"on"!==o&&"off"!==o)return W.ActionResult.InvalidParameters;if(!h.default.isCallingBundleLoaded())return W.ActionResult.InvalidParameters;const s="on"===o,a=_e.default.newCauseId(),r=p.default.CallingStore.getConnectedAndNotOnHoldCallId();return r?(H.log(F.LogTraceArea.SlashCommandUtils,(s?"Showing":"Hiding")+" calling poor connection UI callId: "+r+" causeId: "+a),p.default.CallingStore.networkConnectionEvent().fire({callId:r,eventType:m.CallNetworkQualityEventType.NetworkReceiveQuality,networkState:s?m.NetworkConnectionState.LostConnection:m.NetworkConnectionState.Connected,causeId:a}),W.ActionResult.None):W.ActionResult.InvalidParameters}},{command:"showaudioonlyprompt",isVisible:!1,usageHint:"[on|off]",description:"Force-render catastrophic network event",action:(e,t,i,n)=>{if(!h.default.isCallingBundleLoaded())return W.ActionResult.InvalidParameters;const o=e.trim().toLowerCase();if(o&&"on"!==o&&"off"!==o&&"none"!==o)return W.ActionResult.InvalidParameters;let s=m.NetworkConnectionState.LostConnection;"on"===o?s=m.NetworkConnectionState.Connecting:"off"===o&&(s=m.NetworkConnectionState.Connected);const a=_e.default.newCauseId(),r=p.default.CallingStore.getConnectedAndNotOnHoldCallId();return r?(H.log(F.LogTraceArea.SlashCommandUtils,"Setting audio only prompt UI networkState: "+m.NetworkConnectionState[s]+" callId: "+r+" causeId: "+a),p.default.CallingStore.networkConnectionEvent().fire({callId:r,eventType:m.CallNetworkQualityEventType.NetworkReceiveCatastrophic,networkState:s,causeId:a}),W.ActionResult.None):W.ActionResult.InvalidParameters}},{command:"showcallnetworkconnectioninfo",isVisible:!1,usageHint:"",description:"Displays call network quality values",action:(e,t,i,n)=>{if(!h.default.isCallingBundleLoaded())return W.ActionResult.InvalidParameters;const o=p.default.CallingStore.getConnectedAndNotOnHoldCallId();if(!o)return W.ActionResult.InvalidParameters;const s=(0,S.default)(),a=s.getCallReconnectionState(o),r=s.isCallQualityPoor(o),l=s.isCallCatastrophic(o);let c=`Reconnection: ${a}`;return a&&(c+=` (${m.NetworkConnectionState[a]})`),c+=`\nQualityPoor: ${r}`,c+=`\nCatastrophic: ${l}`,n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,c)),W.ActionResult.None}},{command:"dumpmsnp",isVisible:!1,description:"Display debugging info in the conversation",action:(e,t,i,o)=>{let s;switch(ee.default.getConnectionStatus()){case ee.ConnectionStatus.Connected:s="NetStateConnected";break;case ee.ConnectionStatus.DisconnectedButNetworkingPossible:s="NetStateConnecting";break;case ee.ConnectionStatus.DisconnectedNoNetworkingReported:s="NetStateDisconnected";break;default:s="Unknown"}const a=$.default.getMyMris(),r=n.filter(a,(e=>P.getMriNamespace(e)===P.Namespaces.MSA)).map((e=>e.substr(2))),l=n.find(r,(e=>0!==e.indexOf("cid-(")))||n.head(r)||"Unknown",c=(new Date).getTimezoneOffset(),d=Math.abs(c%60),u=(c-d)/60,g=(u>0?"-":"+")+(u<10?"0"+u:u)+":"+(d<10?"0"+d:d),h=ue.default.getEndpointInfo(),p=Ce.default.getSkypeToken(),m=re.default.debug_getLastPayload(),S=C.default.debug_getCurrentCloudUrl(),y=f.default.getUserProperty(P.ServerUserProps.UserRing),_=[["Status",s],["Dogfood Status",S?P.isDogfoodCloudUrl(S).toString():"None"],["Cloud Url",S||"None"],["User Ring",n.isUndefined(y)?"None":v.UserRing[n.toNumber(y)]||y],["Login",l],["Skypename",$.default.getSkypeId()],["EPID",h.exists?h.id:"None"],["EPFlags",h.exists?h.featureFlags:"None"],["Push Sub Id",h.pushSubscriptionId||"None"],["ClientVersion",Se.default.getAppVersion()],["OSVersion",Se.default.getPlatformTypeName()+" "+Se.default.getOSVersion()],["Time",`TZ: UTC${g}, Local: ${Date.now()}    /*, Server */`],["PnhInfo",m?JSON.stringify(m):"None"],["My Mris",a.join(", ")],["Locale",j.getLocale()],["PlatformType",""+Se.default.getPlatformType()],["Chat Service Connection",C.default.isConnected()?"REST/Long Poll":"None"],["Skype Token Expiration",p?""+p.expiration:"None"],["FrontendUrl",Se.default.getFrontendBaseUrl()]];const b="MSNP: Connection Data:\n"+n.map(_,(e=>`* ${e[0]}: ${e[1]}`)).join("\n");return o(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,b)),W.ActionResult.None}},{command:"pnh",isVisible:!1,description:"Display PNH registrations",action:(e,t,i,n)=>(re.default.debug_enumerateRegistrations().then((e=>{const i=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,JSON.stringify(e,null," "));n(i)})),W.ActionResult.None)},{command:"tracing",isVisible:!1,usageHint:"[on|off|(number number number number number number)]",description:"Enables or disables debug log tracing",action:(e,t)=>{const i=e.toLowerCase().trim();if("on"===i)H.setLocalTracingMasks([-1,-1,-1,-1,-1,-1,-1,-1,-1]);else if("off"===i)H.setLocalTracingMasks([0,0,0,0,0,0,0,0,0]);else{if(!i)return W.ActionResult.InvalidParameters;{const e=i.split(" "),t=n.map(e,(e=>Number(e)));if(!n.every(t,n.isFinite)||t.length!==s.ECSMaskLength)return W.ActionResult.InvalidParameters;H.setLocalTracingMasks(t)}}return W.ActionResult.None}},{command:"unreadcounts",isVisible:!1,description:"Validates unread message counts and dumps details to debug log file",action:(e,t,i,n)=>{const o=e.toLowerCase().trim();if(o&&"fix"!==o)return W.ActionResult.InvalidParameters;const s=f.default.getConversationMetaFromMemoryCache(t);return w.validateUnreadMessageCounts([s]).then((e=>{const i=e?"Unread message counts are consistent.":"Unread message counts are inconsistent. Please file a bug.",o=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,i);n(o)})),W.ActionResult.None}},{command:"resetprefs",isVisible:!1,usageHint:"[local|roaming]",description:"Resets user preferences. By default, both local and roaming are reset.",action:(e,t)=>{const i=e.trim().toLowerCase(),n="local"===i,o="roaming"===i;return!i||n||o?(n||J.default.reset(),o||X.default.reset(),W.ActionResult.None):W.ActionResult.InvalidParameters}},{command:"usestacknav",isVisible:!1,usageHint:"[on|off]",description:"Overrides navigation context to stack navigation on narrow desktop",action:(e,t)=>{const i=e.trim().toLowerCase();return i&&"on"!==i&&"off"!==i?W.ActionResult.InvalidParameters:(X.default.setUserPreferencesLocal({useStackNavOnNarrowDesktop:"on"===i}),W.ActionResult.None)}},{command:"download",isVisible:!1,usageHint:"[info|cancel]",description:'Gets info or cancels for all "Downloading" media and files',action:(e,t,i,o)=>{const[s,a]=e.trim().toLowerCase().split(" ");let r=!s||"info"===s;"all"!==s||a||(r=!0);const l="cancel"===s||"cancell"===s;if(!r&&!l)return W.ActionResult.InvalidParameters;const c=n.cloneDeep(n.values(L.default.debug_allFileDownloads())),d=n.cloneDeep(n.values(L.default.debug_allFileDownloadsCleaningUp())),u=n.cloneDeep(L.default.debug_allDownloadFailedRetryInfo());let g=`${r?"Currently downloading ":"Canceling "}${c.length} as of ${Date.now()}:\n${JSON.stringify(c)}`;if(r&&(d.length&&(g+=`\n\nCleaning up ${d.length}:\n${JSON.stringify(d)}`),n.isEmpty(u)||(g+=`\n\nRetry info:\n${JSON.stringify(u)}`)),l){const e=n.filter(c,(e=>!L.default.cancelDownloadForKey(e.key,"666")));e.length&&(g+=`\n\nFailed to cancel ${e.length}:\n${n.map(e,(e=>e.id)).join(", ")}`)}return o(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,g)),W.ActionResult.None}},{command:"post",isVisible:!1,usageHint:"[info|cancel] [all]",description:'Gets info or cancels for all "Sending" messages and media uploads in this or all conversation(s)',action:(e,t,i,o)=>{const[s,a]=e.trim().toLowerCase().split(" ");let r="all"===a,c=!s||"info"===s;"all"!==s||a||(r=!0,c=!0);const d="cancel"===s||"cancell"===s;if(!c&&!d)return W.ActionResult.InvalidParameters;const u=e=>{const i=n.cloneDeep(n.values(e)),o=r?i:n.filter(i,(e=>!!e.persisted.messagesForPosting[t])),s=n.sortBy(o,(e=>e.persisted.postTime));return n.map(s,(e=>e.getPersistedActionData()))},g=u(oe.default.debug_allPosts()),h=u(oe.default.debug_allPostsCleaningUp()),p=n.cloneDeep(oe.default.debug_allPostsFailedRetryInfo()),m=n.map(g,(e=>{const t=n.map(e.messagesForPosting,((e,t)=>A.default.getMessageByCuid(t,P.getCuidForMessage(e))));return l.all(t).then((t=>n.some(t,(e=>!e))?e:void 0))}));return l.all(m).then((e=>n.compact(e))).then((e=>{const i=r?"":" in this conversation";let s=`${c?"Currently sending ":"Canceling "}${g.length}${i} as of ${Date.now()}:\n${JSON.stringify(g)}`;if(c&&(h.length&&(s+=`\n\nCleaning up ${h.length}:\n${JSON.stringify(h)}`),n.isEmpty(p)||(s+=`\n\nRetry info:\n${JSON.stringify(p)}`)),d){const e=n.filter(g,(e=>{const i=r?n.first(e.conversationIds):t,o=e.messagesForPosting[i];return!oe.default.cancelPostMessage(i,o.clientmessageid)}));if(e.length){const t=n.map(e,(e=>e.id));s+=`\n\nFailed to cancel ${e.length}:\n${t.join(", ")}`}}if(e.length){const t=n.map(e,(e=>e.id));s+=`\n\nMissing DB message for ${e.length}:\n${t.join(", ")}`}const a=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,s);o(a)})),W.ActionResult.None}},{command:"getuserinfo",isVisible:!1,description:"Retrieves a users' User Info, including SkypeID and CID",action:(e,t,i,n)=>{const o=`User Ids:\n${$.default.getMyMris().join("\n")}`;return n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,o)),W.ActionResult.None}},{command:"dumpmessages",isVisible:!1,usageHint:"[all | number of messages] [pretty | JSON spaces]",description:"Retrieves raw messages from the database",action:(e,t,i,o)=>{const[s,a]=e.trim().toLowerCase().split(" "),r="all"===s?Number.MAX_VALUE:Number(s);if(!n.isFinite(r)||0===r)return W.ActionResult.InvalidParameters;return(r>0?A.default.getMessagesForConversationBeforeTime(t,Number.MAX_VALUE,r,!1):A.default.getMessagesForConversationAfterTime(t,0,-r,!1)).then((e=>{const i=Number(a)||("pretty"===a?4:void 0),s=n.map(e,(e=>JSON.stringify(e,null,i))).join(i?"\n\n":void 0),r=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,s);o(r),H.debug((()=>["dumpmessages",e]))})),W.ActionResult.None}},{command:"getrecordings",isVisible:!1,usageHint:"",description:"Retrieves missing recordings",action:(e,t,i,o)=>{const s=e.trim();let a=Number(s);(!n.isFinite(a)||0===a||a>90)&&(a=30);const r=E.default.add(Date.now(),0,-a);return A.default.getMessagesForConversationAfterTime(Se.default.getCallLogMri(),r,-Number.MAX_VALUE,!1).then((e=>{e.forEach((e=>{if(e.messagetype===_.MessageTypes.CastRecording){const i=e.getLatestServerMessage();if(i){const e=M.createMessageFromServerMessage(t,F.PostSource.SlashCommand,i);o(e)}}}))})),W.ActionResult.None}},{command:"getmessagebycuid",isVisible:!1,usageHint:"cuid",description:"Retrieves raw message from the database by cuid",action:(e,t,i,n)=>{const o=e.trim();return!o||/\D/.test(o)?W.ActionResult.InvalidParameters:(A.default.getMessageByCuid(t,o).then((e=>{const i=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,JSON.stringify(e));n(i),H.debug((()=>["getmessagebycuid",e]))})),W.ActionResult.None)}},{command:"switchconv",isVisible:!1,usageHint:"conversationId",description:"Navigates to a chat conversation",action:(e,t)=>{const i=_e.default.newCauseId();H.log(F.LogTraceArea.SlashCommandUtils,"SlashCommandUtils.switchconv, causeId: "+i);const n=e.trim();return P.isMri(n)?(Y.default.navigateToConversation({convId:n,origin:F.NavigationConversationOrigin.SlashCommand,causeId:i}),W.ActionResult.None):W.ActionResult.InvalidParameters}},{command:"skonsole",isVisible:!1,description:"Opens a fake conversation to display streaming instrumentation/console lines",action:(e,t,i)=>{const n=_e.default.newCauseId();return H.log(F.LogTraceArea.SlashCommandUtils,"SlashCommandUtils.skonsole, causeId: "+n),f.default.createFakeConversation(P.SkonsoleMri,F.ConversationFakedOrigin.SlashCommand),Y.default.navigateToConversation({convId:P.SkonsoleMri,origin:F.NavigationConversationOrigin.SlashCommand,causeId:n}),W.ActionResult.None}},{command:"clearmru",isVisible:!0,description:j.getString("SlashCommandDescriptions.ClearMru"),action:(e,t)=>(ae.default.clearHistory(),W.ActionResult.None)},{command:"geturicomponents",isVisible:!1,usageHint:"[uri] [native|regex]",description:"Get uri components synchronously.",action:(e,t,i,o)=>{const s=e&&n.compact(n.trim(e).split(" "));if(0===s.length)return W.ActionResult.InvalidParameters;const a=n.trim(s[0]);let r,l;switch(s.length>1?n.trim(s[1]).toLowerCase():"default"){case"native":r=fe.default.test_syncGetUriComponents(a);break;case"regex":r=fe.default.test_regexGetUriComponents(a);break;default:r=fe.default.getURIComponents(a)}if(r){const e=[["Input",a],["Is valid",fe.default.isUrlValid(a)],["Protocol",r.protocol],["Email Name",r.emailName],["Skype Participants",r.skypeParticipants],["Tel Number",r.telNumber],["Host",r.host],["Port",r.port],["Path",r.pathname],["Querystring",r.queryParameterString],["Fragment",r.fragment]];l="Uri components:\n"+n.map(e,(e=>`* ${e[0]}: ${e[1]}`)).join("\n")}else l="Failed to parse uri: "+a;return o(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,_e.default.escapeXml(l))),W.ActionResult.None}},{command:"fetchprofile",isVisible:!1,usageHint:"[mri]",description:"Fetches a profile from the People Service.",action:(e,t,i,o)=>e&&0!==e.length?(ge.default.getProfiles([e]).then((e=>{n.each(e.profiles,(e=>{const i=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,JSON.stringify(e));o(i)}))})),W.ActionResult.None):W.ActionResult.InvalidParameters},{command:"fetchcontact",isVisible:!1,usageHint:"[mri]",description:"Fetches contacts from the Contacts Service and searches for given mri.",action:(e,t,i,o)=>e&&0!==e.length?(k.default.getContacts($.default.getSkypeId()).then((i=>{if(i.contacts){const s=n.find(i.contacts,(t=>t.mri===e));let a=i.contacts.length+" total contacts - ";if(a+=s?"found ":"did not find ",a+='"'+e+'"',o(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,a)),s){const e=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,JSON.stringify(s));o(e)}}else o(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,"Something went wrong"))})).catch((e=>{const i=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,me.default.errorAsString(e));o(i)})),W.ActionResult.None):W.ActionResult.InvalidParameters},{command:"getprofilefromdb",isVisible:!1,usageHint:"[mri]",description:"Gets user profile from the local database.",action:(e,t,i,n)=>e&&0!==e.length?(A.default.getDisplayableUser(e).then((e=>{if(e){const i="Displayable user mini profile:\n\n"+JSON.stringify(e);n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,i))}else n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,"No displayable user mini profile found"))})),A.default.getUserProfileByMri(e).then((e=>{if(e){const i="Full user profile:\n\n"+JSON.stringify(e);n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,i))}else n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,"No full user profile found"))})),W.ActionResult.None):W.ActionResult.InvalidParameters},{command:"getcontactswithphones",isVisible:!1,description:"Fetches contacts with phones from the Contacts Service for the current user.",action:(e,t,i,o)=>(k.default.getContacts($.default.getSkypeId()).then((e=>{if(e.contacts){const i=n.filter(e.contacts,(e=>!!e.phones||!!e.profile&&!!e.profile.phones)),s=n.filter(e.contacts,(e=>!!e.phone_hashes)),a=e.contacts.length+" total contacts - "+s.length+" contacts with phone hashes - "+i.length+" contacts with phones";o(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,a)),n.each(i,(e=>{const i=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,JSON.stringify(e));o(i)}))}else o(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,"Something went wrong"))})).catch((e=>{const i=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,me.default.errorAsString(e));o(i)})),W.ActionResult.None)},{command:"synccontacts",isVisible:!1,usageHint:"[full]",description:"Trigger syncing of contacts from the Contacts Service",action:(e,t,i,n)=>{I.default.triggerContactsRefresh("full"===e);const o="full"===e?"Triggered full sync":"Triggered delta sync";return n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,o)),W.ActionResult.None}},{command:"resynclocaladdressbook",isVisible:!1,description:"Trigger re-syncing of the local address book",action:(e,t,i,n)=>{K.default.syncLocalAddressBook();return n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,"Attempted to trigger local address book sync. Check contacts permissions.")),W.ActionResult.None}},{command:"azms",isVisible:!1,usageHint:"[environ ENVIRON)]",description:"Set AzMS REST API deployment slot.",action:(e,t)=>{H.log(F.LogTraceArea.SlashCommandUtils,"AzMS setting user preference: "+e);const[i,n]=e.trim().toLowerCase().split(" ");return!i||"environ"!==i||!n||["default","test","production"].indexOf(n)<0?W.ActionResult.InvalidParameters:(H.log(F.LogTraceArea.SlashCommandUtils,"AzMS pointing to environment: "+n),g.default.setEnvironment(n),X.default.setUserPreferencesLocal({azmsEnvironment:n}),W.ActionResult.None)}},{command:"wipedatabase",isVisible:!1,description:"Wipes your database",action:(e,t,i)=>{const n=q.default.internal_setDatabaseWipeFlag(),o=pe.EnsureStartedExclusive([de.default]).then((()=>de.default.nukeDB()));return l.all([n,o]).always((()=>{le.reloadApp("slash-command-wipedatabase")})),W.ActionResult.None}},{command:"version",isVisible:!0,description:j.getString("SlashCommandDescriptions.Version"),action:(e,t,i,n)=>{const s=o.default.getVersion();return n(M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,"Skype Version: "+Se.default.getAppVersion()+"\nCalling Version: "+s.build+"\nOVB Revision: "+s.ovb)),W.ActionResult.None}},{command:"showplaces",isVisible:!1,description:"Shows all endpoints and their details",action:(e,t,i,o)=>(C.default.serviceEnumerateEndpoints().then((e=>{const i=e.endpoints,s=n.map(i,(e=>C.default.serviceGetEndpointPresenceDoc(P.formatEndpointId(e.id)).then((e=>{if(!e)return l.Rejected();const t=P.getTextualEndpointInfo(e),o=n.find(i,(t=>P.formatEndpointId(t.id)===P.getEndpointIdFromPresenceDoc(e)));return t+" - isActive: "+o.isActive+", Subs: "+n.map(o.subscriptions,(e=>e.id+":"+e.channelType)).join(",")})).catch((()=>"Unknown ID: "+C.default.serviceGetEndpointPresenceDoc(P.formatEndpointId(e.id))))));l.all(s).then((e=>{const i=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,e.join("\n"));o(i)}))})),W.ActionResult.None)},{command:"openinext",isVisible:!1,usageHint:"[on|off]",description:"Enable opening links in external browser",action:(e,t)=>{const i=e.trim().toLowerCase();return i&&"on"!==i&&"off"!==i?W.ActionResult.InvalidParameters:(X.default.setUserPreferencesLocal({openUrlInExternalBrowser:"on"===i}),W.ActionResult.None)}},{command:"pullcampaign",isVisible:!1,usageHint:"[campaing_id] [camapaign_variant] (language)",description:"Download pull campaign",action:(e,t,i,o)=>{const s=n.split(e," ",3);if(s.length<2||s.length>3){const e=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,"Wrong number of parameters. /pullcampaign campaing_id camapaign_variant (locale)");return o(e),W.ActionResult.InvalidParameters}const a=s[0],r=s[1],l=2===s.length||3===s.length?j.getLocale():s[2];if(!l||!j.isLocaleSupported(l)){const e=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,'Invalid language provided. Please use "en-US" format');return o(e),W.ActionResult.InvalidParameters}return B.default.slashCommandTriggerPullCampaign(a,r,l).then((e=>{D.default.insertRealTimeMessage(e.payload,e.type,O.EngagementSource.EngagementApi);const i=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,"Slash command completed with success. Campaign payload sent to EngagementBotMessageServiceV2 for processing");o(i)})).fail((e=>{const i=M.createMessageInfoFromEscapedText(t,F.PostSource.SlashCommand,e);o(i)})),W.ActionResult.None}},{command:"formatting",isVisible:!0,isEnabled:e=>!!u.default.getS4LMessagingFeaturesNoSubscription().enableDoNotFormat&&!P.isPhoneMri(e),usageHint:"[on|off|reset|resetall]",description:j.getString("SlashCommandDescriptions.Formatting"),action:(e,t)=>{const i=e.trim().toLowerCase();return-1===n.indexOf(["on","off","reset","resetall"],i)?W.ActionResult.InvalidParameters:("reset"===i?X.default.setLocalDoNotFormatPreference(t,void 0):"resetall"===i?X.default.removeAllLocalDoNotFormatPreferences():X.default.setLocalDoNotFormatPreference(t,"off"===i),W.ActionResult.None)}},{command:"speechprivacyconsent",isVisible:!1,usageHint:"reset",description:"Resets value given to speech consent for translations ",action:e=>{H.log(F.LogTraceArea.SlashCommandUtils,"Changes the value for speech consent for privacy"+e);const t=e.trim().toLowerCase();return t&&n.includes(["reset"],t)?(he.default.test_resetState(),W.ActionResult.None):W.ActionResult.InvalidParameters}},...se.default];function Pe(e,t=!1){const i=(0,N.default)().getConversation(e);return i&&(i.isThread()&&!t||i.isModerated())||!1}function Ae(e,t){return!t.isEnabled||t.isEnabled(e)}Te.push(...ve.bannersRelatedCommands);var ke;!function(e){e[e.None=0]="None",e[e.InvalidLooksLikeCommand=1]="InvalidLooksLikeCommand",e[e.FoundCommand=2]="FoundCommand"}(ke=t.FindResult||(t.FindResult={})),t.getSlashCommands=function(){return Te},t.getVisibleCommands=function(e){return n.filter(Te,(t=>t.isVisible&&Ae(e,t)))},t.findSlashCommand=function(e,t){if((t[0]instanceof U.CommandEntity||t[0]instanceof U.UnhandledEntity||t[0]instanceof U.SmsEntity)&&"/"===t[0].text().charAt(0)){const i=n.map(t,(e=>e.text())).join("");if(be.test(i)){let t=i.indexOf(" ");-1===t&&(t=i.length);const o=i.substr(1,t-1).toLowerCase(),s=i.substr(t+1),a=n.find(Te,(t=>t.command===o&&Ae(e,t)));return{result:a?ke.FoundCommand:ke.InvalidLooksLikeCommand,command:a,params:s}}}return{result:ke.None}}},99401:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatDevicesForPicker=void 0,t.formatDevicesForPicker=function(e){return e.map((e=>({label:e.label,value:e.id})))}},19784:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(78045),s=i(16778),a=i(97691),r=i(35440),l=i(47204),c=i(98278),d=i(46096),u=i(36237),g=i(33754),h=i(30124),p=i(14976),m=i(10265),S="customdialog";class C{static showWithOptions(e){C._show(e.title,e.message,e.dialogAccessibilityTitle,e.buttons,e.rootViewId,e.useHorizontalButtons,e.useDesktopDialog,e.leftAlignContent,e.useFocussedWindowFallback,e.suppressModalDismissalEvents,e.onClickOutside,e.allowScrolling)}static showErrorAlert(e,t){this.showErrorAlertWithOptions({errorText:e,dialogAccessibilityTitle:e,rootViewId:t,hideTitle:!1})}static showErrorAlertWithOptions(e){u.warn(d.LogTraceArea.GenericUnsafe,"AlertUtils: Error dialog: "+p.dev_unknownOmit(e.errorText)),C.showOkAlertWithOptions({title:e.hideTitle?"":g.getString("Global.ErrorDialogTagline"),message:e.errorText,dialogAccessibilityTitle:e.dialogAccessibilityTitle||g.getString("Global.ErrorTitle"),rootViewId:e.rootViewId})}static showCloseAlertWithOptions(e){const t={text:g.getString("Global.CloseButtonTitle"),isSubmit:!0};C.showWithOptions(Object.assign(Object.assign({},e),{buttons:[t]}))}static showOkAlertWithOptions(e){const t={text:g.getString("Global.OkLabel"),isSubmit:!0};C.showWithOptions(Object.assign(Object.assign({},e),{buttons:[t]}))}static showOKAlert(e,t,i,n){C.showOkAlertWithOptions({title:e,dialogAccessibilityTitle:t||e,message:t,rootViewId:i,useFocussedWindowFallback:n})}static showOKAlertWithPromise(e,t,i,n,o){const s=a.Defer(),r={text:g.getString("Global.OkLabel"),isSubmit:!0,onPress:()=>{s.resolve(void 0)}};return C.showWithOptions({title:e,message:t,buttons:[r],rootViewId:i,useFocussedWindowFallback:n,dialogAccessibilityTitle:o||t||e}),s.promise()}static showConfirmationAlert(e,t,i,n,o,s,a,r,l){const c=[{text:g.getString("Global.CancelLabel"),onPress:r,isCancel:!0},{text:i,onPress:n,isSubmit:!0}];C.showWithOptions({title:e,dialogAccessibilityTitle:a||t||e,message:t,buttons:c,rootViewId:o,useFocussedWindowFallback:s,onClickOutside:l})}static showNatively(e,t,i,o){{const i=t||e;if(o&&o.length)if(window.confirm(i)){const e=n.find(o,(e=>!!e.isSubmit));e&&e.onPress&&e.onPress()}else{const e=n.find(o,(e=>!!e.isCancel));e&&e.onPress&&e.onPress()}else window.alert(i)}}static dismissCurrentCustomAlert(e){const t=S+this._customDialogId;l.default.dismissModal(t,e)}static showCustomAlertWithOptions(e){this.dismissCurrentCustomAlert(e.rootViewId),this._customDialogId++;const t=S+this._customDialogId,i=!e.requireUserAction;let n;if(e.imageSource){const t=s.Styles.createImageStyle({width:e.imageSource.width,height:e.imageSource.height,borderRadius:e.imageSource.imageBorderRadiusValue,alignSelf:e.imageSource.centerImageInAlert?"center":void 0},!1);n=s.createElement(s.Image,{style:t,resizeMode:e.imageResizeMode||c.ImageResizeModeEnum.cover,source:e.imageSource.source})}const o=s.createElement(m.default,{dialogId:t,isThemeAware:!0,key:t,closeOnClickOutside:i,onClickOutside:i?e.onClickOutside:void 0,text:e.dialogTitle,accessibilityLabel:e.accessibilityTitle||e.dialogTitle,simpleContent:e.dialogText,buttons:e.buttons,buttonAlignment:e.useHorizontalButtons?r.SimpleDialogButtonAlignment.HorizontalStack:void 0,leftAlignContent:e.leftAlignContentText,suppressModalDismissalEvents:e.suppressModalDismissalEvents,allowScrolling:e.allowScrolling},n,e.content);l.default.showModal(o,t,{rootViewId:e.rootViewId})}static _show(e,t,i,n,s,a,r,l,g,p,m,S){const f=o=>{const s=C._decorateAlertButtons(n);C.showCustomAlertWithOptions({dialogTitle:e,dialogText:t,buttons:s,useHorizontalButtons:a,accessibilityTitle:i,leftAlignContentText:l,rootViewId:o,onClickOutside:m,suppressModalDismissalEvents:p,allowScrolling:S})};h.default.isUsingSplitViewNoSubscription()&&s===c.MainRootViewId&&g?o.default.getLastActiveSplitView().then((e=>{const t=e&&e.isActive?e.id:c.MainRootViewId;f(t)}),(e=>{u.log(d.LogTraceArea.Navigation,"getLastActiveSplitView() failed. error: "+e),f(c.MainRootViewId)})):f(s)}static _decorateAlertButtons(e){return n.map(e,(e=>(e.isCancel?e.style="cancel":"cancel"===e.style&&(e.isCancel=!0),e)))}}t.default=C,C._customDialogId=0},83267:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(42826),s=i(72105),a=i(46096),r=i(36237),l=i(33754),c=i(4735),d=i(17093),u=i(30124),g=i(95691),h=i(24148),p=i(93194),m=i(53374);class S{static showMenu(e,t,i,n){const o={anchor:t,buttons:this.menuItems(e),cancelButtonTitleIOS:l.getString("Global.CancelLabel")};p.default.showWithActionMenuConfig({options:o,callback:e=>this.handleOverflowActionMenuCommand(e,i),maintainAnchor:!0,rootViewId:i,invokingEvent:n})}static menuItems(e){const t=[];return e&&t.push({text:l.getString("AlertsPanel.MarkAllAsReadButton"),command:o.AlertMenuItemCommand.markAllRead}),t.push({text:l.getString("AlertsPanel.NotificationsSettingsButton"),command:o.AlertMenuItemCommand.settings}),t}static menuItemTitle(e){switch(e){case o.AlertTypeFilter.All:return l.getString("AlertsPanel.AllFilter");case o.AlertTypeFilter.HighPriorityMessages:return l.getString("AlertsPanel.HighPriorityFilter");case o.AlertTypeFilter.Reactions:return l.getString("AlertsPanel.ReactionsFilter")}return""}static menuItemCommand(e){switch(e){case o.AlertTypeFilter.All:return o.AlertMenuItemCommand.all;case o.AlertTypeFilter.HighPriorityMessages:return o.AlertMenuItemCommand.highPriority;case o.AlertTypeFilter.Reactions:return o.AlertMenuItemCommand.reactions}return""}static filterForCommand(e){switch(e){case o.AlertMenuItemCommand.highPriority:return o.AlertTypeFilter.HighPriorityMessages;case o.AlertMenuItemCommand.reactions:return o.AlertTypeFilter.Reactions;case o.AlertMenuItemCommand.all:return o.AlertTypeFilter.All}}}t.default=S,S.handleOverflowActionMenuCommand=(e,t)=>{const i=m.default.newCauseId();switch(r.log(a.LogTraceArea.Navigation,"AlertsHubUIUtils.handleOverflowActionMenuCommand, causeId: "+i),e){case o.AlertMenuItemCommand.markAllRead:return n.Accessibility.announceForAccessibility(l.getString("AlertsPanel.MarkAllAsReadConfirmation")),s.default.markAllAsRead(),!0;case o.AlertMenuItemCommand.settings:return u.default.isUsingStackNavigationContextNoSubscription()?c.default.navigateToSettingsGroup(d.SettingsGroup.Notifications,t):c.default.navigateToDesktopSettingsGroup(d.SettingsGroup.Notifications,t,i),r.track(new h.NavigationNotificationSettings(g.NavigationSettingsOrigin.NotificationsPanel)),!0;case p.SXActionMenuCancel:return!0}return!1}},80128:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(46096),o=i(29130),s=i(70919),a=i(40363),r=i(66127),l=s.SearchInputHeight.default,c=s.SearchInputHeight.default,d=2*s.SearchInputHeight.default,u=s.SearchInputHeight.small,g=s.SearchInputHeight.small,h=2*s.SearchInputHeight.small,p=s.SearchInputHeight.iOS,m=s.SearchInputHeight.default+s.SearchInputHeight.iOS,S=s.SearchInputHeight.iOS,C=s.SearchInputHeight.small+s.SearchInputHeight.iOS,f=s.SearchInputHeight.modernizedSmall,y=s.SearchInputHeight.default+s.SearchInputHeight.modernizedSmall,_=s.SearchInputHeight.small+s.SearchInputHeight.modernizedSmall;t.default=class{static collapsedHeight(e){return o.default.isSmallDeviceNoSubscription(e)?g:c}static expandedHeight(e){const t=o.default.isSmallDeviceNoSubscription(e);return r.default.canModernizeMobileTabHeaderNoSubscription()?t?_:y:this.useIOSSearchStyles()?t?C:m:t?h:d}static collapsableHeight(e){const t=o.default.isSmallDeviceNoSubscription(e);return r.default.canModernizeMobileTabHeaderNoSubscription()?f:this.useIOSSearchStyles()?t?S:p:t?u:l}static useIOSSearchStyles(){return a.default.getPlatformType()===n.PlatformType.iOS}}},11930:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=(i(11375),i(33754));let s=new class{linkAccessibilityInfo(e,t){let i,o=e;return i=t?[n.Types.AccessibilityTrait.Button]:[n.Types.AccessibilityTrait.None,n.Types.AccessibilityTrait.Link],{label:o,traits:i}}wrapLinkWithAccessibilityView(e,t,i,o){const s=this.linkAccessibilityInfo(t);return n.createElement(n.Button,{style:o,accessibilityTraits:s.traits,accessibilityLabel:s.label,importantForAccessibility:n.Types.ImportantForAccessibility.Yes,onPress:i},e)}tabAccessibilityLabel(e,t,i,n=!1){let s=e;return n&&(s+=", ",s+=o.getString("Global.CountOfTotal",{count:t+1,total:i})),s}headerAccessibilityInfo(e,t){return{accessibilityLabel:this.combinedAccessibilityLabel(e,t)||"",accessibilityTraits:n.Types.AccessibilityTrait.Header}}tabAccessibilityTraits(e){return e?[n.Types.AccessibilityTrait.Tab,n.Types.AccessibilityTrait.Selected]:[n.Types.AccessibilityTrait.Tab]}buttonAccessibilityInfo(e,t){const i=[n.Types.AccessibilityTrait.Button];let o=e;return t&&i.push(n.Types.AccessibilityTrait.Disabled),{accessibilityLabel:o,accessibilityTraits:i}}applyMoreOptionsAccessibilityHint(e){return e+", "+o.getString("Global.MoreOptionsAvailableAccessibilityLabel")}combinedAccessibilityLabel(e,t,i){return e?e+(t?(i||", ")+t:""):t}registerMobileFocusHandler(e,t){0}applyShouldGroupAccessibilityChildren(e){return e}};t.default=s},47204:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(78045),o=i(16778),s=i(3056),a=i(98278),r=i(46096),l=i(36237),c=i(30124),d=i(14976),u=i(80837),g=i(4735);let h=new class{showModal(e,t,i){const h=n=>{var h;l.log(r.LogTraceArea.Navigation,"CommonModalUtils.showModal modalId: "+t+" rootViewId: "+d.mriOrId(n));const p=i.useScopedModalId?this._getAdjustedId(t,i.rootViewId):t,m=Object.assign(Object.assign({},i),{rootViewId:n===a.MainRootViewId?void 0:n}),S=o.createElement(s.default,{rootViewType:null!==(h=i.rootViewType)&&void 0!==h?h:a.RootViewType.EmbeddedModal},!1===i.useModalContainer?e:o.createElement(o.View,{style:u.default.absoluteFill},e));n!==a.MainRootViewId&&c.default.isMobileSplitView()&&g.default.openSplitView(n),o.Modal.show(S,p,m)};c.default.isUsingSplitViewNoSubscription()&&i.rootViewId===a.MainRootViewId&&i.useFocussedWindowFallback?n.default.getLastActiveSplitView().then((e=>{const t=e&&e.isActive?e.id:a.MainRootViewId;h(t)}),(e=>{l.log(r.LogTraceArea.Navigation,"getLastActiveSplitView() failed. error: "+e),h(a.MainRootViewId)})):h(i.rootViewId)}dismissModal(e,t,i){l.log(r.LogTraceArea.Navigation,"CommonModalUtils.dismissModal modalId: "+e+" rootViewId: "+d.mriOrId(t));const n=i?this._getAdjustedId(e,t):e;o.Modal.dismiss(n)}isModalDisplayed(e,t,i){const n=i?this._getAdjustedId(e,t):e;return o.Modal.isDisplayed(n)}showPopup(e,t,i){return(n=>{l.log(r.LogTraceArea.Navigation,"CommonModalUtils.showPopup popupId: "+t+" rootViewId: "+d.mriOrId(n));const c=e.useScopedPopupId?this._getAdjustedId(t,e.rootViewId):t,g=Object.assign(Object.assign({},e),{renderPopup:(t,i,n,r)=>{var l;const c=e.renderPopup(t,i,n,r);return o.createElement(s.default,{rootViewType:null!==(l=e.rootViewType)&&void 0!==l?l:a.RootViewType.EmbeddedModal},o.createElement(o.View,{style:u.default.overflowVisible},c))},rootViewId:n===a.MainRootViewId?void 0:n,getAnchor:()=>{const i=e.getAnchor?e.getAnchor():void 0;return i||l.log(r.LogTraceArea.Navigation,"CommonModalUtils.showPopup getAnchor popupId: "+t+" rootViewId: "+d.mriOrId(n)+" hasAnchor: false"),i}});return o.Popup.show(g,c,i)})(e.rootViewId)}dismissPopup(e,t,i){l.log(r.LogTraceArea.Navigation,"CommonModalUtils.dismissPopup popupId: "+e+" rootViewId: "+(t?d.mriOrId(t):"none"));const n=i?this._getAdjustedId(e,t):e;return o.Popup.dismiss(n)}validatePopupOffset(e){e&&(Math.abs(e.x)>50||Math.abs(e.y)>50)&&l.warn(r.LogTraceArea.GenericUnsafe,"CommonModalUtils popup offset is too large x: "+e.x+" y: "+e.y)}_getAdjustedId(e,t){return t!==a.MainRootViewId?e+"_"+t:e}};t.default=h},84994:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(98278),a=i(15877),r=(i(40363),50),l=56,c=56,d=40,u=38,g=(0,a.lazyProperties)({tabBarDefault:()=>o.Styles.createViewStyle({height:r}),tabBarAndroid:()=>o.Styles.createViewStyle({height:l}),tabBarTablet:()=>o.Styles.createViewStyle({height:c}),tabBarIOSLandscape:()=>o.Styles.createViewStyle({height:d}),tabBarCompactDesktop:()=>o.Styles.createViewStyle({height:u})});let h=new class{tabBarHeightStyle(e){switch(e){case s.TabBarHeight.Android:return g.tabBarAndroid;case s.TabBarHeight.Tablet:return g.tabBarTablet;case s.TabBarHeight.iosLandscape:return g.tabBarIOSLandscape;case s.TabBarHeight.CompactDesktop:return g.tabBarCompactDesktop;default:case s.TabBarHeight.Default:return g.tabBarDefault}}tabBarHeight(e){switch(e){case s.TabBarHeight.Android:return l;case s.TabBarHeight.Tablet:return c;case s.TabBarHeight.iosLandscape:return d;case s.TabBarHeight.CompactDesktop:return u;default:case s.TabBarHeight.Default:return r}}generateIndexToTabEnumMap(e){const t={};return n.each(e,((e,i)=>{t[i]=e})),t}generateTabEnumToIndexMap(e){const t={};return n.each(e,((e,i)=>{t[e]=i})),t}useTabListContainer(){return!0}};t.default=h},62602:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(88837),s=i(97691),a=i(47126);let r=new class{measureLayoutRelativeToWindow(e){const t=this.maybeMountedAnchor(e());return t?n.UserInterface.measureLayoutRelativeToWindow(t):s.Rejected("Anchor component undefined or unmounted.")}measureLayoutRelativeToAncestor(e,t){const i=this.maybeMountedAnchor(e()),o=this.maybeMountedAnchor(t());return i&&o?n.UserInterface.measureLayoutRelativeToAncestor(i,o):s.Rejected("Anchor and/or ancestor undefined or unmounted.")}maybeMountedAnchor(e){if(!(e instanceof o.ComponentBase)||e.isComponentMounted())return e}maybeHandleKeyPress(e,t){return(e.keyCode===a.default.SPACE||e.keyCode===a.default.ENTER)&&(e.stopPropagation(),e.preventDefault(),t(),!0)}};t.default=r},57139:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(53211),a=i(13560),r=i(46096),l=i(36237),c=i(76),d=i(53374);class u{static showWithBuilders(e){const t=d.default.newCauseId();l.log(r.LogTraceArea.GenericUnsafe,"CustomActionMenuUtils.showWithBuilders, causeId: "+t);const i=o.createElement(c.default,{rowBuilders:e.builders,colorThemeOverride:e.colorThemeOverride}),a=s.default.getMenuItemHeight();let g=0;n.each(e.builders,(e=>{g+=e.props.rowHeight||a}));const h=Object.assign(Object.assign({},e),{menuId:e.menuId||this.menuId(),menuHeight:g,content:i});u.showWithContent(h,t)}static showWithContent(e,t){l.log(r.LogTraceArea.GenericUnsafe,"CustomActionMenuUtils.showWithContent, causeId: "+t),a.default.show(e,t)}static menuId(){return"custommenu"+this._menuCount++}static close(e,t){l.log(r.LogTraceArea.GenericUnsafe,"CustomActionMenuUtils.close, causeId: "+t),a.default.close(e,t)}static closeIfNeeded(e,t){const i=a.default.isCustomActionMenuShownNoSubscription();l.log(r.LogTraceArea.GenericUnsafe,"CustomActionMenuUtils.closeIfNeeded menuShown: "+i+" causeId: "+t),i&&this.close(e,t)}}t.default=u,u._menuCount=0},68934:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(62602),o=i(46096),s=i(36237),a=i(71499);let r=new class{showToolTip(e,t,i,r,l={}){s.log(o.LogTraceArea.GenericUnsafe,"CustomToolTipUtils.showToolTip: "+r),n.default.measureLayoutRelativeToWindow(e).then((e=>{i()&&a.default.setToolTipConfig(Object.assign({rect:e,displayText:r,rootViewId:t},l))}),(e=>{s.warn(o.LogTraceArea.GenericUnsafe,"CustomToolTipUtils.showToolTip, anchor not measured: "+e.toString())}))}clearToolTip(){s.log(o.LogTraceArea.GenericUnsafe,"CustomToolTipUtils.clearToolTip"),a.default.clearToolTipConfig()}};t.default=r},36659:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(89391),s=i(94224),a=i(47447),r=i(37490),l=i(46096),c=i(36237),d=i(33754),u=i(4735),g=i(17093),h=i(30124),p=i(95691),m=i(24148),S=i(93486),C=i(93818),f=i(95697),y=i(70523),_=i(93194),v=i(212),b=i(53374),T=i(44330),P=i(6977),A="settings",k="splitview",I="apsettings",w="avsettings",N="helpandfeedback",M="reportproblem",E="rateus",x="signout",L="hotkeys";var R;!function(e){e[e.MobileSettings=0]="MobileSettings",e[e.DesktopSettings=1]="DesktopSettings",e[e.DesktopRemainder=2]="DesktopRemainder",e[e.SplitView=3]="SplitView",e[e.Feedback=4]="Feedback",e[e.HelpAndAbout=5]="HelpAndAbout",e[e.SignOut=6]="SignOut",e[e.HotKeys=7]="HotKeys",e[e.ReportProblem=8]="ReportProblem"}(R||(R={}));const D="overflowpopup";class B{static showOptionsMenu(e,t,i,s){const a={anchor:e,useTheme:!0,positionPriorities:["bottom","right"],popupBeakSize:{width:0,height:0}};{const e=S.default.isChild(),r=[{key:R.DesktopSettings,menuItems:this._getMenuItems(R.DesktopSettings)}],l=[];l.push.apply(l,this._getMenuItems(R.HelpAndAbout)),!e&&o.default.getS4LUiFeatures().showReportAProblemInDesktopOverflow&&l.push.apply(l,this._getMenuItems(R.ReportProblem)),T.default.isSplitViewSupported()&&l.push.apply(l,this._getMenuItems(R.SplitView)),l.push.apply(l,this._getMenuItems(R.HotKeys)),n.isEmpty(l)||r.push({key:R.DesktopRemainder,menuItems:l}),r.push({key:R.SignOut,menuItems:this._getMenuItems(R.SignOut),menuTextStyles:v.default.themeStylesForTheme(s).destructiveTextColorStyle}),_.default.showGroupWithOptions({id:D,config:a,getMenuGroups:()=>r,handleMenuCommand:e=>this._onHandleMenuCommand(e,t),cancelButtonTitleIOS:d.getString("Global.CancelLabel"),rootViewId:t,invokingEvent:i})}}static dismissOptionsMenu(e){_.default.dismiss(D,e)}static _getMenuItems(e){const t=S.default.isChild();switch(e){case R.MobileSettings:const e=[{text:d.getString("DesktopProfileMenu.AppSettingsTitle"),command:I}];return a.UICapabilities.avSettingsSupported()&&e.push({text:d.getString("DesktopProfileMenu.AudioVideoSettingsTitle"),command:w}),e;case R.DesktopSettings:return[{text:d.getString("UserSettingsPanel.SettingsTitle"),command:A,shortcut:l.KeyboardShortcut.OpenAppSettings}];case R.SplitView:return[{text:h.default.isUsingSplitViewNoSubscription()?d.getString("UserSettingsPanel.DisableSplitViewMode"):d.getString("UserSettingsPanel.EnableSplitViewMode"),command:k,disabled:s.default.CallingStore.hasConnectedCalls()}];case R.HotKeys:return[{text:d.getString("KeyboardShortcuts.Title2"),command:L,shortcut:l.KeyboardShortcut.OpenKeyboardShortcuts}];case R.HelpAndAbout:return[{text:d.getString("MyProfilePanel.HelpAndFeedbackButtonTitle"),command:N}];case R.ReportProblem:return[{text:d.getString("MyProfilePanel.ReportAProblemButtonTitle"),command:M,shortcut:l.KeyboardShortcut.SendFeedback}];case R.Feedback:return t?[]:[{text:d.getString("MyProfilePanel.HelpAndFeedbackButtonTitle"),command:N},{text:d.getString("MyProfilePanel.ReportAProblemButtonTitle"),command:M},{text:d.getString("MyProfilePanel.RateUsButtonTitle"),command:E}];case R.SignOut:return[{text:d.getString("MyProfilePanel.SignOutButtonTitle"),command:x}]}return[]}}t.default=B,B._onHandleMenuCommand=(e,t)=>{const i=b.default.newCauseId();switch(c.log(l.LogTraceArea.Navigation,"DesktopOverflowHelper._onHandleMenuCommand causeId: "+i),e){case I:u.default.navigateToRootDesktopSettingsGroup(g.SettingsGroup.AppSettings,t,i);break;case A:c.track(new C.SettingsTelemetry(l.SettingsOrigin.DesktopOverflowMenu)),setTimeout((()=>u.default.navigateToDesktopSettings(t,i)),100);break;case k:P.default.toggleSplitView(i);break;case L:u.default.navigateToDesktopSettingsGroup(g.SettingsGroup.HotKeys,t,i);break;case w:s.default.CallNavigationHelper.navigateToAVRootDesktopSettings(t,i);break;case N:c.track(new m.NavigationHelpAndFeedback(p.NavigationSettingsItem.HelpAndFeedback,p.NavigationSettingsOrigin.DesktopOverflowMenu)),u.default.navigateToRootDesktopSettingsGroup(g.SettingsGroup.HelpAndFeedback,t,i);break;case M:c.track(new m.NavigationHelpAndFeedback(p.NavigationSettingsItem.ReportAProblem,p.NavigationSettingsOrigin.DesktopOverflowMenu)),r.dismissAll(),f.default.reportProblem(!0,t,void 0,void 0,p.NavigationSettingsOrigin.DesktopOverflowMenu);break;case E:c.track(new m.NavigationHelpAndFeedback(p.NavigationSettingsItem.RateUs,p.NavigationSettingsOrigin.DesktopOverflowMenu)),f.default.openFeedbackUrl(o.default.getConfigSettings().feedbackAndProblemGoParam.rating,d.getString("MyProfilePanel.RateUsButtonTitle"),t);break;case x:y.default.showSignOutConfirmation(l.LogoutReason.Settings,t);case _.SXActionMenuCancel:}}},47920:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=(i(78045),i(89391)),s=i(94224),a=i(98278),r=i(77381),l=i(72822),c=i(10167),d=i(46096),u=i(72146),g=i(31733),h=i(36237),p=i(48650),m=i(33754),S=i(44285),C=i(93974),f=i(36699),y=i(64723),_=i(65788),v=i(18078),b=i(4735),T=i(17093),P=i(95691),A=i(24148),k=i(94021),I=i(38980),w=i(70523),N=i(82445),M=i(73714),E=i(53374);class x extends r.default{constructor(){super(...arguments),this._electronSubscriptions=[],this._navigateToMandatoryUpdatePage=()=>{b.default.navigateToForcedUpgradeScreen()},this._navigateToAboutPage=()=>{const e=E.default.newCauseId();h.log(d.LogTraceArea.Navigation,"RootCompositeNavigationView._navigateToAboutPage causeId: "+e),b.default.closeGenericDesktopModal(e,this._getRootViewId()),b.default.navigateToRootDesktopSettingsGroup(T.SettingsGroup.About,this._getRootViewId(),e)},this._navigateToSettings=()=>{p.default.navigateToSettings()},this._navigateToAVSettings=()=>{const e=E.default.newCauseId();h.log(d.LogTraceArea.Navigation,"RootCompositeNavigationView._navigateToAVSettings causeId: "+e),b.default.closeGenericDesktopModal(e,this._getRootViewId()),s.default.CallNavigationHelper.navigateToAVRootDesktopSettings(this._getRootViewId(),e)},this._navigateToMeControl=()=>{const e=E.default.newCauseId();h.log(d.LogTraceArea.Navigation,"RootCompositeNavigationView._navigateToMeControl causeId: "+e),b.default.closeGenericDesktopModal(e,this._getRootViewId()),b.default.navigateToMeControl(this._getRootViewId(),e)},this._navigateToProfile=()=>{const e=E.default.newCauseId();h.log(d.LogTraceArea.Navigation,"RootCompositeNavigationView._navigateToAVSettings causeId: "+e),b.default.closeGenericDesktopModal(e,this._getRootViewId()),b.default.navigateToMyProfile(this._getRootViewId(),d.ProfileOpenOrigin.Menu)},this._navigateToSearch=e=>{p.default.navigateToSearch(e)},this._navigateToFeedback=()=>{p.default.navigateToFeedback(),u.default.isSetupWizardCompleted(!1)||(u.default.setIsSetupWizardCompleted(),I.default.track(new k.BugReportedInWizard(l.DialogNavOrigin.Onboarding)))},this._navigateToSupport=()=>{const e=g.getTelemetryCorrelationId();h.track(new A.NavigationHelpAndFeedback(P.NavigationSettingsItem.GoToSupport,P.NavigationSettingsOrigin.ApplicationMenu,e)),this._openHelpUrlWithTrackingParams(o.default.getConfigSettings().helpGoParam.supportArticles,m.getString("MyProfilePanel.GetHelpTitle"),"menu.support",e)},this._navigateToStatus=()=>{const e=g.getTelemetryCorrelationId();h.track(new A.NavigationHelpAndFeedback(P.NavigationSettingsItem.SkypeStatus,P.NavigationSettingsOrigin.ApplicationMenu,e)),this._openHelpUrlWithTrackingParams(o.default.getConfigSettings().helpGoParam.skypeStatus,m.getString("MyProfilePanel.SkypeStatusButtonTitle"),"menu.status",e)},this._navigateToSkypeURI=e=>{M.default.getNavigationActionForDeepLink(e,d.NavigationConversationOrigin.ElectronUri,a.MainRootViewId).then((t=>{v.default.isUserLoggedIn()&&C.default.isPartnerUri(e)?h.track(new _.MeetNowUriReceivedEvent(e)):v.default.isUserLoggedIn()&&S.MeetNowHelpers.isJoinOrCreateFlow(null==t?void 0:t.intent)&&f.default.beginTrackingJoinMeetNow(y.MeetNowOrigin.JoinLinkDeeplink),t&&t.action()}))},this._startNewConversation=e=>{p.default.startNewConversation(e)},this._startNewGroupConversation=e=>{p.default.startNewGroupConversation(e)},this._startNewCall=()=>{const e=E.default.newCauseId();h.log(d.LogTraceArea.Navigation,"RootCompositeNavigationView._startNewCall,  causeId: "+e),b.default.navigateToQuickCallPanel(e,this._getRootViewId())},this._signOut=()=>{w.default.showSignOutConfirmation(d.LogoutReason.DesktopMenu,a.MainRootViewId)}}componentDidMount(){super.componentDidMount(),this._electronSubscriptions.push(c.default.onMandatoryUpdate.subscribe(this._navigateToMandatoryUpdatePage),c.default.onNavigateToAboutPage.subscribe(this._navigateToAboutPage),c.default.onNavigateToSettings.subscribe(this._navigateToSettings),c.default.onNavigateToAVSettings.subscribe(this._navigateToAVSettings),c.default.onNavigateToProfile.subscribe(this._navigateToProfile),c.default.onNavigateToMeControl.subscribe(this._navigateToMeControl),c.default.onNavigateToSearch.subscribe((()=>{this._navigateToSearch(d.SearchPanelInitiator.ElectronMenu)})),c.default.onNavigateToFeedback.subscribe(this._navigateToFeedback),c.default.onNavigateToSkypeURI.subscribe(n.debounce(this._navigateToSkypeURI,o.default.getS4LCMCFeaturesNoSubscription().electronNavigationDebounce)),c.default.onNewConversation.subscribe((()=>{this._startNewConversation(d.NavigationConversationOrigin.AppMenu)})),c.default.onNewGroupConversation.subscribe((()=>{this._startNewGroupConversation(d.NavigationConversationOrigin.AppMenu)})),c.default.onNewCall.subscribe(this._startNewCall),c.default.onSignOut.subscribe(this._signOut),c.default.onNavigateToSupport.subscribe(this._navigateToSupport),c.default.onNavigateToStatus.subscribe(this._navigateToStatus))}componentWillUnmount(){super.componentWillUnmount(),n.each(this._electronSubscriptions,(e=>{e.unsubscribe()})),this._electronSubscriptions=[]}render(){return null}_openHelpUrlWithTrackingParams(e,t,i,n){let o=N.addSsoFlagToUrl(e,!0);o=g.addCommonTrackingParams(o,!0,!0);const s={tcg:n};b.default.navigateToHelpAndFeedbackLink(o,i,t,a.MainRootViewId,s)}}t.default=x},35933:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const n=i(19784),o=i(89391),s=i(37490),a=i(33754);t.show=function(e){s.dismissAll();const t=a.getString("FilePicker.LimitExceeded"),i=a.getString("FilePicker.LimitExceededContent",{value:o.default.getS4LMessagingFeaturesNoSubscription().limitForFilePicker});n.default.showOKAlert(t,i,e)}},26651:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(31844),o=i(4336),s=i(30124),a=i(29130);t.default=class{constructor(e){this._screenWidth=a.default.getWidth(e),this._screenHeight=a.default.getHeight(e),this._isLandscape=a.default.getDeviceOrientation(e)===n.DeviceOrientation.Landscape,this._isUsingStackNavigationContext=s.default.isUsingStackNavigationContext()}getAvatarWidth(){return this._isUsingStackNavigationContext?this._isLandscape?.4*this._screenHeight:this._screenWidth:o.DefaultWidthForNewProfile}getAvatarHeight(){return this._isUsingStackNavigationContext?Math.min(this._screenWidth,.4*this._screenHeight):o.DefaultWidthForNewProfile}maybeWrapAvatar(e){return e}}},25728:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(1706),s=i(63413),a=i(71908),r=i(71830),l=i(984),c=i(52262),d=i(33754),u=i(27683),g=i(93194);t.default=class{static safelyRemovePersonFromConversation(e,t,i,n,o){const s=c.default.getDisplayName(t)||d.getString("Notifications.UnknownUserShort"),a={anchor:n,buttons:[{text:d.getString("RemoveUserDialog.RemoveButtonLabel"),command:"remove"}],destructiveButtonIndex:0};a.message=d.getString("RemoveUserDialog.ConversationContent",{userDisplayName:s}),g.default.showWithActionMenuConfig({options:a,callback:n=>this._handleActionSheetCommands(n,t,e,i),useAlertForDesktop:!0,useAlertForMobile:!1,rootViewId:o,invokingEvent:void 0})}static isSendImCapable(e){if(!e.isOneOnOne())return e.isCurrentUserMember();const t=e.getOtherPartyMri();if(!t)return!1;if(s.default.isMriBlocked(t))return!1;if(r.isAgent(t)){const e=o.default.getAgentDescriptionForMri(t);if(!e.isUnknown){return n.filter(e.capabilities,(e=>"im.send"===e)).length>0&&n.indexOf(l.default.dangerousGetContactMriListMutable(),t)>=0}}return!r.isPhoneMri(t)||void 0===u.default.getPossibleExtension(t,!0)}static _handleActionSheetCommands(e,t,i,n){switch(e){case"remove":a.removeParticipantFromConversation(t,i,n);case g.SXActionMenuCancel:}}}},88117:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(90239),a=i(36400),r=i(10117),l=i(15877),c=i(30124),d=i(81760),u=i(11010),g=i(11828),h=i(18037),p=i(67977),m=i(92772),S=(0,l.lazyProperties)({userPresent:()=>o.Styles.createTextStyle({backgroundColor:d.Color.available}),userAway:()=>o.Styles.createTextStyle({backgroundColor:d.Color.away}),userDnd:()=>o.Styles.createTextStyle({backgroundColor:d.Color.red}),userInvisible:()=>o.Styles.createTextStyle({backgroundColor:d.Color.gray300}),userIdle:()=>o.Styles.createTextStyle({backgroundColor:d.Color.available})});class C{static getStyles(e,t){let i,s,a=e+"_"+(n.isUndefined(t)?"none":t);if(C._cachedIconStyles[a])return C._cachedIconStyles[a];e<=p.UserIconSize.Size24?(i=p.PresenceIconSize.Size8,s=-2):e===p.UserIconSize.Size64?(i=p.PresenceIconSize.Size14,s=e/8-7):e>=p.UserIconSize.Size100?(i=p.PresenceIconSize.Size15,s=e/8-7):(i=Math.min(10,Math.floor(e/4)),s=e>=p.UserIconSize.Size60?i/5:-1);return C._cachedIconStyles[a]={containerStyle:o.Styles.createViewStyle({width:e,height:e+2,justifyContent:"center",overflow:"visible"}),iconStyle:o.Styles.createViewStyle({width:e,height:e,alignItems:"center"}),iconRoundedStyle:o.Styles.createViewStyle({width:e,height:e,alignItems:"center",borderRadius:Math.ceil(e/2)}),iconRoundedRectStyle:o.Styles.createViewStyle({width:e,height:e,alignItems:"center",borderRadius:n.isUndefined(t)?Math.ceil(e/6):t}),image:o.Styles.createImageStyle({width:e,height:e,borderRadius:e/2}),imageRoundedRect:o.Styles.createImageStyle({width:e,height:e,borderRadius:n.isUndefined(t)?Math.ceil(e/6):t}),userStatus:o.Styles.createViewStyle({position:"absolute",bottom:s+2,right:s,borderRadius:(i+2)/2,borderColor:d.Color.white,borderStyle:"solid",borderWidth:1,width:i+2,height:i+2,alignItems:"center",justifyContent:"center"},!1),userStatusHover:o.Styles.createViewStyle({borderRadius:(i+2)/2,width:i+2,height:i+2,alignItems:"center",justifyContent:"center"},!1),privateConversationBadge:o.Styles.createViewStyle({position:"absolute",bottom:0,right:0,borderRadius:21,borderColor:d.Color.white,borderStyle:"solid",borderWidth:1,width:42,height:42,alignItems:"center",justifyContent:"center"},!1),presenceSize:i},C._cachedIconStyles[a]}static getFontSizeStyles(e,t){const i=Math.ceil(e/(e<=p.UserIconSize.Size40?3:4));let n=C._cachedFontSizeStyles[i];return n||(n=o.Styles.createTextStyle({fontSize:i,font:u.default.font.uiDisplayBold,color:d.Color.white},!1),C._cachedFontSizeStyles[i]=n),[n,o.Styles.createTextStyle({color:t},!1)]}static getBlockedOverlayStyles(e){const t=Math.min(18,Math.floor(e/3));if(C._cachedBlockedOverlayStyles[t])return C._cachedBlockedOverlayStyles[t];return C._cachedBlockedOverlayStyles[t]={blockedStyle:o.Styles.createViewStyle({position:"absolute",bottom:0,right:0,borderRadius:(t+4)/2,backgroundColor:d.Color.white,borderColor:d.Color.white,borderStyle:"solid",borderWidth:2,width:t+4,height:t+4,alignItems:"center",justifyContent:"center"}),blockedSize:t},C._cachedBlockedOverlayStyles[t]}static getBackgroundColor(e){return h.default.useAccessibleThemeNoSubscription()?d.Color.accessibleBackground:c.default.isUsingStackNavigationContextNoSubscription()?e?d.Color.gray400:d.Color.gray50:e?d.Color.gray400:d.Color.gray100}static getCachedBackgroundColorStyle(e,t){let i;return i=e||this.getBackgroundColor(t),this._backgroundColorStyleCache[i]||(this._backgroundColorStyleCache[i]=o.Styles.createViewStyle({backgroundColor:i})),this._backgroundColorStyleCache[i]}static getCachedBorderColorStyle(e,t){e||(e=d.Color.blue);const i=e+"_width"+(t?"1":"2");return this._borderColorStyleCache[i]||(this._borderColorStyleCache[i]=o.Styles.createViewStyle({borderColor:e,borderWidth:t?1:2,borderStyle:"solid"})),this._borderColorStyleCache[i]}static getCachedIconColorStyle(e){return e||(e=d.Color.blue),this._iconColorStyleCache[e]||(this._iconColorStyleCache[e]=o.Styles.createTextStyle({color:e})),this._iconColorStyleCache[e]}static getIconColor(e){return e||(e=d.Color.blue),e}static getIconBackgroundColor(e,t,i){return t?i?d.Color.gray50:d.Color.gray400:e||d.Color.blue}static getCachedPresenceBorderColorStyle(e){return this._cachedPresenceBorderStyles[e]||(this._cachedPresenceBorderStyles[e]=o.Styles.createViewStyle({borderColor:e})),this._cachedPresenceBorderStyles[e]}static renderPresenceIcon(e,t,i,o){if(!n.isUndefined(e))return this.getPresenceIcon(e,t.userStatus,t.presenceSize,i,o)}static getPresenceIcon(e,t,i,l,c){let u,h;if(n.isUndefined(e))return;switch(m.maskedUserStatus(e)){case s.UserStatus.Online:u=S.userPresent;break;case s.UserStatus.Busy:u=S.userDnd,h=g.SkypeIcon.PresenceDND;break;case s.UserStatus.Away:u=S.userAway,h=g.SkypeIcon.PresenceAway;break;case s.UserStatus.Offline:case s.UserStatus.Hidden:u=S.userInvisible,h=g.SkypeIcon.PresenceInvisible;break;case s.UserStatus.Idle:u=S.userIdle,h=g.SkypeIcon.PresenceInvisible;break;default:return}const p=[t,u];l&&p.push(C.getCachedPresenceBorderColorStyle(l));const f=h?o.createElement(r.default,{icon:h,size:i,color:d.Color.white}):void 0;return o.createElement(a.HoverableView,{style:p,title:c,key:"presence",importantForAccessibility:o.Types.ImportantForAccessibility.NoHideDescendants,accessibilityTraits:o.Types.AccessibilityTrait.None,tabIndex:-1},f)}static getIconSize(e=p.AvatarIconSize.Size40){switch(e){case p.AvatarIconSize.Size24:return{user:p.UserIconSize.Size24,conversation:p.ConversationIconSize.Size24};case p.AvatarIconSize.Size36:return{user:p.UserIconSize.Size36,conversation:p.ConversationIconSize.Size36};case p.AvatarIconSize.Size44:return{user:p.UserIconSize.Size44,conversation:p.ConversationIconSize.Size44};case p.AvatarIconSize.Size50:return{user:p.UserIconSize.Size50,conversation:p.ConversationIconSize.Size50};case p.AvatarIconSize.Size60:return{user:p.UserIconSize.Size60,conversation:p.ConversationIconSize.Size60};case p.AvatarIconSize.Size64:return{user:p.UserIconSize.Size64,conversation:p.ConversationIconSize.Size64};default:case p.AvatarIconSize.Size40:return{user:p.UserIconSize.Size40,conversation:p.ConversationIconSize.Size40}}}}t.default=C,C._backgroundColorStyleCache={},C._borderColorStyleCache={},C._iconColorStyleCache={},C._cachedPresenceBorderStyles={},C._cachedIconStyles={},C._cachedFontSizeStyles={},C._cachedBlockedOverlayStyles={}},90070:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HubCommands=void 0;const n=i(89391),o=i(49758),s=(i(11930),i(58031)),a=i(31761),r=i(37490),l=i(52262),c=i(46096),d=(i(11375),i(13873)),u=i(46195),g=i(36237),h=i(35114),p=i(33754),m=i(44285),S=i(64723),C=i(18078),f=i(4735),y=i(17093),_=i(95691),v=i(10541),b=i(16392),T=i(93194),P=i(40363),A=i(11828),k=i(53374);t.HubCommands={AddConversationGroupCommand:"group",AddConversationModeratedGroupCommand:"moderatedgroup",AddConversation1on1Command:"1on1",AddConversationPrivateCommand:"private",InviteCommand:"contact",AddBotCommand:"bot",OpenSuperComposer:"supercomposer",NewGroupCallCommand:"newGroupCall",NewMeetNowCommand:"newMeetNow",NewCellularSmsConversationCommand:"newCellularSmsConversationCommand",AddContactCommand:"addcontact",Cancel:"cancel"};class I{static actionButtonForHubTab(e,t,i,n){switch(e){case y.HubTab.Recents:return{icon:i||P.default.getPlatformType()!==c.PlatformType.Android?A.SkypeIcon.Compose:A.SkypeIcon.Topic,title:p.getString("HubHeaderPanel.NewConversationTitle"),onPressCallback:I._onSuperComposerClick};case y.HubTab.Calls:if(i)return{title:p.getString("PeopleList.PstnDialpadLabel"),icon:A.SkypeIcon.Dialpad,onPressCallback:I._onDialpadButtonClick,disabled:t};if(n)return;return{title:p.getString("QuickCallPanel.PanelHeaderNewCall"),icon:A.SkypeIcon.CallAdd,onPressCallback:I._onGroupCallButtonClick,disabled:t,ctaExperimentalUI:!0};case y.HubTab.People:let e;return e=I._onPeoplePlusButtonClickForNewMobileHub,{title:p.getString("Hub.AddContactsLabelGrouped"),icon:A.SkypeIcon.ContactAdd,onPressCallback:e}}}static secondaryActionButtonForHubTab(e,t,i){if(e===y.HubTab.Calls){if(i)return;return{title:p.getString("PeopleList.PstnDialpadLabel"),icon:A.SkypeIcon.Dialpad,onPressCallback:I._onDialpadButtonClick,disabled:t}}}static searchButtonForHubTab(e,t){const i=p.getString("HubHeaderPanel.SearchHubTitle"),n=t?p.getString("HubHeaderPanel.SearchHubAccessibilityLabel"):i;switch(e){case y.HubTab.Recents:return{title:i,accessibilityLabel:n,icon:A.SkypeIcon.Search,onPressCallback:I._onRecentSearchButtonClick};case y.HubTab.People:return{title:i,accessibilityLabel:n,icon:A.SkypeIcon.Search,onPressCallback:I._onPeopleSearchButtonClick};case y.HubTab.Calls:return{title:i,accessibilityLabel:n,icon:A.SkypeIcon.Search,onPressCallback:I._onCallsSearchButtonClick}}}static headerButtonLayoutForHubTab(e){return{leftControls:e.useTabletUI?this._getTabletLeftControls(e):this._getNewMobileHubLeftControls(e),rightControls:this._getNewMobileHubRightControls(e),centerControl:this._getGetCenterControl(e)}}static handleAddMenuCommand(e,t,i,n=!1,o=!1){this._onHandleAddMenuCommand({command:e,fromSuperComposer:n,modifier:o,anchor:t,rootViewId:i})}static accessibilityAnnouncementForTab(e){let t;switch(e){case y.HubTab.Recents:t=p.getString("Hub.RecentsTabTitle");break;case y.HubTab.Calls:t=p.getString("Hub.CallsTabTitle");break;case y.HubTab.People:t=p.getString("Hub.ContactsTabTitle");break;case y.HubTab.Notifications:t=p.getString("Notifications.Notify")}return t&&(t=p.getString("Global.ItemSelectedAccessibilityLabel",{text:t})),t}static _getTabletLeftControls(e){return this._getTabletSecondaryControls(e)}static _getTabletSecondaryControls(e){const t=[];return e.modernizeMobileTopOfTheScreen?(t.push(u.HeaderButtonType.Profile),t.push(u.HeaderButtonType.NameAndMoodText),t):(e.hubTab===y.HubTab.Recents&&e.enableHeartEntryPoint&&t.push(u.HeaderButtonType.Feedback),t)}static _getNewMobileHubLeftControls(e){const t=[];return e.hideAlertsButton||t.push(u.HeaderButtonType.Notifications),e.hubTab===y.HubTab.Recents&&e.enableHeartEntryPoint&&!e.modernizeMobileTabHeader&&t.push(u.HeaderButtonType.Feedback),e.modernizeMobileTopOfTheScreen&&(t.push(u.HeaderButtonType.Profile),t.push(u.HeaderButtonType.NameAndMoodText)),t}static _getNewMobileHubRightControls(e){const t=[];switch(e.hubTab){case y.HubTab.Recents:if(e.modernizeMobileTopOfTheScreen&&e.enableHeartEntryPoint&&t.push(u.HeaderButtonType.Feedback),t.push(u.HeaderButtonType.MeetNow),e.modernizeMobileTopOfTheScreen)break;e.mobileHubFABEnabled?e.modernizeMobileTabHeader||t.push(u.HeaderButtonType.Search,u.HeaderButtonType.RecentsFilter):t.push(u.HeaderButtonType.Action);break;case y.HubTab.People:if(e.modernizeMobileTopOfTheScreen)break;e.mobileHubFABEnabled?e.modernizeMobileTabHeader||(t.push(u.HeaderButtonType.Search),t.push(u.HeaderButtonType.ContactsFilter)):t.push(u.HeaderButtonType.Action);break;case y.HubTab.Calls:if(t.push(u.HeaderButtonType.MeetNow),e.modernizeHubFabs&&t.push(u.HeaderButtonType.Call),e.modernizeMobileTopOfTheScreen)break;e.mobileHubFABEnabled?e.modernizeMobileTabHeader||t.push(u.HeaderButtonType.Search):t.push(u.HeaderButtonType.Action);break;case y.HubTab.Notifications:t.push(u.HeaderButtonType.NotificationsSettings),e.modernizeMobileTabHeader&&t.push(u.HeaderButtonType.MeetNow)}return t}static _getGetCenterControl(e){if(!e.modernizeMobileTopOfTheScreen)return e.hubTab!==y.HubTab.Recents||e.modernizeMobileTopOfTheScreen?u.HeaderButtonType.Title:u.HeaderButtonType.Profile}static _onSearchClick(e){const t=k.default.newCauseId();g.log(c.LogTraceArea.Navigation,"HubUIUtils._onSearchClick causeId: "+t);let i=c.SearchPanelInitiator.Unknown;switch(e){case y.HubTab.Recents:i=c.SearchPanelInitiator.RecentsListSearchButton;break;case y.HubTab.People:i=c.SearchPanelInitiator.ContactsPanel;break;case y.HubTab.Calls:i=c.SearchPanelInitiator.QuickCallPanel}f.default.navigateToSearch({searchOrigin:i},t)}static _showAddTouchMenu(e,t,i,n){I._registerMobileDismissalHandler(n);let a=[];if(e===y.HubTab.People){if(a=I._getContactsAddMenuItems(),a=I._getNewContactsPanelContactsMenuItems(),1===a.length)return void f.default.navigateToAddContactPanel(s.AddContactPanelOrigin.HubTabPeople,b.StackNavigationDirection.Present,i)}else a=I._getNewAddMenuItems();const r={anchor:n,buttons:a,cancelButtonTitleIOS:p.getString("Global.CancelLabel")};g.track(new o.BotInteraction(c.BotsInteraction.ClickPlusMenu)),t.show(r,(t=>I._onHandleAddMenuCommand({command:t,currentHubTab:e,anchor:n,rootViewId:i})))}static _getNewAddMenuItems(){const e=[];return n.default.getS4LMessagingFeatures().showNewChatFirstInPlusMenu?e.push({text:p.getString("Hub.New1on1ChatLabel"),command:t.HubCommands.AddConversation1on1Command},{text:p.getString("Hub.NewGroupChatLabel"),command:t.HubCommands.AddConversationGroupCommand}):e.push({text:p.getString("Hub.NewGroupChatLabel"),command:t.HubCommands.AddConversationGroupCommand},{text:p.getString("Hub.New1on1ChatLabel"),command:t.HubCommands.AddConversation1on1Command}),e.push({text:p.getString("Hub.NewPrivateChatLabel"),command:t.HubCommands.AddConversationPrivateCommand}),n.default.getS4LCaapFeatures().botDiscoveryEnabled&&e.push({text:p.getString("Hub.FindBotLabel"),command:t.HubCommands.AddBotCommand}),e}static _getNewContactsPanelContactsMenuItems(){const e=[];return e.push({text:p.getString("Hub.AddContactMenuLabel"),command:t.HubCommands.AddContactCommand}),n.default.getS4LCaapFeatures().botDiscoveryEnabled&&e.push({text:p.getString("Hub.AddBotMenuLabel"),command:t.HubCommands.AddBotCommand}),e}static _getContactsAddMenuItems(){const e=[];return n.default.getS4LCaapFeatures().botDiscoveryEnabled&&e.push({text:p.getString("Hub.FindBotLabel"),command:t.HubCommands.AddBotCommand}),e}static _registerMobileDismissalHandler(e){}static _showJoinLinkMenu(e){const t=C.default.getSkypeMri(),i=l.default.getDisplayName(t);f.default.navigateToInviteShare(t,i,h.InviteLinkOrigin.NewChatInvite,e)}}t.default=I,I._onSuperComposerClick=(e,i,n,o)=>{const s=i||void 0,a=s?s.shiftKey||s.metaKey:void 0;I._onHandleAddMenuCommand({command:t.HubCommands.OpenSuperComposer,anchor:o,modifier:a,rootViewId:e})},I._onRecentSearchButtonClick=(e,t)=>{I._onSearchClick(y.HubTab.Recents)},I._onPeoplePlusButtonClickForNewMobileHub=(e,t,i,n)=>{I._onPlusButtonClick(y.HubTab.People,e,i,n,t)},I._onPeopleSearchButtonClick=(e,t)=>{I._onSearchClick(y.HubTab.People)},I._onCallsSearchButtonClick=(e,t,i,n)=>{I._onSearchClick(y.HubTab.Calls)},I._onPlusButtonClick=(e,t,i,n,o)=>{const s=i||{show:(e,i)=>{T.default.showWithActionMenuConfig({options:e,callback:i,maintainAnchor:!0,rootViewId:t,invokingEvent:o})}};I._showAddTouchMenu(e,s,t,n)},I._onSuperComposerGroupCallButtonClick=e=>{const t=k.default.newCauseId();g.log(c.LogTraceArea.Navigation,"HubUIUtils._onSuperComposerGroupCallButtonClick, causeId: "+t),f.default.navigateToQuickCallPanelWithParams({newGroup:!0,navigationDirection:b.StackNavigationDirection.Push,causeId:t},e)},I._onDialpadButtonClick=(e,t,i,n)=>{I._registerMobileDismissalHandler(n);const o=k.default.newCauseId();g.log(c.LogTraceArea.Navigation,"HubUIUtils._onDialpadButtonClick, causeId: "+o),f.default.navigateToPSTNDialerWithParams({causeId:o,navigationSource:c.DialerNavigationSource.QuickCallPanelFab},e)},I._onGroupCallButtonClick=(e,t,i,n)=>{const o=k.default.newCauseId();g.log(c.LogTraceArea.Navigation,"HubUIUtils._onGroupCallButtonClick, causeId: "+o),I._registerMobileDismissalHandler(n),f.default.navigateToQuickCallPanelWithParams({newGroup:!0,causeId:o},e)},I._onHandleAddMenuCommand=e=>{const i=k.default.newCauseId();switch(g.log(c.LogTraceArea.Navigation,"HubUIUtils._onHandleAddMenuCommand, command: "+e.command+" fromSuperComposer: "+e.fromSuperComposer+" modifier: "+e.modifier+" causeId: "+i),g.track(new d.HubPlusButtonEvent(e.command)),r.dismissAll(),I._registerMobileDismissalHandler(e.anchor),e.command){case t.HubCommands.Cancel:return;case t.HubCommands.OpenSuperComposer:const{enableNewConversationCreation:i}=n.default.getS4LMessagingFeaturesNoSubscription(),{enableModeratedGroupChats:r}=n.default.getS4LMessagingFeatures();(i?new a.default({peopleType:v.PeopleType.All,filterPeopleType:v.FilterType.None,navigationOrigin:c.NavigationConversationOrigin.Recents,wizardSteps:[_.WizardSteps.setConvParticipants]}):new a.default({creating1on1Conversation:!0,useSuperComposerFor1on1Conversation:!0,peopleType:v.PeopleType.All,filterPeopleType:v.FilterType.None,isSingleContactSelect:!0,showModeratedGroupOption:e.modifier||r,navigationOrigin:c.NavigationConversationOrigin.SuperComposer,wizardSteps:[_.WizardSteps.setConvParticipants]})).start(e.rootViewId);break;case t.HubCommands.AddConversationGroupCommand:new a.default({navigationOrigin:c.NavigationConversationOrigin.NewGroup,peopleType:v.PeopleType.All,filterPeopleType:v.FilterType.GroupCapable,presentedFromSuperComposer:e.fromSuperComposer}).start(e.rootViewId);break;case t.HubCommands.AddConversationModeratedGroupCommand:new a.default({navigationOrigin:c.NavigationConversationOrigin.NewModeratedGroup,peopleType:v.PeopleType.All,filterPeopleType:v.FilterType.GroupCapable,presentedFromSuperComposer:e.fromSuperComposer}).start(e.rootViewId);break;case t.HubCommands.AddConversation1on1Command:new a.default({creating1on1Conversation:!0,useSuperComposerFor1on1Conversation:!1,peopleType:v.PeopleType.All,filterPeopleType:v.FilterType.None,isSingleContactSelect:!0,navigationOrigin:c.NavigationConversationOrigin.NewChat,presentedFromSuperComposer:e.fromSuperComposer,wizardSteps:[_.WizardSteps.setConvParticipants]}).start(e.rootViewId);break;case t.HubCommands.AddConversationPrivateCommand:new a.default({creating1on1Conversation:!0,useSuperComposerFor1on1Conversation:!1,peopleType:v.PeopleType.AllExcludingBots,filterPeopleType:v.FilterType.None,isSingleContactSelect:!0,navigationOrigin:c.NavigationConversationOrigin.NewPrivateChat,presentedFromSuperComposer:e.fromSuperComposer,wizardSteps:[_.WizardSteps.setConvParticipants]}).start(e.rootViewId);break;case t.HubCommands.NewGroupCallCommand:e.fromSuperComposer?I._onSuperComposerGroupCallButtonClick(e.rootViewId):I._onGroupCallButtonClick(e.rootViewId);break;case t.HubCommands.InviteCommand:I._showJoinLinkMenu(e.rootViewId);break;case t.HubCommands.AddContactCommand:f.default.navigateToAddContactPanel(s.AddContactPanelOrigin.HubTabPeople,b.StackNavigationDirection.Present,e.rootViewId);break;case t.HubCommands.AddBotCommand:g.track(new o.BotInteraction(c.BotsInteraction.NavigateToBotStore)),f.default.navigateToBotDiscovery(e.fromSuperComposer?b.StackNavigationDirection.Push:b.StackNavigationDirection.Present,e.rootViewId);break;case t.HubCommands.NewCellularSmsConversationCommand:new a.default({creating1on1Conversation:!0,useSuperComposerFor1on1Conversation:!1,peopleType:v.PeopleType.AllWithPhoneNumbers,filterPeopleType:v.FilterType.CallCapable,isSingleContactSelect:!0,navigationOrigin:c.NavigationConversationOrigin.NewChat,presentedFromSuperComposer:e.fromSuperComposer,wizardSteps:[_.WizardSteps.setConvParticipants],createCellularSmsConversation:!0}).start(e.rootViewId);break;case t.HubCommands.NewMeetNowCommand:m.MeetNowHelpers.showNewMeetNow(S.MeetNowOrigin.NewChatMobile)}}},48650:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(78045),s=i(16778),a=i(89391),r=i(98278),l=i(31761),c=i(46096),d=i(11375),u=i(31733),g=i(36237),h=i(72490),p=i(33754),m=i(93486),S=i(4735),C=i(17093),f=i(30124),y=i(95691),_=i(24148),v=i(93818),b=i(95697),T=i(10541),P=i(82445),A=i(18037),k=i(97634),I=i(53374);class w{static registerKeyboardHandlers(){const e=w._registrationTokenCounter++;return this._registeredTokens.push(e),g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper.registerKeyboardHandlers token: "+e),this._keyboardHandlersRegistered||(g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper.registerKeyboardHandlers, registering handlers"),h.default.addHandler(c.KeyboardShortcut.OpenThemePicker,this._navigateToThemePicker),h.default.addHandler(c.KeyboardShortcut.OpenHelpInABrowser,this._openHelpInABrowser),h.default.addHandler(c.KeyboardShortcut.ToggleTheme,this._toggleLightOrDarkTheme),h.default.addHandler(c.KeyboardShortcut.SendFeedback,this._navigateToFeedback),h.default.addHandler(c.KeyboardShortcut.OpenContactsPanel,this._navigateToContactsPanel),h.default.addHandler(c.KeyboardShortcut.OpenNotificationPanel,this._navigateToNotificationsPanel),h.default.addHandler(c.KeyboardShortcut.OpenDialpad,this._openMainDialpad),h.default.addHandler(c.KeyboardShortcut.OpenKeyboardShortcuts,this._navigateToKeyboardShortcuts),h.default.addHandler(c.KeyboardShortcut.OpenAppSettings,this._navigateToSettings),h.default.addHandler(c.KeyboardShortcut.StartNewConversation,this._startNewConversation),h.default.addHandler(c.KeyboardShortcut.NewGroup,this._startNewGroupConversation),h.default.addHandler(c.KeyboardShortcut.Search,this._navigateToSearch),this._keyboardHandlersRegistered=!0),e}static unregisterKeyboardHandlers(e){g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper.unregisterKeyboardHandlers token: "+e),this._registeredTokens=n.remove(this._registeredTokens,(t=>t===e)),this._keyboardHandlersRegistered&&n.isEmpty(this._registeredTokens)&&(g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper.unregisterKeyboardHandlers, unregistering handlers"),h.default.removeHandler(c.KeyboardShortcut.OpenThemePicker,this._navigateToThemePicker),h.default.removeHandler(c.KeyboardShortcut.OpenHelpInABrowser,this._openHelpInABrowser),h.default.removeHandler(c.KeyboardShortcut.ToggleTheme,this._toggleLightOrDarkTheme),h.default.removeHandler(c.KeyboardShortcut.SendFeedback,this._navigateToFeedback),h.default.removeHandler(c.KeyboardShortcut.OpenContactsPanel,this._navigateToContactsPanel),h.default.removeHandler(c.KeyboardShortcut.OpenNotificationPanel,this._navigateToNotificationsPanel),h.default.removeHandler(c.KeyboardShortcut.OpenDialpad,this._openMainDialpad),h.default.removeHandler(c.KeyboardShortcut.OpenKeyboardShortcuts,this._navigateToKeyboardShortcuts),h.default.removeHandler(c.KeyboardShortcut.OpenAppSettings,this._navigateToSettings),h.default.removeHandler(c.KeyboardShortcut.StartNewConversation,this._startNewConversation),h.default.removeHandler(c.KeyboardShortcut.NewGroup,this._startNewGroupConversation),this._keyboardHandlersRegistered=!1)}static navigateToSettings(){this._navigateToSettings()}static navigateToSearch(e=c.SearchPanelInitiator.KeyboardShortcut){this._navigateToSearchWithOrigin(e)}static startNewConversation(e=c.NavigationConversationOrigin.KeyboardShortcut){this._startNewConversationWithOrigin(e)}static startNewGroupConversation(e=c.NavigationConversationOrigin.KeyboardShortcut){this._startNewGroupConversationWithOrigin(e)}static navigateToFeedback(){this._navigateToFeedback()}static _navigateToSearchWithOrigin(e){const t=I.default.newCauseId();g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._navigateToSearch causeId: "+t),S.default.closeGenericDesktopModal(t,r.MainRootViewId);w._openInMainWindow(t,(i=>{S.default.navigateToSearch({searchOrigin:e},t),d.setFocusWithDelay(d.FocusEvent.SearchInput,0)}))}static _startNewConversationWithOrigin(e){const t=I.default.newCauseId();g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._startNewConversation causeId: "+t),S.default.closeGenericDesktopModal(t,r.MainRootViewId);w._openInMainWindow(t,(t=>{new l.default({creating1on1Conversation:!0,peopleType:T.PeopleType.All,filterPeopleType:T.FilterType.None,isSingleContactSelect:!0,navigationOrigin:e,wizardSteps:[y.WizardSteps.setConvParticipants]}).start(r.MainRootViewId)}))}static _startNewGroupConversationWithOrigin(e){const t=I.default.newCauseId();g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._startNewGroupConversation causeId: "+t),S.default.closeGenericDesktopModal(t,r.MainRootViewId);w._openInMainWindow(t,(t=>{new l.default({navigationOrigin:e,peopleType:T.PeopleType.All,filterPeopleType:T.FilterType.GroupCapable}).start(r.MainRootViewId)}))}static _openInMainWindow(e,t){g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._maybeOpenMainWindow causeId: "+e),this._intOpenInWindow(e,!0,t)}static _openInCurrentWindow(e,t){g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._openInCurrentWindow causeId: "+e),this._intOpenInWindow(e,!1,t)}static _intOpenInWindow(e,t,i){g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._intOpenInWindow causeId: "+e),f.default.isUsingSplitViewNoSubscription()?o.default.getLastActiveSplitView().then((n=>{const o=n&&n.isActive?n.id:r.MainRootViewId;i(o),o!==r.MainRootViewId&&t&&S.default.openMainWindow(!1,o,e)}),(t=>{g.log(c.LogTraceArea.Navigation,"getLastActiveSplitView() failed. error: "+t+" causeId: "+e),i(r.MainRootViewId)})):i(r.MainRootViewId)}}w._keyboardHandlersRegistered=!1,w._registrationTokenCounter=1,w._registeredTokens=[],w._navigateToThemePicker=()=>{const e=I.default.newCauseId();g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._navigateToAVSettings causeId: "+e),S.default.closeGenericDesktopModal(e,r.MainRootViewId);return w._openInMainWindow(e,(t=>{S.default.navigateToDesktopSettingsGroup(C.SettingsGroup.ThemeSettings,t,e)})),!0},w._navigateToSearch=()=>(w._navigateToSearchWithOrigin(c.SearchPanelInitiator.KeyboardShortcut),!0),w._navigateToContactsPanel=()=>{const e=I.default.newCauseId();g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._navigateToContactsPanel causeId: "+e),S.default.closeGenericDesktopModal(e,r.MainRootViewId);return w._openInMainWindow(e,(t=>{S.default.navigateToContactsPanelInLeftNav(e),d.setFocusWithDelay(d.FocusEvent.Contacts,0)})),!0},w._navigateToNotificationsPanel=()=>{const e=I.default.newCauseId();g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._navigateToNotificationsPanel causeId: "+e),S.default.closeGenericDesktopModal(e,r.MainRootViewId);return w._openInMainWindow(e,(t=>{S.default.navigateToNotificationsPanelInLeftNav(e),d.setFocusWithDelay(d.FocusEvent.Notifications,0)})),!0},w._navigateToSettings=()=>{const e=I.default.newCauseId();g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._navigateToSettings causeId: "+e),S.default.closeGenericDesktopModal(e,r.MainRootViewId);return w._openInMainWindow(e,(t=>{g.track(new v.SettingsTelemetry(c.SettingsOrigin.Shortcut)),S.default.navigateToDesktopSettings(t,e)})),!0},w._startNewConversation=()=>(w._startNewConversationWithOrigin(c.NavigationConversationOrigin.KeyboardShortcut),!0),w._startNewGroupConversation=()=>(w._startNewGroupConversationWithOrigin(c.NavigationConversationOrigin.KeyboardShortcut),!0),w._openMainDialpad=()=>{const e=I.default.newCauseId();g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._openMainDialpad causeId: "+e),S.default.closeGenericDesktopModal(e,r.MainRootViewId);return w._openInMainWindow(e,(t=>{S.default.navigateToPSTNDialerWithParams({causeId:e,navigationSource:c.DialerNavigationSource.RootCompositeNavigationView},t)})),!0},w._navigateToFeedback=()=>{if(m.default.isChild())return!0;const e=I.default.newCauseId();g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._navigateToFeedback causeId: "+e);return w._openInCurrentWindow(e,(t=>{g.track(new _.NavigationHelpAndFeedback(y.NavigationSettingsItem.ReportAProblem,y.NavigationSettingsOrigin.ApplicationMenu)),S.default.closeGenericDesktopModal(e,t),b.default.reportProblem(!0,t)})),!0},w._openHelpInABrowser=()=>{const e=u.getTelemetryCorrelationId();g.track(new _.NavigationHelpAndFeedback(y.NavigationSettingsItem.GetHelp,y.NavigationSettingsOrigin.KeyboardShortcut,e)),g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._openHelpInABrowser");let t=P.addSsoFlagToUrl(a.default.getConfigSettings().helpGoParam.supportArticles,!0);t=u.addCommonTrackingParams(t,!0,!0);const i={tcg:e};return S.default.navigateToHelpAndFeedbackLink(t,"",p.getString("MyProfilePanel.GetHelpTitle"),r.MainRootViewId,i),!0},w._toggleLightOrDarkTheme=()=>{g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._toggleLightOrDarkTheme"),A.default.toggleLightOrDarkTheme();const e=k.isDarkTheme(A.default.colorThemeNoSubscription()),t=p.getString(e?"ColorThemeDialog.ShortcutThemeToggleDarkAccessible":"ColorThemeDialog.ShortcutThemeToggleLightAccessible");return s.Accessibility.announceForAccessibility(t),!0},w._navigateToKeyboardShortcuts=()=>{const e=I.default.newCauseId();g.log(c.LogTraceArea.Navigation,"KeyboardShortcutUIHelper._navigateToKeyboardShortcuts causeId: "+e),S.default.closeGenericDesktopModal(e,r.MainRootViewId);return w._openInCurrentWindow(e,(t=>{S.default.navigateToDesktopSettingsGroup(C.SettingsGroup.HotKeys,t,e)})),!0},t.default=w},72490:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardShortcuts=t.WindowsAndLinuxShortcutsWeb=t.WindowsShortcuts=t.WindowsAndLinuxShortcutsCommon=t.MacShortcutsWeb=t.MacShortcuts=t.MacShortcutsCommon=void 0;const n=i(96486),o=i(22306),s=i(78045),a=i(16778),r=i(19061),l=i(47447),c=i(98278),d=i(46096),u=i(66199),g=i(36237),h=i(47126),p=i(33754),m=i(78735),S=i(30124),C=i(40363),f="answerOrStartCall",y="addToCallOrConversation",_="toggleCameraOrStartCall";t.MacShortcutsCommon=[{shortcut:d.KeyboardShortcut.OpenNotificationPanel,keyCombination:{keyCode:h.default.O,shiftKey:!0,metaKey:!0}},{shortcut:d.KeyboardShortcut.OpenContactsPanel,keyCombination:{keyCode:h.default.C,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.SendFeedback,keyCombination:{keyCode:h.default.O,metaKey:!0,altKey:!0}},{shortcut:d.KeyboardShortcut.NavigateToRecents,keyCombination:{keyCode:h.default.ONE,altKey:!0}},{shortcut:d.KeyboardShortcut.NavigateToHistory,keyCombination:{keyCode:h.default.Y,metaKey:!0}},{shortcut:d.KeyboardShortcut.ShowConversationProfile,keyCombination:{keyCode:h.default.I,metaKey:!0}},{shortcut:d.KeyboardShortcut.AddPeopleToConversation,keyCombination:{keyCode:h.default.A,metaKey:!0,shiftKey:!0},shortcutAlias:y},{shortcut:d.KeyboardShortcut.StartVideoCall,keyCombination:{keyCode:h.default.K,metaKey:!0,shiftKey:!0},shortcutAlias:_},{shortcut:d.KeyboardShortcut.MarkAsUnread,keyCombination:{keyCode:h.default.U,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.ToggleLeftPanel,keyCombination:{keyCode:h.default.ONE,ctrlKey:!0,altKey:!0}},{shortcut:d.KeyboardShortcut.EditMessage,keyCombination:{keyCode:h.default.E,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.EnableMultipleSelectMessages,keyCombination:{keyCode:h.default.L,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.FocusMessageComposer,keyCombination:{keyCode:h.default.E,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.ToggleMicrophone,keyCombination:{keyCode:h.default.M,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.ToggleCamera,keyCombination:{keyCode:h.default.K,metaKey:!0,shiftKey:!0},shortcutAlias:_},{shortcut:d.KeyboardShortcut.AddPeopleToCall,keyCombination:{keyCode:h.default.A,metaKey:!0,shiftKey:!0},shortcutAlias:y},{shortcut:d.KeyboardShortcut.HangupOrRejectCall,keyCombination:{keyCode:h.default.H,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.AnnounceMuteStatus,keyCombination:{keyCode:h.default.M,metaKey:!0,shiftKey:!0,altKey:!0}},{shortcut:d.KeyboardShortcut.AnnounceSelfVideoOnOffStatus,keyCombination:{keyCode:h.default.K,metaKey:!0,shiftKey:!0,altKey:!0}},{shortcut:d.KeyboardShortcut.ArchiveConversation,keyCombination:{keyCode:h.default.E,metaKey:!0}},{shortcut:d.KeyboardShortcut.CallDebugPanel,keyCombination:{keyCode:h.default.D,metaKey:!0,shiftKey:!0}}],t.MacShortcuts=[...t.MacShortcutsCommon,{shortcut:d.KeyboardShortcut.OpenAppSettings,keyCombination:{keyCode:h.default.COMMA,metaKey:!0}},{shortcut:d.KeyboardShortcut.OpenHelpInABrowser,keyCombination:{keyCode:h.default.H,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.StartNewConversation,keyCombination:{keyCode:h.default.N,metaKey:!0}},{shortcut:d.KeyboardShortcut.OpenThemePicker,keyCombination:{keyCode:h.default.T,metaKey:!0}},{shortcut:d.KeyboardShortcut.ToggleTheme,keyCombination:{keyCode:h.default.T,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.TakeCallSnapshot,keyCombination:{keyCode:h.default.S,metaKey:!0}},{shortcut:d.KeyboardShortcut.OpenDialpad,keyCombination:{keyCode:h.default.TWO,metaKey:!0}},{shortcut:d.KeyboardShortcut.NewGroup,keyCombination:{keyCode:h.default.G,metaKey:!0}},{shortcut:d.KeyboardShortcut.ToggleGallery,keyCombination:{keyCode:h.default.G,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.StartAudioCall,keyCombination:{keyCode:h.default.R,metaKey:!0,shiftKey:!0},shortcutAlias:f},{shortcut:d.KeyboardShortcut.AcceptIncomingCall,keyCombination:{keyCode:h.default.R,metaKey:!0,shiftKey:!0},shortcutAlias:f},{shortcut:d.KeyboardShortcut.SendFile,keyCombination:{keyCode:h.default.F,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.NavigateToPreviousConversation,keyCombination:{keyCode:h.default.TAB,shiftKey:!0,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.NavigateToNextConversation,keyCombination:{keyCode:h.default.TAB,shiftKey:!1,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.ResizeVideoPreview,keyCombination:{keyCode:h.default.J,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.CloseSplitViewConversation,keyCombination:{keyCode:h.default.W,metaKey:!0}},{shortcut:d.KeyboardShortcut.Quit,keyCombination:{keyCode:h.default.Q,metaKey:!0}}],t.MacShortcutsWeb=[...t.MacShortcutsCommon,{shortcut:d.KeyboardShortcut.OpenAppSettings,keyCombination:{keyCode:h.default.COMMA,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.StartNewConversation,keyCombination:{keyCode:h.default.N,shiftKey:!0,altKey:!0}},{shortcut:d.KeyboardShortcut.OpenHelpInABrowser,keyCombination:{keyCode:h.default.H,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.OpenDialpad,keyCombination:{keyCode:h.default.TWO,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.NewGroup,keyCombination:{keyCode:h.default.G,metaKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.StartAudioCall,keyCombination:{keyCode:h.default.R,altKey:!0,shiftKey:!0},shortcutAlias:f},{shortcut:d.KeyboardShortcut.AcceptIncomingCall,keyCombination:{keyCode:h.default.R,altKey:!0,shiftKey:!0},shortcutAlias:f},{shortcut:d.KeyboardShortcut.ResizeVideoPreview,keyCombination:{keyCode:h.default.J,altKey:!0,shiftKey:!0}}],t.WindowsAndLinuxShortcutsCommon=[{shortcut:d.KeyboardShortcut.OpenNotificationPanel,keyCombination:{keyCode:h.default.I,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.OpenContactsPanel,keyCombination:{keyCode:h.default.TWO,altKey:!0}},{shortcut:d.KeyboardShortcut.NavigateToRecents,keyCombination:{keyCode:h.default.ONE,altKey:!0}},{shortcut:d.KeyboardShortcut.NavigateToHistory,keyCombination:{keyCode:h.default.Y,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.AddPeopleToConversation,keyCombination:{keyCode:h.default.A,ctrlKey:!0,shiftKey:!0},shortcutAlias:y},{shortcut:d.KeyboardShortcut.StartVideoCall,keyCombination:{keyCode:h.default.K,ctrlKey:!0,shiftKey:!0},shortcutAlias:_},{shortcut:d.KeyboardShortcut.StartAudioCall,keyCombination:{keyCode:h.default.P,ctrlKey:!0,shiftKey:!0},shortcutAlias:f},{shortcut:d.KeyboardShortcut.MarkAsUnread,keyCombination:{keyCode:h.default.U,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.ToggleLeftPanel,keyCombination:{keyCode:h.default.ONE,ctrlKey:!0,altKey:!0}},{shortcut:d.KeyboardShortcut.EnableMultipleSelectMessages,keyCombination:{keyCode:h.default.L,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.FocusMessageComposer,keyCombination:{keyCode:h.default.E,altKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.ToggleMicrophone,keyCombination:{keyCode:h.default.M,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.ToggleCamera,keyCombination:{keyCode:h.default.K,ctrlKey:!0,shiftKey:!0},shortcutAlias:_},{shortcut:d.KeyboardShortcut.AcceptIncomingCall,keyCombination:{keyCode:h.default.P,ctrlKey:!0,shiftKey:!0},shortcutAlias:f},{shortcut:d.KeyboardShortcut.AddPeopleToCall,keyCombination:{keyCode:h.default.A,ctrlKey:!0,shiftKey:!0},shortcutAlias:y},{shortcut:d.KeyboardShortcut.HangupOrRejectCall,keyCombination:{keyCode:h.default.H,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.ArchiveConversation,keyCombination:{keyCode:h.default.E,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.AnnounceMuteStatus,keyCombination:{keyCode:h.default.M,ctrlKey:!0,altKey:!0}},{shortcut:d.KeyboardShortcut.AnnounceSelfVideoOnOffStatus,keyCombination:{keyCode:h.default.K,ctrlKey:!0,shiftKey:!0,altKey:!0}},{shortcut:d.KeyboardShortcut.CallDebugPanel,keyCombination:{keyCode:h.default.D,altKey:!0,shiftKey:!0}}],t.WindowsShortcuts=[...t.WindowsAndLinuxShortcutsCommon,{shortcut:d.KeyboardShortcut.OpenAppSettings,keyCombination:{keyCode:h.default.COMMA,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.OpenHelpInABrowser,keyCombination:{keyCode:h.default.H,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.StartNewConversation,keyCombination:{keyCode:h.default.N,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.OpenThemePicker,keyCombination:{keyCode:h.default.T,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.ToggleTheme,keyCombination:{keyCode:h.default.T,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.TakeCallSnapshot,keyCombination:{keyCode:h.default.S,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.OpenDialpad,keyCombination:{keyCode:h.default.D,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.NewGroup,keyCombination:{keyCode:h.default.G,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.ToggleGallery,keyCombination:{keyCode:h.default.G,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.SendFeedback,keyCombination:{keyCode:h.default.O,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.ShowConversationProfile,keyCombination:{keyCode:h.default.P,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.SendFile,keyCombination:{keyCode:h.default.F,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.NavigateToPreviousConversation,keyCombination:{keyCode:h.default.TAB,shiftKey:!0,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.NavigateToNextConversation,keyCombination:{keyCode:h.default.TAB,shiftKey:!1,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.ResizeVideoPreview,keyCombination:{keyCode:h.default.J,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.CloseSplitViewConversation,keyCombination:{keyCode:h.default.W,ctrlKey:!0}},{shortcut:d.KeyboardShortcut.Quit,keyCombination:{keyCode:h.default.Q,ctrlKey:!0}}],t.WindowsAndLinuxShortcutsWeb=[...t.WindowsAndLinuxShortcutsCommon,{shortcut:d.KeyboardShortcut.OpenAppSettings,keyCombination:{keyCode:h.default.COMMA,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.StartNewConversation,keyCombination:{keyCode:h.default.N,altKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.OpenHelpInABrowser,keyCombination:{keyCode:h.default.H,altKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.OpenDialpad,keyCombination:{keyCode:h.default.D,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.NewGroup,keyCombination:{keyCode:h.default.G,ctrlKey:!0,shiftKey:!0}},{shortcut:d.KeyboardShortcut.ShowConversationProfile,keyCombination:{keyCode:h.default.P,ctrlKey:!0,altKey:!0}},{shortcut:d.KeyboardShortcut.ResizeVideoPreview,keyCombination:{keyCode:h.default.J,altKey:!0,shiftKey:!0}}];class v{constructor(){this._handlers={},this._shouldSubscribeToKeyboardEvents=!0,this._subscribedToEscapeKeyEvents=!1,this._escapeHandlers=[],this._shortcutsMap={},this._extendedShortcutsMap={},this._onKeyUp=e=>{if(e.keyCode===h.default.ESCAPE)for(let t=this._escapeHandlers.length-1;t>=0;t--){const i=this._escapeHandlers[t];if(i&&i(e,c.MainRootViewId))return e.stopPropagation(),!0}return!1},this._onKeyDown=e=>{let t;const i=this._getKeyboardShortcut(e);for(let e=0;e<i.length;e++){const n=this._handlers[this._getShortcutMapKey(i[e].shortcut)];if(n){t=n;break}}if(t){const i=(t,i)=>{if(t&&t.length)for(let n=t.length-1;n>=0;n--)if(t[n](e,i)){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();break}};return S.default.isUsingSplitViewNoSubscription()?s.default.getLastActiveSplitView().then((e=>{const n=e&&e.isActive&&e.id?e.id:c.MainRootViewId;t&&i(t,n)}),(e=>{g.log(d.LogTraceArea.Navigation,"getLastActiveSplitView() failed. error: "+e),t&&i(t,c.MainRootViewId)})):i(t,c.MainRootViewId),!0}return!1},this._getSearchInConversationKeyCombination=()=>C.default.getPlatformType()===d.PlatformType.OSX?{keyCode:h.default.F,metaKey:!0}:{keyCode:h.default.F,ctrlKey:!0},this._getSearchKeyCombination=()=>C.default.getPlatformType()===d.PlatformType.OSX?{keyCode:h.default.F,metaKey:!0,shiftKey:!0}:{keyCode:h.default.F,ctrlKey:!0,shiftKey:!0},this._makeMacShortcuts=()=>{const e=[...t.MacShortcutsWeb];return e.push({shortcut:d.KeyboardShortcut.Search,keyCombination:this._getSearchKeyCombination()},{shortcut:d.KeyboardShortcut.SearchInConversation,keyCombination:this._getSearchInConversationKeyCombination()}),e.push({shortcut:d.KeyboardShortcut.OpenKeyboardShortcuts,keyCombination:{keyCode:h.default.BACKSLASH,metaKey:!0}}),e},this._makeWindowsOrLinuxShortcuts=()=>{const e=[...t.WindowsAndLinuxShortcutsWeb];return e.push({shortcut:d.KeyboardShortcut.Search,keyCombination:this._getSearchKeyCombination()},{shortcut:d.KeyboardShortcut.SearchInConversation,keyCombination:this._getSearchInConversationKeyCombination()}),e.push({shortcut:d.KeyboardShortcut.OpenKeyboardShortcuts,keyCombination:{keyCode:h.default.FORWARDSLASH,ctrlKey:!0}}),e},this._constructShortcuts(),this._shouldSubscribeToKeyboardEvents&&(p.localeChangedEvent.subscribe((()=>{this._extendedShortcutsMap={}})),a.Input.keyDownEvent.subscribe(this._onKeyDown))}_constructShortcuts(){g.log(d.LogTraceArea.KeyboardShortcuts,"_constructShortcuts was called"),this._shortcuts=C.default.getPlatformType()===d.PlatformType.OSX?this._makeMacShortcuts():this._makeWindowsOrLinuxShortcuts();const e={};n.each(this._shortcuts,(t=>{e[t.shortcut]=t})),this._shortcutsMap=e}keyCombinationForKeyboardShortcut(e){const t=this._shortcutsMap[e];return t?t.keyCombination:void 0}acceleratorForKeyboardShortcut(e){const t=this.keyCombinationForKeyboardShortcut(e);if(t){const e=v._acceleratorCommandParts(t);return v._joinCommands(e,"+")}}compactShortcutStringForKeyboardShortcut(e){const t=this.keyCombinationForKeyboardShortcut(e);if(t){const e=v._commandParts(t);return v._joinCommands(e,"+")}}shortcutListItemForShortcut(e){let t=this._extendedShortcutsMap[e];if(!t&&this._shortcutsMap[e]){const i=v._actionDescriptionForShortcut(e),n=v._commandParts(this._shortcutsMap[e].keyCombination),o=v._joinCommands(n),s=v._constructCommand(this._shortcutsMap[e].keyCombination,!0);i&&o&&(t=Object.assign(Object.assign({},this._shortcutsMap[e]),{action:i,command:o,accessibleCommand:s,commandParts:n}),this._extendedShortcutsMap[e]=t)}return t}addHandler(e,t){if(this._shouldSubscribeToKeyboardEvents&&r.default.canUseKeyboardShortcut(e)){g.log(d.LogTraceArea.KeyboardShortcuts,"Adding handler for "+d.KeyboardShortcut[e]);const i=this._getShortcutMapKey(e);this._handlers[i]?this._handlers[i].push(t):this._handlers[i]=[t],g.log(d.LogTraceArea.KeyboardShortcuts,"Handler count for shortcut "+d.KeyboardShortcut[e]+" count: "+this._handlers[i].length)}}removeHandler(e,t){if(this._shouldSubscribeToKeyboardEvents){g.log(d.LogTraceArea.KeyboardShortcuts,"Removing handler for "+d.KeyboardShortcut[e]);const i=this._getShortcutMapKey(e),o=n.remove(this._handlers[i],(e=>e===t)),s=this._handlers[i]?this._handlers[i].length:0;return g.log(d.LogTraceArea.KeyboardShortcuts,"Handler count for shortcut "+d.KeyboardShortcut[e]+" count: "+s),s||delete this._handlers[i],!n.isEmpty(o)}return!1}addEscapeHandler(e){this._subscribedToEscapeKeyEvents||(g.log(d.LogTraceArea.KeyboardShortcuts,"Subscribing to Escape key events"),a.Input.keyUpEvent.subscribe(this._onKeyUp),this._subscribedToEscapeKeyEvents=!0),this._escapeHandlers.push(e)}removeEscapeHandler(e){this._escapeHandlers=n.filter(this._escapeHandlers,(t=>t!==e)),n.isEmpty(this._escapeHandlers)&&this._subscribedToEscapeKeyEvents&&(g.log(d.LogTraceArea.KeyboardShortcuts,"Unsubscribing from Escape key events"),a.Input.keyUpEvent.unsubscribe(this._onKeyUp),this._subscribedToEscapeKeyEvents=!1)}addSystemHandler(e,t){if(!this._shouldSubscribeToKeyboardEvents||!r.default.canUseKeyboardShortcut(e))return;if(this.addHandler(e,t),!m.default.getUserPreferencesLocal().enableSystemHotKeys||!l.UICapabilities.systemHotKeysSupported())return;const i=this.keyCombinationForKeyboardShortcut(e),n=this.acceleratorForKeyboardShortcut(e);o.default.hotKeyCallback=t=>{const i=this._onKeyDown(t);return g.track(new u.GlobalHotkeyInvokedEvent(d.KeyboardShortcut[e],n)),i};const s=o.default.registerHotKey(i,n);void 0===i||s||g.warn(d.LogTraceArea.KeyboardShortcuts,"Failed to register system handler"),g.track(new u.GlobalHotkeyRegisteredEvent(s,d.KeyboardShortcut[e],n))}removeSystemHandler(e,t){if(!this._shouldSubscribeToKeyboardEvents)return;if(!this.removeHandler(e,t)||!l.UICapabilities.systemHotKeysSupported())return;const i=this.keyCombinationForKeyboardShortcut(e),n=this.acceleratorForKeyboardShortcut(e),s=o.default.unRegisterHotKey(i,n);void 0===i||s||g.warn(d.LogTraceArea.KeyboardShortcuts,"Failed to unregister system handler"),g.track(new u.GlobalHotkeyUnregisteredEvent(s,d.KeyboardShortcut[e],n))}hasRegisteredMultipleHandlers(e){const t=this._getShortcutMapKey(e),i=this._handlers[t];return!!(i&&i.length>1)}generateTooltipLabelWithShortcutForCondition(e,t,i){const n=this.compactShortcutStringForKeyboardShortcut(t);return!n||void 0!==i&&!0!==i?e:`${e}\n(${n})`}_getKeyboardShortcut(e){return this._shortcuts?this._shortcuts.filter((t=>{const i=t.keyCombination;return e.keyCode===i.keyCode&&!!e.ctrlKey==!!i.ctrlKey&&!!e.shiftKey==!!i.shiftKey&&!!e.altKey==!!i.altKey&&!!e.metaKey==!!i.metaKey})):[]}_getShortcutMapKey(e){const t=this._shortcutsMap[e];return"keyboardShortcut_"+((t?t.shortcutAlias:void 0)||e)}static _actionDescriptionForShortcut(e){switch(e){case d.KeyboardShortcut.OpenNotificationPanel:return p.getString("KeyboardShortcuts.OpenNotificationPanel");case d.KeyboardShortcut.OpenAppSettings:return p.getString("KeyboardShortcuts.OpenAppSettings");case d.KeyboardShortcut.OpenHelpInABrowser:return p.getString("KeyboardShortcuts.OpenHelpInABrowser");case d.KeyboardShortcut.OpenDialpad:return p.getString("KeyboardShortcuts.OpenDialpad");case d.KeyboardShortcut.StartNewConversation:return p.getString("KeyboardShortcuts.StartNewConversation");case d.KeyboardShortcut.NewGroup:return p.getString("KeyboardShortcuts.NewGroup");case d.KeyboardShortcut.OpenContactsPanel:return p.getString("KeyboardShortcuts.OpenContactsPanel");case d.KeyboardShortcut.SendFeedback:return p.getString("KeyboardShortcuts.SendFeedback");case d.KeyboardShortcut.OpenThemePicker:return p.getString("KeyboardShortcuts.OpenThemePicker");case d.KeyboardShortcut.NavigateToRecents:case d.KeyboardShortcut.NavigateToHistory:return p.getString("KeyboardShortcuts.NavigateToRecents");case d.KeyboardShortcut.ShowConversationProfile:return p.getString("KeyboardShortcuts.ShowConversationProfile");case d.KeyboardShortcut.AddPeopleToConversation:return p.getString("KeyboardShortcuts.AddPeopleToConversation");case d.KeyboardShortcut.SendFile:return p.getString("KeyboardShortcuts.SendFile");case d.KeyboardShortcut.StartVideoCall:return p.getString("KeyboardShortcuts.StartVideoCall");case d.KeyboardShortcut.StartAudioCall:return p.getString("KeyboardShortcuts.StartAudioCall");case d.KeyboardShortcut.ToggleGallery:return p.getString("KeyboardShortcuts.ToggleGallery");case d.KeyboardShortcut.MarkAsUnread:return p.getString("KeyboardShortcuts.MarkAsUnread");case d.KeyboardShortcut.HangupOrRejectCall:return p.getString("KeyboardShortcuts.HangupOrRejectCall");case d.KeyboardShortcut.ToggleMicrophone:return p.getString("KeyboardShortcuts.ToggleMicrophone");case d.KeyboardShortcut.ToggleCamera:return p.getString("KeyboardShortcuts.ToggleCamera");case d.KeyboardShortcut.AcceptIncomingCall:return p.getString("KeyboardShortcuts.AcceptIncomingCall");case d.KeyboardShortcut.AddPeopleToCall:return p.getString("KeyboardShortcuts.AddPeopleToCall");case d.KeyboardShortcut.Search:return p.getString("KeyboardShortcuts.Search");case d.KeyboardShortcut.SearchInConversation:return p.getString("KeyboardShortcuts.SearchInConversation");case d.KeyboardShortcut.ToggleTheme:return p.getString("KeyboardShortcuts.ToggleTheme");case d.KeyboardShortcut.EditMessage:return p.getString("KeyboardShortcuts.EditMessage");case d.KeyboardShortcut.EnableMultipleSelectMessages:return p.getString("KeyboardShortcuts.EnableMultipleSelectMessages");case d.KeyboardShortcut.TakeCallSnapshot:return p.getString("KeyboardShortcuts.TakeCallSnapshot");case d.KeyboardShortcut.ArchiveConversation:return p.getString("KeyboardShortcuts.ArchiveConversation");case d.KeyboardShortcut.OpenMainWindow:return p.getString("KeyboardShortcuts.OpenMainWindow");case d.KeyboardShortcut.Refresh:return p.getString("KeyboardShortcuts.Refresh");case d.KeyboardShortcut.ZoomIn:return p.getString("KeyboardShortcuts.ZoomIn");case d.KeyboardShortcut.ZoomOut:return p.getString("KeyboardShortcuts.ZoomOut");case d.KeyboardShortcut.ResetZoom:return p.getString("KeyboardShortcuts.ResetZoom");case d.KeyboardShortcut.OpenKeyboardShortcuts:return p.getString("KeyboardShortcuts.OpenKeyboardShortcuts");case d.KeyboardShortcut.FocusMessageComposer:return p.getString("KeyboardShortcuts.FocusMessageComposer");case d.KeyboardShortcut.AnnounceMuteStatus:return p.getString("KeyboardShortcuts.AnnounceMuteStatus");case d.KeyboardShortcut.AnnounceSelfVideoOnOffStatus:return p.getString("KeyboardShortcuts.AnnounceSelfVideoOnOffStatus");case d.KeyboardShortcut.NavigateToNextConversation:return p.getString("KeyboardShortcuts.NextConversationLabel");case d.KeyboardShortcut.NavigateToPreviousConversation:return p.getString("KeyboardShortcuts.PreviousConversationLabel");case d.KeyboardShortcut.ResizeVideoPreview:return p.getString("CallPanel.ResizeCameraPreviewText");case d.KeyboardShortcut.FocusScreenSharingToolbar:return p.getString("KeyboardShortcuts.FocusScreenSharingToolbar");case d.KeyboardShortcut.CloseSplitViewConversation:return p.getString("KeyboardShortcuts.CloseSplitViewConversation");case d.KeyboardShortcut.Quit:return p.getString("KeyboardShortcuts.Quit")}}static _commandParts(e,t=!1){const i=C.default.getPlatformType()===d.PlatformType.OSX,o=[];return e.ctrlKey&&o.push(v._keyDescriptor(i?h.default.CONTROL:h.default.CTRL,t)),e.altKey&&o.push(v._keyDescriptor(i?h.default.OPTION:h.default.ALT,t)),e.metaKey&&o.push(v._keyDescriptor(h.default.COMMAND,t)),e.shiftKey&&o.push(v._keyDescriptor(h.default.SHIFT,t)),e.keyCode&&o.push(v._keyDescriptor(e.keyCode,t)),n.compact(o)}static _acceleratorCommandParts(e){const t=C.default.getPlatformType()===d.PlatformType.OSX,i=[];return e.ctrlKey&&i.push("Control"),e.altKey&&i.push(t?"Option":"Alt"),e.metaKey&&i.push("Command"),e.shiftKey&&i.push("Shift"),e.keyCode&&i.push(v._keyAcceleratorCode(e.keyCode)),n.compact(i)}static _constructCommand(e,t=!1){const i=v._commandParts(e,t);return v._joinCommands(i,t?" ":" + ")}static _joinCommands(e,t){return n.join(e,t||" + ")}static _keyAcceleratorCode(e){switch(e){case h.default.PLUS:return"Plus";case h.default.SPACE:return"Space";case h.default.TAB:return"Tab";case h.default.DELETE:return"Delete";case h.default.INSERT:return"Insert";case h.default.ENTER:return"Enter";case h.default.UP:return"Up";case h.default.DOWN:return"Down";case h.default.LEFT:return"Left";case h.default.RIGHT:return"Right";case h.default.ESCAPE:return"Escape";case h.default.PAGEUP:return"PageUp";case h.default.PAGEDOWN:return"PageDown"}return v._keyDescriptor(e,!1)}static _keyDescriptor(e,t=!1){switch(e){case h.default.A:return"A";case h.default.B:return"B";case h.default.C:return"C";case h.default.D:return"D";case h.default.E:return"E";case h.default.F:return"F";case h.default.G:return"G";case h.default.H:return"H";case h.default.I:return"I";case h.default.J:return"J";case h.default.K:return"K";case h.default.L:return"L";case h.default.M:return"M";case h.default.N:return"N";case h.default.O:return"O";case h.default.P:return"P";case h.default.Q:return"Q";case h.default.R:return"R";case h.default.S:return"S";case h.default.T:return"T";case h.default.U:return"U";case h.default.V:return"V";case h.default.W:return"W";case h.default.X:return"X";case h.default.Y:return"Y";case h.default.Z:return"Z";case h.default.ZERO:return"0";case h.default.ONE:return"1";case h.default.TWO:return"2";case h.default.THREE:return"3";case h.default.FOUR:return"4";case h.default.FIVE:return"5";case h.default.SIX:return"6";case h.default.SEVEN:return"7";case h.default.EIGHT:return"8";case h.default.NINE:return"9";case h.default.LEFT:return t?p.getString("KeyboardShortcuts.LeftArrow"):"";case h.default.RIGHT:return t?p.getString("KeyboardShortcuts.RightArrow"):"";case h.default.UP:return t?p.getString("KeyboardShortcuts.UpArrow"):"";case h.default.DOWN:return t?p.getString("KeyboardShortcuts.DownArrow"):"";case h.default.TAB:return p.getString("KeyboardShortcuts.TabKey");case h.default.SHIFT:return p.getString("KeyboardShortcuts.ShiftKey");case h.default.ESCAPE:return p.getString("KeyboardShortcuts.EscapeKey");case h.default.DELETE:return p.getString("KeyboardShortcuts.DeleteKey");case h.default.SPACE:return p.getString("KeyboardShortcuts.SpaceKey");case h.default.PAGEUP:return p.getString("KeyboardShortcuts.PageUpKey");case h.default.PAGEDOWN:return p.getString("KeyboardShortcuts.PageDownKey");case h.default.COMMA:return t?p.getString("KeyboardShortcuts.CommaKey"):",";case h.default.PLUS:return t?p.getString("KeyboardShortcuts.PlusKey"):"+";case h.default.MINUS:return t?p.getString("KeyboardShortcuts.MinusKey"):"-";case h.default.BACKSLASH:return"\\";case h.default.FORWARDSLASH:return"/";case h.default.COMMAND:return t||C.default.getPlatformType()!==d.PlatformType.OSX?p.getString("KeyboardShortcuts.CommandKey"):"";case h.default.CONTROL:case h.default.CTRL:return t||C.default.getPlatformType()===d.PlatformType.OSX?p.getString("KeyboardShortcuts.ControlKey"):p.getString("KeyboardShortcuts.ControlKeyShort");case h.default.RETURN:case h.default.ENTER:return C.default.getPlatformType()===d.PlatformType.OSX?p.getString("KeyboardShortcuts.ReturnKey"):p.getString("KeyboardShortcuts.EnterKey");case h.default.ALT:case h.default.OPTION:return C.default.getPlatformType()===d.PlatformType.OSX?p.getString("KeyboardShortcuts.OptionKey"):p.getString("KeyboardShortcuts.AltKey")}}}t.KeyboardShortcuts=v,t.default=new v},80468:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(33754),o=i(86045),s=i(19784),a=i(76621),r=i(57102),l=i(39549),c=i(71908);t.default=function(e,t,i,d){return a.default.ensureConversationLoaded(e).then((()=>{if(!(0,l.default)().isConversationKnown(e))return;const a=[{text:n.getString("InfoPanel.LeaveConfirmationConfirmButtonTitle"),onPress:()=>{c.leaveConversationAsync(e,d);const i=n.getString("ConversationsListItem.LeftGroupAccessibilityAnnouncement");o.default.maybeAnnounceForAccessibility(i,500),t()},isSubmit:!0},{text:n.getString("Global.LearnMore"),onPress:r.ConversationUtils.openClearLeaveConversationLearnMore},{text:n.getString("Global.CancelLabel"),isCancel:!0}],u=n.getString("InfoPanel.LeaveConfirmationDialogTitle2"),g=n.getString("InfoPanel.LeaveConfirmationDialogMessage2");s.default.showWithOptions({title:u,dialogAccessibilityTitle:u,message:g,buttons:a,rootViewId:i})}))}},79154:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(67294),o=i(16778),s=i(96074),a=i(51638),r=i(47204),l=i(73865),c=i(46096),d=(i(11375),i(36237)),u=i(62807),g=i(4735),h=i(17093),p=i(30124),m=i(17252),S=i(29130),C=i(97982),f=i(34273),y=(0,n.lazy)((()=>Promise.resolve().then((()=>i(30734))))),_=(0,n.lazy)((()=>Promise.resolve().then((()=>i(11881))))),v=(0,n.lazy)((()=>Promise.resolve().then((()=>i(23303))))),b=(0,n.lazy)((()=>Promise.resolve().then((()=>i(69198))))),T=(0,n.lazy)((()=>Promise.resolve().then((()=>i(30886))))),P=(0,n.lazy)((()=>Promise.resolve().then((()=>i(67337))))),A=(0,n.lazy)((()=>Promise.resolve().then((()=>i(50517))))),k=(0,n.lazy)((()=>Promise.resolve().then((()=>i(90474))))),I=(0,n.lazy)((()=>Promise.resolve().then((()=>i(45213))))),w=(0,n.lazy)((()=>Promise.resolve().then((()=>i(26630))))),N=(0,n.lazy)((()=>Promise.resolve().then((()=>i(35428))))),M=(0,n.lazy)((()=>Promise.resolve().then((()=>i(77721)))));class E{constructor(){this._modalIndex=0,this._onLaunchModal=e=>{d.log(c.LogTraceArea.Navigation,"ManagedModalNavigationHelper._onLaunchModal causeId: "+e.causeId);const t=e.modalId||"modal"+this._modalIndex++,g={dialogId:t,isAloneInNavStack:!0};let E=!1;const x={rootViewId:e.rootViewId,useScopedModalId:e.useScopedModalId};let L;if(e.context instanceof h.UnansweredCallNavigationContext){const n=e.context;E=!p.default.isUsingStackNavigationContextNoSubscription(),Promise.resolve().then((()=>i(21045))).then((i=>{this._onHandleCloseModal=i.show(n.state.unansweredCallOutput,t,x,e.causeId)}))}else if(e.context instanceof h.CaptureComboNavigationContext)if(e.context.state.allowOfficeLens&&m.isOfficeLensAvailable()){const t=e.context.state.onSendFlowComplete,i=e.context.state.capturedContentHandler;i&&m.launchInCameraMode(i).then((e=>{e&&t&&t()}))}else{const t=e.context.state;Promise.resolve().then((()=>i(32827))).then((i=>{i.default.show(t,x,(()=>{e.onDismiss&&e.onDismiss(),this._dispatchCloseModalEvent()}))}))}else if(e.context instanceof h.CapturePreviewNavigationContext){const t=e.context;L=o.createElement(b,Object.assign({localMediaObjectUri:t.state.localMediaObjectUri,localMediaThumbnailUri:t.state.localMediaThumbnailUri,localMediaIsVideo:t.state.localMediaIsVideo,mediaSelection:t.state.mediaSelection,fileSize:t.state.fileSize,mediaHeight:t.state.height,mediaWidth:t.state.width,skipShareWithPanel:t.state.skipShareWithPanel,onCaptureFlowComplete:t.state.onCaptureFlowComplete,conversationId:t.state.conversationId,callId:t.state.callId,markupEnabled:!0,unlockOrientation:t.state.unlockOrientation,performMarkupOnly:t.state.performMarkupOnly,capturedContentHandler:t.state.capturedContentHandler,captureSessionTelemetry:t.state.captureSessionTelemetry,entryPoint:t.state.entryPoint,inlinePreview:t.state.inlinePreview,iconForClose:t.state.iconForClose,onReject:t.state.onReject,fileExtension:t.state.fileExtension},g))}else if(e.context instanceof h.CaptureMultiPreviewNavigationContext){const t=e.context;L=o.createElement(v,{mediaPreviews:t.state.mediaPreviews,conversationId:t.state.conversationId,onReject:t.state.onReject})}else if(e.context instanceof h.LocationPickerContext)L=o.createElement(l.default,null,o.createElement(A,{route:{params:Object.assign(Object.assign({},g),e.context.state)}}));else if(e.context instanceof h.ScreenShareModalContext){const t=e.context;L=o.createElement(l.default,null,o.createElement(N,{currentScreenSharingSource:t.state.currentScreenSharingSource,currentScreenSharingSourceType:t.state.currentScreenSharingSourceType,isScreenSharingActive:t.state.isScreenSharingActive,onSelectSource:t.state.onSelectSource,onClose:t.state.onClose,initialShareSounds:t.state.shareSounds}))}else if(e.context instanceof h.TogetherModeModalContext){const t=e.context;L=o.createElement(l.default,null,o.createElement(M,{route:{params:Object.assign({onChangeBackground:t.state.onChangeBackground,onStartTogetherMode:t.state.onStartTogetherMode,onClose:t.state.onClose,isAudienceBotInCall:t.state.isAudienceBotInCall,selectedBackground:t.state.selectedBackground},g)}}))}else if(e.context instanceof u.MeetNowJoinLinkPanelNavigationContext){const t=e.context;L=o.createElement(l.default,{onDismiss:t.state.onDismiss},o.createElement(I,{route:{params:t.state}}))}else if(e.context instanceof h.LocationViewerContext){const t=e.context;L=o.createElement(l.default,null,o.createElement(k,{route:{params:Object.assign(Object.assign({},g),t.state)}}))}else if(e.context instanceof h.DocumentViewerContext)L=o.createElement(l.default,null,o.createElement(P,{route:{params:Object.assign(Object.assign({},g),e.context.state)}}));else if(e.context instanceof h.DesktopCaptureComboViewNavigationContext)L=o.createElement(l.default,null,o.createElement(T,Object.assign({key:"desktopCapturePanel",conversationId:e.context.state.conversationId,onShareComplete:e.context.state.onShareComplete},g)));else if(e.context instanceof h.AugmentedPermissionsViewNavigationContext){if(void 0===e.permissionType)return void d.error(c.LogTraceArea.Navigation,"AugmentedPermissions event fired without a permission type, no UI shown");E=!p.default.isUsingStackNavigationContextNoSubscription();const n=e.permissionType,o=e.context.state;Promise.resolve().then((()=>i(37726))).then((i=>{this._onHandleCloseModal=i.show(t,x,n,e.causeId,o.conversationMri,o.onContinueAfterPermissionsDenied)}))}else if(e.context instanceof h.AndroidCallMonitorPermissionNavigationContext)L=o.createElement(y,Object.assign({deviceWidth:S.default.getWidthNoSubscription(x.rootViewId)},g));else if(e.context instanceof h.CQFNavigationContext){const t=e.context.state.callInfo,i=e.context.state;E=!p.default.isUsingStackNavigationContextNoSubscription(),L=o.createElement(_,Object.assign({callId:t.callId,conversationMri:t.conversationMri,endpointId:i.endpointId,nodeId:i.nodeId,participantId:i.participantId,pstnCdrId:i.pstnCdrId,problemSections:a.problemSections(t.callId,i.includedVideo),maxConnectedParticipants:i.maxConnectedParticipants},g))}else if(e.context instanceof f.default.NavigationContext.ScheduleNextCallNavigationContext){const t=e.context.state.callEndedInfo;L=o.createElement(w,Object.assign({conversationMri:t.conversationMri,callDuration:t.durationSeconds},g))}else if(e.context instanceof h.CallPreviewNavigationContext){const t=e.context.state;Promise.resolve().then((()=>i(45092))).then((e=>e.maybePresentCallPreviewPanel(Object.assign({},t),x)))}else e.context instanceof h.RinglessCallInterstitialNavigationContext&&C.maybePresentRinglessCallInterstitial(Object.assign({},e.context.state),x);L&&r.default.showModal(o.createElement(n.Suspense,{fallback:null},o.createElement(s.BaseNavigationWrapper,{isPresentedInManagedModal:!0,isPresentedInDesktopSubview:E,goBack:i=>(d.log(c.LogTraceArea.Navigation,"ModalNavigationHelper._goBack causeId: "+i),r.default.dismissModal(t,e.rootViewId),this._dispatchCloseModalEvent(),!0)},L)),t,x)},this._onCloseModal=e=>{d.log(c.LogTraceArea.Navigation,"ManagedModalNavigationHelper._onCloseModal"),this._onHandleCloseModal?this._onHandleCloseModal(e.modalId):e.modalId?r.default.dismissModal(e.modalId,e.rootViewId,e.useScopedModalId):o.Modal.dismissAll(),this._dispatchCloseModalEvent()},d.log(c.LogTraceArea.Navigation,"ManagedModalNavigationHelper constructor"),g.default.launchModalEvent.subscribe(this._onLaunchModal),g.default.closeModalEvent.subscribe(this._onCloseModal)}static open(){d.log(c.LogTraceArea.Navigation,"ManagedModalNavigationHelper.open"),this._modalNavigationHelper||(this._modalNavigationHelper=new E)}static close(){d.log(c.LogTraceArea.Navigation,"ManagedModalNavigationHelper.close"),this._modalNavigationHelper&&(this._modalNavigationHelper._close(),this._modalNavigationHelper=void 0)}_close(){d.log(c.LogTraceArea.Navigation,"ManagedModalNavigationHelper._close"),this._launchModalToken&&(this._launchModalToken.unsubscribe(),this._launchModalToken=void 0),this._closeModalToken&&(this._closeModalToken.unsubscribe(),this._closeModalToken=void 0)}_dispatchCloseModalEvent(){0}}t.default=E},34537:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(15877),s=i(81760),a=i(98278),r=i(11010),l=i(89808),c=i(97634),d=i(53374),u=i(46096);let g=new class{constructor(){this._colors={light:s.Color.white,dark:"#202020"},this._styles=(0,o.lazyProperties)({backgroundColorLight:()=>n.Styles.createViewStyle({backgroundColor:this._colors.light}),backgroundColorDark:()=>n.Styles.createViewStyle({backgroundColor:this._colors.dark}),itemHighlightColorLightDefault:()=>n.Styles.createViewStyle({backgroundColor:"#DBF1FF"}),itemHighlightColorLightBlue:()=>n.Styles.createViewStyle({backgroundColor:"#DDDBF0"}),itemHighlightColorLightFuschia:()=>n.Styles.createViewStyle({backgroundColor:"#F6DFF3"}),itemHighlightColorLightMint:()=>n.Styles.createViewStyle({backgroundColor:"#D6EDFF"}),itemHighlightColorLightRose:()=>n.Styles.createViewStyle({backgroundColor:"#FFD6D6"}),itemHighlightColorLightYellow:()=>n.Styles.createViewStyle({backgroundColor:"#FDDFCE"}),itemHighlightColorDark:()=>n.Styles.createViewStyle({backgroundColor:"#2B2C32"}),itemHoverColorLightDefault:()=>n.Styles.createViewStyle({backgroundColor:"rgba(219, 241, 255, 0.5)"}),itemHoverColorLightBlue:()=>n.Styles.createViewStyle({backgroundColor:"rgba(221, 219, 240, 0.5)"}),itemHoverColorLightFuschia:()=>n.Styles.createViewStyle({backgroundColor:"rgba(246, 223, 243, 0.5)"}),itemHoverColorLightMint:()=>n.Styles.createViewStyle({backgroundColor:"rgba(214, 237, 255, 0.5)"}),itemHoverColorLightRose:()=>n.Styles.createViewStyle({backgroundColor:"rgba(255, 214, 214, 0.5)"}),itemHoverColorLightYellow:()=>n.Styles.createViewStyle({backgroundColor:"rgba(253, 223, 206, 0.5)"}),itemHoverColorDark:()=>n.Styles.createViewStyle({backgroundColor:s.Color.classicDarkBubbleOther}),bannerBackgroundColorLight:()=>n.Styles.createViewStyle({backgroundColor:"#F5F5F5"}),bannerBackgroundColorDark:()=>n.Styles.createViewStyle({backgroundColor:s.Color.darkThemeSecondaryBackground}),searchCategoryHeaderBackgroundColorLight:()=>n.Styles.createViewStyle({backgroundColor:"#F0F4F8"}),searchCategoryHeaderBackgroundColorDark:()=>n.Styles.createViewStyle({backgroundColor:s.Color.gray400}),roundStyle:()=>n.Styles.createViewStyle({borderRadius:8,marginHorizontal:8}),headerTextBase:()=>n.Styles.createTextStyle({font:r.default.font.uiDisplaySemibold}),headerTextDesktop:()=>n.Styles.createTextStyle({font:r.default.font.uiDisplaySemibold,fontSize:14}),headerTextMobile:()=>n.Styles.createTextStyle({font:r.default.font.uiDisplaySemibold,fontSize:15,lineHeight:20}),headerTextTablet:()=>n.Styles.createTextStyle({font:r.default.font.uiDisplaySemibold,fontSize:16}),itemTitleTextBase:()=>n.Styles.createTextStyle({fontSize:16,lineHeight:22}),itemTitleTextBaseMobile:()=>n.Styles.createTextStyle({fontSize:17,lineHeight:22}),itemSubtitleTextBase:()=>[r.default.font.uiDisplayRegular,n.Styles.createTextStyle({fontSize:14})],itemSubtitleTextBaseMobile:()=>n.Styles.createTextStyle({fontSize:15,lineHeight:20}),itemSubtitleTextLight:()=>n.Styles.createTextStyle({color:s.Color.gray400Overlay70}),itemSubtitleTextDark:()=>n.Styles.createTextStyle({color:s.Color.gray200Overlay60}),defaultThemeBadgeColorStyle:()=>n.Styles.createViewStyle({backgroundColor:s.Color.blue}),baseTimeColorStyleLight:()=>n.Styles.createTextStyle({color:s.Color.gray400Overlay70}),baseTimeColorStyleDark:()=>n.Styles.createTextStyle({color:s.Color.gray200Overlay60})})}getBackgroundColorStyle(e,t,i){return t?i.secondaryBackgroundColorStyle:e?this._styles.backgroundColorDark:this._styles.backgroundColorLight}getBackgroundColor(e,t,i){return t?i.secondaryBackgroundColor:e?this._colors.dark:this._colors.light}_getSelectedItemBackgroundStyleForLightNonA11yTheme(e){if(e)switch(e.key){case"blue":return this._styles.itemHighlightColorLightBlue;case"fuschia":return this._styles.itemHighlightColorLightFuschia;case"mint":return this._styles.itemHighlightColorLightMint;case"rose":return this._styles.itemHighlightColorLightRose;case"yellow":return this._styles.itemHighlightColorLightYellow}return this._styles.itemHighlightColorLightDefault}_getSelectedItemBackgroundStyleForDarkNonA11yTheme(e){return this._styles.itemHighlightColorDark}_getHoveredItemBackgroundStyleForLightNonA11yTheme(e){if(e)switch(e.key){case"blue":return this._styles.itemHoverColorLightBlue;case"fuschia":return this._styles.itemHoverColorLightFuschia;case"mint":return this._styles.itemHoverColorLightMint;case"rose":return this._styles.itemHoverColorLightRose;case"yellow":return this._styles.itemHoverColorLightYellow}return this._styles.itemHoverColorLightDefault}_getHoveredItemBackgroundStyleForDarkNonA11yTheme(e){return this._styles.itemHoverColorDark}getItemBackgroundStyle(e,t,i,n,o,s){return n?t?[this._styles.roundStyle,o.secondaryRowHighlightViewStyle]:i?[this._styles.roundStyle,o.secondaryRowHoverViewStyle]:[this._styles.roundStyle]:t?[this._styles.roundStyle,e?this._getSelectedItemBackgroundStyleForDarkNonA11yTheme(s):this._getSelectedItemBackgroundStyleForLightNonA11yTheme(s)]:i?[this._styles.roundStyle,e?this._getHoveredItemBackgroundStyleForDarkNonA11yTheme(s):this._getHoveredItemBackgroundStyleForLightNonA11yTheme(s)]:[this._styles.roundStyle]}getBannerBackgroundColorStyle(e,t,i){return t?i.secondaryBackgroundColorStyle:e?this._styles.bannerBackgroundColorDark:this._styles.bannerBackgroundColorLight}getSearchCategoryHeaderBackgroundColorStyle(e,t,i){return t?i.searchHeaderColorStyle:e?this._styles.searchCategoryHeaderBackgroundColorDark:this._styles.searchCategoryHeaderBackgroundColorLight}getRowPadding(e){return e?a.RowPaddingModernize:a.RowPaddingClassic}getCategoryHeaderTextStyle(e,t){return[this._styles.headerTextBase,this._styles.headerTextDesktop,e.secondaryTextColorStyle]}getCategoryHeaderHeight(e){return 33}getItemTitleTextStyle(e,t,i,n){const o=[n?this._styles.itemTitleTextBaseMobile:this._styles.itemTitleTextBase,i.headerTextColorStyle];return t?o.push(r.default.font.uiDisplayBold):e?o.push(r.default.font.uiDisplaySemibold):o.push(r.default.font.uiDisplayRegular),o}getItemSubtitleTextStyle(e,t,i,n,o){const s=[o?this._styles.itemSubtitleTextBaseMobile:this._styles.itemSubtitleTextBase];return i?s.push(e?n.secondaryTextColorStyle:n.primaryTextColorStyle):s.push(e?this._styles.itemSubtitleTextDark:this._styles.itemSubtitleTextLight),t&&s.push(n.headerTextColorStyle),s}getBadgeColorStyle(e,t){return e&&c.isDelphiTheme(t)?this._styles.defaultThemeBadgeColorStyle:l.default.getPrimaryBackgroundColorStyle()}getTimeColorStyle(e,t,i,n){return t?e?n.secondaryTextColorStyle:n.primaryTextColorStyle:i?n.headerTextColorStyle:e?this._styles.baseTimeColorStyleDark:this._styles.baseTimeColorStyleLight}canModernizeSearchResultsMobile(e,t){switch(e){case u.SearchResultsListOrigin.QuickCallPanel:return!!t;case u.SearchResultsListOrigin.ContactsPanel:case u.SearchResultsListOrigin.ContactsPanelV2:return!0;case u.SearchResultsListOrigin.SearchPanel:case u.SearchResultsListOrigin.AddContact:case u.SearchResultsListOrigin.QuickCallPanelModal:case u.SearchResultsListOrigin.AddingParticipantsToGroup:case u.SearchResultsListOrigin.ActiveNowPanel:case u.SearchResultsListOrigin.DiscoverPanel:case u.SearchResultsListOrigin.FindBots:case u.SearchResultsListOrigin.MoreContactsPanel:case u.SearchResultsListOrigin.NewChat:case u.SearchResultsListOrigin.NewGroup:case u.SearchResultsListOrigin.NewPrivateChat:case u.SearchResultsListOrigin.ShareWithPanel:case u.SearchResultsListOrigin.SuperComposer:case u.SearchResultsListOrigin.NewCellularSmsConversation:return!1;default:d.default.switchStatementExhaustiveChecking(e)}}canModernizeSearchResultsList(e){switch(e){case u.SearchResultsListOrigin.QuickCallPanel:case u.SearchResultsListOrigin.ContactsPanel:case u.SearchResultsListOrigin.ContactsPanelV2:case u.SearchResultsListOrigin.SearchPanel:return!0;case u.SearchResultsListOrigin.AddContact:case u.SearchResultsListOrigin.QuickCallPanelModal:case u.SearchResultsListOrigin.AddingParticipantsToGroup:case u.SearchResultsListOrigin.ActiveNowPanel:case u.SearchResultsListOrigin.DiscoverPanel:case u.SearchResultsListOrigin.FindBots:case u.SearchResultsListOrigin.MoreContactsPanel:case u.SearchResultsListOrigin.NewChat:case u.SearchResultsListOrigin.NewGroup:case u.SearchResultsListOrigin.NewPrivateChat:case u.SearchResultsListOrigin.ShareWithPanel:case u.SearchResultsListOrigin.SuperComposer:case u.SearchResultsListOrigin.NewCellularSmsConversation:return!1;default:d.default.switchStatementExhaustiveChecking(e)}}};t.default=g},82052:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=(i(16778),i(72105)),s=i(19784),a=i(89391),r=i(71908),l=i(71830),c=i(75760),d=i(92758),u=i(39549),g=i(36237),h=i(33754),p=i(78735),m=i(46929),S=i(4735),C=i(17093),f=i(30124),y=i(49643),_=i(93003),v=i(21579),b=i(93194),T=(i(12770),"archived"),P="time",A="unread",k="active",I="compactToggle",w="markAllRead",N="markAllNotificationsRead",M="showCategoriesToggle";class E{static showOptionsMenu(e,t,i,n){const o=E._getMenuItems(e);this._intShowMenu(o,e,t,i,n)}static showDesktopTabOptionsMenu(e,t,i,n){const o=E._getTabMenuItems(e);this._intShowMenu(o,e,t,i,n)}static showAllConversations(){d.default.setConversationsListMode(d.ConversationsListMode.AllConversations),this._sendEvent(y.RecentConversationsFilterAction.ShowAllConversations)}static showArchivedConversations(){f.default.isUsingStackNavigationContextNoSubscription()?S.default.navigateToMobileArchivedConversationsPanel():d.default.setConversationsListMode(d.ConversationsListMode.ArchivedConversations),this._sendEvent(y.RecentConversationsFilterAction.ShowArchivedConversations)}static sortByTime(){p.default.setUserPreferencesLocal({recentsSortedBy:_.RecentsSortBy.Time}),(0,u.default)().resortRecentConversations(),this._sendEvent(y.RecentConversationsFilterAction.SortByTime)}static sortByUnread(){p.default.setUserPreferencesLocal({recentsSortedBy:_.RecentsSortBy.Unread}),(0,u.default)().resortRecentConversations(),this._sendEvent(y.RecentConversationsFilterAction.SortByUnread)}static sortByActive(){p.default.setUserPreferencesLocal({recentsSortedBy:_.RecentsSortBy.Active}),(0,u.default)().resortRecentConversations(),this._sendEvent(y.RecentConversationsFilterAction.SortByActive)}static setRowSizeToDefault(){const e={recentsRowSize:_.RowSize.Default};a.default.getS4LNativePlatformsEcsConfig().enableRemoteClientAppearancePreferences&&m.default.setUserAppearancePreferencesForCurrentPlatform(e),p.default.setUserPreferencesLocal(e),this._sendEvent(y.RecentConversationsFilterAction.RowSizeDefault)}static setRowSizeToCompact(e){const t=e?_.RowSize.Compact:_.RowSize.ExtraCompact;a.default.getS4LNativePlatformsEcsConfig().enableRemoteClientAppearancePreferences&&m.default.setUserAppearancePreferencesForCurrentPlatform({recentsRowSize:t}),p.default.setUserPreferencesLocal({recentsRowSize:t}),this._sendEvent(y.RecentConversationsFilterAction.RowSizeCompact)}static recentRowSizeAndChanges(){return this._getRecentsRowSize()||_.RowSize.Default}static nonRecentRowSizeAndChanges(){return this.recentRowSizeAndChanges()}static useExtraCompactLayoutAndChanges(){return this.recentRowSizeAndChanges()===_.RowSize.ExtraCompact}static useAnyCompactLayoutAndChanges(){return this.recentRowSizeAndChanges()===_.RowSize.Compact||this.recentRowSizeAndChanges()===_.RowSize.ExtraCompact}static lastMessageAuthorAvatarEnabled(){return a.default.getS4LMessagingFeatures().enableLastMessageAuthorAvatarOverGroupIcon}static showCategories(){p.default.setUserPreferencesLocal({recentsShowCategories:!0}),(0,u.default)().resortRecentConversations(),this._sendEvent(y.RecentConversationsFilterAction.ShowCategories)}static hideCategories(){p.default.setUserPreferencesLocal({recentsShowCategories:!1}),(0,u.default)().resortRecentConversations(),this._sendEvent(y.RecentConversationsFilterAction.HideCategories)}static markAllConversationsRead(){E._markAllRead(!1),this._sendEvent(y.RecentConversationsFilterAction.MarkAllConversationsRead)}static _getRecentsRowSize(){const e=a.default.getS4LNativePlatformsEcsConfig().enableRemoteClientAppearancePreferences,t=p.default.getUserPreferencesLocal(),i=e?m.default.getUserAppearancePreferencesForCurrentPlatform():{};return i&&i.recentsRowSize?i.recentsRowSize:t.recentsRowSize}static _getRecentsRowSizeNoSubscription(){const e=a.default.getS4LNativePlatformsEcsConfigNoSubscription().enableRemoteClientAppearancePreferences,t=p.default.getUserPreferencesLocalNoSubscription(),i=e?m.default.getUserAppearancePreferencesForCurrentPlatformNoSubscription():{};return i&&i.recentsRowSize?i.recentsRowSize:t.recentsRowSize}static _intShowMenu(e,t,i,o,s){if(e.length>0){const a={anchor:i||(()=>{}),buttons:e,title:n.isUndefined(t)?h.getString("MobileRecentsFilter.ManageChats"):void 0};b.default.showWithActionMenuConfig({options:a,callback:e=>this._onHandleMenuCommand(e,o,i),maintainAnchor:!0,rootViewId:o,invokingEvent:s})}}static _sendEvent(e){g.track(new y.RecentConversationsFilterEvent(e))}static _markAllRead(e){const t=n.keys(c.default.getConversationsWithUnreadCounts());n.each(t,(t=>{const i=t;l.isHighlightsThread(i)===e&&r.markConversationRead(i)}))}static _getMenuItems(e){const t=[],i=n.isUndefined(e);if((0,u.default)().getArchivedConversations().length>0&&t.push({text:h.getString("MobileRecentsFilter.HiddenChats"),command:T}),i&&(t.push({text:h.getString("MobileRecentsFilter.Recent"),command:P}),t.push({text:h.getString("MobileRecentsFilter.Unread"),command:A}),t.push({text:h.getString("MobileRecentsFilter.Active"),command:k})),i||e===C.HubTab.Recents){const e=n.keys(c.default.getConversationsWithUnreadCounts());n.filter(e,(e=>!l.isHighlightsThread(e))).length>0&&t.push({text:h.getString("MobileRecentsFilter.MarkRead"),command:w});const i=E.shouldShowCategories()?"DesktopRecentsFilter.HideFavorites":"DesktopRecentsFilter.ShowFavorites";t.push({text:h.getString(i),command:M})}if(e===C.HubTab.Notifications&&o.default.hasUnreadAlerts(!0)&&t.push({text:h.getString("MobileRecentsFilter.MarkRead"),command:N}),i){let e;const i=this._getRecentsRowSizeNoSubscription();e=i===_.RowSize.Compact||i===_.RowSize.ExtraCompact?h.getString("MobileRecentsFilter.DisableCompactLayout"):h.getString("MobileRecentsFilter.EnableCompactLayout"),t.push({text:e,command:I})}return t}static _getTabMenuItems(e){const t=[];if(e===C.HubTab.Recents){const e=n.keys(c.default.getConversationsWithUnreadCounts());n.filter(e,(e=>!l.isHighlightsThread(e))).length>0&&t.push({text:h.getString("MobileRecentsFilter.MarkRead"),command:w})}return e===C.HubTab.Notifications&&o.default.hasUnreadAlerts(!0)&&t.push({text:h.getString("MobileRecentsFilter.MarkRead"),command:N}),t}static _getMenuItemAnnouncement(e){switch(e){case T:return h.getString("MobileRecentsFilter.HiddenChats");case P:return h.getString("MobileRecentsFilter.Recent");case A:return h.getString("MobileRecentsFilter.Unread");case k:return h.getString("MobileRecentsFilter.Active");case I:return h.getString("MobileRecentsFilter.CompactToggle");case w:case N:return h.getString("MobileRecentsFilter.MarkRead");case M:return E.shouldShowCategories()?"DesktopRecentsFilter.HideFavorites":"DesktopRecentsFilter.ShowFavorites"}}static showMarkAllReadConfirmationDialog(e){const t=[{text:h.getString("Global.CancelLabel"),isCancel:!0},{text:h.getString("MarkConversationsReadConfirmationDialog.MarkReadButtonTitle"),isSubmit:!0,onPress:()=>E.markAllConversationsRead()}],i=h.getString("MarkConversationsReadConfirmationDialog.DialogTitle"),n=h.getString("MarkConversationsReadConfirmationDialog.MarkReadDialogContent");s.default.showWithOptions({title:i,dialogAccessibilityTitle:n,message:n,buttons:t,rootViewId:e})}static test_getRecentsRowSize(){return this._getRecentsRowSize()}static test_getRecentsRowSizeNoSubscription(){return this._getRecentsRowSizeNoSubscription()}}t.default=E,E.shouldShowCategories=()=>{const e=p.default.getUserPreferencesLocal().recentsShowCategories;return void 0===e||e},E._onHandleMenuCommand=(e,t,i)=>{const n=void 0;switch(e){case T:E.showArchivedConversations();break;case P:E.sortByTime();break;case A:E.sortByUnread();break;case k:E.sortByActive();break;case I:const e=new v.RemoteUserAppearanceTelemetryEvent;e.setDidUpdateRecentsRowSize(),g.track(e);const i=E._getRecentsRowSizeNoSubscription();i===_.RowSize.Compact||i===_.RowSize.ExtraCompact?E.setRowSizeToDefault():E.setRowSizeToCompact();break;case w:E.showMarkAllReadConfirmationDialog(t);break;case N:o.default.markAllAsRead();break;case M:E.shouldShowCategories()?E.hideCategories():E.showCategories();case b.SXActionMenuCancel:}}},48659:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(10117),s=i(15877),a=i(11828),r=(0,s.lazyProperties)({searchAccessoryIcon:()=>n.Styles.createViewStyle({height:40,width:40,borderRadius:20,padding:10}),searchAccessoryIconCompact:()=>n.Styles.createViewStyle({height:24,width:24,borderRadius:12,padding:4})});t.default=new class{searchAccessoryIcon(e,t,i){return n.createElement(o.default,{icon:e,color:t.primaryIconColor,size:i?a.IconSize.size16:a.IconSize.size20,style:i?r.searchAccessoryIconCompact:r.searchAccessoryIcon})}}},95314:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(42826),s=i(61253),a=i(12692),r=i(53374);class l{constructor(e,t,i,o,s,l,c,d,u,g,h,p,m){e&&(this.guid=e.guid,this.alertType=e.alertType,this.alertTime=e.alertTime,this.isRead=e.isRead,this.highlightsFollowInfo=e.highlightsFollowInfo,this.highlightCommentInfo=e.highlightCommentInfo,this.popCardInfo=e.popCardInfo,this.noticeMessageInfo=e.noticeMessageInfo,this.highlightsSkypeChannelInfo=e.highlightsSkypeChannelInfo,this.scheduledCallInfo=e.scheduledCallInfo,this.missedCallbackReminderCalleeMri=e.missedCallbackReminderCalleeMri,e.message&&(this.message=a.default.fromDatabaseObject(e.message))),n.isUndefined(t)?n.isUndefined(this.guid)&&(this.guid=r.default.newGuid()):this.guid=t,n.isUndefined(i)||(this.alertType=i),n.isUndefined(o)||(this.alertTime=o),n.isUndefined(s)||(this.isRead=s?1:0),l&&(this.message=l),n.isUndefined(c)||(this.highlightsFollowInfo=c),n.isUndefined(d)||(this.highlightCommentInfo=d),n.isUndefined(u)||(this.popCardInfo=u),n.isUndefined(g)||(this.noticeMessageInfo=g),n.isUndefined(h)||(this.highlightsSkypeChannelInfo=h),n.isUndefined(p)||(this.scheduledCallInfo=p),n.isUndefined(m)||(this.missedCallbackReminderCalleeMri=m)}static fromDatabaseObject(e){return e?new l(e):void 0}static fromScratch(e,t,i,n,o={}){return new l(void 0,o.guid,e,t,i,n,o.highlightsFollowInfo,o.highlightCommentInfo,o.popCardInfo,o.noticeMessageInfo,o.highlightsSkypeChannelInfo,o.scheduledCallInfo,o.missedCallbackReminderCalleeMri)}applyRead(e){return!!this.isRead==!!e?this:new l(this,void 0,void 0,void 0,e)}updateHighlightsFollowStatus(e,t,i,n){return e===this.alertTime&&!!this.isRead==!!t&&(0,s.default)(this.message,i)&&(0,s.default)(this.highlightsFollowInfo,n)?this:new l(this,void 0,void 0,e,t,i,n)}isHighlightsFollowRequest(){return this.highlightsFollowInfo&&this.alertType===o.AlertType.HighlightsFollowRequest&&this.highlightsFollowInfo.followState===o.HighlightsFollowAlertState.Follow}isRemovedHighlightsFollowRequest(){return this.highlightsFollowInfo&&this.alertType===o.AlertType.HighlightsFollowRequest&&this.highlightsFollowInfo.followState===o.HighlightsFollowAlertState.Removed}isAcceptedByMeHighlightsFollowRequest(){return this.highlightsFollowInfo&&this.alertType===o.AlertType.HighlightsFollowRequest&&this.highlightsFollowInfo.followState===o.HighlightsFollowAlertState.AcceptedByMe}isEngagementAlert(){return this.alertType===o.AlertType.Engagement||this.alertType===o.AlertType.Notice}isHighlightsSkypeChannelAlert(){return this.alertType===o.AlertType.HighlightsSkypeChannel||this.alertType===o.AlertType.HighlightsSkypeChannelSecondary}isScheduledCallAlert(){return this.alertType===o.AlertType.ScheduledCall}}t.default=l},38566:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AudioManagerSource=void 0;const n=i(96486),o=i(63297),s=i(97691),a=i(89391),r=i(46096),l=i(36237);var c;!function(e){e[e.AudioMessageComposer=0]="AudioMessageComposer",e[e.AudioPlayer=1]="AudioPlayer",e[e.CapturePanel=2]="CapturePanel",e[e.CapturePreview=3]="CapturePreview",e[e.Moji=4]="Moji",e[e.SwiftVideo=5]="SwiftVideo",e[e.VideoViewer=6]="VideoViewer"}(c=t.AudioManagerSource||(t.AudioManagerSource={}));t.default=class{constructor(e){this._source=e,this._requestSequence=0}static initialize(){o.default.setConfig({cmc:a.default.getS4LCMCFeatures(),audio:a.default.getSkypeAudioLibraryFeatures()}),a.default.subscribe((()=>{o.default.setConfig({cmc:a.default.getS4LCMCFeatures(),audio:a.default.getSkypeAudioLibraryFeatures()})}))}hasToken(){return!n.isUndefined(this._token)}requestMode(e,t){const i=++this._requestSequence;let a,d;return n.isUndefined(this._token)?(a="request("+e+")",d=o.default.requestMode(e,t)):(a="exchange("+this._token+", "+e+")",d=o.default.exchangeMode(this._token,e,t)),l.log(r.LogTraceArea.AudioManagerClient,"("+c[this._source]+").requestMode calling AudioManager."+a+". causeId: "+t),d.then((e=>i===this._requestSequence?(l.log(r.LogTraceArea.AudioManagerClient,"("+c[this._source]+").requestMode completed with token "+e+". causeId: "+t),this._token=e,s.Resolved(!0)):(l.log(r.LogTraceArea.AudioManagerClient,"("+c[this._source]+").requestMode completed with token "+e+" - aborting because of subsequent request. causeId: "+t),o.default.release(e,t),s.Resolved(!1))))}release(e){this._requestSequence++,l.log(r.LogTraceArea.AudioManagerClient,"("+c[this._source]+").release("+this._token+"). causeId: "+e),n.isUndefined(this._token)||(o.default.release(this._token,e),this._token=void 0)}}},58187:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useCommonContext=t.CommonContext=t.ComponentVisibilityStatus=void 0;const n=i(67294),o=i(74634),s=i(98278),a=i(63841);t.ComponentVisibilityStatus=class{constructor(){this._isVisible=!0,this._visibilityChanged=new o.default}updateVisibility(e){this._isVisible!==e&&(this._isVisible=e,this._visibilityChanged.fire(e))}isVisibleEvent(){return this._visibilityChanged}isVisible(){return this._isVisible}},t.CommonContext=(0,n.createContext)({rootViewId:s.MainRootViewId,rootViewType:s.RootViewType.MainWindow,themeStyles:{},themeColors:{},language:"en-us",theme:a.Theme.Delphi,isRTL:!1});t.useCommonContext=()=>(0,n.useContext)(t.CommonContext)},63060:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(67294),s=i(61253);class a{equals(e){if(e===this)return!0;if(!e.isImmutable()!=!this.isImmutable())return!1;return(0,s.default)(this,e)}static comparator(e,t){if(e===t)return!0;if(null===e||null===t)return!1;const i=typeof e;if(i!==typeof t)return!1;if("object"!==i)return e!=e&&t!=t;if(e instanceof a)return t instanceof a&&e.equals(t);if(t instanceof a)return!1;if(o.isValidElement(e))return!!o.isValidElement(t)&&(e.key===t.key&&e.type===t.type&&!a.comparator(e.props,t.props)&&!a.comparator(e.state,t.state));if(n.isArray(e)){const i=e.length;if(!n.isArray(t)||i!==t.length)return!1;if(0===i)return!0;if(!a.comparator(e[0],t[0]))return!1;for(let n=i-1;n>0;n--)if(!a.comparator(e[n],t[n]))return!1;return!0}for(let i in e)if(Object.hasOwnProperty.call(e,i)){if(!Object.hasOwnProperty.call(t,i))return!1;if(!a.comparator(e[i],t[i]))return!1}for(let i in t)if(Object.hasOwnProperty.call(t,i)&&!Object.hasOwnProperty.call(e,i))return!1;return!0}}t.default=a},67213:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(71830),s=i(10102),a=i(24898),r=i(33754),l=i(4057);class c extends a.default{getRecordId(){return""}getSkypeId(){const e=this.getMri();return e?o.getSkypeIdFromMri(e):void 0}getMri(){}static convertDisplayNameToInitials(e){let t="?";const i=n.compact(e.split(" "));if(i.length>=2)t=r.getString("DisplayProfile.UsernameInitials",{firstNameLetter:l.default.substr(i[0],0,1),secondNameLetter:l.default.substr(i[1],0,1)});else if(1===i.length){const e=n.startsWith(i[0],"live:")?5:0;t=l.default.substr(i[0],e,2)}return t}static convertDisplayNameToUpperCaseInitials(e){const t=l.default.deburrLocaleUpperCase(e);return this.convertDisplayNameToInitials(t)}getDisplayName(e,t){const i=this.getMri();return i&&!o.isOrgIdUserMri(i)&&o.isDisplayableStrippedMri(i)?o.stripMriNamespace(i):e||r.getString("Notifications.UnknownUser")}getShortName(e){return n.first(n.compact(this.getDisplayName(void 0,e).split(" ")))||""}getInitials(){return c.convertDisplayNameToInitials(this.getDisplayName())}getUpperCaseInitials(){return c.convertDisplayNameToUpperCaseInitials(this.getDisplayName())}getAvatarUrl(e){}getColor(){return s.getDefaultUnknownColorInfo()}isEncrypted(){const e=this.getConversationId();return!!e&&o.isEncryptedThread(e)}getConversationId(){return this.getMri()}}t.default=c},24898:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(63060);class s extends o.default{constructor(e){if(super(),e)for(let t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}mergePartialUpdate(e){let t=Object.create(this.constructor.prototype);for(let e in this)this.hasOwnProperty(e)&&(t[e]=n.cloneDeep(this[e]));return n.each(e,((e,i)=>{t[i]=e})),t}}t.default=s},57199:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(63060);class o extends n.default{constructor(e){super(),this.value=e}isImmutable(){return!0}}t.default=o},81956:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(63060),o=i(4057);class s extends n.default{constructor(e,t){super(),e&&"string"==typeof e&&(this.rawToken=e,this.expiration=t)}static fromDbToken(e){if(e)return new s(e.rawToken,e.expiration)}isImmutable(){return!0}clone(){return new s(this.rawToken,this.expiration)}isTokenExpired(){return Date.now()>this.expiration}getCidFromSkypeToken(){var e;const t=this.rawToken.split(".");if(t.length<2)return;const i=o.default.parseJsonErrorToUndefined(atob(t[1]));return null===(e=null==i?void 0:i.cid)||void 0===e?void 0:e.toUpperCase()}}if(t.default=s,"undefined"!=typeof window){window.SkypeToken=s}},19061:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(71830),s=i(46096),a=i(18078),r=i(17093);class l{canNavigateInApp(){return!a.default.isGuestUser()}canForwardMessage(){return!a.default.isGuestUser()}canBookmarkMessage(){return!a.default.isGuestUser()}canUseKeyboardShortcut(e){return!a.default.isGuestUser()||n.includes(l._allowedGuestKeyboardShortcuts,e)}canStartConversationWith(e){return!o.isGuestUserMri(e)}canAddContact(e){return!o.isGuestUserMri(e)}canUseQuickSignOn(){return!a.default.isGuestUser()}allowGroupInteractionBetweenBlockedParticipants(e,t){return o.isGuestUserMri(e)||o.isGuestUserMri(t)}preserveOtherStoredAccounts(){return a.default.isGuestUser()}eligibleLeftNavViewModes(){if(a.default.isGuestUser())return l._eligibleLeftNavModesForGuestUsers}}l._allowedGuestKeyboardShortcuts=[s.KeyboardShortcut.AcceptIncomingCall,s.KeyboardShortcut.EditMessage,s.KeyboardShortcut.EnableMultipleSelectMessages,s.KeyboardShortcut.HangupOrRejectCall,s.KeyboardShortcut.MarkAsUnread,s.KeyboardShortcut.OpenAppSettings,s.KeyboardShortcut.OpenHelpInABrowser,s.KeyboardShortcut.SearchInConversation,s.KeyboardShortcut.SendFeedback,s.KeyboardShortcut.SendFile,s.KeyboardShortcut.TakeCallSnapshot,s.KeyboardShortcut.ToggleCamera,s.KeyboardShortcut.ToggleGallery,s.KeyboardShortcut.ToggleMicrophone],l._eligibleLeftNavModesForGuestUsers=[r.LeftNavViewMode.None,r.LeftNavViewMode.ConversationInCall],t.default=new l},5531:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(96486),s=i(88837),a=i(76358),r=i(61253);let l=class extends s.StoreBase{constructor(e){super(),this._providers=e}init(){o.each(a.providers,(e=>{e.subscribe&&e.subscribe((()=>{this._updateFlags()}))})),this._updateFlags()}_updateFlags(){const e=o.map(this._providers,(e=>e.flags())),t=o.mergeWith({},...e,((e,t)=>o.isBoolean(e)||o.isBoolean(t)?!1!==e&&!1!==t:void 0));(0,r.default)(this._merged,t)||(this._merged=t,this.trigger(1))}entitlements(){return this._merged.entitlements}userSettings(){return this._merged.userSettings}navigation(){return this._merged.navigation}addins(){return this._merged.addins}onboarding(){return this._merged.onboarding}identity(){return this._merged.identity}contacts(){return this._merged.contacts}meetnow(){return this._merged.meetnow}call(){return this._merged.call}cookie(){return this._merged.cookie}};(0,n.__decorate)([(0,s.autoSubscribeWithKey)(1)],l.prototype,"entitlements",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(1)],l.prototype,"userSettings",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(1)],l.prototype,"navigation",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(1)],l.prototype,"addins",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(1)],l.prototype,"onboarding",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(1)],l.prototype,"identity",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(1)],l.prototype,"contacts",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(1)],l.prototype,"meetnow",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(1)],l.prototype,"call",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(1)],l.prototype,"cookie",null),l=(0,n.__decorate)([s.AutoSubscribeStore],l),t.default=new l(o.values(a.providers))},18078:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(96486),s=i(88837),a=i(74634),r=i(97691);var l;!function(e){e[e.userCidUpdated=0]="userCidUpdated",e[e.userGuestUpdated=1]="userGuestUpdated"}(l||(l={}));let c=class extends s.StoreBase{constructor(){super(...arguments),this._logoutStarted=!1,this._mris=[],this.TextMessageMeMri="21:ME",this.userLoggedInUpdatedEvent=new a.default}internal_feedInfo(e,t,i,n,o,s){const a=[];e&&e!==this._skypeId&&(this._skypeId=e,this.userLoggedInUpdatedEvent.fire(!0),a.push(l.userGuestUpdated)),t&&(this._msaId=t),i&&this._cid!==i&&(this._cid=i,a.push(l.userCidUpdated)),n&&(this._cidHex=n);let r=[this.getSkypeMri()];if(this._msaId&&r.push("1:"+this._msaId),this._mris=r,this._cid){const e=this._cidDeferred;e&&(this._cidDeferred=void 0,e.resolve(this._cid))}if(this._cidHex){const e=this._cidHexDeferred;e&&(this._cidHexDeferred=void 0,e.resolve(this._cidHex))}o&&(this._msaIdFromSignIn=o),s&&(this._anid=s),a.length&&this.trigger(a)}getSkypeId(){return this._skypeId}hasSkypeId(){return!!this._skypeId}hasLogoutStarted(){return this._logoutStarted}logoutUser(){this.isUserLoggedIn()&&(this._logoutStarted=!0,this.userLoggedInUpdatedEvent.fire(!1))}isUserLoggedIn(){return this._skypeId&&!this._logoutStarted}getDisplayableSecondaryIdentifier(){const e=this.getSkypeId();return o.startsWith(e,"live:")?this.getMsaId():e}getMsaId(){return this._msaId}getUserCidHex(){return this._cidHex?this._cidHex:void 0}getUserCidHexAsync(){return this._cidHex?r.Resolved(this._cidHex):(this._cidHexDeferred||(this._cidHexDeferred=r.Defer()),this._cidHexDeferred.promise())}getSkypeMri(){return"8:"+this._skypeId}isMyMri(e){return o.includes(this._mris,e)||e.toLowerCase()===this.TextMessageMeMri.toLowerCase()}getMyMris(){return o.clone(this._mris)}getUserCidAsync(){return this._cid?r.Resolved(this._cid):(this._cidDeferred||(this._cidDeferred=r.Defer()),this._cidDeferred.promise())}getUserCid(){return this._cid?this._cid:void 0}getMsaIdFromSignIn(){return this._msaIdFromSignIn}isGuestUser(){return o.startsWith(this._skypeId,"guest:")}getAnid(){return this._anid}test_reset(){0}};(0,n.__decorate)([s.disableWarnings],c.prototype,"getSkypeId",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"hasSkypeId",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"hasLogoutStarted",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"logoutUser",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"isUserLoggedIn",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"getDisplayableSecondaryIdentifier",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"getMsaId",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"getUserCidHex",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"getUserCidHexAsync",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"getSkypeMri",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"isMyMri",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"getMyMris",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"getUserCidAsync",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(l.userCidUpdated)],c.prototype,"getUserCid",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"getMsaIdFromSignIn",null),(0,n.__decorate)([s.disableWarnings],c.prototype,"isGuestUser",null),c=(0,n.__decorate)([s.AutoSubscribeStore],c),t.default=new c},29330:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.internal_feedAndPersistInfo=void 0;const n=i(97691),o=i(62141),s=i(98754),a=i(61253),r=i(18078),l=i(27683);i(22538);t.internal_feedAndPersistInfo=function(e,t,i,c,d,u){const g=s.default.getData(o.InternalKeys.MyUserStoreData)||{};let h;t&&(-1!==t.indexOf("@")||l.default.isValidNumberString(t))&&(h=t);const p={},m=i||r.default.getUserCid()||g.msaCid,S=c||r.default.getUserCidHex()||g.msaCidHex;let C;return h=h||r.default.getMsaId()||g.msaId,t=t||r.default.getMsaIdFromSignIn()||g.msaIdFromSignIn,u=u||r.default.getAnid()||g.anid,m&&(p.msaCid=m),S&&(p.msaCidHex=S),h&&(p.msaId=h),t&&(p.msaIdFromSignIn=t),u&&(p.anid=u),C=(0,a.default)(p,g)?n.Resolved():s.default.putData(o.InternalKeys.MyUserStoreData,p,d),r.default.internal_feedInfo(e,p.msaId,p.msaCid,p.msaCidHex,p.msaIdFromSignIn,p.anid),C}},40363:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(15069),s=i(16778),a=i(46096),r=i(72731),l=i(53469),c=i(53374);let d=i(51046);const u=/[^\u0009\u000A\u000D\u0020-\u007E\u0085\u00A0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFFD]/gm;const g=new class{constructor(){this._sessionId=c.default.newGuid()}initialize(e){var t;this._appShellType=a.AppShellType.Browser,this._frontendHost=e.frontendHostOverride||"web.skype.com",this._loadPath=e.loadPath||"",this._loadPathFragment=e.loadPathFragment||"",this._initialSkypeURI=e.initialSkypeURI,this._usePluginlessCallingStack=e.usePluginlessCallingStack||!1;let i=(e.appVersion||"").split(".");if(4===i.length)this._appVersion=e.appVersion;else{let e=4-i.length;for(;e>0;)i.push("0"),e--;this._appVersion=n.take(i,4).join(".")}if(this._osVersion=o.EnvironmentInfo.OsVersion,this._locale=o.EnvironmentInfo.SystemLocale,this._systemModel=o.EnvironmentInfo.SystemModel,this._deviceId=o.EnvironmentInfo.DeviceId,this._androidOsVersionCode=o.EnvironmentInfo.AndroidOsVersionCode,this._uwpPackageVersion=o.EnvironmentInfo.UWPPackageVersion,this._msixPackageVersion=o.EnvironmentInfo.MSIXPackageVersion,this._cpuCount=o.EnvironmentInfo.CPUCount?o.EnvironmentInfo.CPUCount:void 0,this._cpuSpeedMhz=o.EnvironmentInfo.CPUSpeed?Math.round(o.EnvironmentInfo.CPUSpeed/1e3):void 0,this._chipset=o.EnvironmentInfo.Chipset,this._deviceName=o.EnvironmentInfo.DeviceName,this._deviceType=o.EnvironmentInfo.DeviceType,this._systemManufacturer=o.EnvironmentInfo.SystemManufacturer,this._languageCode=o.EnvironmentInfo.SystemLanguage,this._countryCode=o.EnvironmentInfo.SystemCountry,this._appIdentifier=o.EnvironmentInfo.AppIdentifier,this._preInstallPartnerId=o.EnvironmentInfo.PreInstallPartnerId,this._mccCode=o.EnvironmentInfo.NetworkMCCCode,this._mncCode=o.EnvironmentInfo.NetworkMNCCode,this._cpuAbi=o.EnvironmentInfo.CpuAbi,this._androidPrivateCpuAbi=o.EnvironmentInfo.AndroidPrivateCpuAbi,this._isChromeOS=o.EnvironmentInfo.IsChromeOS,this._isFireOS=o.EnvironmentInfo.IsFireOS,this._isDuoDevice=o.EnvironmentInfo.IsDuoDevice,this._isIpadOnly=o.EnvironmentInfo.IsIpadOnly,null===(t=e.loadPath)||void 0===t?void 0:t.search("correlationId")){const t=e.loadPath.substring(e.loadPath.indexOf("?")+1,e.loadPath.length).split("&");let i;n.each(t,(e=>{const t=e.split("=");"correlationId"===t[0]&&(i=t[1])})),i&&(this._sessionId=i)}{const e=this._locale.split("-");this._languageCode=e.shift(),e.length?this._countryCode=e.join("-"):this._countryCode=r.getDefaultLocale(this._languageCode).toUpperCase()}this._appInitTime=e.startupTimestamp,this._appLoadDuration=e.loadDuration,e.skypeData&&(this._errorText=e.skypeData.errorText,this._startupSkypeId=e.skypeData.startupSkypeId,this._startupSignInName=e.skypeData.startupSignInName,this._startupRawSkypeToken=e.skypeData.startupRawSkypeToken,this._startupSkypeTokenExpiration=e.skypeData.startupSkypeTokenExpiration),this._corporateInstallationTag=o.EnvironmentInfo.CorporateInstallationTag}setChatEndpointId(e){this._chatEndpointId=e}getChatEndpointId(){return this._chatEndpointId}getEchoMri(){return"8:echo123"}getCallLogMri(){return"48:calllogs"}getBlockedPSTNMri(){return"4:+000000"}getDocRoot(){return""}getSoundPath(e=""){return this.getDocRoot()+"media/"+e}getWasmPath(e){return this.getDocRoot()+"resources/"+e}getProtocol(){return"undefined"!=typeof location&&void 0!==location.protocol?location.protocol:"https:"}getFrontendHost(){return this._frontendHost}getFrontendBaseUrl(){return this.getProtocol()+"//"+this._frontendHost}getOAuthEndUrl(){return this.getFrontendBaseUrl()+"/oauthcallback"}deprecatedGetAppShellType(){return this._appShellType}getAppShellTypeName(){return a.AppShellType[this.deprecatedGetAppShellType()]}getPlatformType(){return o.EnvironmentInfo.getPlatformType()}isWindowCloseOnRight(){return this.getPlatformType()===o.PlatformType.Windows||this.getPlatformType()===o.PlatformType.Linux}getPreInstallPartnerId(){return this._preInstallPartnerId}getPlatformTypeName(){return o.EnvironmentInfo.getPlatformTypeName()}getOSVersion(){return this._osVersion}getAndroidOSVersionCode(){return this._androidOsVersionCode}isChromeOS(){return!!this._isChromeOS}isFireOS(){return!!this._isFireOS}isIpadOnly(){return!!this._isIpadOnly}isDuoDevice(){return!!this._isDuoDevice}getDeviceName(e=!0){const t=this._deviceName||this.getSystemModel();return e?t.replace(u," "):t}getIOSModel(){if(this.getPlatformType()!==o.PlatformType.iOS||!this._deviceType)return a.IOSModel.None;switch(this._deviceType.toLowerCase()){case"ipad":return a.IOSModel.iPad;case"iphone":return a.IOSModel.iPhone;case"ipod touch":return a.IOSModel.iPodTouch;default:return a.IOSModel.None}}getCPUCount(){return this._cpuCount}getCPUSpeedMhz(){return this._cpuSpeedMhz}getChipset(){return this._chipset}getDeviceId(){return this._deviceId}getSystemModel(){return this._systemModel}getSystemManufacturer(){return this._systemManufacturer||""}getSystemLocale(){return this._locale}getCountryCode(){return this._countryCode}getSystemLanguage(){return this._languageCode}getAppInitTime(){return this._appInitTime}getAppLoadDuration(){return this._appLoadDuration}getSessionId(){return this._sessionId}shouldUsePluginlessCallingStack(){return this._usePluginlessCallingStack}getMccCode(){return this._mccCode}getMncCode(){return this._mncCode}getXSkypeCallerHeader(){return`Skype4Life ${this.getAppShellTypeName()} ${this.getPlatformTypeName()} (${this.getAppVersion()})`}isDebug(){return!1}getAppVersion(){return this._appVersion}getUWPPackageVersion(){return this._uwpPackageVersion}getMSIXPackageVersion(){return this._msixPackageVersion}getAppIdentifier(){return this._appIdentifier}_getCpuType(){return this._androidPrivateCpuAbi||this._cpuAbi||""}_getAppCenterConfig(){let e;return e={appSecret:d.appSecret},e}getAppCenterSecret(){return this._getAppCenterConfig().appSecret||""}getSkypePlatformId(){return l.default.platformId.web}getClientId(){return l.default.clientId}isS4LPlatformId(e){return n.some(l.default.platformId,(t=>t===e))}getUIVersion(){return this.getSkypePlatformId()+"/"+this.getAppVersion()}getUIVersionWithPartnerID(){let e=this.getUIVersion(),t=this.getPreInstallPartnerId();return t&&(e=e+"/"+t),e}getInitialUrl(){return this._initialSkypeURI||this.getFrontendBaseUrl()+this._loadPath}getLoadPath(){return this._loadPath}getLoadPathFragment(){return this._loadPathFragment}getErrorText(){return this._errorText}getStartupSkypeId(){return this._startupSkypeId}getStartupRawSkypeToken(){return this._startupRawSkypeToken}getStartupSignInName(){return this._startupSignInName}getStartupSkypeTokenExpiration(){return this._startupSkypeTokenExpiration}getAriaTenantToken(){return l.default.telemetry.ariaTenantToken}getAriaTelemetryTenantToken(){return l.default.telemetry.ariaTelemetryTenantToken}getAriaCallingTenantToken(){return l.default.telemetry.calling.ariaCallingTenantToken}getAriaAddinTenantToken(){return l.default.telemetry.ariaAddinTenantToken}getAriaCQFTenantToken(){return this.getAriaPluginlessMediaTenantToken()}getAriaPluginlessMediaTenantToken(){return l.default.telemetry.calling.ariaPluginlessMediaTenantToken}getAriaCommerceTenantToken(){return l.default.telemetry.ariaCommerceTenantTokenLIVE}getAriaSkypeFraudTelemetryTenantToken(){return l.default.telemetry.ariaSkypeFraudTelemetryTenantToken}getAriaPluginlessTrouterTenantToken(){return l.default.telemetry.calling.ariaPluginlessTrouterTenantToken}getFootprintTenantId(){return l.default.footprintTenantId}isUsingExperimentalNav(){return!1}isRTL(){return s.International.isRTL()}isElectronOsx(){return!1}isElectronWindows(){return!1}isElectronLinux(){return!1}isAnyWindowsOrOsx(){return this.isElectronWindows()||this.isElectronOsx()}isWindows11(){return this._isExpectedRSVersion((e=>e>=a.RSVersion.TwentyOneH2))}isWindows10(){return this._isExpectedRSVersion((e=>e<a.RSVersion.TwentyOneH2),(e=>10===e))}isWindows10Plus(){return this.isElectronWindows()&&(this.isWindows10()||this.isWindows11())}isCurrentRSVersionGreaterThan(e){return this._isExpectedRSVersion((t=>t>e))}isCurrentRSVersionEqualOrGreaterThan(e){return this._isExpectedRSVersion((t=>t>=e))}isCorporateInstallation(){return!n.isUndefined(this._corporateInstallationTag)}getCorporateInstallationTag(){return this._corporateInstallationTag||""}getCrashReportingAppId(){return"web.skype.com"===this._frontendHost?l.default.crashReporting.web.marketAppId:-1!==this._frontendHost.indexOf("preview.web.skype.com")?l.default.crashReporting.web.previewAppId:"0.0.84.1"===this.getAppVersion()||-1!==this._frontendHost.indexOf("dev.web.skype.com")?l.default.crashReporting.web.devAppId:-1!==this._frontendHost.indexOf("latest.web.skype.com")?l.default.crashReporting.web.latestAppId:void 0}isAlexaPlatformId(e){return e===l.default.platformId.alexa}getClientVersionAndPlatform(){return`${this.getSkypePlatformId()}/${this.getAppVersion()}`}_isExpectedRSVersion(e,t){const i=this.getOSVersion(),n=i.split(".")[2];if(t){const o=i.split(".")[0];return t(parseInt(o,10))&&e(parseInt(n,10))}return e(parseInt(n,10))}};t.default=g},76358:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.emptyProviderFlags=t.providers=void 0;const n=i(15069),o=i(88837),s=i(89391),a=i(18078);class r extends o.StoreBase{constructor(){super(),this.key="guest",this.flags=()=>({entitlements:{canHaveEntitlements:!this._isGuestUser},userSettings:{canChangeAppearance:!this._isGuestUser},navigation:{canAccessProfileSettings:!this._isGuestUser,canAccessGeneralSettings:!this._isGuestUser,canAccessCallingSettings:!this._isGuestUser,canAccessMessagingSettings:!this._isGuestUser,canAccessConversationDetails:!this._isGuestUser,canAccessRecentsList:!this._isGuestUser,canAccessUserDetails:!this._isGuestUser,canAccessPaymentsSettings:!this._isGuestUser},addins:{canSetupNativeReminders:void 0,canSetupInAppReminders:void 0,canUseAddins:!this._isGuestUser},onboarding:{canSeeCoachMarks:!this._isGuestUser,canSeeTutorial:!this._isGuestUser},identity:{canSeeGuestUpsell:this._isGuestUser,canUseSlashCommands:!this._isGuestUser},contacts:{canInvitePeople:!this._isGuestUser,canHaveContacts:!this._isGuestUser},meetnow:{canInvitePeople:!this._isGuestUser,canRequestPermissionsBeforeNavigation:!this._isGuestUser,canSetupLeftNavigation:!this._isGuestUser,canNavigateBackFromJoinInvite:!this._isGuestUser,canEditMeetingName:!this._isGuestUser,isUserNameRequired:this._isGuestUser},call:{canRefreshTokenBeforeRecordingCall:!this._isGuestUser,canSendMessageToParticipant:!this._isGuestUser,canProvideSpeechConsent:!this._isGuestUser,canEndCallForAll:!this._isGuestUser},cookie:{canSetThirdPartyCookies:void 0}}),a.default.subscribe((()=>{const e=a.default.isGuestUser();this._isGuestUser!==e&&(this._isGuestUser=e,this.trigger())})),this._isGuestUser=a.default.isGuestUser()}}const l=new r;class c extends o.StoreBase{constructor(){super(),this.flags=()=>({entitlements:{canHaveEntitlements:void 0},userSettings:{canChangeAppearance:void 0},navigation:{canAccessProfileSettings:void 0,canAccessGeneralSettings:void 0,canAccessCallingSettings:void 0,canAccessMessagingSettings:void 0,canAccessConversationDetails:void 0,canAccessRecentsList:void 0,canAccessUserDetails:void 0,canAccessPaymentsSettings:void 0},addins:{canSetupNativeReminders:void 0,canSetupInAppReminders:void 0,canUseAddins:void 0},onboarding:{canSeeCoachMarks:void 0,canSeeTutorial:void 0},identity:{canSeeGuestUpsell:void 0,canUseSlashCommands:void 0},contacts:{canInvitePeople:void 0,canHaveContacts:void 0},meetnow:{canInvitePeople:void 0,canRequestPermissionsBeforeNavigation:void 0,canSetupLeftNavigation:void 0,canNavigateBackFromJoinInvite:void 0,canEditMeetingName:void 0,isUserNameRequired:void 0},call:{canRefreshTokenBeforeRecordingCall:void 0,canSendMessageToParticipant:void 0,canProvideSpeechConsent:void 0,canEndCallForAll:void 0},cookie:{canSetThirdPartyCookies:void 0}}),s.default.subscribe((()=>{this.trigger()}))}}const d=new c;const u=new class{constructor(){this.key="platform",this.flags=()=>({entitlements:{canHaveEntitlements:void 0},userSettings:{canChangeAppearance:void 0},navigation:{canAccessProfileSettings:void 0,canAccessGeneralSettings:void 0,canAccessCallingSettings:void 0,canAccessMessagingSettings:void 0,canAccessConversationDetails:void 0,canAccessRecentsList:void 0,canAccessUserDetails:void 0,canAccessPaymentsSettings:void 0},addins:{canSetupNativeReminders:!1,canSetupInAppReminders:!1,canUseAddins:void 0},onboarding:{canSeeCoachMarks:void 0,canSeeTutorial:void 0},identity:{canSeeGuestUpsell:void 0,canUseSlashCommands:void 0},contacts:{canInvitePeople:void 0,canHaveContacts:void 0},meetnow:{canInvitePeople:void 0,canRequestPermissionsBeforeNavigation:void 0,canSetupLeftNavigation:void 0,canNavigateBackFromJoinInvite:void 0,canEditMeetingName:void 0,isUserNameRequired:void 0},call:{canRefreshTokenBeforeRecordingCall:void 0,canSendMessageToParticipant:void 0,canProvideSpeechConsent:void 0,canEndCallForAll:void 0},cookie:{canSetThirdPartyCookies:!n.BrowserEnvironment.isEngineWebkit()}})}};t.providers={ecsProvider:d,guestProvider:l,platformProvider:u},t.emptyProviderFlags={entitlements:{canHaveEntitlements:void 0},userSettings:{canChangeAppearance:void 0},navigation:{canAccessProfileSettings:void 0,canAccessGeneralSettings:void 0,canAccessCallingSettings:void 0,canAccessMessagingSettings:void 0,canAccessConversationDetails:void 0,canAccessRecentsList:void 0,canAccessUserDetails:void 0,canAccessPaymentsSettings:void 0},addins:{canSetupNativeReminders:void 0,canSetupInAppReminders:void 0,canUseAddins:void 0},onboarding:{canSeeCoachMarks:void 0,canSeeTutorial:void 0},identity:{canSeeGuestUpsell:void 0,canUseSlashCommands:void 0},contacts:{canInvitePeople:void 0,canHaveContacts:void 0},meetnow:{canInvitePeople:void 0,canRequestPermissionsBeforeNavigation:void 0,canSetupLeftNavigation:void 0,canNavigateBackFromJoinInvite:void 0,canEditMeetingName:void 0,isUserNameRequired:void 0},call:{canRefreshTokenBeforeRecordingCall:void 0,canSendMessageToParticipant:void 0,canProvideSpeechConsent:void 0,canEndCallForAll:void 0},cookie:{canSetThirdPartyCookies:void 0}}},77523:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ASMClientFailure=void 0;const n=i(349);class o extends n.TelemetryEventBase{constructor(e,t,i,n){super(),this._serviceName=e,this._statusCode=t,this._scenario=i,this._tracingHeaders=n}getEventName(){return"ams_failure"}getAttributes(){let e=super.getAttributes();return e.service_name=this._serviceName,e.scenario=this._scenario,e.status_code=this._statusCode,e.request_id=this._tracingHeaders.requestId,e.correlation_id=this._tracingHeaders.correlationId,this._tracingHeaders.transactionId&&(e.transaction_id=this._tracingHeaders.transactionId),e}}t.ASMClientFailure=o},94011:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TrackForwarding=t.trackActionEvent=t.trackActionRender=t.trackImageLoadError=t.trackRenderTime=void 0;const n=i(71830),o=i(36237),s=i(349),a=i(72758);var r,l,c;!function(e){e[e.Agent=0]="Agent",e[e.Connector=1]="Connector",e[e.Unknown=2]="Unknown",e[e.User=3]="User"}(r||(r={})),function(e){e[e.Rendered=0]="Rendered",e[e.Executed=1]="Executed"}(l||(l={})),function(e){e[e.Forwarded=0]="Forwarded",e[e.ImageLoadError=1]="ImageLoadError"}(c||(c={}));class d extends s.TelemetryEventBase{constructor(e){super(),this._sender=e}getEventName(){return"caap_adaptivecard"}getAttributes(){let e=super.getAttributes();return e.SenderType=r[C(this._sender)],this._allowedToTrackPII(this._sender)&&(e.SenderIdentity=this._sender,e.SenderName=a.default.getDisplayableUserByMri(this._sender).getDisplayName()),e}_allowedToTrackPII(e){return[r.Agent,r.Connector].indexOf(C(e))>=0}}class u extends d{constructor(e,t){super(e),this._renderTime=t}getAttributes(){let e=super.getAttributes();return e.RenderTime=this._renderTime,e}}class g extends d{getAttributes(){let e=super.getAttributes();return e.Action=c[c.ImageLoadError],e}}class h extends d{constructor(e,t){super(e),this._action=t}}class p extends h{getAttributes(){let e=super.getAttributes();return e.Action=l[l.Rendered],e.Type=this._action.type,e}}class m extends h{getAttributes(){let e=super.getAttributes();return e.Action=l[l.Executed],e.Type=this._action.type,e}}class S extends d{getAttributes(){let e=super.getAttributes();return e.Action=c[c.Forwarded],e}}function C(e){let t=r.Unknown;return n.isAgent(e)?t=r.Agent:n.isConnector(e)?t=r.Connector:n.isUserMri(e)&&(t=r.User),t}t.trackRenderTime=function(e,t){o.track(new u(e,t))},t.trackImageLoadError=function(e,t){o.track(new g(e))},t.trackActionRender=function(e,t){o.track(new p(e,t))},t.trackActionEvent=function(e,t){o.track(new m(e,t))},t.TrackForwarding=function(e){o.track(new S(e))}},52256:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdIdProvisioningEvent=void 0;const n=i(96486),o=i(349);class s extends o.TelemetryEventBase{constructor(e,t){super(),this._msacid=e,this._adId=t}getEventName(){return s.EventName}getAttributes(){return n.assign(super.getAttributes(),{ad_id:this._adId||"",MSACID:this._msacid})}shouldExcludeUserIdentificationInfo(){return!0}shouldExcludeDeviceIdentificationInfo(){return!0}getPiiAttributes(){return{}}}t.AdIdProvisioningEvent=s,s.EventName="adid_provisioning"},82192:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AlertClicked=t.AlertsPanelOpened=void 0;const n=i(96486),o=i(46096),s=i(349);class a extends s.TelemetryEventBase{getEventName(){return"all_notifications_panel"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}t.AlertsPanelOpened=class extends a{constructor(e,t){super(),this._alertTypesInfo=e,this._conversationsCount=t}getActionName(){return"Opened"}getAttributes(){return n.assign({},super.getAttributes(),{ReactionItemsCount:this._alertTypesInfo.reactionsCount,EngagementItemsCount:this._alertTypesInfo.engagementsCount,QuoteItemsCount:this._alertTypesInfo.quotesCount,MentionItemsCount:this._alertTypesInfo.mentionsCount,ConversationsCount:this._conversationsCount})}};t.AlertClicked=class extends a{constructor(e){super(),this._type=e}getActionName(){return"ItemClicked"}getAttributes(){return n.assign({},super.getAttributes(),{Type:o.AlertTypeForTelemetry[this._type]})}}},71657:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommerceStratusRequest=t.ApiTelemetryEventBase=t.StratusApiTelemetry=void 0;const n=i(96486),o=i(40363),s=i(349);var a;!function(e){e[e.CreateSkypeOrder=0]="CreateSkypeOrder",e[e.GetAtuContract=1]="GetAtuContract",e[e.ReactivateCredit=2]="ReactivateCredit",e[e.GetNonceForSsoLogin=3]="GetNonceForSsoLogin",e[e.GetCurrencyConversion=4]="GetCurrencyConversion",e[e.ProcessIOSTransaction=5]="ProcessIOSTransaction",e[e.ValidateIOSProductAvailability=6]="ValidateIOSProductAvailability",e[e.PostIOSTransactionStatus=7]="PostIOSTransactionStatus",e[e.ProcessGPlayTransaction=8]="ProcessGPlayTransaction",e[e.ValidateGPlayProductAvailability=9]="ValidateGPlayProductAvailability",e[e.ProcessGPlayReceipt=10]="ProcessGPlayReceipt",e[e.PostGPlayTransactionStatus=11]="PostGPlayTransactionStatus",e[e.CancelGPlayOrder=12]="CancelGPlayOrder",e[e.GetOrderDetails=13]="GetOrderDetails",e[e.GetAtuLimits=14]="GetAtuLimits",e[e.CancelAtu=15]="CancelAtu",e[e.EnableAtu=16]="EnableAtu",e[e.GetPurchaseOptions=17]="GetPurchaseOptions",e[e.GetCallerIdSettings=18]="GetCallerIdSettings",e[e.GetCallerIdNumbers=19]="GetCallerIdNumbers",e[e.AddCallerIdNumber=20]="AddCallerIdNumber",e[e.VerifyCallerIdNumber=21]="VerifyCallerIdNumber",e[e.RemoveCallerIdNumber=22]="RemoveCallerIdNumber",e[e.SetCallerId=23]="SetCallerId",e[e.DisableCallerId=24]="DisableCallerId",e[e.GetCallerIdAutoSelectNumbers=25]="GetCallerIdAutoSelectNumbers",e[e.SetCallerIdAutoSelect=26]="SetCallerIdAutoSelect",e[e.GetCallerIdCountries=27]="GetCallerIdCountries",e[e.GetCallingDestinations=28]="GetCallingDestinations",e[e.GetOffersCredit=29]="GetOffersCredit",e[e.GetOffersSubscriptions=30]="GetOffersSubscriptions",e[e.GetAvailableCountries=31]="GetAvailableCountries",e[e.GetCountryAreas=32]="GetCountryAreas",e[e.GetCountryPrefixes=33]="GetCountryPrefixes",e[e.GetCountryAreaPrefixes=34]="GetCountryAreaPrefixes",e[e.GetSuggestedNumberByCountry=35]="GetSuggestedNumberByCountry",e[e.GetSuggestedNumberByPrefix=36]="GetSuggestedNumberByPrefix",e[e.ReserveSkypeNumber=37]="ReserveSkypeNumber",e[e.GetConsumerEntitlement=38]="GetConsumerEntitlement",e[e.FetchSkypeNumbers=39]="FetchSkypeNumbers",e[e.GetEntitlementRecommendations=40]="GetEntitlementRecommendations",e[e.GetSubscriptionOffers=41]="GetSubscriptionOffers",e[e.GetUpgradeRecommendations=42]="GetUpgradeRecommendations",e[e.GetCallEventRecommendations=43]="GetCallEventRecommendations",e[e.GetSMSRatesOldApi=44]="GetSMSRatesOldApi",e[e.GetSMSRates=45]="GetSMSRates",e[e.GetBillingPeriods=46]="GetBillingPeriods",e[e.GetBillingPeriodsAssets=47]="GetBillingPeriodsAssets",e[e.GetSendCreditOptions=48]="GetSendCreditOptions",e[e.GetSendCreditOrderStatus=49]="GetSendCreditOrderStatus",e[e.CheckSendCreditBeneficiaryEligibility=50]="CheckSendCreditBeneficiaryEligibility",e[e.SendCredit=51]="SendCredit",e[e.GetBillingInformations=52]="GetBillingInformations"}(a=t.StratusApiTelemetry||(t.StratusApiTelemetry={}));class r extends s.TelemetryEventBase{getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}t.ApiTelemetryEventBase=r;t.CommerceStratusRequest=class extends r{constructor(e){super(),this._props={},this._props.ApiFunction=a[e],this._startTime=Date.now()}getEventName(){return"s4l_stratus_commerce"}getAriaTenantTokenOverride(){return o.default.getAriaCommerceTenantToken()}getActionName(){return"StratusRequest"}stopTimer(){return this._props.TimeSpent=String(Date.now()-this._startTime),this}addAttributes(e){return this._props.Method=e.method,this._props.AcceptType=e.acceptType,this._props.EndpointUrl=e.endpointUrl,this._props.StatusCode=e.statusCode,this._props.StratusStatusCode=e.stratusStatusCode,this}getAttributes(){return n.assign(super.getAttributes(),this._props)}}},2162:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SkypeCdnTokenFailure=void 0;const n=i(46096),o=i(349);class s extends o.TelemetryEventBase{constructor(e,t,i){super(),this._failureOrigin=e,this._statusCode=t,this._statusText=i}getEventName(){return"skype_cdn_token_failure"}getAttributes(){let e=super.getAttributes();return e.status_code=this._statusCode?this._statusCode:-1,e.status_text=this._statusText?this._statusText:" ",e.failure_origin=n.SkypeCdnTokenFailureOrigin[this._failureOrigin],e}}t.SkypeCdnTokenFailure=s},2159:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AutoRechargeDisabled=t.AutoRechargeEnabled=t.AutoRechargeModalOpenDisabled=t.AutoRechargeModalOpenEnabled=t.AutoRechargeToggleInactive=t.AutoRechargeToggleDisabled=t.AutoRechargeToggleEnabled=t.AtuEventTypes=void 0;const n=i(40363),o=i(349);var s;!function(e){e.AtuToggleEnabled="AutoRechargeToggleEnabled",e.AtuToggleDisabled="AutoRechargeToggleDisabled",e.AtuToggleInactive="AutoRechargeToggleInactive",e.AtuModalOpenEnabled="AutoRechargeModalOpenEnabled",e.AtuModalOpenDisabled="AutoRechargeModalOpenDisabled",e.AtuEnabled="AutoRechargeEnabled",e.AtuDisabled="AutoRechargeDisabled"}(s=t.AtuEventTypes||(t.AtuEventTypes={}));class a extends o.TelemetryEventBase{getEventName(){return"s4l_atu"}getAriaTenantTokenOverride(){return n.default.getAriaCommerceTenantToken()}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}t.AutoRechargeToggleEnabled=class extends a{getActionName(){return s.AtuToggleEnabled}};t.AutoRechargeToggleDisabled=class extends a{getActionName(){return s.AtuToggleDisabled}};t.AutoRechargeToggleInactive=class extends a{getActionName(){return s.AtuToggleInactive}};t.AutoRechargeModalOpenEnabled=class extends a{getActionName(){return s.AtuModalOpenEnabled}};t.AutoRechargeModalOpenDisabled=class extends a{getActionName(){return s.AtuModalOpenDisabled}};t.AutoRechargeEnabled=class extends a{getActionName(){return s.AtuEnabled}};t.AutoRechargeDisabled=class extends a{getActionName(){return s.AtuDisabled}}},40196:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PESAvatarChanged=t.AvatarPickerAction=void 0;const n=i(96486),o=i(349),s=i(46096);var a;!function(e){e[e.EmoticonAvatarSelected=0]="EmoticonAvatarSelected",e[e.ImageAvatarSelected=1]="ImageAvatarSelected",e[e.MeetNowAvatarSelected=2]="MeetNowAvatarSelected",e[e.ImageUploadError=3]="ImageUploadError",e[e.StickerAvatarSelected=4]="StickerAvatarSelected"}(a=t.AvatarPickerAction||(t.AvatarPickerAction={}));class r extends o.TelemetryEventBase{constructor(e,t){super(),this._action=e,this._triggeredBy=t}getEventName(){return"messaging_avatarpicker"}getAttributes(){const e=super.getAttributes();return e.Action=a[this._action],this._triggeredBy&&(e.TriggeredBy=this._triggeredBy),e}}t.PESAvatarChanged=class extends r{constructor(e,t,i,n,o,s){super(e,t),this._isSuccess=i,this._isUserAvatar=n,this._errorType=o,this._errorStatusCode=s}getAttributes(){let e=super.getAttributes();return e.IsSuccess=this._isSuccess,e.IsUserAvatar=this._isUserAvatar,n.isUndefined(this._errorType)||(e.ErrorType=s.AvatarChangeError[this._errorType]),n.isUndefined(this._errorStatusCode)||(e.ErrorCode=this._errorStatusCode),e}}},43858:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BingPermissionsInteractionEvent=t.BingInteractionEvent=void 0;const n=i(2604),o=i(46096),s=i(349);class a extends s.TelemetryEventBase{getEventName(){return"caap_bing"}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}t.BingInteractionEvent=class extends a{constructor(e){super(),this._entryPoint=e}getActionName(){return"bing_interaction"}getAttributes(){const e=super.getAttributes();return e.InteractionType=o.BingEntryPoint[this._entryPoint],e}};t.BingPermissionsInteractionEvent=class extends a{constructor(e,t){super(),this._entryPoint=e,this._permissionStatus=t}getActionName(){return"bing_location_permissions"}getAttributes(){const e=super.getAttributes();return e.PermissionEntryPoint=o.BingPermissionsEntryPoint[this._entryPoint],e.Status=this._stringFromPermissionStatus(),e}_stringFromPermissionStatus(){switch(this._permissionStatus){case n.PermissionStatus.Denied:return"Denied";case n.PermissionStatus.Granted:return"Granted";case n.PermissionStatus.Unavailable:return"Unavailable";case n.PermissionStatus.Unknown:default:return"Unknown"}}}},49758:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AutoAddBotExperiment=t.BotShareInteraction=t.BotMessageInteraction=t.BotContactInteraction=t.BotChatInteraction=t.BotCategoryMoreInteraction=t.BotProfileInteraction=t.BotInteraction=void 0;const n=i(46096),o=i(349);class s extends o.TelemetryEventBase{getEventName(){return"caap_bot"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}t.BotInteraction=class extends s{constructor(e){super(),this._interaction=e}getActionName(){return n.BotsInteraction[this._interaction]}};t.BotProfileInteraction=class extends s{constructor(e,t,i){super(),this._botId=e,this._botName=t,this._isViewingProfile=i}getActionName(){return this._isViewingProfile?n.BotsInteraction[n.BotsInteraction.ViewBotProfile]:n.BotsInteraction[n.BotsInteraction.CloseBotProfile]}getAttributes(){let e=super.getAttributes();return e.BotID=this._botId,e.BotName=this._botName,e}};t.BotCategoryMoreInteraction=class extends s{constructor(e){super(),this._category=e}getActionName(){return n.BotsInteraction[n.BotsInteraction.ClickMoreForCategory]}getAttributes(){let e=super.getAttributes();return e.Category=this._category,e}};t.BotChatInteraction=class extends s{constructor(e,t,i,n){super(),this._botId=e,this._botName=t,this._isBotAContact=i,this._originatingPanel=n}getActionName(){return n.BotsInteraction[n.BotsInteraction.ClickChatWithBot]}getAttributes(){let e=super.getAttributes();return e.BotID=this._botId,e.BotName=this._botName,e.IsBotAContact=this._isBotAContact,e.OriginatingPanel=n.BotsOriginatingPanel[this._originatingPanel],e}};t.BotContactInteraction=class extends s{constructor(e,t,i){super(),this._botInteraction=e,this._botId=t,this._botName=i}getActionName(){return n.BotsInteraction[this._botInteraction]}getAttributes(){let e=super.getAttributes();return e.BotID=this._botId,e.BotName=this._botName,e}};t.BotMessageInteraction=class extends s{constructor(e,t){super(),this._botId=e,this._botName=t}getActionName(){return n.BotsInteraction[n.BotsInteraction.MessageBot]}getAttributes(){let e=super.getAttributes();return e.BotID=this._botId,e.BotName=this._botName,e}};t.BotShareInteraction=class extends s{constructor(e,t,i){super(),this._botId=e,this._botName=t,this._originatingPanel=i}getActionName(){return n.BotsInteraction[n.BotsInteraction.ClickShareBot]}getAttributes(){let e=super.getAttributes();return e.BotID=this._botId,e.BotName=this._botName,e.OriginatingPanel=n.BotsOriginatingPanel[this._originatingPanel],e}};t.AutoAddBotExperiment=class extends s{constructor(e){super(),this._botId=e}getActionName(){return n.BotsInteraction[n.BotsInteraction.AutoAddBot]}getAttributes(){let e=super.getAttributes();return e.BotID=this._botId,e}}},96757:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserError=t.BrowserShareExternal=t.BrowserForward=t.BrowserOpenUrl=t.BrowserCopy=t.BrowserSession=t.BrowserCallingSupportEvent=t.BrowserUrlSharedEvent=t.BrowserSwiftCardSharedEvent=t.BrowserShareUrlPreviewEvent=t.BrowserShareCardPreviewEvent=void 0;const n=i(36076),o=i(48540),s=i(60021),a=i(71830),r=i(46096),l=i(18078),c=i(349);class d extends c.TelemetryEventBase{constructor(e,t,i){super(),this._origin=e,this._shareAction=t,this._integration=i}getEventName(){return"browser_action"}getEventTraceMode(){return c.TelemetryTraceMode.EventName}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e.Origin=r.BrowserOrigin[this._origin],this._shareAction&&(e.ShareAction=r.BrowserShareAction[this._shareAction]),this._integration&&(e.Integration=this._integration),e}}t.BrowserShareCardPreviewEvent=class extends d{constructor(e,t,i,n){super(n,t,i),this._cardType=e}getActionName(){return"browser_shareCardPreview"}getAttributes(){let e=super.getAttributes();return e.CardType=this._cardType,e}};t.BrowserShareUrlPreviewEvent=class extends d{constructor(e,t,i,n){super(n,t,i),this._url=e}getActionName(){return"browser_shareUrlPreview"}getPiiAttributes(){let e=super.getPiiAttributes();return e.Url={value:this._url,piiKind:n.AWTPiiKind.Uri},e}};t.BrowserSwiftCardSharedEvent=class extends d{constructor(e,t,i,n,o,s,a){super(n,t,i),this._cardType=e,this._forward=o,this._conversationId=s,this._cmid=a}getActionName(){return"browser_shareCard"}getCorrelationAttributes(){return{Message_Correlation_Id:s.getCorrelationIdFromMessageParts(a.skypeIdToMri(l.default.getSkypeId()),this._conversationId,this._cmid)}}getAttributes(){let e=super.getAttributes();return e.CardType=this._cardType,e.Forward=this._forward,e}};t.BrowserUrlSharedEvent=class extends d{constructor(e,t,i,n,o,s,a){super(n,void 0,t),this._url=e,this._forward=o,this._conversationId=s,this._cmid=a}getActionName(){return"browser_shareUrl"}getCorrelationAttributes(){return{Message_Correlation_Id:s.getCorrelationIdFromMessageParts(a.skypeIdToMri(l.default.getSkypeId()),this._conversationId,this._cmid)}}getAttributes(){let e=super.getAttributes();return e.ShareAction=r.BrowserShareAction[r.BrowserShareAction.ShareUrlFromBrowser],e.Forward=this._forward,e}getPiiAttributes(){let e=super.getPiiAttributes();return e.Url={value:this._url,piiKind:n.AWTPiiKind.Uri},e}};class u extends c.TelemetryEventBase{constructor(e,t){super(),this._support=e,this._error=t}getEventName(){return"browser_calling_support"}getAttributes(){var e;let t=super.getAttributes();return t.Action=o.CallSupport[this._support],this._error&&(t.ErrorMessage=null!==(e=this._error.message)&&void 0!==e?e:"Unknown"),t}}t.BrowserCallingSupportEvent=u;class g extends c.TelemetryEventBase{constructor(e,t){super(),this._url=e,this._origin=t}getEventName(){return"inapp_browser"}getAttributes(){let e=super.getAttributes();return e.operation=this.getOperation(),e.origin=this._origin,e}getPiiAttributes(){let e=super.getPiiAttributes();return e.url={value:this._url,piiKind:n.AWTPiiKind.Uri},e}}t.BrowserSession=class extends g{constructor(e,t,i){super(e,t),this._duration=i}getOperation(){return"browserSession"}getAttributes(){let e=super.getAttributes();return e.duration=this._duration,e}};t.BrowserCopy=class extends g{getOperation(){return"copy"}};t.BrowserOpenUrl=class extends g{getOperation(){return"openUrlInBrowser"}};t.BrowserForward=class extends g{getOperation(){return"forward"}};t.BrowserShareExternal=class extends g{getOperation(){return"shareExternal"}getActionName(){}};t.BrowserError=class extends g{getOperation(){return"error"}}},30062:(e,t,i)=>{var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.CallPermissionsBrowserEvent=t.InitialScreen=t.AVPermissionsAction=void 0,function(e){e[e.Cancel=0]="Cancel",e[e.ContinueWithoutAV=1]="ContinueWithoutAV",e[e.PermissionGranted=2]="PermissionGranted",e[e.None=3]="None"}(n=t.AVPermissionsAction||(t.AVPermissionsAction={})),function(e){e[e.AllowPrompt=0]="AllowPrompt",e[e.DenyPrompt=1]="DenyPrompt"}(o=t.InitialScreen||(t.InitialScreen={}));const s=i(349);class a extends s.TelemetryEventBase{constructor(e){super(),this._initialState=e,this._action=n.None}getEventName(){return"calling_permissions_browser"}setAction(e){this._action=e}getAttributes(){const e=super.getAttributes();return e.Action=n[this._action],e.InitialState=o[this._initialState],e}}t.CallPermissionsBrowserEvent=a},9520:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NdiBroadcastEvent=t.CallRecordingEvent=t.CallDataChannelEvent=t.CallDataChannelEventType=t.CallFullScreenBotError=t.CallFullScreenBotEvent=t.CallAddPhotosWithFabEvent=t.CallAddPhotosEvent=t.CallAddPhotosEntryPoint=t.CallActivitiesEntryPoint=t.AnswerCallStep=t.AnswerCallNotificationLocation=t.AnswerCallEndReason=t.IncomingCallStep=t.IncomingCallEndReason=t.CallRosterSession=t.ToggleCallTray=t.UnpinCallParticipant=t.PinCallParticipant=t.Zoom=t.CallVideoSettingsPopup=t.CallAudioSettingsPopup=t.VideoSuggestionTooltipEvent=t.CallCrashEvent=t.UnansweredCallActionEvent=t.RinglessCallInterstitialEvent=t.RinglessCallInterstitialActions=t.ScreenSharingStoppedEvent=t.RingTheGroupEvent=t.CallPreviewEvent=t.CallPreviewActions=t.CQF=t.WarmCalNotificationDisposition=t.CallEntryPoint=t.CallActionCalleeUserPresence=t.CallActionCallKitSuccess=t.CallActionCallKitError=t.CallActionError=t.InCallActivity=t.InCallUFD=t.OverflowMenuOpenedEvent=t.InCallReaction=t.CallActionInviteFreeDecline=t.CallActionEnterFromCallCard=t.CallActionTokenRequested=t.CallActionTokenState=t.CallActionPushNotification=t.StopRingReason=t.CallActionBase=t.Call=void 0,t.CancelPreheatedCallNotJoinedEvent=t.FullChatUXTelemetryEvent=t.FullChatUXNavigation=t.MaybeEndCallFromAndroidBtScoDisconnectEvent=t.MediaActionEvent=t.MediaActionEventResult=t.CallControlContext=t.MobileCallAnswerEvent=t.MobileCallAnswerActions=t.TogetherModePanelActionEvent=t.TogetherModePanelActionOrigin=t.CallStageLayoutChangeEvent=t.CallViewMenuActionEvent=t.SpeakerViewEvent=t.SystemHotKeyCallEvent=t.SystemHotKeyCallAction=t.AudioOutputRouteChangedEvent=t.CallMergeEvent=t.ScreenShareSourceGetIconFailure=t.ScreenShareSourceGetPreviewFailure=t.IncomingVideoNotification=t.IncomingVideoNotificationAction=t.CallbackReminderTappedEvent=t.CallbackReminderTappedAction=t.BingBackgroundsDownloadApiEvent=t.BackgroundEffectsBingInfoClickEvent=t.BackgroundEffectEvent=t.BackgroundBlurEvent=t.BackgroundEffectsSettingsEvent=t.LocalVideoActionsEvent=t.CallViewMenuActions=t.LocalVideoActions=t.CallPstnTranslationLanguageChangeEvent=t.CallCaptioningEvent=t.EndCallPopupMenuActionsEvent=t.EndCallPopupActions=t.RibbonSettingsMenuActionEvent=t.RibbonSettingsMenuActions=t.CanvasAndRibbonActionsEvent=t.CanvasAndRibbonActions=t.AddBotToCallSucceededEvent=t.AddBotToCallFailedEvent=t.AddBotToCallEvent=t.CallTranslatorDebugEvent=t.CallTranslatorDebugEventType=t.CallRecorderBotDebugEvent=t.CallRecorderBotDebugEventType=t.CallMuteEveryoneEvent=t.MuteEveryoneOrigin=t.CallAddToCallEvent=void 0,t.FallbackFromJoinPreheatedToRegularJoinEvent=void 0;const n=i(36076),o=i(96486),s=i(16778),a=i(48540),r=i(98925),l=i(80200),c=i(71830),d=i(71830),u=i(46096),g=i(40363),h=i(349),p=i(35370),m=i(63841),S=i(13598),C=i(47447);class f extends h.TelemetryEventBase{constructor(e,t,i,n,o){super(),this._callId=e,this._conversationId=t,this._participantId=i,this._nodeId=n,this._origin=o,this._textReactionCount=0,this._emoticonReactionCount=0,this._animationReactionCount=0,this._photoReactionCount=0,this._mediaPickerPhotoReactionCount=0,this._navigateToMediaStageCount=0,this._moveParticipantToStageCount=0,this._moveSelfToStageCount=0,this._moveSelfToRibbonCount=0,this._moveParticipantToRibbonCount=0,this._sideNavigateInCallCount=0,this._backgroundAppInCallCount=0,this._toggleCameraCount=0,this._localMuteCount=0,this._localUnmuteCount=0,this._muteMicButtonPressCount=0,this._muteKeyboardShortcutPressCount=0,this._muteCommandServiceInvokeCount=0,this._muteCallMonitorPressCount=0,this._muteFloatingPipPressCount=0,this._muteCallRosterPressCount=0,this._muteSystemHotKeyPressCount=0,this._muteLocalVideoContextMenuPressCount=0,this._resizedOwnPreviewCount=0,this._movedOwnPreviewCount=0,this._dockedOwnPreviewCount=0,this._reactionThreadCreationDelay=0,this._photoSnapshotCount=0,this._photoSnapshotAudioCount=0,this._photoSnapshotVideoCount=0,this._photoSnapshotScreenShareCount=0,this._callDurationSeconds=0,this._incomingVideoUserNotificationCount=0,this._didEnterMinWidth=!1,this._callConnectionDurationMilliseconds=0,this._localVideoCallMonitorPressCount=0,this._callMonitorShowCount=0,this._callMonitorCloseCount=0,this._didEndCallFromCallMonitor=!1}getAttributes(){const e=o.assign(super.getAttributes(),this._getOwnAttributes()),t=p.getTrackableConversationId(this._conversationId);return t&&(e.ConversationId=t),e}getEventPriority(){return n.AWTEventPriority.High}_getOwnAttributes(){return{CallId:this._callId||"",ParticipantId:this._participantId||"",NodeId:this._nodeId||"",DidUserReact:this._textReactionCount>0||this._emoticonReactionCount>0||this._photoReactionCount>0||this._mediaPickerPhotoReactionCount>0||this._photoSnapshotCount>0||this._animationReactionCount>0,ReactionCount:this._textReactionCount+this._emoticonReactionCount+this._photoReactionCount+this._mediaPickerPhotoReactionCount+this._photoSnapshotCount+this._animationReactionCount,TextReactionCount:this._textReactionCount,EmoticonReactionCount:this._emoticonReactionCount,PhotoReactionCount:this._photoReactionCount,AnimationReactionCount:this._animationReactionCount,MediaPickerPhotoReactionCount:this._mediaPickerPhotoReactionCount,DidUserNavigateToMediaStage:this._navigateToMediaStageCount>0,NavigateToMediaStageCount:this._navigateToMediaStageCount,MoveParticipantToStageCount:this._moveParticipantToStageCount,MoveParticipantToRibbonCount:this._moveParticipantToRibbonCount,MoveSelfToRibbonCount:this._moveSelfToRibbonCount,MoveSelfToStageCount:this._moveSelfToStageCount,DidUserSideNavigateInCall:this._sideNavigateInCallCount>0,SideNavigateInCallCount:this._sideNavigateInCallCount,DidUserBackgroundAppInCall:this._backgroundAppInCallCount>0,BackgroundAppInCallCount:this._backgroundAppInCallCount,DidUserToggleCamera:this._toggleCameraCount>0,ToggleCameraCount:this._toggleCameraCount,LocalMuteCount:this._localMuteCount,LocalUnmuteCount:this._localUnmuteCount,MuteMicButtonPressCount:this._muteMicButtonPressCount,MuteKeyboardShortcutPressCount:this._muteKeyboardShortcutPressCount,MuteCommandServiceInvokeCount:this._muteCommandServiceInvokeCount,MuteCallMonitorPressCount:this._muteCallMonitorPressCount,MuteFloatingPipPressCount:this._muteFloatingPipPressCount,MuteCallRosterPressCount:this._muteCallRosterPressCount,MuteSystemHotKeyPressCount:this._muteSystemHotKeyPressCount,MuteLocalVideoContextMenuPressCount:this._muteLocalVideoContextMenuPressCount,ResizedOwnPreviewCount:this._resizedOwnPreviewCount,MovedOwnPreviewCount:this._movedOwnPreviewCount,DockedOwnPreviewCount:this._dockedOwnPreviewCount,ReactionThreadCreationDelay:this._reactionThreadCreationDelay,Origin:u.NavigationCallOrigin[this._origin],CallConversationMriNamespace:this._callConversationMriNamespace?c.Namespaces[this._callConversationMriNamespace]:"",PhotoSnapshotCount:this._photoSnapshotCount,DidUserPostPhotoSnapshot:this._photoSnapshotCount>0,PhotoSnapshotAudioCount:this._photoSnapshotAudioCount,PhotoSnapshotVideoCount:this._photoSnapshotVideoCount,PhotoSnapshotScreenShareCount:this._photoSnapshotScreenShareCount,CallDurationSeconds:this._callDurationSeconds,CallConnectionDurationMilliseconds:this._callConnectionDurationMilliseconds,UserToggledIncomingVideoViaNotificationCount:this._incomingVideoUserNotificationCount,DidEnterMinWidth:this._didEnterMinWidth,LocalVideoCallMonitorPressCount:this._localVideoCallMonitorPressCount,CallMonitorShowCount:this._callMonitorShowCount,CallMonitorCloseCount:this._callMonitorCloseCount,DidEndCallFromCallMonitor:this._didEndCallFromCallMonitor}}postAnimationReaction(){this._animationReactionCount++}postTextReaction(){this._textReactionCount++}postEmoticonReaction(){this._emoticonReactionCount++}postPhotoReaction(){this._photoReactionCount++}postMediaPickerPhotoReaction(){this._mediaPickerPhotoReactionCount++}navigateToMediaStage(){this._navigateToMediaStageCount++}moveParticipantToStage(){this._moveParticipantToStageCount++}moveParticipantToRibbon(){this._moveParticipantToRibbonCount++}moveSelfToStage(){this._moveSelfToStageCount++}moveSelfToRibbon(){this._moveSelfToRibbonCount++}sideNavigateInCall(){this._sideNavigateInCallCount++}backgroundAppInCall(){this._backgroundAppInCallCount++}toggleCamera(){this._toggleCameraCount++}localMute(){this._localMuteCount++}localUnmute(){this._localUnmuteCount++}micButtonPress(){this._muteMicButtonPressCount++}muteKeyboardShortcutPress(){this._muteKeyboardShortcutPressCount++}muteCommandServiceInvoke(){this._muteCommandServiceInvokeCount++}muteCallMonitorPress(){this._muteCallMonitorPressCount++}muteFloatingPipPress(){this._muteFloatingPipPressCount++}muteCallRosterPress(){this._muteCallRosterPressCount++}muteSystemHotKeyPress(){this._muteSystemHotKeyPressCount++}muteLocalVideoContextMenuPress(){this._muteLocalVideoContextMenuPressCount++}resizeOwnPreview(){this._resizedOwnPreviewCount++}moveOwnPreview(){this._movedOwnPreviewCount++}dockOwnPreview(){this._dockedOwnPreviewCount++}setReactionThreadCreationDelay(e){this._reactionThreadCreationDelay=e}updateParticipantId(e){this._participantId=e}setCallConversationMriNamespace(e){this._callConversationMriNamespace=e}postPhotoSnapshot(){this._photoSnapshotCount++}setPhotoSnapshotMakeup(e,t,i){this._photoSnapshotAudioCount=e,this._photoSnapshotVideoCount=t,this._photoSnapshotScreenShareCount=i}setCallDurationSeconds(e){this._callDurationSeconds=e}setCallConnectionDurationMilliseconds(e){this._callConnectionDurationMilliseconds=e}incomingVideoNotificationHit(){this._incomingVideoUserNotificationCount++}setEnterMinWidth(){this._didEnterMinWidth=!0}localVideoCallMonitorPress(){this._localVideoCallMonitorPressCount++}showCallMonitor(){this._callMonitorShowCount++}setEndCallFromCallMonitor(){this._didEndCallFromCallMonitor=!0}closeCallMonitor(){this._callMonitorCloseCount++}}t.Call=class extends f{constructor(e){super(e.callId,e.conversationId,e.participantId,e.nodeId,e.origin),this._params=e,this._startVideoCount=0,this._stopVideoCount=0,this._startScreenSharingCount=0,this._stopScreenSharingCount=0,this._cancelSreenSharingCount=0,this._startActivityCount=0,this._stopActivityCount=0,this._startSoundSharingCount=0,this._screenSharingDroppedCount=0,this._screenSharingStolenCount=0,this._switchScreenWhileSharingCount=0,this._orientationLandscapeCount=0,this._orientationPortraitCount=0,this._isConversationAccepted=!1,this._isConversationAutoAccepted=!1,this._isEscalatedToGroup=!1,this._escalationUserCount=0,this._addUsersToGroupCount=0,this._ringUsersToCallCount=0,this._autoAnsweredWithAudio=!1,this._autoAnsweredWithVideo=!1,this._wasOffline=!1,this._wasSuspended=!1,this._didShowReconnectUI=!1,this._didShowPoorConnectionUI=!1,this._connectionType=a.ConnectionType.AllSupported,this._mccCode="",this._mncCode="",this._startRecordingCount=0,this._stopRecordingCount=0,this._startNdiCount=0,this._stopNdiCount=0,this._navBarOpenedCount=0,this._navBarClosedCount=0,this._isPSTNCall=!1,this._maxConnectedParticipants=0,this._groupMemberCount=0,this._soloModeDurationSeconds=0,this._isGoLive=!1,this._chatOpenedCount=0,this._galleryOpenedCount=0,this._manualDismissedUFDCount=0,this._autoDismisssedUFDCount=0,this._actionedUFDCount=0,this._totalUFDCount=0,this._totalSuccessfulToggleVideoPress=0,this._totalIgornedToggleVideoPress=0,this._callRosterOpenedCount=0,this._callRosterClosedCount=0,this._callRosterGetAllParticipantsFailedCount=0,this._audioOnlyStartedCount=0,this._audioOnlyStoppedCount=0,this._audioOnlySuggestedCount=0,this._enabledIncomingVideoCount=0,this._disabledIncomingVideoCount=0,this._startCaptioningCount=0,this._startPstnTranslationAttemptCount=0,this._stopCaptioningCount=0,this._failedCaptioningConfigCount=0,this._receiverSetupCount=0,this._displayScreenSharingDialogCount=0,this._didUserDisplayScreenSharingDialog=!1,this._didReceiveCaptions=!1,this._firstCaptionReceivedLengthSeconds=0,this._audioSystemResetCount=0,this._wholeScreenSharedCount=0,this._appWindowSharedCount=0,this._startBackgroundBlurCount=0,this._stopBackgroundBlurCount=0,this._durationWithBackgroundBlurRatio=0,this._startSpeakerViewCount=0,this._stopSpeakerViewCount=0,this._durationInSpeakerViewRatio=0,this._callMergeRequested=0,this._callMergeSucceed=0,this._zoomedInCount=0,this._zoomedInDuration=0,this._zoomedOutCount=0,this._zoomDragUsed=!1,this._zoomUIControlsUsedCount=0,this._zoomScrollWheelUsedCount=0,this._zoomKeyboardUsedCount=0,this._zoomTrackPadUsedCount=0,this._accessedDialpadCount=0,this._displayedDtmfWarningCount=0,this._screenShareControlReceivedControlRequestCount=0,this._screenShareControlReceivedControlRequestCanceledCount=0,this._screenShareControlSentControlRequestCount=0,this._screenShareControlRequestAcceptedCount=0,this._screenShareControlRequestDeniedCount=0,this._screenShareControlGrantedCount=0,this._screenShareControlSharerTerminatedControlCount=0,this._screenShareControlViewerTerminatedControlCount=0,this._pinToolbar=0,this._unpinToolbar=0,this._couldGiveControl=!1,this._startBackgroundEffectCount={[u.BackgroundEffect.Blur]:0,[u.BackgroundEffect.BackgroundImage]:0},this._stopBackgroundEffectCount={[u.BackgroundEffect.Blur]:0,[u.BackgroundEffect.BackgroundImage]:0},this._durationWithBackgroundEffectRatio={[u.BackgroundEffect.Blur]:0,[u.BackgroundEffect.BackgroundImage]:0},this._bingBackgroundEffectCaptionClickCount=0,this._startTogetherMode=!1,this._ableToStartTogetherMode=!1,this._startLargeGridMode=!1,this._ableToStartLargeGridMode=!1,this._togetherModeSceneChangeRequestCount=0,this._noiseSuppressionMode=a.NoiseSuppressionMode.Auto,this._badQualityCounts=new Map,this._hadNewCallStageEnabled=!1,this._hadOldCallStageEnabled=!1,this._totalCallingStoreUpdateTime=0,this._numberOfCallingStoreUpdates=0,this._showShareTwinCamConnectionCount=0,this._twinCamConnectionUsedCount=0,this._twinCamConnectionFailedCount=0,this._stopTwinCamCount=0,this._ableToStartTwinCam=!1,this._terminatedWithTwinCam=!1,this._noiseSuppressionMode=e.noiseSuppressionMode}getEventName(){return"calling_call"}getAttributes(){const e=Object.assign(Object.assign(Object.assign(Object.assign({CallingStack:C.CallingCapabilities.isPluginlessCallingStack()?"pluginless":"slimcore",IsGroupCall:this._params.isGroupCall,IsCallCreator:this._params.isCallCreator,DidUserStartVideo:this._startVideoCount>0,StartVideoCount:this._startVideoCount,DidUserStopVideo:this._stopVideoCount>0,StopVideoCount:this._stopVideoCount,StartScreenSharingCount:this._startScreenSharingCount,SwitchScreenWhileSharingCount:this._switchScreenWhileSharingCount,StopScreenSharingCount:this._stopScreenSharingCount,StartSoundSharingCount:this._startSoundSharingCount,CancelScreenSharingCount:this._cancelSreenSharingCount,ScreenSharingDroppedCount:this._screenSharingDroppedCount,ScreenSharingStolenCount:this._screenSharingStolenCount,DidUserStartScreenSharing:this._startScreenSharingCount>0,DidUserSwitchScreenWhileSharing:this._switchScreenWhileSharingCount>0,DidUserStopScreenSharing:this._stopScreenSharingCount>0,DidUserChangeOrientation:this._orientationLandscapeCount>0||this._orientationPortraitCount>0,OrientationLandscapeCount:this._orientationPortraitCount,OrientationPortraitCount:this._orientationPortraitCount,IsConversationAccepted:this._isConversationAccepted,IsConversationAutoAccepted:this._isConversationAutoAccepted,IsEscalatedToGroup:this._isEscalatedToGroup,EscalationUserCount:this._escalationUserCount,AddUsersToGroupCount:this._addUsersToGroupCount,RingUsersToCallCount:this._ringUsersToCallCount,CallWasAutoAnsweredWithAudio:this._autoAnsweredWithAudio,CallWasAutoAnsweredWithVideo:this._autoAnsweredWithVideo,WasOffline:this._wasOffline,WasSuspended:this._wasSuspended,DidShowReconnectUI:this._didShowReconnectUI,DidShowPoorConnectionUI:this._didShowPoorConnectionUI,StartActivityCount:this._startActivityCount,StopActivityCount:this._stopActivityCount,NetworkMCCCode:this._mccCode,NetworkMNCCode:this._mncCode,ConnectionType:this._connectionType,StartRecordingCount:this._startRecordingCount,StopRecordingCount:this._stopRecordingCount,StartNdiCount:this._startNdiCount,StopNdiCount:this._stopNdiCount,NavigationBarDesktopOpenedCount:this._navBarOpenedCount,NavigationBarDesktopClosedCount:this._navBarClosedCount,IsPSTNCall:this._isPSTNCall,IsGoLive:this._isGoLive,IsMeetNow:this._params.isLegacyMeetNow,MaxConnectedParticipants:this._maxConnectedParticipants||0,GroupMemberCount:this._groupMemberCount||0,SoloModeDurationSeconds:this._soloModeDurationSeconds,ChatOpenedCount:this._chatOpenedCount,GalleryOpenedCount:this._galleryOpenedCount,ColorTheme:this._colorTheme?m.Theme[this._colorTheme]:"",ActionedUFDCount:this._actionedUFDCount,ManualDismissedUFDCount:this._manualDismissedUFDCount,AutoDismissedUFDCount:this._autoDismisssedUFDCount,TotalUFDCount:this._totalUFDCount,ToggleVideoSuccessfulCount:this._totalSuccessfulToggleVideoPress,ToggleVideoIgnoredCount:this._totalIgornedToggleVideoPress,CallRosterOpenedCount:this._callRosterOpenedCount,CallRosterClosedCount:this._callRosterClosedCount,CallRosterGetAllParticipantsFailedCount:this._callRosterGetAllParticipantsFailedCount,StartAudioOnlyCount:this._audioOnlyStartedCount,StopAudioOnlyCount:this._audioOnlyStoppedCount,AudioOnlyModeSuggestedCount:this._audioOnlySuggestedCount,DisabledIncomingVideoCount:this._disabledIncomingVideoCount,EnabledIncomingVideoCount:this._enabledIncomingVideoCount,StartCaptioningCount:this._startCaptioningCount,StopCaptioningCount:this._stopCaptioningCount,StartPstnTranslationAttemptCount:this._startPstnTranslationAttemptCount,DidReceiveCaptions:this._didReceiveCaptions,FirstCaptionReceivedLengthSeconds:this._firstCaptionReceivedLengthSeconds,FailedCaptioningConfigCount:this._failedCaptioningConfigCount,ReceiverSetupCount:this._receiverSetupCount,DisplayScreenSharingDialogCount:this._displayScreenSharingDialogCount,DidUserDisplayScreenSharingDialog:this._didUserDisplayScreenSharingDialog,IsScheduledCallActive:this._params.isScheduledCallActive,IsPreheated:this._params.isPreheated,IsEchoCall:this._params.isEchoCall,AudioSystemReset:this._audioSystemResetCount,"WholeScreenSharedCount ":this._wholeScreenSharedCount,AppWindowSharedCount:this._appWindowSharedCount,StartBackgroundBlurCount:this._startBackgroundBlurCount,StopBackgroundBlurCount:this._stopBackgroundBlurCount,DurationWithBackgroundBlurRatio:this._durationWithBackgroundBlurRatio,StartSpeakerViewCount:this._startSpeakerViewCount,StopSpeakerViewCount:this._stopSpeakerViewCount,DurationInSpeakerViewRatio:this._durationInSpeakerViewRatio,CallMergeRequested:this._callMergeRequested,CallMergeSucceed:this._callMergeSucceed,ZoomedInCount:this._zoomedInCount,ZoomedInDuration:this._zoomedInDuration,ZoomedOutCount:this._zoomedOutCount,ZoomDragUsed:this._zoomDragUsed,ZoomUIControlsUsedCount:this._zoomUIControlsUsedCount,ZoomScrollWheelUsedCount:this._zoomScrollWheelUsedCount,ZoomKeyboardUsedCount:this._zoomKeyboardUsedCount,ZoomTrackPadUsedCount:this._zoomTrackPadUsedCount,AccessedDialpadCount:this._accessedDialpadCount,DisplayedDtmfWarningCount:this._displayedDtmfWarningCount,ScreenShareControlReceivedControlRequestCount:this._screenShareControlReceivedControlRequestCount,ScreenShareControlReceivedControlRequestCanceledCount:this._screenShareControlReceivedControlRequestCanceledCount,ScreenShareControlSentControlRequestCount:this._screenShareControlSentControlRequestCount,ScreenShareControlRequestAcceptedCount:this._screenShareControlRequestAcceptedCount,ScreenShareControlRequestDeniedCount:this._screenShareControlRequestDeniedCount,ScreenShareControlGrantedCount:this._screenShareControlGrantedCount,ScreenShareControlSharerTerminatedControlCount:this._screenShareControlSharerTerminatedControlCount,ScreenShareControlViewerTerminatedControlCount:this._screenShareControlViewerTerminatedControlCount,IsTranslatedCall:this._params.isTranslatedCall,IsFirstCall:this._params.isFirstCall,StartBackgroundEffectBlurCount:this._startBackgroundEffectCount[u.BackgroundEffect.Blur],StopBackgroundEffectBlurCount:this._stopBackgroundEffectCount[u.BackgroundEffect.Blur],DurationWithBackgroundEffectBlurRatio:this._durationWithBackgroundEffectRatio[u.BackgroundEffect.Blur],StartBackgroundEffectImageCount:this._startBackgroundEffectCount[u.BackgroundEffect.BackgroundImage],StopBackgroundEffectImageCount:this._stopBackgroundEffectCount[u.BackgroundEffect.BackgroundImage],DurationWithBackgroundEffectImageRatio:this._durationWithBackgroundEffectRatio[u.BackgroundEffect.BackgroundImage],BingBackgroundEffectCaptionClickCount:this._bingBackgroundEffectCaptionClickCount,PinToolbar:this._pinToolbar,UnpinToolbar:this._unpinToolbar,CouldGiveControl:this._couldGiveControl,NoiseSuppressionMode:this._noiseSuppressionMode,HadBadQuality:!!this._badQualityCounts.size,IsModerated:this._params.isModerated,HadNewCallStageEnabled:this._hadNewCallStageEnabled,HadOldCallStageEnabled:this._hadOldCallStageEnabled,AverageCallingStoreUpdateTime:this._getAverageCallingStoreUpdateTime(),ShowShareTwinCamConnectionCount:this._showShareTwinCamConnectionCount,TwinCamConnectionUsedCount:this._twinCamConnectionUsedCount,TwinCamConnectionFailedCount:this._twinCamConnectionFailedCount,StopTwinCamCount:this._stopTwinCamCount,AbleToStartTwinCam:this._ableToStartTwinCam,TerminatedWithTwinCam:this._terminatedWithTwinCam},this._getBadQualityAttributes()),this._getDeviceCountsAttributes()),this._getPermissionAttributes()),this._getFullScreenBotAttributes());o.isUndefined(this._params.timeBeforeFirstCallInSec)||(e.TimeBeforeFirstCallInSec=this._params.timeBeforeFirstCallInSec),o.isUndefined(this._params.source)||(e.Source=this._params.source);const t=p.getTrackableConversationId(this._params.conversationId);return t&&(e.ConversationId=t),o.assign(super.getAttributes(),e)}_getAverageCallingStoreUpdateTime(){return this._numberOfCallingStoreUpdates&&this._totalCallingStoreUpdateTime?Math.round(this._totalCallingStoreUpdateTime/this._numberOfCallingStoreUpdates):0}_getDeviceCountsAttributes(){return void 0!==this._micCount&&void 0!==this._speakerCount&&void 0!==this._cameraCount?{MicCount:this._micCount,SpeakerCount:this._speakerCount,CameraCount:this._cameraCount}:{}}_getPermissionAttributes(){return void 0!==this._micPermission&&this._cameraPermission,{}}_getFullScreenBotAttributes(){return{WasLargeGridBotOnCall:this._startLargeGridMode,WasAbleToStartLargeGridBot:this._ableToStartLargeGridMode,WasTogetherModeBotOnCall:this._startTogetherMode,WasAbleToStartTogetherModeBot:this._ableToStartTogetherMode,TogetherModeSceneChangeRequestCount:this._togetherModeSceneChangeRequestCount}}_getBadQualityAttributes(){const e={};return this._badQualityCounts.forEach(((t,i)=>e[a.QualityEventType[i]]=t)),e}screenShareControlReceivedControlRequest(){this._screenShareControlReceivedControlRequestCount++}screenShareControlReceivedControlRequestCanceled(){this._screenShareControlReceivedControlRequestCanceledCount++}screenShareControlSentControlRequest(){this._screenShareControlSentControlRequestCount++}screenShareControlRequestAccepted(){this._screenShareControlRequestAcceptedCount++}screenShareControlRequestDenied(){this._screenShareControlRequestDeniedCount++}screenShareControlGranted(){this._screenShareControlGrantedCount++}screenShareControlSharerTerminatedControl(){this._screenShareControlSharerTerminatedControlCount++}screenShareControlViewerTerminatedControl(){this._screenShareControlViewerTerminatedControlCount++}pinToolbar(){this._pinToolbar++}unPinToolbar(){this._unpinToolbar++}setGiveControlAsPossible(){this._couldGiveControl=!0}setIsCallCreator(e){this._params.isCallCreator=e}startVideo(){this._startVideoCount++}stopVideo(){this._stopVideoCount++}startScreenSharing(){this._startScreenSharingCount++}switchScreenWhileSharing(){this._switchScreenWhileSharingCount++}stopScreenSharing(){this._stopScreenSharingCount++}cancelScreenSharing(){this._cancelSreenSharingCount++}startSoundSharing(){this._startSoundSharingCount++}screenSharingDropped(){this._screenSharingDroppedCount++}screenSharingStolen(){this._screenSharingStolenCount++}orientationChanged(e){e?this._orientationLandscapeCount++:this._orientationPortraitCount++}isConversationAccepted(e){this._isConversationAccepted=e}isConversationAutoAccepted(e){this._isConversationAutoAccepted=e}isEscalatedToGroup(e){this._isEscalatedToGroup=e}escalationUserCount(e){this._escalationUserCount=e}addUserToGroup(){this._addUsersToGroupCount+=1}addUsersToGroup(e){this._addUsersToGroupCount+=e}ringUserToCall(){this._ringUsersToCallCount+=1}ringUsersToCall(e){this._ringUsersToCallCount+=e}callAutoAnswered(e){e?this._autoAnsweredWithVideo=!0:this._autoAnsweredWithAudio=!0}setWasSuspended(){this._wasSuspended=!0}setWasOffline(){this._wasOffline=!0}showedReconnectUI(){this._didShowReconnectUI=!0}showedPoorConnectionUI(){this._didShowPoorConnectionUI=!0}startActivityCount(){this._startActivityCount++}stopActivityCount(){this._stopActivityCount++}callConnectionType(e){this._connectionType=o.isUndefined(e)?a.ConnectionType.AllSupported:e}setMccMncCode(e,t){this._mccCode=e||"",this._mncCode=t||""}startRecordingCount(){this._startRecordingCount++}stopRecordingCount(){this._stopRecordingCount++}startNdiCount(){this._startNdiCount++}stopNdiCount(){this._stopNdiCount++}audioSystemResetCount(){this._audioSystemResetCount++}toggleVideoPressSuccessful(){this._totalSuccessfulToggleVideoPress++}toggleVideoPressIgored(){this._totalIgornedToggleVideoPress++}callRosterOpenedCount(){this._callRosterOpenedCount++}callRosterClosedCount(){this._callRosterClosedCount++}callRosterGetAllParticipantsFailedCount(){this._callRosterGetAllParticipantsFailedCount++}startAudioOnly(){this._audioOnlyStartedCount++}stopAudioOnly(){this._audioOnlyStoppedCount++}suggestAudioOnly(){this._audioOnlySuggestedCount++}enableIncomingVideoCount(){this._enabledIncomingVideoCount++}disableIncomingVideoCount(){this._disabledIncomingVideoCount++}displayScreenSharingDialogCount(){this._displayScreenSharingDialogCount++}didUserDisplayScreenSharingDialog(){this._didUserDisplayScreenSharingDialog=!0}wholeScreenSharedCount(){this._wholeScreenSharedCount++}appWindowSharedCount(){this._appWindowSharedCount++}ufdDisplayed(e){switch(e){case l.ToastActionType.Actioned:this._actionedUFDCount++;break;case l.ToastActionType.AutoDismissed:this._autoDismisssedUFDCount++;break;case l.ToastActionType.ManualDismissed:this._manualDismissedUFDCount++}this._totalUFDCount++}navBarOpened(){this._navBarOpenedCount++}navBarClosed(){this._navBarClosedCount++}setIsPSTNCall(e){this._isPSTNCall=e}setGroupMemberCount(e){this._groupMemberCount=e}setMaxConnectedParticipants(e){e>this._maxConnectedParticipants&&(this._maxConnectedParticipants=e)}setDurationInSoloMode(e){0===this._soloModeDurationSeconds&&(this._soloModeDurationSeconds=e)}setIsGoLive(e){this._isGoLive=e}chatOpened(){this._chatOpenedCount++}galleryOpened(){this._galleryOpenedCount++}setColorTheme(e){this._colorTheme=e}startCaptioningCount(){this._startCaptioningCount++}stopCaptioningCount(){this._stopCaptioningCount++}startPstnTranslationClickedCount(){this._params.isTranslatedCall=!0,this._startPstnTranslationAttemptCount++}failedCaptioningConfigCount(){this._failedCaptioningConfigCount++}didReceiveCaptions(){this._didReceiveCaptions=!0}setFirstCaptionReceivedLengthSeconds(e){this._firstCaptionReceivedLengthSeconds=e/1e3}receiverSetupCount(){this._receiverSetupCount++}startBackgroundBlur(){this._startBackgroundBlurCount++}stopBackgroundBlur(){this._stopBackgroundBlurCount++}setBackgroundBlurDurationRatio(e){this._durationWithBackgroundBlurRatio=e}startBackgroundEffect(e){const t=e===u.BackgroundEffect.Blur?u.BackgroundEffect.Blur:u.BackgroundEffect.BackgroundImage;this._startBackgroundEffectCount[t]=this._startBackgroundEffectCount[t]+1}stopBackgroundEffect(e){const t=e===u.BackgroundEffect.Blur?u.BackgroundEffect.Blur:u.BackgroundEffect.BackgroundImage;this._stopBackgroundEffectCount[t]=this._stopBackgroundEffectCount[t]+1}setBackgroundEffectDurationRatio(e,t){const i=t===u.BackgroundEffect.Blur?u.BackgroundEffect.Blur:u.BackgroundEffect.BackgroundImage;this._durationWithBackgroundEffectRatio[i]=e}bingBackgroundEffectCaptionClick(){this._bingBackgroundEffectCaptionClickCount++}startSpeakerView(){this._startSpeakerViewCount++}stopSpeakerView(){this._stopSpeakerViewCount++}setSpeakerViewDurationRatio(e){this._durationInSpeakerViewRatio=e}callMergeRequested(){this._callMergeRequested++}callMergeSucceed(){this._callMergeSucceed++}zoomedIn(){this._zoomedInCount++}zoomedOut(e,t){t||this._zoomedOutCount++,e&&(this._zoomedInDuration+=e)}zoomDragUsed(){this._zoomDragUsed=!0}zoomChangeType(e){switch(e){case S.ScreenShareZoomType.ScrollWheel:return void this._zoomScrollWheelUsedCount++;case S.ScreenShareZoomType.UIControls:return void this._zoomUIControlsUsedCount++;case S.ScreenShareZoomType.Keyboard:return void this._zoomKeyboardUsedCount++;case S.ScreenShareZoomType.TrackPad:this._zoomTrackPadUsedCount++}}accessedDialpad(){this._accessedDialpadCount++}displayedDtmfWarning(){this._displayedDtmfWarningCount++}setBadQuality(e){this._badQualityCounts.set(e,(this._badQualityCounts.get(e)||0)+1)}setCameraCount(e){this._cameraCount=e}setMicCount(e){this._micCount=e}setSpeakerCount(e){this._speakerCount=e}setCameraPermission(e){this._cameraPermission=e}setMicPermission(e){this._micPermission=e}startTogetherMode(){this._startTogetherMode=!0}startLargeGrid(){this._startLargeGridMode=!0}ableToStartTogetherMode(){this._ableToStartTogetherMode=!0}ableToStartLargeGrid(){this._ableToStartLargeGridMode=!0}setNoiseSuppressionMode(e){this._noiseSuppressionMode=e}togetherModeSceneChangeRequestCount(){this._togetherModeSceneChangeRequestCount++}setHadNewCallStageEnabled(){this._hadNewCallStageEnabled=!0}setHadOldCallStageEnabled(){this._hadOldCallStageEnabled=!0}addCallingStoreUpdatePerformance(e){this._numberOfCallingStoreUpdates++,this._totalCallingStoreUpdateTime+=e}showShareTwinCamConnection(){this._showShareTwinCamConnectionCount++}useTwinCamConnection(){this._twinCamConnectionUsedCount++}failedTwinCamConnection(){this._twinCamConnectionFailedCount++}stopTwinCam(e){this._stopTwinCamCount++,this._terminatedWithTwinCam=e}setAbleToStartTwinCam(e){this._ableToStartTwinCam=e}};class y extends h.TelemetryEventBase{constructor(){super()}getEventName(){return"calling_action"}getAttributes(){return o.assign(super.getAttributes(),{Action:this.getActionName()})}}var _,v,b,T,P,A,k,I,w,N,M,E,x,L,R,D,B,O;t.CallActionBase=y,function(e){e.CallDeniedOrEnded="CallDeniedOrEnded"}(_=t.StopRingReason||(t.StopRingReason={}));t.CallActionPushNotification=class extends y{constructor(e,t,i){super(),this._info=e,this._nodeId=t,this._registrationId=i}getActionName(){return"PushNotification"}getAttributes(){const e={EventType:this._info.eventType,CallId:this._info.callId,RegistrationId:this._registrationId||"",NodeId:this._nodeId||"",IsStarted:this._info.isStarted,Source:this._info.source,TimeWaitingToProcess:Math.max(0,this._info.pushProcessedTime-this._info.pushReceivedTime),HasRegistered:this._info.hasRegistered,ActivationState:s.Types.AppActivationState[s.App.getActivationState()],StopRingReason:this._info.stopRingReason?_[this._info.stopRingReason]:""};return this._info.participantId&&(e.ParticipantId=this._info.participantId),o.assign(super.getAttributes(),e)}},function(e){e[e.None=0]="None",e[e.Stale=1]="Stale",e[e.UpToDate=2]="UpToDate"}(v=t.CallActionTokenState||(t.CallActionTokenState={}));t.CallActionTokenRequested=class extends y{constructor(e,t,i,n,o){super(),this._nodeId=e,this._upToDateToken=t,this._hasConnectedToCall=i,this._hasOutgoingCall=n,this._hasIncomingCall=o}getActionName(){return"TokenRequested"}getAttributes(){return o.assign(super.getAttributes(),{NodeId:this._nodeId,TokenState:v[this._upToDateToken],HasConnectedCall:this._hasConnectedToCall,HasOutgoingCall:this._hasOutgoingCall,HasIncomingCall:this._hasIncomingCall})}};t.CallActionEnterFromCallCard=class extends y{getActionName(){return"EnterFromCallCard"}};t.CallActionInviteFreeDecline=class extends y{constructor(e){super(),this._callId=e}getActionName(){return"InviteFreeDecline"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId})}};t.InCallReaction=class extends y{constructor(e,t,i,n,o){super(),this._reactionKey=e,this._reactionType=t,this._isTonedReaction=i,this._isCustomReaction=n,this._isAnimatedReaction=o}getActionName(){return"InCallReaction"}getAttributes(){return o.assign(super.getAttributes(),{ReactionKey:this._reactionKey,ReactionType:this._reactionType,IsTonedReaction:this._isTonedReaction,IsCustomReaction:this._isCustomReaction,IsAnimatedReaction:this._isAnimatedReaction})}};t.OverflowMenuOpenedEvent=class extends y{constructor(e,t,i){super(),this._totalUserActionsCount=e,this._firstUserAction=t,this._secondUserAction=i}getActionName(){return"OverflowMenuOpened"}getAttributes(){return o.assign(super.getAttributes(),{TotalUserActionsCount:this._totalUserActionsCount,FirstUserAction:this._firstUserAction,SecondUserAction:this._secondUserAction})}};t.InCallUFD=class extends y{constructor(e,t,i){super(),this._callId=e,this._type=t,this._actionType=i}getActionName(){return"InCallUFD"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,UFDType:l.DeviceStatusToastType[this._type],UFDActionType:l.ToastActionType[this._actionType]})}};t.InCallActivity=class extends y{constructor(e,t){super(),this._callId=e,this._correlationId=t}getActionName(){return"InCallActivity"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,CorrelationId:this._correlationId})}};t.CallActionError=class extends y{constructor(e,t,i,n){super(),this._error=e,this._nodeId=t,this._registrationId=i,this._pstnCampaign=n}getActionName(){return"Error"}getAttributes(){return o.assign(super.getAttributes(),{NodeId:this._nodeId||"",RegistrationId:this._registrationId||"",CallAction:this._error.action,ErrorMessage:this._error.message,CallValidationFaillureReason:this._error.validationReason?r.CallValidationFailureReason[this._error.validationReason]:"",CallTerminatedReason:this._error.terminatedReason,CallFailureType:this._error.failureType,IsUsedForPSTNCampaign:o.includes(this._pstnCampaign,this._error.terminatedReason)})}};t.CallActionCallKitError=class extends y{constructor(e,t,i,n,o,s){super(),this._operation=e,this._errorDomain=t,this._errorCode=i,this._callId=n,this._nodeId=o,this._terminal=s}getActionName(){return"CallKitError"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId||"",NodeId:this._nodeId||"",Operation:this._operation||"",ErrorDomain:this._errorDomain,ErrorCode:this._errorCode,Terminal:this._terminal})}};t.CallActionCallKitSuccess=class extends y{constructor(e,t,i){super(),this._operation=e,this._result=t,this._attemptNumber=i}getActionName(){return"CallKitSuccess"}getAttributes(){return o.assign(super.getAttributes(),{Operation:this._operation,Result:this._result,AttemptNumber:this._attemptNumber})}};t.CallActionCalleeUserPresence=class extends y{constructor(e,t){super(),this._callId=e,this._userPresence=t}getActionName(){return"CallActionCalleeUserPresence"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,UserStatus:this._userPresence.status||"",Availabililty:this._userPresence.availability||"",LastSeenAtUtc:this._userPresence.lastSeenAtUtc||""})}};class F extends h.TelemetryEventBase{constructor(e,t,i=!1){super(),this._callId=e,this._origin=t,this._isRejoin=i}getEventName(){return"calling_call_entry_point"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,Origin:u.NavigationCallOrigin[this._origin],IsRejoiningCall:this._isRejoin})}}t.CallEntryPoint=F;class V extends h.TelemetryEventBase{constructor(e,t){super(),this._date=e,this._dispostion=t}getEventName(){return"calling_warm_call_notification"}getAttributes(){return o.assign(super.getAttributes(),{Date:this._date,Disposition:this._dispostion})}}t.WarmCalNotificationDisposition=V;class U extends h.TelemetryEventBase{constructor(e,t,i,n,o,s,a,r,l,c){super(),this._callId=e,this._endpointId=t,this._nodeId=i,this._participantId=n,this._score=o,this._problemTokens=s,this._questionaryId=a,this._trackingReason=r,this._cdrId=l,this._maxConnectedParticipants=c}getEventName(){return"mdsc_call_quality_feedback"}getAriaTenantTokenOverride(){return g.default.getAriaCQFTenantToken()}getAttributes(){let e=super.getAttributes();return e.uiVersion=g.default.getUIVersion(),e.call_id=this._callId,e.participant_id=this._participantId,this._nodeId&&(e.nodeId=this._nodeId),this._endpointId&&(e.endpoint_id=this._endpointId),this._score&&(e.call_mos_score=this._score-1),this._problemTokens&&(e.call_mos_score_problem_tokens=this._problemTokens),this._cdrId&&(e.call_mos_score_cdr_id=this._cdrId),e.call_mos_score_questionary_id=this._questionaryId,e.call_mos_score_tracking_reason=this._trackingReason,e.call_max_connected_participants=this._maxConnectedParticipants,e}}t.CQF=U,function(e){e[e.Cancel=0]="Cancel",e[e.JoinWithVideo=1]="JoinWithVideo",e[e.JoinWithoutVideo=2]="JoinWithoutVideo"}(b=t.CallPreviewActions||(t.CallPreviewActions={}));t.CallPreviewEvent=class extends y{constructor(e,t=!1,i=!1,n=!1,o){super(),this._callPreviewActions=e,this._isCameraChanged=t,this._isMicrophoneMuted=i,this._isBlurred=n,this._callId=o}getActionName(){return"CallPreview"}getAttributes(){return o.assign(super.getAttributes(),{CallPreviewActions:b[this._callPreviewActions],IsCameraChanged:this._isCameraChanged,IsMicrophoneMuted:this._isMicrophoneMuted,IsBlurred:this._isBlurred,CallId:this._callId})}};t.RingTheGroupEvent=class extends y{constructor(e){super(),this._callId=e}getActionName(){return"RingTheGroup"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId})}};t.ScreenSharingStoppedEvent=class extends y{constructor(e,t){super(),this._callId=e,this._origin=t}getActionName(){return"ScreenSharingStopped"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,Origin:this._origin})}},function(e){e[e.Cancel=0]="Cancel",e[e.ContinueWithCall=1]="ContinueWithCall"}(T=t.RinglessCallInterstitialActions||(t.RinglessCallInterstitialActions={}));t.RinglessCallInterstitialEvent=class extends y{constructor(e,t=!1){super(),this._ringlessCallInterstitialActions=e,this._isLargeGroup=t}getActionName(){return"RinglessCallInterstitial"}getAttributes(){return o.assign(super.getAttributes(),{RinglessCallInterstitialActions:T[this._ringlessCallInterstitialActions],IsLargeGroup:this._isLargeGroup})}};t.UnansweredCallActionEvent=class extends y{constructor(e,t,i,n,o,s){super(),this._callId=e,this._nodeId=t,this._terminatedReason=i,this._failureType=n,this._ucuxReason=o,this._ucuxAction=s}getActionName(){return"UnansweredCallActionEvent"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId||"",NodeId:this._nodeId||"",CallingTerminatedReason:this._terminatedReason,CallingFailureType:this._failureType,UcuxReason:r.UnansweredCallReason[this._ucuxReason],UcuxAction:r.UnansweredCallAction[this._ucuxAction]})}};t.CallCrashEvent=class extends y{constructor(e,t,i,n,o){super(),this._callId=e,this._state=t,this._nodeId=i,this._participantId=n,this._endpointId=o}getActionName(){return"CallCrash"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,CallState:this._state,NodeId:this._nodeId||"",ParticipantId:this._participantId||"",EndpointId:this._endpointId||""})}};t.VideoSuggestionTooltipEvent=class extends y{constructor(e){super(),this._callId=e,this._didTurnOnVideo=!1}getActionName(){return"VideoSuggestionTooltipEvent"}markDidTurnOnVideo(){this._didTurnOnVideo=!0}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,DidTurnOnVideo:this._didTurnOnVideo})}};t.CallAudioSettingsPopup=class extends y{constructor(e,t){super(),this._callId=e,this._isTouch=t,this._didChangeMicDevice=!1,this._didChangeSpeakerDevice=!1,this._didAdjustSpeakerVolume=!1,this._didAdjustMicVolume=!1,this._didChangeMusicMode=!1,this._didChangeAECMode=!1}getActionName(){return"CallAudioSettingsPopup"}markDidChangeMicDevice(){this._didChangeMicDevice=!0}markDidChangeSpeakerDevice(){this._didChangeSpeakerDevice=!0}markDidAdjustSpeakerVolume(){this._didAdjustSpeakerVolume=!0}markDidAdjustMicVolume(){this._didAdjustMicVolume=!0}markDidChangeMusicMode(){this._didChangeMusicMode=!0}markDidChangeAECMode(){this._didChangeAECMode=!0}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,IsTouch:this._isTouch,DidChangeMicDevice:this._didChangeMicDevice,DidChangeSpeakerDevice:this._didChangeSpeakerDevice,DidAdjustSpeakerVolume:this._didAdjustSpeakerVolume,DidAdjustMicVolume:this._didAdjustMicVolume,DidChangeMusicMode:this._didChangeMusicMode,DidChangeAECMode:this._didChangeAECMode})}};t.CallVideoSettingsPopup=class extends y{constructor(e,t){super(),this._callId=e,this._isTouch=t,this._didChangeCameraDevice=!1,this._toggleBlurOnCount=0,this._toggleBlurOffCount=0}getActionName(){return"CallVideoSettingsPopup"}markDidChangeCameraDevice(){this._didChangeCameraDevice=!0}toggleBlurOn(){this._toggleBlurOnCount++}toggleBlurOff(){this._toggleBlurOffCount++}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,IsTouch:this._isTouch,DidChangeCameraDevice:this._didChangeCameraDevice,ToggleBlurOnCount:this._toggleBlurOnCount,ToggleBlurOffCount:this._toggleBlurOffCount})}};t.Zoom=class extends y{constructor(){super()}getActionName(){return"Zoomed"}getAttributes(){return o.assign(super.getAttributes(),{})}};t.PinCallParticipant=class extends y{constructor(e){super(),this._callId=e}getActionName(){return"PinCallParticipant"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId})}};t.UnpinCallParticipant=class extends y{constructor(e){super(),this._callId=e}getActionName(){return"UnpinCallParticipant"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId})}};t.ToggleCallTray=class extends y{constructor(e,t){super(),this._callId=e,this._wasHidden=t}getActionName(){return"ToggleCallTray"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,WasHidden:this._wasHidden})}};t.CallRosterSession=class extends y{constructor(e,t,i){super(),this._callId=e,this._callRosterOrigin=t,this._isOriginWithHandRaised=i,this._callRosterRemovedUserCount=0,this._callRosterMutedUserCount=0,this._callRosterRangUserCount=0,this._callRosterAddToCallCount=0,this._callRosterJoinLinkCount=0,this._callRosterRingTheGroupCount=0,this._isCanceled=!1}setIsCanceled(e){this._isCanceled=e}getActionName(){return"InCallRosterSession"}callRosterRemovedUser(){this._callRosterRemovedUserCount++}callRosterMutedUser(){this._callRosterMutedUserCount++}callRosterRangUser(){this._callRosterRangUserCount++}callRosterAddToCall(){this._callRosterAddToCallCount++}callRosterJoinLink(){this._callRosterJoinLinkCount++}callRosterRingTheGroup(){this._callRosterRingTheGroupCount++}getAttributes(){return o.assign(super.getAttributes(),{Action:this.getActionName(),CallId:this._callId,Origin:l.CallRosterOrigin[this._callRosterOrigin],IsOriginWithHandRaised:this._isOriginWithHandRaised,IsCanceled:this._isCanceled,CallRosterAddToCallCount:this._callRosterAddToCallCount,CallRosterJoinLinkCount:this._callRosterJoinLinkCount,CallRosterMutedUserCount:this._callRosterMutedUserCount,CallRosterRangUserCount:this._callRosterRangUserCount,CallRosterRemovedUserCount:this._callRosterRemovedUserCount,CallRosterRingTheGroupCount:this._callRosterRingTheGroupCount})}},function(e){e[e.FailedToParsePayload=0]="FailedToParsePayload",e[e.AcknowledgeFailed=1]="AcknowledgeFailed",e[e.CallerNotAllowed=2]="CallerNotAllowed",e[e.InvalidNotification=3]="InvalidNotification",e[e.WrongRecipient=4]="WrongRecipient",e[e.HandshakeNotCompleted=5]="HandshakeNotCompleted",e[e.DecryptionFailed=6]="DecryptionFailed",e[e.GoGoNetwork=7]="GoGoNetwork",e[e.CallerNotContact=8]="CallerNotContact",e[e.RedundantNotification=9]="RedundantNotification",e[e.LackedLocalPermission=10]="LackedLocalPermission"}(t.IncomingCallEndReason||(t.IncomingCallEndReason={})),function(e){e[e.NotificationReceived=0]="NotificationReceived",e[e.WaitingForCallingStartup=1]="WaitingForCallingStartup",e[e.BeginAcknowledge=2]="BeginAcknowledge",e[e.CompleteAcknowledge=3]="CompleteAcknowledge"}(t.IncomingCallStep||(t.IncomingCallStep={})),function(e){e[e.RejectedByCallee=0]="RejectedByCallee",e[e.NotifyingCalleeFailed=1]="NotifyingCalleeFailed",e[e.AnsweringCallFailed=2]="AnsweringCallFailed",e[e.StopRingerNotificationReceived=3]="StopRingerNotificationReceived",e[e.Error=4]="Error",e[e.DNDEnabled=5]="DNDEnabled"}(t.AnswerCallEndReason||(t.AnswerCallEndReason={})),function(e){e[e.InAppBanner=0]="InAppBanner",e[e.InAppFullScreen=1]="InAppFullScreen",e[e.OSNotification=2]="OSNotification",e[e.DesktopCallNotification=3]="DesktopCallNotification",e[e.CallInteractionManager=4]="CallInteractionManager"}(t.AnswerCallNotificationLocation||(t.AnswerCallNotificationLocation={})),function(e){e[e.NotifyingCallee=0]="NotifyingCallee",e[e.CalleeAnsweredWithAudio=1]="CalleeAnsweredWithAudio",e[e.CalleeAnsweredWithVideo=2]="CalleeAnsweredWithVideo",e[e.CalleeRejected=3]="CalleeRejected"}(t.AnswerCallStep||(t.AnswerCallStep={})),function(e){e[e.Unknown=0]="Unknown",e[e.Gallery=1]="Gallery",e[e.MessageStream=2]="MessageStream",e[e.SharedPhoto=3]="SharedPhoto",e[e.OverflowMenu=4]="OverflowMenu"}(t.CallActivitiesEntryPoint||(t.CallActivitiesEntryPoint={})),function(e){e[e.ChatOverflow=0]="ChatOverflow",e[e.MessageComposer=1]="MessageComposer",e[e.OverflowMenu=2]="OverflowMenu",e[e.Stage=3]="Stage",e[e.CallGalleryEmptyView=4]="CallGalleryEmptyView"}(P=t.CallAddPhotosEntryPoint||(t.CallAddPhotosEntryPoint={}));class H extends y{constructor(e,t,i){super(),this._callId=e,this._isGroupCall=t,this._origin=i}setPhotosSent(e){this._photosSent=e}setFromMediaPicker(e){this._fromMediaPicker=e}setMediaPickerPhotosSelected(e){this._mediaPickerPhotosSelected=e}setPhotoTaken(e){this._wasPhotoTaken=e}setNumberOfPhotos(e){this._photosCount=e}getActionName(){return"CallAddPhotosBaseEvent"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,IsGroupCall:this._isGroupCall,PhotosSent:!!this._photosSent,FromMediaPicker:!!this._fromMediaPicker,MediaPickerPhotosSelected:!!this._mediaPickerPhotosSelected,WasPhotoTaken:!!this._wasPhotoTaken,PhotosCount:this._photosCount||0,Origin:P[this._origin]})}}t.CallAddPhotosEvent=class extends H{getActionName(){return"CallAddPhotosEvent"}};t.CallAddPhotosWithFabEvent=class extends H{getActionName(){return"CallAddPhotosWithFabEvent"}};t.CallFullScreenBotEvent=class extends y{constructor(e,t){super(),this._callId=e,this._botType=t,this._enableVideo=!1,this._botOnCallUselessLengthSeconds=0,this._botOnCallUselessTime=0}getActionName(){return`Call${this._botType}Event`}setBotOnCallLengthSeconds(e){this._botOnCallLengthSeconds=e}addBotOnCallUselessLengthSeconds(e){this._botOnCallUselessLengthSeconds+=e}getBotOnCallUselessTime(){return this._botOnCallUselessTime}setBotOnCallUselessTime(e){this._botOnCallUselessTime=e}setEnableVideo(){this._enableVideo=!0}setMaxConnectedParticipants(e){(!this._maxConnectedParticipants||e>this._maxConnectedParticipants)&&(this._maxConnectedParticipants=e)}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,DidEnableVideo:this._enableVideo,BotOnCallSeconds:this._botOnCallLengthSeconds||0,BotOnCallUselessSeconds:this._botOnCallUselessLengthSeconds,MaxConnectedParticipants:this._maxConnectedParticipants||0})}};t.CallFullScreenBotError=class extends y{constructor(e,t,i){super(),this._errorCode=e,this._callId=t,this._botType=i}getActionName(){return"CallFullScreenBotError"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId||"",ErrorCode:this._errorCode,BotType:this._botType})}},function(e){e[e.RegisterDataChannelFailed=0]="RegisterDataChannelFailed",e[e.RegisterDataChannelSucceeded=1]="RegisterDataChannelSucceeded",e[e.AudienceBotResponse=2]="AudienceBotResponse",e[e.AudienceBotChangeSceneEvent=3]="AudienceBotChangeSceneEvent",e[e.BingBackgroundsInfoSendFailed=4]="BingBackgroundsInfoSendFailed"}(A=t.CallDataChannelEventType||(t.CallDataChannelEventType={}));t.CallDataChannelEvent=class extends y{constructor(e,t,i,n,o,s){super(),this._type=e,this._value=t,this._errorCode=i,this._errorSubCode=n,this._errorText=o,this._retryAttempt=s}getActionName(){return"CallDataChannelEvent"}getAttributes(){var e,t,i,n,s;const a={CallDataChannelEventType:A[this._type],HandledValue:null!==(e=this._value)&&void 0!==e?e:"",ErrorCode:null!==(t=this._errorCode)&&void 0!==t?t:0,ErrorSubCode:null!==(i=this._errorSubCode)&&void 0!==i?i:0,ErrorText:null!==(n=this._errorText)&&void 0!==n?n:"",RetryAttempt:null!==(s=this._retryAttempt)&&void 0!==s?s:0};return o.assign(super.getAttributes(),a)}};t.CallRecordingEvent=class extends y{constructor(e){super(),this._callId=e,this._screenShare=!1,this._enableVideo=!1}getActionName(){return"CallRecordingEvent"}recordingLengthSeconds(e){this._recordingLengthSeconds=e}setScreenShare(){this._screenShare=!0}setEnableVideo(){this._enableVideo=!0}setMaxConnectedParticipants(e){(!this._maxConnectedParticipants||e>this._maxConnectedParticipants)&&(this._maxConnectedParticipants=e)}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,RecordingLengthSeconds:this._recordingLengthSeconds||0,DidScreenShare:this._screenShare,DidEnableVideo:this._enableVideo,MaxConnectedParticipants:this._maxConnectedParticipants||0})}};t.NdiBroadcastEvent=class extends y{constructor(e,t){super(),this._callId=e,this._maxConnectedParticipantsCount=t,this._wasVideoEverEnabled=!1}getActionName(){return"NdiBroadcastEvent"}setBroadcastingLengthSeconds(e){this._broadcastingDurationSeconds=e}setWatermarkLocation(e){this._watermarkLocation=e}observeVideoEnabled(){this._wasVideoEverEnabled=!0}setMaxConnectedParticipants(e){e>this._maxConnectedParticipantsCount&&(this._maxConnectedParticipantsCount=e)}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,WasVideoEverEnabled:this._wasVideoEverEnabled,BroadcastingDurationSeconds:this._broadcastingDurationSeconds||0,MaxConnectedParticipantsCount:this._maxConnectedParticipantsCount||0,LastWatermarkLocation:this._watermarkLocation||""})}};t.CallAddToCallEvent=class extends y{constructor(e,t,i,n,o){super(),this._callId=e,this._isGroupCall=t,this._hasCoachmark=i,this._isPSTN=n,this._origin=o}getActionName(){return"AddToCallEvent"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,IsGroupCall:this._isGroupCall,HasCoachmark:this._hasCoachmark,IsPSTN:this._isPSTN,Origin:this._origin})}},function(e){e[e.ContextMenu=0]="ContextMenu",e[e.OverflowMenu=1]="OverflowMenu"}(t.MuteEveryoneOrigin||(t.MuteEveryoneOrigin={}));t.CallMuteEveryoneEvent=class extends y{constructor(e){super(),this._origin=e}getActionName(){return"MuteEveryone"}getAttributes(){return Object.assign(Object.assign({},super.getAttributes()),{Origin:this._origin})}},function(e){e[e.InitiatorMetadataUnavailable=0]="InitiatorMetadataUnavailable",e[e.InvalidToken=1]="InvalidToken"}(k=t.CallRecorderBotDebugEventType||(t.CallRecorderBotDebugEventType={}));t.CallRecorderBotDebugEvent=class extends y{constructor(e,t){super(),this._type=e,this._properties=t}getActionName(){return"CallRecorderBotDebugEvent"}getAttributes(){const e={CallRecorderBotDebugEventType:k[this._type]};return o.assign(e,this._properties),o.assign(super.getAttributes(),e)}},function(e){e[e.SetConfigFailed=0]="SetConfigFailed",e[e.SetConfigSucceeded=1]="SetConfigSucceeded"}(I=t.CallTranslatorDebugEventType||(t.CallTranslatorDebugEventType={}));t.CallTranslatorDebugEvent=class extends y{constructor(e,t,i){super(),this._type=e,this._errorCode=t,this._errorMessage=i}getActionName(){return"CallTranslatorDebug"}getAttributes(){var e,t;const i={CallTranslatorDebugEventType:I[this._type],ErrorCode:null!==(e=this._errorCode)&&void 0!==e?e:"",ErrorMessage:null!==(t=this._errorMessage)&&void 0!==t?t:""};return o.assign(super.getAttributes(),i)}};class W extends y{constructor(e,t){super(),this._callId=e,this._botType=t}getAttributes(){const e={BotType:this._botType,CallId:this._callId};return o.assign(super.getAttributes(),e)}}t.AddBotToCallEvent=class extends W{getActionName(){return"AddBotToCallInitiated"}};t.AddBotToCallFailedEvent=class extends W{constructor(e,t,i,n){super(e,t),this._addBotDurationInMs=i,this._errorCode=n}getActionName(){return"AddBotToCallFailed"}getAttributes(){const e={AddBotDurationInMs:this._addBotDurationInMs,ErrorCode:this._errorCode};return o.assign(super.getAttributes(),e)}};t.AddBotToCallSucceededEvent=class extends W{constructor(e,t,i){super(e,t),this._addBotDurationInMs=i}getActionName(){return"AddBotToCallSucceeded"}getAttributes(){const e={AddBotDurationInMs:this._addBotDurationInMs};return o.assign(super.getAttributes(),e)}},function(e){e[e.PopupShown=0]="PopupShown",e[e.Mute=1]="Mute",e[e.RemoveFromCall=2]="RemoveFromCall",e[e.CropVideo=3]="CropVideo",e[e.FullVideo=4]="FullVideo",e[e.SendMessage=5]="SendMessage",e[e.ViewProfile=6]="ViewProfile"}(w=t.CanvasAndRibbonActions||(t.CanvasAndRibbonActions={}));t.CanvasAndRibbonActionsEvent=class extends y{constructor(e){super(),this._action=e}getActionName(){return"CanvasAndRibbonActionsEvent"}getAttributes(){return o.assign(super.getAttributes(),{UserAction:w[this._action]})}},function(e){e[e.EnterFullScreen=0]="EnterFullScreen",e[e.ExitFullScreen=1]="ExitFullScreen"}(N=t.RibbonSettingsMenuActions||(t.RibbonSettingsMenuActions={}));t.RibbonSettingsMenuActionEvent=class extends y{constructor(e){super(),this._action=e}getActionName(){return"RibbonSettingsMenuEvent"}getAttributes(){return o.assign(super.getAttributes(),{UserAction:N[this._action]})}},function(e){e[e.EndCallPopupShown=0]="EndCallPopupShown",e[e.EndCallForEveryone=1]="EndCallForEveryone",e[e.LeaveCall=2]="LeaveCall"}(M=t.EndCallPopupActions||(t.EndCallPopupActions={}));t.EndCallPopupMenuActionsEvent=class extends y{constructor(e){super(),this._action=e}getActionName(){return"EndCallPopupMenuEvent"}getAttributes(){return o.assign(super.getAttributes(),{UserAction:M[this._action]})}};t.CallCaptioningEvent=class extends y{constructor(e,t,i,n,o,s){super(),this._callId=e,this._captioningSessionId=t,this._spokenLanguage=i,this._subtitleLanguage=n,this._otherSpokenLanguage=o,this._isAutoJoin=s,this._subtitleHistoryViewCount=0,this._tokenRefreshCount=0,this._captionsPositionModeChangesCount=0}getActionName(){return"CallCaptioningEvent"}setCaptioningLengthSeconds(e){this._captioningLengthSeconds=e}setFirstCaptionReceivedLengthSeconds(e){this._firstCaptionReceivedLengthSeconds=e}setMaxSenderCount(e){(!this._maxSenderCount||e>this._maxSenderCount)&&(this._maxSenderCount=e)}openSubtitleHistoryView(){this._subtitleHistoryViewCount++}setPositionMode(e){this._captionsPositionModeChangesCount++,this._lastCaptionsPositionMode=e}tokenRefresh(){this._tokenRefreshCount++}getAttributes(){var e,t,i;return o.assign(super.getAttributes(),{CallId:this._callId,CaptioningSessionId:this._captioningSessionId,CaptioningLengthSeconds:this._captioningLengthSeconds||0,FistCaptionReceivedLengthSeconds:this._firstCaptionReceivedLengthSeconds||0,MaxSenderCount:this._maxSenderCount||0,SpokenLanguage:null!==(e=this._spokenLanguage)&&void 0!==e?e:"",SubtitleLanguage:null!==(t=this._subtitleLanguage)&&void 0!==t?t:"",OtherSpokenLanguage:null!==(i=this._otherSpokenLanguage)&&void 0!==i?i:"",IsSubtitleLanguageDifferentFromSpokenLanguage:this._spokenLanguage!==this._subtitleLanguage,SubtitleHistoryViewCount:this._subtitleHistoryViewCount,TokenRefreshCount:this._tokenRefreshCount,IsAutoJoin:this._isAutoJoin,CaptionsPositionModeChangedCount:this._captionsPositionModeChangesCount,LastCaptionsPositionMode:this._lastCaptionsPositionMode||""})}};t.CallPstnTranslationLanguageChangeEvent=class extends y{constructor(e,t,i,n,o){super(),this._callId=e,this._captioningSessionId=t,this._prevLanguage=i,this._language=n,this._isLocal=o}getActionName(){return"CallPstnTranslationLanguageChangeEvent"}getAttributes(){var e;return o.assign(super.getAttributes(),{CallId:this._callId,CaptioningSessionId:this._captioningSessionId,PrevLanguage:null!==(e=this._prevLanguage)&&void 0!==e?e:"",Language:this._language,IsLocal:this._isLocal})}},function(e){e[e.PopupShown=0]="PopupShown",e[e.SwitchCamera=1]="SwitchCamera",e[e.TurnOnVideo=2]="TurnOnVideo",e[e.TurnOffVideo=3]="TurnOffVideo",e[e.Mute=4]="Mute",e[e.Unmute=5]="Unmute",e[e.BackgroundBlur=6]="BackgroundBlur",e[e.BackgroundUnBlur=7]="BackgroundUnBlur"}(E=t.LocalVideoActions||(t.LocalVideoActions={})),function(e){e[e.SwitchToSpeaker=0]="SwitchToSpeaker",e[e.SwitchToContent=1]="SwitchToContent",e[e.SwitchToPresentation=2]="SwitchToPresentation",e[e.SwitchToFloat=3]="SwitchToFloat",e[e.SwitchToWindow=4]="SwitchToWindow",e[e.EnterFullScreen=5]="EnterFullScreen",e[e.SwitchToModernGrid=6]="SwitchToModernGrid",e[e.SwitchToTogetherMode=7]="SwitchToTogetherMode",e[e.SwitchToLargeGallery=8]="SwitchToLargeGallery",e[e.ActivateOnlyVideoOnTheStage=9]="ActivateOnlyVideoOnTheStage",e[e.DeactivateOnlyVideoOnTheStage=10]="DeactivateOnlyVideoOnTheStage",e[e.ActivateNewCallScreen=11]="ActivateNewCallScreen",e[e.DeactivateNewCallScreen=12]="DeactivateNewCallScreen",e[e.ActivateSelfInTheGrid=13]="ActivateSelfInTheGrid",e[e.DeactivateSelfInTheGrid=14]="DeactivateSelfInTheGrid",e[e.SwitchToDarkThemeStage=15]="SwitchToDarkThemeStage",e[e.SwitchToLightThemeStage=16]="SwitchToLightThemeStage"}(x=t.CallViewMenuActions||(t.CallViewMenuActions={}));t.LocalVideoActionsEvent=class extends y{constructor(e){super(),this._action=e}getActionName(){return"LocalVideoActionsEvent"}getAttributes(){return o.assign(super.getAttributes(),{UserAction:E[this._action]})}};class z extends h.TelemetryEventBase{constructor(e,t,i,n,o){super(),this._hasActiveCall=e,this._predefinedImage=t,this._effectType=i,this._predefinedImageName=n,this._category=o}getEventName(){return"calling_background_effects_settings"}getAttributes(){const e=super.getAttributes();return e.EffectType=this._effectType,e.HasActiveCall=!!this._hasActiveCall,this._effectType===u.BackgroundEffect.BackgroundImage&&(e.IsPredefinedImage=this._predefinedImage),this._predefinedImageName&&(e.PredefinedImageName=this._predefinedImageName),this._category&&(e.Category=this._category),o.assign(super.getAttributes(),e)}}t.BackgroundEffectsSettingsEvent=z;t.BackgroundBlurEvent=class extends y{constructor(e,t){super(),this._callId=e,this._durationSecond=t}getActionName(){return"BackgroundBlurEvent"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,BlurSessionDuration:this._durationSecond})}};t.BackgroundEffectEvent=class extends y{constructor(e,t,i){super(),this._callId=e,this._durationSecond=t,this._type=i}getActionName(){return"BackgroundEffectEvent"}getAttributes(){const e=this._type===u.BackgroundEffect.Blur?"BlurSessionDuration":"BackgroundImageSessionDuration";return o.assign(super.getAttributes(),{CallId:this._callId,[e]:this._durationSecond})}};class G extends h.TelemetryEventBase{constructor(e,t,i,n,o){super(),this._callId=e,this._isoDate=t,this._bingEffectUser=i,this._market=n,this._isCollapsed=o}getEventName(){return"calling_background_effects_bing_click"}getAttributes(){var e,t;const i=super.getAttributes();return i.CallId=null!==(e=this._callId)&&void 0!==e?e:"",i.ImgDate=this._isoDate,i.Market=null!==(t=this._market)&&void 0!==t?t:"",i.IsCollapsed=this._isCollapsed,o.assign(super.getAttributes(),i)}getPiiAttributes(){var e;const t=super.getPiiAttributes();return t.BingEffectUser={value:null!==(e=this._bingEffectUser)&&void 0!==e?e:"",piiKind:n.AWTPiiKind.Identity},o.assign(super.getPiiAttributes(),t)}}t.BackgroundEffectsBingInfoClickEvent=G;class K extends h.TelemetryEventBase{constructor(e,t,i,n,o){super(),this._market=e,this._attempt=t,this._code=i,this._imageCount=n,this._error=o}getEventName(){return"calling_bing_background_download_api"}getAttributes(){var e,t;const i=super.getAttributes();return i.Market=this._market,i.Attempt=this._attempt,i.ResultCode=null!==(e=this._code)&&void 0!==e?e:0,i.ImageCount=null!==(t=this._imageCount)&&void 0!==t?t:0,i.Error=this._error||"",o.assign(super.getAttributes(),i)}}t.BingBackgroundsDownloadApiEvent=K,function(e){e[e.None=0]="None",e[e.Navigate=1]="Navigate",e[e.Call=2]="Call"}(L=t.CallbackReminderTappedAction||(t.CallbackReminderTappedAction={}));class j extends h.TelemetryEventBase{constructor(e,t,i){super(),this._result=e,this._missedCallTime=t,this._notificationShownTime=i}getEventName(){return"CallbackReminderTapped"}getAttributes(){const e=Date.now();return o.assign(super.getAttributes(),{CallbackReminderTappedAction:L[this._result],TimeSinceMissedCallMinutes:(e-this._missedCallTime)/6e4,TimeSinceReminderMinutes:(e-this._notificationShownTime)/6e4})}}t.CallbackReminderTappedEvent=j,function(e){e[e.Displayed=0]="Displayed",e[e.Pressed=1]="Pressed"}(R=t.IncomingVideoNotificationAction||(t.IncomingVideoNotificationAction={}));class q extends h.TelemetryEventBase{constructor(e,t,i){super(),this._origin=e,this._callId=t,this._action=i}getEventName(){return"calling_incoming_video_notification"}getAttributes(){return o.assign(super.getAttributes(),{Origin:this._origin,CallId:this._callId,Action:R[this._action]})}}t.IncomingVideoNotification=q;t.ScreenShareSourceGetPreviewFailure=class extends y{constructor(e,t,i){super(),this._error=e,this._sourceType=t,this._currentlyShared=i}getActionName(){return"GetPreview"}getEventName(){return"GetPreviewFailed"}getAttributes(){return o.assign(super.getAttributes(),{Error:this._error,SourceType:this._sourceType,CurrentlyShared:this._currentlyShared})}};t.ScreenShareSourceGetIconFailure=class extends y{constructor(e,t){super(),this._error=e,this._currentlyShared=t}getActionName(){return"GetIcon"}getEventName(){return"GetIconFailed"}getAttributes(){return o.assign(super.getAttributes(),{Error:this._error,CurrentlyShared:this._currentlyShared})}};t.CallMergeEvent=class extends y{constructor(e,t,i){super(),this._activeCallId=e,this._incomingCallId=t,this._succeed=i}getActionName(){return"CallMergeEvent"}getAttributes(){return o.assign(super.getAttributes(),{ActiveCallId:this._activeCallId,IncomingCallId:this._incomingCallId,Succeed:this._succeed})}};class Q extends h.TelemetryEventBase{constructor(e,t,i){super(),this._startingRoute=e,this._endingRoute=t,this._changed=i}getEventName(){return"AudioOutputDeviceSwitcher"}getAttributes(){return o.assign(super.getAttributes(),{DidChangeOutputDevice:this._changed,StartingOutputDevice:this._startingRoute,EndingOutputDevice:this._endingRoute})}}t.AudioOutputRouteChangedEvent=Q,function(e){e[e.Accept=0]="Accept",e[e.Reject=1]="Reject",e[e.Mute=2]="Mute"}(D=t.SystemHotKeyCallAction||(t.SystemHotKeyCallAction={}));t.SystemHotKeyCallEvent=class extends y{constructor(e){super(),this._systemHotKeyCallAction=e}getActionName(){return"SystemHotKeyCall"}getAttributes(){return o.assign(super.getAttributes(),{SystemHotKeyCallAction:D[this._systemHotKeyCallAction]})}};t.SpeakerViewEvent=class extends y{constructor(e,t){super(),this._callId=e,this._durationSecond=t}getActionName(){return"SpeakerView"}getAttributes(){return o.assign(super.getAttributes(),{CallId:this._callId,SpeakerViewSessionDuration:this._durationSecond})}};t.CallViewMenuActionEvent=class extends y{constructor(e){super(),this._userAction=e}getActionName(){return"CallViewMenuAction"}getAttributes(){return o.assign(super.getAttributes(),{UserAction:x[this._userAction]})}};t.CallStageLayoutChangeEvent=class extends y{constructor(e,t,i,n,o,s){super(),this._fromStageMode=e,this._toStageMode=t,this._fromOnlyVideoOnTheStage=i,this._toOnlyVideoOnTheStage=n,this._isNewCallScreenActive=o,this._isAutomatic=s}getActionName(){return"CallStageLayoutChange"}getAttributes(){return o.assign(super.getAttributes(),{FromStageMode:l.StageMode[this._fromStageMode],ToStageMode:l.StageMode[this._toStageMode],FromOnlyVideoOnTheStage:this._fromOnlyVideoOnTheStage,ToOnlyVideoOnTheStage:this._toOnlyVideoOnTheStage,IsNewCallScreenActive:this._isNewCallScreenActive,IsAutomatic:this._isAutomatic})}},function(e){e[e.Apply=0]="Apply",e[e.Cancel=1]="Cancel"}(t.TogetherModePanelActionOrigin||(t.TogetherModePanelActionOrigin={}));t.TogetherModePanelActionEvent=class extends y{constructor(e,t){super(),this._origin=e,this._isChangingBackground=t}getActionName(){return"TogetherModePanelAction"}getAttributes(){const e=super.getAttributes();return e.IsChangingBackground=this._isChangingBackground,e.Origin=this._origin,e}},function(e){e[e.AnsweredWithAudio=0]="AnsweredWithAudio",e[e.AnsweredWithVideo=1]="AnsweredWithVideo",e[e.Declined=2]="Declined",e[e.DeclinedWithMessage=3]="DeclinedWithMessage"}(B=t.MobileCallAnswerActions||(t.MobileCallAnswerActions={}));t.MobileCallAnswerEvent=class extends y{constructor(e,t){super(),this._userAction=e,this._messageIndex=t}getActionName(){return"MobileCallAnswerEvent"}getAttributes(){return o.assign(super.getAttributes(),{UserAction:B[this._userAction],MessageSent:this._messageIndex})}},function(e){e.MobileIncomingRingPanel="MobileIncomingRingPanel",e.IncomingRingControls="IncomingRingControls",e.DesktopCallControls="DesktopCallControls",e.OngoingCallService="OngoingCallService",e.MobileCallControls="MobileCallControls"}(t.CallControlContext||(t.CallControlContext={})),function(e){e.Ignore="Ignore",e.AnswerCall="AnswerCall",e.EndCall="EndCall"}(t.MediaActionEventResult||(t.MediaActionEventResult={}));t.MediaActionEvent=class extends y{constructor(e,t){super(),this._context=e,this._result=t}getActionName(){return"MediaAction"}getAttributes(){return o.assign(super.getAttributes(),{Context:this._context,Result:this._result})}};t.MaybeEndCallFromAndroidBtScoDisconnectEvent=class extends y{constructor(e){super(),this._context=e}getActionName(){return"MaybeEndCallFromAndroidBtScoDisconnect"}getAttributes(){return o.assign(super.getAttributes(),{Context:this._context})}},function(e){e[e.Enter=0]="Enter",e[e.Leave=1]="Leave"}(O=t.FullChatUXNavigation||(t.FullChatUXNavigation={}));t.FullChatUXTelemetryEvent=class extends y{constructor(e,t,i){super(),this._navigation=e,this._conversationId=t,this._callId=i}getActionName(){return"FullChatUX"}getNavigationName(){return O[this._navigation]}getAttributes(){const e=super.getAttributes();return e.Navigation=this.getNavigationName(),e.IsGroupConversation=d.isGroupConversation(this._conversationId),e.CallId=this._callId,e}};t.CancelPreheatedCallNotJoinedEvent=class extends y{constructor(e,t){super(),this._callId=e,this._terminatedReason=t}getActionName(){return"CancelPreheatedCallNotJoined"}getAttributes(){const e=super.getAttributes();return e.CallId=this._callId,e.TerminatedReason=a.TerminatedReason[this._terminatedReason],e}};t.FallbackFromJoinPreheatedToRegularJoinEvent=class extends y{constructor(e){super(),this._callId=e}getActionName(){return"FallbackFromJoinPreheatedToRegularJoin"}getAttributes(){const e=super.getAttributes();return e.CallId=this._callId,e}}},72675:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorFilterRenderDurationEvent=t.ColorFilterFailureEvent=t.QRCodeScan=t.CameraCaptureEvent=t.CameraFirstFrame=t.CameraFailureEvent=t.MediaCapturedEvent=t.VideoReencode=t.MarkupAdded=t.CameraVisibleTime=t.MediaSource=t.MediaType=void 0;const n=i(96486),o=i(27028),s=i(46096),a=i(17252),r=i(349);var l;!function(e){e[e.Photo=0]="Photo",e[e.Video=1]="Video",e[e.Document=2]="Document",e[e.Whiteboard=3]="Whiteboard"}(l=t.MediaType||(t.MediaType={})),function(e){e.OfficeLens="OL",e.FSM="FSM"}(t.MediaSource||(t.MediaSource={}));class c extends r.TelemetryEventBase{constructor(){super()}getEventName(){return"camera_action"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),a.isOfficeLensTelemetryActive()&&(e.IsOfficeLens=!0),e}}t.CameraVisibleTime=class extends c{constructor(e,t){super(),this._startTime=e,this._endTime=t}getActionName(){return"CameraVisibleTime"}getAttributes(){return n.assign(super.getAttributes(),{VisibleTimeMs:this._endTime-this._startTime})}};t.MarkupAdded=class extends c{constructor(e,t,i,n,o,s,a,r,l){super(),this._entryPoint=e,this._ink=t,this._text=i,this._stickers=n,this._overlay=o,this._filter=s,this._stickerIds=a,this._crop=r,this._rotate=l}getActionName(){return"MarkupAdded"}getAttributes(){let e=super.getAttributes();return e.EntryPoint=s.PostSource[this._entryPoint],e.Ink=this._ink||!1,e.Text=this._text||!1,e.Sticker=this._stickers||!1,e.Overlay=this._overlay||!1,e.Filter=this._filter||!1,e.StickerIds=this._stickerIds?this._stickerIds.join():"",this._crop&&(e.Crop=this._crop),this._rotate&&(e.Rotate=this._rotate),e}};t.VideoReencode=class extends c{constructor(e){super(),this._videoDuration=e,this._startTime=0,this._reencodeDuration=0,this._success=!1,this._error="",this._startTime=Date.now()}getActionName(){return"VideoReencode"}getAttributes(){return n.assign(super.getAttributes(),{Duration:this._reencodeDuration,Success:this._success,VideoDuration:this._videoDuration,Error:this._error})}setStatus(e,t=""){this._success=e,this._error=t,this._reencodeDuration=this._startTime>0?Date.now()-this._startTime:0}};class d extends c{constructor(e){super(),this._source=e}getAttributes(){return n.assign(super.getAttributes(),{Source:this._source})}}t.MediaCapturedEvent=class extends d{constructor(e,t,i=1,n,o){super(t),this._success=e,this._mediaCount=i,this._failureReason=n,this._errorCode=o}getActionName(){return"MediaCaptured"}getAttributes(){let e=super.getAttributes();return e.Success=this._success,void 0!==this._failureReason&&(e.FailureReason=this._failureReason,this._errorCode&&(e.ErrorCode=this._errorCode)),e.MediaCount=this._mediaCount,e}};t.CameraFailureEvent=class extends d{constructor(e,t,i){super(t),this._failureReason=e,this._failureDetails=i}getActionName(){return"CameraFailure"}getAttributes(){return n.assign(super.getAttributes(),{FailureReason:this._failureReason,FailureDetails:this._failureDetails||""})}};t.CameraFirstFrame=class extends d{constructor(e,t){super(t),this._duration=Date.now()-e}getActionName(){return"CameraFirstFrame"}getAttributes(){return n.assign(super.getAttributes(),{Duration:this._duration})}};t.CameraCaptureEvent=class extends d{constructor(e,t,i,n,o,s,a=1){super(o),this._captureEventName=e,this._success=t,this._failureReason=i,this._resolution=n,this._mediaType=s,this._mediaCount=a}getActionName(){return this._captureEventName}getAttributes(){let e=super.getAttributes();return e.Success=this._success,void 0!==this._failureReason&&(e.FailureReason=this._failureReason),void 0!==this._resolution&&(e.CaptureResolution=this._resolution),void 0!==this._mediaType&&(e.MediaType=l[this._mediaType]),e.MediaCount=this._mediaCount,e}};t.QRCodeScan=class extends c{constructor(e){super(),this._scanState=e}getActionName(){return"QRCodeScan"}getAttributes(){return n.assign(super.getAttributes(),{QRCodeScanState:o.QRCodeScanState[this._scanState]})}};t.ColorFilterFailureEvent=class extends c{constructor(e){super(),this._failure=e}getActionName(){return"ColorFilterFailure"}getAttributes(){return n.assign(super.getAttributes(),{Failure:this._failure})}};t.ColorFilterRenderDurationEvent=class extends c{constructor(e){super(),this._renderDuration=e}getActionName(){return"ColorFilterRenderDuration"}getAttributes(){return n.assign(super.getAttributes(),{RenderDuration:this._renderDuration})}}},23842:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CelebrationNotificationTelemetryEvent=t.CelebrationNotificationType=t.CelebrationNotificationTelemetryEventAction=void 0;const n=i(36076),o=i(96486),s=i(349);!function(e){e.Created="NotificationCreated",e.SelectedTopContactUserProfileIncomplete="SelectedTopContactUserProfileIncomplete",e.PullCampaignContentServiceFailed="PullCampaignContentServiceFailed",e.ContactCutOffLimitReached="ContactCutOffLimitReached",e.NotificationAlreadyShown="NotificationAlreadyShown"}(t.CelebrationNotificationTelemetryEventAction||(t.CelebrationNotificationTelemetryEventAction={})),function(e){e.EngagementPopCard="EngagementPopCard"}(t.CelebrationNotificationType||(t.CelebrationNotificationType={}));class a extends s.TelemetryEventBase{constructor(e){super(),this._telemetryEventOptions=e}shouldSend(){return!0}getEventName(){return"celebration_notification"}getPiiAttributes(){return this._telemetryEventOptions.celebratedUserSkypeId?o.merge(super.getPiiAttributes(),{CelebratedUser:{value:this._telemetryEventOptions.celebratedUserSkypeId,piiKind:n.AWTPiiKind.Identity}}):super.getPiiAttributes()}getAttributes(){return o.assign(super.getAttributes(),this._getOwnAttributes())}_getOwnAttributes(){return o.assign(super.getAttributes(),{Action:this._telemetryEventOptions.action,NotificationType:this._telemetryEventOptions.notificationType||"",CampaignId:this._telemetryEventOptions.cardCampaignId,CardGuid:this._telemetryEventOptions.cardGuid,NumberOfTopContacts:this._telemetryEventOptions.numberOfTopContacts,DidIdentifyDifferentTopContacts:this._telemetryEventOptions.didIdentifyDifferentTopContacts})}}t.CelebrationNotificationTelemetryEvent=a},39468:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CensusTelemetryEvent=void 0;const n=i(96486),o=i(96486),s=i(78230),a=i(2604),r=i(90239),l=i(1246),c=i(349),d="Unset",u="Set";class g extends c.TelemetryEventBase{constructor(e){super(),this._props=e}getEventName(){return"people_census"}getAttributes(){const e=super.getAttributes();e.AvatarState=this._props.userHasAvatar?u:d,e.PhoneVerificationState=this._mapBooleanOrUndefinedToCensusState(this._props.userHasVerifiedPhoneNumber),e.EmailVerificationState=this._mapBooleanOrUndefinedToCensusState(this._props.userHasVerifiedEmail),e.LocalAddressBookState=this._props.userHasAddressBookConnected?u:d,e.AppearInSearchState=this._props.userAppearsInSearch?u:d,e.AppearInSuggestionsState=this._props.userAppearsInSuggestions?u:d,e.UserSearchPrivacyOption=this._props.userSearchPrivacyOption,e.AvatarPolicy=e.AvatarPolicy=(0,s.flow)(o.camelCase,o.upperFirst)(this._props.userAvatarPolicy),e.UserPresenceStatus=this._props.userPresenceStatus,e.UserMoodStatus=this._props.userMoodStatus?u:d,e.DisplayableNonAuthorizedContacts=this._props.displayableNonAuthorizedContacts,e.UserHasSplitViewEnabled=this._props.userHasSplitViewEnabled?u:d;const{city:t,state:i,province:c,country:g}=this._props.userLocation;return e.UserLocationCity=t?u:d,e.UserLocationState=i?u:d,e.UserLocationProvince=c?u:d,e.UserLocationCountry=g?u:d,e.InviteFreeContactsCount=this._props.inviteFreeContactsCount,e.ManuallyAddedContactsCount=this._props.manuallyAddedContactsCount,e.BlockedContactsCount=this._props.blockedContactsCount,e.BotsContactsCount=this._props.botsCount,e.FavoritesContactsCount=this._props.favoriteContactsCount,e.AllNonBlockedContactsCount=this._props.nonBlockedContactsCount,e.OneWayShortCircuitContactsCount=this._props.oneWayShortCircuitContactsCount,e.TwoWayShortCircuitContactsCount=this._props.twoWayShortCircuitContactsCount,e.PstnContactsCount=this._props.pstnContactsCount,e.EngagedContactsCount=this._props.engagedContactsCount,e.AllShownContactsCount=this._props.allShownContactsCount,e.RemovedAuthorizedContactsCount=this._props.removedAuthorizedContactsCount,e.UserDisplayNameWordCount=this._props.displayNamePartsLength,e.FirstNameAndLastNameAreMatching=this._props.firstAndSecondAreMatching,e.DefaultReactionsCount=this._props.numberOfDefaultReactions,e.CustomReactionsCount=this._props.numberOfCustomReactions,e.UserIsNew=this._props.userIsNew,e.DaysFromWizardCompletion=this._props.daysFromWizardCompletion||d,e.WasUpgradedFromDelphiToElectonDate=this._props.migratedDateFromDelphiToElectron||d,e.HasReadReceiptsEnabled=(0,o.isUndefined)(this._props.hasReadReceiptsEnabled)?d:this._props.hasReadReceiptsEnabled,!1!==this._props.hasReadReceiptsEnabled?e.ReadReceiptsDisabledReason=d:e.ReadReceiptsDisabledReason=!1===this._props.readReceiptsSettingPreference?l.ReadReceiptsSettingOrigin[l.ReadReceiptsSettingOrigin.UserAction]:this._props.userPresenceStatus===r.UserStatus[r.UserStatus.Hidden]?l.ReadReceiptsSettingOrigin[l.ReadReceiptsSettingOrigin.UserStatusUpdate]:l.ReadReceiptsSettingOrigin[l.ReadReceiptsSettingOrigin.OptOut],e.UserSignedInIdType=this._props.userSignedInIdType||d,e.UserSkypeIdType=this._props.userSkypeIdType||d,(0,o.isUndefined)(this._props.osNotificationsEnabled)||(e.IsOsNotificationPermissionEnabled=this._props.osNotificationsEnabled),e.NotificationsPermission=a.PermissionStatus[this._props.notificationsPermission],e.CameraPermission=a.PermissionStatus[this._props.cameraPermission],e.MicrophonePermission=a.PermissionStatus[this._props.microphonePermission],e.ContactsPermission=a.PermissionStatus[this._props.contactsPermission],e.ConversationsCountTotal=this._props.countConversationsTotal,e.ConversationsCountDisplayable=this._props.countConversationsDisplayable,e.ConversationsCountDisplayed=this._props.countConversationsDisplayed,e.RecentListConversationsCount=this._props.numberOfRecentListConversations,e.RecentListSkype1on1ConversationsCount=this._props.numberOfRecentListSkype1on1Conversations,e.RecentListSkypeGroupConversationsCount=this._props.numberOfRecentListSkypeGroupConversations,e.RecentListSkypeBotConversationsCount=this._props.numberOfRecentListSkypeBotConversations,e.RecentListPstnConversationsCount=this._props.numberOfRecentListPstnConversations,e.RecentListPrivateConversationsCount=this._props.numberOfRecentListPrivateConversations,e.RecentListConversationsWithTabsCount=this._props.numberOfRecentListConversationsWithTabs,e.RecentListOtherConversationsCount=this._props.numberOfRecentListOtherConversations,e.ArchivedConversationsCount1on1=this._props.archived1on1ConversationsCount,e.ArchivedConversationsCountGroup=this._props.archivedGroupConversationsCount,e.Muted1on1ConversationsCount=this._props.muted1on1ConversationsCount,e.MutedGroupConversationsCount=this._props.mutedGroupConversationsCount,e.SmartMutedConversationsCount=this._props.smartMutedConversationsCount,e.TranslatedConversationsCount=this._props.translatedConversationsCount,n.isUndefined(this._props.profileMigrationParams)||(e.ProfileMigratedV2=this._mapBooleanOrUndefinedToCensusState(!0),e.ProfilePhonesCount=this._props.profileMigrationParams.phonesCount,e.ProfileMsaPhonesCount=this._props.profileMigrationParams.msaPhonesCount,e.ProfileSkypeVerifiedPhonesCount=this._props.profileMigrationParams.skypeVerifiedPhonesCount,e.ProfileSkypeVisiblePhonesCount=this._props.profileMigrationParams.skypeVisiblePhonesCount,e.ProfileEmailsCount=this._props.profileMigrationParams.emailsCount,e.ProfileMsaEmailsCount=this._props.profileMigrationParams.msaEmailsCount,e.ProfileSkypeVerifiedEmailsCount=this._props.profileMigrationParams.skypeVerifiedEmailsCount,e.ProfileCountry=this._mapBooleanOrUndefinedToCensusState(this._props.profileMigrationParams.countryVisible),e.ProfileBirthday=this._mapBooleanOrUndefinedToCensusState(this._props.profileMigrationParams.birthdayVisible),e.ProfileGender=this._mapBooleanOrUndefinedToCensusState(this._props.profileMigrationParams.genderVisible)),e}_mapBooleanOrUndefinedToCensusState(e){return n.isUndefined(e)?"Unknown":e?u:d}}t.CensusTelemetryEvent=g},12228:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(36593),o=i(46096),s=i(68810),a=i(15963);class r extends s.default{constructor(e,t){super("ChatService",a.ScenarioName.ChatServiceRequest,{scenario:e,connectionType:o.ChatServiceConnectionType[t]},"chatServiceScenario_",e)}failed(e){const t=Object.assign(Object.assign({},r._extractResponseMetadata(e,!0)),{Canceled:e.canceled,TimedOut:e.timedOut});this._failed("Request Failed",t)}retry(e){const t=Object.assign(Object.assign({},r._extractResponseMetadata(e,!0)),{Canceled:e.canceled,TimedOut:e.timedOut});this._retry("Request Failed, will retry",t)}succeeded(e){this._succeeded(r._extractResponseMetadata(e))}static _extractResponseMetadata(e,t=!1){const i=n.ChatServiceErrorHandler.getChatServiceErrorResponseMetadata(e),o={ContextId:i.contextId,Date:i.date};return t&&(o.ErrorCode=i.errorCode,o.StatusCode=i.statusCode,o.StatusText=i.statusText,o.ErrorMessage=i.errorMessage),o}}t.default=r},9959:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChatServiceForceSyncConversationEvent=t.ChatServiceBundleProcessingErrorEvent=t.ChatServiceInternalFailureEvent=t.ChatServiceFailureEvent=void 0;const n=i(96486),o=i(46096),s=i(349);class a extends s.TelemetryEventBase{constructor(e,t,i,n,o){super(),this._scenario=e,this._mriType=t,this._attributes=i,this._metadata=n,this._connectionType=o}getEventName(){return"chat_service_failure"}getAttributes(){let e=super.getAttributes();return e.scenario=this._scenario,e.mriType=this._mriType||"",n.assign(e,this._attributes),e.error_code=this._metadata.errorCode,e.StatusCode=this._metadata.statusCode,e.StatusText=this._metadata.statusText,e.ErrorMessage="Unknown"===this._metadata.errorMessage?this._metadata.statusText:this._metadata.errorMessage,e.context_id=this._metadata.contextId,e.ServerTime=this._metadata.date,e.Connection_Type=o.ChatServiceConnectionType[this._connectionType],this._metadata.canceled&&(e.Canceled=this._metadata.canceled),this._metadata.timedOut&&(e["TimedOut "]=this._metadata.timedOut),this._metadata.msCv&&(e.CorrelationVector=this._metadata.msCv),e}}t.ChatServiceFailureEvent=a;t.ChatServiceInternalFailureEvent=class extends a{constructor(e,t,i,n,o,s,a){super(e,t,i,n,o),this._networkType=s,this._isNetworkingAvailable=a}getAttributes(){let e=super.getAttributes();return e.NetworkType=this._networkType,e.WasNetworkingAvailable=this._isNetworkingAvailable,e}getEventName(){return"chat_service_app_internal_failure"}};class r extends s.TelemetryEventBase{constructor(e){super(),this._description=e}getEventName(){return"chat_service_bundle_processing_failure"}getAttributes(){let e=super.getAttributes();return e.description=this._description,e}}t.ChatServiceBundleProcessingErrorEvent=r;class l extends s.TelemetryEventBase{constructor(e,t){super(),this._reason=e,this._syncSuccess=t}getEventName(){return"chat_service_force_sync"}getAttributes(){let e=super.getAttributes();return e.Reason=this._reason,e.ForceSyncSuccess=this._syncSuccess,e}}t.ChatServiceForceSyncConversationEvent=l},11705:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this._conversations=new Set,this._messagesCount=0}markFullSync(e){this._isFullSync=e}markFirstSync(){this._isFirstSync=!0}accumulateData(e,t){this._messagesCount+=t,this._conversations.add(e)}getData(){return{isFirstSync:this._isFirstSync,isFullSync:this._isFullSync,conversationsCount:this._conversations.size,messagesCount:this._messagesCount}}reset(){this._conversations.clear(),this._messagesCount=0,this._isFullSync=!1,this._isFirstSync=!1}}},84958:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClientTriggeredEngagementEvent=t.EventStatus=t.ClientTriggeredEngagementActions=void 0;const n=i(96486),o=i(349);var s,a;!function(e){e[e.Overview=1]="Overview",e[e.New=2]="New",e[e.Update=3]="Update",e[e.Delete=4]="Delete",e[e.Finished=5]="Finished",e[e.LoadCampaign=6]="LoadCampaign",e[e.LoadingCampaign=7]="LoadingCampaign",e[e.OpenCampaign=8]="OpenCampaign",e[e.Reset=9]="Reset"}(s=t.ClientTriggeredEngagementActions||(t.ClientTriggeredEngagementActions={})),function(e){e[e.Completed=1]="Completed",e[e.Failed=2]="Failed"}(a=t.EventStatus||(t.EventStatus={}));class r extends o.TelemetryEventBase{constructor(e){super(),this.props=e}getAttributes(){const e=n.assign(super.getAttributes(),{Action:s[this.props.action]||"UnknownAction",IsOfflineTargeted:this.props.offlineTargeted||!1});return this.props.campaignId&&(e.CampaignId=this.props.campaignId),this.props.campaignVariant&&(e.CampaignVariant=this.props.campaignVariant),this.props.campaignVersion&&(e.CampaignVersion=this.props.campaignVersion||0),this.props.newCampaignsCount&&(e.NewCampaignsCount=this.props.newCampaignsCount),this.props.updatedCampaignsCount&&(e.UpdatedCampaignsCount=this.props.updatedCampaignsCount),this.props.deletedCampaignsCount&&(e.DeletedCampaignsCount=this.props.deletedCampaignsCount),this.props.durationInMs&&(e.DurationInMs=this.props.durationInMs),this.props.status&&(e.Status=a[this.props.status]),this.props.correlationId&&(e.MessageCorrelationId=this.props.correlationId),e}getEventName(){return"engagement_client_triggered_campaigns"}}t.ClientTriggeredEngagementEvent=r},74714:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoachMarkTelemetryEventAction=void 0;const n=i(96486),o=i(11009),s=i(46096),a=i(349);var r;!function(e){e[e.Open=1]="Open",e[e.Close=2]="Close",e[e.Suppress=3]="Suppress"}(r=t.CoachMarkTelemetryEventAction||(t.CoachMarkTelemetryEventAction={}));class l extends a.TelemetryEventBase{constructor(e){super(),this._action=e.action,this._anchorClicked=e.anchorClicked,this._coachMarkType=e.coachMarkType,this._dismissed=e.dismissed,this._nextClicked=e.nextClicked,this._skipClicked=e.skipClicked,this._origin=e.origin,this._error=e.error,this._errorDescription=e.errorDescription}getEventName(){return"engagement_coach_mark_event"}getAttributes(){return n.assign(super.getAttributes(),{Action:this._action?r[this._action]:"Unknown",AnchorClicked:this._anchorClicked||"",CoachMarkType:this._coachMarkType?o.CoachMarkType[this._coachMarkType]:"Unknown",Dismissed:this._dismissed||"",NextClicked:this._nextClicked||"",SkipClicked:this._skipClicked||"",Origin:s.CoachMarkOrigin[this._origin||s.CoachMarkOrigin.Unknown],Error:this._error||"",ErrorDescription:this._errorDescription||""})}}t.default=l},72416:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TasterTelemetryEvent=t.ComponentActionEvent=t.FailureScreenEvent=t.CallerIdSettingsEvent=t.CallerIdFeatureToggleEvent=t.CallerIdCallIgnoreEvent=t.CallerIdInChatEvent=t.CallerIdDialpadEvent=t.CallerIdInterruptPromptEvent=t.UnansweredCallCTA=t.ExperimentButtonClickAction=t.ExperimentBannerCloseAction=t.ExperimentOpenAction=t.CallerIdSettingsAction=t.CallerIdLocations=t.NavigateToDestination=void 0;const n=i(48540),o=i(14806),s=i(81722),a=i(40363),r=i(349);var l,c,d;!function(e){e[e.BalanceStatePanel=0]="BalanceStatePanel",e[e.DialerPanel=1]="DialerPanel",e[e.GroupCall=2]="GroupCall"}(l=t.NavigateToDestination||(t.NavigateToDestination={})),function(e){e[e.InterruptPrompt=0]="InterruptPrompt",e[e.InChat=1]="InChat",e[e.Dialpad=2]="Dialpad",e[e.CallingSettings=3]="CallingSettings"}(c=t.CallerIdLocations||(t.CallerIdLocations={})),function(e){e[e.Open=0]="Open",e[e.Enable=1]="Enable",e[e.Disable=2]="Disable",e[e.EnableAutoSelect=3]="EnableAutoSelect",e[e.DisableAutoSelect=4]="DisableAutoSelect",e[e.AddNumberOpen=5]="AddNumberOpen",e[e.AddNumberEnter=6]="AddNumberEnter",e[e.AddNumberVerify=7]="AddNumberVerify",e[e.AddNumberSuccess=8]="AddNumberSuccess",e[e.RemoveNumber=9]="RemoveNumber",e[e.SetPrimaryNumber=10]="SetPrimaryNumber",e[e.ResendCode=11]="ResendCode",e[e.AddSkypeNumber=12]="AddSkypeNumber"}(d=t.CallerIdSettingsAction||(t.CallerIdSettingsAction={}));class u extends r.TelemetryEventBase{getAriaTenantTokenOverride(){return a.default.getAriaCommerceTenantToken()}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}class g extends u{constructor(e,t,i){super(),this._settings=e,this._userEntitlementsSummary=t,this._isFreeTrialAvailable=i}getEventName(){return"s4l_entitlement_experiments"}getAttributes(){const e=super.getAttributes();return e.ExperimentName=this._settings.name,e.ExperimentLocation=s.ExperimentLocation[this._settings.location],this._settings.layoutOption&&(e.LayoutOption=this._settings.layoutOption),this._userEntitlementsSummary&&(e.UserEntitlementsSummary=this._userEntitlementsSummary),this._isFreeTrialAvailable&&(e.IsFreeTrialAvailable=this._isFreeTrialAvailable),e}}t.ExperimentOpenAction=class extends g{getActionName(){return"ExperimentOpen"}};t.ExperimentBannerCloseAction=class extends g{getActionName(){return"BannerClose"}};t.ExperimentButtonClickAction=class extends g{constructor(e,t,i,n){super(t,i,n),this._navigateTo=e}getActionName(){return"ButtonClick"}getAttributes(){const e=super.getAttributes();return e.NavigateTo=l[this._navigateTo],e}};t.UnansweredCallCTA=class extends u{constructor(e){super(),this._action=e}getEventName(){return"s4l_entitlement_ucux_cta"}getActionName(){return this._action}};class h extends u{getEventName(){return"s4l_callerId"}}t.CallerIdInterruptPromptEvent=class extends h{constructor(e){super(),this._action=e}getActionName(){return o.Action[this._action]}getAttributes(){const e=super.getAttributes();return e.Location=c[c.InterruptPrompt],e}};t.CallerIdDialpadEvent=class extends h{constructor(e){super(),this._action=e}getActionName(){return o.Action[this._action]}getAttributes(){const e=super.getAttributes();return e.Location=c[c.Dialpad],e}};t.CallerIdInChatEvent=class extends h{constructor(e,t){super(),this._action=e,this._layoutOption=t}getActionName(){return o.Action[this._action]}getAttributes(){const e=super.getAttributes();return e.Location=c[c.InChat],e.LayoutOption=this._layoutOption,e}};t.CallerIdCallIgnoreEvent=class extends h{constructor(e){super(),this._terminatedReason=e}getActionName(){return o.Action[o.Action.IgnoreCall]}getAttributes(){const e=super.getAttributes();return e.TerminatedReasonName=n.TerminatedReason[this._terminatedReason],e}};t.CallerIdFeatureToggleEvent=class extends h{constructor(e,t,i,n,o){super(),this._action=e,this._promptShownCount=t,this._messageShownCount=i,this._dialpadShowCount=n,this._campaignDurationDays=o}getActionName(){return o.Action[this._action]}getAttributes(){const e=super.getAttributes();return e.PromptShownCount=this._promptShownCount,e.MessageShownCount=this._messageShownCount,e.DialpadShowCount=this._dialpadShowCount,void 0!==this._campaignDurationDays&&(e.CampaignDurationDays=this._campaignDurationDays),e}};t.CallerIdSettingsEvent=class extends h{constructor(e,t,i){super(),this._action=e,this._type=t,this._attempt=i}getActionName(){return d[this._action]}getAttributes(){const e=super.getAttributes();return e.Location=c[c.CallingSettings],void 0!==this._type&&(e.Type=this._type),void 0!==this._attempt&&(e.Attempt=this._attempt),e}};t.FailureScreenEvent=class extends u{constructor(e,t,i,n){super(),this._action=e,this._location=t,this._layoutOption=i,this._copiesOption=n}getEventName(){return"s4l_failure_screen"}getActionName(){return o.Action[this._action]}getAttributes(){const e=super.getAttributes();return e.Location=o.Location[this._location],this._layoutOption&&(e.LayoutOption=this._layoutOption),this._copiesOption&&(e.CopiesOption=this._copiesOption),e}};t.ComponentActionEvent=class extends u{constructor(e,t,i){super(),this._action=e,this._component=t,this._location=i}getEventName(){return"s4l_component"}getActionName(){return this._action}getAttributes(){const e=super.getAttributes();return e.Location=this._location,e.Component=this._component,e}};t.TasterTelemetryEvent=class extends u{constructor(e,t){super(),this._duration=e,this._terminatedReason=t}getActionName(){return"CallEnd"}getEventName(){return"s4l_taster_call_ended"}getAttributes(){const e=super.getAttributes();return e.CallDuration=this._duration,e.TerminatedReason=this._terminatedReason,e}}},84851:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectOnSkypeTelemetryEvents=void 0;const n=i(349);class o extends n.TelemetryEventBase{constructor(e){super(),this._connectType=e}getEventName(){return"people_search_connect_on_skype"}getAttributes(){const e=super.getAttributes();return e.Action=this._connectType,e}}t.ConnectOnSkypeTelemetryEvents=o},58031:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContactsPanelBannerEvent=t.AddContactPanelEvent=t.ContactsPanelEvent=t.BannerType=t.BannerAction=t.AddPhoneNumberPanelOrigin=t.AddContactPanelOrigin=t.ContactsPanelAction=void 0;const n=i(96486),o=i(95691),s=i(349);var a,r,l,c;!function(e){e[e.Opened=0]="Opened",e[e.Closed=1]="Closed",e[e.TabsSwitched=2]="TabsSwitched",e[e.AddContactPanelOpened=3]="AddContactPanelOpened",e[e.ShowActiveNow=4]="ShowActiveNow",e[e.ShowAllMyContacts=5]="ShowAllMyContacts"}(a=t.ContactsPanelAction||(t.ContactsPanelAction={})),function(e){e[e.ContactsPanelV2=0]="ContactsPanelV2",e[e.HubTabPeople=1]="HubTabPeople",e[e.SearchResultListAddContactButton=2]="SearchResultListAddContactButton",e[e.DesktopNewActionPicker=3]="DesktopNewActionPicker",e[e.LandingScreen=4]="LandingScreen"}(r=t.AddContactPanelOrigin||(t.AddContactPanelOrigin={})),function(e){e[e.AddContactsPanel=0]="AddContactsPanel",e[e.DialpadPanel=1]="DialpadPanel",e[e.ContactListAdd=2]="ContactListAdd",e[e.ContactListEdit=3]="ContactListEdit",e[e.UserCard=4]="UserCard"}(t.AddPhoneNumberPanelOrigin||(t.AddPhoneNumberPanelOrigin={})),function(e){e[e.Shown=0]="Shown",e[e.Clicked=1]="Clicked",e[e.Dismissed=2]="Dismissed"}(l=t.BannerAction||(t.BannerAction={})),function(e){e[e.ContactsPrivacy=0]="ContactsPrivacy",e[e.SyncAddressBook=1]="SyncAddressBook"}(c=t.BannerType||(t.BannerType={}));class d extends s.TelemetryEventBase{getEventName(){return"people_contacts_panel"}}t.ContactsPanelEvent=class extends d{constructor(e,t,i,n){super(),this._action=e,this._tab=t,this._hasSyncedAddressBook=i,this._isShowingActiveNow=n}getAttributes(){const e=super.getAttributes();return e.Action=a[this._action],e.Tab=this._getTabName(this._tab),n.isUndefined(this._isShowingActiveNow)||(e.IsShowingActiveNow=this._isShowingActiveNow),n.isUndefined(this._hasSyncedAddressBook)||(e.HasSyncedAB=this._hasSyncedAddressBook),e}_getTabName(e){return o.ContactsPanelV2[e]}};t.AddContactPanelEvent=class extends d{constructor(e){super(),this._origin=e}getAttributes(){let e=super.getAttributes();return e.Action=a[a.AddContactPanelOpened],e.Origin=r[this._origin],e}};t.ContactsPanelBannerEvent=class extends d{constructor(e,t){super(),this._type=e,this._action=t}getAttributes(){let e=super.getAttributes();return e.BannerType=c[this._type],e.Action=l[this._action],e}}},70437:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShortCircuitContactsError=t.ShortCircuitContactsProcessed=t.ContactInvite=t.ContactsActionReportMessageFailure=t.ContactsActionReportMessage=t.ContactsTelemetryEvent=void 0;const n=i(96486),o=i(46096),s=i(349);class a extends s.TelemetryEventBase{constructor(e,t){super(),this._attributes=e,this._piiAttributes=t}getEventName(){return"people_contacts_action"}getAttributes(){return n.merge(super.getAttributes(),this._attributes)}getPiiAttributes(){return n.merge(super.getPiiAttributes(),this._piiAttributes)}}t.ContactsTelemetryEvent=a;class r extends s.TelemetryEventBase{constructor(e,t,i,n){super(),this._messageHash=e,this._context=t,this._reason=i,this._block=n}getEventName(){return"ReportMessage"}getAttributes(){let e=super.getAttributes();return e.MessageHash=this._messageHash,e.ReportContext=this._context,e.ReportReason=this._reason,e.UserBlocked=this._block,e}}t.ContactsActionReportMessage=r;class l extends s.TelemetryEventBase{constructor(e,t){super(),this._errorCode=e,this._errorMessage=t}getEventName(){return"ReportMessageFailure"}getAttributes(){let e=super.getAttributes();return e.ErrorCode=this._errorCode,e.ErrorMessage=this._errorMessage,e}}t.ContactsActionReportMessageFailure=l;class c extends s.TelemetryEventBase{constructor(e,t){super(),this._type=e,this._origin=t}getEventName(){return"contactInvite"}getAttributes(){const e=super.getAttributes();return e.Type=o.ContactInviteType[this._type],e.Origin=o.ContactInviteOrigin[this._origin],e}}t.ContactInvite=c;class d extends s.TelemetryEventBase{constructor(e,t,i,n){super(),this._count=e,this._isInitialSync=t,this._durationInMs=i,this._hashSentCount=n}getEventName(){return"shortCircuitContactsProcessed"}getAttributes(){const e=super.getAttributes();return e.count=this._count,e.isInitialSync=this._isInitialSync,e.duration=this._durationInMs,e.HashSentCount=this._hashSentCount,e}}t.ShortCircuitContactsProcessed=d;class u extends s.TelemetryEventBase{constructor(e,t,i){super(),this._error=e,this._isInitialSync=t,this._hashSentCount=i}getEventName(){return"shortCircuitContactsError"}getAttributes(){const e=super.getAttributes();return e.error=this._error,e.isInitialSync=this._isInitialSync,e.HashSentCount=this._hashSentCount,e}}t.ShortCircuitContactsError=u},81627:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContactsTelemetryHelper=t.FavoriteActionType=t.PresenceActions=t.GreetActionType=t.ShareInviteOrigin=t.UpdateContactOrigin=t.DeleteContactOrigin=t.AddContactOrigin=void 0;const n=i(36076),o=i(71830),s=i(70437),a=i(36237);var r,l,c,d,u,g,h,p;!function(e){e[e.AcceptButton=0]="AcceptButton",e[e.ActiveNowPanel=1]="ActiveNowPanel",e[e.AddContactPanel=2]="AddContactPanel",e[e.AddTranslatorBot=3]="AddTranslatorBot",e[e.ChatWave=4]="ChatWave",e[e.DiscoverPanel=5]="DiscoverPanel",e[e.FavoriteContextMenu=6]="FavoriteContextMenu",e[e.FavoriteToggle=7]="FavoriteToggle",e[e.MoreContactsPanel=8]="MoreContactsPanel",e[e.NewConversation=9]="NewConversation",e[e.NewCall=10]="NewCall",e[e.ProfileBigButton=11]="ProfileBigButton",e[e.ProfileSmallButton=12]="ProfileSmallButton",e[e.SearchItem=13]="SearchItem",e[e.AddPhoneNumberPanel=14]="AddPhoneNumberPanel",e[e.AddContactContextMenu=15]="AddContactContextMenu"}(r=t.AddContactOrigin||(t.AddContactOrigin={})),function(e){e[e.Profile=0]="Profile",e[e.BotChatSettingsPanel=1]="BotChatSettingsPanel",e[e.ConversationsListItem=2]="ConversationsListItem",e[e.ManageConnectedPeople=3]="ManageConnectedPeople",e[e.AddPhoneNumberPanel=4]="AddPhoneNumberPanel"}(l=t.DeleteContactOrigin||(t.DeleteContactOrigin={})),function(e){e[e.AddPhoneNumberPanel=0]="AddPhoneNumberPanel"}(c=t.UpdateContactOrigin||(t.UpdateContactOrigin={})),function(e){e[e.GroupProfile=0]="GroupProfile",e[e.ChatShareLinkButton=1]="ChatShareLinkButton",e[e.MyProfile=2]="MyProfile",e[e.AddToGroupPanel=3]="AddToGroupPanel"}(t.ShareInviteOrigin||(t.ShareInviteOrigin={})),function(e){e[e.Greet=0]="Greet",e[e.Message=1]="Message",e[e.None=2]="None"}(d=t.GreetActionType||(t.GreetActionType={})),function(e){e[e.Retry=0]="Retry",e[e.Fetch=1]="Fetch"}(u=t.PresenceActions||(t.PresenceActions={})),function(e){e[e.Contact=0]="Contact",e[e.Conversation=1]="Conversation"}(g=t.FavoriteActionType||(t.FavoriteActionType={})),function(e){e[e.AcceptInvite=0]="AcceptInvite",e[e.DeclineInvite=1]="DeclineInvite",e[e.Favorite=2]="Favorite",e[e.Unfavorite=3]="Unfavorite",e[e.Add=4]="Add",e[e.Delete=5]="Delete",e[e.Greet=6]="Greet",e[e.Block=7]="Block",e[e.Unblock=8]="Unblock",e[e.GetContacts=9]="GetContacts",e[e.GetInvites=10]="GetInvites",e[e.RemoveDevice=11]="RemoveDevice",e[e.Presence=12]="Presence",e[e.Update=13]="Update",e[e.MergeContactWithPstnContact=14]="MergeContactWithPstnContact",e[e.SyncABContactsRefreshClicked=15]="SyncABContactsRefreshClicked"}(h||(h={})),function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(p||(p={}));t.ContactsTelemetryHelper=new class{acceptInviteSuccess(e){const t=this._getBaseAttributes(h.AcceptInvite,p.Success),i=this._getBasePiiAttributes(e);this._track(t,i)}mergeContactWithPstnContact(e){const t=this._getBaseAttributes(h.MergeContactWithPstnContact,p.Success),i=this._getBasePiiAttributes(e);this._track(t,i)}acceptInviteError(e,t){const i=this._getBaseAttributes(h.AcceptInvite,p.Error),n=this._getBasePiiAttributes(e);this._setError(i,t),this._track(i,n)}declineInviteSuccess(e){const t=this._getBaseAttributes(h.DeclineInvite,p.Success),i=this._getBasePiiAttributes(e);this._track(t,i)}declineInviteError(e,t){const i=this._getBaseAttributes(h.DeclineInvite,p.Error),n=this._getBasePiiAttributes(e);this._setError(i,t),this._track(i,n)}addContactSuccess(e,t){const i=this._getBaseAttributes(h.Add,p.Success),n=this._getBasePiiAttributes(e);i.Origin=r[t],i.IsPstn=o.isPhoneMri(e),this._track(i,n)}addContactError(e,t,i){const n=this._getBaseAttributes(h.Add,p.Error),s=this._getBasePiiAttributes(e);n.Origin=r[t],n.IsPstn=o.isPhoneMri(e),this._setError(n,i),this._track(n,s)}updateContactSuccess(e,t){const i=this._getBaseAttributes(h.Update,p.Success),n=this._getBasePiiAttributes(e);i.Origin=c[t],i.IsPstn=o.isPhoneMri(e),this._track(i,n)}updateContactError(e,t,i){const n=this._getBaseAttributes(h.Update,p.Error),s=this._getBasePiiAttributes(e);n.Origin=c[t],n.IsPstn=o.isPhoneMri(e),this._setError(n,i),this._track(n,s)}blockContactSuccess(e){const t=this._getBaseAttributes(h.Block,p.Success),i=this._getBasePiiAttributes(e);this._track(t,i)}blockContactError(e,t){const i=this._getBaseAttributes(h.Block,p.Error),n=this._getBasePiiAttributes(e);this._setError(i,t),this._track(i,n)}unblockContactSuccess(e){const t=this._getBaseAttributes(h.Unblock,p.Success),i=this._getBasePiiAttributes(e);this._track(t,i)}unblockContactError(e,t){const i=this._getBaseAttributes(h.Unblock,p.Error),n=this._getBasePiiAttributes(e);this._setError(i,t),this._track(i,n)}deleteContactSuccess(e,t){const i=this._getBaseAttributes(h.Delete,p.Success),n=this._getBasePiiAttributes(e);i.Origin=l[t],this._track(i,n)}deleteContactError(e,t,i){const n=this._getBaseAttributes(h.Delete,p.Error),o=this._getBasePiiAttributes(e);n.Origin=l[t],this._setError(n,i),this._track(n,o)}favoriteSuccess(e,t,i){const n=this._getBaseAttributes(h.Favorite,p.Success),o=this._getBasePiiAttributes(e);n.IsGroup=i,n.Type=g[t],this._track(n,o)}favoriteError(e,t,i,n){const o=this._getBaseAttributes(h.Favorite,p.Error),s=this._getBasePiiAttributes(e);o.IsGroup=i,o.Type=g[t],this._setError(o,n),this._track(o,s)}unfavoriteSuccess(e,t,i){const n=this._getBaseAttributes(h.Unfavorite,p.Success),o=this._getBasePiiAttributes(e);n.IsGroup=i,n.Type=g[t],this._track(n,o)}unfavoriteError(e,t,i,n){const o=this._getBaseAttributes(h.Unfavorite,p.Error),s=this._getBasePiiAttributes(e);o.IsGroup=i,o.Type=g[t],this._setError(o,n),this._track(o,s)}getContactsSuccess(e,t,i,n,o,s,a=0){const r=this._getBaseAttributes(h.GetContacts,p.Success);r.NumContacts=e,r.NumBlockedContacts=t,r.SyncType=i?"Full":"Delta",r.Duration=o,r.IsFromServer=s,r.RetryCount=a,void 0!==n&&(r.DeltaSyncETag=n),this._track(r,{})}getContactsError(e,t,i,n,o){const s=this._getBaseAttributes(h.GetContacts,p.Error);s.SyncType=o?"Full":"Delta",s.Duration=t,s.IsFromServer=i,s.RetryCount=n,this._setError(s,e),this._track(s,{})}getInvitesSuccess(e,t){const i=this._getBaseAttributes(h.GetInvites,p.Success);i.Duration=e,i.IsFromServer=t,this._track(i,{})}getInvitesError(e,t,i){const n=this._getBaseAttributes(h.GetInvites,p.Error);n.Duration=t,n.IsFromServer=i,this._setError(n,e),this._track(n,{})}removeDeviceError(e){const t=this._getBaseAttributes(h.RemoveDevice,p.Error);this._setError(t,e),this._track(t,{})}greetContact(e,t){const i=this._getBaseAttributes(h.Greet,p.Success),n=this._getBasePiiAttributes(e);i.GreetActionType=d[t],this._track(i,n)}fetchContactPresenceFailure(e,t,i,n,o=0,s=0){const a=this._getBaseAttributes(h.Presence,p.Error);a.PresenceFetchActionType=u[e],a.IsAllContactFetch=t,a.RetryCount=o,a.FailedUserCount=s,i&&(a.ErrorCode=i),n&&(a.ErrorMessage=n),this._track(a,{})}syncABContactsRefreshClicked(){const e=this._getBaseAttributes(h.SyncABContactsRefreshClicked,p.Success);this._track(e,{})}_getBaseAttributes(e,t){const i={};return i.Action=h[e],i.Status=p[t],i}_getBasePiiAttributes(e){const t={},i=o.getSkypeIdFromMri(e);return i&&(t.ContactSkypeId={value:i,piiKind:n.AWTPiiKind.Identity}),t}_setError(e,t){void 0!==t.statusCode&&(e.ErrorCode=t.statusCode),void 0!==t.statusText&&(e.ErrorMessage=t.statusText)}_track(e,t){a.track(new s.ContactsTelemetryEvent(e,t))}}},91114:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationAction=t.ConversationListItemClicked=t.ConversationDeletionCanceled=t.ConversationDeletionFailed=t.ConversationDeleted=t.ConversationUnarchived=t.ConversationArchived=t.ConversationMarkedRead=void 0;const n=i(61375),o=i(71830),s=i(31147),a=i(46096),r=i(349),l=i(35370);class c extends r.TelemetryEventBase{constructor(e){super(),this._conversationId=e}getEventName(){return"conversation_action"}getAttributes(){let e=super.getAttributes();e.Action=this.getAction(),e.Conversation_NameSpace=o.Namespaces[o.getMriNamespace(this._conversationId)];const t=l.getTrackableConversationId(this._conversationId);return t&&(e.Conversation_Id=t),e}}t.ConversationMarkedRead=class extends c{constructor(e,t){super(e),this._consumptionHorizon=t}getAction(){return"conversation_marked_read"}getAttributes(){let e=super.getAttributes();return e.Consumption_Horizon=this._consumptionHorizon,e}};t.ConversationArchived=class extends c{constructor(e,t,i){super(e),this._origin=t,this._isGroupConversation=i}getAction(){return"conversation_archived"}getAttributes(){let e=super.getAttributes();return e.Origin=a.ArchiveConversationOrigin[this._origin],e.IsGroupConversation=this._isGroupConversation,e}};t.ConversationUnarchived=class extends c{constructor(e,t,i){super(e),this._origin=t,this._isGroupConversation=i}getAction(){return"conversation_unarchived"}getAttributes(){let e=super.getAttributes();return e.Origin=a.UnarchiveConversationOrigin[this._origin],e.IsGroupConversation=this._isGroupConversation,e}};t.ConversationDeleted=class extends c{constructor(e,t,i){super(e),this._source=t,this._conversationType=i}getAction(){return"conversation_deleted"}getAttributes(){let e=super.getAttributes();return e.Source=n.DeleteConversationSource[this._source],e.ConversationType=s.ConversationType[this._conversationType],e}};t.ConversationDeletionFailed=class extends c{constructor(e,t){super(e),this._errorCode=t}getAction(){return"conversation_deletion_failed"}getAttributes(){let e=super.getAttributes();return e.ErrorCode=this._errorCode,e}};t.ConversationDeletionCanceled=class extends c{constructor(e,t){super(e),this._conversationType=t}getAction(){return"conversation_deletion_canceled"}getAttributes(){let e=super.getAttributes();return e.ConversationType=s.ConversationType[this._conversationType],e}};t.ConversationListItemClicked=class extends c{constructor(e,t,i){super(e),this._itemId=t,this._actionSuccess=i}getAction(){return"conversation_list_item_clicked"}getAttributes(){let e=super.getAttributes();return e.Item_id=this._itemId,void 0!==this._actionSuccess&&(e.action_success=this._actionSuccess),e}};t.ConversationTranslationAction=class extends c{constructor(e,t,i,n){super(e),this._action=t,this._fromLocale=i,this._toLocale=n}getAction(){return"translation_action"}getAttributes(){let e=super.getAttributes();return e.TranslationAction=a.TranslationAction[this._action],this._toLocale&&(e.FromLanguage=this._fromLocale,e.ToLanguage=this._toLocale),e}}},34672:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SetUpCallForwardingClicked=void 0;const n=i(40363),o=i(349);class s extends o.TelemetryEventBase{getEventName(){return"credit_upsell"}getAriaTenantTokenOverride(){return n.default.getAriaSkypeFraudTelemetryTenantToken()}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}t.SetUpCallForwardingClicked=class extends s{getActionName(){return"SetUpCallForwarding"}}},92487:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PhoneDiscoverabilityEvent=t.PhoneDiscoverabilityDialogCommand=t.OpenDeepLinkEvent=t.DeepLinkTelemetryEventBase=void 0;const n=i(96486),o=i(71830),s=i(49140),a=i(349),r=i(61694),l=i(98180);i(46096);var c,d;!function(e){e.InClientLink="InClientLink",e.LinkWeb="LinkWeb",e.LinkDesktop="LinkDesktop",e.LinkMobile="LinkMobile"}(c||(c={}));class u extends a.TelemetryEventBase{constructor(){super()}getEventName(){return"navigation_deeplink"}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}t.DeepLinkTelemetryEventBase=u;t.OpenDeepLinkEvent=class extends u{constructor(e,t,i,n,o){super(),this._urlComponents=e,this._conversationId=t,this._navigationOrigin=i,this._browserOrigin=n,this._origin=o}getActionName(){return"OpenDeepLink"}getAttributes(){var e,t,i;const s=super.getAttributes();if(s.UrlType=r.UrlType[this._urlComponents.type],s.UrlProtocol=this._urlComponents.protocol,this._urlComponents.host&&(s.UrlHost=this._urlComponents.host),this._conversationId&&(s.ConversationId=this._conversationId,(this._conversationId===this._urlComponents.pathname||"skype"===this._urlComponents.protocol&&"launcher"===this._origin)&&(s.OutsideOfClientJoinLink=!0)),"join.skype.com"===this._urlComponents.host?s.JoinLinkPath=c.InClientLink:(null===(e=this._urlComponents.queryParameterString)||void 0===e?void 0:e.includes("chat"))?s.JoinLinkPath=c.LinkDesktop:(null===(t=this._urlComponents.pathname)||void 0===t?void 0:t.includes("@thread.skype"))&&(s.JoinLinkPath=c.LinkWeb),this._urlComponents.type===r.UrlType.Web&&this._urlComponents.pathname){const e=this._urlComponents.pathname.split("/")[0];if(e&&o.isMri(e)&&o.isThread(e)){s.UrlIntent="JoinConversation";const e=this._urlComponents.queryParameterKeyValues;e&&(n.includes(l.UrlNavigationAction,null===(i=e.action)||void 0===i?void 0:i.toLocaleLowerCase())&&(s.UrlParamAction=e.action.toLocaleLowerCase()),e.source&&(s.UrlParamSource=e.source))}}return s}},function(e){e[e.OpenConfirmation=0]="OpenConfirmation",e[e.Confirm=1]="Confirm",e[e.Reject=2]="Reject",e[e.RejectOutside=3]="RejectOutside"}(d=t.PhoneDiscoverabilityDialogCommand||(t.PhoneDiscoverabilityDialogCommand={}));t.PhoneDiscoverabilityEvent=class extends u{constructor(e){super(),this._phoneDiscoverabilityEventParams=e}getActionName(){return"PhoneDiscoverability"}getAttributes(){const e=super.getAttributes();return this._phoneDiscoverabilityEventParams.userPhonesCount&&(e.UserPhonesCount=this._phoneDiscoverabilityEventParams.userPhonesCount),void 0!==this._phoneDiscoverabilityEventParams.command&&(e.DialogCommand=d[this._phoneDiscoverabilityEventParams.command]),void 0!==this._phoneDiscoverabilityEventParams.origin&&(e.Origin=s.PhoneDiscoverabilityOrigin[this._phoneDiscoverabilityEventParams.origin]),e}}},21468:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DirectShareTelemetry=void 0;const n=i(349);class o extends n.TelemetryEventBase{constructor(e,t){super(),this._itemType=e,this._numberOfItems=t}getEventName(){return"messaging_direct_share"}getAttributes(){const e=super.getAttributes();return e.ItemType=this._itemType,e.NumberOfItems=this._numberOfItems,e}}t.DirectShareTelemetry=o},37614:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadRecovered=t.PermanentDownloadFailure=void 0;const n=i(96486),o=i(46096),s=i(349);class a extends s.TelemetryEventBase{constructor(e,t,i=0,n,o,s){super(),this._failureSource=e,this._firstSendTime=t,this._numberRetries=i,this._statusCode=n,this._statusText=o,this._errorMetadata=s}getEventName(){return"download_service"}getAttributes(){const e=super.getAttributes();return e.operation=this.getOperation(),e.failure_source=o.PostingTransferSource[this._failureSource],e.time_to_failure=this._eventCreationTime-this._firstSendTime,e.number_retries=this._numberRetries,e.status_code=this._statusCode,e.status_text=this._statusText?this._statusText:"",n.extend(e,this._errorMetadata),e}}t.PermanentDownloadFailure=class extends a{getOperation(){return"download_failure"}};t.DownloadRecovered=class extends a{getOperation(){return"download_recovered"}}},92069:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DraftMessageAppExitWithDrafts=t.DraftMessageDeleted=t.DraftMessageWasSent=t.DraftMessageCreated=void 0;const n=i(349);class o extends n.TelemetryEventBase{getEventName(){return"messaging_drafts"}getAttributes(){let e=super.getAttributes();return e.Action=this.getAction(),e}}t.DraftMessageCreated=class extends o{constructor(){super()}getAction(){return"Created"}};t.DraftMessageWasSent=class extends o{constructor(e,t){super(),this._modifiedBeforeSent=e,this._createdTime=t}getAction(){return"Sent"}getAttributes(){let e=super.getAttributes();return e.WasModifiedBeforeSent=this._modifiedBeforeSent,e.LifetimeDuration=Date.now()-this._createdTime,e}};t.DraftMessageDeleted=class extends o{constructor(e){super(),this._createdTime=e}getAction(){return"Deleted"}getAttributes(){let e=super.getAttributes();return e.LifetimeDuration=Date.now()-this._createdTime,e}};t.DraftMessageAppExitWithDrafts=class extends o{constructor(e){super(),this._numberOfDrafts=e}getAction(){return"AppExitWithDrafts"}getAttributes(){let e=super.getAttributes();return e.DraftsCount=this._numberOfDrafts,e}}},54543:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DragAndDropTelemetry=t.DragAction=t.DragType=t.DragOrigin=void 0;const n=i(349);var o,s,a;!function(e){e[e.RecentConversations=0]="RecentConversations",e[e.Contacts=1]="Contacts",e[e.MessageStream=2]="MessageStream"}(o=t.DragOrigin||(t.DragOrigin={})),function(e){e[e.File=0]="File",e[e.Picture=1]="Picture",e[e.Video=2]="Video",e[e.Contact=3]="Contact"}(s=t.DragType||(t.DragType={})),function(e){e[e.DragStart=0]="DragStart"}(a=t.DragAction||(t.DragAction={}));class r extends n.TelemetryEventBase{constructor(e,t,i){super(),this._action=e,this._origin=t,this._type=i}getEventName(){return"messaging_drag_and_drop"}getAttributes(){const e=super.getAttributes();return e.Action=a[this._action],e.Origin=o[this._origin],e.Type=s[this._type],e}}t.DragAndDropTelemetry=r},36763:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.E2eeDecryptionFailure=t.E2eeEncryptionFailure=t.E2eeRetry=t.E2eeReject=t.E2eeConfirm=t.E2eeAccept=t.E2eeInvite=t.E2eeRetryType=t.E2eeAction=void 0;const n=i(96486),o=i(46096),s=i(349);var a,r;!function(e){e[e.Invite=0]="Invite",e[e.Accept=1]="Accept",e[e.Confirm=2]="Confirm",e[e.Reject=3]="Reject",e[e.EncryptionFailure=4]="EncryptionFailure",e[e.DecryptionFailure=5]="DecryptionFailure"}(a=t.E2eeAction||(t.E2eeAction={})),function(e){e[e.ForceInviteIdRefresh=0]="ForceInviteIdRefresh",e[e.NewInviteIdSynced=1]="NewInviteIdSynced"}(r=t.E2eeRetryType||(t.E2eeRetryType={}));class l extends s.TelemetryEventBase{constructor(e,t,i){super(),this._action=e,this._failure=t,this._reason=i}getEventName(){return"messaging_e2ee"}getAttributes(){const e=super.getAttributes();return e.Action=a[this._action],this._reason&&(e.Reason=this._reason),e.Status=this._failure?"Failure":"OK",e}}t.E2eeInvite=class extends l{constructor(e,t=!1,i){super(a.Invite,t,i),this._origin=e}getAttributes(){const e=super.getAttributes();return e.Origin=n.isNil(this._origin)?"N/A":o.E2EEInviteOrigin[this._origin],e}};t.E2eeAccept=class extends l{constructor(e,t=!1,i){super(a.Accept,t,i),this._origin=e}getAttributes(){const e=super.getAttributes();return e.Origin=n.isNil(this._origin)?"N/A":o.E2EEAcceptOrigin[this._origin],e}};t.E2eeConfirm=class extends l{constructor(e,t=!1,i){super(a.Confirm,t,i),this._isAutoConfirm=e}getAttributes(){const e=super.getAttributes();return e.IsAutoConfirm=this._isAutoConfirm,e}};t.E2eeReject=class extends l{constructor(e,t=!1,i){super(a.Reject,t,i),this._rejectionReason=e}getAttributes(){const e=super.getAttributes();return e.RejectionReason=n.isNil(this._rejectionReason)?"N/A":o.E2EERejectionReason[this._rejectionReason],e}};t.E2eeRetry=class extends l{constructor(e,t){super(e,!1),this._retryType=t}getAttributes(){const e=super.getAttributes();return e.RetryType=r[this._retryType],e}};t.E2eeEncryptionFailure=class extends l{constructor(e){super(a.EncryptionFailure,!0,e)}};t.E2eeDecryptionFailure=class extends l{constructor(e){super(a.DecryptionFailure,!0,e)}}},64935:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EcsTelemetryEvent=void 0;const n=i(96486),o=i(349);class s extends o.TelemetryEventBase{constructor(e,t){super(),this._eventName=e,this._attributes=t}shouldSend(){return!0}getEventName(){return this._eventName}getAttributes(){let e=super.getAttributes();return n.assign(e,this._attributes),e.Client="SkypeConsumer",e}}t.EcsTelemetryEvent=s},75776:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486);t.default=class{constructor(e){this._namedMapping={},e&&n.each(e,(e=>{n.each(e,((e,t)=>{this._namedMapping[t]?this._namedMapping[t]=[this._namedMapping[t],e].join(","):this._namedMapping[t]=e}))}))}getExperimentIdsForEventName(e){return[this._namedMapping[e],this._namedMapping._all_].filter((e=>void 0!==e&&""!==e)).join(",")}}},46429:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(46096),o=i(36237),s=i(94050);t.default=class{constructor(e){this._contextId=e,this._scenarioName=s.ScenarioName[s.ScenarioName.EmergencyRestoreEndpoints],this._scenario=new s.default(s.ScenarioName.EmergencyRestoreEndpoints,void 0,{contextId:e||""}),o.log(n.LogTraceArea.ScenarioTracker,this._scenarioName+" Scenario created!: "+this._contextId)}start(){o.log(n.LogTraceArea.ScenarioTracker,this._scenarioName+" Scenario started!: "+this._contextId),this._scenario.start()}gotSkypeToken(e){this._scenario.markStepCompleted("GotSkypeToken",{refreshNeeded:e}),o.log(n.LogTraceArea.ScenarioTracker,this._scenarioName+" GotSkypeToken:"+(e?" Refreshed ":" ")+this._contextId)}endpointMissing(e){this._scenario.markStepCompleted("MarkEndpointsMissing",{id:e||""}),o.log(n.LogTraceArea.ScenarioTracker,this._scenarioName+" MarkEndpointsMissing: "+this._contextId)}endpointRestored(e){this._scenario.markStepCompleted("EndpointRestored",{id:e||""}),o.log(n.LogTraceArea.ScenarioTracker,this._scenarioName+" EndpointRestored: "+this._contextId)}pushSubscriptionRestored(e){this._scenario.markStepCompleted("PushSubscriptionRestored",{pushSubscriptionId:e}),o.log(n.LogTraceArea.ScenarioTracker,this._scenarioName+" PushSubscriptionRestored: "+this._contextId)}timedOut(){this._scenario.markStepCompleted("TimedOut"),o.log(n.LogTraceArea.ScenarioTracker,this._scenarioName+" TimedOut: "+this._contextId)}finish(){o.log(n.LogTraceArea.ScenarioTracker,this._scenarioName+" Finished: "+this._contextId),this._scenario.finish()}failed(e,t){o.log(n.LogTraceArea.ScenarioTracker,this._scenarioName+" Failed: "+this._contextId+", reason:"+e),this._scenario.markStepCompleted("Failed",Object.assign({reason:e},t))}ignored(e){this._scenario.markStepCompleted("Ignored",{reason:e}),o.log(n.LogTraceArea.ScenarioTracker,this._scenarioName+" Ignored: "+this._contextId+", reason:"+e)}}},94980:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EngagementPullRequestEvent=t.FailureReason=t.EngagementApiPullRequestEventSource=void 0;const n=i(96486),o=i(349);var s,a;!function(e){e[e.MSA=2]="MSA",e[e.EngagementApi=3]="EngagementApi",e[e.SkypeToken=4]="SkypeToken",e[e.MsaCidHex=5]="MsaCidHex"}(s=t.EngagementApiPullRequestEventSource||(t.EngagementApiPullRequestEventSource={})),function(e){e[e.ContentDownloadError=2]="ContentDownloadError",e[e.ContentStatusFailure=3]="ContentStatusFailure",e[e.SkypeTokenUnavailable=4]="SkypeTokenUnavailable",e[e.ServerFailure=5]="ServerFailure",e[e.MSATokenMissing=6]="MSATokenMissing",e[e.MSATokenUnavailable=7]="MSATokenUnavailable",e[e.SkypeTokenMissing=8]="SkypeTokenMissing",e[e.MsaCidHexMissing=9]="MsaCidHexMissing"}(a=t.FailureReason||(t.FailureReason={}));class r extends o.TelemetryEventBase{constructor(e){super(),this.props=e}getEventName(){return"engagement_pull_request"}getAttributes(){return n.assign(super.getAttributes(),{DidSucceed:this.props.didSucceed,Source:this.props.source?s[this.props.source]:"",FailureReason:this.props.failureReason?a[this.props.failureReason]:"",CampaignId:this.props.campaignId||"",CampaignVariant:this.props.campaignVariant||"",RequestDurationMs:this.props.requestDuration||0,ServerStatusCode:this.props.serverStatusCode||0,MessageCorrelationId:this.props.correlationId||""})}}t.EngagementPullRequestEvent=r},70942:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EngagementTooltipTelemetryEvent=t.EngagementBannerTelemetryEvent=t.EngagementShareableContentEvent=t.EngagementSettingsTelemetryEvent=t.EngagementPushNotificationTelemetryEvent=t.EngagementNoticeTelemetryEvent=t.EngagementPopCardTelemetryEvent=t.EngagementFeedbackTelemetryEvent=t.EngagementMessageTelemetryEvent=t.EngagementTelemetryEventBase=t.EngagementShareableContentAction=t.EngagementPushSource=t.EngagementSettingsSource=t.SuppressReason=t.ActionOrigin=t.EngagementMessageTelemetryEventType=t.EngagementPostMessageReason=t.EngagementTelemetryEventType=void 0;const n=i(96486),o=i(81169),s=i(71830),a=i(68894),r=i(349),l=i(35370);var c,d,u,g,h,p,m,S;!function(e){e[e.BackButton=1]="BackButton",e[e.CampaignBlocked=2]="CampaignBlocked",e[e.ChatServiceBlockedMessage=3]="ChatServiceBlockedMessage",e[e.EngagementContentDisabled=4]="EngagementContentDisabled",e[e.EngagementPushContentDisabled=5]="EngagementPushContentDisabled",e[e.PushDiscardedForChild=6]="PushDiscardedForChild",e[e.EscKey=7]="EscKey",e[e.FeatureDisabled=8]="FeatureDisabled",e[e.InvalidCampaignId=9]="InvalidCampaignId",e[e.InvalidColor=10]="InvalidColor",e[e.InvalidLink=11]="InvalidLink",e[e.InvalidSkypeId=12]="InvalidSkypeId",e[e.InvalidSkypeIdPlaceholder=13]="InvalidSkypeIdPlaceholder",e[e.NoticeBulkSizeExceeded=14]="NoticeBulkSizeExceeded",e[e.NoticeClientVersionMismatch=15]="NoticeClientVersionMismatch",e[e.NoticeCompleted=16]="NoticeCompleted",e[e.NoticeDelivered=17]="NoticeDelivered",e[e.NoticeDiscardedForChild=18]="NoticeDiscardedForChild",e[e.NoticeDiscardedOnFirstRun=19]="NoticeDiscardedOnFirstRun",e[e.NoticeDismiss=20]="NoticeDismiss",e[e.NoticeExperimentNotAllocated=21]="NoticeExperimentNotAllocated",e[e.NoticeExperimentVariantMismatch=22]="NoticeExperimentVariantMismatch",e[e.NoticeExpired=23]="NoticeExpired",e[e.NoticeInvalidPlaceholder=24]="NoticeInvalidPlaceholder",e[e.NoticeMissingContent=25]="NoticeMissingContent",e[e.NoticeParseError=26]="NoticeParseError",e[e.NoticeReceived=27]="NoticeReceived",e[e.NoticeReceivedControl=28]="NoticeReceivedControl",e[e.NoticeTapButton=29]="NoticeTapButton",e[e.NoticeTapCard=30]="NoticeTapCard",e[e.NoticeTimeout=31]="NoticeTimeout",e[e.NoticeUnsupportedContentType=32]="NoticeUnsupportedContentType",e[e.NoticeUnsupportedValidForPeriod=33]="NoticeUnsupportedValidForPeriod",e[e.NoticeUnsupportedDelayForPeriod=34]="NoticeUnsupportedDelayForPeriod",e[e.NoticeEnqueued=35]="NoticeEnqueued",e[e.NoticeDequeued=36]="NoticeDequeued",e[e.NoticeWrongLanguage=37]="NoticeWrongLanguage",e[e.NoticeWrongPlatform=38]="NoticeWrongPlatform",e[e.PlaceholderWithoutSkypeId=39]="PlaceholderWithoutSkypeId",e[e.PopCardBulkSizeExceeded=40]="PopCardBulkSizeExceeded",e[e.PopCardClientVersionMismatch=41]="PopCardClientVersionMismatch",e[e.PopCardCompleted=42]="PopCardCompleted",e[e.PopCardDelivered=43]="PopCardDelivered",e[e.PopCardDiscardedForChild=44]="PopCardDiscardedForChild",e[e.PopCardDiscardedOnFirstRun=45]="PopCardDiscardedOnFirstRun",e[e.PopCardDismiss=46]="PopCardDismiss",e[e.PopCardDisplay=47]="PopCardDisplay",e[e.PopCardExpand=48]="PopCardExpand",e[e.PopCardExperimentNotAllocated=49]="PopCardExperimentNotAllocated",e[e.PopCardExperimentVariantMismatch=50]="PopCardExperimentVariantMismatch",e[e.PopCardExpired=51]="PopCardExpired",e[e.PopCardInvalidPlaceholder=52]="PopCardInvalidPlaceholder",e[e.PopCardMissingContent=53]="PopCardMissingContent",e[e.PopCardParseError=54]="PopCardParseError",e[e.PopCardReceived=55]="PopCardReceived",e[e.PopCardReceivedControl=56]="PopCardReceivedControl",e[e.PopCardSuppressed=57]="PopCardSuppressed",e[e.PopCardTapButton=58]="PopCardTapButton",e[e.PopCardTapCard=59]="PopCardTapCard",e[e.PopCardTimeout=60]="PopCardTimeout",e[e.PopCardUnsupportedValidForPeriod=61]="PopCardUnsupportedValidForPeriod",e[e.PopCardUnsupportedDelayForPeriod=62]="PopCardUnsupportedDelayForPeriod",e[e.PopCardEnqueued=63]="PopCardEnqueued",e[e.PopCardDequeued=64]="PopCardDequeued",e[e.PopCardWrongLanguage=65]="PopCardWrongLanguage",e[e.PopCardWrongPlatform=66]="PopCardWrongPlatform",e[e.PostMessage=67]="PostMessage",e[e.PushNotificationClientVersionMismatch=68]="PushNotificationClientVersionMismatch",e[e.PushNotificationDelivered=69]="PushNotificationDelivered",e[e.PushNotificationDismissedDueToActivity=70]="PushNotificationDismissedDueToActivity",e[e.PushNotificationDismissedOnFeatureCategory=71]="PushNotificationDismissedOnFeatureCategory",e[e.PushNotificationDisplayed=72]="PushNotificationDisplayed",e[e.PushNotificationDisplayFailed=73]="PushNotificationDisplayFailed",e[e.PushNotificationExperimentNotAllocated=74]="PushNotificationExperimentNotAllocated",e[e.PushNotificationExperimentVariantMismatch=75]="PushNotificationExperimentVariantMismatch",e[e.PushNotificationParseError=76]="PushNotificationParseError",e[e.PushNotificationReceived=77]="PushNotificationReceived",e[e.PushNotificationReceivedControl=78]="PushNotificationReceivedControl",e[e.PushNotificationSuppressed=79]="PushNotificationSuppressed",e[e.PushNotificationTap=80]="PushNotificationTap",e[e.PushNotificationTimestampParsingError=81]="PushNotificationTimestampParsingError",e[e.PushNotificationWrongLanguage=82]="PushNotificationWrongLanguage",e[e.SignoutSurveyDismiss=83]="SignoutSurveyDismiss",e[e.SkypeIdBlocked=84]="SkypeIdBlocked",e[e.UnableToResolveUserProfile=85]="UnableToResolveUserProfile",e[e.UnexpectedValidationResult=86]="UnexpectedValidationResult",e[e.UnsupportedPersistencyMode=87]="UnsupportedPersistencyMode",e[e.UnsupportedValidUntilTimestamp=88]="UnsupportedValidUntilTimestamp",e[e.UntrustedActionUri=89]="UntrustedActionUri",e[e.UntrustedLinkUri=90]="UntrustedLinkUri"}(c=t.EngagementTelemetryEventType||(t.EngagementTelemetryEventType={})),function(e){e[e.OriginInvalid=1]="OriginInvalid",e[e.OriginValid=2]="OriginValid",e[e.Invalid=3]="Invalid",e[e.WebViewNotReady=4]="WebViewNotReady",e[e.Sent=5]="Sent"}(d=t.EngagementPostMessageReason||(t.EngagementPostMessageReason={})),function(e){e[e.BotMessageServiceConvSyncFailBricked=1]="BotMessageServiceConvSyncFailBricked",e[e.BotMessageServiceConvSyncFailNoMeta=2]="BotMessageServiceConvSyncFailNoMeta",e[e.BotMessageServiceConvSyncFailNoProgress=3]="BotMessageServiceConvSyncFailNoProgress",e[e.BotMessageServiceUnsupportedMessageType=4]="BotMessageServiceUnsupportedMessageType",e[e.BotMessageServiceWaitingMessage=5]="BotMessageServiceWaitingMessage",e[e.ChatServiceBlockedMessage=6]="ChatServiceBlockedMessage",e[e.InvalidPayload=7]="InvalidPayload",e[e.TelemetryObjectNotFound=8]="TelemetryObjectNotFound",e[e.InvalidPlatformListInPayload=9]="InvalidPlatformListInPayload",e[e.InvalidClientVersionInPayload=10]="InvalidClientVersionInPayload"}(u=t.EngagementMessageTelemetryEventType||(t.EngagementMessageTelemetryEventType={})),function(e){e[e.Notification=1]="Notification",e[e.PopCard=2]="PopCard",e[e.PopCardToast=3]="PopCardToast",e[e.QuietPopCard=4]="QuietPopCard",e[e.WebView=5]="WebView"}(g=t.ActionOrigin||(t.ActionOrigin={})),function(e){e[e.ApplicationActive=1]="ApplicationActive",e[e.CallInProgress=2]="CallInProgress",e[e.CoachMarkShown=3]="CoachMarkShown",e[e.GenericModalOpened=4]="GenericModalOpened",e[e.HubNotVisible=5]="HubNotVisible",e[e.NotOnLandingPage=6]="NotOnLandingPage",e[e.OnboardingInProgress=7]="OnboardingInProgress",e[e.PopCardModalOpen=8]="PopCardModalOpen",e[e.PopCardToggled=9]="PopCardToggled",e[e.QuietCard=10]="QuietCard",e[e.UserStatusBusy=11]="UserStatusBusy",e[e.WebViewOpened=12]="WebViewOpened",e[e.SurfaceDisabled=13]="SurfaceDisabled",e[e.EngagementTypeFilterEnabled=14]="EngagementTypeFilterEnabled"}(h=t.SuppressReason||(t.SuppressReason={})),function(e){e[e.TipsAndTricks=0]="TipsAndTricks",e[e.TipsAndTricksPush=1]="TipsAndTricksPush",e[e.EmailMissedMessageReminders=2]="EmailMissedMessageReminders",e[e.EmailMissedCallReminders=3]="EmailMissedCallReminders"}(p=t.EngagementSettingsSource||(t.EngagementSettingsSource={})),function(e){e[e.TPUM=1]="TPUM",e[e.InApp=2]="InApp"}(m=t.EngagementPushSource||(t.EngagementPushSource={})),function(e){e[e.OpenDialog=0]="OpenDialog",e[e.CloseDialog=1]="CloseDialog",e[e.DismissDialog=2]="DismissDialog"}(S=t.EngagementShareableContentAction||(t.EngagementShareableContentAction={}));class C extends r.TelemetryEventBase{constructor(e){super(),this.props=e}getAttributes(){let e=super.getAttributes();if(e.Action=c[this.props.eventType]||"UnknownAction",e.CampaignId=this.props.campaignId||"UnknownCampaign",e.IsOfflineTargeted=this.props.offlineTargeted||!1,this.props.actionOrigin&&(e.ActionOrigin=g[this.props.actionOrigin]),this.props.campaignTrackId&&(e.CampaignTrackId=this.props.campaignTrackId),this.props.contentLanguage&&(e.ContentLanguage=this.props.contentLanguage),this.props.contentPlatforms&&(e.ContentPlatforms=(0,o.chain)(this.props.contentPlatforms,(0,o.map)((e=>a.EngagementPlatformType[e])),(0,o.sortBy)(),(0,o.uniq)(),(0,o.join)(","))),this.props.suppressReason&&(e.SuppressReason=h[this.props.suppressReason]),this.props.deliveryTime&&this.props.sentTime&&(e.DeliveryTime=this.props.deliveryTime,e.SentTime=this.props.sentTime,e.DeliveryDuration=this.props.deliveryTime-this.props.sentTime),n.isNumber(this.props.buttonIndex)&&(e.ButtonIndex=this.props.buttonIndex),this.props.messageId&&(e.MessageId=this.props.messageId),this.props.messageCorrelationId&&(e.MessageCorrelationId=this.props.messageCorrelationId),this.props.actionUri&&(e.ActionUri=this.props.actionUri),!n.isUndefined(this.props.userStatus)){const t=s.encodeStatus(this.props.userStatus);t&&(e.UserStatus=t)}if(this.props.hubLocation&&(e.HubLocation=this.props.hubLocation),this.props.engagementTelemetryAttributes){const t="T_";n.each(this.props.engagementTelemetryAttributes,((i,o)=>{e[t+n.upperFirst(o)]=i}))}return this.props.postMessageReason&&(e.PostMessageReason=d[this.props.postMessageReason]),this.props.delayForPeriod&&(e.DelayForPeriod=this.props.delayForPeriod),e}}t.EngagementTelemetryEventBase=C;class f extends r.TelemetryEventBase{constructor(e){super(),this.props=e}getEventName(){return"engagement_message"}getAttributes(){let e=super.getAttributes();e.Action=u[this.props.eventType]||"UnknownAction",this.props.messageType&&(e.MessageType=this.props.messageType),this.props.messageCorrelationId&&(e.MessageCorrelationId=this.props.messageCorrelationId),this.props.messageId&&(e.MessageId=this.props.messageId);const t=l.getTrackableConversationId(this.props.conversationId);return t&&(e.ConversationId=t),e}}t.EngagementMessageTelemetryEvent=f;t.EngagementFeedbackTelemetryEvent=class extends C{getEventName(){return"engagement_feedback_event"}};t.EngagementPopCardTelemetryEvent=class extends C{getEventName(){return"engagement_popcard_event"}};t.EngagementNoticeTelemetryEvent=class extends C{getEventName(){return"engagement_notice_event"}};t.EngagementPushNotificationTelemetryEvent=class extends C{constructor(e){super(e),this.props=e}getEventName(){return"engagement_push_notification_event"}getAttributes(){let e=super.getAttributes();return e.Source=this.props.source?m[this.props.source]:m[m.TPUM],this.props.lastAppActiveTimeTimestamp&&(e.LastAppActiveTimeTimestamp=this.props.lastAppActiveTimeTimestamp),this.props.lastActivityCheckTimestamp&&(e.LastActivityCheckTimestamp=this.props.lastActivityCheckTimestamp),this.props.lastActivityCheckParsedTimestamp&&(e.LastActivityCheckParsedTimestamp=this.props.lastActivityCheckParsedTimestamp),e}getLoggedOutSendingPolicy(){return r.TelemetryEventLoggedOutPolicy.SendNow}};class y extends r.TelemetryEventBase{constructor(e){super(),this.props=e}getEventName(){return"engagement_settings"}getAttributes(){let e=super.getAttributes();return e.Source=p[this.props.source],e.IsToggled=this.props.isToggled,e}}t.EngagementSettingsTelemetryEvent=y;class _ extends r.TelemetryEventBase{constructor(e){super(),this.props=e}getEventName(){return"engagement_shareable_content"}getAttributes(){const e=super.getAttributes();return e.Action=S[this.props.action],e.CampaignId=this.props.campaignId,e.TextInputEnabled=this.props.wasTextMsgEnabled,e.CarouselEnabled=this.props.wasCarouselEnabled,e.OneClickSendEnabled=this.props.wasOneClickSendEnabled,e.HasShareButton=!!this.props.hasShareButton,e.ContentReshare=!!this.props.isContentReshare,e.SharesCount=this.props.shareCounts||0,e.HasUsedSearch=!!this.props.hasUsedSearch,e.HasUsedCarousel=!!this.props.hasUsedCarousel,e.HasSharedTextMsg=!!this.props.hasSharedTextMsg,e.CardsShareCount=this.props.cardsShareCount||0,this.props.cardsShared&&(e.CardsShared=n.toString(n.sortBy(this.props.cardsShared))),e}}t.EngagementShareableContentEvent=_;class v extends r.TelemetryEventBase{constructor(e,t){super(),this._type=e,this._action=t}getEventName(){return"engagement_banner"}getAttributes(){let e=super.getAttributes();return e.BannerType=this._type,e.Action=this._action,e}}t.EngagementBannerTelemetryEvent=v;class b extends r.TelemetryEventBase{constructor(e,t){super(),this._type=e,this._action=t}getEventName(){return"engagement_tooltip"}getAttributes(){let e=super.getAttributes();return e.TooltipType=this._type,e.Action=this._action,e}}t.EngagementTooltipTelemetryEvent=b},53880:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(26712);t.default=class{static getTrackingQueryParam(e){if(n.isEmpty(e))return;const t=o.default.getURIComponents(e);return t?n.get(t.queryParameterKeyValues,"WT.mc_id",void 0):void 0}}},74625:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(97691),o=i(89391),s=i(62141),a=i(46096),r=i(36237),l=i(98754),c=i(14976),d=i(83181),u=i(22538),g=i(349);t.default=new class{constructor(){this._appConfigStoreSubscribeCallback=()=>{const e=o.default.getEngagementFeatures().engagementUserTagging;if(this._isUserTaggingEnabled=e.enabled,this._maxDurationInSeconds=e.maxDurationInSeconds,this._isUserTaggingEnabled){if(this._cachedUserTaggingConfig)return;this._cachedUserTaggingConfig=l.default.getData(s.InternalKeys.EngagementUserTaggingConfig),this._cachedUserTaggingConfig&&(this._cacheInvalidated=!1,this._cachedUserTaggingConfig.durationAbsoluteTimestamp>Date.now()?this._setUserTaggingConfig(this._cachedUserTaggingConfig):(r.log(a.LogTraceArea.EngagementUserTagging,"Deleting expired user tagging config."),this._deleteUserTaggingConfig()))}else this._cacheInvalidated||(r.log(a.LogTraceArea.EngagementUserTagging,"User tagging disabled, deleting configs."),this._deleteUserTaggingConfig())},u.RegisterStartupable(this,"EngagementUserTaggingService",[l.default])}startup(){return d.default.performAfterUIStarted((()=>{o.default.subscribe(this._appConfigStoreSubscribeCallback),this._appConfigStoreSubscribeCallback()})),n.Resolved()}setupUserTagging(e,t){if(!this._isUserTaggingEnabled)return void r.log(a.LogTraceArea.EngagementUserTagging,"User tagging disabled.");if(t>this._maxDurationInSeconds)return void r.log(a.LogTraceArea.EngagementUserTagging,"Tracking time is greater than max allowed value.");let i={engagementTag:e,durationAbsoluteTimestamp:Date.now()+1e3*t};this._cachedUserTaggingConfig=i,this._cacheInvalidated=!1,this._setUserTaggingConfig(i),l.default.putData(s.InternalKeys.EngagementUserTaggingConfig,i)}userTaggingConfig(){if(g.EngagementUserTaggingConfig&&Date.now()<g.EngagementUserTaggingConfig.durationAbsoluteTimestamp)return g.EngagementUserTaggingConfig}_setUserTaggingConfig(e){r.log(a.LogTraceArea.EngagementUserTagging,`Setting engagement user tagging - ${c.dev_unknownOmit(e.engagementTag)}, ${e.durationAbsoluteTimestamp}`),g.setEngagementUserTaggingConfig({engagementTag:e.engagementTag,durationAbsoluteTimestamp:e.durationAbsoluteTimestamp})}_deleteUserTaggingConfig(){l.default.deleteKeys([s.InternalKeys.EngagementUserTaggingConfig]),g.setEngagementUserTaggingConfig(void 0),this._cachedUserTaggingConfig=void 0,this._cacheInvalidated=!0}test_reset(){this._cachedUserTaggingConfig=void 0,this._cacheInvalidated=!1}}},37802:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionSearchAction=t.SubscriptionSearchComponentClick=t.ManageSubscription=t.SubscriptionUpgrade=t.SubscriptionDetailsLinkClick=t.BalanceStatePanelComponentClick=t.BalanceStateNavigation=t.ReactivationStep=t.PushEtagExpired=t.EntitlementIntegrationError=t.BalanceStatePollNotificationConsumed=t.BalanceStatePollNotificationReceived=t.OrderNotificationOrEntitlementsUpdated=t.OrderPollNotificationReceived=t.AADCPanelLoaded=t.RatesFetching=t.ServicesFetching=t.AADCLInfoLinksClickTarget=t.AADCExperienceLoaded=t.ManageSubscriptionClickTarget=t.SubscriptionSearchComponentClickTarget=t.ContentShowSource=t.SubscriptionUpgradeFlowStep=void 0;const n=i(96486),o=i(88366),s=i(40363),a=i(349);!function(e){e.ShowButton="show",e.ClickButton="click"}(t.SubscriptionUpgradeFlowStep||(t.SubscriptionUpgradeFlowStep={})),function(e){e.InfoScreen="info_screen",e.MainScreen="main_screen"}(t.ContentShowSource||(t.ContentShowSource={})),function(e){e.SubscriptionSearchButton="SubscriptionSearchButton",e.SubscriptionResetSearchButton="SubscriptionResetSearchButton"}(t.SubscriptionSearchComponentClickTarget||(t.SubscriptionSearchComponentClickTarget={})),function(e){e.SubscriptionClicked="SubscriptionClicked",e.ManageSubscriptionLinkClicked="ManageSubscriptionLinkClicked",e.IOSSubscriptionManageLinkClicked="IOSSubscriptionManageLinkClicked",e.GPlaySubscriptionManageLinkClicked="GplaySubscriptionManageLinkClicked"}(t.ManageSubscriptionClickTarget||(t.ManageSubscriptionClickTarget={})),function(e){e.BalancePanelScreenLoaded="BalancePanelScreenLoaded",e.CallFailureScreenLoaded="CallFailureScreenLoaded",e.SmsFailureScreenLoaded="SmsFailureScreenLoaded",e.SkypeNumberPurchaseScreenLoaded="SkypeNumberPurchaseScreenLoaded",e.TasterScreenLoaded="TasterScreenLoaded",e.SendCreditPanelScreenLoaded="SendCreditPanelScreenLoaded"}(t.AADCExperienceLoaded||(t.AADCExperienceLoaded={})),function(e){e.AADCLearnMoreLinkClicked="AADCLearnMoreLinkClicked",e.GiftSkypeCreditFAQLinkClicked="GiftSkypeCreditFAQLinkClicked"}(t.AADCLInfoLinksClickTarget||(t.AADCLInfoLinksClickTarget={}));class r extends a.TelemetryEventBase{getEventName(){return"s4l_entitlement"}getAriaTenantTokenOverride(){return s.default.getAriaCommerceTenantToken()}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}class l extends a.TelemetryEventBase{getEventName(){return"s4l_entitlement_polling"}getAriaTenantTokenOverride(){return s.default.getAriaCommerceTenantToken()}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}t.ServicesFetching=class extends l{constructor(e){super(),this._servicesFetchingTime=e}getActionName(){return"ServicesFetching"}getAttributes(){const e=super.getAttributes();return e.Duration=this._servicesFetchingTime,e}};t.RatesFetching=class extends r{constructor(e){super(),this._ratesFetchingTime=e}getActionName(){return"RatesFetching"}getAttributes(){const e=super.getAttributes();return e.Duration=this._ratesFetchingTime,e}};t.AADCPanelLoaded=class extends r{constructor(e,t){super(),this._navigationScreen=e,this._infoLink=t}getActionName(){return"AADCPanelLoaded"}getAttributes(){const e=super.getAttributes();return e.navigationScreen=this._navigationScreen,e.infoLinkClicked=void 0!==this._infoLink?this._infoLink:"",e}};t.OrderPollNotificationReceived=class extends r{constructor(e){super(),this._reason=e}getActionName(){return"OrderPollNotificationReceived"}getAttributes(){const e=super.getAttributes();return e.Reason=o.EntitlementRequestReason[this._reason],e}};t.OrderNotificationOrEntitlementsUpdated=class extends r{constructor(e,t,i,n,o,s){super(),this._reason=e,this._failed=t,this._didBalanceUpdate=i,this._didSubscriptionsUpdate=n,this._didSkypeNumbersUpdate=o,this._consumeTime=s}getActionName(){return"OrderNotificationOrEntitlementsUpdated"}getAttributes(){const e=super.getAttributes();return e.ConsumeTime=this._consumeTime,e.DidConsumeFail=this._failed,e.DidBalanceUpdate=this._didBalanceUpdate,e.DidSubscriptionsUpdate=this._didSubscriptionsUpdate,e.DidSkypeNumbersUpdate=this._didSkypeNumbersUpdate,e.Reason=o.EntitlementRequestReason[this._reason],e}};t.BalanceStatePollNotificationReceived=class extends l{constructor(e){super(),this._reason=e}getActionName(){return"BalanceStatePollNotificationReceived"}getAttributes(){const e=super.getAttributes();return e.Reason=o.EntitlementRequestReason[this._reason],e}};t.BalanceStatePollNotificationConsumed=class extends l{constructor(e,t,i,n,o,s){super(),this._reason=e,this._failed=t,this._didBalanceUpdate=i,this._didSubscriptionsUpdate=n,this._didSkypeNumbersUpdate=o,this._consumeTime=s}getActionName(){return"BalanceStatePollNotificationConsumed"}getAttributes(){const e=super.getAttributes();return e.ConsumeTime=this._consumeTime,e.DidConsumeFail=this._failed,e.DidBalanceUpdate=this._didBalanceUpdate,e.DidSubscriptionsUpdate=this._didSubscriptionsUpdate,e.DidSkypeNumbersUpdate=this._didSkypeNumbersUpdate,e.Reason=o.EntitlementRequestReason[this._reason],e}};t.EntitlementIntegrationError=class extends r{constructor(e,t,i){super(),this._step=e,this._description=t,this._props=i}getActionName(){return"EntitlementIntegrationError"}getAttributes(){const e=super.getAttributes();return e.Step=this._step,e.Description=this._description,n.assign(e,this._props||{})}};t.PushEtagExpired=class extends r{constructor(e,t){super(),this._currentEtag=e,this._pushEtag=t,this._getEtagDiff=()=>{let e=this._currentEtag.replace(/\D/g,""),t=this._pushEtag.replace(/\D/g,""),i=0;for(let n=e.length-1;n>=0;n--){i+=(parseInt(e.charAt(n)||"0",10)-parseInt(t.charAt(n)||"0",10))*Math.pow(10,e.length-n-1)}return i}}getActionName(){return"PushEtagExpired"}getAttributes(){const e=super.getAttributes();return e.CurrentEtag=this._currentEtag,e.PushEtag=this._pushEtag,e.EtagDiff=String(this._getEtagDiff()),e}};t.ReactivationStep=class extends r{constructor(e){super(),this._reactivationActionStep=e}getActionName(){return"ReactivationStep"}getAttributes(){const e=super.getAttributes();return e.Step=this._reactivationActionStep,e}};t.BalanceStateNavigation=class extends r{constructor(e,t,i){super(),this._navigationSource=e,this._entitlements=t,this._contentShown=i}getActionName(){return"BalanceStateNavigation"}getAttributes(){const e=super.getAttributes();return e.NavigationSource=this._navigationSource,e.EntitlementsCombination=this._entitlements,e.ContentShown=this._contentShown,e}};t.BalanceStatePanelComponentClick=class extends r{constructor(e){super(),this._target=e}getActionName(){return"BalanceStatePanelComponentClick"}getAttributes(){const e=super.getAttributes();return e.Target=this._target,e}};t.SubscriptionDetailsLinkClick=class extends r{constructor(e){super(),this._subscriptionId=e}getActionName(){return"SubscriptionDetailsLinkClick"}getAttributes(){const e=super.getAttributes();return e.SubscriptionId=this._subscriptionId,e}};t.SubscriptionUpgrade=class extends r{constructor(e,t,i,n){super(),this._flowStep=e,this._originSubscriptionId=t,this._upgradeSubscriptionId=i,this._minutesLeft=n}getActionName(){return"SubscriptionUpgrade"}getAttributes(){const e=super.getAttributes();return e.Step=this._flowStep,e.OriginSubscriptionId=this._originSubscriptionId,e.UpgradeSubscriptionId=this._upgradeSubscriptionId,e.OriginSubscriptionMinutesLeft=this._minutesLeft,e}};t.ManageSubscription=class extends r{constructor(e,t){super(),this._target=e,this._subscriptionId=t}getActionName(){return"ManageSubscription"}getAttributes(){const e=super.getAttributes();return e.Step=this._target,e.SubscriptionId=this._subscriptionId,e}};t.SubscriptionSearchComponentClick=class extends r{constructor(e,t){super(),this._target=e,this._countryCode=t}getActionName(){return"SubscriptionSearchComponentClick"}getAttributes(){const e=super.getAttributes();return e.Target=this._target,this._countryCode&&(e.SearchedCountry=this._countryCode),e}};t.SubscriptionSearchAction=class extends r{constructor(e){super(),this._countryCode=e}getActionName(){return"SubscriptionSearchAction"}getAttributes(){const e=super.getAttributes();return e.SearchedCountry=this._countryCode,e}}},79251:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileOpenClick=t.FileDownloadFailure=t.FileDownloadCancelClick=t.FileDownloadRetryClick=t.FileDownloadClick=t.FileAction=void 0;const n=i(12056),o=i(349),s=i(35370);var a;!function(e){e[e.DownloadClick=0]="DownloadClick",e[e.DownloadRetryClick=1]="DownloadRetryClick",e[e.DownloadCancelClick=2]="DownloadCancelClick",e[e.DownloadFailure=3]="DownloadFailure",e[e.OpenClick=4]="OpenClick"}(a=t.FileAction||(t.FileAction={}));class r extends n.MessageTelemetryBase{constructor(e,t,i){super(i,i.conversationId),this._action=e,this._fileType=t;const n=s.getClientMessageId(i);this._clientMessageId=n||""}getEventName(){return"file_action"}getEventTraceMode(){return o.TelemetryTraceMode.EventName}getCorrelationAttributes(){const e=super.getCorrelationAttributes();return e.Client_Message_Id=this._clientMessageId,e}getAttributes(){const e=super.getAttributes();e.file_type=this._fileType;let t=a[this._action];return this._action===a.OpenClick&&(t="open_click"),e.action=t,e}_useOldAttributeNames(){return!0}}class l extends r{constructor(e,t,i,n,o){super(e,t,i),this._fileSize=n,this._fileSizeRaw=o}getAttributes(){const e=super.getAttributes();return e.file_size=this._fileSize,e.file_size_bytes=this._fileSizeRaw,e}}t.FileDownloadClick=class extends l{constructor(e,t,i,n){super(a.DownloadClick,e,t,i,n)}};t.FileDownloadRetryClick=class extends l{constructor(e,t,i,n){super(a.DownloadRetryClick,e,t,i,n)}};t.FileDownloadCancelClick=class extends l{constructor(e,t,i,n){super(a.DownloadCancelClick,e,t,i,n)}};t.FileDownloadFailure=class extends l{constructor(e,t,i,n){super(a.DownloadFailure,e,t,i,n)}};t.FileOpenClick=class extends r{constructor(e,t){super(a.OpenClick,e,t),this._serverMessageId=t.getOriginalServerId()||""}getAttributes(){const e=super.getAttributes();return e.Clicked_Timestamp=this._eventCreationTime,e.Server_Message_Id=this._serverMessageId,e}}},74401:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FindPanelAddinShared=t.FindPanelLaunched=t.FindPanelLaunchMessage=t.FindPanelResult=void 0;const n=i(349);var o,s;!function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"}(o=t.FindPanelResult||(t.FindPanelResult={})),function(e){e[e.NoAddinsAvailable=0]="NoAddinsAvailable",e[e.AddinsAvailable=1]="AddinsAvailable",e[e.AddinsFetchError=2]="AddinsFetchError"}(s=t.FindPanelLaunchMessage||(t.FindPanelLaunchMessage={}));class a extends n.TelemetryEventBase{getEventName(){return"caap_find_panel"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}t.FindPanelLaunched=class extends a{constructor(e){super(),this._launchData=e}getActionName(){return"Launched"}getAttributes(){let e=super.getAttributes();return e.LaunchResult=o[this._launchData.resultCode],e.LaunchResultMessage=s[this._launchData.resultMessage],e}};t.FindPanelAddinShared=class extends a{constructor(e){super(),this._shareData=e}getActionName(){return"AddinShared"}getAttributes(){let e=super.getAttributes();return e.IntegrationId=this._shareData.integrationId||"",e.IsBrowserUrl=this._shareData.isBrowserUrl,e.ShareResult=o[this._shareData.resultCode],e.ShareResultMessage=this._shareData.resultMessage||"",e}}},97811:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FundamentalsDebugEmptyBodyEvent=t.FundamentalsMessagePushDebug=t.FundamentalsDebugEvent=t.AriaGetEventsLimitReached=t.DatabaseDebugEvent=t.DatabaseErrorEvent=t.MissingPushSubscription=void 0;const n=i(36076),o=i(96486),s=i(349);i(35370);class a extends s.TelemetryEventBase{constructor(e,t,i,n,o,s){super(),this._newEndpointId=e,this._existingEndpointId=t,this._pushSubscriptionId=i,this._edfRegistrationId=n,this._reason=o,this._tcid=s}getEventName(){return"fundamentals_missing_push_sub"}getAttributes(){return o.assign({},super.getAttributes(),{NewEndpointId:this._newEndpointId,EndpointId:this._existingEndpointId,PushSubscriptionId:this._pushSubscriptionId,EdfRegistrationId:this._edfRegistrationId||"",Reason:this._reason||"",CSContextId:this._tcid?this._tcid.contextId:"",CSDate:this._tcid?this._tcid.date:""})}}t.MissingPushSubscription=a;class r extends s.TelemetryEventBase{constructor(e){super(),this._errorInfo=e}getEventName(){return"fundamentals_database_error"}getAttributes(){return o.assign(super.getAttributes(),{WebSQLCode:this._errorInfo.webSqlCode,SQLiteCode:this._errorInfo.sqliteCode,Message:this._errorInfo.sanitizedErrorMessage})}}t.DatabaseErrorEvent=r;class l extends s.TelemetryEventBase{constructor(e,t){super(),this._providerName=e,this._timeToOpen=t}getEventName(){return"fundamentals_db_debug"}getAttributes(){const e=super.getAttributes();return e.ProviderName=this._providerName,e.TimeToOpen=this._timeToOpen,e}}t.DatabaseDebugEvent=l;class c extends s.TelemetryEventBase{constructor(e,t){super(),this._tableSize=e,this._oldestSentTimestamp=t}getEventName(){return"fundamentals_aria_limit"}getAttributes(){const e=super.getAttributes();return e.TableSize=this._tableSize,e.OldestSent=this._oldestSentTimestamp,e}}t.AriaGetEventsLimitReached=c;class d extends s.TelemetryEventBase{constructor(e,t=""){super(),this._trackingName=e,this._data=t}getEventName(){return"fundamentals_debug"}getAttributes(){const e=super.getAttributes();return e.Name=this._trackingName,e.Data=this._data,e}}t.FundamentalsDebugEvent=d;t.FundamentalsMessagePushDebug=class extends d{constructor(e,t,i,n="",o=""){super("MessagePushDebug"),this._clientMessageId=e,this._correlationId=t,this._step=i,this._error=n,this._result=o}shouldSend(){return!1}getAttributes(){const e=super.getAttributes();return e.ProcessingStep=this._step,e.ClientMessageId=this._clientMessageId,e.MessageCorrelationId=this._correlationId,e.PushProcessingError=this._error,e.ProcessingResult=this._result,e}getEventPriority(){return n.AWTEventPriority.High}};class u extends s.TelemetryEventBase{constructor(e,t,i,n,o){super(),this._restClient=e,this._scenario=t,this._requestId=i,this._statusCode=n,this._statusText=o}getEventName(){return"fundamentals_empty_body_debug"}getAttributes(){const e=super.getAttributes();return e.RestClient=this._restClient,e.Scenario=this._scenario,e.RequestId=this._requestId||"",e.StatusCode=this._statusCode,e.StatusText=this._statusText||"",e}}t.FundamentalsDebugEmptyBodyEvent=u},81511:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GalleryFilterSwitchedEvent=t.GalleryItemViewedEvent=t.GalleryCommandSelectedEvent=t.GalleryAddItemViaDragAndDropEvent=t.GalleryAddItemPanelOpenedEvent=t.GalleryOpenedEvent=t.GalleryAction=void 0;const n=i(71830),o=i(17093),s=i(750),a=i(349),r=i(35370);var l;!function(e){e[e.Opened=0]="Opened",e[e.FilterSwitched=1]="FilterSwitched",e[e.AddItemPanelOpened=2]="AddItemPanelOpened",e[e.AddItemViaDragAndDrop=3]="AddItemViaDragAndDrop",e[e.CommandSelected=4]="CommandSelected",e[e.ItemViewed=5]="ItemViewed"}(l=t.GalleryAction||(t.GalleryAction={}));class c extends a.TelemetryEventBase{constructor(e,t){super(),this._action=e,this._conversationId=t}getEventName(){return"messaging_gallery"}getAttributes(){const e=super.getAttributes();return e.Action=l[this._action],e.IsGroupConversation=n.isGroupConversation(this._conversationId),e.IsEncryptedConversation=n.isEncryptedThread(this._conversationId),e}}t.GalleryOpenedEvent=class extends c{constructor(e){super(l.Opened,e)}};t.GalleryAddItemPanelOpenedEvent=class extends c{constructor(e){super(l.AddItemPanelOpened,e)}};t.GalleryAddItemViaDragAndDropEvent=class extends c{constructor(e){super(l.AddItemViaDragAndDrop,e)}};t.GalleryCommandSelectedEvent=class extends c{constructor(e,t){super(l.CommandSelected,e.conversationId),this._message=e,this._command=t}getAttributes(){const e=super.getAttributes();return e.ItemType=(0,r.getMessageTypeName)(this._message),e.Command=s.CommandTypes[this._command],e}};t.GalleryItemViewedEvent=class extends c{constructor(e){super(l.ItemViewed,e.conversationId),this._message=e}getAttributes(){const e=super.getAttributes();return e.ItemType=(0,r.getMessageTypeName)(this._message),e}};t.GalleryFilterSwitchedEvent=class extends c{constructor(e,t,i){super(l.FilterSwitched,e),this._from=t,this._to=i}getAttributes(){const e=super.getAttributes();return e.From=o.GalleryViewMode[this._from],e.To=o.GalleryViewMode[this._to],e}}},17873:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70891),o=i(81511),s=i(44949),a=i(36237);t.default=class{static potentiallyMarkCommandSelected(e,t,i){if(t===n.MessageRenderOrigin.StackGalleryCanvas||t===n.MessageRenderOrigin.CompositeGalleryCanvas){const t=s.GalleryTelemetryScenario.getInstance();t&&t.markStreamItemCommandSelected(e,i),a.track(new o.GalleryCommandSelectedEvent(e,i))}}static potentiallyMarkItemViewed(e,t){if(t===n.MessageRenderOrigin.StackGalleryCanvas||t===n.MessageRenderOrigin.CompositeGalleryCanvas){const t=s.GalleryTelemetryScenario.getInstance();t&&t.markItemViewed(e),a.track(new o.GalleryItemViewedEvent(e))}}}},44949:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GalleryTelemetryScenario=t.GalleryScenarioStep=void 0;const n=i(51077),o=i(46096),s=i(36237),a=i(64387),r=i(17093),l=i(15963),c=i(750),d=i(94050),u=i(12770);var g;!function(e){e[e.GalleryOpened=0]="GalleryOpened",e[e.GalleryClosed=1]="GalleryClosed",e[e.ConversationChanged=2]="ConversationChanged",e[e.ChangedView=3]="ChangedView",e[e.ItemAdded=4]="ItemAdded",e[e.ItemViewed=5]="ItemViewed",e[e.ItemForwarded=6]="ItemForwarded",e[e.ItemRemoved=7]="ItemRemoved",e[e.ViewedItemInChat=8]="ViewedItemInChat",e[e.ItemSaved=9]="ItemSaved",e[e.ItemCopied=10]="ItemCopied",e[e.LinkCopied=11]="LinkCopied",e[e.ItemReported=12]="ItemReported",e[e.TimedOut=13]="TimedOut",e[e.Unknown=14]="Unknown"}(g=t.GalleryScenarioStep||(t.GalleryScenarioStep={}));class h{constructor(){this._scenarioCompleted=!1,this._scenarioTimedOut=!1,this._onGalleryOpenTimeout=()=>{if(this._scenarioCompleted)return;const e={cause:g[g.TimedOut]};this._scenario.finish(e),this._scenarioCompleted=!0,this._scenarioTimedOut=!0},this._startNewScenario(g.GalleryOpened)}static getInstance(e=!1){return!e&&this._instance||(this._instance=new h),this._instance}static destroyInstance(){this._instance=void 0}_startNewScenario(e){this._scenarioTimedOut=!1,this._scenarioCompleted=!1;const t={cause:g[e]};this._scenario=new d.default(l.ScenarioName.Gallery),this._scenario.start(t),this._resetTimeoutTimer()}_resetTimeoutTimer(){this._timeoutTimerId&&(u.default.clearTimeout(this._timeoutTimerId),this._timeoutTimerId=void 0),this._timeoutTimerId=u.default.setTimeout(this._onGalleryOpenTimeout,12e4)}markStep(e,t){if(this._scenarioTimedOut&&this._startNewScenario(g.TimedOut),!this._scenarioCompleted)if(e===g.GalleryClosed||e===g.ConversationChanged){const t={cause:g[e]};this._scenario.finish(t),this._scenarioCompleted=!0,this._timeoutTimerId&&(u.default.clearTimeout(this._timeoutTimerId),this._timeoutTimerId=void 0)}else{const i=g[e];this._scenario.isStepMarked(i)||this._scenario.markStepCompleted(i,t),this._resetTimeoutTimer()}}markChangedViewMode(e){const t={changedToViewMode:r.GalleryViewMode[e]};this.markStep(g.ChangedView,t)}markItemViewed(e){const t={itemType:this._getItemType(e)};this.markStep(g.ItemViewed,t)}markStreamItemCommandSelected(e,t){const i={itemType:this._getItemType(e)};this.markStep(this._convertCommandToStep(t),i)}_getItemType(e){return a.default.isMediaItem(e)?r.GalleryViewMode[r.GalleryViewMode.Media]:this._isLinkItem(e)?r.GalleryViewMode[r.GalleryViewMode.Links]:this._isFileItem(e)?r.GalleryViewMode[r.GalleryViewMode.Files]:e.messagetype}_isLinkItem(e){return n.getMessageTypeGroup(e)===n.MessageTypeGroups.SwiftCard||e.messagetype===n.MessageTypes.UriObject||e.hasUrlPreviewMetadata()}_isFileItem(e){return n.getMessageTypeGroup(e)===n.MessageTypeGroups.UriFile}_convertCommandToStep(e){switch(e){case c.CommandTypes.Forward:return g.ItemForwarded;case c.CommandTypes.Remove:return g.ItemRemoved;case c.CommandTypes.ViewInChat:return g.ViewedItemInChat;case c.CommandTypes.SaveAsFile:case c.CommandTypes.SaveAsMedia:case c.CommandTypes.SaveMedia:return g.ItemSaved;case c.CommandTypes.Copy:case c.CommandTypes.CopyImage:return g.ItemCopied;case c.CommandTypes.CopyLink:return g.LinkCopied;case c.CommandTypes.OpenFileLocation:case c.CommandTypes.OpenMediaLocation:return g.ItemViewed;case c.CommandTypes.Report:return g.ItemReported;default:return s.warn(o.LogTraceArea.GenericUnsafe,"Unsupported command passed to the gallery telemetry scenario: "+c.CommandTypes[e]),g.Unknown}}}t.GalleryTelemetryScenario=h},66199:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalHotkeyInvokedEvent=t.GlobalHotkeyUnregisteredEvent=t.GlobalHotkeyRegisteredEvent=void 0;const n=i(349);var o;!function(e){e[e.Registered=0]="Registered",e[e.Unregistered=1]="Unregistered",e[e.Invoked=2]="Invoked"}(o||(o={}));class s extends n.TelemetryEventBase{constructor(e,t,i){super(),this._action=e,this._hotkey=t,this._hotkeyAccelerator=i}getEventName(){return"all_global_hotkeys"}getAttributes(){const e=super.getAttributes();return e.Action=o[this._action],e.Hotkey=this._hotkey,this._hotkeyAccelerator&&(e.HotkeyAccelerator=this._hotkeyAccelerator),e}}t.GlobalHotkeyRegisteredEvent=class extends s{constructor(e,t,i){super(o.Registered,t,i),this._wasRegistrationSuccessful=e}getAttributes(){const e=super.getAttributes();return e.WasSuccessful=this._wasRegistrationSuccessful,e}};t.GlobalHotkeyUnregisteredEvent=class extends s{constructor(e,t,i){super(o.Unregistered,t,i),this._wasUnregistrationSuccessful=e}getAttributes(){const e=super.getAttributes();return e.WasSuccessful=this._wasUnregistrationSuccessful,e}};t.GlobalHotkeyInvokedEvent=class extends s{constructor(e,t){super(o.Invoked,e,t)}}},91771:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InviteMorePeopleButtonClickedEvent=t.ShareGroupButtonClickedEvent=t.getShareButtonOriginFromSearchResultsListOrigin=t.InviteMorePeopleButtonOrigin=t.ShareGroupButtonOrigin=void 0;const n=i(46096),o=i(349);var s,a,r;!function(e){e[e.MessageStream=0]="MessageStream",e[e.GroupProfile=1]="GroupProfile",e[e.ConversationHeader=2]="ConversationHeader",e[e.AddToGroup=3]="AddToGroup",e[e.QuickCallPanel=4]="QuickCallPanel",e[e.CallRosterPanel=5]="CallRosterPanel",e[e.Unknown=6]="Unknown"}(s=t.ShareGroupButtonOrigin||(t.ShareGroupButtonOrigin={})),function(e){e[e.MessageStream=0]="MessageStream"}(a=t.InviteMorePeopleButtonOrigin||(t.InviteMorePeopleButtonOrigin={})),function(e){e[e.ShareGroupButtonClicked=0]="ShareGroupButtonClicked",e[e.InviteMorePeopleButtonClicked=1]="InviteMorePeopleButtonClicked"}(r||(r={})),t.getShareButtonOriginFromSearchResultsListOrigin=function(e){let t;switch(e){case n.SearchResultsListOrigin.AddingParticipantsToGroup:t=s.AddToGroup;break;case n.SearchResultsListOrigin.QuickCallPanel:t=s.QuickCallPanel;break;default:t=s.Unknown}return t};class l extends o.TelemetryEventBase{constructor(e){super(),this._action=e}getEventName(){return"people_group_engagement"}getAttributes(){let e=super.getAttributes();return e.Action=r[this._action],e}}t.ShareGroupButtonClickedEvent=class extends l{constructor(e){super(r.ShareGroupButtonClicked),this._origin=e}getAttributes(){let e=super.getAttributes();return e.Origin=s[this._origin],e}};t.InviteMorePeopleButtonClickedEvent=class extends l{constructor(e){super(r.InviteMorePeopleButtonClicked),this._origin=e}getAttributes(){let e=super.getAttributes();return e.Origin=a[this._origin],e}}},8052:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GuestUpsellTelemetryEventAction=void 0;const n=i(96486),o=i(88208),s=i(349);var a;!function(e){e[e.UpsellPanelPresented=1]="UpsellPanelPresented",e[e.SisuStarted=2]="SisuStarted",e[e.SisuFinished=3]="SisuFinished",e[e.MeetNowFlowStarted=4]="MeetNowFlowStarted"}(a=t.GuestUpsellTelemetryEventAction||(t.GuestUpsellTelemetryEventAction={}));class r extends s.TelemetryEventBase{constructor(e){super(),this.props=e}getEventName(){return"engagement_guest_upsell"}getAttributes(){let e=super.getAttributes();return e.Action=a[this.props.action]||"UnknownAction",this.props.upsellType&&(e.Type=this.props.upsellType),n.isUndefined(this.props.isSignUp)||(e.SisuType=o.AppEntryMethod.Unknown),this.props.meetNowPartner&&(e.Partner=this.props.meetNowPartner),e}}t.default=r},13873:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HubPlusButtonEvent=void 0;const n=i(349);class o extends n.TelemetryEventBase{constructor(e){super(),this._action=e}getEventName(){return"all_hub_plus_button"}getAttributes(){const e=super.getAttributes();return e.Action=this._action,e}}t.HubPlusButtonEvent=o},29138:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IntegrationStoreTelemetryEvent=t.IntegrationActionTelemetryEvent=t.IntegrationErrorEvent=t.NativeIntegrationLoadEvent=t.WebIntegrationLoadEvent=t.IntegrationLoadEvent=t.NativeIntegrationLaunchEvent=t.WebIntegrationLaunchEvent=t.IntegrationClosedEvent=t.IntegrationLaunchEvent=void 0;const n=i(96486),o=i(46096),s=i(9343),a=i(40363),r=i(349);class l extends r.TelemetryEventBase{getEventName(){return"caap_integration"}getAttributes(){let e=super.getAttributes();return e=n.merge(e,this.getIntegrationActionAttributes()),e}getIntegrationActionAttributes(){return{Action:this.getActionName()}}}class c extends l{constructor(e,t){super(),this._integration=e,this._integrationName=t}getActionName(){return"IntegrationLaunched"}getAttributes(){const e=super.getAttributes();return e.Integration=this._integration,this._integrationName&&(e.IntegrationName=this._integrationName),e}}t.IntegrationLaunchEvent=c;t.IntegrationClosedEvent=class extends l{constructor(e,t){super(),this._integration=e,this._integrationName=t}getActionName(){return"IntegrationClosed"}getAttributes(){const e=super.getAttributes();return e.Integration=this._integration,this._integrationName&&(e.IntegrationName=this._integrationName),e}};t.WebIntegrationLaunchEvent=class extends c{constructor(e,t,i){super(e,t),this._origin=i}getAttributes(){const e=super.getAttributes();return e.Origin=o.BrowserOrigin[this._origin],e.IsNative=!1,e}};t.NativeIntegrationLaunchEvent=class extends c{constructor(e,t,i){super(e,t),this._origin=i}getAttributes(){const e=super.getAttributes();return e.Origin=s.AddinOrigin[this._origin],e.IsNative=!0,e}};class d extends l{constructor(e,t,i,n,o){super(),this._integration=e,this._integrationName=t,this._urlLaunchedFromFindPanel=i,this._isFirstPage=n,this._pageLoadTimeInMs=o}getActionName(){return"IntegrationLoaded"}getAttributes(){const e=super.getAttributes();return e.Integration=this._integration,this._integrationName&&(e.IntegrationName=this._integrationName),e.IsUrlLaunchedFromFindPanel=this._urlLaunchedFromFindPanel,e.IsFirstPage=this._isFirstPage,e.PageLoadDuration=this._pageLoadTimeInMs,e}}t.IntegrationLoadEvent=d;t.WebIntegrationLoadEvent=class extends d{constructor(e,t,i,n,o,s){super(e,t,i,n,o),this._origin=s}getAttributes(){const e=super.getAttributes();return e.Origin=o.BrowserOrigin[this._origin],e.IsNative=!1,e}};t.NativeIntegrationLoadEvent=class extends d{constructor(e,t,i,n,o){super(e,t,i,n,0),this._origin=o}getAttributes(){const e=super.getAttributes();return e.Origin=s.AddinOrigin[this._origin],e.IsNative=!0,e}};t.IntegrationErrorEvent=class extends l{constructor(e,t,i,n,o,s){super(),this._integration=e,this._integrationName=t,this._urlLaunchedFromFindPanel=i,this._origin=n,this._isFirstPage=o,this._errorCode=s}getActionName(){return"IntegrationError"}getAttributes(){const e=super.getAttributes();return e.Integration=this._integration,this._integrationName&&(e.IntegrationName=this._integrationName),e.IsUrlLaunchedFromFindPanel=this._urlLaunchedFromFindPanel,e.Origin=o.BrowserOrigin[this._origin],e.IsFirstPage=this._isFirstPage,e.ErrorCode=this._errorCode,e}};class u extends l{constructor(e,t){super(),this._integration=e,this._actionName=t}getEventName(){return"caap_"+this._integration}getAriaTenantTokenOverride(){return a.default.getAriaAddinTenantToken()}getIntegrationActionAttributes(){return n.merge({Integration:this._integration},super.getIntegrationActionAttributes())}getActionName(){return this._actionName}}t.IntegrationActionTelemetryEvent=u;t.IntegrationStoreTelemetryEvent=class extends u{constructor(e,t,i,n,o,s){super(e,"Store"+t),this._isSuccessful=i,this._latencyMs=n,this._errorCode=o,this._errorMsg=s}getIntegrationActionAttributes(){return n.merge({IsSuccessful:this._isSuccessful,LatencyDuration:this._latencyMs,ErrorCode:this._errorCode,"ErrorMessage:":this._errorMsg},super.getIntegrationActionAttributes())}}},35114:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FingerPrintCheckEvent=t.InviteFriendsButtonClicked=t.InviteRevokedEvent=t.InviteSharedEvent=t.ShareType=t.FingerPrintResult=t.InviteLinkOrigin=void 0;const n=i(96486),o=i(36076),s=i(71830),a=i(349);var r,l;!function(e){e[e.UserProfile=0]="UserProfile",e[e.GroupProfile=1]="GroupProfile",e[e.AddToGroup=2]="AddToGroup",e[e.AddContact=3]="AddContact",e[e.MoreContactsPanel=4]="MoreContactsPanel",e[e.MessageStream=5]="MessageStream",e[e.DesktopNewActionPicker=6]="DesktopNewActionPicker",e[e.NewChatInvite=7]="NewChatInvite",e[e.QuickCallPanel=8]="QuickCallPanel",e[e.CallRosterPanel=9]="CallRosterPanel",e[e.LandingScreen=10]="LandingScreen",e[e.MeProfile=11]="MeProfile",e[e.Unknown=12]="Unknown",e[e.MeControl=13]="MeControl"}(r=t.InviteLinkOrigin||(t.InviteLinkOrigin={})),function(e){e[e.NotRecognized=0]="NotRecognized",e[e.Recognized=1]="Recognized",e[e.TimedOut=2]="TimedOut"}(l=t.FingerPrintResult||(t.FingerPrintResult={}));class c extends a.TelemetryEventBase{constructor(e,t){super(),this._mri=e,this._origin=t}getAttributes(){const e=super.getAttributes();return e.Origin=r[this._origin],e.InviteType=(0,s.isThread)(this._mri)?"group":"user",e}}!function(e){e.Clipboard="clipboard",e.Email="email",e.Native="native",e.QR="qr"}(t.ShareType||(t.ShareType={}));class d extends c{constructor(e,t,i,n){super(t,n),this._inviteLink=e,this._shareType=i}getEventName(){return"people_invite_link_shared"}getAttributes(){const e=super.getAttributes();return e.ShareType=this._shareType,e}getPiiAttributes(){const e=super.getPiiAttributes();return e.InviteLink={value:this._inviteLink,piiKind:o.AWTPiiKind.Uri},e}}t.InviteSharedEvent=d;t.InviteRevokedEvent=class extends c{constructor(e,t,i,n,o,s){super(e,t),this._requestDuration=i,this._isSuccess=n,this._errorStatusCode=o,this._errorMessage=s}getEventName(){return"people_invite_link_revoked"}getAttributes(){const e=super.getAttributes();return e.RequestDuration=this._requestDuration,e.IsSuccess=this._isSuccess,n.isUndefined(this._errorStatusCode)||(e.ErrorCode=this._errorStatusCode),n.isUndefined(this._errorMessage)||(e.ErrorMessage=this._errorMessage),e}};t.InviteFriendsButtonClicked=class extends d{getActionName(){return"InviteFriendsButtonClicked"}};class u extends a.TelemetryEventBase{constructor(e){super(),this._result=e}getEventName(){return"people_device_fingerprint_checked"}getAttributes(){const e=super.getAttributes();return e.Result=l[this._result],e}}t.FingerPrintCheckEvent=u},52284:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JoinLinkRetrievalServiceErrorEvent=t.JoinLinkRetrievalServiceSuccessEvent=t.ShortIdResolutionServiceErrorEvent=t.ShortIdResolutionServiceSuccessEvent=t.JoinLinkResolutionErrorEvent=t.GuestMeetingCreationServiceErrorEvent=t.GuestLoginAttemptEvent=t.GuestLoginAvailableEvent=t.GuestCreationSuccessEvent=t.GuestCreationServiceErrorEvent=t.WaitForJoinedKnowledgeTimedOutEvent=t.JoinAddMemberToThreadErrorEvent=t.JoinGroupConversationEvent=t.JoinLinkOrigin=void 0;const n=i(36076),o=i(96486),s=i(46096),a=i(349);var r;!function(e){e[e.WebLauncher=0]="WebLauncher",e[e.InClient=1]="InClient",e[e.Campaign=2]="Campaign",e[e.ExternalOther=3]="ExternalOther",e[e.QRCode=4]="QRCode",e[e.Unknown=5]="Unknown"}(r=t.JoinLinkOrigin||(t.JoinLinkOrigin={}));class l extends a.TelemetryEventBase{constructor(e){super(),this.props=e}getEventName(){return"join_conversation"}getAttributes(){const e=super.getAttributes();return e.Action=this.getAction(),e.JoinLinkOrigin=r[this.props.joinLinkOrigin],e.PreSisu=this.props.preSisu,e.NavigationConversationOrigin=s.NavigationConversationOrigin[this.props.navigationConversationOrigin],e.ConversationId=this.props.conversationId,o.isUndefined(this.props.browserOrigin)||(e.BrowserOrigin=s.BrowserOrigin[this.props.browserOrigin]),e}}t.JoinGroupConversationEvent=class extends l{constructor(e){super(e),this.props=e}getAction(){return"JoinGroupConversation"}getAttributes(){const e=super.getAttributes();return e.ExistingMember=this.props.existingMember,e}};t.JoinAddMemberToThreadErrorEvent=class extends l{constructor(e){super(e),this.props=e}getAction(){return"AddMemberToThreadError"}getAttributes(){const e=super.getAttributes();return e.StatusCode=this.props.statusCode,e.TimedOut=this.props.timedOut,o.isUndefined(this.props.statusText)||(e.StatusText=this.props.statusText),o.isUndefined(this.props.contextId)||(e.ContextId=this.props.contextId),o.isUndefined(this.props.date)||(e.Date=this.props.date),o.isUndefined(this.props.errorCode)||(e.ErrorCode=this.props.errorCode),o.isUndefined(this.props.errorMessage)||(e.ErrorMessage=this.props.errorMessage),e}};t.WaitForJoinedKnowledgeTimedOutEvent=class extends l{constructor(e){super(e),this.props=e}getAction(){return"WaitForJoinedKnowledgeTimedOut"}getAttributes(){const e=super.getAttributes();return e.TimeoutDurationInMs=this.props.timeoutDurationInMs,e}};class c extends a.TelemetryEventBase{getEventName(){return"join_guest"}getLoggedOutSendingPolicy(){return a.TelemetryEventLoggedOutPolicy.SendNow}getAttributes(){const e=super.getAttributes();return e.Action=this.getAction(),e}}class d extends c{constructor(e){super(),this.props=e}getAction(){return"GuestCreationError"}getAttributes(){const e=super.getAttributes();return o.isUndefined(this.props.requestId)||(e.RequestId=this.props.requestId),e.TimedOut=this.props.timedOut,e.StatusCode=this.props.statusCode,e.Url=this.props.url,e}}t.GuestCreationServiceErrorEvent=d;t.GuestCreationSuccessEvent=class extends c{getAction(){return"GuestCreationSuccess"}};t.GuestLoginAvailableEvent=class extends c{getAction(){return"GuestLoginAvailable"}};t.GuestLoginAttemptEvent=class extends c{getAction(){return"GuestLoginAttempt"}};t.GuestMeetingCreationServiceErrorEvent=class extends d{getAction(){return"GuestMeetingCreationServiceError"}};class u extends a.TelemetryEventBase{getEventName(){return"join_link_resolution"}getAttributes(){const e=super.getAttributes();return e.Action=this.getAction(),e}}t.JoinLinkResolutionErrorEvent=class extends u{constructor(e){super(),this.props=e}getAction(){return"JoinLinkResolutionError"}getAttributes(){const e=super.getAttributes();return e.ResolutionError=this.props.resolutionError,e}getPiiAttributes(){const e=super.getPiiAttributes();return e.UriToResolve={value:this.props.uriToResolve,piiKind:n.AWTPiiKind.Uri},e}};class g extends u{constructor(e){super(),this.props=e}getAttributes(){const e=super.getAttributes();return this.props.convId&&(e.ConversationId=this.props.convId),e}getPiiAttributes(){const e=super.getPiiAttributes();return e.ShortId={value:this.props.shortId,piiKind:n.AWTPiiKind.Identity},e}}t.ShortIdResolutionServiceSuccessEvent=class extends g{getAction(){return"ShortIdResolutionServiceSuccess"}};t.ShortIdResolutionServiceErrorEvent=class extends g{constructor(e){super(e),this.props=e}getAction(){return"ShortIdResolutionServiceError"}getAttributes(){const e=super.getAttributes();return o.isUndefined(this.props.requestId)||(e.RequestId=this.props.requestId),e.TimedOut=this.props.timedOut,e.StatusCode=this.props.statusCode,e}};class h extends a.TelemetryEventBase{getEventName(){return"join_link_retrieval"}getAttributes(){const e=super.getAttributes();return e.Action=this.getAction(),e}}class p extends h{constructor(e){super(),this.props=e}getAttributes(){const e=super.getAttributes();return e.ConversationId=this.props.conversationId,e}getPiiAttributes(){const e=super.getPiiAttributes();return this.props.shortId&&(e.ShortId={value:this.props.shortId,piiKind:n.AWTPiiKind.Identity}),e}}t.JoinLinkRetrievalServiceSuccessEvent=class extends p{getAction(){return"JoinLinkRetrievalServiceSuccess"}};t.JoinLinkRetrievalServiceErrorEvent=class extends p{constructor(e){super(e),this.props=e}getAction(){return"JoinLinkRetrievalServiceError"}getAttributes(){const e=super.getAttributes();return o.isUndefined(this.props.requestId)||(e.RequestId=this.props.requestId),e.IsTimedOut=this.props.timedOut,e.StatusCode=this.props.statusCode,e.Url=this.props.url,e}}},32806:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getLastReportedMaxEntryPoint=t.getMaxEntryPoint=t.trackEntryPoint=t.startingUi=void 0;const n=i(16778),o=i(60),s=i(89391),a=i(46096),r=i(46096),l=i(36237),c=i(16724),d=i(6819),u=i(30428),g=i(40363),h=i(12770);let p,m,S,C,f,y=0,_=!1;function v(){const e=n.App.getActivationState()===n.Types.AppActivationState.Active;e!==_&&(_=e,e?T(a.AppEntryPoint.Foregrounded):p&&(h.default.clearTimeout(p),b()))}function b(){p=void 0;let e=d.default.getMccCode(),t=d.default.getMncCode();e&&t||(e=g.default.getMccCode(),t=g.default.getMncCode()),l.log(r.LogTraceArea.Startup,"Sending KpiActivityStarted: "+a.AppEntryPoint[S]);const i=new c.KpiActivityStarted({startTime:C,entryPoint:S,isSuggestionsEnabled:u.default.getSuggestionsEnabled(),mccCode:e,mncCode:t,startUiParams:f});l.track(i),C=void 0,S=void 0,f={}}function T(e){(!S||e>S)&&(S=e,m=S,y=Date.now()+s.default.getS4LSisuFeatures().msaConvergenceFlags.entryPointStalenessWindow,C=Date.now()),p||(p=h.default.setTimeout(b,1e4))}t.startingUi=function(e){T(a.AppEntryPoint.Opened),o.default.subscribeForChanges("KpiActivityStartedTelemetryService",v),v(),f=e},t.trackEntryPoint=T,t.getMaxEntryPoint=function(){return S},t.getLastReportedMaxEntryPoint=function(e=!1){return S||(Date.now()<y||e?m:void 0)}},16724:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileReceived=t.FileSent=t.KpiLongPollFailure=t.KpiLongPoll=t.KpiChatSyncFailure=t.KpiChatSync=t.KpiAppStart=t.KpiActivityStarted=t.KpiMessageDelivered=t.KpiMessageSent=void 0;const n=i(36076),o=i(96486),s=i(89391),a=i(25638),r=i(60021),l=i(51077),c=i(71830),d=i(40276),u=i(46096),g=i(18078),h=i(80457),p=i(40363),m=i(349),S=i(35370);class C extends m.TelemetryEventBase{getAriaTenantTokenOverride(){return p.default.getAriaTelemetryTenantToken()}shouldSend(){const e=this.getTelemetryConfig();return!!e&&e.enabled}getAttributes(){return o.assign(super.getAttributes(),{DeviceInfo_Os_Version:p.default.getOSVersion(),Client_Name:"SkypeX"})}getEventTraceMode(){return m.TelemetryTraceMode.EventName}}class f extends C{constructor(e,t,i,n,o,s,a){super(),this._conversationId=e,this._cmid=t,this._creator=i,this._registrationId=n,this._chatServiceEndpointInfo=o,this._serverMessageId=s,this._hasAnyCall=a}shouldSend(){if(!super.shouldSend())return!1;if(!this._cmid)return!1;const e=this.getTelemetryConfig();return S.shouldTrackMessage(this._cmid,e)}getCorrelationAttributes(){return{Message_Correlation_Id:r.getCorrelationIdFromMessageParts(this._creator,this._conversationId,this._cmid)}}getAttributes(){const e=1/(this.getTelemetryConfig().percentage/100),t={Client_Message_Id:this._cmid||"",Event_Sampling_Value:e,Registration_Id:this._registrationId||"",Endpoint_Id:this._chatServiceEndpointInfo&&this._chatServiceEndpointInfo.id||"",Server_Message_Id:this._serverMessageId||"",IsAnyCallOngoing:this._hasAnyCall,MriNamespace:c.getMriNamespace(this._conversationId)},i=c.getThreadSuffix(this._conversationId);i&&(t.ThreadSuffix=i);const n=S.getTrackableConversationId(this._conversationId);return n&&(t.Conversation_Id=n),o.assign({},super.getAttributes(),t)}}class y extends C{shouldSend(){if(super.shouldSend()){if(void 0===this._shouldRandomlySend){const e=this.getTelemetryConfig();this._shouldRandomlySend=100*d.random()<e.percentage}return this._shouldRandomlySend}return!1}}t.KpiMessageSent=class extends f{constructor(e,t,i,n,o,s,a,r,l,d,u,h,p,m,S,C,f,y){super(e,t.clientmessageid,c.skypeIdToMri(g.default.getSkypeId()),l,d,p,m),this._message=t,this._conversationMemberCount=i,this._queueTime=n,this._blockedTime=o,this._sendingTime=s,this._retryCount=a,this._rawContentLength=r,this._contextId=u,this._date=h,this._backgroundedTime=S,this._hasAppStart=C,this._connectionType=f,this._triggeredBy=y}getEventName(){return"kpi_message_sent"}getTelemetryConfig(){return m.TelemetryConfig.kpi_message_sent}getAttributes(){let e=super.getAttributes();return e.Sending_Time=this._sendingTime,e.Queue_Time=this._queueTime,e.Blocked_Time=this._blockedTime,e.Retry_Count=this._retryCount,e.context_id=this._contextId,e.date=this._date,e.BackgroundedTime=this._backgroundedTime,e.HasAppRestart=this._hasAppStart,e.ConnectionType=u.ChatServiceConnectionType[this._connectionType],e.TriggeredBy=h.PostingTrigger[this._triggeredBy],e=S.getCommonAttributesMessageSent(e,this._conversationId,this._eventCreationTime,this._message,this._conversationMemberCount,this._rawContentLength),this._message.properties&&this._message.properties[l.MessageProperties.AlbumId]&&(e.AlbumId=this._message.properties[l.MessageProperties.AlbumId].toString()),e}getEventPriority(){return n.AWTEventPriority.High}};t.KpiMessageDelivered=class extends f{constructor(e,t,i,n,o,s,a,r,l,c){super(e.conversationId,n,e.creator,o,s,e.getOriginalServerId(),r),this._message=e,this._messageOrigin=t,this._notificationResult=i,this._messageAlreadySeen=a,this._originsCount=l,this._correlationVector=c}shouldSend(){return!this._message.isMessageLie()&&!this._message.isPropertyLie()&&(this._messageOrigin===u.MessageOrigin.ChatSync||this._messageOrigin===u.MessageOrigin.LongPoll||this._messageOrigin===u.MessageOrigin.PushNotification||this._messageOrigin===u.MessageOrigin.Trouter)&&super.shouldSend()}getEventName(){return"kpi_message_delivered"}getTelemetryConfig(){return m.TelemetryConfig.kpi_message_delivered}getAttributes(){const e=Number(this._message.getLatestServerMessageVersion()),t=e?this._eventCreationTime-e:"",i=o.assign({},super.getAttributes(),{Group_Conversation:c.isGroupConversation(this._message.conversationId),IsEncryptedConversation:c.isEncryptedThread(this._message.conversationId),Delivery_Timestamp:this._eventCreationTime,Message_Origin:u.MessageOrigin[this._messageOrigin],My_Message:g.default.isMyMri(this._message.creator),Notification_Result:u.MessageProcessResult[this._notificationResult],MessageAlreadySeen:void 0===this._messageAlreadySeen?"":this._messageAlreadySeen,DeliveryDelay:t,Time_From_Startup:Date.now()-p.default.getAppInitTime(),Message_Type:S.getMessageTypeName(this._message,this._message.creator,this._message.conversationId),OriginsCount:this._originsCount,MessageRawType:S.getMessageRawTypeName(this._message,this._message.creator,this._message.conversationId)});return this._message.hasAlbumId()&&(i.AlbumId=this._message.getAlbumId()),this._correlationVector&&(i.CorrelationVector=this._correlationVector),i}};t.KpiActivityStarted=class extends C{constructor(e){super(),this._params=e}getEventName(){return"kpi_inapp_activity_start"}getTelemetryConfig(){return m.TelemetryConfig.kpi_inapp_activity_start}getAttributes(){const e=o.assign(super.getAttributes(),{Foreground_Start_Time:this._params.startTime,Entry_Point:u.AppEntryPoint[this._params.entryPoint],IsSuggestionsEnabled:this._params.isSuggestionsEnabled,NetworkMCCCode:this._params.mccCode||"",NetworkMNCCode:this._params.mncCode||""}),{meetNowAction:t,meetNowSource:i,correlationId:n}=this._params.startUiParams;t&&(e.MeetNowAction=t),i&&(e.MeetNowSource=i),n&&(e.CorrelationId=n),this._params.startUiParams.conversationId&&(e.ConversationId=this._params.startUiParams.conversationId);const a=s.default.getS4LMessagingFeaturesNoSubscription().ued;return a&&a.enabled&&a.consumeEvents&&(e.IsUedEventProcessingEnabled=!0),e}};t.KpiAppStart=class extends C{getEventName(){return"kpi_client_init"}getTelemetryConfig(){return m.TelemetryConfig.kpi_client_init}getAttributes(){return o.assign(super.getAttributes(),{Init_Timestamp:p.default.getAppInitTime()})}};t.KpiChatSync=class extends y{constructor(){super(...arguments),this._backgrounded=!1}getEventName(){return"kpi_chatsync_complete"}getTelemetryConfig(){return m.TelemetryConfig.kpi_chatsync_complete}getAttributes(){const e=o.assign(super.getAttributes(),{sync_time:this._endTime-this._eventCreationTime,ran_in_background:this._backgrounded});return this._syncData&&o.assign(e,{synced_conversations:this._syncData.conversationsCount,synced_messages:this._syncData.messagesCount,is_first_sync:this._syncData.isFirstSync,is_full_sync:this._syncData.isFullSync}),e}endSync(e){this._endTime=Date.now(),this._syncData=e}markBackgrounded(){this._backgrounded=!0}};t.KpiChatSyncFailure=class extends y{constructor(e){super(),this._responseCode=e}getEventName(){return"kpi_chatsync_failed"}getTelemetryConfig(){return m.TelemetryConfig.kpi_chatsync_failed}getAttributes(){return o.assign(super.getAttributes(),{response_code:this._responseCode})}};t.KpiLongPoll=class extends y{constructor(e,t,i){super(),this._events=e,this._requestDuration=t,this._activeTimeout=i}getEventName(){return"kpi_longpoll_complete"}getTelemetryConfig(){return m.TelemetryConfig.kpi_longpoll_complete}getAttributes(){const e={EventCountTotal:this._events.length,RequestDuration:this._requestDuration};return o.isUndefined(this._activeTimeout)||(e.ActiveTimeout=this._activeTimeout),o.each(this._events,(t=>{const i="EventCount"+this._getNormalizedResourceType(t);e[i]?e[i]=e[i]+1:e[i]=1})),o.assign({},super.getAttributes(),e)}_getNormalizedResourceType(e){switch(e.resourceType){case"CustomUserProperties":case"ConversationUpdate":case"ThreadUpdate":case"NewMessage":case"MessageUpdate":case"EndpointPresence":case"UserPresence":case"ReadReceipt":case"SignalRelay":return e.resourceType;default:return"Unknown"}}};t.KpiLongPollFailure=class extends y{constructor(e,t,i=!0,n){super(),this._responseCode=e,this._requestDuration=t,this._processedEvents=i,this._activeTimeout=n}getEventName(){return"kpi_longpoll_failed"}getTelemetryConfig(){return m.TelemetryConfig.kpi_longpoll_failed}getAttributes(){const e={ResponseCode:this._responseCode,RequestDuration:this._requestDuration,DidProcessEvents:this._processedEvents};return o.isUndefined(this._activeTimeout)||(e.ActiveTimeout=this._activeTimeout),o.assign({},super.getAttributes(),e)}};t.FileSent=class extends C{constructor(e,t,i,n,o,s,a){super(),this._conversationIds=e,this._source=t,this._extension=i,this._fileSize=n,this._viewId=o,this._documentId=s,this._messagesForPosting=a,this._failureReason=u.MessagingFailureReason.None,this._uploadStartTime=-1,this._uploadDuration=-1}getEventName(){return"file_sent"}getTelemetryConfig(){return m.TelemetryConfig.file_sent}getCorrelationAttributes(){return super.getCorrelationAttributes()}getAttributes(){const e=o.keys(this._messagesForPosting),t=super.getAttributes(),i=e[0];return t.Message_Type=S.getMessageTypeName(this._messagesForPosting[i],g.default.getSkypeMri(),i),t.Size=this._fileSize?this._fileSize:-1,t.Source=u.PostSource[this._source],t.Success=this._success,t.UploadDuration=this._uploadDuration,t.Extension=this._extension,t.NumOfConvs=this._conversationIds.length,t.Reason=u.MessagingFailureReason[this._failureReason],t.ViewId=this._viewId,t.DocId=this._documentId,t.FinishedAttemptsCount=this._finishedAttemptsSoFar||"",t.ResponseStatusCode=this._responseStatusCode||"",t}setSuccess(e,t,i,n,o,s){this._success=e,this._failureReason=t,this._finishedAttemptsSoFar=i,this._responseStatusCode=n,this._uploadStartTime=o,this._uploadDuration=s}};t.FileReceived=class extends C{constructor(e,t,i){super(),this._uri=e,this._size=t,this._extension=i,this._downloadDuration=-1,this._downloadStartTime=-1}getEventName(){return"file_received"}getTelemetryConfig(){return m.TelemetryConfig.file_received}getAttributes(){const e=new a.default(this._uri);let t;return this._downloadDuration>0&&this._size&&(t=1e3*this._size/(1024*this._downloadDuration)),o.assign(super.getAttributes(),{Success:this._success||"",DownloadDuration:this._downloadDuration,Intent:this._intent?u.MediaDownloadIntent[this._intent]:"",MediaProfile:this._mediaProfile||"",Extension:this._extension||"",ViewId:e.getViewId()||"",DocId:e.getDocumentId()||"",FailureReason:u.MessagingFailureReason[this._failureReason],Size:this._size||"",DownloadSpeed:t||"",FinishedAttemptsCount:this._finishedAttemptsSoFar||"",ResponseStatusCode:this._responseStatusCode||"",ErrorInfo:this._errorInfo||""})}setSuccess(e,t=u.MessagingFailureReason.None,i=1,n,o=""){this._success=e,this._failureReason=t,this._finishedAttemptsSoFar=i,this._responseStatusCode=n,this._errorInfo=o}setIntent(e){this._intent=e}setMediaProfile(e){this._mediaProfile=e}startDownload(){this._downloadStartTime=Date.now()}endDownload(){this._downloadDuration=Date.now()-this._downloadStartTime}setDownloadDuration(e){this._downloadDuration=e}}},14532:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageUIChangedEvent=t.LanguageSlashCommandChangedEvent=void 0;const n=i(40363),o=i(349);class s extends o.TelemetryEventBase{constructor(e,t){super(),this._fromLlcc=e,this._toLlcc=t}getEventName(){return"language"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e.FromLlcc=this._fromLlcc,e.ToLlcc=this._toLlcc,e.CurrentCountryCode=n.default.getCountryCode()||"Unknown",e}}t.LanguageSlashCommandChangedEvent=class extends s{getActionName(){return"slashcommand_change_language"}};t.LanguageUIChangedEvent=class extends s{getActionName(){return"ui_change_language"}}},54086:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LensSaveiOS=t.LensLaunchiOS=t.LensSaveAndroid=t.LensLaunchAndroid=void 0;const n=i(349);class o extends n.TelemetryEventBase{constructor(){super()}getAttributes(){return super.getAttributes()}}t.LensLaunchAndroid=class extends o{constructor(e){super(),this._launchEvent=e}getEventName(){return"Office_Lens_LensSdk_LaunchLensAndroid"}getAttributes(){let e=super.getAttributes();return e.SessionId=this._launchEvent.SessionId||"",e.LensSdkVersion=this._launchEvent.LensSdkVersion||"",e.TelemetryEventTimestamp=this._launchEvent.TelemetryEventTimestamp||"",e.CurrentWorkFlowType=this._launchEvent.CurrentWorkFlowType||"",e.SDKMode=this._launchEvent.SDKMode||"",e.LaunchPerf=this._launchEvent.LaunchPerf||"",e.CameraXBindUsecasesToPreview=this._launchEvent.CameraXBindUsecasesToPreview||"",e.CameraXBindUsecasesApi=this._launchEvent.CameraXBindUsecasesApi||"",e.IsEmbeddedLaunch=this._launchEvent.IsEmbeddedLaunch||"",e.RecoveryMode=this._launchEvent.RecoveryMode||"",e.IsDexModeEnabled=this._launchEvent.IsDexModeEnabled||"",e.IsInterimCropEnabled=this._launchEvent.IsInterimCropEnabled||"",e.IsMultiWindowEnabled=this._launchEvent.IsMultiWindowEnabled||"",e.IsTalkBackEnabled=this._launchEvent.IsTalkBackEnabled||"",e}};t.LensSaveAndroid=class extends o{constructor(e){super(),this._launchEvent=e}getEventName(){return"Office_Lens_LensSdk_SaveMediaAndroid"}getAttributes(){let e=super.getAttributes();return e.SessionId=this._launchEvent.SessionId||"",e.LensSdkVersion=this._launchEvent.LensSdkVersion||"",e.TelemetryEventTimestamp=this._launchEvent.TelemetryEventTimestamp||"",e.CurrentWorkFlowType=this._launchEvent.CurrentWorkFlowType||"",e.MediaId=this._launchEvent.MediaId||"",e.Source=this._launchEvent.Source||"",e.ProcessMode=this._launchEvent.ProcessMode||"",e.Filter=this._launchEvent.Filter||"",e.FileSizeBeforeCleanUp=this._launchEvent.FileSizeBeforeCleanUp||"",e.ImageWidthBeforeCleanUp=this._launchEvent.ImageWidthBeforeCleanUp||"",e.ImageHeightBeforeCleanUp=this._launchEvent.ImageHeightBeforeCleanUp||"",e.FileSizeAfterCleanUp=this._launchEvent.FileSizeAfterCleanUp||"",e.ImageWidthAfterCleanUp=this._launchEvent.ImageWidthAfterCleanUp||"",e.ImageHeightAfterCleanUp=this._launchEvent.ImageHeightAfterCleanUp||"",e.FileSizeAfterSave=this._launchEvent.FileSizeAfterSave||"",e.Reason=this._launchEvent.Reason||"",e.Duration=this._launchEvent.Duration||0,e.TrimmedDuration=this._launchEvent.TrimmedDuration||0,e.OriginalVideoFileSize=this._launchEvent.OriginalVideoFileSize||0,e}};t.LensLaunchiOS=class extends o{constructor(e){super(),this._launchEvent=e}getEventName(){return"Office_Lens_LensSdk_LaunchLensiOS"}getAttributes(){let e=super.getAttributes();return e.Lens_SessionId=this._launchEvent.Lens_SessionId||"",e.version=this._launchEvent.version||"",e.currentWorkflowId=this._launchEvent.currentWorkflowId||"",e.LensEventName=this._launchEvent.LensEventName||"",e.defaultWorkflow=this._launchEvent.defaultWorkflow||"",e.imageDPI=this._launchEvent.imageDPI||"",e.isExistingUser=this._launchEvent.isExistingUser||"",e.isFirstLaunch=this._launchEvent.isFirstLaunch||"",e.isResumeSession=this._launchEvent.isResumeSession||"",e.launchReason=this._launchEvent.launchReason||"",e.launchWorkflowItem=this._launchEvent.launchWorkflowItem||"",e.mediaCompressionFactor=this._launchEvent.mediaCompressionFactor||"",e}};t.LensSaveiOS=class extends o{constructor(e){super(),this._saveEvent=e}getEventName(){return"Office_Lens_LensSdk_SaveMediaiOS"}getAttributes(){let e=super.getAttributes();return e.Lens_SessionId=this._saveEvent.Lens_SessionId||"",e.version=this._saveEvent.version||"",e.currentWorkflowId=this._saveEvent.currentWorkflowId||"",e.LensEventName=this._saveEvent.LensEventName||"",e.mediaId=this._saveEvent.mediaId||"",e.source=this._saveEvent.source||"",e.mode=this._saveEvent.mode||"",e.filter=this._saveEvent.filter||"",e.imageSize=this._saveEvent.imageSize||"",e.imageDPI=this._saveEvent.imageDPI||"",e.sizeinPixel=this._saveEvent.sizeinPixel||"",e.ImageEntity=this._saveEvent.ImageEntity||"",e.Ink=this._saveEvent.Ink||"",e.TextSticker=this._saveEvent.TextSticker||"",e.orignalImageSize=this._saveEvent.orignalImageSize||"",e.processedImageSize=this._saveEvent.processedImageSize||"",e.VideoEntity=this._saveEvent.VideoEntity||"",e.duration=this._saveEvent.duration||"",e}}},46705:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocationViewerOpenMaps=t.LocationViewerOpenGoogleMaps=t.LocationViewerOpen=t.LocationPickerResolveAddressFailed=t.LocationPickerResolveAddress=t.LocationPickerNearByFetchingFailed=t.LocationPickerNearbyClicked=t.LocationPickerNearByFetching=t.LocationPickerNavigationClose=t.LocationPickerNavigationOpen=t.LocationPickerSearchCancel=t.LocationPickerSearchStart=t.LocationPickerPermissionsChanged=t.LocationPickerGeolocationFetchedFailed=t.LocationPickerGeolocationFetched=t.LocationPickerSend=t.LocationAction=t.LocationStoreGeolocationFetchedFailed=t.LocationStoreGeolocationFetched=void 0;const n=i(60021),o=i(71830),s=i(349),a=i(35370);class r extends s.TelemetryEventBase{getEventName(){return"caap_location"}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}class l extends r{constructor(e,t){super(),this._isHighAccurracy=e,this._durationInMs=t}getActionName(){return"Fetched"}getAttributes(){const e=super.getAttributes();return e.IsFetchHighAccuracy=this._isHighAccurracy,e.FetchDuration=this._durationInMs,e}}t.LocationStoreGeolocationFetched=l;var c;t.LocationStoreGeolocationFetchedFailed=class extends l{constructor(e,t,i,n,o){super(e,t),this._isTimeout=i,this._isPermissionDenied=n,this._isPositionUnavailable=o}getActionName(){return"Failed"}getAttributes(){const e=super.getAttributes();return e.IsFailedTimeout=this._isTimeout,e.IsDeniedPermission=this._isPermissionDenied,e.IsUnavailablePosition=this._isPositionUnavailable,e}},function(e){e[e.LocationPickerSend=0]="LocationPickerSend",e[e.LocationPickerGeolocationFetched=1]="LocationPickerGeolocationFetched",e[e.LocationPickerGeolocationFetchedFailed=2]="LocationPickerGeolocationFetchedFailed",e[e.LocationPickerPermissionsChanged=3]="LocationPickerPermissionsChanged",e[e.LocationPickerSearchStart=4]="LocationPickerSearchStart",e[e.LocationPickerSearchCancel=5]="LocationPickerSearchCancel",e[e.LocationPickerNavigationOpen=6]="LocationPickerNavigationOpen",e[e.LocationPickerNavigationClose=7]="LocationPickerNavigationClose",e[e.LocationPickerNearByFetching=8]="LocationPickerNearByFetching",e[e.LocationPickerNearByClicked=9]="LocationPickerNearByClicked",e[e.LocationPickerNearByFetchingFailed=10]="LocationPickerNearByFetchingFailed",e[e.LocationPickerResolveAddress=11]="LocationPickerResolveAddress",e[e.LocationPickerResolveAddressFailed=12]="LocationPickerResolveAddressFailed",e[e.LocationViewerOpen=13]="LocationViewerOpen",e[e.LocationViewerOpenGoogleMaps=14]="LocationViewerOpenGoogleMaps",e[e.LocationViewerOpenMaps=15]="LocationViewerOpenMaps"}(c=t.LocationAction||(t.LocationAction={}));class d extends s.TelemetryEventBase{constructor(e){super(),this._action=e}getEventName(){return"messaging_location"}getEventTraceMode(){return s.TelemetryTraceMode.EventName}getAttributes(){const e=super.getAttributes();return e.Action=c[this._action],e}}class u extends d{constructor(e,t){super(e),this._type=t}getAttributes(){const e=super.getAttributes();return e.LocationPickerType=this._type,e}}t.LocationPickerSend=class extends u{constructor(e){super(c.LocationPickerSend,e)}};class g extends u{constructor(e,t,i,n,o,s){super(s||c.LocationPickerGeolocationFetched,e),this._originator=t,this._isHighAccurracy=i,this._isComponentMounted=n,this._durationInMs=o}getAttributes(){const e=super.getAttributes();return e.Originator=this._originator,e.IsHighaccurracy=this._isHighAccurracy,e.IsComponentMounted=this._isComponentMounted,e.DurationInMs=this._durationInMs,e}}t.LocationPickerGeolocationFetched=g;t.LocationPickerGeolocationFetchedFailed=class extends g{constructor(e,t,i,n,o,s,a,r){super(e,t,i,n,o,c.LocationPickerGeolocationFetchedFailed),this._isTimeout=s,this._isPermissionDenied=a,this._isPositionUnavailable=r}getAttributes(){const e=super.getAttributes();return e.IsTimeout=this._isTimeout,e.IsPermissionDenied=this._isPermissionDenied,e.IsPositionUnavailable=this._isPositionUnavailable,e}};t.LocationPickerPermissionsChanged=class extends u{constructor(e,t,i){super(c.LocationPickerPermissionsChanged,e),this._oldPermission=t,this._newPermission=i}getAttributes(){const e=super.getAttributes();return e.OldPermission=this._oldPermission,e.NewPermission=this._newPermission,e}};t.LocationPickerSearchStart=class extends u{constructor(e){super(c.LocationPickerSearchStart,e)}};t.LocationPickerSearchCancel=class extends u{constructor(e){super(c.LocationPickerSearchCancel,e)}};t.LocationPickerNavigationOpen=class extends u{constructor(e){super(c.LocationPickerNavigationOpen,e)}};t.LocationPickerNavigationClose=class extends u{constructor(e){super(c.LocationPickerNavigationClose,e)}};class h extends u{constructor(e,t,i,n){super(n||c.LocationPickerNearByFetching,e),this._isComponentMounted=t,this._durationInMs=i}getAttributes(){const e=super.getAttributes();return e.IsComponentMounted=this._isComponentMounted,e.DurationInMs=this._durationInMs,e}}t.LocationPickerNearByFetching=h;t.LocationPickerNearbyClicked=class extends u{constructor(e){super(c.LocationPickerNearByClicked,e)}};t.LocationPickerNearByFetchingFailed=class extends h{constructor(e,t,i,n){super(e,t,i,c.LocationPickerNearByFetchingFailed),this._statusCode=n}getAttributes(){const e=super.getAttributes();return e.StatusCode=this._statusCode,e}};class p extends u{constructor(e,t,i,n,o){super(e,t),this._addressFound=i,this._isComponentMounted=n,this._durationInMs=o}getAttributes(){const e=super.getAttributes();return e.WasAddressFound=this._addressFound,e.IsComponentMounted=this._isComponentMounted,e.DurationInMs=this._durationInMs,e}}t.LocationPickerResolveAddress=class extends p{constructor(e,t,i,n){super(c.LocationPickerResolveAddress,e,t,i,n)}};t.LocationPickerResolveAddressFailed=class extends p{constructor(e,t,i,n){super(c.LocationPickerResolveAddressFailed,e,t,i,n)}};t.LocationViewerOpen=class extends d{constructor(e,t){super(c.LocationViewerOpen),this._conversationId=e,this._message=t,this._cmid=a.getClientMessageId(this._message),this._messageCorrelationId=n.getCorrelationIdFromMessageParts(this._message.creator,this._conversationId,this._cmid),this._isGroupConversation=o.isGroupConversation(this._conversationId)}getEventName(){return"location_viewer"}getCorrelationAttributes(){const e=super.getAttributes();return e.Message_Correlation_Id=this._messageCorrelationId,e.Client_Message_Id=this._cmid||"",e}getAttributes(){const e=super.getAttributes();e.location_viewer_operation="open_viewer",e.Clicked_Timestamp=this._eventCreationTime,e.Group_Conversation=this._isGroupConversation,e.Server_Message_Id=this._message.getOriginalServerId()||"";const t=a.getTrackableConversationId(this._message.conversationId);return t&&(e.Conversation_Id=t),e}};t.LocationViewerOpenGoogleMaps=class extends d{constructor(){super(c.LocationViewerOpenGoogleMaps)}};t.LocationViewerOpenMaps=class extends d{constructor(){super(c.LocationViewerOpenMaps)}}},10962:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TokenIssueEvent=t.TokenIssueType=t.KeychainFailureEvent=t.LogoutEvent=t.StartupErrorEvent=t.RedirectToLoginEvent=void 0;const n=i(96486),o=i(46096),s=i(16568),a=i(349);class r extends a.TelemetryEventBase{getEventName(){return"sisu_login_logout"}getAttributes(){return n.assign(super.getAttributes(),{Action:this.getActionName(),NodeId:s.default.CallingNodeId.get()||""})}getLoggedOutSendingPolicy(){return a.TelemetryEventLoggedOutPolicy.SendNow}}t.RedirectToLoginEvent=class extends r{constructor(e,t,i,n,o){super(),this._reason=e,this._errorCode=t,this._timeSinceLastRefresh=i,this._correlationId=n,this._msaTokenKeychainKey=o}getActionName(){return"RedirectToLogin"}getAttributes(){const e=n.assign(super.getAttributes(),{Reason:o.RedirectToLoginReason[this._reason]});return this._errorCode&&(e.ErrorCode=this._errorCode),this._timeSinceLastRefresh&&(e.TimeSinceLastRefresh=this._timeSinceLastRefresh),this._correlationId&&(e.ErrorCorrelationId=this._correlationId),this._msaTokenKeychainKey&&(e.MsaTokenKeychainKey=this._msaTokenKeychainKey),e}};t.StartupErrorEvent=class extends r{constructor(e){super(),this._error=e}getActionName(){return"StartupError"}getAttributes(){return n.assign(super.getAttributes(),{Error:this._error||"unknown"})}};t.LogoutEvent=class extends r{constructor(e,t){super(),this._reason=e,this._isSaveCredentials=t,this._attributes={Reason:o.LogoutReason[this._reason]},n.isUndefined(this._isSaveCredentials)||(this._attributes=n.assign(this._attributes,{IsSaveCredentials:this._isSaveCredentials}))}getActionName(){return"Logout"}getAttributes(){return n.assign(super.getAttributes(),this._attributes)}};var l;t.KeychainFailureEvent=class extends r{constructor(e,t,i){super(),this._failureType=e,this._tokenType=t,this._error=i,this._attributes={Error:this._error,FailureType:o.KeychainFailureType[this._failureType],TokenType:o.KeychainTokenType[this._tokenType]}}getActionName(){return"KeychainFailure"}getAttributes(){return n.assign(super.getAttributes(),this._attributes)}},function(e){e[e.EmptyToken=0]="EmptyToken",e[e.InvalidToken=1]="InvalidToken"}(l=t.TokenIssueType||(t.TokenIssueType={}));t.TokenIssueEvent=class extends r{constructor(e,t,i){super(),this._tokenType=e,this._tokenIssueType=t,this._source=i,this._attributes={TokenType:o.KeychainTokenType[this._tokenType],TokenIssueType:l[this._tokenIssueType],Source:this._source}}getActionName(){return"TokenIssue"}getAttributes(){return n.assign(super.getAttributes(),this._attributes)}}},18743:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMessageCancelEvent=t.FilesSentViaPicker=t.FilePickerOrigin=t.MediaBarItemPressed=void 0;const n=i(71830),o=i(53559),s=i(38915),a=i(78262),r=i(349);class l extends r.TelemetryEventBase{constructor(e,t,i,o){super(),this._mediaBarItem=e,this._isActive=t,this._conversationId=i,this._origin=o,this._isGroupConversation=n.isGroupConversation(this._conversationId),this._isEncryptedConversation=n.isEncryptedThread(this._conversationId)}getEventName(){return"messaging_media_bar"}getAttributes(){let e=super.getAttributes();return e.MediaBarItem=this._mediaBarItem,e.IsActive=this._isActive,e.IsGroupConversation=this._isGroupConversation,e.IsEncryptedConversation=this._isEncryptedConversation,e.Origin=s.MediaBarItemOrigin[this._origin],e}}var c;t.MediaBarItemPressed=l,function(e){e[e.MediaPickerItem=0]="MediaPickerItem",e[e.FilePickerItem=1]="FilePickerItem",e[e.MessageComposer=2]="MessageComposer",e[e.DesktopGalleryPanel=3]="DesktopGalleryPanel",e[e.GalleryMediaList=4]="GalleryMediaList",e[e.DragAndDropToMessagePanel=5]="DragAndDropToMessagePanel",e[e.DragAndDropToRecentConversationsLists=6]="DragAndDropToRecentConversationsLists",e[e.DragAndDropToAvatarPicker=7]="DragAndDropToAvatarPicker",e[e.DragAndDropToGallery=8]="DragAndDropToGallery",e[e.CapturePreview=9]="CapturePreview",e[e.MediaPreview=10]="MediaPreview"}(c=t.FilePickerOrigin||(t.FilePickerOrigin={}));class d extends r.TelemetryEventBase{constructor(e,t,i,n){super(),this._origin=e,this._limitValue=t,this._wasOverLimit=i,this._filesExtensions=n}getEventName(){return"messaging_file_picker"}getAttributes(){let e=super.getAttributes();e.Origin=c[this._origin],e.LimitValue=this._limitValue,e.WasOverLimit=this._wasOverLimit;const t={},i=this._filesExtensions.length;for(let e=0;e<i;e++){const i=this._filesExtensions[e].toLowerCase(),n=o.default.getFileType(i),s=a.UploadFileType[n]+"Count";t.hasOwnProperty(s)||(t[s]=0),t[s]++}return e=Object.assign(Object.assign({},e),t),e.TotalCount=i,e}}t.FilesSentViaPicker=d;class u extends r.TelemetryEventBase{getEventName(){return"messaging_audio_message_cancel"}}t.AudioMessageCancelEvent=u},87946:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MediaDownloadTelemetryEvent=t.MediaDownloadActionOrigin=t.MediaDownloadReason=void 0;const n=i(12056);var o,s;!function(e){e[e.Copy=0]="Copy",e[e.Open=1]="Open",e[e.SaveAs=2]="SaveAs",e[e.SaveToDownloads=3]="SaveToDownloads"}(o=t.MediaDownloadReason||(t.MediaDownloadReason={})),function(e){e[e.MediaViewer=0]="MediaViewer",e[e.StreamItem=1]="StreamItem"}(s=t.MediaDownloadActionOrigin||(t.MediaDownloadActionOrigin={}));class a extends n.MessageTelemetryBase{constructor(e,t,i,n=""){super(e,e.conversationId),this._origin=t,this._reason=i,this._fileType=n}getEventName(){return"messaging_download"}getAttributes(){const e=super.getAttributes();return e.Reason=o[this._reason],e.Origin=s[this._origin],e.FileType=this._fileType,e}_useOldAttributeNames(){return!0}}t.MediaDownloadTelemetryEvent=a},26594:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MediaPreviewAppExitWithDraftsEvent=t.MediaPreviewSentEvent=t.MediaPreviewDraftDeletedEvent=t.MediaPreviewDraftCreatedEvent=t.MediaPreviewTelemetryMobileEvent=void 0;const n=i(96486),o=i(46096),s=i(53559),a=i(78262),r=i(349);class l extends r.TelemetryEventBase{getEventName(){return"messaging_media_preview"}getAttributes(){let e=super.getAttributes();return e.Action=this.getAction(),e}}t.MediaPreviewTelemetryMobileEvent=class extends l{constructor(e){super(),this._props=e}getAction(){return"MobilePreviewSent"}getAttributes(){const{totalCount:e,imageCount:t,videoCount:i}=this._props;let n=super.getAttributes();return n.VideoCount=i,n.ImageCount=t,n.TotalCount=e,n}};class c extends l{constructor(e){super(),this._props=e}getAttributes(){const{previews:e,deletedPreviewsCount:t,galleryOpenCount:i,wasSavedAsDraft:r,wasRecoveredFromDb:l,lastAddTimestamp:c}=this._props,d=n.mapKeys(n.countBy(e,"originator"),((e,t)=>`Origin_${o.PostSource[parseInt(t,10)]}`)),u=n.mapKeys(n.countBy(e,"data.extension"),((e,t)=>{const i=s.default.getFileType(t);return`Count_${a.UploadFileType[i]}`}));let g=Object.assign(Object.assign({},d),u);return g.TotalCount=e.length,g.DeletedPreviewsCount=t,g.GalleryOpenCount=i,g.WasSavedAsDraft=r,g.WasRecoveredFromDb=l,c&&(g.TimeElapsedSinceLastAdd=Date.now()-c),n.assign({},super.getAttributes(),g)}}t.MediaPreviewDraftCreatedEvent=class extends c{constructor(e){super(e)}getAction(){return"DraftCreated"}};t.MediaPreviewDraftDeletedEvent=class extends c{constructor(e){super(e)}getAction(){return"DraftDeleted"}};t.MediaPreviewSentEvent=class extends c{constructor(e){super(e)}getAction(){return"Sent"}};t.MediaPreviewAppExitWithDraftsEvent=class extends l{constructor(e){super(),this._numberOfDrafts=e}getAction(){return"AppExitWithDrafts"}getAttributes(){return n.assign({},super.getAttributes(),{DraftsCount:this._numberOfDrafts})}}},71349:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MediaUploadBase=t.FileRejectedByClient=t.FileRejectedReason=t.UnrecognizedMediaDimension=t.CaptureSession=t.ReencodeSession=t.VideoPlayback=t.ImageLoad=t.MediaAction=void 0;const n=i(36076),o=i(96486),s=i(31844),a=i(89391),r=i(27028),l=i(46096),c=i(45983),d=i(78262),u=i(349),g=i(53374);var h,p;!function(e){e[e.ImageLoad=0]="ImageLoad",e[e.VideoPlayback=1]="VideoPlayback",e[e.UnrecognisedMediaDimensions=2]="UnrecognisedMediaDimensions",e[e.FileRejected=3]="FileRejected",e[e.ImageUpload=4]="ImageUpload",e[e.VideoUpload=5]="VideoUpload"}(h=t.MediaAction||(t.MediaAction={}));class m extends u.TelemetryEventBase{constructor(e){super(),this._action=e}getEventName(){return"all_media"}getAttributes(){const e=super.getAttributes();return e.Action=h[this._action],e}}t.ImageLoad=class extends m{constructor(e,t,i){super(h.ImageLoad),this._uri=e,this._origin=t,this._properties=i,this._loadDuration=-1,this._loadStartTime=-1}getAttributes(){let e=o.assign(super.getAttributes(),{IsSuccess:this._success,LoadDuration:this._loadDuration,FailureReason:l.MessagingFailureReason[this._failureReason],Origin:this._origin});return this._properties?o.assign(e,this._properties):e}getPiiAttributes(){let e=super.getPiiAttributes();return e.Uri={value:this._uri,piiKind:n.AWTPiiKind.Uri},e}setStatus(e,t=l.MessagingFailureReason.None){this._success=e,this._failureReason=t}startLoad(){this._loadStartTime=Date.now()}endLoad(){this._loadDuration=Date.now()-this._loadStartTime}};t.VideoPlayback=class extends m{constructor(e,t,i,n,o,s){super(h.VideoPlayback),this._uri=e,this._mediaProvider=t,this._dimensions=i,this._origin=n,this._amsReferences=o,this._messagetype=s,this._loadSuccess=!1,this._playSuccess=!1,this._videoDuration=0,this._loadDuration=0,this._loadStartTime=0,this._playDuration=0,this._playStartTime=0,this._rebufferingCount=0,this._rebufferingDuration=0,this._rebufferingStartTime=0,this._cachingSuccess=!0,this._cachingDuration=0}getAttributes(){return o.assign(super.getAttributes(),{MediaProvider:this._mediaProvider?this._mediaProvider:"",Origin:this._origin||"",MediaWidth:this._dimensions?this._dimensions.width:"",MediaHeight:this._dimensions?this._dimensions.height:"",IsLoadSuccess:this._loadSuccess,LoadDuration:this._loadDuration,VideoDuration:this._videoDuration,IsPlaySuccess:this._playSuccess,PlayDuration:this._playDuration,DurationToPlayStart:this._getTimeToPlay(),RebufferingCount:this._rebufferingCount,RebufferingDuration:this._rebufferingDuration,FailureReason:l.MessagingFailureReason[this._failureReason],ErrorInfo:this._errorInfo,IsCachingSuccess:this._cachingSuccess,CacheMode:void 0!==this._cacheMode?c.CacheMode[this._cacheMode]:"",CachingDuration:this._cachingDuration,AmsDocumentIds:o.join(this._amsReferences),MessageType:this._messagetype||""})}getPiiAttributes(){let e=super.getPiiAttributes();return e.Uri={value:this._uri?this._uri:"",piiKind:n.AWTPiiKind.Uri},e}setCachingStatus(e,t,i){this._cachingSuccess=e,this._cacheMode=t,this._cachingDuration=i||0}setLoadStatus(e,t,i=l.MessagingFailureReason.None,n=""){this._loadSuccess=e,this._videoDuration=t,this._failureReason=i,this._errorInfo=n}setPlayStatus(e,t=l.MessagingFailureReason.None){this._playSuccess=e,this._failureReason=t}startLoad(){this._loadStartTime=Date.now()}endLoad(){this._loadDuration=this._loadStartTime>0?Date.now()-this._loadStartTime:0}startPlay(){this._playStartTime=Date.now()}endPlay(){this._playDuration=this._playStartTime>0?Date.now()-this._playStartTime:0}_getTimeToPlay(){return this._playSuccess&&this._loadStartTime>0&&this._playStartTime>0?this._playStartTime-this._loadStartTime:""}startRebuffering(){this._rebufferingCount++,this._rebufferingStartTime=Date.now()}endRebuffering(){this._rebufferingDuration+=this._rebufferingStartTime>0?Date.now()-this._rebufferingStartTime:0,this._rebufferingStartTime=0}};class S extends u.TelemetryEventBase{constructor(){super(...arguments),this._reencodeStartTime=0}getEventName(){return"all_reencode_session"}getAttributes(){return o.assign(super.getAttributes(),{State:void 0!==this._state?l.ReencodeState[this._state]:"",ReencodeDuration:this._reencodeDuration?this._reencodeDuration:0,OriginalAssetFetchDuration:this._originalAssetFetchDuration||0,HasOverlay:!!this._hasOverlay&&this._hasOverlay,ErrorType:this._errorType?this._errorType:"",ErrorInfo:this._errorInfo?this._errorInfo:"",VideoDuration:this._videoDuration?this._videoDuration:0,SourceWidth:this._sourceDimensions?this._sourceDimensions.width:0,SourceHeight:this._sourceDimensions?this._sourceDimensions.height:0,SourceFileSize:this._sourceFileSize?this._sourceFileSize:0,OutputWidth:this._outputDimensions?this._outputDimensions.width:0,OutputHeight:this._outputDimensions?this._outputDimensions.height:0,OutputFileSize:this._outputFileSize?this._outputFileSize:0,EstimatedFileSize:this._estimatedFileSize?this._estimatedFileSize:0,TransactionID:this._transactionId?this._transactionId:""})}getScenarioAttributes(){return{ReencodeState:void 0!==this._state?l.ReencodeState[this._state]:"",ReencodeDuration:this._reencodeDuration?this._reencodeDuration:0,ReencodeFetchDuration:this._originalAssetFetchDuration||0,HasReencodeOverlay:!!this._hasOverlay&&this._hasOverlay,ReencodeSourceWidth:this._sourceDimensions?this._sourceDimensions.width:0,ReencodeSourceHeight:this._sourceDimensions?this._sourceDimensions.height:0,ReencodeSourceFileSize:this._sourceFileSize?this._sourceFileSize:0,ReencodeOutputWidth:this._outputDimensions?this._outputDimensions.width:0,ReencodeOutputHeight:this._outputDimensions?this._outputDimensions.height:0,ReencodeEstimatedFileSize:this._estimatedFileSize?this._estimatedFileSize:0}}startReencode(){this._reencodeStartTime=Date.now()}endReencode(){this._reencodeDuration=(this._reencodeStartTime>0?Date.now()-this._reencodeStartTime:0)/1e3}setOriginalAssetFetchDuration(e){this._originalAssetFetchDuration=e}setState(e){this._state=e}setHasOverlay(e){this._hasOverlay=e}setErrorType(e){this._errorType=e}setErrorInfo(e){this._errorInfo=e}setVideoDuration(e){this._videoDuration=e}setSourceDimensions(e){this._sourceDimensions=e}setSourceFileSize(e){this._sourceFileSize=e}setOutputDimensions(e){this._outputDimensions=e}setOutputFileSize(e){this._outputFileSize=e}setEstimatedFileSize(e){this._estimatedFileSize=e}setTransactionID(e){this._transactionId=e}}t.ReencodeSession=S;class C extends u.TelemetryEventBase{constructor(e){super(),this._entryPoint=e,this._isVideo=!1,this._mediaCount=1,this._ink=!1,this._text=!1,this._stickers=!1,this._overlay=!1,this._filter=!1,this._addStickersClickCount=0,this._stickerIds=[],this._stickerNames=[],this._tabNames=[],this._isMediaSaved=!1,this._isMediaSent=!1,this._isCanceled=!1,this._overlaysViewCount={}}getEventName(){return"camera_capture_session"}clearMarkup(){this._ink=!1,this._text=!1,this._stickers=!1,this._overlay=!1,this._filter=!1,this._stickerIds=[],this._stickerNames=[],this._tabNames=[]}setIsVideo(e){this._isVideo=e}setCameraMode(e){this._cameraMode=e}setDeviceOrientation(e){this._deviceOrientation=e===s.DeviceOrientation.Portrait?"Portrait":e===s.DeviceOrientation.Landscape?"Landscape":"Unlocked"}setMediaCount(e){this._mediaCount=e}setInk(e){this._ink=e}setText(e){this._text=e}setStickers(e){this._stickers=e}setOverlay(e){this._overlay=e}setOverlayType(e){this._overlayType=e}setFilter(e){this._filter=e}setFilterName(e){this._filterName=e}setAddStickersClickCount(e){this._addStickersClickCount=e}setStickerIds(e){this._stickerIds=e}setStickerNames(e){this._stickerNames=e}setTabNames(e){this._tabNames=e}setMediaSavedStatus(e){this._isMediaSaved=e}setMediaSentStatus(e){this._isMediaSent=e}setIsCanceled(e){this._isCanceled=e}recordOverlayViewed(e){e=e.replace(/\s/g,""),this._overlaysViewCount[e]?this._overlaysViewCount[e]=this._overlaysViewCount[e]+1:this._overlaysViewCount[e]=1}getAttributes(){this._stickers&&(this._pesStickerConfig=a.default.getPesConfig().sticker_config);const e=o.assign(super.getAttributes(),{IsCanceled:this._isCanceled,EntryPoint:l.PostSource[this._entryPoint],IsVideo:this._isVideo,CameraMode:this._cameraMode?this._cameraMode:"",DeviceOrientation:this._deviceOrientation?this._deviceOrientation:"",MediaCount:this._mediaCount,Ink:this._ink,Text:this._text,Sticker:this._stickers,Overlay:this._overlay,OverlayType:this._overlayType?r.OverlayType[this._overlayType]:"",Filter:this._filter?this._filter:"",FilterName:this._filterName||"",AddStickersClickCount:this._addStickersClickCount,StickerIds:this._stickerIds.join(),StickerNames:this._stickerNames.join(),TabNames:this._tabNames.join(),IsMediaSaved:this._isMediaSaved,IsMediaSent:this._isMediaSent,PesStickerConfig:this._pesStickerConfig||"",PesFxSceneConfig:this._pesFxSceneConfig||""});return o.each(this._overlaysViewCount,((t,i)=>{e["OverlayViewCount_"+i]=t})),e.WasSentAfterSwiping=0!==this._overlaysViewCount.count,e}}t.CaptureSession=C;t.UnrecognizedMediaDimension=class extends m{constructor(e,t){super(h.UnrecognisedMediaDimensions),this._extension=e,this._uploadSource=t}getAttributes(){return o.assign(super.getAttributes(),{Extension:this._extension,UploadSource:this._uploadSource?l.PostSource[this._uploadSource]:"Unknown"})}},function(e){e[e.FileSize=0]="FileSize",e[e.VideoDuration=1]="VideoDuration"}(p=t.FileRejectedReason||(t.FileRejectedReason={}));t.FileRejectedByClient=class extends m{constructor(e,t,i){super(h.FileRejected),this._fileType=e,this._uploadSource=t,this._reason=i,this._isRejectedFromPost=!1}setVideoDurationDetails(e,t){this._durationLimit=e,this._videoDuration=t}setFileSizeDetails(e,t){this._sizeLimit=e,this._fileSize=t}setIsRejectedFromPost(e){this._isRejectedFromPost=e}getAttributes(){let e={UploadSource:l.PostSource[this._uploadSource],FileType:d.UploadFileType[this._fileType],FileRejectedReason:p[this._reason],IsRejectedFromPost:this._isRejectedFromPost};return this._durationLimit&&(e.DurationLimit=this._durationLimit),this._videoDuration&&(e.VideoDuration=this._videoDuration),this._sizeLimit&&(e.SizeLimit=this._sizeLimit),this._fileSize&&(e.FileSize=this._fileSize),o.assign(super.getAttributes(),e)}};t.MediaUploadBase=class extends m{constructor(e,t,i,n,o,s,a,r,l){super(e),this._success=t,this._failureReason=i,this._uploadDuration=n,this._fileType=o,this._dimensions=s,this._transactionId=a,this._documentId=r,this._isGroupChat=l}static mediaActionForFileType(e){let t;if(e)switch(e){case d.UploadFileType.Picture:case d.UploadFileType.Thumbnail:case d.UploadFileType.GroupAvatar:t=h.ImageUpload;break;case d.UploadFileType.Video:case d.UploadFileType.VideoMessage:t=h.VideoUpload;break;case d.UploadFileType.File:case d.UploadFileType.Audio:case d.UploadFileType.AudioMessage:case d.UploadFileType.Excel:case d.UploadFileType.OneNote:case d.UploadFileType.Powerpoint:case d.UploadFileType.Word:break;default:g.default.switchStatementExhaustiveChecking(e)}return t}getAttributes(){return o.assign(super.getAttributes(),{IsSuccess:this._success,FailureReason:l.MessagingFailureReason[this._failureReason],FileType:o.isUndefined(this._fileType)?"":d.UploadFileType[this._fileType],UploadDuration:this._uploadDuration,MediaWidth:this._dimensions?this._dimensions.width:"",MediaHeight:this._dimensions?this._dimensions.height:"",TransactionId:this._transactionId||"",DocumentId:this._documentId||"",IsGroupChat:o.isUndefined(this._isGroupChat)?"":this._isGroupChat})}}},65788:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MeetNowRepeatedGuestLoginEvent=t.MeetNowJoinLinkInSearchBarEvent=t.MeetNowSharePopupCloseEvent=t.MeetNowTitleSelectedEvent=t.MeetNowAvatarSelected=t.MeetNowAvatarNotSelected=t.MeetNowAvatarPickerOpen=t.MeetNowUserNameChanged=t.MeetNowMeetingNameManuallyChanged=t.MeetNowAddSkypeContactEvent=t.MeetNowJoinLinkPanelClosedEvent=t.MeetNowCreatedOnJoinLinkPanelEvent=t.MeetNowJoinLinkPanelInputSendEvent=t.MeetNowJoinLinkPanelMountedEvent=t.MeetNowClosePanelEvent=t.MeetNowLobbyMounted=t.MeetNowClickEvent=t.MeetNowErrorEvent=t.MeetNowDeeplinkProcessedEvent=t.MeetNowUriReceivedEvent=t.MeetNowTelemetryEventBase=t.MeetNowSharePopupCloseActionType=t.MeetNowJoinPanelResult=t.JoinMeetNowStep=t.CreateMeetNowStep=void 0;const n=i(96486),o=i(40196),s=i(93974),a=i(64723),r=i(349);var l;!function(e){e.MeetNowPanelReady="MeetNowPanelReady",e.MeetNowPanelClosed="MeetNowPanelClosed",e.StartMeetNowButtonClicked="StartMeetNowButtonClicked",e.CallStarted="CallStarted",e.CallMade="CallMade"}(t.CreateMeetNowStep||(t.CreateMeetNowStep={})),function(e){e.ValidJoinLinkEntered="ValidJoinLinkEntered",e.UserIsConversationParticipant="UserIsConversationParticipant",e.LobbyNavigationStarted="LobbyNavigationStarted",e.MeetNowPanelReady="MeetNowPanelReady",e.MeetNowPanelClosed="MeetNowPanelClosed",e.StartOrJoinMeetNowButtonClicked="StartOrJoinMeetNowButtonClicked",e.CallStarted="CallStarted",e.CallMade="CallMade"}(t.JoinMeetNowStep||(t.JoinMeetNowStep={})),function(e){e[e.NavigateToConversation=0]="NavigateToConversation",e[e.Exit=1]="Exit"}(l=t.MeetNowJoinPanelResult||(t.MeetNowJoinPanelResult={})),function(e){e.Auto="Auto",e.Manual="Manual"}(t.MeetNowSharePopupCloseActionType||(t.MeetNowSharePopupCloseActionType={}));class c extends r.TelemetryEventBase{constructor(e,t){super(),this._callId=e,this._meetNowParameters=t}getEventName(){return"calling_meet_now"}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),this._meetNowParameters.origin&&(e.Origin=a.MeetNowOrigin[this._meetNowParameters.origin]),this._callId&&(e.CallId=this._callId),this._meetNowParameters.partner&&(e.Partner=this._meetNowParameters.partner),this._meetNowParameters.windowsExpId&&(e.Exp=this._meetNowParameters.windowsExpId),this._meetNowParameters.convId&&(e.ConversationId=this._meetNowParameters.convId),e}}t.MeetNowTelemetryEventBase=c;t.MeetNowUriReceivedEvent=class extends c{constructor(e){super(void 0,s.default.getPartnerParametersFromUri(e))}getActionName(){return"MeetNowUriReceived"}};t.MeetNowDeeplinkProcessedEvent=class extends c{constructor(e){super(void 0,e)}getActionName(){return"MeetNowDeeplinkProcessed"}};t.MeetNowErrorEvent=class extends c{constructor(e,t,i){super(void 0,e),this._error=t,this._errorCode=i}getAttributes(){const e=super.getAttributes();return e.MeetNowError=this._error,this._errorCode&&(e.MeetNowErrorCode=this._errorCode),e}getActionName(){return"MeetNowError"}};t.MeetNowClickEvent=class extends c{constructor(e,t,i,n){super(e,t),this._clickType=i,this._selected=n}getActionName(){return"MeetNowClick"}getAttributes(){const e=super.getAttributes();return e.ClickType=a.MeetNowClickType[this._clickType],this._clickType!==a.MeetNowClickType.ClickToggleAllowJoiningLink||n.isUndefined(this._selected)||(e.IsJoiningViaLinkAllowed=this._selected),e}};t.MeetNowLobbyMounted=class extends c{constructor(e,t){super(e,t)}getActionName(){return"MeetNowLobbyMounted"}getAttributes(){return super.getAttributes()}};t.MeetNowClosePanelEvent=class extends c{constructor(e,t,i,n){super(e,t),this._closeOrigin=i,this._userActionsCount=n}getActionName(){return"MeetNowClosePanel"}getAttributes(){const e=super.getAttributes();return e.CloseOrigin=a.MeetNowClosePanelOrigin[this._closeOrigin],e.UserActionsCount=this._userActionsCount,e}};t.MeetNowJoinLinkPanelMountedEvent=class extends c{constructor(e){super(void 0,e)}getActionName(){return"MeetNowJoinLinkPanelMounted"}};t.MeetNowJoinLinkPanelInputSendEvent=class extends c{constructor(e,t,i){super(void 0,i),this._linkType=e,this._isInputValid=t}getActionName(){return"MeetNowJoinLinkPanelInputSend"}getAttributes(){const e=super.getAttributes();return e.LinkType=this._linkType,e.IsInputValid=this._isInputValid,e}};t.MeetNowCreatedOnJoinLinkPanelEvent=class extends c{constructor(e){super(void 0,e)}getActionName(){return"MeetNowCreatedOnJoinLinkPanel"}};t.MeetNowJoinLinkPanelClosedEvent=class extends c{constructor(e,t,i){super(void 0,e),this._errorCount=t,this._result=i}getActionName(){return"MeetNowJoinLinkPanelClosed"}getAttributes(){const e=super.getAttributes();return e.ErrorCount=this._errorCount,e.Result=l[this._result],e}};t.MeetNowAddSkypeContactEvent=class extends c{constructor(e,t,i){super(e,t),this._countSkypeContactAdded=i}getActionName(){return"MeetNowAddSkypeContact"}getAttributes(){const e=super.getAttributes();return e.CountSkypeContactAdded=this._countSkypeContactAdded,e}};t.MeetNowMeetingNameManuallyChanged=class extends c{constructor(e){super(void 0,e)}getActionName(){return"MeetNowMeetingNameManuallyChanged"}};t.MeetNowUserNameChanged=class extends c{constructor(e){super(void 0,e)}getActionName(){return"MeetNowUserNameChanged"}};t.MeetNowAvatarPickerOpen=class extends c{constructor(e){super(void 0,e)}getActionName(){return"MeetNowAvatarPickerOpen"}};t.MeetNowAvatarNotSelected=class extends c{constructor(e){super(void 0,e)}getActionName(){return"MeetNowAvatarNotSelected"}};t.MeetNowAvatarSelected=class extends c{constructor(e,t,i,n){super(void 0,e),this._avatarType=t,this._emoticonsSelectedBeforeUpload=i,this._stickersSelectedBeforeUpload=n}getActionName(){return"MeetNowAvatarSelected"}getAttributes(){const e=super.getAttributes();return e.SelectedAvatarType=o.AvatarPickerAction[this._avatarType],n.isNil(this._emoticonsSelectedBeforeUpload)||(e.EmoticonsSelectedBeforeUpload=this._emoticonsSelectedBeforeUpload),n.isNil(this._stickersSelectedBeforeUpload)||(e.StickersSelectedBeforeUpload=this._stickersSelectedBeforeUpload),e}};t.MeetNowTitleSelectedEvent=class extends c{constructor(e,t,i,n){super(void 0,e),this._name=t,this._wasSuggested=i,this._category=n}getActionName(){return"MeetNowTitleSelected"}getAttributes(){const e=super.getAttributes();return e.MeetingName=this._name,this._category&&(e.Category=this._category),e.WasSuggested=this._wasSuggested,e}};t.MeetNowSharePopupCloseEvent=class extends c{constructor(e,t,i,n){super(void 0,e),this._actionType=t,this._isGuestFlow=i,this._durationMs=n}getActionName(){return"MeetNowSharePopupClose"}getAttributes(){const e=super.getAttributes();return e.ActionType=this._actionType,e.IsGuestFlow=this._isGuestFlow,e.DurationMs=this._durationMs,e}};t.MeetNowJoinLinkInSearchBarEvent=class extends c{constructor(e){super(void 0,e)}getActionName(){return"MeetNowJoinLinkInSearchBar"}};t.MeetNowRepeatedGuestLoginEvent=class extends c{constructor(e){super(void 0,e)}getActionName(){return"MeetNowRepeatedGuestLogin"}}},73319:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IntegrationShareEvent=t.IntegrationEvent=t.MessageOverflowEvent=t.IntegrationShareContentType=t.IntegrationAction=t.MessageOverflowAction=void 0;const n=i(96486),o=i(46096),s=i(349);var a,r,l;!function(e){e[e.MessageOverflowOpenButtonClicked=0]="MessageOverflowOpenButtonClicked",e[e.MessageOverflowCloseButtonClicked=1]="MessageOverflowCloseButtonClicked",e[e.MessageOverflowMinimized=2]="MessageOverflowMinimized"}(a=t.MessageOverflowAction||(t.MessageOverflowAction={})),function(e){e[e.IntegrationLaunched=0]="IntegrationLaunched",e[e.IntegrationCloseButtonClicked=1]="IntegrationCloseButtonClicked",e[e.IntegrationSharePreviewLaunched=2]="IntegrationSharePreviewLaunched",e[e.IntegrationShared=3]="IntegrationShared",e[e.IntegrationShareCanceled=4]="IntegrationShareCanceled"}(r=t.IntegrationAction||(t.IntegrationAction={})),function(e){e[e.SwiftCard=0]="SwiftCard",e[e.AdaptiveCard=1]="AdaptiveCard",e[e.Url=2]="Url",e[e.Unknown=3]="Unknown"}(l=t.IntegrationShareContentType||(t.IntegrationShareContentType={}));class c extends s.TelemetryEventBase{getEventName(){return"caap_message_composer_overflow"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}t.MessageOverflowEvent=class extends c{constructor(e){super(),this._action=e}getActionName(){return a[this._action]}};class d extends c{constructor(e,t){super(),this._action=e,this._integrationCorrelationId=t}getActionName(){return r[this._action]}getAttributes(){let e=super.getAttributes();return this._integrationCorrelationId&&(e.IntegrationCorrelationId=this._integrationCorrelationId),e}}t.IntegrationEvent=d;t.IntegrationShareEvent=class extends d{constructor(e,t,i,n,o){super(e,n),this._contentType=t,this._sessionId=i,this._origin=o}getAttributes(){let e=super.getAttributes();return e.ContentType=l[this._contentType],e.SessionCorrelationId=this._sessionId||"",e.Origin=n.isUndefined(this._origin)?"":o.BrowserOrigin[this._origin],e}}},61428:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertPastedTextTypeToTelemetry=t.getTextMessageTypeFromContent=void 0;const n=i(79737),o=i(12056);t.getTextMessageTypeFromContent=function(e){return e?0===e.indexOf("(@@ )")?o.MessageComposerSentContentType.PlainText:((e=e.replace("(*)","")).match(/\*/g)||[]).length>1||(e.match(/\_/g)||[]).length>1||(e.match(/\~/g)||[]).length>1||(e.match(/\`\`\`/g)||[]).length>1?o.MessageComposerSentContentType.MarkupText:o.MessageComposerSentContentType.PlainText:o.MessageComposerSentContentType.NoText},t.convertPastedTextTypeToTelemetry=function(e){switch(e){case n.PastedTextType.PlainText:return o.MessageComposerAction.PastePlainText;case n.PastedTextType.HtmlText:return o.MessageComposerAction.PasteHtmlText;case n.PastedTextType.Link:return o.MessageComposerAction.PasteLink;case n.PastedTextType.EscapedLink:return o.MessageComposerAction.PasteEscapedLink;default:return o.MessageComposerAction.NoPaste}}},43512:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FinishReason=void 0;const n=i(70891),o=i(15963),s=i(94050);var a,r;!function(e){e[e.UserClosed=0]="UserClosed",e[e.UserOpenedApp=1]="UserOpenedApp",e[e.RestrictedVideoOpenedInApp=2]="RestrictedVideoOpenedInApp",e[e.PipDestroyed=3]="PipDestroyed"}(a=t.FinishReason||(t.FinishReason={})),function(e){e[e.ContentChanged=0]="ContentChanged",e[e.ContentFailedToLoad=1]="ContentFailedToLoad",e[e.PlaybackStateChanged=2]="PlaybackStateChanged",e[e.ViewModeChanged=3]="ViewModeChanged"}(r||(r={}));t.default=class{constructor(e){this._scenario=new s.default(o.ScenarioName.MessagePanelPip),this._scenario.setDuplicateStepMarkingEnabled(!0),this._scenario.start(this._getBaseTelemetryData(e))}markViewModeChanged(e,t){const i=this._getBaseTelemetryData(e);i.IsLandscape=t.isLandscape,i.WasLandscape=t.wasLandscape,i.IsFullscreen=t.isFullScreen,i.WasFullscreen=t.wasFullScreen,this._markStep(r.ViewModeChanged,i)}markContentChanged(e){this._markStep(r.ContentChanged,this._getBaseTelemetryData(e))}markContentFailedToLoad(e){this._markStep(r.ContentFailedToLoad,this._getBaseTelemetryData(e))}markPlaybackStateChanged(e,t){const i=this._getBaseTelemetryData(e);i.NewState=t.newState,i.OldState=t.oldState,this._markStep(r.PlaybackStateChanged,i)}finish(e,t){const i=this._getBaseTelemetryData(e);i.FinishReason=a[t],this._scenario.finish(i)}isFinished(){return this._scenario.isResolved()}_markStep(e,t){this._scenario.markStepCompleted(r[e],t)}_getBaseTelemetryData(e){const t={ContentType:n.PipContentType[e.contentType]};if(e.contentType===n.PipContentType.Youtube){const i=e;t.HasPreviewImage=!!i.videoPreviewUrl}return t}}},12056:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessagesFetched=t.MessageComposerTelemetry=t.MessageComposerSentContentType=t.MessageComposerAction=t.AddContactsTelemetry=t.ShareContactsTelemetry=t.ReadReceiptsViewed=t.JumpToEnd=t.MessagePanelActionType=t.MessageSent=t.MessageReadLie=t.MessageRead=t.MessageSendTimeout=t.MessageContentClicked=t.SelectedMessagesTelemetry=t.KeyboardMessagesTelemetry=t.QuotesEventTelemetry=t.ShareFileMessageTelemetry=t.ForwardedMessageTelemetry=t.MessageActionTelemetry=t.MessageTelemetryBase=t.ConversationTelemetryBase=t.KeyboardActionType=t.MessageActionOrigin=t.MessageActionType=void 0;const n=i(36076),o=i(96486),s=i(31844),a=i(60021),r=i(51077),l=i(61375),c=i(71830),d=i(98278),u=i(39549),g=i(86374),h=i(46096),p=i(53559),m=i(81020),S=i(12762),C=i(18078),f=i(12692),y=i(349),_=i(35370),v=i(11698),b=i(77878),T=i(91319);var P,A;!function(e){e[e.Cancel=0]="Cancel",e[e.CancelRejected=1]="CancelRejected",e[e.ClearQuote=2]="ClearQuote",e[e.Copy=3]="Copy",e[e.CopyLink=4]="CopyLink",e[e.Delete=5]="Delete",e[e.Edit=6]="Edit",e[e.Forward=7]="Forward",e[e.MarkMessageUnread=8]="MarkMessageUnread",e[e.Quote=9]="Quote",e[e.SelectMessages=10]="SelectMessages",e[e.ShareFile=11]="ShareFile",e[e.DismissActionMenu=12]="DismissActionMenu",e[e.RetryFailed=13]="RetryFailed",e[e.DragDropFromConversationToRecentLists=14]="DragDropFromConversationToRecentLists",e[e.ShowReportedMessage=15]="ShowReportedMessage",e[e.AddBookmark=16]="AddBookmark",e[e.RemoveBookmark=17]="RemoveBookmark"}(P=t.MessageActionType||(t.MessageActionType={})),function(e){e.StreamItem="streamItem",e.MessageStream="messageStream",e.StreamItemAccesory="streamItemAccessory",e.StreamItemDesktopContextMenu="streamItemDesktopContextMenu",e.StreamItemActionMenu="streamItemActionMenu",e.StreamItemPopup="streamItemPopup",e.StreamItemMultipleMessages="_streamItemMultipleMessages",e.DocumentViewer="documentViewer",e.MessageComposer="MessageComposer",e.LocationViewer="locationViewer",e.PostingService="postingService",e.FileNode="fileNode",e.BookmarksViewer="bookmarksViewer"}(t.MessageActionOrigin||(t.MessageActionOrigin={})),function(e){e[e.KeyboardCopy=0]="KeyboardCopy",e[e.KeyboardPaste=1]="KeyboardPaste"}(A=t.KeyboardActionType||(t.KeyboardActionType={}));const k="messaging_action";class I extends y.TelemetryEventBase{constructor(e){super(),this._conversationId=e,this._isGroupConversation=c.isGroupConversation(this._conversationId),this._isEncryptedConversation=c.isEncryptedThread(this._conversationId),this._isBotConversation=c.isOneOnOneConversation(this._conversationId)&&c.isAgent(this._conversationId),this._isBookmarkConversation=c.isBookmarkConversation(this._conversationId);const t=(0,u.default)().getConversation(this._conversationId);this._conversationMembersCount=t?t.getMemberCount():0}_useOldAttributeNames(){return!1}getAttributes(){const e=this._useOldAttributeNames()?{Bot_Conversation:this._isBotConversation,Conversation_Members_Number:this._conversationMembersCount,Group_Conversation:this._isGroupConversation,IsEncryptedConversation:this._isEncryptedConversation}:{IsBotConversation:this._isBotConversation,ConversationMembersCount:this._conversationMembersCount,IsGroupConversation:this._isGroupConversation,IsEncryptedConversation:this._isEncryptedConversation};this._isBookmarkConversation&&(e.IsBookmarkConversation=this._isBookmarkConversation);const t=_.getTrackableConversationId(this._conversationId);t&&(e[this._useOldAttributeNames()?"Conversation_Id":"ConversationId"]=t),e.MriNamespace=c.getMriNamespace(this._conversationId);const i=c.getThreadSuffix(this._conversationId);return i&&(e.ThreadSuffix=i),o.assign({},super.getAttributes(),e)}}t.ConversationTelemetryBase=I;class w extends I{constructor(e,t){super(t),this._message=e,this._messageType=_.getMessageTypeName(this._message,C.default.getSkypeMri(),t),this._messageRawType=_.getMessageRawTypeName(this._message,C.default.getSkypeMri(),t),this._message instanceof f.default?this._messageCorrelationId=a.getCorrelationIdFromMessageParts(this._message.creator,this._message.conversationId,_.getClientMessageId(this._message)):this._messageCorrelationId=a.getCorrelationIdFromMessageParts(c.skypeIdToMri(C.default.getSkypeId()),t,this._message.clientmessageid);const i=this._message instanceof f.default?this._message.creator:c.skypeIdToMri(C.default.getSkypeId());this._isOwnMessage=C.default.isMyMri(i)}getCorrelationAttributes(){const e=this._useOldAttributeNames()?{Message_Correlation_Id:this._messageCorrelationId}:{MessageCorrelationId:this._messageCorrelationId};return o.assign({},super.getCorrelationAttributes(),e)}getAttributes(){const e=this._useOldAttributeNames()?{Message_Type:this._messageType,Message_RawType:this._messageRawType,Own_Message:this._isOwnMessage}:{MessageType:this._messageType,MessageRawType:this._messageRawType,IsOwnMessage:this._isOwnMessage};return this._message instanceof f.default&&this._message.hasAlbumId()?e.AlbumId=this._message.getAlbumId():this._message.properties&&this._message.properties[r.MessageProperties.AlbumId]&&(e.AlbumId=this._message.properties[r.MessageProperties.AlbumId].toString()),o.assign({},super.getAttributes(),e)}}t.MessageTelemetryBase=w;class N extends w{constructor(e,t,i,n,o,s){super(t,e),this._originalMessageTime=i,this._origin=n,this._action=o,this._docId=s,this._timeToAction=Math.round((this._eventCreationTime-this._originalMessageTime)/1e3)}getEventName(){return k}getAttributes(){return o.assign({},super.getAttributes(),{Action:P[this._action],Origin:this._origin,TimeToActionDuration:this._timeToAction,DocId:this._docId||""})}}t.MessageActionTelemetry=N;t.ForwardedMessageTelemetry=class extends N{constructor(e,t,i,n,o,s){super(e,t,i,n,o),this._destinationsConversationType=s,this._skypeConversationCount=0,this._privateConversationCount=0,this._smsConversationCount=0,this._computeConversationTypes()}getAttributes(){const e=super.getAttributes();return e.SkypeConversationCount=this._skypeConversationCount,e.PrivateConversationCount=this._privateConversationCount,e.SmsConversationCount=this._smsConversationCount,e}_computeConversationTypes(){this._destinationsConversationType&&o.each(this._destinationsConversationType,(e=>{c.isEncryptedThread(e)?this._privateConversationCount++:c.isPhoneMri(e)?this._smsConversationCount++:this._skypeConversationCount++}))}};t.ShareFileMessageTelemetry=class extends N{constructor(e,t,i,n,o,s,a,r){super(e,t,i,n,o),this._fileExtension=s,this._wasShared=a,this._error=r}getAttributes(){const e=super.getAttributes();return e.IsShared=this._wasShared,e.Error=this._error||"",e.FileExtension=this._fileExtension,e}};t.QuotesEventTelemetry=class extends N{constructor(e,t,i,n,o,s){super(e,t,i,n,o),this._quotesTriggerType=s}getAttributes(){const e=super.getAttributes();return e.QuotesTriggerType=v.QuotesTriggerType[this._quotesTriggerType],e}};t.KeyboardMessagesTelemetry=class extends I{constructor(e,t){super(e),this._attributes=this._constructAttributes(t)}getEventName(){return k}getAttributes(){return o.assign(super.getAttributes(),this._attributes)}_constructAttributes(e){return{Action:A[e.actionType],MessagesCount:e.messagesCount}}};t.SelectedMessagesTelemetry=class extends I{constructor(e,t,i,n,o){super(e),this._toConversationCount=t,this._selectedMessages=i,this._selectedMessagesActionType=n,this._disabledActions=o,this._currentAttributes=this._computeAllAttributes()}getEventName(){return k}_computeAllAttributes(){const e={Action:P[P.SelectMessages],SelectedMessagesCount:this._selectedMessages.length,SelectedMessagesAction:v.SelectedMessagesActionType[this._selectedMessagesActionType]};this._toConversationCount&&(e.ForwardToConversationCount=this._toConversationCount);const t={};return o.each(this._selectedMessages,(e=>{const i="SelectedMessageType:"+_.getMessageTypeName(e.message,C.default.getSkypeMri(),this._conversationId);t[i]=o.isUndefined(t[i])?1:t[i]+1})),o.assign(e,t),e.SelectedMessagesDisabledCopy=this._disabledActions.disabledCopy,e.SelectedMessagesDisabledRemove=this._disabledActions.disabledRemove,e.SelectedMessagesDisabledForward=this._disabledActions.disabledForward,e}getAttributes(){const e=super.getAttributes();return o.assign(e,this._currentAttributes),e}};t.MessageContentClicked=class extends w{constructor(e){super(e,e.conversationId),this._serverMessageId=e.getOriginalServerId()||"",this._cmid=_.getClientMessageId(this._message)||""}getEventName(){return"message_consumed"}getCorrelationAttributes(){const e=super.getCorrelationAttributes();return e.Client_Message_Id=this._cmid,e}getAttributes(){const e=super.getAttributes();return e.Clicked_Timestamp=this._eventCreationTime,e.Server_Message_Id=this._serverMessageId,e.Action="contentClicked",e}_useOldAttributeNames(){return!0}};t.MessageSendTimeout=class extends w{constructor(e,t){super(e,t)}getEventName(){return"messaging_send_delayed"}};t.MessageRead=class extends w{getEventName(){return"message_read"}getAttributes(){const e=super.getAttributes();return e.MessageType=this._messageType,e}_useOldAttributeNames(){return!0}};t.MessageReadLie=class extends w{getEventName(){return"message_read_lie"}_useOldAttributeNames(){return!0}};var M,E,x;t.MessageSent=class extends w{constructor(e,t,i,n,o,s,a,r,l,c,d,u,h,p,m,S,C,f){super(t,e),this._isReceiverShortCircuit=i,this._rawContentLength=n,this._postSource=o,this._registrationId=s,this._endpointId=a,this._receiverMri=r,this._receiverUserId=l,this._oneOnOneThreadId=c,this._nonBlocking=d,this._rootViewType=u,this._deviceOrientation=h,this._isMediaPipOpened=p,this._messageComposerAction=m,this._messageSentContentType=S,this._mediaDurationInMs=C,this._isDoNotFormat=f;const y=(0,b.transformUnicodeEmojis)(g.decodeFromContent(this._message.content));this._numberOfEmoticons=y.getNumberOfEmoticons(),this._numberOfDiverseEmoticons=y.getNumberOfDiverseEmoticons(),this._numberOfNativeEmojis=y.getNumberOfUnicodeEmoji(),this._numberOfDirectMentions=y.getNumberOfDirectMentions(),this._hasAllMention=y.hasAllMention(),this._webLinks=y.getWebLinks(),this._hasWikiMarkup=y.hasWikiMarkup();const _=this._message;this._clientMessageId=_.clientmessageid,this._applyMessageTypeOverrideIfNeeded(y)}getEventName(){return"message_sent"}getEventPriority(){return n.AWTEventPriority.High}getAttributes(){const e={CharacterCount:this._rawContentLength,EmoticonCount:this._numberOfEmoticons,DiverseEmoticonCount:this._numberOfDiverseEmoticons,IsReceiverShortCircuit:this._isReceiverShortCircuit,NativeEmojiCount:this._numberOfNativeEmojis,SendTimestamp:this._eventCreationTime,DirectMentionCount:this._numberOfDirectMentions,HasAllMention:this._hasAllMention,URLCount:o.size(this._webLinks),IsNonBlocking:!!this._nonBlocking,PostSource:h.PostSource[this._postSource],HasWikiMarkup:this._hasWikiMarkup,DeviceOrientation:s.DeviceOrientation[this._deviceOrientation],IsDoNotFormat:this._isDoNotFormat};return this._clientMessageId&&(e.ClientMessageId=this._clientMessageId),this._endpointId&&(e.EndpointId=this._endpointId),this._registrationId&&(e.RegistrationId=this._registrationId),this._oneOnOneThreadId&&(e.OneOnOneThreadId=this._oneOnOneThreadId),this._rootViewType&&(e.RootViewType=d.RootViewType[this._rootViewType]),o.isUndefined(this._isMediaPipOpened)||(e.IsMediaPipOpened=this._isMediaPipOpened),o.isUndefined(this._messageComposerAction)||(e.MessageComposerAction=E[this._messageComposerAction]),o.isUndefined(this._messageSentContentType)||(e.MessageSentContentType=x[this._messageSentContentType]),o.isUndefined(this._mediaDurationInMs)||(e.MediaDurationInMs=this._mediaDurationInMs),this._addWellKnownDomainAttributes(e),o.assign({},super.getAttributes(),e)}getPiiAttributes(){return o.assign({},super.getPiiAttributes(),{ReceiverMri:{value:this._receiverMri||"",piiKind:n.AWTPiiKind.Identity},ReceiverUserId:{value:this._receiverUserId||"",piiKind:n.AWTPiiKind.Identity}})}_addWellKnownDomainAttributes(e){let t=0;o.each(this._webLinks,(e=>{T.default.isYoutubeUrl(e)&&t++})),t>0&&(e.YoutubeURLCount=t)}_applyMessageTypeOverrideIfNeeded(e){if(_.getMessageTypeGroup(this._message)===r.MessageTypeGroups.SwiftCard){const t=e.getFirstUriObjectChild(S.SwiftUriObjectNode);if(t){t.getCardType()===p.default.imageContentTypes.gif&&(this._messageType="Gif")}}}},function(e){e[e.JumpToEnd=0]="JumpToEnd",e[e.ReadReceiptsViewed=1]="ReadReceiptsViewed"}(M=t.MessagePanelActionType||(t.MessagePanelActionType={}));class L extends y.TelemetryEventBase{constructor(e,t){super(),this._conversationId=e,this._actionType=t,this._isGroupConversation=c.isGroupConversation(this._conversationId);const i=(0,u.default)().getConversation(this._conversationId);this._conversationMembersCount=i?i.getMemberCount():0}getEventName(){return"messaging_panel"}getAttributes(){const e=super.getAttributes();return e.Action=M[this._actionType],e.IsGroupConversation=this._isGroupConversation,e.ConversationMembersCount=this._conversationMembersCount,e}}t.JumpToEnd=class extends L{constructor(e,t,i){super(e,M.JumpToEnd),this._jumpedFrom=t,this._unreadCounts=i}getAttributes(){const e=super.getAttributes();return e.JumpedFrom=this._jumpedFrom?this._jumpedFrom:"DB_LOAD",e.UnreadCount=this._unreadCounts,e}};t.ReadReceiptsViewed=class extends L{constructor(e,t,i){super(i,M.ReadReceiptsViewed),this._peopleCountOnMark=e,this._peopleCountTotal=t}getAttributes(){const e=super.getAttributes();return e.ReadByMarkCount=this._peopleCountOnMark,e.ReadByTotalCount=this._peopleCountTotal,e}};t.ShareContactsTelemetry=class extends I{constructor(e,t,i,n,o){super(t),this._entryPoint=e,this.conversationId=t,this._numberOfPSTNContactsShares=i,this._numberOfSkypeContactsShares=n,this._usedSearch=o}getEventName(){return"messaging_share_contacts"}getAttributes(){const e=super.getAttributes();return e.EntryPoint=m.ShareContactOrigin[this._entryPoint],e.SharedPSTNContactsCount=this._numberOfPSTNContactsShares,e.SharedSkypeContactsCount=this._numberOfSkypeContactsShares,e.HasUsedSearch=this._usedSearch,e}_useOldAttributeNames(){return!0}};t.AddContactsTelemetry=class extends I{constructor(e,t){super(t),this._origin=e,this.conversationId=t}getEventName(){return"messaging_add_contacts"}getAttributes(){const e=super.getAttributes();return e.AddContactsOrigin=l.AddMemberToThreadSource[this._origin],e}_useOldAttributeNames(){return!0}},function(e){e[e.Paste=0]="Paste",e[e.NoPaste=1]="NoPaste",e[e.PastePlainText=2]="PastePlainText",e[e.PasteHtmlText=3]="PasteHtmlText",e[e.PasteLink=4]="PasteLink",e[e.PasteEscapedLink=5]="PasteEscapedLink"}(E=t.MessageComposerAction||(t.MessageComposerAction={})),function(e){e[e.NoText=0]="NoText",e[e.PlainText=1]="PlainText",e[e.MarkupText=2]="MarkupText",e[e.Link=3]="Link",e[e.Audio=4]="Audio"}(x=t.MessageComposerSentContentType||(t.MessageComposerSentContentType={}));t.MessageComposerTelemetry=class extends I{constructor(e,t,i){super(e),this._userCancelled=t,this._action=i}getEventName(){return"messaging_composer"}getAttributes(){let e=super.getAttributes();return e.UserCancelled=this._userCancelled,e.Action=E[this._action],e}_useOldAttributeNames(){return!0}};t.MessagesFetched=class extends I{constructor(e,t,i,n){super(e),this._fetchedMessages=t,this._syncedBackwards=i,this._duration=n}getEventName(){return"messaging_extra_fetch"}getAttributes(){const e=super.getAttributes();return e.FetchedMessages=this._fetchedMessages,e.IsSyncedBackwards=this._syncedBackwards,e.Duration=this._duration,e}_useOldAttributeNames(){return!0}}},35762:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavigatedToNextResult=t.NavigatedToPrevResult=t.TriggeredLoadMoreMessages=t.ClosedSearch=t.OpenedSearch=void 0;const n=i(70919),o=i(349);class s extends o.TelemetryEventBase{getEventName(){return"messaging_search"}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}t.OpenedSearch=class extends s{constructor(e){super(),this._origin=e}getActionName(){return"OpenedMessageSearch"}getAttributes(){const e=super.getAttributes();return e.Origin=n.MessageSearchToggleOrigin[this._origin],e}};t.ClosedSearch=class extends s{constructor(e,t,i,n){super(),this._origin=e,this._didUserSearch=t,this._lastResultsCount=i,this._numberOfRequests=n}getActionName(){return"ClosedMessageSearch"}getAttributes(){const e=super.getAttributes();return e.Origin=n.MessageSearchToggleOrigin[this._origin],e.DidUserSearch=this._didUserSearch,e.LastSearchResultsCount=this._lastResultsCount,e.NumberOfRequests=this._numberOfRequests,e}};t.TriggeredLoadMoreMessages=class extends s{constructor(e,t){super(),this._isSearchingGlobal=e,this._pageNumberRequested=t}getActionName(){return"TriggeredLoadMoreMessages"}getAttributes(){const e=super.getAttributes();return e.IsSearchingGlobal=this._isSearchingGlobal,e.PageNumberRequested=this._pageNumberRequested,e}};t.NavigatedToPrevResult=class extends s{getActionName(){return"NavigatedToPrevResult"}};t.NavigatedToNextResult=class extends s{getActionName(){return"NavigatedToNextResult"}}},1246:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChatNotificationsToggleSetting=t.PicturePrefetchToggleSetting=t.AutoDownloadFilesToggleSetting=t.OnlyShowSubtitlesForOtherParticipants=t.EnableSubtitlesForAllCallsSetting=t.ChatNotificationsWhileDNDToggleSetting=t.CallNotificationsWhileDNDToggleSetting=t.FontSizeSetting=t.FileDownloadPathDesktopSetting=t.LastMessageAuthorAvatarToggleSetting=t.FormattingToggleSetting=t.PasteAsQuoteToggleSetting=t.SendMessageWithEnterToggleSetting=t.OpenLinksInSkype=t.DisplayUrlPreviewsToggleSetting=t.ReactionPushNotificationsToggleSetting=t.ReadReceiptsToggleSetting=t.ReadReceiptsSettingOrigin=t.MessagingToggleSetting=t.FontSizeChangeOrigin=t.MessagingSettings=void 0;const n=i(6658),o=i(349);var s,a,r;!function(e){e[e.ReadReceipts=0]="ReadReceipts",e[e.ReactionPushNotifications=1]="ReactionPushNotifications",e[e.DisplayUrlPreviews=2]="DisplayUrlPreviews",e[e.OpenLinksInSkype=3]="OpenLinksInSkype",e[e.SendMessageWithEnter=4]="SendMessageWithEnter",e[e.PasteAsQuote=5]="PasteAsQuote",e[e.Formatting=6]="Formatting",e[e.LastMessageAuthorAvatar=7]="LastMessageAuthorAvatar",e[e.FontSize=8]="FontSize",e[e.FileDownloadPathDesktop=9]="FileDownloadPathDesktop",e[e.ChatNotificationsWhileDND=10]="ChatNotificationsWhileDND",e[e.CallNotificationsWhileDND=11]="CallNotificationsWhileDND",e[e.EnableSubtitlesForAllCalls=12]="EnableSubtitlesForAllCalls",e[e.OnlyShowSubtitlesForOtherParticipants=13]="OnlyShowSubtitlesForOtherParticipants",e[e.AutoDownloadFiles=14]="AutoDownloadFiles",e[e.PicturePrefetch=15]="PicturePrefetch",e[e.ChatNotifications=16]="ChatNotifications"}(s=t.MessagingSettings||(t.MessagingSettings={})),function(e){e[e.Settings=0]="Settings"}(a=t.FontSizeChangeOrigin||(t.FontSizeChangeOrigin={}));class l extends o.TelemetryEventBase{constructor(e){super(),this._setting=e}getEventName(){return"messaging_settings"}getAttributes(){const e=super.getAttributes();return e.Setting=s[this._setting],e}}class c extends l{constructor(e,t){super(t),this._didEnable=e}getAttributes(){const e=super.getAttributes();return e.DidEnable=this._didEnable,e}}t.MessagingToggleSetting=c,function(e){e[e.UserAction=0]="UserAction",e[e.OptIn=1]="OptIn",e[e.UserStatusUpdate=2]="UserStatusUpdate",e[e.OptOut=3]="OptOut"}(r=t.ReadReceiptsSettingOrigin||(t.ReadReceiptsSettingOrigin={}));t.ReadReceiptsToggleSetting=class extends c{constructor(e,t){super(e,s.ReadReceipts),this._origin=t}getAttributes(){const e=super.getAttributes();return e.Origin=r[this._origin],e}};t.ReactionPushNotificationsToggleSetting=class extends c{constructor(e){super(e,s.ReactionPushNotifications)}};t.DisplayUrlPreviewsToggleSetting=class extends c{constructor(e){super(e,s.DisplayUrlPreviews)}};t.OpenLinksInSkype=class extends c{constructor(e){super(e,s.OpenLinksInSkype)}};t.SendMessageWithEnterToggleSetting=class extends c{constructor(e){super(e,s.SendMessageWithEnter)}};t.PasteAsQuoteToggleSetting=class extends c{constructor(e){super(e,s.PasteAsQuote)}};t.FormattingToggleSetting=class extends c{constructor(e){super(e,s.Formatting)}};t.LastMessageAuthorAvatarToggleSetting=class extends c{constructor(e){super(e,s.LastMessageAuthorAvatar)}};t.FileDownloadPathDesktopSetting=class extends l{constructor(){super(s.FileDownloadPathDesktop)}};t.FontSizeSetting=class extends l{constructor(e,t){super(s.FontSize),this._size=e,this._origin=t}getAttributes(){const e=super.getAttributes();return e.FontSizeValue=n.MessageStreamFontSize[this._size],e.Origin=a[this._origin],e}};t.CallNotificationsWhileDNDToggleSetting=class extends c{constructor(e){super(e,s.CallNotificationsWhileDND)}};t.ChatNotificationsWhileDNDToggleSetting=class extends c{constructor(e){super(e,s.ChatNotificationsWhileDND)}};t.EnableSubtitlesForAllCallsSetting=class extends c{constructor(e){super(e,s.EnableSubtitlesForAllCalls)}};t.OnlyShowSubtitlesForOtherParticipants=class extends c{constructor(e){super(e,s.OnlyShowSubtitlesForOtherParticipants)}};t.AutoDownloadFilesToggleSetting=class extends c{constructor(e){super(e,s.AutoDownloadFiles)}};t.PicturePrefetchToggleSetting=class extends l{constructor(e){super(s.PicturePrefetch),this._mode=e}getAttributes(){const e=super.getAttributes();return e.Mode=this._mode,e}};t.ChatNotificationsToggleSetting=class extends c{constructor(e,t){super(e,s.ChatNotifications),this._disableChatNotificationsPeriod=t}getAttributes(){const e=super.getAttributes();return this._disableChatNotificationsPeriod&&(e.DisableChatNotificationsPeriod=this._disableChatNotificationsPeriod),e}}},17999:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessagingTabsHiddenEvent=void 0;const n=i(349);class o extends n.TelemetryEventBase{getEventName(){return"messaging_tabs"}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}t.MessagingTabsHiddenEvent=class extends o{constructor(e,t){super(),this._visibleTabs=e,this._overflownTabs=t}getActionName(){return"TabsHidden"}getAttributes(){const e=super.getAttributes();return e.VisibleTabs=this._visibleTabs,e.HiddenTabs=this._overflownTabs,e}}},26385:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessagingToastAlertEvent=t.MessagingToastQuickActionEvent=t.MessagingToastShowEvent=t.MessagingToastEvent=t.MessagingToastAlertType=t.MessagingToastQuickAction=t.MessagingToastActionType=void 0;const n=i(71830),o=i(97223),s=i(349),a=i(35370);var r,l,c;!function(e){e[e.Tapped=0]="Tapped",e[e.Panned=1]="Panned",e[e.Ignored=2]="Ignored",e[e.Shown=3]="Shown",e[e.QuickAction=4]="QuickAction"}(r=t.MessagingToastActionType||(t.MessagingToastActionType={})),function(e){e[e.ThumbsUp=0]="ThumbsUp",e[e.InlineReply=1]="InlineReply",e[e.AcceptScheduledCall=2]="AcceptScheduledCall",e[e.DeclineScheduledCall=3]="DeclineScheduledCall",e[e.MarkAsRead=4]="MarkAsRead",e[e.JoinCall=5]="JoinCall"}(l=t.MessagingToastQuickAction||(t.MessagingToastQuickAction={})),function(e){e[e.ReplyNotSent=0]="ReplyNotSent"}(c=t.MessagingToastAlertType||(t.MessagingToastAlertType={}));class d extends s.TelemetryEventBase{constructor(e,t,i){super(),this._conversationId=e,this._notificationType=t,this._action=i}getEventName(){return"messaging_toast"}getAttributes(){let e=super.getAttributes();this._action!==r.Shown&&(e.Action=r[this._action]),void 0!==this._notificationType&&(e.ToastType=o.MessageNotificationType[this._notificationType]),e.IsGroupConversation=n.isGroupConversation(this._conversationId);const t=a.getTrackableConversationId(this._conversationId);return t&&(e.ConversationId=t),e}}t.MessagingToastEvent=d;t.MessagingToastShowEvent=class extends d{constructor(e,t,i,n,o,s){super(e.conversationId,t,r.Shown),this._message=e,this._notificationAction=i,this._useSystemNotification=n,this._groupedNotifications=o,this._displayedMessagesCount=s}getEventName(){return"messaging_notification"}getAttributes(){let e=super.getAttributes();return e.NotificationAction=o.MessageNotificationAction[this._notificationAction],e.IsSystemNotification=this._useSystemNotification,e.IsSampledType=this._isSampledNotificationType(),void 0!==this._displayedMessagesCount&&(e.DisplayedMessagesCount=this._displayedMessagesCount),e}shouldSend(){if(!super.shouldSend())return!1;if(!this._isSampledNotificationType())return!0;if(!this._message)return!1;const e=this._message.getLatestRelevantClientMessageId();if(!e)return!1;const t=s.TelemetryConfig.kpi_message_sent;return a.shouldTrackMessage(e,t)}_isSampledNotificationType(){return this._notificationType!==o.MessageNotificationType.AddToConversation}};t.MessagingToastQuickActionEvent=class extends d{constructor(e,t){super(t,void 0,r.QuickAction),this._actionName=e}getAttributes(){let e=super.getAttributes();return e.QuickAction=l[this._actionName],e.IsSystemNotification=!0,e}};t.MessagingToastAlertEvent=class extends d{constructor(e,t){super(t,o.MessageNotificationType.SystemAlert,r.Shown),this._alertType=e}getAttributes(){let e=super.getAttributes();return e.AlertType=c[this._alertType],e.IsSystemNotification=!0,e}}},12944:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NativeAdChoicesClickEvent=t.NativeAdCtaClickEvent=t.NativeAdsUnhideEvent=t.NativeAdsHideEvent=t.NativeAdDisplayedEvent=t.NativeAdImpressionLoggedEvent=t.NativeAdDisplayRegisteredEvent=t.NativeAdDisplayErrorEvent=t.NativeAdsErrorEvent=t.NativeAdsLoadedEvent=t.NativeAdsPlacementNotVisibleEvent=t.NativeAdsEligibilityForcedEvent=t.NativeAdsEligibilityErrorEvent=t.NativeAdsEligibilityEvent=t.NativeAdPlacementName=void 0;const n=i(349);!function(e){e.AlertsPanel="alertsPanel",e.ConversationList="conversationList"}(t.NativeAdPlacementName||(t.NativeAdPlacementName={}));class o extends n.TelemetryEventBase{constructor(e){super(),this.props=e}getAttributes(){const e=super.getAttributes();return e.Action=this.getAction(),e.PlacementId=this.props.placementId,e.PlacementName=this.props.placementName,e.AdsGuid=this.props.adsGuid,e.NaExperimentName=this.props.naExperimentName,e.AdsProvider=this.props.provider,e}getEventName(){return"monetization_ads"}}class s extends o{constructor(e){super(e),this.props=e}getAttributes(){const e=super.getAttributes();return e.AdGuid=this.props.adGuid,e}}class a extends o{constructor(e){super(e),this.props=e}getAttributes(){const e=super.getAttributes();return e.AdsElapsedTime=this.props.elapsedTime,e}}class r extends s{constructor(e){super(e),this.props=e}getAttributes(){const e=super.getAttributes();return e.AdElapsedTime=this.props.elapsedTime,e}}t.NativeAdsEligibilityEvent=class extends o{getAction(){return"UserIsAdsEligible"}};t.NativeAdsEligibilityErrorEvent=class extends o{constructor(e){super(e),this.props=e}getAction(){return"AdsEligibilityCheckFailed"}getAttributes(){const e=super.getAttributes();return e.ErrorCode=this.props.errorCode,e.ErrorMessage=this.props.errorMessage,e}};t.NativeAdsEligibilityForcedEvent=class extends o{getAction(){return"AdsEligibilityForced"}};t.NativeAdsPlacementNotVisibleEvent=class extends o{constructor(e){super(e),this.props=e}getAction(){return"PlacementNotVisible"}getAttributes(){const e=super.getAttributes();return e.IsFirstRequest=this.props.isFirstRequest,e}};t.NativeAdsLoadedEvent=class extends a{constructor(e){super(e),this.props=e}getAction(){return"AdsLoaded"}getAttributes(){const e=super.getAttributes();return e.NewAdsCount=this.props.newAdsCount,e}};t.NativeAdsErrorEvent=class extends a{constructor(e){super(e),this.props=e}getAction(){return"AdsError"}getAttributes(){const e=super.getAttributes();return e.ErrorCode=this.props.errorCode,e.ErrorMessage=this.props.errorMessage,e}};t.NativeAdDisplayErrorEvent=class extends r{constructor(e){super(e),this.props=e}getAction(){return"AdDisplayError"}getAttributes(){const e=super.getAttributes();return e.ErrorCode=this.props.errorCode,e.ErrorMessage=this.props.errorMessage,e}};t.NativeAdDisplayRegisteredEvent=class extends r{constructor(e){super(e),this.props=e}getAttributes(){const e=super.getAttributes();return e.IsVisibleOnLoad=this.props.isVisibleOnLoad,e}getAction(){return"AdDisplayRegistered"}};t.NativeAdImpressionLoggedEvent=class extends s{getAction(){return"AdImpressionLogged"}};t.NativeAdDisplayedEvent=class extends r{constructor(e){super(e),this.props=e}getAttributes(){const e=super.getAttributes();return e.IsVisibleOnLoad=this.props.isVisibleOnLoad,e}getAction(){return"AdDisplayed"}};t.NativeAdsHideEvent=class extends o{constructor(e){super(e),this.props=e}getAttributes(){const e=super.getAttributes();return e.RemainingHidingTime=this.props.remainingHidingTime,e.OnStartup=this.props.onStartup,e}getAction(){return"AdsHide"}};t.NativeAdsUnhideEvent=class extends o{constructor(e){super(e),this.props=e}getAttributes(){const e=super.getAttributes();return e.OnStartup=this.props.onStartup,e}getAction(){return"AdsUnhideOnStartup"}};t.NativeAdCtaClickEvent=class extends s{getAction(){return"AdCtaClicked"}};t.NativeAdChoicesClickEvent=class extends s{getAction(){return"AdChoicesClicked"}}},24148:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AccountReadMoreClick=t.CheckAccountClick=t.NavigationHelpAndFeedback=t.NavigationHelpAndFeedbackLink=t.NavigationNotificationSettings=t.NavigationCallInvalidMri=t.NavigationConversation=t.NavigationTab=void 0;const n=i(96486),o=i(71830),s=i(46096),a=i(95691),r=i(53154),l=i(349);class c extends l.TelemetryEventBase{constructor(e){super(),this._to=e}getEventName(){return"all_navigation"}getAttributes(){const e=super.getAttributes();return e.NavigationType=this.getNavDestinationType(),this._to&&(e.NavigationTo=this._to),e}}t.NavigationTab=class extends c{constructor(e){super(e)}getNavDestinationType(){return"TabView"}};t.NavigationConversation=class extends c{constructor(e,t,i,n,s){let a="OneOnOne";o.isGroupConversation(e)?a="Group":o.isEncryptedThread(e)?a="E2EE":o.isAgent(e)?a="Bot":o.isSkypeIdMri(e)&&-1!==e.indexOf("@")?a="SkypeIdLooksLikeEmail":o.isBookmarkConversation(e)&&(a="Bookmarks"),super(a),this._origin=t,this._browserOrigin=i,this._millisecSinceLastConv=n?Date.now()-n:-1,this._conversationsInGroup=s}getNavDestinationType(){return"Conversation"}getAttributes(){return n.assign(super.getAttributes(),this._getOwnAttributes())}_getOwnAttributes(){let e={};return n.isUndefined(this._origin)||(e.Origin=s.NavigationConversationOrigin[this._origin]),n.isUndefined(this._browserOrigin)||(e.BrowserOrigin=s.BrowserOrigin[this._browserOrigin]),!n.isUndefined(this._conversationsInGroup)&&this._conversationsInGroup&&(e.ConversationTypesForUserCount=this._conversationsInGroup),e.TimeSinceLastConv=this._millisecSinceLastConv,e}};t.NavigationCallInvalidMri=class extends c{constructor(e,t){super("CallInvalidMri"),this._isMriInvalid=o.isSkypeIdMri(e)&&-1!==e.indexOf("@"),this._origin=t}shouldSend(){return!!this._isMriInvalid&&super.shouldSend()}getNavDestinationType(){return"CallInvalidMri"}getAttributes(){const e=super.getAttributes();return this._origin&&(e.Origin=s.NavigationCallOrigin[this._origin]),e}};class d extends l.TelemetryEventBase{constructor(e){super(),this._origin=e}getEventName(){return"all_notification_settings_menu_click"}getAttributes(){const e=super.getAttributes();return this._origin&&(e.Origin=a.NavigationSettingsOrigin[this._origin]),e}}t.NavigationNotificationSettings=d;class u extends l.TelemetryEventBase{constructor(e,t){super(),this._target=e,this._isFailure=t}getEventName(){return"feedback_navigation"}getAttributes(){const e=super.getAttributes();return e.Target=this._target,e.IsFailure=this._isFailure?"true":"false",e}}t.NavigationHelpAndFeedbackLink=u;class g extends l.TelemetryEventBase{constructor(e,t,i){super(),this._to=a.NavigationSettingsItem[e],this._origin=a.NavigationSettingsOrigin[t],this._telemetryCorrelationId=i}getEventName(){return"all_feedback_menu_click"}getAttributes(){const e=super.getAttributes();return e.NavigationType="SettingsMenu",this._origin&&(e.Origin=this._origin),this._to&&(e.NavigationTo=this._to),this._telemetryCorrelationId&&(e.TelemetryCorrelationId=this._telemetryCorrelationId),e}}t.NavigationHelpAndFeedback=g;class h extends g{constructor(e,t,i){super(e,a.NavigationSettingsOrigin.LandingScreen,i),this._landingScreenVariant=t}getAttributes(){const e=super.getAttributes();return e.CheckAccountSectionVariant=r.OnboardingCheckAccountSectionVariant[this._landingScreenVariant],e}}t.CheckAccountClick=class extends h{constructor(e,t){super(a.NavigationSettingsItem.CheckAccount,e,t)}};t.AccountReadMoreClick=class extends h{constructor(e,t){super(a.NavigationSettingsItem.AccountReadMore,e,t)}}},11311:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NdiTelemetryEvent=void 0;const n=i(74958),o=i(96486),s=i(52210),a=i(4057),r=i(349);class l extends r.TelemetryEventBase{constructor(e,t){super(),this._name=e;const i=a.default.parseJsonErrorable(t);o.isError(i)?s.error(s.LogTraceArea.Ndi,"NdiTelemetryEvent constructor failed to parse json payload",a.default.errorAsString(i),n.pii.Omit(JSON.stringify(t))):this._payload=i}getEventName(){return this._name}getAttributes(){return o.assign(super.getAttributes(),this._payload)}}t.NdiTelemetryEvent=l},76192:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CaptivePortalQuestionnaireEvent=t.ConnectivityAlertDismissEvent=t.ConnectivityAlertShowEvent=t.CaptivePortalOpenBrowserEvent=t.CaptivePortalCheckFailureEvent=t.CaptivePortalCheckEvent=t.CaptivePortalQuestionnaireOption=void 0;const n=i(46096),o=i(349);var s;!function(e){e[e.Invalid=1]="Invalid",e[e.Useless=2]="Useless",e[e.DontUnderstand=3]="DontUnderstand",e[e.Other=4]="Other",e[e.NoAnswer=5]="NoAnswer"}(s=t.CaptivePortalQuestionnaireOption||(t.CaptivePortalQuestionnaireOption={}));class a extends o.TelemetryEventBase{getEventName(){return"messaging_network"}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}class r extends a{constructor(e,t,i){super(),this._checkResult=e,this._connectedBefore=t,this._checkBefore=i,this._requestSuccess=!0}getActionName(){return"CaptivePortal"}getAttributes(){const e=super.getAttributes();return e.RequestSuccess=this._requestSuccess,e.CheckResult=this._getCheckResult(),e.ConnectedBefore=this._connectedBefore,e.CheckBefore=this._checkBefore,e}_getCheckResult(){return this._requestSuccess?this._checkResult?"Connected":"CaptivePortal":"RequestFailure"}}t.CaptivePortalCheckEvent=r;t.CaptivePortalCheckFailureEvent=class extends r{constructor(e,t,i,n){super(!0,e,t),this._statusText=i,this._timedOut=n,this._requestSuccess=!1}getAttributes(){const e=super.getAttributes();return e.StatusText=this._statusText,e.IsTimeout=this._timedOut,e}};t.CaptivePortalOpenBrowserEvent=class extends a{getActionName(){return"CaptivePortalBrowserOpen"}};t.ConnectivityAlertShowEvent=class extends a{constructor(e){super(),this._alertType=e}getActionName(){return"ConnectivityAlertShow"}getAttributes(){const e=super.getAttributes();return e.AlertType=n.ConnectivityAlertType[this._alertType],e}};t.ConnectivityAlertDismissEvent=class extends a{constructor(e){super(),this._alertType=e}getActionName(){return"ConnectivityAlertDismiss"}getAttributes(){const e=super.getAttributes();return e.AlertType=n.ConnectivityAlertType[this._alertType],e}};t.CaptivePortalQuestionnaireEvent=class extends a{constructor(e){super(),this._answer=e}getActionName(){return"CaptivePortalQuestionnaire"}getAttributes(){const e=super.getAttributes();return e.Answer=s[this._answer],e}}},61781:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(46096),o=i(15963),s=i(94050);t.default=class{constructor(){this._parameters={}}start(e,t,i){this._parameters={avatarSelected:!1,navigationOrigin:t,wizardSteps:i,participantCount:0,visitedParticipantPicker:!1,visitedSetConvInfoPanel:!1,existingConversationFound:!1},this._scenario=new s.default(o.ScenarioName.NewGroupChat,void 0,{},e),this._scenario.start(this._getStartAndFinishProperties())}setAvatarSelection(e){this._parameters.avatarSelected=e}setVisitedSetConvInfoPanel(){this._parameters.visitedSetConvInfoPanel=!0}setVisitedParticipantPicker(){this._parameters.visitedParticipantPicker=!0}setExistingConversationFound(){this._parameters.existingConversationFound=!0}setParticipantCount(e){this._parameters.participantCount=e}markFunnelCompleted(){this._scenario&&this._scenario.markStepCompleted("FunnelCompleted",this._getFunnelProperties())}markFunnelDropped(){this._scenario&&(this._scenario.markStepCompleted("FunnelDropped",this._getFunnelProperties()),this._scenario.finish(this._getStartAndFinishProperties()),this._reset())}markConversationCreated(){this._scenario&&(this._scenario.markStepCompleted("ConversationCreated"),this._scenario.finish(this._getStartAndFinishProperties()),this._reset())}finish(){this._scenario&&(this._scenario.finish(this._getStartAndFinishProperties()),this._reset())}fail(e,t,i,n,o){if(!this._scenario)return;const s={skypeErrorMessage:e||"",skypeErrorCode:t||"",httpStatusText:n||"",httpStatusCode:i||"",errorPayload:o||""};this._scenario.fail(void 0,s),this._reset()}_reset(){this._parameters={},this._scenario=void 0}_getFunnelProperties(){return{AvatarSelected:!!this._parameters.avatarSelected,ParticipantsCount:this._parameters.participantCount||-1,VisitedParticipantPicker:!!this._parameters.visitedParticipantPicker,VisitedSetConvInfoPanel:!!this._parameters.visitedSetConvInfoPanel,ExistingConversationFound:!!this._parameters.existingConversationFound,NewGroupChatNavOrigin:this._parameters.navigationOrigin?n.NavigationConversationOrigin[this._parameters.navigationOrigin]:"",WizardSteps:this._parameters.wizardSteps||""}}_getStartAndFinishProperties(){return{NewGroupChatNavOrigin:this._parameters.navigationOrigin?n.NavigationConversationOrigin[this._parameters.navigationOrigin]:""}}}},40821:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonFatalErrorFetchingToken=t.GaveUpOnFetchingToken=t.GotToken=void 0;const n=i(96486),o=i(349);class s extends o.TelemetryEventBase{getEventName(){return"all_notification_registration"}getAttributes(){return n.assign(super.getAttributes(),{Action:this.getActionName()})}}t.GotToken=class extends s{getActionName(){return"GotToken"}};t.GaveUpOnFetchingToken=class extends s{getActionName(){return"GaveUpOnFetchingToken"}};t.NonFatalErrorFetchingToken=class extends s{constructor(e,t,i){super(),this._errorCode=e,this._errorMessage=t,this._networkConnectivityLevel=i}getActionName(){return"NonFatalErrorFetchingToken"}getAttributes(){return n.assign(super.getAttributes(),{Code:this._errorCode,Message:this._errorMessage,NetworkConnectivityLevel:this._networkConnectivityLevel})}}},28355:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationAppLaunched=t.NotificationIgnoredAsDuplicate=t.NotificationRawContentNotParsed=t.NotificationNotProcessedEvent=t.NotificationForIncorrectRecipientEvent=void 0;const n=i(96486),o=i(71830),s=i(46096),a=i(76173),r=i(349),l=i(35370);class c extends r.TelemetryEventBase{constructor(e,t,i,n){super(),this._event=e,this._signedIn=t,this._notificationTime=i,this._cv=n}getEventName(){return"all_notification"}getAttributes(){return n.assign(super.getAttributes(),{Action:this.getActionName(),EventType:this._event,EventTypeName:a.PNHEvents[this._event],SignedIn:this._signedIn,TimeToProcess:this._notificationTime?this._eventCreationTime-this._notificationTime:-1,CorrelationVector:this._cv?this._cv:""})}}t.NotificationForIncorrectRecipientEvent=class extends c{getActionName(){return"IncorrectRecipient"}};t.NotificationNotProcessedEvent=class extends c{constructor(e,t,i,n){super(e,t,i,void 0),this._nodeId=n}getActionName(){return"NotProcessed"}getAttributes(){return n.assign(super.getAttributes(),{NodeId:this._nodeId||""})}};t.NotificationRawContentNotParsed=class extends c{constructor(e,t,i){super(e,!0,t,i)}getActionName(){return"RawContentNotParsed"}};t.NotificationIgnoredAsDuplicate=class extends c{constructor(e,t,i){super(e,!0,t,i)}getActionName(){return"IgnoredAsDuplicate"}};class d extends r.TelemetryEventBase{constructor(e,t,i=!1){super(),this._type=e,this._conversationId=t,this._isFromBubbleNotification=i}getEventName(){return"all_notification_app_launched"}getAttributes(){const e=super.getAttributes();e.Action="NotificationClicked",e.NotificationType=s.NotificationTypeAppLaunched[this._type],e.IsGroupConversation=o.isGroupConversation(this._conversationId),e.IsFromBubbleNotification=this._isFromBubbleNotification;const t=l.getTrackableConversationId(this._conversationId);return t&&(e.ConversationId=t),e}}t.NotificationAppLaunched=d},29143:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationsPromptClosed=t.NotificationsPromptSettingsOpened=t.NotificationsPromptDisplayed=t.NotificationPromptOrigin=void 0;const n=i(349);var o;!function(e){e[e.ConversationList=0]="ConversationList",e[e.AlertPanel=1]="AlertPanel"}(o=t.NotificationPromptOrigin||(t.NotificationPromptOrigin={}));class s extends n.TelemetryEventBase{constructor(e){super(),this._origin=e}getEventName(){return"notificationsPrompt_action"}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e.Origin=o[this._origin],e}}t.NotificationsPromptDisplayed=class extends s{getActionName(){return"displayed"}};t.NotificationsPromptSettingsOpened=class extends s{constructor(){super(...arguments),this._enabledNotifications=!1}getActionName(){return"opened"}enabledNotifications(){this._enabledNotifications=!0}getAttributes(){const e=super.getAttributes();return e.Enabled_Notifications=this._enabledNotifications,e}};t.NotificationsPromptClosed=class extends s{getActionName(){return"closed"}}},41306:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingFinished=t.SkypeNumberPurchaseFlowOptionSelected=t.SkypeNumberPurchaseFlowOptionClick=t.SkypeNumberPurchaseFlowClick=t.SkypeNumberPanelOpened=t.SkypeNumberTelemetry=t.CreditPickerNoOffersRetryClick=t.CreditPickerNoOffersToRender=t.CreditPickerRenderingError=t.BuyCreditOfferOptionClick=t.CreditOfferOptionClick=t.OffersIntroductionButtonClick=t.ButtonClicked=t.RecommendedSubscriptionsLoaded=t.PurchaseContinuationPanelOpened=t.PromotionDetailsReceived=void 0;const n=i(96486),o=i(96486),s=i(78230),a=i(14806),r=i(32288),l=i(4057),c=i(40363),d=i(349);class u extends d.TelemetryEventBase{getEventName(){return"s4l_offers"}getAriaTenantTokenOverride(){return c.default.getAriaCommerceTenantToken()}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}t.PromotionDetailsReceived=class extends u{constructor(e,t,i){super(),this._offerType=e,this._goLink=t,this._inAppAllowed=i}getActionName(){return"PromotionDetailsReceived"}getAttributes(){const e=super.getAttributes();return e.OfferType=this._offerType,e.InAppAllowed=n.isUndefined(this._inAppAllowed)?"undefined":this._inAppAllowed,e.GoLink=this._goLink,e}};t.PurchaseContinuationPanelOpened=class extends u{constructor(e,t){super(),this._offerType=e,this._campaignRef=t}getActionName(){return"PurchaseContinuationPanelOpened"}getAttributes(){const e=super.getAttributes();return e.OfferType=this._offerType,e.CampaignRef=this._campaignRef||"",e}};t.RecommendedSubscriptionsLoaded=class extends u{constructor(e,t,i){super(),this._cardsToShow=e,this._defaultOpened=t,this._totalRecOffers=i}getActionName(){return"RecommendedSubscriptionsLoaded"}getAttributes(){const e=super.getAttributes();return e.CardsToShowCount=void 0!==this._cardsToShow?this._cardsToShow:"",e.TotalCardsCount=void 0!==this._totalRecOffers?this._totalRecOffers:"",e.isDefaultOpened=void 0!==this._defaultOpened?this._defaultOpened:"",e}};t.ButtonClicked=class extends u{constructor(e,t,i,n,o,s){super(),this._cardType=e,this._location=t,this._offerType=i,this._campaignRef=n,this._cardsToShow=o,this._defaultOpened=s}getActionName(){return"ContinueButtonClicked"}getAttributes(){const e=super.getAttributes();return e.CardType=this._getBackwardsCompatibleCardTypeAttribute(),e.Location=a.Location[this._location],e.OfferType=this._offerType||"",e.CampaignRef=this._campaignRef||"",e.CardsToShowCount=void 0!==this._cardsToShow?this._cardsToShow:"",e.isDefaultOpened=void 0!==this._defaultOpened?this._defaultOpened:"",e}_getBackwardsCompatibleCardTypeAttribute(){switch(this._location){case a.Location.BalancePanel:switch(this._cardType){case a.CardType.CallingRecommended:return"BalanceRecommended";case a.CardType.Credit:case a.CardType.CreditSingle:return"BalanceCredit";default:return"Balance"+a.CardType[this._cardType]}case a.Location.ContinuePurchase:switch(this._cardType){case a.CardType.CallingPersonal:return"ContinueCallingRecommended";case a.CardType.CallingRecommended:return"ContinueCallingPopular";case a.CardType.Credit:case a.CardType.CreditSingle:return"ContinueCredit";default:return"Continue"+a.CardType[this._cardType]}default:return a.Location[this._location]+a.CardType[this._cardType]}}};t.OffersIntroductionButtonClick=class extends u{constructor(e){super(),this._step=e}getActionName(){return"OffersIntroductionButtonClick"}getAttributes(){const e=super.getAttributes();return e.Step=this._step,e}};t.CreditOfferOptionClick=class extends u{constructor(e,t,i){super(),this._creditOffer=e,this._isStacked=t,this._creditPickerSize=i}getActionName(){return"CreditOfferOptionClick"}getAttributes(){const e=super.getAttributes();return e.CreditOffer=this._creditOffer,e.IsStacked=this._isStacked,e.CreditPickerSize=this._creditPickerSize,e}};t.BuyCreditOfferOptionClick=class extends u{constructor(e,t,i,n,o,s){super(),this._creditOffer=e,this._buttonType=t,this._location=i,this._isStacked=n,this._creditPickerSize=o,this._wasCreditPickerUsed=s}getActionName(){return"BuyCreditOfferOptionClick"}getAttributes(){const e=super.getAttributes();return e.CreditOffer=this._creditOffer,e.ButtonType=this._buttonType,e.Location=a.Location[this._location],void 0!==this._isStacked&&(e.IsStacked=this._isStacked),void 0!==this._creditPickerSize&&(e.CreditPickerSize=this._creditPickerSize),void 0!==this._wasCreditPickerUsed&&(e.WasCreditPickerUsed=this._wasCreditPickerUsed),e}};t.CreditPickerRenderingError=class extends u{getActionName(){return"CreditPickerRenderingError"}};t.CreditPickerNoOffersToRender=class extends u{constructor(e){super(),this._location=e}getActionName(){return"CreditPickerNoOffersToRender"}getAttributes(){const e=super.getAttributes();return e.Location=a.Location[this._location],e}};t.CreditPickerNoOffersRetryClick=class extends u{constructor(e){super(),this._location=e}getActionName(){return"CreditPickerNoOffersRetryClick"}getAttributes(){const e=super.getAttributes();return e.Location=a.Location[this._location],e}};t.SkypeNumberTelemetry=class extends u{constructor(e,t,i,n){super(),this._subtype=e,this._action=t,this._location=i,this._fromBuyToFetchDuration=n}getActionName(){return"SkypeNumber"+r.SkypeNumberTelemetryOrigin[this._subtype]+this._actionType()}_actionType(){return this._action?(0,s.flow)(o.camelCase,o.upperFirst)(this._action):""}getAttributes(){const e=super.getAttributes();return e.Location=void 0!==this._location?a.Location[this._location]:"",e.FromBuyToFetchDuration=void 0!==this._fromBuyToFetchDuration?this._fromBuyToFetchDuration:"",e}};t.SkypeNumberPanelOpened=class extends u{constructor(e){super(),this._location=e}getActionName(){return"SkypeNumberPanelOpened"}getAttributes(){const e=super.getAttributes();return e.Location=a.Location[this._location],e}};t.SkypeNumberPurchaseFlowClick=class extends u{constructor(e,t){super(),this._buttonClicked=e,this._defaultClick=t}getActionName(){return"SkypeNumberPurchaseFlowClick"}getAttributes(){const e=super.getAttributes();return e.ButtonClicked=this._buttonClicked,void 0!==this._defaultClick&&(e.DefaultClick=this._defaultClick),e}};t.SkypeNumberPurchaseFlowOptionClick=class extends u{constructor(e){super(),this._skypeNumberOption=e}getActionName(){return"SkypeNumberPurchaseFlowOptionClick"}getAttributes(){const e=super.getAttributes();return e.SkypeNumberOption=this._skypeNumberOption,e}};t.SkypeNumberPurchaseFlowOptionSelected=class extends u{constructor(e,t,i,n){super(),this._skypeNumberOption=e,this._optionSelectedCountryRegion=t,this._optionSelectedArea=i,this._optionSelectedPrefix=n}getActionName(){return"SkypeNumberPurchaseFlowOptionSelected"}getAttributes(){const e=super.getAttributes();return e.SkypeNumberOption=this._skypeNumberOption,e.OptionSelectedCountryRegion=l.default.toUpper(this._optionSelectedCountryRegion)||"",e.OptionSelectedArea=l.default.toUpper(this._optionSelectedArea)||"",e.OptionSelectedPrefix=this._optionSelectedPrefix||"",e}};t.LoadingFinished=class extends u{constructor(e,t,i,n){super(),this._duration=e,this._location=t,this._closedBeforeLoadingFinished=i,this._isNative=n}getActionName(){return"LoadingFinished"}getAttributes(){let e=super.getAttributes();return e.Duration=this._duration,e.Location=a.Location[this._location],e.ClosedBeforeLoadingFinish=this._closedBeforeLoadingFinished,e.IsNative=this._isNative,e}}},94021:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserProfileChange=t.LandingPageWithCardsTelemetryEvent=t.CheckAccountSectionUnknownSignId=t.SwitchAccountClicked=t.StartNewConversationClicked=t.LandingPageShown=t.OnboardingActivityDone=t.OnboardingActivityType=t.FinishSetupPromptClicked=t.WelcomeViewWithCardsDisplayed=t.WelcomeViewWithProfileUpdateDisplayed=t.ClickedLearnMoreOnEmptyStateCta=t.DisplayedEmptyStateCta=t.EmptyStateOrigin=t.TutorialLaunched=t.TutorialLaunchOrigin=t.SetupWizardClickedOutside=t.BugReportedInWizard=t.SetupWizardFinished=t.AvatarChanged=t.SetupWizardStarted=void 0;const n=i(96486),o=i(2604),s=i(16778),a=i(72822),r=i(46096),l=i(53154),c=i(349);class d extends c.TelemetryEventBase{constructor(){super(...arguments),this._onboardingTrackingAttributes={}}setOnboardingAttributes(e){this._onboardingTrackingAttributes=e}getOnboardingAttributes(){return this._onboardingTrackingAttributes}getAttributes(){return n.extend({},super.getAttributes(),this.getOnboardingAttributes())}}class u extends d{constructor(e){super(),this._dialogOrigin=e}getEventName(){return"onboarding_setup"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e.DialogOrigin=a.DialogNavOrigin[this._dialogOrigin],e}}t.SetupWizardStarted=class extends u{constructor(e,t,i,n,o,s,a,r){super(e),this._appState=t,this._stringifiedSteps=i,this._notificationsPermission=n,this._cameraPermission=o,this._microphonePermission=s,this._contactsPermission=a,this._scenarioId=r}getActionName(){return"started"}getAttributes(){let e=super.getAttributes();return e.AppState=s.Types.AppActivationState[this._appState],e.StepSequence=this._stringifiedSteps,e.NotificationsPermission=o.PermissionStatus[this._notificationsPermission],e.CameraPermission=o.PermissionStatus[this._cameraPermission],e.MicrophonePermission=o.PermissionStatus[this._microphonePermission],e.ContactsPermission=o.PermissionStatus[this._contactsPermission],e.ScenarioId=this._scenarioId,e}};t.AvatarChanged=class extends u{constructor(e,t,i,n){super(n),this._success=e,this._avatarChangeType=t,this._durationInMs=i}getActionName(){return"avatar_changed"}getAttributes(){return n.assign(super.getAttributes(),{ChangeType:r.AvatarChangeType[this._avatarChangeType],Success:this._success,Duration:this._durationInMs})}};t.SetupWizardFinished=class extends u{constructor(e,t,i,n,o,s){super(t),this._duration=e,this._firstOccurence=i,this._scenarioId=n,this._success=o,this._stringifiedSteps=s}getActionName(){return"finished"}getAttributes(){let e=super.getAttributes();return e.Duration=this._duration,e.FirstOccurence=this._firstOccurence,e.ScenarioId=this._scenarioId,e.Success=this._success,e.StepSequence=this._stringifiedSteps,e}};t.BugReportedInWizard=class extends u{constructor(e){super(e)}getActionName(){return"bugReportedInWizard"}};t.SetupWizardClickedOutside=class extends u{constructor(e){super(e)}getActionName(){return"clickedOutside"}getAttributes(){return super.getAttributes()}};class g extends c.TelemetryEventBase{constructor(){super(...arguments),this._onboardingTrackingAttributes={}}setOnboardingAttributes(e){this._onboardingTrackingAttributes=e}getOnboardingAttributes(){return this._onboardingTrackingAttributes}getEventName(){return"onboarding_postsetup"}getAttributes(){let e=super.getAttributes();return e=n.merge([],e,this.getOnboardingAttributes()),e}}var h,p,m;!function(e){e[e.LandingScreenStandard=0]="LandingScreenStandard",e[e.LandingScreenForNewUsers=1]="LandingScreenForNewUsers"}(h=t.TutorialLaunchOrigin||(t.TutorialLaunchOrigin={}));t.TutorialLaunched=class extends g{constructor(e,t){super(),this._origin=e,this._isRestarted=t}getActionName(){return"tutorialLaunched"}getAttributes(){let e=super.getAttributes();return e.Origin=h[this._origin],e.IsRestarted=this._isRestarted,e}},function(e){e[e.Unknown=0]="Unknown",e[e.NoCalls=1]="NoCalls",e[e.NoRecentConversations=2]="NoRecentConversations"}(p=t.EmptyStateOrigin||(t.EmptyStateOrigin={}));t.DisplayedEmptyStateCta=class extends g{constructor(e){super(),this._origin=e}getActionName(){return"emptyStateCtaDisplayed"}getAttributes(){return n.assign(super.getAttributes(),{Origin:p[this._origin]})}};t.ClickedLearnMoreOnEmptyStateCta=class extends g{getActionName(){return"clickedLearnMoreOnEmptyStateCta"}};t.WelcomeViewWithProfileUpdateDisplayed=class extends g{getActionName(){return"welcomeViewWithProfileUpdateDisplayed"}};t.WelcomeViewWithCardsDisplayed=class extends g{getActionName(){return"welcomeViewWithCardsDisplayed"}};t.FinishSetupPromptClicked=class extends g{getActionName(){return"finishSetupPromptClicked"}},function(e){e[e.FirstMessageReceived=0]="FirstMessageReceived",e[e.FirstCallAnswered=1]="FirstCallAnswered"}(m=t.OnboardingActivityType||(t.OnboardingActivityType={}));t.OnboardingActivityDone=class extends g{constructor(e){super(),this._activityType=e}getActionName(){return"activityDone"}getAttributes(){let e=super.getAttributes();return e.ActivityType=m[this._activityType],e}};class S extends c.TelemetryEventBase{constructor(){super(...arguments),this._onboardingTrackingAttributes={}}setOnboardingAttributes(e){this._onboardingTrackingAttributes=e}getOnboardingAttributes(){return this._onboardingTrackingAttributes}getEventName(){return"onboarding_homescreen"}getAttributes(){let e=super.getAttributes();return e=n.merge([],e,this.getOnboardingAttributes()),e.Action=this.getActionName(),e}}t.LandingPageShown=class extends S{getActionName(){return"LandingPageShown"}};t.StartNewConversationClicked=class extends S{getActionName(){return"StartNewConversationClicked"}};class C extends S{constructor(e){super(),this._variant=e}getAttributes(){let e=super.getAttributes();return e.Variant=l.OnboardingCheckAccountSectionVariant[this._variant],e}}t.SwitchAccountClicked=class extends C{getActionName(){return"SwitchAccountClick"}};t.CheckAccountSectionUnknownSignId=class extends C{constructor(e,t){super(e),this._originalVariant=t}getActionName(){return"CheckAccountSectionUnknownSignId"}getAttributes(){let e=super.getAttributes();return e.OriginalVariant=l.OnboardingCheckAccountSectionVariant[this._originalVariant],e}};t.LandingPageWithCardsTelemetryEvent=class extends d{constructor(e){super(),this.props=e}getEventName(){return"onboarding_landing_page_with_cards"}getAttributes(){const e=super.getAttributes();return e.CardName=l.LandingPageCardId[this.props.cardId],this.props.componentMounted&&(e.Mounted=this.props.componentMounted),this.props.actionPerformed&&(e.ActionPerformed=this.props.actionPerformed),this.props.wasAppUpdated&&(e.WasAppUpdated=this.props.wasAppUpdated),e}};t.UserProfileChange=class extends u{constructor(e){super(e.origin),this._props=e}getActionName(){return"user_profile_change"}getAttributes(){const e=super.getAttributes();return this._props.addPhoneNumber&&(e.DidChooseAddPhoneNumber=this._props.addPhoneNumber),this._props.addEmail&&(e.DidChooseAddEmail=this._props.addEmail),e}}},61044:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OneDriveAddinLoadEvent=t.OneDriveStoreEvent=t.OneDriveStoreEvents=void 0;const n=i(96486),o=i(28234),s=i(29138);var a;!function(e){e[e.OneDriveDriveDetailsReceived=0]="OneDriveDriveDetailsReceived",e[e.OneDriveAllItemsReceived=1]="OneDriveAllItemsReceived",e[e.OneDriveRecentItemsReceived=2]="OneDriveRecentItemsReceived",e[e.OneDriveSearchItemsReceived=3]="OneDriveSearchItemsReceived",e[e.OneDriveExistingShareLinkReceived=4]="OneDriveExistingShareLinkReceived",e[e.OneDriveCreateShareLinkReceived=5]="OneDriveCreateShareLinkReceived"}(a=t.OneDriveStoreEvents||(t.OneDriveStoreEvents={}));class r extends s.IntegrationStoreTelemetryEvent{constructor(e,t,i,n,s){super(o.IntegrationIds.OneDrive,a[e],t,i,n,s)}}t.OneDriveStoreEvent=r;class l extends s.IntegrationActionTelemetryEvent{constructor(e){super(o.IntegrationIds.OneDrive,"OneDriveAddinLoaded"),this._timeToLoad=e}getIntegrationActionAttributes(){return n.merge({LoadDuration:this._timeToLoad},super.getIntegrationActionAttributes())}}t.OneDriveAddinLoadEvent=l},69417:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SmsDeliveryFailed=t.SmsLineSwitcherShown=void 0;const n=i(96486),o=i(15301),s=i(349);var a;!function(e){e[e.SmsLineSwitcherShown=0]="SmsLineSwitcherShown",e[e.SmsDeliveryFailed=1]="SmsDeliveryFailed"}(a||(a={}));class r extends s.TelemetryEventBase{constructor(e){super(),this._action=e}getAttributes(){const e=super.getAttributes();return e.Action=a[this._action],e}getEventName(){return"messaging_sms"}}t.SmsLineSwitcherShown=class extends r{constructor(){super(a.SmsLineSwitcherShown),this._wasSmsSent=!1,this._wasSkypeMessageSent=!1,this._switchedToSkype=!1,this._switchedToSms=!1,this._flowId=o.default.getFlowId()}setSmsWasSent(e){this._wasSmsSent=e}setSwitchedToSmsMode(e){this._switchedToSms=e}setSwitchedToSkype(e){this._switchedToSkype=e}setFlowId(e){this._flowId=e}setSkypeMessageSent(e){this._wasSkypeMessageSent=e}getAttributes(){const e=super.getAttributes();return e.DidSwitchToSms=this._switchedToSms,e.DidSendSMS=this._wasSmsSent,e.DidSwitchToSkype=this._switchedToSkype,e.DidSendSkypeMsg=this._wasSkypeMessageSent,e.FlowId=this._flowId,e}};t.SmsDeliveryFailed=class extends r{constructor(e,t){super(a.SmsDeliveryFailed),this._clientMessageId=e,this._deliveryStatus=t}getAttributes(){return n.assign({},super.getAttributes(),{ClientMessageId:this._clientMessageId||"",ErrorCategory:this._deliveryStatus.errorCategory,Status:this._deliveryStatus.status})}}},35426:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.E911BingMapsEvent=t.E911EmergencyContentEvent=t.E911LocationUpdateEvent=t.E911LocationConsentEvent=t.E911AcknowledgementEvent=t.TasterImageShown=t.DefaultCountryStored=t.ContactSelected=t.SaveContactDialpadFlowStep=t.DialerPanelComponentClick=t.EmergencyCallDefaultCountryChanged=t.EmergencyCallFailed=t.EmergencyCall=t.EmergencyNumber=t.StartCall=t.PasteNumber=t.NavigateToDialpad=t.SaveContactFlowStep=t.DialerPanelClickTarget=void 0;const n=i(46096),o=i(40363),s=i(349);var a,r;!function(e){e[e.ContactsIcon=0]="ContactsIcon",e[e.SettingsButton=1]="SettingsButton",e[e.CallButton=2]="CallButton",e[e.SmsButton=3]="SmsButton",e[e.SaveContactButton=4]="SaveContactButton"}(a=t.DialerPanelClickTarget||(t.DialerPanelClickTarget={})),function(e){e[e.SaveContactButtonShow=0]="SaveContactButtonShow",e[e.SaveContactSuceeded=1]="SaveContactSuceeded",e[e.SaveContactCancelled=2]="SaveContactCancelled"}(r=t.SaveContactFlowStep||(t.SaveContactFlowStep={}));class l extends s.TelemetryEventBase{getEventName(){return"s4l_dialpad"}getAriaTenantTokenOverride(){return o.default.getAriaCommerceTenantToken()}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}t.NavigateToDialpad=class extends l{constructor(e,t=!1){super(),this._navigationSource=e,this._usePrefilledNumber=t}getActionName(){return"NavigateToDialpad"}getAttributes(){const e=super.getAttributes();return e.NavigationSource=n.DialerNavigationSource[this._navigationSource],e.UsePrefilledNumber=this._usePrefilledNumber,e}};t.PasteNumber=class extends l{getActionName(){return"PasteNumber"}};t.StartCall=class extends l{constructor(e){super(),this._phoneNumberOrigin=e}getActionName(){return"StartCall"}getAttributes(){const e=super.getAttributes();return e.PhoneNumberOrigin=this._phoneNumberOrigin,e}};t.EmergencyNumber=class extends l{getActionName(){return"EmergencyNumber"}};t.EmergencyCall=class extends l{getActionName(){return"EmergencyCall"}};t.EmergencyCallFailed=class extends l{getActionName(){return"EmergencyCallFailed"}};t.EmergencyCallDefaultCountryChanged=class extends l{constructor(e){super(),this._country=e}getActionName(){return"EmergencyCallDefaultCountryChanged"}getAttributes(){const e=super.getAttributes();return e.Country=this._country,e}};t.DialerPanelComponentClick=class extends l{constructor(e,t){super(),this._target=e,this._userEntitlementsSummary=t}getActionName(){return"DialerPanelComponentClick"}getAttributes(){const e=super.getAttributes();return e.Target=a[this._target],this._userEntitlementsSummary&&(e.UserEntitlementsSummary=this._userEntitlementsSummary),e}};t.SaveContactDialpadFlowStep=class extends l{constructor(e){super(),this._step=e}getActionName(){return r[this._step]}};t.ContactSelected=class extends l{constructor(e){super(),this._inputLength=e}getActionName(){return"ContactSelected"}getAttributes(){const e=super.getAttributes();return e.InputLength=this._inputLength,e}};t.DefaultCountryStored=class extends l{constructor(e,t){super(),this._countryOld=e,this._countryNew=t}getActionName(){return"DefaultCountryStored"}getAttributes(){const e=super.getAttributes();return e.CountryOld=this._countryOld,e.CountryNew=this._countryNew,e}};t.TasterImageShown=class extends l{getActionName(){return"TasterImageShown"}};t.E911AcknowledgementEvent=class extends l{getActionName(){return"E911Acknowledgement"}};t.E911LocationConsentEvent=class extends l{constructor(e){super(),this._isGranted=e}getActionName(){return"E911LocationConsent"}getAttributes(){const e=super.getAttributes();return e.IsGranted=this._isGranted,e}};t.E911LocationUpdateEvent=class extends l{getActionName(){return"E911LocationUpdate"}};t.E911EmergencyContentEvent=class extends l{getActionName(){return"E911EmergencyContent"}};t.E911BingMapsEvent=class extends l{constructor(e){super(),this._statusCode=e}getActionName(){return"E911BingMaps"}getAttributes(){const e=super.getAttributes();return e.StatusCode=this._statusCode,e}}},23175:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SendCreditEvent=t.SendCreditStep=t.NativeProductFetch=t.PurchaseConfirmationDialogClick=t.PurchaseConfirmationDialog=t.SkypeNumberPurchase=t.SubscriptionPurchase=t.Purchase=t.PurchaseStep=t.GPlayStep=t.PaymentStep=t.GooglePayStep=t.GPayStep=t.PurchaseFlowStep=void 0;const n=i(96486),o=i(4057),s=i(40363),a=i(349);var r;!function(e){e.ShowFreeTrial="show_free_trial",e.ClickFreeTrial="click_free_trial"}(t.PurchaseFlowStep||(t.PurchaseFlowStep={}));class l extends a.TelemetryEventBase{getEventName(){return"s4l_payments"}getAriaTenantTokenOverride(){return s.default.getAriaCommerceTenantToken()}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}!function(e){e.IsReady="isReady",e.NotReady="notReady",e.RequestPaymentSuccess="requestPaymentSuccess",e.RequestPaymentFail="requestPaymentFail"}(t.GPayStep||(t.GPayStep={}));t.GooglePayStep=class extends l{constructor(e,t,i){super(),this._props={},this._props.step=e,this._props.errorCode=null!=t?t:"",this._props.errorMessage=null!=i?i:""}getActionName(){return"gpay_step"}getAttributes(){return n.assign(super.getAttributes(),this._props)}};class c extends l{constructor(e,t={}){super(),this._props=t,this._props.step=e}getActionName(){return"payment_step"}getAttributes(){return n.assign(super.getAttributes(),this._props)}}t.PaymentStep=c;t.GPlayStep=class extends c{constructor(e,t={}){super(e,t)}getActionName(){return"gplay_step"}};t.PurchaseStep=class extends l{constructor(e,t={}){super(),this._props=t,this._props.step=e}getActionName(){return"purchase_step"}getAttributes(){return n.assign(super.getAttributes(),this._props)}};class d extends l{constructor(e,t,i,n,o,s){super(),this._timeSpent=e,this._buttonType=t,this._isNative=i,this._product=n,this._productCurrency=o,this._appStoreCountry=s}getActionName(){return"buy_credit_click"}getAttributes(){let e=super.getAttributes();return e.TimeSpent=this._timeSpent/1e3,e.ButtonType=this._buttonType,e.IsNative=this._isNative,e.Product=this._product,e.ProductCurrency=this._productCurrency||"",e.AppStoreCountry=this._appStoreCountry||"",e}}t.Purchase=d;t.SubscriptionPurchase=class extends d{getActionName(){return"buy_subscription_click"}};t.SkypeNumberPurchase=class extends d{constructor(e,t,i,n,o,s,a,r,l){super(e,t,i,n,o,s),this._snCountryRegion=a,this._snArea=r,this._snPrefix=l}getActionName(){return"buy_skypenumber_click"}getAttributes(){let e=super.getAttributes();return e.CountryRegion=o.default.toUpper(this._snCountryRegion)||"",e.Area=o.default.toUpper(this._snArea)||"",e.Prefix=this._snPrefix||"",e}};class u extends l{constructor(e){super(),this.payload=e}getActionName(){return"purchase_dialog_open"}getAttributes(){let e=super.getAttributes();return e.DialogId=this.payload.dialogId,e}}t.PurchaseConfirmationDialog=u;t.PurchaseConfirmationDialogClick=class extends u{constructor(e){super(e),this.payload=e}getActionName(){return"purchase_dialog_click"}getAttributes(){let e=super.getAttributes();return e.ConfirmationDuration=this.payload.confirmationDuration/1e3,e.ButtonType=this.payload.buttonType,e}};t.NativeProductFetch=class extends l{constructor(e,t,i){super(),this._duration=e,this._isSuccess=t,this._error=i}getActionName(){return"fetch_native_product"}getAttributes(){let e=super.getAttributes();return e.Duration=this._duration,e.IsSuccess=this._isSuccess,this._error&&(e.Error=this._error),e}},function(e){e[e.ChatClick=0]="ChatClick",e[e.EligibilityConfirm=1]="EligibilityConfirm",e[e.Submit=2]="Submit",e[e.Confirm=3]="Confirm",e[e.Message=4]="Message"}(r=t.SendCreditStep||(t.SendCreditStep={}));t.SendCreditEvent=class extends l{constructor(e,t,i){super(),this._step=e,this._denominationId=t,this._cardId=i}getActionName(){return"send_credit"}getAttributes(){const e=super.getAttributes();return e.Step=r[this._step],void 0!==this._denominationId&&(e.DenominationId=this._denominationId),void 0!==this._cardId&&(e.CardId=this._cardId),e}}},94465:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PeopleYouMayKnowNoticeDialogEvent=t.SyncAddressBookDialogEvent=void 0;const n=i(96486),o=i(63823);class s extends o.OnboardingDialogEvent{constructor(){super(...arguments),this._didPressNextOnValueProp=!1,this._didHavePermission=!1,this._didPromptBefore=!1,this._didRequestPermission=!1,this._didGrantPermission=!1,this._didStartSync=!1,this._didVisitPrivacyStatement=!1,this._didSeeLearnMoreButton=!1,this._didVisitLearnMorePopup=!1}getEventName(){return"people_syncAddressBookDialog"}markDidPressNextOnValueProp(){this._didPressNextOnValueProp=!0}setInitialPermission(e){this._didHavePermission=e}setDidPromptBefore(e){this._didPromptBefore=e}markDidRequestPermission(){this._didRequestPermission=!0}setDidGrantPermission(e){this._didGrantPermission=e}markDidStartSync(){this._didStartSync=!0}markDidVisitPrivacyStatement(){this._didVisitPrivacyStatement=!0}markDidSeeLearnMoreButton(){this._didSeeLearnMoreButton=!0}markDidVisitLearnMorePopup(){this._didVisitLearnMorePopup=!0}getAttributes(){return n.extend({},super.getAttributes(),this.getOnboardingAttributes(),{DidPressNextOnValueProp:this._didPressNextOnValueProp,DidHavePermission:this._didHavePermission,DidPromptBefore:this._didPromptBefore,DidRequestPermission:this._didRequestPermission,DidGrantPermission:this._didGrantPermission,DidStartSync:this._didStartSync,DidVisitPrivacyStatement:this._didVisitPrivacyStatement,DidSeeLearnMoreButton:this._didSeeLearnMoreButton,DidVisitLearnMorePopup:this._didVisitLearnMorePopup})}}t.SyncAddressBookDialogEvent=s;class a extends o.OnboardingDialogEvent{constructor(){super(...arguments),this._didVisitPrivacyStatement=!1}getEventName(){return"people_peopleyoumayknownoticedialog"}markDidVisitPrivacyStatement(){this._didVisitPrivacyStatement=!0}getAttributes(){return n.assign(super.getAttributes(),{DidVisitPrivacyStatement:this._didVisitPrivacyStatement})}}t.PeopleYouMayKnowNoticeDialogEvent=a},92210:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioName=void 0;const n=i(96486),o=(i(16778),i(60),i(46096)),s=i(36237),a=i(15963);Object.defineProperty(t,"ScenarioName",{enumerable:!0,get:function(){return a.ScenarioName}});const r=i(12770),l=i(53374);class c{constructor(e,t,i={},n){this._properties=i,this._experimentConfigIds=n,this._totalDuration=0,this._isResolved=!1,this._isInvalidated=!1,this._markedSteps=[],this._secondaryScenarios={},this._duplicateStepMarking=!1,this._scenarioName=a.ScenarioName[e],this.reset(t)}setScenarioTimeout(e,t=5e3){this._timeoutTimerId=r.default.setTimeout((()=>{this._timeoutTimerId=void 0;e()&&this.fail("timeout")}),t)}reset(e){this._cleanup(),this._scenarioId=e||l.default.newGuid(),this._lastAutomaticTimestamp=void 0,this._totalDuration=0,this._isResolved=!1,this._isInvalidated=!1,this._markedSteps=[],this._secondaryScenarios={}}_cleanup(){this._cleanupScenarioTimeout(),this._appStateSub&&(this._appStateSub.unsubscribe(),this._appStateSub=void 0)}_cleanupScenarioTimeout(){this._timeoutTimerId&&(r.default.clearTimeout(this._timeoutTimerId),this._timeoutTimerId=void 0)}invalidateWhenBackgrounded(){}hasStarted(){return void 0!==this._lastAutomaticTimestamp}getCurrentDuration(){return void 0===this._lastAutomaticTimestamp?0:this._totalDuration+(Date.now()-this._lastAutomaticTimestamp)}isStepMarked(e){return n.some(this._markedSteps,(t=>t.name===e))}start(e,t){this._isResolved||this._markStep("started",e,0,!1,!1,!1,t)}resume(e){this._isResolved||(this._lastAutomaticTimestamp=e)}markStepCompleted(e,t,i,n=!1){this._isInvalidated||this._markStep(e,t,i,n,!1,!1)}markPerfTargetStepCompleted(e,t,i){this._isInvalidated||this._markStep(e,t,i,!1,!0,!1)}_markStep(e,t,i,o,s,a,r){const l=Date.now(),c=void 0===i?l-this._lastAutomaticTimestamp:i;this._totalDuration+=c,this._lastAutomaticTimestamp=void 0===r?l:r,this._markedSteps.push({name:e,stepDuration:c,totalDuration:this._totalDuration,timestamp:this._lastAutomaticTimestamp,isTraceOnly:o,isTarget:s,isFinal:a}),o||(n.assign(this._properties,t),a||(this._properties["step_name_"+e.toLowerCase()]=c))}finish(e,t,i){this._isInvalidated||this._reportFinalEvent("finished",e,t,i)}fail(e,t){if(this._isInvalidated)return;let i=n.clone(t)||{};i.error_description=e||"",this._reportFinalEvent("failed",i)}invalidate(e){e&&this._reportFinalEvent(e),this._cleanup(),this._isInvalidated=!0}setDuplicateStepMarkingEnabled(e=!0){this._duplicateStepMarking=e}_reportFinalEvent(e,t,i,a){if(this._isResolved)return;const r=n.some(this._markedSteps,(e=>e.isTarget));if(this._markStep(e,t,i,!1,!r,!0),this._cleanup(),this._isResolved=!0,!a&&s.isTraceEnabled(o.LogTraceArea.ScenarioTracker)){const e=n.last(this._markedSteps),t=e?e.totalDuration:0,i="Id: "+this._scenarioId+"; Name: "+this._scenarioName+"\n"+n.map(this._properties,((e,t)=>`\tContext_${t}: ${e}\n`)).join("")+n.map(this._markedSteps,(e=>`\tPERF_${this._scenarioName}_${e.name} : ${e.stepDuration} ms | ${e.totalDuration} ms`+(e.isTarget?" (TARGET)":"")+"\n")).join("")+`\tPERF_${this._scenarioName}_Total : ${t} ms`;s.log(o.LogTraceArea.ScenarioTracker,i)}}renameScenario(e){this._scenarioName=a.ScenarioName[e]}spawnSecondaryScenario(e,t){this._checkSecondaryScenario(e);let i=new c(e,this._scenarioId,void 0,void 0);return t&&i.setScenarioTimeout((()=>!0),t),this._secondaryScenarios[a.ScenarioName[e]]=i,i}getSecondaryScenario(e){return this._checkSecondaryScenario(e),this._secondaryScenarios[a.ScenarioName[e]]}_checkSecondaryScenario(e){let t=this._secondaryScenarios[a.ScenarioName[e]];t&&t._isResolved&&delete this._secondaryScenarios[a.ScenarioName[e]]}isResolved(){return this._isResolved}hasUnresolvedSecondaryScenarios(){return!n.isEmpty(this._secondaryScenarios)}}t.default=c},69399:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SearchPerformanceTelemetryEvent=t.PeopleRecommendationsFetched=t.ComposerEmoticonLoaded=t.CompositeSearch=t.CompositeSearchOrigin=t.SearchRequestResultsRendered=t.SearchRequestResultsNotReceived=t.SearchRequestResultsReceived=t.SearchRequestCallSent=t.SearchRequestBase=t.ScenarioSearchTypes=t.AdditionalLoading=t.LocalAddressBookFinishedProcessing=t.LocalAddressBookCalculatedAllHashes=t.LocalAddressBookGotLocalContacts=t.ContactsPanelV2FullyRendered=t.ContactsPanelAllContactsZeroTermResultsRendered=t.ContactsPanelLocalContactsZeroTermResultsRendered=t.ContactsPanelActiveNowZeroTermResultsRendered=t.ContactsPanelSkypeZeroTermResultsRendered=t.ContactsPanelPeopleZeroTermResultsRendered=t.ContactsPanelRendered=t.SearchPanelZeroTermResultsRendered=t.SearchPanelRendered=t.PerfPictureViewerFullLoaded=t.PerfPictureViewerThumbLoaded=t.PerfCameraPhoto=t.PerfStartupPhase=t.PerfEventBase=void 0;const n=i(96486),o=i(349),s=i(53374);class a extends o.TelemetryEventBase{constructor(e,t){super(),this._durationInMs=e,this._isStackMode=t}shouldSend(){const e=o.SampledPerfEvents[this.getScenarioName()];return!n.isNumber(e)||s.default.sampleForPercentage(e)}getEventName(){return"perf"}getAttributes(){const e=super.getAttributes();return e.Scenario=this.getScenarioName(),e.Duration=this._durationInMs||"",e.DisplayMode=this._isStackMode?"Stack":"Composite",e}}t.PerfEventBase=a;class r extends a{constructor(e,t,i,n){super(t,!1),this._phase=e,this._durationInMsSincePreviousPhase=i,this._durationInMsSinceForegrounded=n}shouldSend(){return n.isUndefined(r._shouldSend)&&(r._shouldSend=super.shouldSend()),r._shouldSend}getScenarioName(){return"StartupPerfPhase"+this._phase}getAttributes(){const e=super.getAttributes();return e.DurationSinceForegrounded=n.isUndefined(this._durationInMsSinceForegrounded)?-1:this._durationInMsSinceForegrounded,e.DurationSincePreviousPhase=this._durationInMsSincePreviousPhase,e}}t.PerfStartupPhase=r,r._shouldSend=void 0;t.PerfCameraPhoto=class extends a{getScenarioName(){return"CameraPhoto"}};t.PerfPictureViewerThumbLoaded=class extends a{getScenarioName(){return"PictureViewerThumbLoaded"}};t.PerfPictureViewerFullLoaded=class extends a{getScenarioName(){return"PictureViewerFullLoaded"}};t.SearchPanelRendered=class extends a{getScenarioName(){return"SearchPanelRendered"}};t.SearchPanelZeroTermResultsRendered=class extends a{getScenarioName(){return"SearchPanelZeroTermResultsRendered"}};t.ContactsPanelRendered=class extends a{getScenarioName(){return"ContactsPanelRendered"}};t.ContactsPanelPeopleZeroTermResultsRendered=class extends a{getScenarioName(){return"ContactsPanelPeopleZeroTermResultsRendered"}};t.ContactsPanelSkypeZeroTermResultsRendered=class extends a{getScenarioName(){return"ContactsPanelSkypeZeroTermResultsRendered"}};t.ContactsPanelActiveNowZeroTermResultsRendered=class extends a{getScenarioName(){return"ContactsPanelActiveNowZeroTermResultsRendered"}};t.ContactsPanelLocalContactsZeroTermResultsRendered=class extends a{getScenarioName(){return"ContactsPanelActiveNowZeroTermResultsRendered"}};t.ContactsPanelAllContactsZeroTermResultsRendered=class extends a{getScenarioName(){return"ContactsPanelAllContactsZeroTermResultsRendered"}};t.ContactsPanelV2FullyRendered=class extends a{constructor(e,t,i,n,o){super(e,t),this._initialTab=i,this._hasSyncedContacts=n,this._isActiveNowFilterSelected=o}getScenarioName(){return"ContactsPanelV2FullyRendered"}getAttributes(){const e=super.getAttributes();return e.InitialTab=this._initialTab,e.HasSyncedContacts=this._hasSyncedContacts,e.IsActiveNowFilterSelected=this._isActiveNowFilterSelected,e}};t.LocalAddressBookGotLocalContacts=class extends a{constructor(e,t,i,n){super(e,t),this._numLocalContacts=i,this._isInitialSync=n}getScenarioName(){return"LocalAddressBookGotLocalContacts"}getAttributes(){const e=super.getAttributes();return e.NumLocalContacts=this._numLocalContacts,e.IsInitialSync=this._isInitialSync,e}};t.LocalAddressBookCalculatedAllHashes=class extends a{getScenarioName(){return"LocalAddressBookCalculatedAllHashes"}};var l;function c(e){switch(e){case l.PublicDirectory:return"PublicDirectoryService";case l.Message:return"MessageSearchService";case l.IndexedDB:return"IndexedDbSearch";case l.Bots:return"BotsSearchService";case l.AllPeople:return"AllPeopleSearch";case l.FastContacts:return"FastContactsSearch";case l.MessageInConversation:return"MessageSearchService";default:s.default.switchStatementExhaustiveChecking(e)}}t.LocalAddressBookFinishedProcessing=class extends a{getScenarioName(){return"LocalAddressBookFinishedProcessing"}},function(e){e[e.None=0]="None",e[e.IndexedDB=1]="IndexedDB",e[e.ChatService=2]="ChatService"}(t.AdditionalLoading||(t.AdditionalLoading={})),function(e){e[e.PublicDirectory=0]="PublicDirectory",e[e.Message=1]="Message",e[e.IndexedDB=2]="IndexedDB",e[e.Bots=3]="Bots",e[e.AllPeople=4]="AllPeople",e[e.FastContacts=5]="FastContacts",e[e.MessageInConversation=6]="MessageInConversation"}(l=t.ScenarioSearchTypes||(t.ScenarioSearchTypes={}));class d extends a{constructor(e,t,i){super(e.durationInMs,e.isStackMode),this._messageProps=i,this._perfEventBaseProps=e}getAttributes(){const e=super.getAttributes();return e.IsZeroTermSearch=this._perfEventBaseProps.isZeroTermSearch,n.isUndefined(this._messageProps)||(e.Endpoint=this._messageProps.endpoint,e.SearchLimit=this._messageProps.searchLimit),e}}t.SearchRequestBase=d;t.SearchRequestCallSent=class extends d{constructor(e,t,i){super(e,t,i),this._scenarioName=c(t)+"CallSent"}getScenarioName(){return this._scenarioName}};t.SearchRequestResultsReceived=class extends d{constructor(e,t,i){super(e,t,i),this._scenarioName=c(t)+"ResultsReceived"}getScenarioName(){return this._scenarioName}};t.SearchRequestResultsNotReceived=class extends d{constructor(e,t,i){super(e,t,i),this._scenarioName=c(t)+"ResultsNotReceived",this._searchResultsNotReceivedBaseProps=e}getScenarioName(){return this._scenarioName}getAttributes(){const e=super.getAttributes();return e.ErrorCode=this._searchResultsNotReceivedBaseProps.errorCode,e.ErrorMessage=this._searchResultsNotReceivedBaseProps.errorMessage,e.WasNetworkAvailable=this._searchResultsNotReceivedBaseProps.wasNetworkAvailable,e}};t.SearchRequestResultsRendered=class extends d{constructor(e,t,i,n){super(e,t,i),this._additionalLoading=n,this._scenarioName=c(t)+"ResultsRendered"}getScenarioName(){return this._scenarioName}getAttributes(){const e=super.getAttributes();return n.isUndefined(this._additionalLoading)||(e.AdditionalLoading=this._additionalLoading),e}},function(e){e[e.SearchResultsList=0]="SearchResultsList",e[e.Dialpad=1]="Dialpad",e[e.SearchInConversationPanel=2]="SearchInConversationPanel"}(t.CompositeSearchOrigin||(t.CompositeSearchOrigin={}));t.CompositeSearch=class extends a{constructor(e,t,i,n,o,s,a,r,l,c,d,u,g,h){super(e,t),this._origin=i,this._searchResultsListOrigin=n,this._zeroTerm=o,this._additionalLoading=s,this._requestStepDuration=a,this._publicDirectoryRequestDuration=r,this._messageRequestDuration=l,this._indexedDbRequestDuration=c,this._botsRequestDuration=d,this._allPeopleRequestDuration=u,this._fastContactsRequestDuration=g,this._messageInConversationRequestDuration=h}getScenarioName(){return"CompositeSearch"}getAttributes(){const e=super.getAttributes();return e.Origin=this._origin,n.isUndefined(this._searchResultsListOrigin)||(e.SearchResultsListOrigin=this._searchResultsListOrigin),e.IsZeroTermSearch=this._zeroTerm,n.isUndefined(this._additionalLoading)||(e.AdditionalLoading=this._additionalLoading),n.isUndefined(this._requestStepDuration)||(e.RequestStepDuration=this._requestStepDuration),n.isUndefined(this._publicDirectoryRequestDuration)||(e.PublicDirectoryRequestDuration=this._publicDirectoryRequestDuration),n.isUndefined(this._messageRequestDuration)||(e.MessageRequestDuration=this._messageRequestDuration),n.isUndefined(this._indexedDbRequestDuration)||(e.IndexedDbRequestDuration=this._indexedDbRequestDuration),n.isUndefined(this._botsRequestDuration)||(e.BotsRequestDuration=this._botsRequestDuration),n.isUndefined(this._allPeopleRequestDuration)||(e.AllPeopleRequestDuration=this._allPeopleRequestDuration),n.isUndefined(this._fastContactsRequestDuration)||(e.FastContactsRequestDuration=this._fastContactsRequestDuration),n.isUndefined(this._messageInConversationRequestDuration)||(e.MessageInConversationRequestDuration=this._messageInConversationRequestDuration),e}};t.ComposerEmoticonLoaded=class extends a{getScenarioName(){return"ComposerEmoticonLoaded"}};t.PeopleRecommendationsFetched=class extends a{constructor(e,t,i,n,o,s){super(e,!1),this._requestId=t,this._successful=i,this._count=n,this._statusCode=o,this._error=s}getScenarioName(){return"PeopleRecommendationsFetched"}getAttributes(){const e=super.getAttributes();return e.RequestId=this._requestId,e.Successful=this._successful,e.StatusCode=this._statusCode?this._statusCode:-1,e.Count=this._count?this._count:-1,e.Error=this._error||"",e}};t.SearchPerformanceTelemetryEvent=class extends a{constructor(e,t,i){super(e,t),this._queryLength=i}getScenarioName(){return"SearchPerformance"}getAttributes(){let e=super.getAttributes();return e.QueryLength=this._queryLength,e}}},74636:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contactsPanelV2FullyRendered=t.contactsPanelActiveNowZeroTermResultsRendered=t.contactsPanelSkypeZeroTermResultsRendered=t.contactsPanelPeopleZeroTermResultsRendered=t.contactsPanelIsRendered=t.contactsPanelOpening=t.contactsPanelWillOpen=t.pictureViewerFullLoaded=t.pictureViewerThumbnailLoaded=t.pictureViewerOpening=t.pictureViewerWillOpen=t.PerfTelemetryScenario=void 0;const n=i(96486),o=i(36237),s=i(30124),a=i(92210),r=i(69399);class l extends a.default{constructor(){super(a.ScenarioName.PerfTelemetryScenario)}endScenario(){return this.hasStarted()&&this.finish(void 0,void 0,!0),this._lastRunSteps=[...this._markedSteps],this.reset()}startScenario(){return this.start()}setIdentifier(e){this._objectId=e}getIdentifier(){return this._objectId}isEventValid(){return this.hasStarted()&&void 0!==this._objectId}isTrackingIdentifier(e){return!!e&&this.isEventValid()&&this._objectId===e}getStepTimestamp(e){return n.isUndefined(this._lastRunSteps)?-1:this._lastRunSteps[e].timestamp}getNumberOfSteps(){return n.isUndefined(this._lastRunSteps)?-1:this._lastRunSteps.length}markCallSent(){this.markStepCompleted("callSent")}markResultsReceived(){this.markStepCompleted("resultsReceived")}markResultsNotReceived(){this.markStepCompleted("resultsNotReceived")}}t.PerfTelemetryScenario=l;const c=new l;t.pictureViewerWillOpen=function(){c.endScenario(),c.startScenario()},t.pictureViewerOpening=function(e){c.getIdentifier()||c.setIdentifier(e)},t.pictureViewerThumbnailLoaded=function(e){c.isTrackingIdentifier(e)&&o.track(new r.PerfPictureViewerThumbLoaded(c.getCurrentDuration(),s.default.isUsingStackNavigationContext()))},t.pictureViewerFullLoaded=function(e){c.isTrackingIdentifier(e)&&o.track(new r.PerfPictureViewerFullLoaded(c.getCurrentDuration(),s.default.isUsingStackNavigationContext()))};const d=new l;t.contactsPanelWillOpen=function(){d.endScenario(),d.startScenario()},t.contactsPanelOpening=function(e){d.getIdentifier()||d.setIdentifier(e)},t.contactsPanelIsRendered=function(e){d.isTrackingIdentifier(e)&&!d.isResolved()&&(d.markStepCompleted("PanelVisible"),o.track(new r.ContactsPanelRendered(d.getCurrentDuration(),s.default.isUsingStackNavigationContext())))},t.contactsPanelPeopleZeroTermResultsRendered=function(e){d.isTrackingIdentifier(e)&&(d.markStepCompleted("ZeroTermResultsRendered"),d.finish(),o.track(new r.ContactsPanelPeopleZeroTermResultsRendered(d.getCurrentDuration(),s.default.isUsingStackNavigationContext())))},t.contactsPanelSkypeZeroTermResultsRendered=function(e){d.isTrackingIdentifier(e)&&o.track(new r.ContactsPanelSkypeZeroTermResultsRendered(d.getCurrentDuration(),s.default.isUsingStackNavigationContext()))},t.contactsPanelActiveNowZeroTermResultsRendered=function(e){d.isTrackingIdentifier(e)&&o.track(new r.ContactsPanelActiveNowZeroTermResultsRendered(d.getCurrentDuration(),s.default.isUsingStackNavigationContext()))},t.contactsPanelV2FullyRendered=function(e,t,i,n){d.isTrackingIdentifier(e)&&o.track(new r.ContactsPanelV2FullyRendered(d.getCurrentDuration(),s.default.isUsingStackNavigationContext(),t,i,n))}},1163:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CallPerformanceEvent=void 0;const n=i(96486),o=i(349),s=i(11698);class a extends o.TelemetryEventBase{getEventName(){return"s4l_performance"}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e}}t.CallPerformanceEvent=class extends a{constructor(e,t,i,n){super(),this._callId=e,this._cpuspeed=t,this._cpumodel=i,this._cores=n,this._processMemory=new s.Rate,this._freeMemory=new s.Rate,this._cpuUsage=new s.Rate,this._gpuMemoryWorkingSetSize=new s.Rate,this._gpuCpuUsage=new s.Rate,this._rendererMemoryWorkingSetSize=new s.Rate,this._rendererCpuUsage=new s.Rate}getActionName(){return"CallPerformance"}getAttributes(){const e={CallId:this._callId,CPUSpeed:this._cpuspeed,CPUModel:this._cpumodel,CPUCores:this._cores,CPUUsageAverage:this._cpuUsage.average(),CPUUsageMax:this._cpuUsage.max(),ProcessMemoryAverage:this._processMemory.average(),ProcessMemoryMax:this._processMemory.max(),FreeMemoryAverage:this._freeMemory.average(),FreeMemoryMax:this._freeMemory.max(),RendererCPUUsageMax:this._rendererCpuUsage.max(),RendererCPUUsageAverage:this._rendererCpuUsage.average(),RendererMemoryWSSMax:this._rendererMemoryWorkingSetSize.max(),RendererMemoryWSSAverage:this._rendererMemoryWorkingSetSize.average(),GPUUsageMax:this._gpuCpuUsage.max(),GPUUsageAverage:this._gpuCpuUsage.average(),GPUMemoryWSSMax:this._gpuMemoryWorkingSetSize.max(),GPUMemoryWSSAverage:this._gpuMemoryWorkingSetSize.average()};return n.assign(super.getAttributes(),e)}setMainUsage(e){this._processMemory.push(e.processMemory),this._freeMemory.push(e.freeMemory),this._cpuUsage.push(e.cpuUsage)}setGPUUsage(e,t){this._gpuMemoryWorkingSetSize.push(e),this._gpuCpuUsage.push(t)}setRendererUsage(e,t){this._rendererMemoryWorkingSetSize.push(e),this._rendererCpuUsage.push(t)}}},70812:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionsStatusChange=void 0;const n=i(96486),o=i(2604),s=i(78262),a=i(349);class r extends a.TelemetryEventBase{constructor(e,t,i){super(),this._permissionType=e,this._permissionStatus=t,this._permissionOrigin=i}getEventName(){return"settings_permission_status"}getAttributes(){const e=super.getAttributes();return e.Type=s.PermissionType[this._permissionType],e.Status=o.PermissionStatus[this._permissionStatus],e.Origin=this._stringFromPermissionOrigin(),e}_stringFromPermissionOrigin(){return n.isUndefined(this._permissionOrigin)?"unknown":o.PermissionOrigin[this._permissionOrigin]}}t.PermissionsStatusChange=r},79810:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PesBackgroundColorTelemetryEvent=t.PesBackgroundColorPickerAction=void 0;const n=i(349);var o;!function(e){e[e.BackgroundColorPickerSelected=0]="BackgroundColorPickerSelected"}(o=t.PesBackgroundColorPickerAction||(t.PesBackgroundColorPickerAction={}));class s extends n.TelemetryEventBase{constructor(e){super(),this._params=e}getEventName(){return"messaging_pes_backgroundcolor"}getAttributes(){const e=super.getAttributes();return e.Action=o.BackgroundColorPickerSelected,void 0!==this._params.tabType&&(e.TabType=this._params.tabType),void 0!==this._params.triggeredBy&&(e.TriggeredBy=this._params.triggeredBy),e}}t.PesBackgroundColorTelemetryEvent=s},47990:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PesItemTelemetryEvent=void 0;const n=i(26424),o=i(58962),s=i(349);class a extends s.TelemetryEventBase{constructor(e){super(),this._params=e}getEventName(){return"messaging_pesitem"}getAttributes(){const e=super.getAttributes();return e.IsDefaultTone=void 0===this._params.itemTone||this._params.itemTone===n.DefaultDiverseTone,e.PickerWidth=this._params.pickerWidth,e.ColumnIndex=this._params.itemIndex,e.SectionIndex=this._params.sectionIndex,e.TabIndex=this._params.tabIndex,e.Type=o.TabType[this._params.type],e.isSearchMode=this._params.isSearchMode||!1,void 0!==this._params.groupIndex&&(e.GroupIndex=this._params.groupIndex),void 0!==this._params.triggeredBy&&(e.TriggeredBy=this._params.triggeredBy),e}shouldExcludeUserIdentificationInfo(){return!0}shouldExcludeDeviceIdentificationInfo(){return!0}}t.PesItemTelemetryEvent=a},90025:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PesSettingsEvent=t.PesPickerUsageEvent=t.EmptyPesConfigurationReceived=t.PesSearchSession=t.PesAction=void 0;const n=i(96486),o=i(26424),s=i(58962),a=i(58962),r=i(349);var l;!function(e){e[e.Search=0]="Search",e[e.ConfigError=1]="ConfigError",e[e.EmoticonUsage=2]="EmoticonUsage",e[e.MojiUsage=3]="MojiUsage",e[e.GifUsage=4]="GifUsage",e[e.StickerUsage=5]="StickerUsage",e[e.EffectUsage=6]="EffectUsage",e[e.MeetNowUsage=7]="MeetNowUsage",e[e.ImageUploaderUsage=8]="ImageUploaderUsage",e[e.PesLargeEmoticon=9]="PesLargeEmoticon",e[e.PickerPopupUsage=10]="PickerPopupUsage"}(l=t.PesAction||(t.PesAction={}));class c extends r.TelemetryEventBase{constructor(e){super(),this._action=e}getEventName(){return"messaging_pes"}getAttributes(){return n.assign({},super.getAttributes(),{Action:l[this._action]})}}t.PesSearchSession=class extends c{constructor(){super(l.Search),this._attemptsMade=0}setSearchType(e){this._searchType=e}incrementAttemptsMade(){this._attemptsMade++}setNavigatedFromMediaBar(e){this._navigatedFromMediaBar=e}complete(e,t,i,n=!1,o,s){this._wasSuccessful=e,this._endTime=Date.now(),this._searchQueryLength=t,this._messageSent=n,o&&(this._noOfPesItemsSelected=o),i&&(this._resultPesItemIdSelected=i),s&&(this._didUserSwitchTabTypesToEndSession=s)}getAttributes(){const e=super.getAttributes();return e.WasSuccessful=this._wasSuccessful,e.DurationInSeconds=Math.round((this._endTime-this._eventCreationTime)/1e3),e.SearchType=s.TabType[this._searchType],e.SearchQueryLength=this._searchQueryLength,e.SearchAttempsCount=this._attemptsMade,e.WasMessageSent=this._messageSent,e.WasClickedFromMediaBar=this._navigatedFromMediaBar,this._noOfPesItemsSelected&&(e.NumberOfItemsSelectedForSend=this._noOfPesItemsSelected),this._didUserSwitchTabTypesToEndSession&&(e.DidSessionEndViaTabTypeSwitch=this._didUserSwitchTabTypesToEndSession),this._resultPesItemIdSelected&&(e.PesResultId=this._resultPesItemIdSelected),e}};t.EmptyPesConfigurationReceived=class extends c{constructor(e,t,i,n,o,s){super(l.ConfigError),this._locale=e,this._configUrl=t,this._emoticonTabCount=i,this._mojiTabCount=n,this._emoticonCount=o,this._mojiCount=s}getAttributes(){const e=super.getAttributes();return this._locale&&(e.Locale=this._locale),e.ConfigURL=this._configUrl,e.EmoticonTabCount=this._emoticonTabCount,e.MojiTabCount=this._mojiTabCount,e.EmoticonCount=this._emoticonCount,e.MojisCount=this._mojiCount,e}};const d={[s.TabType.Emoticon]:l.EmoticonUsage,[s.TabType.Moji]:l.MojiUsage,[s.TabType.ChatSticker]:l.StickerUsage,[s.TabType.Gif]:l.GifUsage,[s.TabType.Effect]:l.EffectUsage,[s.TabType.PickerPopup]:l.PickerPopupUsage,[s.TabType.MeetNow]:l.MeetNowUsage,[s.TabType.ImageUploader]:l.ImageUploaderUsage};t.PesPickerUsageEvent=class extends c{constructor(e,t,i){super(d[e]),this._firstRender=t,this._triggeredBy=i,this._itemsAddedCount=0,this._diverseItemsAddedCount=0,this._getEndOpeningTime=()=>this._endOpeningTime?this._endOpeningTime-this._eventCreationTime:"NotMeasured"}getAttributes(){const e={ItemsAddedCount:this._itemsAddedCount,OpeningDuration:this._getEndOpeningTime(),IsFirstRender:this._firstRender,DiverseItemsAddedCount:this._diverseItemsAddedCount};return this._triggeredBy&&(e.TriggeredBy=a.PesPickerTriggeredBy[this._triggeredBy]),n.assign({},super.getAttributes(),e)}itemAdded(e){e&&e.tone&&e.tone!==o.DefaultDiverseTone&&this._diverseItemsAddedCount++,this._itemsAddedCount++}openingCompleted(e){e&&(this._endOpeningTime=e)}};t.PesSettingsEvent=class extends c{constructor(e,t,i){super(l.PesLargeEmoticon),this._preventDisplayLargeEmoticons=e,this._singleEmoticonSize=t,this._multipleEmoticonsSize=i}getAttributes(){const e=super.getAttributes();return e.IsPreventDisplayLargeEmoticonsSet=this._preventDisplayLargeEmoticons,e.SingleEmoticonSize=this._singleEmoticonSize,e.MultipleEmoticonSize=this._multipleEmoticonsSize,e}}},26584:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PicturePrefetchEvent=t.PicturePrefetchAction=void 0;const n=i(96486),o=i(349);var s;!function(e){e[e.PrefetchQueueTrimmed=0]="PrefetchQueueTrimmed"}(s=t.PicturePrefetchAction||(t.PicturePrefetchAction={}));class a extends o.TelemetryEventBase{constructor(e){super(),this._action=e}getEventName(){return"all_picture_prefetch"}getAttributes(){return n.assign(super.getAttributes(),{Action:s[this._action]})}}t.PicturePrefetchEvent=a},15414:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PhoneNeedVerification=t.MsaPhoneAccrualEvent=t.MsaPhoneAccrualAction=t.PnvUIStartFromManageSearchPanel=t.PnvUIStartTelemetryEvent=t.PnvStoreTelemetryEvent=void 0;const n=i(96486),o=i(349),s="sisu_phone_verification";class a extends o.TelemetryEventBase{constructor(e,t){super(),this._stage=e,this._error=t}getEventName(){return s}getAttributes(){return n.assign({},super.getAttributes(),{Action:"Store",Stage:this._stage,Error:this._error})}}t.PnvStoreTelemetryEvent=a;class r extends o.TelemetryEventBase{getEventName(){return s}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}t.PnvUIStartTelemetryEvent=class extends r{constructor(e,t,i="control"){super(),this._isTreatment=e,this._isPrompted=t,this._permission=i}getActionName(){return"UIStart"}getAttributes(){return n.assign({},super.getAttributes(),{IsTreatment:this._isTreatment,IsPrompted:this._isPrompted,Permission:this._permission})}};var l;t.PnvUIStartFromManageSearchPanel=class extends r{getActionName(){return"UIStartFromManageSearchPanel"}},function(e){e[e.MsaPhoneAccrualStart=0]="MsaPhoneAccrualStart",e[e.MsaPhoneAccrualVerified=1]="MsaPhoneAccrualVerified",e[e.MsaPhoneAccrualRegistered=2]="MsaPhoneAccrualRegistered",e[e.MsaEmailAccrualVerified=3]="MsaEmailAccrualVerified",e[e.MsaEmailAccrualRegistered=4]="MsaEmailAccrualRegistered",e[e.MsaPhoneAccrualCancelled=5]="MsaPhoneAccrualCancelled",e[e.MsaPhoneAccrualError=6]="MsaPhoneAccrualError"}(l=t.MsaPhoneAccrualAction||(t.MsaPhoneAccrualAction={}));t.MsaPhoneAccrualEvent=class extends r{constructor(e){super(),this._action=e}getActionName(){return l[this._action]}};t.PhoneNeedVerification=class extends r{getActionName(){return"NeedVerification"}}},26851:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PnvScenarioStep=void 0;const n=i(15963),o=i(94050);var s;!function(e){e[e.LinkShown=0]="LinkShown",e[e.PnvUIStart=1]="PnvUIStart",e[e.NumberNext=2]="NumberNext",e[e.NumberBack=3]="NumberBack",e[e.CodeNext=4]="CodeNext",e[e.CodeSkip=5]="CodeSkip",e[e.CodeBack=6]="CodeBack",e[e.CodeResend=7]="CodeResend",e[e.CodeCall=8]="CodeCall",e[e.NumberCall=9]="NumberCall"}(s=t.PnvScenarioStep||(t.PnvScenarioStep={}));class a{constructor(e){this._scenario=e}static get(){if(!this._pnvTelemetryHelper){const e=new o.default(n.ScenarioName.PnvUI);e.start(),e.setDuplicateStepMarkingEnabled(),this._pnvTelemetryHelper=new a(e)}return this._pnvTelemetryHelper}markStep(e,t){this._scenario.markStepCompleted(s[e],t)}}t.default=a},71926:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PollToggledVoteEvent=t.PollDetailsOpenedEvent=t.PollCreatedEvent=t.PollLaunchedEvent=t.LaunchOrigin=t.CreatePollOrigin=t.VoteOrigin=t.PollAction=void 0;const n=i(60021),o=i(349),s=i(35370);var a,r,l,c;!function(e){e[e.Launched=0]="Launched",e[e.Created=1]="Created",e[e.DetailsOpened=2]="DetailsOpened",e[e.Voted=3]="Voted",e[e.Unvoted=4]="Unvoted"}(a=t.PollAction||(t.PollAction={})),function(e){e[e.Card=0]="Card",e[e.DetailsView=1]="DetailsView"}(r=t.VoteOrigin||(t.VoteOrigin={})),function(e){e[e.SlashCommand=0]="SlashCommand",e[e.CreateView=1]="CreateView"}(l=t.CreatePollOrigin||(t.CreatePollOrigin={})),function(e){e[e.MediaBarItem=0]="MediaBarItem"}(c=t.LaunchOrigin||(t.LaunchOrigin={}));class d extends o.TelemetryEventBase{constructor(){super()}getEventName(){return"caap_poll"}getAttributes(){let e=super.getAttributes();return e.Action=a[this.getActionName()],e}}t.PollLaunchedEvent=class extends d{constructor(e){super(),this._origin=e}getActionName(){return a.Launched}getAttributes(){let e=super.getAttributes();return e.Origin=c[this._origin],e}};t.PollCreatedEvent=class extends d{constructor(e,t,i){super(),this._origin=e,this._optionCount=t,this._participantsCount=i}getActionName(){return a.Created}getAttributes(){let e=super.getAttributes();return e.OptionsCount=this._optionCount,e.Origin=l[this._origin],e.ParticipantsCount=this._participantsCount,e}};t.PollDetailsOpenedEvent=class extends d{constructor(e){super(),this._message=e}getActionName(){return a.DetailsOpened}getAttributes(){let e=super.getAttributes();return this._message&&(e.MessageCorrelationId=n.getCorrelationIdFromMessageParts(this._message.creator,this._message.conversationId,s.getClientMessageId(this._message))),e}};t.PollToggledVoteEvent=class extends d{constructor(e,t,i){super(),this._action=e,this._origin=t,this._message=i}getActionName(){return this._action}getAttributes(){let e=super.getAttributes();return this._message&&(e.MessageCorrelationId=n.getCorrelationIdFromMessageParts(this._message.creator,this._message.conversationId,s.getClientMessageId(this._message))),e.Origin=r[this._origin],e}}},62817:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackInititated=t.PostingRecovered=t.PostingFailure=void 0;const n=i(96486),o=i(46096),s=i(80457),a=i(78262),r=i(349);class l extends r.TelemetryEventBase{constructor(e,t,i,n,o,s=0,a,r,l,c,d,u){super(),this._failureSource=e,this._conversationIds=t,this._postSource=i,this._conversationOrigin=n,this._firstSendTime=o,this._numberRetries=s,this._statusCode=a,this._statusText=r,this._fileSize=l,this._errorMetadata=c,this._fileType=d,this._triggeredBy=u}getAttributes(){const e=super.getAttributes();return e.failure_source=o.PostingTransferSource[this._failureSource]+"Failure",e.num_of_convs=this._conversationIds.length,e.post_source=o.PostSource[this._postSource],e.conversation_origin=o.NavigationConversationOrigin[this._conversationOrigin||o.NavigationConversationOrigin.Unknown],e.time_to_failure=this._eventCreationTime-this._firstSendTime,e.number_retries=this._numberRetries,e.status_code=this._statusCode,e.status_text=this._statusText||"",e.file_size=n.isNumber(this._fileSize)?this._fileSize:"",e.file_type=this._fileType?a.UploadFileType[this._fileType]:"",e.TriggeredBy=this._triggeredBy?s.PostingTrigger[this._triggeredBy]:s.PostingTrigger.None,n.extend(e,this._errorMetadata),e}}t.PostingFailure=class extends l{constructor(e,t,i,n,o,s,a=0,r,l,c,d,u,g){super(t,i,n,o,s,a,r,l,c,d,u,g),this._permanentFailure=e}getEventName(){return"send_failure"}getAttributes(){const e=super.getAttributes();return e.is_permanent=this._permanentFailure,e}};t.PostingRecovered=class extends l{getEventName(){return"send_recovered"}};class c extends r.TelemetryEventBase{getEventName(){return"feedbackInitiated"}}t.FeedbackInititated=c},95527:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QueryPrefetchedEmoticonImage=t.QueryPrefetchedImage=void 0;i(96486);const n=i(75893),o=i(32183),s=i(349);class a extends s.TelemetryEventBase{constructor(e,t){super(),this._prefetchState=e,this._nativeCached=t}getEventName(){return"messaging_prefetched_image"}getAttributes(){const e=super.getAttributes();return e.Action="queried",e.PrefetchState=n.ImagePrefetchState[this._prefetchState],e.IsNativeCached=void 0!==this._nativeCached?this._nativeCached:"",e}}t.QueryPrefetchedImage=a;t.QueryPrefetchedEmoticonImage=class extends a{constructor(e,t,i){super(e,t),this._url=i;o.getBaseUrl()}getAttributes(){const e=super.getAttributes();return e.EmoticonUrl=this._url,e}}},47922:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PresenceChangeNotificationClicked=t.PresenceChangeNotificationProcessed=t.PresenceChangeNotificationToggleSetting=void 0;const n=i(349);class o extends n.TelemetryEventBase{getEventName(){return"people_presence_change_notification"}getAttributes(){let e=super.getAttributes();return e.Setting=this.getActionName(),e}}t.PresenceChangeNotificationToggleSetting=class extends o{constructor(e){super(),this._didEnable=e}getActionName(){return"PresenceChangeNotificationToggled"}getAttributes(){const e=super.getAttributes();return e.DidEnable=this._didEnable,e}};t.PresenceChangeNotificationProcessed=class extends o{constructor(e){super(),this._presenceChangeNotificationResult=e}getActionName(){return"PresenceChangeNotificationProcessed"}getAttributes(){let e=super.getAttributes();return e.PresenceChangeNotificationResult=this._presenceChangeNotificationResult,e}};t.PresenceChangeNotificationClicked=class extends o{getActionName(){return"PresenceChangeNotificationClicked"}}},49140:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SendFullTelemetryEvent=t.PhoneNumberDiscoverabilityPrivacyEvent=t.AppearInSearchEvent=t.ReceiveContactSuggestionsEvent=t.ManageSearchOpenedEvent=t.SendFullTelemetryOrigin=t.PhoneDiscoverabilityOrigin=t.ManageSearchOrigin=void 0;const n=i(349);var o,s,a,r;!function(e){e[e.ManageSearchOpened=0]="ManageSearchOpened",e[e.AppearInSearchResultsInteraction=1]="AppearInSearchResultsInteraction",e[e.AppearInSearchResults=2]="AppearInSearchResults",e[e.ReceiveContactSuggestions=3]="ReceiveContactSuggestions",e[e.PhoneDiscoverability=4]="PhoneDiscoverability",e[e.SendFullTelemetry=5]="SendFullTelemetry"}(o||(o={})),function(e){e[e.ApplicationSettings=0]="ApplicationSettings",e[e.AboutPeopleYouMayKnowPanel=1]="AboutPeopleYouMayKnowPanel"}(s=t.ManageSearchOrigin||(t.ManageSearchOrigin={})),function(e){e[e.ApplicationSettings=0]="ApplicationSettings",e[e.DeepLink=1]="DeepLink",e[e.UserProfile=2]="UserProfile"}(a=t.PhoneDiscoverabilityOrigin||(t.PhoneDiscoverabilityOrigin={})),function(e){e[e.ApplicationSettings=0]="ApplicationSettings",e[e.DeepLink=1]="DeepLink",e[e.Onboarding=2]="Onboarding"}(r=t.SendFullTelemetryOrigin||(t.SendFullTelemetryOrigin={}));class l extends n.TelemetryEventBase{constructor(e){super(),this._action=e}getEventName(){return"settings_privacy"}getAttributes(){let e=super.getAttributes();return e.Action=o[this._action],e}}t.ManageSearchOpenedEvent=class extends l{constructor(e){super(o.ManageSearchOpened),this._origin=e}getAttributes(){let e=super.getAttributes();return e.Origin=s[this._origin],e}};t.ReceiveContactSuggestionsEvent=class extends l{constructor(e,t){super(o.ReceiveContactSuggestions),this._grantedPermissions=e,this._origin=t}getAttributes(){let e=super.getAttributes();return e.DidGrantPermission=this._grantedPermissions,e.Origin=s[this._origin],e}};t.AppearInSearchEvent=class extends l{constructor(e,t){super(o.AppearInSearchResults),this._grantedPermissions=e,this._origin=t}getAttributes(){let e=super.getAttributes();return e.DidGrantPermission=this._grantedPermissions,e.Origin=s[this._origin],e}};t.PhoneNumberDiscoverabilityPrivacyEvent=class extends l{constructor(e,t,i){super(o.PhoneDiscoverability),this._grantedPermissions=e,this._origin=t,this._error=i}getAttributes(){let e=super.getAttributes();return e.DidGrantPermission=this._grantedPermissions||"",e.Origin=a[this._origin],this._error&&(e.ErrorStatusCode=this._error.errorStatusCode,e.ErrorMessage=this._error.errorMessage),e}};t.SendFullTelemetryEvent=class extends l{constructor(e,t){super(o.SendFullTelemetry),this._grantedPermissions=e,this._origin=t}getAttributes(){let e=super.getAttributes();return e.DidGrantPermission=this._grantedPermissions,e.Origin=r[this._origin],e}}},93818:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MyProfileFetch=t.MeProfileActionEvent=t.MeProfileAction=t.AvatarActionMenu=t.CustomStatusUpdated=t.CustomStatusInputGotFocus=t.CustomStatusEditorEmoticonPickerPressed=t.CustomStatusEditorDonePressed=t.CustomStatusEditorBackPressed=t.CustomStatusEditorOpened=t.CustomStatusMessageCleared=t.ProfileFetchResponseError=t.ProfileFetchRequestEvent=t.AvatarLoadError=t.AvatarRemoved=t.AvatarChanged=t.SettingsTelemetry=t.AvatarPolicyChanged=t.CreateTranslatedChatWithUserClicked=t.AvatarMenuButtonClicked=t.MyAvatarRemoved=t.MyAvatarChanged=t.ContactNickNameEdited=t.MyMoodEdited=t.MyUserNameEdited=t.ManageMyAccountOnlineClicked=t.CloseMyAccountStopped=t.CloseMyAccountInfoLinkClicked=t.CloseMyAccountClicked=t.MyMicrosoftAccountLinkClicked=t.ManageMyProfileOnlineClicked=t.PhoneCallProfileButtonClicked=t.CallProfileButtonClicked=t.MessageProfileButtonClicked=t.ProfileOpened=t.WhatsNewButtonClicked=t.GetSkypeAppButtonClicked=t.MeControlOpened=void 0;const n=i(96486),o=i(96486),s=i(78230),a=i(46096),r=i(349),l="Unknown";class c extends r.TelemetryEventBase{getEventName(){return"profile"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}class d extends c{constructor(e){super(),this._updateLocation=e}getAttributes(){let e=super.getAttributes();return e.UpdateLocation=a.AvatarUpdateLocation[this._updateLocation],e}}class u extends r.TelemetryEventBase{getEventName(){return"customStatus"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}t.MeControlOpened=class extends c{getActionName(){return"MeControlOpened"}};t.GetSkypeAppButtonClicked=class extends c{constructor(e){super(),this._isSuccess=e}getActionName(){return"GetSkypeAppButtonClicked"}getAttributes(){let e=super.getAttributes();return e.IsSuccess=this._isSuccess,e}};t.WhatsNewButtonClicked=class extends c{constructor(e){super(),this._isSuccess=e}getActionName(){return"WhatsNewButtonClicked"}getAttributes(){let e=super.getAttributes();return e.IsSuccess=this._isSuccess,e}};t.ProfileOpened=class extends c{constructor(e,t){super(),this._type=e,this._origin=t}getActionName(){return"ProfileOpened"}getAttributes(){let e=super.getAttributes();return e.Type=a.ProfileType[this._type],e.Origin=a.ProfileOpenOrigin[this._origin],e}};t.MessageProfileButtonClicked=class extends c{constructor(e){super(),this._profileType=e}getActionName(){return"MessageProfileButtonClicked"}getAttributes(){let e=super.getAttributes();return e.ProfileType=a.ProfileType[this._profileType],e}};t.CallProfileButtonClicked=class extends c{constructor(e){super(),this._profileType=e}getActionName(){return"CallProfileButtonClicked"}getAttributes(){let e=super.getAttributes();return e.ProfileType=a.ProfileType[this._profileType],e}};t.PhoneCallProfileButtonClicked=class extends c{getActionName(){return"PhoneCallProfileButtonClicked"}};t.ManageMyProfileOnlineClicked=class extends c{getActionName(){return"ManageMyProfileOnlineClicked"}};t.MyMicrosoftAccountLinkClicked=class extends c{getActionName(){return"MyMicrosoftAccountLinkClicked"}};t.CloseMyAccountClicked=class extends c{getActionName(){return"CloseMyAccountClicked"}};t.CloseMyAccountInfoLinkClicked=class extends c{getActionName(){return"CloseMyAccountInfoLinkClicked"}};t.CloseMyAccountStopped=class extends c{getActionName(){return"CloseMyAccountStopped"}};t.ManageMyAccountOnlineClicked=class extends c{getActionName(){return"ManageMyAccountOnlineClicked"}};t.MyUserNameEdited=class extends c{constructor(e,t,i,n,o){super(),this._isSuccess=e,this._errorStatusCode=t,this._duration=i,this._isMigrated=n,this._origin=o}getActionName(){return"MyUserNameEdited"}getAttributes(){let e=super.getAttributes();return e.IsSuccess=this._isSuccess,n.isUndefined(this._errorStatusCode)||(e.ErrorCode=this._errorStatusCode),n.isUndefined(this._duration)||(e.Duration=this._duration),n.isUndefined(this._isMigrated)||(e.IsMigratedToV2=this._isMigrated),n.isUndefined(this._origin)||(e.Origin=a.NameUpdateLocation[this._origin]),e}};t.MyMoodEdited=class extends c{constructor(e,t,i,n,o,s){super(),this._charCount=e,this._updateLocation=t,this._isSuccess=i,this._errorStatusCode=n,this._duration=o,this._isMigrated=s}getActionName(){return"MyMoodEdited"}getAttributes(){let e=super.getAttributes();return e.MoodCharCount=this._charCount,e.UpdateLocation=a.MoodMessageUpdateOrigin[this._updateLocation],e.IsSuccess=this._isSuccess,n.isUndefined(this._errorStatusCode)||(e.ErrorCode=this._errorStatusCode),n.isUndefined(this._duration)||(e.Duration=this._duration),n.isUndefined(this._isMigrated)||(e.IsMigratedToV2=this._isMigrated),e}};t.ContactNickNameEdited=class extends c{constructor(e,t,i,n){super(),this._updateOrigin=e,this._isSuccess=t,this._errorStatusCode=i,this._duration=n}getActionName(){return"ContactNickNameEdited"}getAttributes(){let e=super.getAttributes();return e.Origin=a.ContactNickNameUpdateOrigin[this._updateOrigin],e.IsSuccess=this._isSuccess,n.isUndefined(this._errorStatusCode)||(e.ErrorCode=this._errorStatusCode),this._duration&&(e.Duration=this._duration),e}};t.MyAvatarChanged=class extends d{constructor(e){super(e)}getActionName(){return"MyAvatarChanged"}};t.MyAvatarRemoved=class extends d{constructor(e){super(e)}getActionName(){return"MyAvatarRemoved"}};t.AvatarMenuButtonClicked=class extends c{constructor(e,t,i,n){super(),this._type=e,this._origin=t,this._hasProfilePic=i,this._avatarPolicy=n}getActionName(){return"AvatarMenuButtonClicked"}getAttributes(){let e=super.getAttributes();return e.ButtonType=a.AvatarMenuButtons[this._type],e.Origin=a.AvatarPickerOrigin[this._origin],e.HasProfilePic=this._hasProfilePic,e.AvatarPolicy=(0,s.flow)(o.camelCase,o.upperFirst)(this._avatarPolicy),e}};t.CreateTranslatedChatWithUserClicked=class extends c{getActionName(){return"CreateTranslatedChatWithUserClicked"}};t.AvatarPolicyChanged=class extends c{constructor(e,t,i,n){super(),this._avatarPolicy=e,this._origin=t,this._isSuccess=i,this._errorStatusCode=n}getActionName(){return"AvatarPolicyChanged"}getAttributes(){let e=super.getAttributes();return e.AvatarPolicy=(0,s.flow)(o.camelCase,o.upperFirst)(this._avatarPolicy),e.Origin=a.AvatarPolicyChangeOrigin[this._origin],e.IsSuccess=this._isSuccess,n.isUndefined(this._errorStatusCode)||(e.ErrorCode=this._errorStatusCode),e}};t.SettingsTelemetry=class extends c{constructor(e){super(),this._origin=e}getActionName(){return"SettingsAccessed"}getAttributes(){let e=super.getAttributes();return e.Origin=a.SettingsOrigin[this._origin],e}};t.AvatarChanged=class extends c{constructor(e,t,i,n=a.AvatarChangeError.NoError,o,s){super(),this._origin=e,this._isSuccess=t,this._isUserAvatar=i,this._errorType=n,this._errorStatusCode=o,this._isMigrated=s}getActionName(){return"AvatarChanged"}getAttributes(){let e=super.getAttributes();return e.Origin=a.AvatarPickerOrigin[this._origin],e.IsSuccess=this._isSuccess,e.IsUserAvatar=this._isUserAvatar,e.ErrorType=a.AvatarChangeError[this._errorType],n.isUndefined(this._errorStatusCode)||(e.ErrorCode=this._errorStatusCode),n.isUndefined(this._isMigrated)||(e.IsMigratedToV2=this._isMigrated),e}};t.AvatarRemoved=class extends c{constructor(e,t,i,n,o){super(),this._origin=e,this._isSuccess=t,this._isUserAvatar=i,this._errorStatusCode=n,this._isMigrated=o}getActionName(){return"AvatarRemoved"}getAttributes(){let e=super.getAttributes();return e.Origin=a.AvatarPickerOrigin[this._origin],e.IsSuccess=this._isSuccess,e.IsUserAvatar=this._isUserAvatar,n.isUndefined(this._errorStatusCode)||(e.ErrorCode=this._errorStatusCode),n.isUndefined(this._isMigrated)||(e.IsMigratedToV2=this._isMigrated),e}};t.AvatarLoadError=class extends c{constructor(e,t,i,n){super(),this._isUser=e,this._isConnector=t,this._isAgent=i,this._isPstn=n}getActionName(){return"AvatarLoadError"}getAttributes(){let e=super.getAttributes();return e.IsUser=void 0!==this._isUser?this._isUser:l,e.IsConnector=void 0!==this._isConnector?this._isConnector:l,e.IsAgent=void 0!==this._isAgent?this._isAgent:l,e.IsPstn=void 0!==this._isPstn?this._isPstn:l,e}};t.ProfileFetchRequestEvent=class extends c{constructor(e,t,i,n,o){super(),this._isSuccess=e,this._numProfilesToFetch=t,this._numProfilesFetched=i,this._errorStatusCode=n,this._errorMessage=o}getActionName(){return"ProfileFetchRequestEvent"}getAttributes(){let e=super.getAttributes();return e.IsSuccess=this._isSuccess,n.isUndefined(this._numProfilesToFetch)||(e.NumProfilesToFetch=this._numProfilesToFetch),n.isUndefined(this._numProfilesFetched)||(e.NumProfilesFetched=this._numProfilesFetched),n.isUndefined(this._errorStatusCode)||(e.ErrorCode=this._errorStatusCode),n.isUndefined(this._errorMessage)||(e.ErrorMessage=this._errorMessage),e}};t.ProfileFetchResponseError=class extends c{constructor(e,t,i){super(),this._errorStatusCode=e,this._count=t,this._isProfileColorFetch=i}getActionName(){return"ProfileFetchResponseError"}getAttributes(){let e=super.getAttributes();return e.ErrorCode=this._errorStatusCode,e.ErrorCount=this._count,e.IsProfileColorFetch=this._isProfileColorFetch,e}};t.CustomStatusMessageCleared=class extends u{getActionName(){return"CustomStatusMessageCleared"}};t.CustomStatusEditorOpened=class extends u{getActionName(){return"CustomStatusEditorOpened"}};t.CustomStatusEditorBackPressed=class extends u{getActionName(){return"CustomStatusEditorBackPressed"}};t.CustomStatusEditorDonePressed=class extends u{getActionName(){return"CustomStatusEditorDonePressed"}};t.CustomStatusEditorEmoticonPickerPressed=class extends u{getActionName(){return"CustomStatusEditorEmoticonPickerPressed"}};t.CustomStatusInputGotFocus=class extends u{getActionName(){return"CustomStatusInputGotFocus"}};t.CustomStatusUpdated=class extends u{constructor(e,t,i,n){super(),this._isFromSuggestedStatus=e,this._chosenSuggestedStatus=t,this._totalEmoticonInStatus=i,this._prevToNewMoodMessageCharDiffCount=n}getActionName(){return"CustomStatusEdited"}getAttributes(){let e=super.getAttributes();return e.IsFromSuggestedStatus=this._isFromSuggestedStatus,e.ChosenSuggestedStatus=this._chosenSuggestedStatus,e.TotalEmoticonInStatus=this._totalEmoticonInStatus,e.PrevToNewMoodMessageCharDiffCount=this._prevToNewMoodMessageCharDiffCount,e}};var g;t.AvatarActionMenu=class extends c{constructor(e,t,i){super(),this._origin=e,this._command=t,this._isVisible=i}getActionName(){return"AvatarActionMenu"}getAttributes(){let e=super.getAttributes();return e.Origin=a.AvatarPickerOrigin[this._origin],e.Command=this._command,e.IsVisible=this._isVisible,e}},function(e){e[e.OpenProfile=0]="OpenProfile",e[e.ShowActionCard=1]="ShowActionCard",e[e.Update=2]="Update",e[e.Copy=3]="Copy",e[e.Verify=4]="Verify",e[e.ShowOnSkype=5]="ShowOnSkype",e[e.DeleteFromSkype=6]="DeleteFromSkype",e[e.AddToSkype=7]="AddToSkype",e[e.AddToMsa=8]="AddToMsa",e[e.UpdateMsa=9]="UpdateMsa",e[e.Navigate=10]="Navigate",e[e.AddMsaAvatar=11]="AddMsaAvatar",e[e.RemoveMsaAvatar=12]="RemoveMsaAvatar",e[e.LaterMsaAvatar=13]="LaterMsaAvatar"}(g=t.MeProfileAction||(t.MeProfileAction={}));t.MeProfileActionEvent=class extends c{constructor(e,t,i,n,o){super(),this._command=e,this._type=t,this._isVisible=i,this._isSuccess=n,this._errorStatusCode=o}getActionName(){return"MeProfileAction"}getAttributes(){let e=super.getAttributes();return e.Command=g[this._command],e.Type=this._type,n.isUndefined(this._isVisible)||(e.IsVisible=this._isVisible),n.isUndefined(this._isSuccess)||(e.IsSuccess=this._isSuccess),n.isUndefined(this._errorStatusCode)||(e.ErrorCode=this._errorStatusCode),e}};t.MyProfileFetch=class extends c{constructor(e){super(),this._fetchSettings=e}getActionName(){return"MyProfileFetch"}getAttributes(){let e=super.getAttributes();return e.IsSuccess=this._fetchSettings.isSuccess,e.IsV2=this._fetchSettings.isV2,e.IsMigrationSuggested=this._fetchSettings.isMigrationSuggested,e.IsMigratedToV2=this._fetchSettings.isMigratedToV2,n.isUndefined(this._fetchSettings.errorStatusCode)||(e.ErrorCode=this._fetchSettings.errorStatusCode),n.isUndefined(this._fetchSettings.origin)||(e.Origin=a.MyProfileFetchOrigin[this._fetchSettings.origin]),e}}},74243:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(349),s=i(35370),a=i(53374);class r extends o.TelemetryEventBase{constructor(e){super(),this._params=e}shouldSend(){const e=o.SampledEvents[this.getEventName()+"_"+this._params.eventCode];return!n.isNumber(e)||a.default.sampleForPercentage(e)}getEventName(){return"push_notification"}getAttributes(){let e=super.getAttributes();e.EventType=this._params.eventType,e.EventCode=this._params.eventCode,e.MessageId=this._params.messageId,e.ClientMessageId=this._params.clientMessageId,e.IsMyMessage=this._params.isMyMessage,e.Result=this._params.result,e.MessageCorrelationId=this._params.messageCorrelationId,e.ErrorCode=this._params.errorCode||0,e.CorrelationVector=this._params.correlationVector||"";const t=s.getTrackableConversationId(this._params.conversationId);return t&&(e.ConversationId=t),e}}t.default=r},50737:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QuickActionsEvent=void 0;const n=i(96486),o=i(52400),s=i(349);class a extends s.TelemetryEventBase{constructor(e,t){super(),this._shortcutId=e,this._pinnedShortcuts=t}getEventName(){return"quick_actions"}getAttributes(){let e=super.getAttributes();return this._shortcutId&&(e.ShortcutName=this._shortcutId),this._pinnedShortcuts&&n.each(o.QuickActionItemKeys,(t=>{n.includes(this._pinnedShortcuts,t)&&(e["QuickActionsPinned_"+t]=!0)})),e}}t.QuickActionsEvent=a},24501:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QsoAccountListFetched=t.QuickSignOnTelemetrySignedInEvent=t.QuickSignOnTelemetryInterrupted=t.QuickSignOnTelemetryAutoRefreshed=t.QuickSignOnTelemetryStartedEvent=void 0;const n=i(96486),o=i(349);class s extends o.TelemetryEventBase{getEventName(){return"sisu_qso"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}getLoggedOutSendingPolicy(){return o.TelemetryEventLoggedOutPolicy.SendNow}}t.QuickSignOnTelemetryStartedEvent=class extends s{getActionName(){return"Started"}};t.QuickSignOnTelemetryAutoRefreshed=class extends s{getActionName(){return"AutoRefreshed"}};t.QuickSignOnTelemetryInterrupted=class extends s{getActionName(){return"Interrupted"}};t.QuickSignOnTelemetrySignedInEvent=class extends s{getActionName(){return"SignedIn"}};t.QsoAccountListFetched=class extends s{constructor(e){super(),this._accountListSize=e,this._attributes={AccountListSize:this._accountListSize}}getActionName(){return"AccountListFetched"}getAttributes(){return n.assign(super.getAttributes(),this._attributes)}}},54306:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RaisedHandListExpanded=t.RaiseHandTelemetryEvent=t.LowerHandOrigin=t.RaiseHandAction=void 0;const n=i(9520);var o,s;!function(e){e[e.RaiseHand=0]="RaiseHand",e[e.LowerMyHand=1]="LowerMyHand",e[e.LowerOthersHand=2]="LowerOthersHand"}(o=t.RaiseHandAction||(t.RaiseHandAction={})),function(e){e[e.OverflowMenu=0]="OverflowMenu",e[e.ParticipantsPanel=1]="ParticipantsPanel",e[e.CallControls=2]="CallControls"}(s=t.LowerHandOrigin||(t.LowerHandOrigin={}));class a extends n.CallActionBase{constructor(e,t,i,n){super(),this._callId=e,this._action=t,this._participantsCount=i,this._origin=n}getActionName(){return o[this._action]}getAttributes(){let e=super.getAttributes();return e.CallId=this._callId,e.ParticipantsCount=this._participantsCount,void 0===this._origin||this._action!==o.LowerOthersHand&&this._action!==o.LowerMyHand||(e.LowerHandOrigin=s[this._origin]),e}}t.RaiseHandTelemetryEvent=a;class r extends n.CallActionBase{constructor(e,t,i){super(),this._callId=e,this._participantsCount=t,this._raisedHandsCount=i}getActionName(){return"RaisedHandListExpanded"}getAttributes(){let e=super.getAttributes();return e.CallId=this._callId,e.ParticipantsCount=this._participantsCount,e.RaisedHandsCount=this._raisedHandsCount,e}}t.RaisedHandListExpanded=r},88915:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReactionNotificationClicked=t.ReactionNotificationProcessed=void 0;const n=i(71830),o=i(46096),s=i(349),a=i(35370);var r;!function(e){e[e.Processed=0]="Processed",e[e.Clicked=1]="Clicked"}(r||(r={}));class l extends s.TelemetryEventBase{constructor(e,t){super(),this._action=e,this._conversationId=t}getEventName(){return"messaging_reaction_notification"}getAttributes(){const e=super.getAttributes();e.Action=r[this._action],e.IsGroupConversation=n.isGroupConversation(this._conversationId);const t=a.getTrackableConversationId(this._conversationId);return t&&(e.ConversationId=t),e}}t.ReactionNotificationProcessed=class extends l{constructor(e,t){super(r.Processed,e),this._messageProcessResult=t}getAttributes(){const e=super.getAttributes();return e.ProcessResult=o.MessageProcessResult[this._messageProcessResult],e}};t.ReactionNotificationClicked=class extends l{constructor(e){super(r.Clicked,e)}}},46200:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CustomReactionsManipulationAction=t.CustomReactionsManipulationTelemetry=t.ReactionsManipulationAction=t.ReactionsManipulationTelemetry=t.ReactionPickerTelemetry=t.ReactionOriginType=t.ReactionNavigationAction=t.ReactionPanelListItem=t.ReactionsSummaryClickTelemetry=t.ReactionsSummaryViewed=void 0;const n=i(96486),o=i(12056),s=i(18078),a=i(349),r=i(35370),l="messaging_reaction";var c,d,u,g,h;!function(e){e[e.ReactionsSummaryViewed=0]="ReactionsSummaryViewed",e[e.ReactionsSummaryClicked=1]="ReactionsSummaryClicked",e[e.ReactionsPanelListItemClicked=2]="ReactionsPanelListItemClicked",e[e.OpenedReactionPicker=3]="OpenedReactionPicker",e[e.ReactionAdded=4]="ReactionAdded",e[e.ReactionRemoved=5]="ReactionRemoved"}(c||(c={}));class p extends o.MessageTelemetryBase{constructor(e,t){super(e,e.conversationId),this._actionType=t,this._isOwnMessage=s.default.isMyMri(e.creator)}getAttributes(){const e=this._useOldAttributeNames()?{my_message:this._isOwnMessage}:{Action:c[this._actionType],IsOwnMessage:this._isOwnMessage};return n.assign({},super.getAttributes(),e)}}t.ReactionsSummaryViewed=class extends p{constructor(e){super(e,c.ReactionsSummaryViewed),this._skypeMessageLocal=e,this._reactionAttributesOldFormat=this.getReactionAttributesOldFormat()}getEventName(){return"reaction_action"}getEventTraceMode(){return a.TelemetryTraceMode.EventName}getReactionAttributesOldFormat(){let e={};const t=this._skypeMessageLocal.getReactions();e.Unique_Reactions_Count=t.length;const i="reaction";let o=0;return n.each(t,((t,n)=>{o=n+1,e[i+o+"_key"]=t.key,e[i+o+"_count"]=t.users.length})),e}getAttributes(){let e=super.getAttributes();return n.assign(e,this._reactionAttributesOldFormat),e.Action="reactionsSummaryViewed",e}_useOldAttributeNames(){return!0}};t.ReactionsSummaryClickTelemetry=class extends p{constructor(e,t,i){super(t,c.ReactionsSummaryClicked),this._reactionKey=e,this._mriCount=i}getEventName(){return"reaction_summary_click"}getEventTraceMode(){return a.TelemetryTraceMode.EventName}getAttributes(){let e=super.getAttributes();return e.reaction_key=this._reactionKey,e.reaction_mri_count=this._mriCount,e}_useOldAttributeNames(){return!0}};class m extends a.TelemetryEventBase{constructor(e,t,i){super(),this._reactionKey=e,this._conversationId=t,this._mriCount=i,this._actionName=c[c.ReactionsPanelListItemClicked]}getEventName(){return l}getAttributes(){let e=super.getAttributes();e.Action=this._actionName,e.ReactionKey=this._reactionKey,e.ReactionMriCount=this._mriCount;const t=r.getTrackableConversationId(this._conversationId);return t&&(e.ConversationId=t),e}}t.ReactionPanelListItem=m,function(e){e[e.ArrowNavigation=0]="ArrowNavigation",e[e.Swipe=1]="Swipe"}(d=t.ReactionNavigationAction||(t.ReactionNavigationAction={})),function(e){e[e.ReactionsPopupMenu=0]="ReactionsPopupMenu",e[e.ReactionsActionSheet=1]="ReactionsActionSheet",e[e.DoubleTap=2]="DoubleTap"}(u=t.ReactionOriginType||(t.ReactionOriginType={}));t.ReactionPickerTelemetry=class extends p{constructor(e,t){super(e,c.OpenedReactionPicker),this._origin=t}getEventName(){return l}recordUserAction(e){this._navigation=d[e]}recordReactionAdded(e){this._reactionActionData=e,this._reactionActionData.reactionAdded?this._actionType=c.ReactionAdded:this._actionType=c.ReactionRemoved}getAttributes(){const e={Navigation:this._navigation,Origin:u[this._origin]};return this._reactionActionData&&(e.ReactionLevel=this._reactionActionData.reactionLevel,e.ReactionKey=this._reactionActionData.reaction,e.IsCustomReaction=this._reactionActionData.isCustomReaction,e.IsTonedReaction=!n.isUndefined(this._reactionActionData.reactionTone),n.isUndefined(this._reactionActionData.success)||(e.Success=this._reactionActionData.success)),n.assign({},super.getAttributes(),e)}};class S extends a.TelemetryEventBase{constructor(e,t){super(),this._action=e,this._props=t}getEventName(){return l}getAttributes(){var e;return n.assign({},super.getAttributes(),{Action:g[this._action],ReactionsCount:null===(e=this._props)||void 0===e?void 0:e.numberOfReactions})}}t.ReactionsManipulationTelemetry=S,function(e){e[e.ReactionListBatchAdd=0]="ReactionListBatchAdd",e[e.ReactionListBatchRemove=1]="ReactionListBatchRemove",e[e.LastReactionRemovedCallReset=2]="LastReactionRemovedCallReset",e[e.ReactionListReset=3]="ReactionListReset",e[e.CallReactionListBatchAdd=4]="CallReactionListBatchAdd",e[e.CallReactionListBatchRemove=5]="CallReactionListBatchRemove",e[e.LastCallReactionRemovedCallReset=6]="LastCallReactionRemovedCallReset",e[e.CallReactionListReset=7]="CallReactionListReset"}(g=t.ReactionsManipulationAction||(t.ReactionsManipulationAction={}));class C extends a.TelemetryEventBase{constructor(e,t){super(),this._action=e,this._props=t}getEventName(){return l}getAttributes(){var e,t,i,o,s,a,r,l,c;return n.assign({},super.getAttributes(),{Action:h[this._action],ReactionsCount:null===(e=this._props)||void 0===e?void 0:e.numberOfReactions,AddedReactionsCount:null===(t=this._props)||void 0===t?void 0:t.numberOfAddedReactions,NotSavedReactionsCount:null===(i=this._props)||void 0===i?void 0:i.numberOfNotSavedReactions,CustomReactionsType:null===(o=this._props)||void 0===o?void 0:o.customReactionsType,AnimatedReactionsCount:null===(s=this._props)||void 0===s?void 0:s.numberOfAnimatedReactions,ToggledReactionsFromSearchCount:null===(r=null===(a=this._props)||void 0===a?void 0:a.searchData)||void 0===r?void 0:r.toggledEmoticonCount,SearchAttempts:null===(c=null===(l=this._props)||void 0===l?void 0:l.searchData)||void 0===c?void 0:c.searchInitiatedCount})}}t.CustomReactionsManipulationTelemetry=C,function(e){e[e.CustomReactionsPanelOpened=0]="CustomReactionsPanelOpened",e[e.ReactionsSavedOnDoneButton=1]="ReactionsSavedOnDoneButton",e[e.ReactionsNotSavedOnCloseButton=2]="ReactionsNotSavedOnCloseButton"}(h=t.CustomReactionsManipulationAction||(t.CustomReactionsManipulationAction={}))},49643:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RecentConversationsFilterEvent=t.RecentConversationsFilterAction=void 0;const n=i(349);var o;!function(e){e[e.SortByTime=0]="SortByTime",e[e.SortByUnread=1]="SortByUnread",e[e.SortByActive=2]="SortByActive",e[e.RowSizeDefault=3]="RowSizeDefault",e[e.RowSizeCompact=4]="RowSizeCompact",e[e.RowSizeMini=5]="RowSizeMini",e[e.MarkAllConversationsRead=6]="MarkAllConversationsRead",e[e.ShowCategories=7]="ShowCategories",e[e.HideCategories=8]="HideCategories",e[e.ShowAllConversations=9]="ShowAllConversations",e[e.ShowArchivedConversations=10]="ShowArchivedConversations"}(o=t.RecentConversationsFilterAction||(t.RecentConversationsFilterAction={}));class s extends n.TelemetryEventBase{constructor(e){super(),this._action=e}getEventName(){return"people_recent_conversations_filter"}getAttributes(){const e=super.getAttributes();return e.Action=o[this._action],e}}t.RecentConversationsFilterEvent=s},21579:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteUserAppearanceTelemetryEvent=void 0;const n=i(349);class o extends n.TelemetryEventBase{getEventName(){return"appcore_settings_remote"}getAttributes(){let e=super.getAttributes();return e.Action=this.getAction(),e}}t.RemoteUserAppearanceTelemetryEvent=class extends o{constructor(){super(...arguments),this._didUpdateColorTheme=!1,this._didUpdateColorInfo=!1,this._didToggleSystemTheme=!1,this._didToggleFlipBubbleColors=!1,this._didUpdateRecentsRowSize=!1}setDidUpdateColorTheme(){this._didUpdateColorTheme=!0}setDidUpdateColorInfo(){this._didUpdateColorInfo=!0}setDidToggleSystemTheme(){this._didToggleSystemTheme=!0}setDidToggleFlipBubbleColors(){this._didToggleFlipBubbleColors=!0}setDidUpdateRecentsRowSize(){this._didUpdateRecentsRowSize=!0}getAction(){return"Appearance"}getAttributes(){let e=super.getAttributes();return e.DidUpdateColorTheme=this._didUpdateColorTheme,e.DidToggleSystemTheme=this._didToggleSystemTheme,e.DidUpdateColorInfo=this._didUpdateColorInfo,e.DidToggleFlipBubbleColor=this._didToggleFlipBubbleColors,e.DidUpdateRecentsRowSize=this._didUpdateRecentsRowSize,e}}},52803:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReportProblemDialogSubmitedEvent=t.ReportProblemDialogOpenedEvent=void 0;const n=i(349);class o extends n.TelemetryEventBase{constructor(e){super(),this._isSimplifiedDialog=e}getEventName(){return"appcore_report_problem_dialog"}getAttributes(){const e=super.getAttributes();return e.Action=this.getActionName(),e.IsSimplifiedDialog=this._isSimplifiedDialog,e}}t.ReportProblemDialogOpenedEvent=class extends o{constructor(e){super(e)}getActionName(){return"ReportProblemDialogOpened"}};t.ReportProblemDialogSubmitedEvent=class extends o{constructor(e,t,i,n,o){super(e),this._hasDescription=t,this._hasScreenshot=i,this._hasLogs=n,this._category=o}getActionName(){return"ReportProblemDialogSubmitted"}getAttributes(){let e=super.getAttributes();return e.Category=this._category||"None selected",e.HasDescription=this._hasDescription,e.HasScreenshot=this._hasScreenshot,e.HasLogs=this._hasLogs,e}}},35704:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(68810);class o extends n.default{constructor(e,t,i,n,o){super(e,t,i,n,o)}failed(e,t){this._failed(e,t)}retry(e,t){this._retry(e,t)}succeeded(){this._succeeded()}}t.default=o},68810:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(349),s=i(94050),a=i(53374);class r extends s.default{constructor(e,t,i,n,o){super(e,void 0,n),this._subScenario=t,this._telemetrySamplingKey=i,o?(this._attempt=o._attempt+1,this._shouldSendScenarioTelemetry=o._shouldSendSampledTelemetry(),this._requestId=o._requestId):(this._attempt=0,this._requestId=this._scenarioId),this.extendProperties({attempt:this._attempt,requestId:this._requestId})}_shouldSendSampledTelemetry(){if(void 0!==this._shouldSendScenarioTelemetry)return this._shouldSendScenarioTelemetry;if(this._telemetrySamplingKey){const e=this._telemetrySamplingKey+this._subScenario,t=o.SampledEvents[e];return n.isNumber(t)?(this._shouldSendScenarioTelemetry=a.default.sampleForPercentage(t),this._shouldSendScenarioTelemetry):(this._shouldSendScenarioTelemetry=super._shouldSendSampledTelemetry(),this._shouldSendScenarioTelemetry)}return this._shouldSendScenarioTelemetry=super._shouldSendSampledTelemetry(),this._shouldSendScenarioTelemetry}test_shouldSendTelemetryPersists(){return this._shouldSendScenarioTelemetry}test_requestIdPersists(){return this._requestId}}t.default=class{constructor(e,t,i,n,o){this._service=e,this._scenarioName=t,this._properties=i,this._telemetrySamplingKey=n,this._subScenario=o,this._completed=!1,this._success=!1,this._scenario=new r(this._scenarioName,this._subScenario,this._telemetrySamplingKey,this._properties)}begin(){this._scenario.start()}_failed(e,t){this._completed=!0,this._success=!1,this._scenario.fail(e,t)}_retry(e,t){this._scenario.fail(e,t),this._scenario=new r(this._scenarioName,this._subScenario,this._telemetrySamplingKey,this._properties,this._scenario),this.begin()}_succeeded(e){this._completed=!0,this._success=!0,this._scenario.finish(e)}ensureResolved(){}ensureRejected(){}test_exposeRequestId(){return this._scenario.test_requestIdPersists()}test_exposeShouldSendTelemetry(){return this._scenario.test_shouldSendTelemetryPersists()}}},12324:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResponsivenessTelemetryScenario=t.ResponsivenessScenarioStep=void 0;const n=i(96486),o=i(15963),s=i(94050),a=i(12770),r=i(53374),l=i(36237),c=i(67024),d=i(89391);var u;!function(e){e[e.ActionStarted=0]="ActionStarted",e[e.ActionClosed=1]="ActionClosed",e[e.OnJsPress=2]="OnJsPress",e[e.ActionDone=3]="ActionDone",e[e.TimedOut=4]="TimedOut",e[e.DelayComputationError=5]="DelayComputationError"}(u=t.ResponsivenessScenarioStep||(t.ResponsivenessScenarioStep={}));t.ResponsivenessTelemetryScenario=class{constructor(e,t,i=!1){this._scenarioCompleted=!1,this._scenarioTimedOut=!1,this._traceOnly=!1,this._responsivenessOpenTimeoutMs=d.default.getS4LCMCFeaturesNoSubscription().responsivenessTrackingTimeout,this._onResponsivenessOpenTimeout=()=>{if(this._scenarioCompleted)return;const e={cause:u[u.TimedOut]};this._scenario.finish(e),this._scenarioCompleted=!0,this._scenarioTimedOut=!0},this._scenarioName=e,this._properties=t,this._traceOnly=i}_startNewScenario(e){this._scenarioTimedOut=!1,this._scenarioCompleted=!1;const t=Object.assign(Object.assign({},this._properties),{cause:u[e]});this._scenario=new s.default(this._scenarioName,void 0,void 0,void 0,!0),this._scenario.start(t),this._resetTimeoutTimer()}cancelTimeoutTimer(){this._timeoutTimerId&&(a.default.clearTimeout(this._timeoutTimerId),this._timeoutTimerId=void 0)}traceOnly(e){this._traceOnly=e}_resetTimeoutTimer(){this.cancelTimeoutTimer(),this._timeoutTimerId=a.default.setTimeout(this._onResponsivenessOpenTimeout,this._responsivenessOpenTimeoutMs)}startResponsivenessScenario(){this._startNewScenario(u.ActionStarted)}markStep(e,t){var i;if(this._scenarioTimedOut&&this._startNewScenario(u.TimedOut),!this._scenarioCompleted)if(e===u.ActionClosed||e===u.DelayComputationError){const t={cause:u[e]};null===(i=this._scenario)||void 0===i||i.finish(t),this._scenarioCompleted=!0,this.cancelTimeoutTimer()}else{const i=u[e];this._scenario.isStepMarked(i)||this._scenario.markStepCompleted(i,void 0,t,this._traceOnly),this._resetTimeoutTimer()}}isCompleted(){return this._scenarioCompleted}shouldEnableSampledScenario(){if(void 0!==this._shouldEnableScenario)return this._shouldEnableScenario;if(n.isEmpty(c.SampledScenarios))return l.debug((()=>"Sampled scenarios not populated from ECS yet")),!1;const e=c.SampledScenarios[o.ScenarioName[this._scenarioName]];return l.debug((()=>"Scenario sample rate is "+e+"%")),n.isNumber(e)?(this._shouldEnableScenario=r.default.sampleForPercentage(e),l.debug((()=>"Scenario tracking calculated. Enabled: "+this._shouldEnableScenario)),this._shouldEnableScenario):(l.debug((()=>"Scenario sample rate not available. Disable scenario tracking.")),this._shouldEnableScenario=!1,this._shouldEnableScenario)}}},15963:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioTrackerBase=t.ScenarioName=void 0,function(e){e[e.SendMessage=0]="SendMessage",e[e.SendRestoredMessage=1]="SendRestoredMessage",e[e.SendTextMessage=2]="SendTextMessage",e[e.SendPicture=3]="SendPicture",e[e.SendVideo=4]="SendVideo",e[e.SendAudioMessage=5]="SendAudioMessage",e[e.SendLocation=6]="SendLocation",e[e.SendMoji=7]="SendMoji",e[e.SendSticker=8]="SendSticker",e[e.SendFile=9]="SendFile",e[e.SendGif=10]="SendGif",e[e.InitialRecentsSync=11]="InitialRecentsSync",e[e.ReactionsSummary=12]="ReactionsSummary",e[e.ShowReactionsSummary=13]="ShowReactionsSummary",e[e.ReactionsMenuAccessable=14]="ReactionsMenuAccessable",e[e.ShowReactionsMenu=15]="ShowReactionsMenu",e[e.ReactionsMenu=16]="ReactionsMenu",e[e.OpenMojiPicker=17]="OpenMojiPicker",e[e.ShareToSkypeMedia=18]="ShareToSkypeMedia",e[e.ShareToSkypeText=19]="ShareToSkypeText",e[e.ForwardAdditionalText=20]="ForwardAdditionalText",e[e.OpenEmoticonPicker=21]="OpenEmoticonPicker",e[e.OpenDiversityPicker=22]="OpenDiversityPicker",e[e.OpenMeetNowPicker=23]="OpenMeetNowPicker",e[e.OpenImageUploader=24]="OpenImageUploader",e[e.AppStartup=25]="AppStartup",e[e.StreamFrom=26]="StreamFrom",e[e.IncomingCall=27]="IncomingCall",e[e.AnswerCall=28]="AnswerCall",e[e.Gallery=29]="Gallery",e[e.Search=30]="Search",e[e.PnvUI=31]="PnvUI",e[e.NewGroupChat=32]="NewGroupChat",e[e.PNH_Post=33]="PNH_Post",e[e.PNH_Delete=34]="PNH_Delete",e[e.PopCard=35]="PopCard",e[e.FirstRunCoachMark=36]="FirstRunCoachMark",e[e.SuggestionsConsent=37]="SuggestionsConsent",e[e.OpenChatStickerPicker=38]="OpenChatStickerPicker",e[e.EmergencyRestoreEndpoints=39]="EmergencyRestoreEndpoints",e[e.ChatServiceRequest=40]="ChatServiceRequest",e[e.TimeToConnected=41]="TimeToConnected",e[e.LoginAuth=42]="LoginAuth",e[e.EmoticonRendering=43]="EmoticonRendering",e[e.PesPickerOpen=44]="PesPickerOpen",e[e.EmoticonPesPickerOpen=45]="EmoticonPesPickerOpen",e[e.OpenGifPicker=46]="OpenGifPicker",e[e.MessagePanelPip=47]="MessagePanelPip",e[e.CreateMeetNow=48]="CreateMeetNow",e[e.JoinMeetNow=49]="JoinMeetNow",e[e.HtmlNotification=50]="HtmlNotification",e[e.FirstLogin=51]="FirstLogin",e[e.Startup=52]="Startup",e[e.RenderCallControls=53]="RenderCallControls",e[e.RenderLocalCallReaction=54]="RenderLocalCallReaction",e[e.ShowCameraViewfinder=55]="ShowCameraViewfinder",e[e.PreviewSnappedPhoto=56]="PreviewSnappedPhoto",e[e.OpenContactsPanel=57]="OpenContactsPanel",e[e.OpenContactsPanelV2=58]="OpenContactsPanelV2",e[e.OpenFindPanel=59]="OpenFindPanel",e[e.OpenIntegration=60]="OpenIntegration",e[e.ViewMediaIntent=61]="ViewMediaIntent",e[e.PlayVideoIntent=62]="PlayVideoIntent",e[e.Logout=63]="Logout",e[e.PerfTelemetryScenario=64]="PerfTelemetryScenario",e[e.SendTextMessageUI=65]="SendTextMessageUI",e[e.SendTextMessageTimeToAppearInChat=66]="SendTextMessageTimeToAppearInChat",e[e.SendPictureUI=67]="SendPictureUI",e[e.SayHi=68]="SayHi",e[e.ConversationOpenAnimation=69]="ConversationOpenAnimation",e[e.InviteAcceptance=70]="InviteAcceptance",e[e.ActionInvite=71]="ActionInvite",e[e.GuestLoginFlow=72]="GuestLoginFlow",e[e.GuestUpsellPanel=73]="GuestUpsellPanel",e[e.GuestSiSuComponent=74]="GuestSiSuComponent",e[e.AppStartupIntent=75]="AppStartupIntent",e[e.ApsFetchIntegrations=76]="ApsFetchIntegrations",e[e.ResponsivenessMeetNow=77]="ResponsivenessMeetNow",e[e.ResponsivenessMuteCall=78]="ResponsivenessMuteCall",e[e.ResponsivenessToggleVideoCall=79]="ResponsivenessToggleVideoCall",e[e.ResponsivenessEndCall=80]="ResponsivenessEndCall",e[e.ResponsivenessChatPanelInCall=81]="ResponsivenessChatPanelInCall",e[e.ResponsivenessCancelEditMessage=82]="ResponsivenessCancelEditMessage",e[e.ResponsivenessRecordAudio=83]="ResponsivenessRecordAudio",e[e.ResponsivenessSendEditMessage=84]="ResponsivenessSendEditMessage",e[e.ResponsivenessSelectHubTab=85]="ResponsivenessSelectHubTab",e[e.ResponsivenessOpenProfile=86]="ResponsivenessOpenProfile",e[e.ResponsivenessGoBackFromConversation=87]="ResponsivenessGoBackFromConversation"}(t.ScenarioName||(t.ScenarioName={}));t.ScenarioTrackerBase=class{}},29034:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduledCallsFetchedEvent=t.ScheduledCallCancelEvent=t.ScheduledCallRSVPEvent=t.ScheduleNextCallPresentedEvent=t.ScheduledCallEditedEvent=t.ScheduleCallCompletedOrCanceledEvent=t.ScheduledCallsFetchedStatus=void 0;const n=i(31147),o=i(79829),s=i(349),a=i(35370);var r;!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(r=t.ScheduledCallsFetchedStatus||(t.ScheduledCallsFetchedStatus={}));class l extends s.TelemetryEventBase{getEventName(){return"calling_schedule_call"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}class c extends l{constructor(e,t,i,n,o,s,a){super(),this._hasSubjectChanged=e,this._hasDateTimeChanged=t,this._hasReminderChanged=i,this._entryPoint=n,this._conversationType=o,this._conversationId=s,this._reminder=a}getAttributes(){let e=super.getAttributes();return e.EntryPoint=o.ScheduleCallEntryPoint[this._entryPoint],e.ConversationType=n.ConversationType[this._conversationType],e.HasSubjectChanged=this._hasSubjectChanged,e.HasDateTimeChanged=this._hasDateTimeChanged,e.HasReminderChanged=this._hasReminderChanged,e.Reminder=this._reminder?o.ScheduledCallReminder[this._reminder]:"",this._conversationId&&(e.ConversationId=this._conversationId),e}}t.ScheduleCallCompletedOrCanceledEvent=class extends c{constructor(e=!1,t,i,n,o,s,a,r){super(t,i,n,o,s,a,r),this._wasCanceled=e}getActionName(){return this._wasCanceled?"ScheduleCallCanceled":"ScheduleCallCompleted"}};t.ScheduledCallEditedEvent=class extends c{constructor(e,t,i,n,o,s,a,r,l){super(i,n,o,s,a,r,l),this._isOrganizer=e,this._hasStatusChanged=t}getActionName(){return"ScheduledCallEdited"}getAttributes(){let e=super.getAttributes();return e.IsOrganizer=this._isOrganizer,e.HasStatusChanged=this._hasStatusChanged,e}};t.ScheduleNextCallPresentedEvent=class extends l{constructor(e){super(),this._callDuration=e}getActionName(){return"ScheduleNextCallPresented"}getAttributes(){let e=super.getAttributes();return e.CallDuration=this._callDuration,e}};t.ScheduledCallRSVPEvent=class extends l{constructor(e,t,i,n){super(),this._entryPoint=e,this._responseValue=t,this._conversationId=i,this._scheduledCallId=n}getActionName(){return"ScheduledCallRSVP"}getAttributes(){const e=super.getAttributes();return e.EntryPoint=o.ScheduleCallRSVPEntryPoint[this._entryPoint],e.ResponseValue=o.ScheduledCallInvitationStatus[this._responseValue],e.ScheduledCallId=this._scheduledCallId,e.ConversationType=n.ConversationType[a.getConversationTypeForTelemetry(this._conversationId)],e}};t.ScheduledCallCancelEvent=class extends l{constructor(e,t){super(),this._entryPoint=e,this._conversationId=t}getActionName(){return"ScheduledCallCanceled"}getAttributes(){const e=super.getAttributes();return e.EntryPoint=o.ScheduleCallCancelEventEntryPoint[this._entryPoint],this._conversationId&&(e.ConversationType=n.ConversationType[a.getConversationTypeForTelemetry(this._conversationId)]),e}};t.ScheduledCallsFetchedEvent=class extends l{constructor(e,t){super(),this._status=e,this._error=t}getActionName(){return"ScheduledCallsFetched"}getAttributes(){const e=super.getAttributes();return e.Status=r[this._status],this._error&&(void 0!==this._error.statusCode&&(e.ErrorCode=this._error.statusCode),void 0!==this._error.statusText&&(e.ErrorMessage=this._error.statusText)),e}}},28477:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenSharingPanelStartedSharingEvent=t.ScreenSharingPanelCancelEvent=t.ScreenSharingStartOrigin=t.ScreenSharingPanelCancelOrigin=void 0;const n=i(48540);var o,s;!function(e){e[e.BackButton=0]="BackButton",e[e.CancelButton=1]="CancelButton",e[e.ClickOutside=2]="ClickOutside",e[e.Esc=3]="Esc"}(o=t.ScreenSharingPanelCancelOrigin||(t.ScreenSharingPanelCancelOrigin={})),function(e){e[e.StartButton=0]="StartButton",e[e.DoubleClickSource=1]="DoubleClickSource",e[e.EnterWithKeyboardNavigation=2]="EnterWithKeyboardNavigation"}(s=t.ScreenSharingStartOrigin||(t.ScreenSharingStartOrigin={}));const a=i(349);class r extends a.TelemetryEventBase{constructor(e,t,i,n){super(),this._screensCount=e,this._windowsCount=t,this._origin=i,this._isSwitchingScreen=n}getEventName(){return"calling_screen_sharing_panel"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e.IsSwitchingScreen=this._isSwitchingScreen,e.ScreensCount=this._screensCount,e.WindowsCount=this._windowsCount,e.Origin=this._origin,e}}t.ScreenSharingPanelCancelEvent=class extends r{constructor(e,t,i,n){super(t,i,o[e],n)}getActionName(){return"ScreenSharingPanelCancel"}getAttributes(){return super.getAttributes()}};t.ScreenSharingPanelStartedSharingEvent=class extends r{constructor(e,t,i,n,o){super(i,n,s[t],o),this._sourceType=e}getActionName(){return"ScreenSharingPanelStartedSharing"}getAttributes(){const e=super.getAttributes();return e.SourceType=n.SharingSourceType[this._sourceType],e}}},10996:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compositeScenarioResultsRendered=t.markMessageSearchAdditionalMessageLoading=t.markMessageSearchScenarioResultMessageTimestamp=t.invalidateSearchScenario=t.searchResultsRendered=t.searchResultsNotReceived=t.searchResultsReceived=t.searchCallSent=t.willSearch=t.setIdentifier=t.test_getSearchScenario=t.test_resetSearchScenarios=t.searchPanelZeroTermResultsRendered=t.searchPanelIsRendered=t.searchPanelOpening=t.searchWillOpen=void 0;const n=i(96486),o=i(36237),s=i(89391),a=i(46096),r=i(69399),l=i(74636),c=i(30124),d=i(69399),u=new l.PerfTelemetryScenario;t.searchWillOpen=function(){u.endScenario(),u.startScenario()},t.searchPanelOpening=function(e){u.getIdentifier()||u.setIdentifier(e)},t.searchPanelIsRendered=function(e){u.isTrackingIdentifier(e)&&o.track(new d.SearchPanelRendered(u.getCurrentDuration(),c.default.isUsingStackNavigationContext()))},t.searchPanelZeroTermResultsRendered=function(e){u.isTrackingIdentifier(e)&&o.track(new d.SearchPanelZeroTermResultsRendered(u.getCurrentDuration(),c.default.isUsingStackNavigationContext()))};const g={};function h(){g[r.ScenarioSearchTypes.AllPeople]=new l.PerfTelemetryScenario,g[r.ScenarioSearchTypes.Bots]=new l.PerfTelemetryScenario,g[r.ScenarioSearchTypes.IndexedDB]=new l.PerfTelemetryScenario,g[r.ScenarioSearchTypes.FastContacts]=new l.PerfTelemetryScenario,g[r.ScenarioSearchTypes.Message]=new l.PerfTelemetryScenario,g[r.ScenarioSearchTypes.MessageInConversation]=new l.PerfTelemetryScenario,g[r.ScenarioSearchTypes.PublicDirectory]=new l.PerfTelemetryScenario}h(),t.test_resetSearchScenarios=function(){h()},t.test_getSearchScenario=function(e){return g[e]};let p=[];function m(e,t){if(e!==r.ScenarioSearchTypes.MessageInConversation)return;const i=n.findIndex(p,(e=>e.sessionId===t));return-1!==i?p[i].additionalLoading:void 0}function S(e,t){return{durationInMs:e.getCurrentDuration(),isStackMode:c.default.isUsingStackNavigationContext(),isZeroTermSearch:t}}function C(e,t){if(e===r.ScenarioSearchTypes.Message||e===r.ScenarioSearchTypes.MessageInConversation)return{endpoint:s.default.getConfigSettingsNoSubscription().messageSearch.host,searchLimit:t}}t.setIdentifier=function(e,t){const i=g[e];t!==i.getIdentifier()&&(i.endScenario(),i.startScenario()),i.setIdentifier(t)},t.willSearch=function(e,t){const i=g[e];i.endScenario(),i.startScenario(),i.setIdentifier(t)},t.searchCallSent=function(e,t,i,n){const s=g[e];if(!s.isTrackingIdentifier(t))return;s.markCallSent();const a=S(s,i),r=C(e,n);o.track(new d.SearchRequestCallSent(a,e,r))},t.searchResultsReceived=function(e,t,i,n){const s=g[e];if(!s.isTrackingIdentifier(t))return;s.markResultsReceived();const a=S(s,i),r=C(e,n);o.track(new d.SearchRequestResultsReceived(a,e,r))},t.searchResultsNotReceived=function(e,t,i,n,s,a,r){const l=g[e];if(!l.isTrackingIdentifier(t))return;l.markResultsNotReceived();const c=Object.assign(Object.assign({},S(l,i)),{errorCode:n,errorMessage:s,wasNetworkAvailable:a}),u=C(e,r);o.track(new d.SearchRequestResultsNotReceived(c,e,u))},t.searchResultsRendered=function(e,t,i,n){const s=g[e];if(!s.isTrackingIdentifier(t))return;const a=S(s,i),r=C(e,n),l=m(e,t);o.track(new d.SearchRequestResultsRendered(a,e,r,l)),s.endScenario()},t.invalidateSearchScenario=function(e,t){const i=g[e];i.isTrackingIdentifier(t)&&(i.invalidate(),i.endScenario())},t.markMessageSearchScenarioResultMessageTimestamp=function(e,t,i){if(!g[r.ScenarioSearchTypes.MessageInConversation].isTrackingIdentifier(e))return;p.length>=10&&(p=p.slice(-10));const o=n.findIndex(p,(e=>e.conversationId===i)),s={conversationId:i,messageTimestamp:t,sessionId:e,additionalLoading:r.AdditionalLoading.None};if(-1===o)p.push(s);else{const i=p[o];if(i.messageTimestamp===t&&i.sessionId===e)return;p[o]=s}},t.markMessageSearchAdditionalMessageLoading=function(e,t,i){const o=g[r.ScenarioSearchTypes.MessageInConversation],s=n.findIndex(p,(t=>t.conversationId===e));if(-1===s)return;const a=p[s],l=a.sessionId;o.isTrackingIdentifier(l)&&a.messageTimestamp===t&&(p[s]=Object.assign(Object.assign({},a),{additionalLoading:i}))},t.compositeScenarioResultsRendered=function(e,t,i,s,l){const u=[{scenarioType:r.ScenarioSearchTypes.PublicDirectory,shouldBeResolved:l.publicDirectory},{scenarioType:r.ScenarioSearchTypes.Message,shouldBeResolved:l.message},{scenarioType:r.ScenarioSearchTypes.IndexedDB,shouldBeResolved:l.indexedDb},{scenarioType:r.ScenarioSearchTypes.Bots,shouldBeResolved:l.bots},{scenarioType:r.ScenarioSearchTypes.AllPeople,shouldBeResolved:l.allPeople},{scenarioType:r.ScenarioSearchTypes.FastContacts,shouldBeResolved:l.fastContacts},{scenarioType:r.ScenarioSearchTypes.MessageInConversation,shouldBeResolved:l.messageInConversation}],h=n.map(u,(e=>({scenario:g[e.scenarioType],shouldBeResolved:e.shouldBeResolved,name:r.ScenarioSearchTypes[e.scenarioType]})));for(var p=0;p<h.length;p++){var S=h[p];if(!S.shouldBeResolved)continue;if(S.scenario.getNumberOfSteps()<4)return void o.log(a.LogTraceArea.Search,"compositeScenarioResultsRendered, ignoring event, because a scenario does not have all the expected steps. sessionId: "+e)}const C=n.reduce(h,((e,t)=>t.shouldBeResolved?Math.min(e,t.scenario.getStepTimestamp(0)):e),Number.MAX_SAFE_INTEGER),f=n.reduce(h,((e,t)=>{const i=t.scenario.getNumberOfSteps();if(t.shouldBeResolved&&4===i){const i=t.scenario.getNumberOfSteps()-2;return Math.max(e,t.scenario.getStepTimestamp(i))}return e}),Number.MIN_SAFE_INTEGER),y=n.reduce(h,((e,t)=>{if(t.shouldBeResolved){const i=t.scenario.getNumberOfSteps()-1;return Math.max(e,t.scenario.getStepTimestamp(i))}return e}),Number.MIN_SAFE_INTEGER),_=n.map(h,(e=>{const t=e.scenario.getNumberOfSteps();if(e.shouldBeResolved&&4===t){const i=t-2;return e.scenario.getStepTimestamp(i)-e.scenario.getStepTimestamp(0)}})),v=f===Number.MIN_SAFE_INTEGER?void 0:f-C,b=y-C,T=m(r.ScenarioSearchTypes.MessageInConversation,e),P=new d.CompositeSearch(b,c.default.isUsingStackNavigationContext(),t,i,s,T,v,_[0],_[1],_[2],_[3],_[4],_[5],_[6]);o.track(P);let A="Composite ";s&&(A+="zero term "),A+="search in "+(n.isUndefined(i)?d.CompositeSearchOrigin[t]:a.SearchResultsListOrigin[i])+" took "+b+"ms (time to process requests and render results).\nIt took "+v+"ms to handle all search requests.";for(let e=0;e<h.length;e++)n.isUndefined(_[e])||(A+="\n",A+=h[e].name+" search request took "+_[e]+"ms.");T&&(A+="\nAdditionalLoading: "+r.AdditionalLoading[T]),o.log(a.LogTraceArea.Search,A)}},3362:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SearchTelemetryScenario=t.SearchScenarioComputation=void 0;const n=i(46096),o=i(15963),s=i(70919),a=i(94050);var r;!function(e){e[e.GroupChats=0]="GroupChats",e[e.Bots=1]="Bots",e[e.Messages=2]="Messages",e[e.PublicDirectory=3]="PublicDirectory"}(r=t.SearchScenarioComputation||(t.SearchScenarioComputation={}));t.SearchTelemetryScenario=class{constructor(e,t,i){this._origin=e,this._searchPanelInitiator=t,this._getResultType=i,this._isSuccessful=!1,this._scenario=new a.default(o.ScenarioName.Search),this._scenario.setDuplicateStepMarkingEnabled(),this._scenario.start(this._getBaseAttributes())}clickOnResult(e,t,i,o){const s=this._getBaseAttributes();s.ResultType=this._getResultType(e,i),s.SearchGroup=n.SearchResultsListGroup[t],s.Index=o,this._isSuccessful=!0,this._scenario.markStepCompleted("ClickOnResult",s)}clickOnResultContextMenu(e,t,i){if(!this._scenario.isResolved()){const o=this._getBaseAttributes();o.ResultType=this._getResultType(e),o.SearchGroup=n.SearchResultsListGroup[t],o.ContextMenuCommand=i,this._isSuccessful=!0,this._scenario.markStepCompleted("ClickOnResultContextMenu",o)}}clickOnMore(e){const t=this._getBaseAttributes();t.SearchGroup=n.SearchResultsListGroup[e],this._scenario.markStepCompleted("ClickOnMore",t)}computationFailed(e,t,i){const n=this._getBaseAttributes();n.FailedComputation=r[e],t&&(n.ErrorCode=t),i&&(n.ErrorMessage=i),this._scenario.markStepCompleted("ComputationFailed",n)}finish(){this._isSuccessful?this._scenario.finish(this._getBaseAttributes()):this._scenario.fail(void 0,this._getBaseAttributes())}setQueryLength(e){this._queryLength=e}setSearchFilter(e){this._searchFilter=e}_getBaseAttributes(){const e={};return e.Origin=n.SearchResultsListOrigin[this._origin],void 0!==this._queryLength&&(e.QueryLength=this._queryLength),this._searchFilter&&(e.SearchFilter=s.DesktopSearchFilterOptions[this._searchFilter]),this._searchPanelInitiator&&(e.SearchPanelInitiator=n.SearchPanelInitiator[this._searchPanelInitiator]),e}}},63823:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalShortcutsSettingTelemetryEvent=t.SplitViewTelemetryEvent=t.EcoModeSettingsEvent=t.NoiseSuppressionSettingsEvent=t.CallingSettingsEvent=t.NotificationSettingsChangeTelemetry=t.AVSettingsDialogEvent=t.TelemetryConsentDialogEvent=t.PromptPermissionDialogEvent=t.PromptPermissionDialogVersion=t.AvatarPickerDialogEvent=t.UserProfileDialogEvent=t.ThemeDialogEvent=t.OnboardingDialogEvent=void 0;const n=i(96486),o=i(75352),s=i(72822),a=i(46096),r=i(78262),l=i(349),c=i(11698),d=i(63841);class u extends l.TelemetryEventBase{constructor(e,t,i){super(),this._origin=e,this._onboardingDisplayOrder=t,this._onboardingStepsCount=i,this._navExit=s.DialogNavExit.Unknown,this._isNewUser=!1,this._isUpgradedFromDelphi=!1}getExit(){return this._navExit}setExit(e){this._navExit=e}setIsNewUser(e){this._isNewUser=e}setIsUpgradedFromDelphi(e){this._isUpgradedFromDelphi=e}getAttributes(){return n.assign(super.getAttributes(),{Origin:s.DialogNavOrigin[this._origin],Duration:Date.now()-this._eventCreationTime,OnboardingDisplayOrder:void 0!==this._onboardingDisplayOrder?this._onboardingDisplayOrder:-1,OnboardingStepsCount:void 0!==this._onboardingStepsCount?this._onboardingStepsCount:-1,Exit:s.DialogNavExit[this._navExit],IsNewUser:this._isNewUser,IsUpgradedFromDelphi:this._isUpgradedFromDelphi})}}class g extends u{constructor(){super(...arguments),this._onboardingTrackingAttributes={}}setOnboardingAttributes(e){this._onboardingTrackingAttributes=e}getOnboardingAttributes(){return this._onboardingTrackingAttributes}}t.OnboardingDialogEvent=g;t.ThemeDialogEvent=class extends g{constructor(){super(...arguments),this._didToggleLightDarkTab=!1,this._didSelectNewTheme=!1}getEventName(){return"settings_themeDialog"}markDidToggleLightDarkTab(){this._didToggleLightDarkTab=!0}markDidSelectNewTheme(){this._didSelectNewTheme=!0}setFinalTheme(e){this._finalTheme=e}getAttributes(){return n.assign(super.getAttributes(),{DidToggleLightDarkTab:this._didToggleLightDarkTab,DidSelectNewTheme:this._didSelectNewTheme,FinalTheme:void 0!==this._finalTheme?d.Theme[this._finalTheme]:""})}};t.UserProfileDialogEvent=class extends g{getEventName(){return"settings_userProfileDialog"}};var h;t.AvatarPickerDialogEvent=class extends g{constructor(){super(...arguments),this._didHaveInitialAvatar=!1,this._didHaveFinalAvatar=!1,this._didSetNewAvatar=!1,this._didRemoveAvatar=!1,this._didRequestCameraPermission=!1,this._didGrantCameraPermission=!1,this._didRequestCameraRollPermission=!1,this._didGrantCameraRollPermission=!1,this._didUseCommonAvatarPicker=!1}getEventName(){return"settings_avatarPickerDialog"}didHaveInitialAvatar(){return this._didHaveInitialAvatar}markDidHaveInitialAvatar(){this._didHaveInitialAvatar=!0}markDidHaveFinalAvatar(){this._didHaveFinalAvatar=!0}markDidSetNewAvatar(){this._didSetNewAvatar=!0}markDidRemoveAvatar(){this._didRemoveAvatar=!0}setAvatarSource(e){this._avatarSource=e}markDidUseCommonAvatarPicker(){this._didUseCommonAvatarPicker=!0}markPermissionRequested(e){switch(e){case r.PermissionType.CameraRoll:this._didRequestCameraRollPermission=!0;break;case r.PermissionType.Camera:this._didRequestCameraPermission=!0}}markPermissionGranted(e,t){switch(e){case r.PermissionType.CameraRoll:this._didGrantCameraRollPermission=t;break;case r.PermissionType.Camera:this._didGrantCameraPermission=t}}getAttributes(){return n.assign(super.getAttributes(),{DidHaveInitialAvatar:this._didHaveInitialAvatar,DidHaveFinalAvatar:this._didHaveFinalAvatar,DidSetNewAvatar:this._didSetNewAvatar,DidRemoveAvatar:this._didRemoveAvatar,DidUseCommonAvatarPicker:this._didUseCommonAvatarPicker,AvatarSource:void 0!==this._avatarSource?a.AvatarDataSource[this._avatarSource]:a.AvatarDataSource[a.AvatarDataSource.Unknown],DidRequestCameraPermission:this._didRequestCameraPermission,DidGrantCameraPermission:this._didGrantCameraPermission,DidRequestCameraRollPermission:this._didRequestCameraRollPermission,DidGrantCameraRollPermission:this._didGrantCameraRollPermission})}},function(e){e[e.V1=0]="V1",e[e.V3=1]="V3",e[e.V4_FirstBlank=2]="V4_FirstBlank",e[e.V4_FirstWithInfo=3]="V4_FirstWithInfo",e[e.V4_FirstWithPreprompt=4]="V4_FirstWithPreprompt"}(h=t.PromptPermissionDialogVersion||(t.PromptPermissionDialogVersion={}));t.PromptPermissionDialogEvent=class extends g{constructor(e,t,i,n){super(e,i,n),this._version=t,this._didAlreadyPromptNotificationsPermission=!1,this._didAlreadyPromptMicPermission=!1,this._didAlreadyPromptCameraPermission=!1,this._didRequestNotificationsPermission=!1,this._didRequestMicPermission=!1,this._didRequestCameraPermission=!1,this._didGrantNotificationsPermission=!1,this._didGrantMicPermission=!1,this._didGrantCameraPermission=!1,this._didNotificationPermissionRequestFailed=!1,this._didVisitPrivacyStatement=!1,this._didSeeLearnMoreButton=!1}getEventName(){return"settings_promptPermissionDialog"}markWhetherSystemPromptsHaveAlreadyBeenDisplayed(e,t,i){this._didAlreadyPromptNotificationsPermission=!e,this._didAlreadyPromptMicPermission=!t,this._didAlreadyPromptCameraPermission=!i}markPermissionGranted(e,t){switch(e){case r.PermissionType.Notifications:this._didGrantNotificationsPermission=t;break;case r.PermissionType.Microphone:this._didGrantMicPermission=t;break;case r.PermissionType.Camera:this._didGrantCameraPermission=t}}markPermissionRequested(e){switch(e){case r.PermissionType.Notifications:this._didRequestNotificationsPermission=!0;break;case r.PermissionType.Microphone:this._didRequestMicPermission=!0;break;case r.PermissionType.Camera:this._didRequestCameraPermission=!0}}markNotificationPermissionRequestFailed(){this._didNotificationPermissionRequestFailed=!0}markDidVisitPrivacyStatement(){this._didVisitPrivacyStatement=!0}markDidSeeLearnMoreButton(){this._didSeeLearnMoreButton=!0}getAttributes(){return n.assign(super.getAttributes(),{DidAlreadyPropmptNotificationsPermission:this._didAlreadyPromptNotificationsPermission,DidAlreadyPropmptMicPermission:this._didAlreadyPromptMicPermission,DidAlreadyPropmptCameraPermission:this._didAlreadyPromptCameraPermission,DidRequestNotificationsPermission:this._didRequestNotificationsPermission,DidRequestMicPermission:this._didRequestMicPermission,DidRequestCameraPermission:this._didRequestCameraPermission,DidGrantNotificationsPermission:this._didGrantNotificationsPermission,DidGrantMicPermission:this._didGrantMicPermission,DidGrantCameraPermission:this._didGrantCameraPermission,DidNotificationPermissionRequestFailed:this._didNotificationPermissionRequestFailed,DialogVersion:h[this._version],DidVisitPrivacyStatement:this._didVisitPrivacyStatement,DidSeeLearnMoreButton:this._didSeeLearnMoreButton})}};t.TelemetryConsentDialogEvent=class extends g{constructor(e,t,i){super(e,t,i),this._didVisitPrivacyStatement=!1,this._didVisitLearnMoreLink=!1}getEventName(){return"settings_optionalTelemetryConsentDialog"}markDidVisitPrivacyStatement(){this._didVisitPrivacyStatement=!0}markDidVisitLearnMoreLink(){this._didVisitLearnMoreLink=!0}getAttributes(){return n.extend({},super.getAttributes(),this.getOnboardingAttributes(),{DidVisitPrivacyStatement:this._didVisitPrivacyStatement,DidVisitLearnMoreLink:this._didVisitLearnMoreLink})}};t.AVSettingsDialogEvent=class extends g{constructor(e,t,i,n){super(t,i,n),this._settingsMode=e,this._didChangeCameraSetting=!1,this._didChangeMicSetting=!1,this._didChangeSpeakerSetting=!1,this._didChangeRingingDeviceSetting=!1,this._didAdjustMicrophone=!1,this._didChangeMicAutoAdjustment=!1,this._shouldAutoAdjustMic=!1,this._didPerformAudioTest=!1,this._didPerformTestCall=!1,this._didChangeSpeakerVolume=!1,this._didChangeEchoCancellation=!1,this._shouldCancelEcho=!1,this._didChangeMusicMode=!1,this._musicMode=!1}getEventName(){return"settings_avSettingsDialog"}markDidChangeCameraSetting(){this._didChangeCameraSetting=!0}markDidChangeMicSetting(){this._didChangeMicSetting=!0}markDidChangeSpeakerSetting(){this._didChangeSpeakerSetting=!0}markDidChangeRingingDeviceSetting(){this._didChangeRingingDeviceSetting=!0}markDidAdjustMicrophone(){this._didAdjustMicrophone=!0}markDidChangeMicrophoneAutoAdjustment(e){this._didChangeMicAutoAdjustment=!0,this._shouldAutoAdjustMic=e}markAudioTestPerformed(){this._didPerformAudioTest=!0}markTestCallPerformed(){this._didPerformTestCall=!0}markDidChangeSpeakerVolume(){this._didChangeSpeakerVolume=!0}markDidChangeEchoCancellation(e){this._didChangeEchoCancellation=!0,this._shouldCancelEcho=e}markDidChangeMusicMode(e){this._didChangeMusicMode=!0,this._musicMode=e}getAttributes(){return n.extend({},super.getAttributes(),this.getOnboardingAttributes(),{DialogType:o.SettingsMode[this._settingsMode],DidChangeCameraSetting:this._didChangeCameraSetting,DidChangeMicSetting:this._didChangeMicSetting,DidChangeSpeakerSetting:this._didChangeSpeakerSetting,DidChangeSpeakerVolume:this._didChangeSpeakerVolume,DidChangeRingingDeviceSetting:this._didChangeRingingDeviceSetting,DidAdjustMicrophone:this._didAdjustMicrophone,DidChangeMicAutoAdjustment:this._didChangeMicAutoAdjustment,ShouldAutoAdjustMic:this._shouldAutoAdjustMic,DidPerformAudioTest:this._didPerformAudioTest,DidPerformTestCall:this._didPerformTestCall,ShouldCancelEcho:this._shouldCancelEcho,DidChangeEchoCancellation:this._didChangeEchoCancellation,MusicMode:this._musicMode,DidChangeMusicMode:this._didChangeMusicMode})}};class p extends l.TelemetryEventBase{constructor(e){super(),this._notificationSettings=e}getEventName(){return"all_notification_settings_change"}getAttributes(){let e=super.getAttributes();return n.forOwn(this._notificationSettings,((t,i)=>{this._setAttributeIfDefined(e,n.upperFirst(i),t)})),e}_setAttributeIfDefined(e,t,i){n.isUndefined(i)||(e[t]=i)}}t.NotificationSettingsChangeTelemetry=p;class m extends l.TelemetryEventBase{constructor(){super()}getEventName(){return"all_settings"}getAttributes(){const e=super.getAttributes();return e.ComponentName=this.getComponentName(),e.Action=this.getActionName(),e}}t.CallingSettingsEvent=class extends m{constructor(e,t){super(),this._setting=e,this._enabled=t}getActionName(){return"Set"}getComponentName(){return c.ComponentName.Calling}getAttributes(){return n.assign(super.getAttributes(),{Setting:this._setting,IsEnabled:this._enabled})}};t.NoiseSuppressionSettingsEvent=class extends m{constructor(e,t,i,n){super(),this._isInCall=e,this._oldValue=t,this._newValue=i,this._origin=n}getActionName(){return"NoiseSuppressionChange"}getComponentName(){return c.ComponentName.Calling}getAttributes(){return n.assign(super.getAttributes(),{IsInCall:this._isInCall,OldValue:this._oldValue,NewValue:this._newValue,Origin:this._origin})}};t.EcoModeSettingsEvent=class extends m{constructor(e,t,i,n){super(),this._isInCall=e,this._oldValue=t,this._newValue=i,this._origin=n}getActionName(){return"EcoModeChange"}getComponentName(){return c.ComponentName.Calling}getAttributes(){return n.assign(super.getAttributes(),{IsInCall:this._isInCall,OldValue:this._oldValue,NewValue:this._newValue,Origin:this._origin})}};t.SplitViewTelemetryEvent=class extends m{constructor(e){super(),this._enabled=e}getActionName(){return"Set"}getComponentName(){return c.ComponentName.Views}getAttributes(){return n.assign(super.getAttributes(),{IsEnabled:this._enabled})}};t.GlobalShortcutsSettingTelemetryEvent=class extends m{constructor(e){super(),this._enabled=e}getActionName(){return"Set"}getComponentName(){return c.ComponentName.Hotkeys}getAttributes(){return n.assign(super.getAttributes(),{IsEnabled:this._enabled})}}},50571:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SharePanelTelemetry=void 0;const n=i(46096),o=i(349);class s extends o.TelemetryEventBase{constructor(e,t,i,n){super(),this._entryPoint=e,this._numberOfShares=t,this._usedSearch=i,this._userAddedContext=n}getEventName(){return"messaging_share_panel"}getAttributes(){const e=super.getAttributes();return e.EntryPoint=n.SharePanelEntryOrigin[this._entryPoint],e.SharesCount=this._numberOfShares,e.HasUsedSearch=this._usedSearch,e.HasAddedContext=this._userAddedContext,e}}t.SharePanelTelemetry=s},76812:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShareToSkypeEventActions=void 0;const n=i(349);!function(e){e.completed="shareToSkype_action",e.opened="shareToSkype_open"}(t.ShareToSkypeEventActions||(t.ShareToSkypeEventActions={}));class o extends n.TelemetryEventBase{constructor(e){super(),this._params=e}getEventName(){return"messaging_share_to_skype"}getAttributes(){let e=super.getAttributes();e.Action=this._params.action,e.ConversationsCount=this._params.conversationsCount||0,e.MessageAdded=this._params.messageAdded||!1,e.IsSharedToContact=this._params.isSharedToContact||!1,e.ErrorCode=this._params.errorCode||0,e.IsSendingVideo=!1,e.IsSendingImage=!1,e.TotalCount=0;const t=this._params.event;let i=t.type;if("media"===i&&void 0!==t.data){i=1===t.data.length?t.data[0].type:"multiple",e.TotalCount=t.data.length;for(let i of t.data)"video"===i.type&&(e.IsSendingVideo=!0),"image"===i.type&&(e.IsSendingImage=!0)}return e.Type=i,e}}t.default=o},88208:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConvergedMsaEventBase=t.MigratedT1Credentials=t.MigratedT1CredentialsStep=t.MigratedT1CredentialsType=t.WAMTokenRetrievalFailure=t.WAMTokenRetrieved=t.WAMTokenRequested=t.WAMLoginCompleted=t.WAMLoginFailure=t.WAMCacheInvalidated=t.WAMSignInSource=t.AutoSignInCompleted=t.AutoSignInTelemetryServiceInitializationFailed=t.AutoSignInUserNameRetrievalFromStorageFailed=t.AutoSignInNoUserNameInStorage=t.AutoSignInSkypeTokenFetchFailed=t.AutoSignInPushRegistrationFailed=t.AutoSignInCallingStoreInitializationFailed=t.AutoSignInDatabaseInitializationFailed=t.AutoSignInDisabledByECS=t.AutoSignInServerConfigFetchFailed=t.AutoSignInCancelled=t.AutoSignInStarted=t.AutoSignExtraSignInStarted=t.LoginMethod=t.BackgroundTriggers=t.AppEntryStartEvent=t.AppEntryStartMethod=t.RefreshTokenError=t.RefreshTokenErrorCode=t.SsoTokenSignedIn=t.SsoTokenInterrupted=t.SsoTokenAutoRefreshed=t.SsoTokenSignIn=t.MSAInterruptHandlerSignedIn=t.MSAInterruptHandlerSwitched=t.MSAInterruptHandlerStarted=t.MsaSignInFunnelEvent=t.MsaSignUpFunnelEvent=t.AppEntryEvent=t.CreateAccountFlowCanceled=t.CreateAccountFlowStarted=t.LoginFlowStarted=t.NeedHelpLinkOpened=t.NeedHelpClicked=t.LetsGoButtonClicked=t.GetStartedPanelLoaded=t.WelcomeScreenLoaded=t.CreateMeetNowAsGuestEventBase=t.AppEntryMethod=void 0,t.MsaProfileFetch=t.AuthBackgroundRefreshHasValidTokenEvent=t.AuthBackgroundRefreshUpdateTriggeredEvent=t.AuthBackgroundRefreshScheduledEvent=t.MsaConvergenceUnexpectedRetrySuccess=t.MsaConvergenceBackgroundInterruptAvoided=t.MsaConvergenceNotificationInterruptAvoided=t.MsaConvergenceCallInterruptAvoided=void 0;const n=i(36076),o=i(96486),s=i(85343),a=i(89391),r=i(13403),l=i(52914),c=i(349);var d,u,g,h,p,m,S;!function(e){e[e.Guest=0]="Guest",e[e.SignIn=1]="SignIn",e[e.SignUp=2]="SignUp",e[e.SsoSignIn=3]="SsoSignIn",e[e.QsoSignIn=4]="QsoSignIn",e[e.Interrupt=5]="Interrupt",e[e.WAM=6]="WAM",e[e.MigratedCredentials=7]="MigratedCredentials",e[e.SkypeWebLogin=8]="SkypeWebLogin",e[e.Unknown=9]="Unknown"}(d=t.AppEntryMethod||(t.AppEntryMethod={}));class C extends c.TelemetryEventBase{constructor(e,t,i){super(),this._isFirstTimeSignIn=e,this._isAppAutoStartEnabled=t,this._isAppLaunchMinimizedEnabled=i}shouldSendUaid(){return!1}getAttributes(){let e=super.getAttributes();return e.SISUExpID=a.default.dangerouslyGetS4LSisuFeatures().sisuExpId,this.shouldSendUaid()&&(e.UAID=r.default.sisuUaid),void 0!==this._isFirstTimeSignIn&&(e.IsFirstTimeSignIn=this._isFirstTimeSignIn),void 0!==this._isAppAutoStartEnabled&&(e.IsAppAutoStartEnabled=this._isAppAutoStartEnabled),void 0!==this._isAppLaunchMinimizedEnabled&&(e.IsAppLaunchMinimizedEnabled=this._isAppLaunchMinimizedEnabled),e}getLoggedOutSendingPolicy(){return c.TelemetryEventLoggedOutPolicy.SendNow}}class f extends C{getEventName(){return"sisu_welcome_screen"}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}t.CreateMeetNowAsGuestEventBase=class extends C{constructor(e,t){super(),this._sisuPageName=e,this._isPresentedAsMainCTAButton=t}getEventName(){return"sisu_guest_meetnow"}getAttributes(){const e=super.getAttributes();return e.SisuPageName=this._sisuPageName,e.IsPresentedAsMainCTAButton=this._isPresentedAsMainCTAButton||"",e}};t.WelcomeScreenLoaded=class extends f{getActionName(){return"WelcomeScreenLoaded"}};t.GetStartedPanelLoaded=class extends f{getActionName(){return"GetStartedPanelLoaded"}};t.LetsGoButtonClicked=class extends f{getActionName(){return"LetsGoButtonClicked"}};t.NeedHelpClicked=class extends f{getActionName(){return"NeedHelpClicked"}};t.NeedHelpLinkOpened=class extends f{getActionName(){return"NeedHelpLinkOpened"}};t.LoginFlowStarted=class extends f{getActionName(){return"LoginFlowStarted"}shouldSendUaid(){return!0}};t.CreateAccountFlowStarted=class extends f{getActionName(){return"CreateAccountFlowStarted"}shouldSendUaid(){return!0}};t.CreateAccountFlowCanceled=class extends f{constructor(e){super(),this._isMsaSignUpWebViewLoaded=e}getActionName(){return"CreateAccountFlowCanceled"}shouldSendUaid(){return!0}getAttributes(){return o.assign(super.getAttributes(),{IsMSASignUpWebViewLoaded:this._isMsaSignUpWebViewLoaded})}};t.AppEntryEvent=class extends C{constructor(e,t,i,n,o){super(t),this._method=e,this._isNeedHelpClicked=i,this._timeToEntry=n,this._hasWAMAccount=o}getEventName(){return"sisu_app_entry"}getAttributes(){const e=o.assign(super.getAttributes(),{Method:d[this._method],WasNeedHelpClicked:this._isNeedHelpClicked||!1});return void 0!==this._hasWAMAccount&&(e.WasOfferedWithWAM=!!this._hasWAMAccount),this._timeToEntry&&(e.TimeToEntry=this._timeToEntry),e}getLoggedOutSendingPolicy(){return c.TelemetryEventLoggedOutPolicy.WaitForUserId}};t.MsaSignUpFunnelEvent=class extends C{constructor(e,t,i,n,o){super(n),this._funnelPageName=e,this._timeToArrive=t,this._errorCode=i,this._isNeedHelpClicked=o,this._timeToArrive>36e5&&(this._timeToArrive=-1)}getEventName(){return"sisu_msa_signup_funnel"}shouldSendUaid(){return!0}getAttributes(){return o.assign(super.getAttributes(),{FunnelPageName:this._funnelPageName,ErrorCode:this._errorCode?this._errorCode:"None",TimeToStepDuration:this._timeToArrive,WasNeedHelpClicked:this._isNeedHelpClicked||!1})}};t.MsaSignInFunnelEvent=class extends C{constructor(e,t,i,n,o){super(n),this._funnelPageName=e,this._timeToArrive=t,this._errorCode=i,this._isNeedHelpClicked=o,this._timeToArrive>36e5&&(this._timeToArrive=-1)}getEventName(){return"sisu_msa_signin_funnel"}shouldSendUaid(){return!0}getAttributes(){return o.assign(super.getAttributes(),{FunnelPageName:this._funnelPageName,ErrorCode:this._errorCode?this._errorCode:"None",TimeToStepDuration:this._timeToArrive,WasNeedHelpClicked:this._isNeedHelpClicked||!1})}};class y extends C{getEventName(){return"sisu_msa_interrupt_handler"}shouldSendUaid(){return!0}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}t.MSAInterruptHandlerStarted=class extends y{getActionName(){return"RefreshTokenStored"}};t.MSAInterruptHandlerSwitched=class extends y{getActionName(){return"UserSwitchedAccounts"}};t.MSAInterruptHandlerSignedIn=class extends y{getActionName(){return"UserSignedIn"}};class _ extends C{getEventName(){return"sisu_sso_screen"}shouldSendUaid(){return!0}getAttributes(){let e=super.getAttributes();return e.Action=this.getActionName(),e}}class v extends _{constructor(e){super(),this._tokenProviderPackageId=e}getAttributes(){return o.assign(super.getAttributes(),{ProviderPackageId:this._tokenProviderPackageId?this._tokenProviderPackageId:""})}}t.SsoTokenSignIn=class extends v{getActionName(){return"SsoTokenSignIn"}};t.SsoTokenAutoRefreshed=class extends v{getActionName(){return"SsoTokenAutoRefreshed"}};t.SsoTokenInterrupted=class extends v{getActionName(){return"SsoTokenInterrupted"}};t.SsoTokenSignedIn=class extends v{getActionName(){return"SsoTokenSignedIn"}},function(e){e[e.OAuthError=0]="OAuthError",e[e.WebViewError=1]="WebViewError",e[e.NavigationDeadEnd=2]="NavigationDeadEnd",e[e.AutoRefreshError=3]="AutoRefreshError",e[e.InterruptError=4]="InterruptError",e[e.UserSwitched=5]="UserSwitched"}(u=t.RefreshTokenErrorCode||(t.RefreshTokenErrorCode={}));t.RefreshTokenError=class extends C{constructor(e,t,i,n){super(),this._errorCode=e,this._tokenSource=t,this._errorName=i,this._errorMessage=n}getEventName(){return"sisu_refreshtoken_error"}shouldSendUaid(){return!0}getAttributes(){let e=super.getAttributes();return e.ErrorCode=u[this._errorCode],this._tokenSource&&(e.TokenSource=l.MsaTokenSource[this._tokenSource]),this._errorName&&(e.ErrorName=this._errorName),this._errorMessage&&(e.ErrorMessage=this._errorMessage),e}},function(e){e[e.Manual=0]="Manual",e[e.SsoSignIn=1]="SsoSignIn",e[e.QsoSignIn=2]="QsoSignIn",e[e.Interrupt=3]="Interrupt",e[e.WAM=4]="WAM",e[e.MigratedCredentials=5]="MigratedCredentials",e[e.Unknown=6]="Unknown",e[e.Guest=7]="Guest"}(g=t.AppEntryStartMethod||(t.AppEntryStartMethod={}));t.AppEntryStartEvent=class extends C{constructor(e,t){super(t),this._method=e}getEventName(){return"sisu_app_entry_start"}getAttributes(){let e=super.getAttributes();e.Method=g[this._method],e.NoPaVersion=r.default.getNoPaVersion();const t=r.default.getCoBaSi();return o.isUndefined(t)||(e.CoBaSiVersion=t),e}},function(e){e[e.SessionConnected=0]="SessionConnected",e[e.DefaultMsaAttached=1]="DefaultMsaAttached",e[e.AppUpdate=2]="AppUpdate",e[e.MaintenanceWindowStart=3]="MaintenanceWindowStart"}(h=t.BackgroundTriggers||(t.BackgroundTriggers={}));class b extends c.TelemetryEventBase{constructor(e,t){super(),this._isFirstTimeSignIn=e,this._backgroundTrigger=t}getEventName(){return"sisu_auto_signin"}getAttributes(){let e=super.getAttributes();return void 0!==this._isFirstTimeSignIn&&(e.IsFirstTimeSignIn=this._isFirstTimeSignIn),e.Action=this.getActionName(),void 0!==this._backgroundTrigger&&(e.BackgroundTrigger=h[this._backgroundTrigger]),e}getLoggedOutSendingPolicy(){return c.TelemetryEventLoggedOutPolicy.SendNow}}!function(e){e[e.MSA=0]="MSA",e[e.WAM=1]="WAM",e[e.AAD=2]="AAD"}(p=t.LoginMethod||(t.LoginMethod={}));t.AutoSignExtraSignInStarted=class extends b{constructor(e,t){super(t),this._loginMethod=e}getActionName(){return"ExtraSignInStarted"}getAttributes(){let e=super.getAttributes();return e.LoginMethod=p[this._loginMethod],e}};t.AutoSignInStarted=class extends b{getActionName(){return"AutoSignInStarted"}};t.AutoSignInCancelled=class extends b{getActionName(){return"AutoSignInCancelled"}};t.AutoSignInServerConfigFetchFailed=class extends b{getActionName(){return"AutoSignInServerConfigFetchFailed"}};t.AutoSignInDisabledByECS=class extends b{getActionName(){return"AutoSignInDisabledByECS"}};t.AutoSignInDatabaseInitializationFailed=class extends b{getActionName(){return"AutoSignInDatabaseInitializationFailed"}};t.AutoSignInCallingStoreInitializationFailed=class extends b{getActionName(){return"AutoSignInCallingStoreInitializationFailed"}};t.AutoSignInPushRegistrationFailed=class extends b{getActionName(){return"AutoSignInPushRegistrationFailed"}};t.AutoSignInSkypeTokenFetchFailed=class extends b{getActionName(){return"AutoSignInSkypeTokenFetchFailed"}};t.AutoSignInNoUserNameInStorage=class extends b{getActionName(){return"AutoSignInNoUserNameInStorage"}};t.AutoSignInUserNameRetrievalFromStorageFailed=class extends b{getActionName(){return"AutoSignInUserNameRetrievalFromStorageFailed"}};t.AutoSignInTelemetryServiceInitializationFailed=class extends b{getActionName(){return"AutoSignInTelemetryServiceInitializationFailed"}};t.AutoSignInCompleted=class extends b{getActionName(){return"AutoSignInCompleted"}},function(e){e[e.AccountPicker=0]="AccountPicker",e[e.MeetNow=1]="MeetNow"}(m=t.WAMSignInSource||(t.WAMSignInSource={}));t.WAMCacheInvalidated=class extends b{getActionName(){return"WAMCacheInvalidated"}};t.WAMLoginFailure=class extends b{constructor(e){super(e)}getActionName(){return"WAMLoginFailure"}};t.WAMLoginCompleted=class extends b{constructor(e){super(e)}getActionName(){return"WAMLoginCompleted"}};class T extends b{constructor(e,t=!1,i,n){super(e),this._isRefreshRequest=t,this._correlationId=i,this._signInSource=n}getAttributes(){let e=super.getAttributes();return e.IsRefreshRequest=this._isRefreshRequest,void 0===this._signInSource||this._isRefreshRequest||(e.SignInSource=m[this._signInSource]),this._correlationId&&(e.WamCorrelationId=this._correlationId),e}}t.WAMTokenRequested=class extends T{constructor(e,t=!1,i,n){super(e,t,i,n)}getActionName(){return"WAMTokenRequested"}};t.WAMTokenRetrieved=class extends T{constructor(e,t=!1,i,n){super(e,t,i,n)}getActionName(){return"WAMTokenRetrieved"}};t.WAMTokenRetrievalFailure=class extends T{constructor(e,t,i,n,o=!1,s,a){super(e,o,s,a),this._errorCode=t,this._errorMessage=i,this._hResult=n}getActionName(){return"WAMTokenRetrievalFailure"}getAttributes(){let e=super.getAttributes();return void 0!==this._errorCode&&(e.ErrorCode=this._errorCode),this._errorMessage&&(e.ErrorMessage=this._errorMessage),this._hResult&&(e.HResult=s.TokenRequestHRESULT[this._hResult]),e}},function(e){e[e.MSA=0]="MSA",e[e.Skype=1]="Skype",e[e.UWP_MSA=2]="UWP_MSA",e[e.M3_MSA=3]="M3_MSA",e[e.IPAD_MSA=4]="IPAD_MSA"}(t.MigratedT1CredentialsType||(t.MigratedT1CredentialsType={})),function(e){e[e.Fetched=0]="Fetched",e[e.Migrated=1]="Migrated",e[e.Failed=2]="Failed",e[e.ForcedFetched=3]="ForcedFetched",e[e.ForcedFailed=4]="ForcedFailed"}(S=t.MigratedT1CredentialsStep||(t.MigratedT1CredentialsStep={}));class P extends c.TelemetryEventBase{constructor(e,t,i,n,o,s){super(),this._type=e,this._step=t,this._wlidErrorCode=i,this._t1Username=n,this._errStatusCode=o,this._errShortName=s}getEventName(){return"sisu_migrated_t1_credentials"}getAttributes(){const e=o.assign({},super.getAttributes(),{Type:this._type,Step:this._step});return this._wlidErrorCode&&(e.WLIDErrorCode=this._wlidErrorCode),this._errStatusCode&&(e.WebErrorStatusCode=this._errStatusCode),this._errShortName&&(e.WebErrorShortName=this._errShortName),e}getPiiAttributes(){const e=super.getPiiAttributes();return e.UsernameHash={value:this._t1Username||"",piiKind:n.AWTPiiKind.Identity},e}getLoggedOutSendingPolicy(){return this._step===S[S.Migrated]?c.TelemetryEventLoggedOutPolicy.WaitForUserId:c.TelemetryEventLoggedOutPolicy.SendNow}}t.MigratedT1Credentials=P;class A extends c.TelemetryEventBase{getEventName(){return"sisu_converged_msa"}getAttributes(){return o.assign(super.getAttributes(),{Action:this.getActionName()})}}t.ConvergedMsaEventBase=A;t.MsaConvergenceCallInterruptAvoided=class extends A{getActionName(){return"CallInterruptAvoided"}};t.MsaConvergenceNotificationInterruptAvoided=class extends A{getActionName(){return"NotificationInterruptAvoided"}};t.MsaConvergenceBackgroundInterruptAvoided=class extends A{getActionName(){return"BackgroundInterruptAvoided"}};t.MsaConvergenceUnexpectedRetrySuccess=class extends A{getActionName(){return"UnexpectedRetrySuccess"}};class k extends c.TelemetryEventBase{constructor(e){super(),this._lastRefreshTime=e}getEventName(){return"sisu_auth_background_refresh"}getAttributes(){const e=o.assign(super.getAttributes(),{Action:this.getActionName()});return this._lastRefreshTime&&(e.LastRefreshTime=this._lastRefreshTime),e}}t.AuthBackgroundRefreshScheduledEvent=class extends k{getActionName(){return"RefreshScheduled"}};t.AuthBackgroundRefreshUpdateTriggeredEvent=class extends k{getActionName(){return"UpdateTriggered"}};t.AuthBackgroundRefreshHasValidTokenEvent=class extends k{getActionName(){return"HasValidToken"}};class I extends c.TelemetryEventBase{constructor(e){super(),this._msaProfileFetchParams=e}getEventName(){return"sisu_msa_profile_fetch"}getAttributes(){const e=super.getAttributes();return o.isUndefined(this._msaProfileFetchParams.errorStatus)||(e.ErrorStatus=this._msaProfileFetchParams.errorStatus),o.isUndefined(this._msaProfileFetchParams.ageGroup)||(e.AgeGroup=this._msaProfileFetchParams.ageGroup),e}}t.MsaProfileFetch=I},32288:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SkypeNumberPurchaseFlowTelemetryButtons=t.SkypeNumberTelemetryActions=t.SkypeNumberTelemetryOrigin=void 0,function(e){e[e.ProfileGetClicked=0]="ProfileGetClicked",e[e.MeControlGetClicked=1]="MeControlGetClicked",e[e.ListGetClicked=2]="ListGetClicked",e[e.InfoClicked=3]="InfoClicked",e[e.ProfileSectionViewed=4]="ProfileSectionViewed",e[e.ProfileSectionClicked=5]="ProfileSectionClicked",e[e.MeControlSectionViewed=6]="MeControlSectionViewed",e[e.MeControlSectionClicked=7]="MeControlSectionClicked",e[e.PurchaseButtonClicked=8]="PurchaseButtonClicked",e[e.RefreshedSkypeNumberTenTimes=9]="RefreshedSkypeNumberTenTimes",e[e.ReservationSuceeded=10]="ReservationSuceeded",e[e.ReservationFailed=11]="ReservationFailed",e[e.FetchedAfterBuy=12]="FetchedAfterBuy",e[e.WasProvisioned=13]="WasProvisioned",e[e.PurchaseEntryButtonShown=14]="PurchaseEntryButtonShown",e[e.LearnMoreButtonShown=15]="LearnMoreButtonShown",e[e.WebGetButtonShown=16]="WebGetButtonShown",e[e.CopyClicked=17]="CopyClicked",e[e.ShareClicked=18]="ShareClicked",e[e.DesktopShareClicked=19]="DesktopShareClicked",e[e.ShareError=20]="ShareError",e[e.ShareSuccess=21]="ShareSuccess",e[e.EmailClicked=22]="EmailClicked",e[e.SettingsClicked=23]="SettingsClicked",e[e.ActionClicked=24]="ActionClicked",e[e.DialogOpened=25]="DialogOpened",e[e.ActionDialogClicked=26]="ActionDialogClicked",e[e.CallerIdEnabled=27]="CallerIdEnabled",e[e.CallerIdChanged=28]="CallerIdChanged",e[e.CallerIdDisabled=29]="CallerIdDisabled"}(t.SkypeNumberTelemetryOrigin||(t.SkypeNumberTelemetryOrigin={})),function(e){e.ShowPurchaseFlow="ShowPurchaseFlow",e.ShowListNumbers="ShowListNumbers",e.NativeExperience="NativeExperience"}(t.SkypeNumberTelemetryActions||(t.SkypeNumberTelemetryActions={})),function(e){e.Continue="Continue",e.RefreshNumber="RefreshNumber",e.Information="Information"}(t.SkypeNumberPurchaseFlowTelemetryButtons||(t.SkypeNumberPurchaseFlowTelemetryButtons={}))},26587:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextHighlightClickedEvent=t.FeedbackClickedEvent=t.SuggestionsClickedEvent=t.SuggestionsDisplayedEvent=void 0;const n=i(36076),o=i(96486),s=i(60021),a=i(71830),r=i(349),l=i(35370);class c extends r.TelemetryEventBase{constructor(e,t,i,n){super(),this._source=e,this._sourceName=t,this._inContext=i,this._message=n}getEventName(){return"caap_suggestions"}getCommonSuggestionsEventAttributes(e){let t=Object.assign({},e);return this._message&&(t.LatestServerMessageId=this._message.getLatestServerMessageId()),this._source&&a.isAgent(this._source)&&(t.Source=this._source,this._sourceName&&(t.SourceName=this._sourceName)),t}getAttributes(){const e=this.getCommonSuggestionsEventAttributes(super.getAttributes());return e.Action=this.getActionName(),e.IsInContext=!!this._inContext,this._message&&(e.MessageCorrelationId=s.getCorrelationIdFromMessageParts(this._message.creator,this._message.conversationId,l.getClientMessageId(this._message))),e}getPiiAttributes(){return this.getCommonPiiAttributes(super.getPiiAttributes())}getCommonPiiAttributes(e){let t=Object.assign({},e);return this._source&&!a.isAgent(this._source)&&(t.Source={value:this._source,piiKind:n.AWTPiiKind.Identity},this._sourceName&&(t.SourceName={value:this._sourceName,piiKind:n.AWTPiiKind.Identity})),t}}t.SuggestionsDisplayedEvent=class extends c{constructor(e,t,i,n,o,s,a,r,l){super(e,t,i,n),this._providerIds=o,this._suggestionsTypes=s,this._suggestionsCategories=a,this._integrationsCorrelationIds=r,this._suggestionsIds=l}getActionName(){return"SuggestionsDisplayed"}getAttributes(){const e=super.getAttributes();return e.Providers=o.join(this._providerIds),e.SuggestionsTypes=o.join(this._suggestionsTypes),e.SuggestionsCategories=o.join(this._suggestionsCategories),e.IntegrationsCorrelationIds=o.join(this._integrationsCorrelationIds),e.SuggestionsIds=o.join(this._suggestionsIds),e}};t.SuggestionsClickedEvent=class extends c{constructor(e,t,i,n,o,s,a,r,l,c){super(e,t,i,n),this._providerId=o,this._suggestionType=s,this._suggestionCategory=a,this._integrationCorrelationId=r,this._suggestionPosition=l,this._imBackPosition=c}getActionName(){return"SuggestionsClicked"}getCommonSuggestionsClickedAttributes(e){let t=Object.assign({},e);return t.SuggestionPosition=this._suggestionPosition,this._providerId&&(t.Provider=this._providerId),this._suggestionType&&(t.SuggestionType=this._suggestionType),this._suggestionCategory&&(t.SuggestionCategory=this._suggestionCategory),this._integrationCorrelationId&&(t.IntegrationCorrelationId=this._integrationCorrelationId),o.isUndefined(this._imBackPosition)||(t.ImBackPosition=this._imBackPosition),t}getAttributes(){return this.getCommonSuggestionsClickedAttributes(super.getAttributes())}};t.FeedbackClickedEvent=class extends c{constructor(e,t,i,n,o,s,a){super(e,t,i,n),this._providerIds=o,this._suggestionsTypes=s,this._suggestionsCategories=a}getActionName(){return"FeedbackClicked"}getAttributes(){const e=super.getAttributes();return e.Providers=o.join(this._providerIds),e.SuggestionsTypes=o.join(this._suggestionsTypes),e.SuggestionsCategories=o.join(this._suggestionsCategories),e}};t.TextHighlightClickedEvent=class extends c{constructor(e,t,i,n){super(void 0,void 0,!1,e),this._providerId=t,this._suggestionType=i,this._suggestionCategory=n}getActionName(){return"TextHighlightClicked"}getCommonTextHighlightClickedAttributes(e){let t=Object.assign({},e);return this._providerId&&(t.Provider=this._providerId),this._suggestionType&&(t.SuggestionType=this._suggestionType),this._suggestionCategory&&(t.SuggestionCategory=this._suggestionCategory),t}getAttributes(){return this.getCommonTextHighlightClickedAttributes(super.getAttributes())}}},88398:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(94050),o="Fetched",s=[o,"BundleProcessed"];class a extends n.default{constructor(){super(...arguments),this._syncScenarioFetchCount=0}_markStep(e,...t){const i=s.some((t=>t===e));e===o&&this._syncScenarioFetchCount++,super._markStep(i?`${e} - ${this._syncScenarioFetchCount}`:e,...t)}}t.default=a},60213:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SystemTrayEvent=void 0;const n=i(349);class o extends n.TelemetryEventBase{constructor(e){super(),this._action=e}getEventName(){return"systray_icon"}getAttributes(){let e=super.getAttributes();return e.Action=this._action,e}}t.SystemTrayEvent=o},27795:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LogUploadEvent=t.DevAlert=t.DevDebug=t.UnsafeDomain=t.InviteUser=t.StartupComplete=void 0;const n=i(96486),o=i(349);class s extends o.TelemetryEventBase{constructor(e){super(),this._startupTime=e}getEventName(){return"startupComplete"}getAttributes(){const e=super.getAttributes();return e.StartupTime=this._startupTime,e}}t.StartupComplete=s;class a extends o.TelemetryEventBase{constructor(e,t=!0,i=!1){super(),this._userCount=e,this._success=t,this._cancelled=i}getEventName(){return"inviteUser"}getAttributes(){const e=super.getAttributes();return e.Cancelled=this._cancelled,e.Status=this._success?"Success":"Failure",e.Count=this._userCount,e}}t.InviteUser=a;class r extends o.TelemetryEventBase{constructor(e,t){super(),this._domain=e,this._origin=t}getEventName(){return"unsafe_domain"}getAttributes(){return n.assign(super.getAttributes(),{Origin:this._origin,Domain:this._domain})}}t.UnsafeDomain=r;class l extends o.TelemetryEventBase{constructor(e,t){super(),this._trackingName=e,this._data=t}getEventName(){return"dev_debug"}getAttributes(){const e=super.getAttributes();return e.Name=this._trackingName,e.Data=this._data,e}shouldSend(){return!1}}t.DevDebug=l;class c extends o.TelemetryEventBase{constructor(e){super(),this._trackingName=e}getEventName(){return"dev_alert"}getAttributes(){const e=super.getAttributes();return e.Name=this._trackingName,e}}t.DevAlert=c;class d extends o.TelemetryEventBase{constructor(e,t){super(),this._tenant=e,this._data=t}getEventName(){return"rt_log"}getAriaTenantTokenOverride(){return this._tenant}getAttributes(){return n.assign(super.getAttributes(),this._data)}}t.LogUploadEvent=d},35370:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageTypeGroup=t.getConversationTypeForTelemetry=t.getTrackableConversationId=t.getCommonAttributesMessageSent=t.shouldTrackMessage=t.getMessageTypeName=t.getMessageRawTypeName=t.getClientMessageId=void 0;const n=i(51077),o=i(71830),s=i(39549),a=i(31147),r=i(86374),l=i(12762),c=i(18078),d=i(78262),u="voicemail.wav";function g(e,t,i){let o=e.messagetype;const s=n.getMessageTypeGroup(e);if(s===n.MessageTypeGroups.Audio){if(o="Audio",!n.isDeletedMessage(e)){const n=p(e,t,i);n.type===d.UploadFileType.AudioMessage&&(o="AudioMessage",n.decoded.getNameForUI().toLowerCase()===u&&(o="VoiceMail"))}}else if(s===n.MessageTypeGroups.Video){if(!n.isDeletedMessage(e)){p(e,t,i).type===d.UploadFileType.VideoMessage&&(o="VideoMessage")}}else o===n.MessageTypes.UriObject?o=n.MessageTypeGroups[n.getRenderingKindForUriObject(e)]:o===n.MessageTypes.Mms&&(o=n.MessageTypeGroups[n.getMessageTypeGroup(e)]);return o}function h(e,t,i){let o="";const s=n.getMessageTypeGroup(e);switch(s){case n.MessageTypeGroups.Text:o="Text";break;case n.MessageTypeGroups.SMS:o="SMS";break;case n.MessageTypeGroups.Audio:if(o="Audio",!n.isDeletedMessage(e)){const n=p(e,t,i);n.type===d.UploadFileType.AudioMessage&&(o="AudioMessage",n.decoded.getNameForUI().toLowerCase()===u&&(o="VoiceMail"))}break;case n.MessageTypeGroups.Picture:o="Photo";break;case n.MessageTypeGroups.UriFile:o="File";break;case n.MessageTypeGroups.Video:if(o="Video",!n.isDeletedMessage(e)){p(e,t,i).type===d.UploadFileType.VideoMessage&&(o="VideoMessage")}break;case n.MessageTypeGroups.Moji:o="Moji";break;case n.MessageTypeGroups.Sticker:o="Sticker";break;case n.MessageTypeGroups.ScheduledCallInvite:o="ScheduledCallInvite";break;case n.MessageTypeGroups.Calling:o=n.MessageTypeGroups[s];break;case n.MessageTypeGroups.SwiftCard:o="Swift Message";break;case n.MessageTypeGroups.Location:o="Location";break;case n.MessageTypeGroups.Poll:o="Poll";break;case n.MessageTypeGroups.Engagement:o="Engagement";break;case n.MessageTypeGroups.MediaAlbum:o="MediaAlbum";break;case n.MessageTypeGroups.Translation:o="Translation";break;default:console.warn("Unhandled message type for MessageSentEvent:"+e.messagetype+", making a guess"),o=n.MessageTypeGroups[s]}return o}function p(e,t,i){const n=r.decode(e,t,i).getFirstUriObjectChild(l.UriObjectFileNode);return n?{type:n.getFileType(),decoded:n}:{type:void 0}}t.getClientMessageId=function(e){return e.getLatestRelevantClientMessageId()},t.getMessageRawTypeName=g,t.getMessageTypeName=h,t.shouldTrackMessage=function(e,t){return!(!t||!t.percentage)&&Number(e)/0x10000000000000000<t.percentage/100},t.getCommonAttributesMessageSent=function(e,t,i,n,s,a){return e.Group_Conversation=o.isGroupConversation(t),e.IsEncryptedConversation=o.isEncryptedThread(t),e.Send_Timestamp=i,e.Message_Type=h(n,c.default.getSkypeMri(),t),e.Message_RawType=g(n,c.default.getSkypeMri(),t),e.Conversation_Members_Number=s,e.Entry_Point="Chat View",e.Character_Count=a,e.Bot_Conversation=o.isOneOnOneConversation(t)&&o.isAgent(t),e},t.getTrackableConversationId=function(e){if(!e)return;const t=(0,s.default)().getConversation(e);return null==t?void 0:t.getTrackableConversationId()},t.getConversationTypeForTelemetry=function(e){return o.isEncryptedThread(e)?a.ConversationType.Encrypted:o.isConversationWithPhoneNumber(e)?a.ConversationType.PSTN:o.isAgent(e)?a.ConversationType.Bot:o.isOneOnOneConversation(e)?a.ConversationType.OneOnOneSkype:o.isGroupConversation(e)?a.ConversationType.Group:a.ConversationType.Other},t.getMessageTypeGroup=function(e){return n.getMessageTypeGroup(e)}},59910:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(36076),o=i(96486),s=i(74634),a=i(349),r=i(12770);t.default=new class{constructor(){this._data={},this._sortedData=[],this._running=!0,this._pendingQueue=[],this.statisticsUpdated=new s.default,this._running=!1}getSortedEventsStatistics(){return this._sortedData}_scheduleDelayedUpdateIfNeeded(){this._updateTimerId||0===this._pendingQueue.length||(this._updateTimerId=r.default.setTimeout((()=>{this._updateTimerId=void 0,this._handleEvents(this._pendingQueue),this._pendingQueue=[]}),2e3))}_handleEvents(e){const t=n.AWTSerializer.getPayloadBlob({token:[]},1);o.each(e,(e=>{const i=this._convertEventWithMetadataToInternal(e),o=this._normalizedEventName(i);let s=this._data[o];s||(s={numberOfBytes:0,numberOfEvents:0,sampling:""},this._data[o]=s);const a=n.AWTSerializer.getPayloadBlob({token:[i]},1);s.numberOfEvents++,s.numberOfBytes+=a.payloadBlob.length-t.payloadBlob.length,s.sampling=this._samplingValue(i)})),this._sortedData=[],o.each(this._data,((e,t)=>{this._sortedData.push([t,e])})),this._sortedData.sort(((e,t)=>t[1].numberOfBytes-e[1].numberOfBytes)),this.statisticsUpdated.fire()}_convertEventWithMetadataToInternal(e){return Object.assign(Object.assign({},e),{serializedEvent:[0]})}_samplingValue(e){let t=a.SampledEvents[e.name],i=100;if("scenario"===e.name)i=a.SampledEvents["scenario_"+this._value(e,"ScenarioName")];else if("perf"===e.name)i=a.SampledPerfEvents[this._value(e,"Scenario")];else if(0===e.name.indexOf("kpi_")){const i=a.TelemetryConfig[e.name];if(i){const e="enabled"in i&&i.enabled,n="percentage"in i?i.percentage:void 0;t=o.isNumber(n)?n:e?100:0}else t=0}o.isNumber(t)||(t=100),o.isNumber(i)||(i=100);return Math.floor(t*i/100)+"%"}_normalizedEventName(e){return"scenario"===e.name?"Scenario  "+this._value(e,"ScenarioName"):"perf"===e.name?"Perf  "+this._value(e,"Scenario"):e.name}_value(e,t){const i=e.properties[t],n=i.value||i;return o.isString(n)?n:n.toString()}handleEvents(e){this._running&&(this._pendingQueue.push(...e),this._scheduleDelayedUpdateIfNeeded())}}},68101:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(349);class s extends o.TelemetryEventBase{constructor(e,t,i,n,o){super(o),this._scenarioName=e,this._scenarioId=t,this._actionAttributes=i,this._shouldSendScenarioTelemetry=n}shouldSend(){return this._shouldSendScenarioTelemetry()}getEventName(){return"scenario"}getAttributes(){const e=super.getAttributes();return e.ScenarioName=this._scenarioName,e.ScenarioId=this._scenarioId,n.each(this._actionAttributes,((t,i)=>{e["ScenarioAction_"+i]=t})),e}}t.default=s},94050:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioName=void 0;const n=i(96486),o=i(36237),s=i(92210),a=i(15963);Object.defineProperty(t,"ScenarioName",{enumerable:!0,get:function(){return a.ScenarioName}});const r=i(349),l=i(68101),c=i(53374),d=[a.ScenarioName[a.ScenarioName.Search],a.ScenarioName[a.ScenarioName.CreateMeetNow],a.ScenarioName[a.ScenarioName.JoinMeetNow]];class u extends s.default{constructor(e,t,i={},n,o=!1){super(e,t,i,n),this._shouldSendIntermediateStepsOnFinal=o}_shouldSendSampledTelemetry(){if(void 0!==this._shouldSendScenarioTelemetry)return this._shouldSendScenarioTelemetry;if(n.includes(d,this._scenarioName))return this._shouldSendScenarioTelemetry=!0,this._shouldSendScenarioTelemetry;if(n.isEmpty(r.SampledEvents))return!0;const e="scenario_"+this._scenarioName,t=r.SampledEvents[e];return n.isNumber(t)?(this._shouldSendScenarioTelemetry=c.default.sampleForPercentage(t),this._shouldSendScenarioTelemetry):(this._shouldSendScenarioTelemetry=!0,this._shouldSendScenarioTelemetry)}extendProperties(e){n.assign(this._properties,e)}_markStep(e,t,i,s,a,r,c){super._markStep(e,t,i,s,a,r,c);const d=["started","finished","failed"];if(this._shouldSendSampledTelemetry()&&!s){n.some(d,(t=>e===t))||(e=this._scenarioName+"_"+e);const t={step_duration:n.last(this._markedSteps).stepDuration,step_name:e};if(n.assign(t,this._properties),r){this._shouldSendIntermediateStepsOnFinal&&n.each(this._markedSteps,(e=>{t[e.name+"_step_duration"]=e.stepDuration,t[e.name+"_total_duration"]=e.totalDuration}));const e=n.find(this._markedSteps,(e=>e.isTarget));e&&(t.target_duration_ms=e.totalDuration),t.total_duration=this._totalDuration,t.is_final=!0}o.track(new l.default(this._scenarioName,this._scenarioId||"",t,(()=>this._shouldSendSampledTelemetry()),this._experimentConfigIds||""))}}}t.default=u},90970:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(9520),o=i(46096),s=i(36237),a=i(53374);t.default=new class{createSession(e,t,i){if(this._session){const t=a.default.newCauseId();s.log(o.LogTraceArea.Calling,"Before creating new session,End old callRosterSession  and  for callId: "+e+" causeId: "+t),this.completeSession()}return this._session=new n.CallRosterSession(e,t,i),this._session}completeSession(){this._session&&(s.track(this._session),this._session=void 0)}cancelSession(){this._session&&(this._session.setIsCanceled(!0),this.completeSession())}getActiveSession(){return this._session}updateCallRosterTelemetry(e,t,i){const n=this.getActiveSession();n?n&&i(n):s.warn(o.LogTraceArea.Calling,"There is no Active callRosterSession for callId: "+e+" causeId: "+t)}}},81072:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TrouterEvent=t.GenericPluginlessStackEvent=t.GenericCallingEvent=void 0;const n=i(96486),o=i(40363),s=i(349);class a extends s.TelemetryEventBase{constructor(e,t){super(),this._eventName=e,this._props=t}getAriaTenantTokenOverride(){return o.default.getAriaCallingTenantToken()}getEventName(){return this._eventName}getAttributes(){return n.assign(super.getAttributes(),this._props)}}t.GenericCallingEvent=a;class r extends s.TelemetryEventBase{constructor(e,t,i){super(),this._tenant=e,this._eventName=t;const n=r._splitTelemetryValues(i);this._piiProps=n.pii,this._nonPiiProps=n.nonPii}getAriaTenantTokenOverride(){return this._tenant}getEventName(){return this._eventName}getAttributes(){return this._nonPiiProps.uiVersion=o.default.getUIVersionWithPartnerID(),n.assign(super.getAttributes(),this._nonPiiProps)}getPiiAttributes(){return n.assign(super.getPiiAttributes(),this._piiProps)}static _splitTelemetryValues(e){const t={},i={};return n.each(e,((e,o)=>{n.isObject(e)&&n.isNumber(e.piiKind)?t[o]=e:i[o]=e})),{pii:t,nonPii:i}}}t.GenericPluginlessStackEvent=r;class l extends s.TelemetryEventBase{constructor(e){super(),this._event=e}getAriaTenantTokenOverride(){return o.default.getAriaPluginlessTrouterTenantToken()}getEventName(){return this._event.name}getAttributes(){return n.assign(super.getAttributes(),this._getProperties())}_getProperties(){const e={};return n.each(this._event.properties,((t,i)=>{const o=t.value;n.isUndefined(o)||(e[i]=o)})),e}}t.TrouterEvent=l},65322:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UrlPreviewImageFailureTelemetry=t.UrlPreviewClickTelemetry=t.UrlPreviewFailed=t.UrlPreviewReceived=t.UrlPreviewActionType=void 0;const n=i(36076),o=i(60021),s=i(71830),a=i(349),r=i(35370),l=i(26712);var c;!function(e){e[e.ResponseReceived=0]="ResponseReceived",e[e.RequestFailure=1]="RequestFailure",e[e.UserClick=2]="UserClick",e[e.ImageFailure=3]="ImageFailure",e[e.LoadThumbnailFailure=4]="LoadThumbnailFailure",e[e.LoadFaviconFailure=5]="LoadFaviconFailure"}(c=t.UrlPreviewActionType||(t.UrlPreviewActionType={}));class d extends a.TelemetryEventBase{constructor(e,t){super(),this._url=e,this._action=t}getEventName(){return"url_preview"}getEventTraceMode(){return a.TelemetryTraceMode.EventName}getAttributes(){let e=super.getAttributes();return e.Action=c[this._action],e}getPiiAttributes(){let e=super.getPiiAttributes();return e.UrlDomain={value:l.default.getDomainName(this._url),piiKind:n.AWTPiiKind.Uri},e}}t.UrlPreviewReceived=class extends d{constructor(e,t,i,n){super(e,c.ResponseReceived),this._preview=t,this._numberRetries=i,this._duration=n}getAttributes(){let e=super.getAttributes();return e.RetriesCount=this._numberRetries,e.StatusCode=this._preview.status_code,e.ContentType=this._preview.content_type||"",e.Category=this._preview.category,e.HasTitle=!!this._preview.title,e.HasDescription=!!this._preview.description,e.Favicon=!!this._preview.favicon,e.FaviconWidth=this._preview.favicon_meta?this._preview.favicon_meta.width:-1,e.FaviconHeight=this._preview.favicon_meta?this._preview.favicon_meta.height:-1,e.Thumbnail=!!this._preview.thumbnail,e.ThumbnailWidth=this._preview.thumbnail_meta?this._preview.thumbnail_meta.width:-1,e.ThumbnailHeight=this._preview.thumbnail_meta?this._preview.thumbnail_meta.height:-1,e.RestrictionsAge=this._preview.restrictions?this._preview.restrictions.age:-1,this._duration&&(e.Duration=this._duration),this._preview.restrictions&&this._preview.restrictions.country&&(e.RestrictionsCountry=this._preview.restrictions.country),e}};t.UrlPreviewFailed=class extends d{constructor(e,t,i){super(e,c.RequestFailure),this._numberRetries=t,this._reason=i}getAttributes(){let e=super.getAttributes();return e.RetriesCount=this._numberRetries,e.FailureReason=this._reason,e}};t.UrlPreviewClickTelemetry=class extends d{constructor(e,t){super(e,c.UserClick),this._message=t}getCorrelationAttributes(){let e=super.getAttributes();const t=r.getClientMessageId(this._message);return e.MessageCorrelationId=o.getCorrelationIdFromMessageParts(this._message.creator,this._message.conversationId,t),e.ClientMessageId=t||"",e}getAttributes(){const e=s.isOneOnOneConversation(this._message.conversationId);let t=super.getAttributes();t.ClickedTimestamp=this._eventCreationTime,t.IsGroupConversation=!e,t.ServerMessageId=this._message.getOriginalServerId()||"",t.urlp_operation="url_click";const i=r.getTrackableConversationId(this._message.conversationId);return i&&(t.ConversationId=i),t}};t.UrlPreviewImageFailureTelemetry=class extends d{constructor(e,t,i){super(e,i),this._error=t}getAttributes(){let e=super.getAttributes();return e.ImageError=this._error,e}}},63066:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserActionsTelemetryEvent=t.Scenarios=t.Actions=void 0;const n=i(96486),o=i(349);var s,a;!function(e){e[e.CallVideo=0]="CallVideo",e[e.CallAudio=1]="CallAudio",e[e.AddContact=2]="AddContact",e[e.InterruptScenario=3]="InterruptScenario",e[e.ViewProfile=4]="ViewProfile",e[e.OnKeyPressToStartMessage=5]="OnKeyPressToStartMessage",e[e.MessageAction=6]="MessageAction",e[e.AddContactFromDiscoverPanel=7]="AddContactFromDiscoverPanel",e[e.SendMessage=8]="SendMessage"}(s=t.Actions||(t.Actions={})),function(e){e[e.SearchToConversation=0]="SearchToConversation",e[e.RecommendationFromRecentsToConversation=1]="RecommendationFromRecentsToConversation",e[e.RecommendationFromContactsToConversation=2]="RecommendationFromContactsToConversation",e[e.Unknown=3]="Unknown"}(a=t.Scenarios||(t.Scenarios={}));class r extends o.TelemetryEventBase{constructor(e){super(),this._userAction=e}getEventName(){return"people_user_actions"}getAttributes(){let e=super.getAttributes();return n.isUndefined(this._userAction.name)||(e.Action=s[this._userAction.name]),n.isUndefined(this._userAction.duration)||(e.Duration=this._userAction.duration),n.isUndefined(this._userAction.scenario)||(e.Scenario=a[this._userAction.scenario]),n.isUndefined(this._userAction.firstSuccessfulSearch)||(e.IsFirstSuccessfulSearch=this._userAction.firstSuccessfulSearch),n.each(this._userAction.additionalAttributes,((t,i)=>{e[i]=t})),e}}t.UserActionsTelemetryEvent=r},54298:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnansweredCallCTA=t.ExperimentButtonClickAction=t.ExperimentBannerCloseAction=t.ExperimentOpenAction=t.NavigateToDestination=void 0;const n=i(81722),o=i(40363),s=i(349);var a;!function(e){e[e.BalanceStatePanel=0]="BalanceStatePanel",e[e.DialerPanel=1]="DialerPanel",e[e.GroupCall=2]="GroupCall"}(a=t.NavigateToDestination||(t.NavigateToDestination={}));class r extends s.TelemetryEventBase{constructor(e,t,i){super(),this._settings=e,this._userEntitlementsSummary=t,this._isFreeTrialAvailable=i}getEventName(){return"s4l_entitlement_experiments"}getAriaTenantTokenOverride(){return o.default.getAriaCommerceTenantToken()}getAttributes(){const e=super.getAttributes();return e.ExperimentName=this._settings.name,e.ExperimentLocation=n.ExperimentLocation[this._settings.location],this._settings.layoutOption&&(e.LayoutOption=this._settings.layoutOption),this._userEntitlementsSummary&&(e.UserEntitlementsSummary=this._userEntitlementsSummary),this._isFreeTrialAvailable&&(e.IsFreeTrialAvailable=this._isFreeTrialAvailable),e.Action=this.getActionName(),e}}t.ExperimentOpenAction=class extends r{getActionName(){return"ExperimentOpen"}};t.ExperimentBannerCloseAction=class extends r{getActionName(){return"BannerClose"}};t.ExperimentButtonClickAction=class extends r{constructor(e,t,i,n){super(t,i,n),this._navigateTo=e}getActionName(){return"ButtonClick"}getAttributes(){const e=super.getAttributes();return e.NavigateTo=a[this._navigateTo],e}};class l extends s.TelemetryEventBase{constructor(e){super(),this._action=e}getEventName(){return"s4l_entitlement_ucux_cta"}getAriaTenantTokenOverride(){return o.default.getAriaCommerceTenantToken()}getAttributes(){const e=super.getAttributes();return e.Action=this._action,e}}t.UnansweredCallCTA=l},25446:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserPresenceIgnoredEvent=t.UserPresenceFailedToSaveToDbEvent=t.UserPresenceChangedEvent=t.UserPresenceChangeOrigin=void 0;const n=i(71830),o=i(349);var s;!function(e){e[e.ElectronMenuBar=0]="ElectronMenuBar",e[e.InitialFetch=1]="InitialFetch",e[e.Avatar=2]="Avatar",e[e.MeControl=3]="MeControl",e[e.ProfileButton=4]="ProfileButton",e[e.PollingUpdate=5]="PollingUpdate",e[e.PushNotification=6]="PushNotification",e[e.TrouterUpdate=7]="TrouterUpdate",e[e.Unknown=8]="Unknown"}(s=t.UserPresenceChangeOrigin||(t.UserPresenceChangeOrigin={}));class a extends o.TelemetryEventBase{constructor(e,t,i,n,o,s,a,r,l){super(),this._origin=e,this._oldPresence=t,this._newPresence=i,this._receivedPresence=n,this._success=o,this._storeOnly=s,this._errorCode=a,this._errorMessage=r,this._retries=l}getEventName(){return"people_presence"}getAttributes(){let e=super.getAttributes();return e.Origin=s[this._origin],e.FromPresence=(0,n.encodeStatus)(this._oldPresence)||"Unknown",e.ToPresence=(0,n.encodeStatus)(this._newPresence)||"Unknown",e.ReceivedPresence=(0,n.encodeStatus)(this._receivedPresence)||"Unknown",e.IsSuccess=this._success,e.IsStoreOnly=this._storeOnly,e.RetriesCount=this._retries||0,void 0!==this._errorCode&&(e.ErrorCode=this._errorCode),void 0!==this._errorMessage&&(e.ErrorMessage=this._errorMessage),e}}t.UserPresenceChangedEvent=a;class r extends o.TelemetryEventBase{constructor(e,t,i){super(),this._origin=e,this._oldPresence=t,this._newPresence=i}getEventName(){return"people_presence_error"}getAttributes(){let e=super.getAttributes();return e.Action=this.getAction(),e.Origin=s[this._origin],e.FromPresence=(0,n.encodeStatus)(this._oldPresence)||"Unknown",e.ToPresence=(0,n.encodeStatus)(this._newPresence)||"Unknown",e}}t.UserPresenceFailedToSaveToDbEvent=class extends r{constructor(e,t,i){super(e,t,i)}getAction(){return"SaveToDB"}};class l extends o.TelemetryEventBase{constructor(e,t,i){super(),this._origin=e,this._currentStatus=t,this._statusToUpdate=i}getEventName(){return"people_presence_ignore"}getAttributes(){let e=super.getAttributes();return e.Origin=s[this._origin],e.CurrentStatus=(0,n.encodeStatus)(this._currentStatus)||"Unknown",e.ToPresence=(0,n.encodeStatus)(this._statusToUpdate)||"Unknown",e}}t.UserPresenceIgnoredEvent=l},37039:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserStatusTelemetry=void 0;const n=i(96486),o=i(2604),s=i(349);class a extends s.TelemetryEventBase{constructor(e,t,i,n,o,s,a,r){super(),this._isAvatarSet=e,this._AvatarPolicy=t,this._setupWizardCompletionTimestamp=i,this._isNewUser=n,this._notificationsPermission=o,this._cameraPermission=s,this._microphonePermission=a,this._contactsPermission=r}getEventName(){return"onboarding_user_status"}getAttributes(){const e=super.getAttributes();return e.AvatarPolicy=n.upperFirst(n.camelCase(this._AvatarPolicy)),e.AvatarState=this._isAvatarSet?"Set":"Unset",e.SetupWizardCompletionTimestamp=this._setupWizardCompletionTimestamp||"NotCompleted",e.UserIsNew=this._isNewUser,e.NotificationsPermission=o.PermissionStatus[this._notificationsPermission],e.CameraPermission=o.PermissionStatus[this._cameraPermission],e.MicrophonePermission=o.PermissionStatus[this._microphonePermission],e.ContactsPermission=o.PermissionStatus[this._contactsPermission],e}}t.UserStatusTelemetry=a},3230:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UploadEvent=t.RecordEvent=void 0;const n=i(96486),o=i(349);class s extends o.TelemetryEventBase{constructor(e,t){super(),this._videoDuration=e,this._videoSize=t,this._success=!1,this._error=""}getEventName(){return"camera_vim"}getAttributes(){return n.assign(super.getAttributes(),{Action:this.getActionName(),IsSuccess:this._success,VideoDuration:this._videoDuration,VideoSize:this._videoSize,TransactionId:this._transactionId||"",Error:this._error})}setStatus(e,t,i=""){this._success=e,this._transactionId=t,this._error=i}}t.RecordEvent=class extends s{getActionName(){return"Record"}};t.UploadEvent=class extends s{getActionName(){return"Upload"}}},50366:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PresenceFailureTelemetryEvents=void 0;const n=i(349);class o extends n.TelemetryEventBase{constructor(e){super(),this._attributes=e}getEventName(){return"people_presence_failure"}getAttributes(){return Object.assign(Object.assign({},super.getAttributes()),{ServiceType:this._attributes.serviceType,Scenario:this._attributes.scenario,StatusCode:this._attributes.statusCode,StatusText:this._attributes.statusText,DidTimeOut:this._attributes.didTimeOut,CorrelationId:this._attributes.correlationId})}}t.PresenceFailureTelemetryEvents=o},51587:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.openAppStore=void 0;i(30914),i(16778);const n=i(89391);t.openAppStore=function(){n.default.getConfigSettings()}},47447:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UICapabilities=t.CallingCapabilities=void 0;const n=i(96486),o=i(15069),s=i(89391),a=i(46096),r=i(36237),l=i(90298),c=i(4057),d=i(40363);var u,g;!function(e){e[e.JSONAnimation=0]="JSONAnimation",e[e.Camera=1]="Camera",e[e.SystemSettingsDeepLink=2]="SystemSettingsDeepLink",e[e.DragAndDrop=3]="DragAndDrop",e[e.DesktopFilePicker=4]="DesktopFilePicker",e[e.AVSettings=5]="AVSettings",e[e.NativeAnimations=6]="NativeAnimations",e[e.SpriteAnimations=7]="SpriteAnimations",e[e.NumberOfLines=8]="NumberOfLines",e[e.ContactsSync=9]="ContactsSync",e[e.InlineTextFormatting=10]="InlineTextFormatting",e[e.CursorTypes=11]="CursorTypes",e[e.RTL=12]="RTL",e[e.CopyTextToClipboard=13]="CopyTextToClipboard",e[e.SystemTheme=14]="SystemTheme",e[e.KeyboardAwareView=15]="KeyboardAwareView",e[e.QuickActions=16]="QuickActions",e[e.AddScheduledCallToCalendar=17]="AddScheduledCallToCalendar",e[e.SystemHotKeys=18]="SystemHotKeys",e[e.RemoteAppearancePreferences=19]="RemoteAppearancePreferences",e[e.EngagementProcessedMessageOnWebTimestamp=20]="EngagementProcessedMessageOnWebTimestamp",e[e.TelemetryConsentOptOut=21]="TelemetryConsentOptOut"}(u||(u={})),function(e){e[e.OneToOne=0]="OneToOne",e[e.Group=1]="Group",e[e.MeetNow=2]="MeetNow",e[e.Encrypted=3]="Encrypted",e[e.AutoAnswer=4]="AutoAnswer",e[e.CallMonitor=5]="CallMonitor",e[e.ScreenSharing=6]="ScreenSharing",e[e.ScreenSharingWithSounds=7]="ScreenSharingWithSounds",e[e.ScreenSharingControl=8]="ScreenSharingControl",e[e.MicrophoneLevelMeter=9]="MicrophoneLevelMeter",e[e.MicrophoneVolumeControl=10]="MicrophoneVolumeControl",e[e.SpeakerVolumeControl=11]="SpeakerVolumeControl",e[e.PersistVolumeLevels=12]="PersistVolumeLevels",e[e.AvSettingsCameraPreview=13]="AvSettingsCameraPreview",e[e.NonNativeEmergencyCalls=14]="NonNativeEmergencyCalls",e[e.CallSnapshot=15]="CallSnapshot",e[e.AttachVideoWithId=16]="AttachVideoWithId",e[e.RemoteRendererDispose=17]="RemoteRendererDispose",e[e.DirectReparenting=18]="DirectReparenting",e[e.DefaultOutputDevice=19]="DefaultOutputDevice",e[e.SecondaryRinging=20]="SecondaryRinging",e[e.UnmuteDevice=21]="UnmuteDevice",e[e.Agc=22]="Agc",e[e.CallTechnicalInformation=23]="CallTechnicalInformation",e[e.BackgroundBlur=24]="BackgroundBlur",e[e.BackgroundReplacement=25]="BackgroundReplacement",e[e.NdiPlatform=26]="NdiPlatform",e[e.ApplicationSharing=27]="ApplicationSharing",e[e.MobileScreenSharing=28]="MobileScreenSharing",e[e.CallMerge=29]="CallMerge",e[e.ScreenSharingToolbar=30]="ScreenSharingToolbar",e[e.floatableResizableVideoPreviewSupported=31]="floatableResizableVideoPreviewSupported",e[e.IsPluginlessCallingStack=32]="IsPluginlessCallingStack"}(g||(g={}));class h{constructor(){this._capabilityMap={}}_isSupported(e,t){const i=e;return n.isUndefined(this._capabilityMap[i])&&(this._capabilityMap[i]=t()),this._capabilityMap[i]}}t.CallingCapabilities=new class extends h{constructor(){super(...arguments),this._callingSupportedByBrowser=!0}setCallingSupportedByBrowser(e){this._callingSupportedByBrowser=e}limitedSupportBrowser(){return s.default.getS4LUiFeaturesNoSubscription().limitedSupportBrowserToastConfig.enabled&&(o.BrowserEnvironment.isEngineGecko()||o.BrowserEnvironment.isEngineChromium()&&!this._callingSupportedByBrowser||o.BrowserEnvironment.isEngineWebkit()&&!this._callingSupportedByBrowser)}anyCallingSupported(){const e=this.oneToOneCallingSupported(),t=this.groupCallingSupported();return r.log(a.LogTraceArea.Calling,`CallingCapabilities.anyCallingSupported, oneToOneCallingSupported: ${e}, groupCallingSupported: ${t}`),e||t}oneToOneCallingSupported(){return this._isBrowserCallingSupported()}groupCallingSupported(){return this._isBrowserCallingSupported()}meetNowCallingSupported(){return this._isBrowserCallingSupported()}encryptedCallingSupported(){return this._isSupported(g.Encrypted,(()=>!1))}autoAnswerSupported(){return this._isSupported(g.AutoAnswer,(()=>!1))}callMonitorSupported(){return this._isSupported(g.CallMonitor,(()=>!1))}screenSharingSupported(){return this._isSupported(g.ScreenSharing,(()=>o.BrowserEnvironment.supportsScreenSharing()))}screenSharingControlSupported(){return this._isSupported(g.ScreenSharingControl,(()=>this.screenSharingSupported()&&!1))}screenSharingWithSoundSupported(){return this._isSupported(g.ScreenSharingWithSounds,(()=>d.default.isElectronWindows()))}mobileScreenSharingSupported(){return this._isSupported(g.MobileScreenSharing,(()=>!1))}microphoneLevelMeterSupported(){return this._isSupported(g.MicrophoneLevelMeter,(()=>d.default.isAnyWindowsOrOsx()&&!d.default.shouldUsePluginlessCallingStack()))}microphoneVolumeControlSupported(){return this._isSupported(g.MicrophoneVolumeControl,(()=>d.default.isAnyWindowsOrOsx()&&!d.default.shouldUsePluginlessCallingStack()))}speakerVolumeControlSupported(){return this._isSupported(g.SpeakerVolumeControl,(()=>d.default.isAnyWindowsOrOsx()&&!d.default.shouldUsePluginlessCallingStack()))}persistVolumeLevelsSupported(){return this._isSupported(g.PersistVolumeLevels,(()=>d.default.isAnyWindowsOrOsx()&&!d.default.shouldUsePluginlessCallingStack()))}avSettingsCameraPreviewSupported(){return this._isSupported(g.AvSettingsCameraPreview,(()=>!0))}nonNativeEmergencyCallsSupported(){return this._isSupported(g.NonNativeEmergencyCalls,(()=>!1))}callSnapshotSupported(){return this._isSupported(g.CallSnapshot,(()=>!1))}attachVideoWithIdSupported(){return this._isSupported(g.AttachVideoWithId,(()=>!1))}remoteRendererDisposeSupported(){return this._isSupported(g.RemoteRendererDispose,(()=>!0))}directReparentingSupported(){return this._isSupported(g.DirectReparenting,(()=>!1))}defaultOutputDeviceSupported(){return this._isSupported(g.DefaultOutputDevice,(()=>!1))}secondaryRingingSupported(){return this._isSupported(g.SecondaryRinging,(()=>!0))}unmuteDeviceSupported(){return this._isSupported(g.UnmuteDevice,(()=>!1))}agcSupported(){return this._isSupported(g.Agc,(()=>!1))}callTechnicalInformationSupported(){return this._isSupported(g.CallTechnicalInformation,(()=>!1))}backgroundBlurSupported(){return this._isSupported(g.BackgroundBlur,(()=>!0))}ndiPlatformSupported(){return this._isSupported(g.NdiPlatform,(()=>!0))}applicationSharingSupported(){return this._isSupported(g.ApplicationSharing,(()=>!0))}callMergeSupported(){return this._isSupported(g.CallMerge,(()=>!1))}screenSharingToolbarSupported(){return this._isSupported(g.ScreenSharingToolbar,(()=>!1))}floatableResizableVideoPreviewSupported(){return this._isSupported(g.floatableResizableVideoPreviewSupported,(()=>!0))}isPluginlessCallingStack(){return this._isSupported(g.IsPluginlessCallingStack,(()=>!0))}_isBrowserCallingSupported(){return this._callingSupportedByBrowser&&(o.BrowserEnvironment.isEngineEdgeHTML()||o.BrowserEnvironment.isEngineGecko()||o.BrowserEnvironment.isEngineWebkit()||o.BrowserEnvironment.isEngineChromium())}},t.UICapabilities=new class extends h{cameraSupported(){return this._isSupported(u.Camera,(()=>!1))}systemSettingsDeepLinkSupported(){return this._isSupported(u.SystemSettingsDeepLink,(()=>!1))}dragAndDropSupported(){return this._isSupported(u.DragAndDrop,(()=>!0))}desktopFilePickerSupported(){return this._isSupported(u.DesktopFilePicker,(()=>!0))}avSettingsSupported(){return this._isSupported(u.AVSettings,(()=>t.CallingCapabilities.anyCallingSupported()))}nativeAnimationsSupported(){return this._isSupported(u.NativeAnimations,(()=>!1))}textNumberOfLinesSupported(){return this._isSupported(u.NumberOfLines,(()=>!1))}contactsSyncSupported(){return this._isSupported(u.ContactsSync,(()=>!1))}inlineTextFormattingSupported(){return this._isSupported(u.InlineTextFormatting,(()=>!0))}cursorTypesSupported(){return this._isSupported(u.CursorTypes,(()=>!0))}copyTextToClipboardSupported(){return this._isSupported(u.CopyTextToClipboard,(()=>o.BrowserEnvironment.supportsCopy()))}systemThemeSupported(){return this._isSupported(u.SystemTheme,(()=>!0))}keyboardAwareViewSupported(){return this._isSupported(u.KeyboardAwareView,(()=>!1))}quickActionsSupported(){return this._isSupported(u.QuickActions,(()=>!1))}addScheduledCallToCalendarSupported(){return this._isSupported(u.AddScheduledCallToCalendar,(()=>!1))}systemHotKeysSupported(){return this._isSupported(u.SystemHotKeys,(()=>!1))}engagementProcessedMessageOnWebTimestampSupported(){return this._isSupported(u.EngagementProcessedMessageOnWebTimestamp,(()=>!0))}androidNotificationChannelSupported(){return!1}inAppBrowserNotificationsSupported(){return o.BrowserEnvironment.isMobile()&&s.default.getS4LNativePlatformsEcsConfigNoSubscription().enableInAppNotificationsForMobileBrowsers}telemetryConsentOptOutSupported(){return this._isSupported(u.TelemetryConsentOptOut,(()=>{const e=d.default.getAppVersion(),t=l.SkypeVersionParser.parse(e);return 0===(null==t?void 0:t.version.cobrand)}))}alertNotificationEnabled(){return c.default.compareVersions(d.default.getOSVersion(),"14.7.0")>=0&&s.default.getS4LNativePlatformsEcsConfigNoSubscription().enableAlertNotifications}}},10102:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateHsvColor=t.deserializeColorInfo=t.serializeColorInfo=t.genFromHsvs=t.isCustomColor=t.isMatchingColorInfo=t.subtleGradientColorsForColorInfo=t.gradientHoverColorsForColorInfo=t.reverseGradientColorsForColorInfo=t.gradientColorsForColorInfo=t.gradientColorsForSerializedColor=t.localizedColorNameForColorInfo=t.accentColor=t.backgroundColorStyleForColorInfo=t.getColorInfoForSerializedColor=t.getDefaultColorInfo=t.getDefaultUnknownColorInfo=t.delphiColorInfo=t.SerializedColorByNumber=void 0;const n=i(96486),o=i(16778),s=i(75080),a=i(61253),r=i(33754),l=i(81760),c=/^#[0-9A-F]{6}$/i,d="delphi";var u;!function(e){e[e.Blue=1]="Blue",e[e.Fuschia=2]="Fuschia",e[e.Mint=3]="Mint",e[e.Orange=4]="Orange",e[e.Rose=5]="Rose",e[e.Yellow=6]="Yellow",e[e.Rainbow=7]="Rainbow"}(u=t.SerializedColorByNumber||(t.SerializedColorByNumber={}));const g={key:"rainbow",colors:[l.Color.pink,l.Color.orange,l.Color.blue]},h={[u.Blue]:{key:"blue",colors:[l.Color.blurpleDark,l.Color.blurpleLight],primaryAccent:l.Color.blurpleDark,secondaryAccent:l.Color.blurpleLight,hoverColors:[l.Color.blurpleDarkOverlay50,l.Color.blurpleDarkOverlay50]},[u.Fuschia]:{key:"fuschia",colors:[l.Color.purpleDark,l.Color.purpleLight],primaryAccent:l.Color.purpleDark,secondaryAccent:l.Color.purpleLight,hoverColors:[l.Color.purpleDarkOverlay50,l.Color.purpleDarkOverlay50]},[u.Mint]:{key:"mint",colors:[l.Color.blueDark,l.Color.blueLight],primaryAccent:l.Color.blueDark,secondaryAccent:l.Color.blueDark,hoverColors:[l.Color.blueDarkOverlay50,l.Color.blueDarkOverlay50]},[u.Orange]:{key:"orange",colors:[l.Color.pinkDark,l.Color.pinkLight],primaryAccent:l.Color.pinkDark,secondaryAccent:l.Color.pinkDark,hoverColors:[l.Color.pinkDarkOverlay50,l.Color.pinkDarkOverlay50]},[u.Rose]:{key:"rose",colors:[l.Color.pinkDark,l.Color.pinkLight],primaryAccent:l.Color.pinkDark,secondaryAccent:l.Color.pinkDark,hoverColors:[l.Color.pinkDarkOverlay50,l.Color.pinkDarkOverlay50]},[u.Yellow]:{key:"yellow",colors:[l.Color.orangeDark,l.Color.orangeLight],primaryAccent:l.Color.orangeDark,secondaryAccent:l.Color.orangeDark,hoverColors:[l.Color.orangeDarkOverlay50,l.Color.orangeDarkOverlay50]},[u.Rainbow]:g};t.delphiColorInfo={key:d,colors:[l.Color.blueDark,l.Color.blueLight],reverseGradientOrder:!0,primaryAccent:l.Color.blueDark,secondaryAccent:l.Color.blueDark,hoverColors:[l.Color.blueDarkOverlay50,l.Color.blueDarkOverlay50]};const p={blue:u.Blue,fuschia:u.Fuschia,mint:u.Mint,orange:u.Orange,rose:u.Rose,yellow:u.Yellow,rainbow:u.Rainbow};let m={};function S(){return A()[u.Blue]}function C(e){return e>=1&&e<=7?A()[e]:S()}function f(e,t){if(t){if(e.secondaryAccent)return e.secondaryAccent}else if(e.primaryAccent)return e.primaryAccent;const i=e.colors;return t?i[i.length-1]:i[0]}function y(e){return e.reverseGradientOrder?e.colors.slice().reverse():e.colors}t.getDefaultUnknownColorInfo=S,t.getDefaultColorInfo=function(e){return C(function(e){if(!e)return 0;let t=5381;const i=e.length;for(let n=0;n<i;n++){t=33*t^e.charCodeAt(n)}return t>>>0}(e)%6+1)},t.getColorInfoForSerializedColor=C,t.backgroundColorStyleForColorInfo=function(e,t=!1){const i=f(e,t);let n=m[i];return n||(n=o.Styles.createViewStyle({backgroundColor:i},!1),m[i]=n),n},t.accentColor=f,t.localizedColorNameForColorInfo=function(e){switch(e.key){case"blue":return r.getString("Colors.Blue");case"fuschia":return r.getString("Colors.Fuschia");case"mint":return r.getString("Colors.Mint");case"orange":return r.getString("Colors.Orange");case"rose":return r.getString("Colors.Rose");case"yellow":return r.getString("Colors.Yellow");case"rainbow":return r.getString("Colors.Rainbow");case b:return r.getString("Colors.Custom")}return""},t.gradientColorsForSerializedColor=function(e){return y(C(e))},t.gradientColorsForColorInfo=y,t.reverseGradientColorsForColorInfo=function(e){return e.colors.slice().reverse()},t.gradientHoverColorsForColorInfo=function(e){return e.hoverColors},t.subtleGradientColorsForColorInfo=function(e){return y(e)},t.isMatchingColorInfo=function(e,t){return!!e&&p[e.key]===t},t.isCustomColor=function(e){return!!e&&!(e.key in p)&&e.key!==d};const _="_",v="reverse",b="cust";function T(e,t){return{key:b,hsvs:e,colors:n.map(e,(e=>s.rgbToColorString(s.hsvToRgb(e)))),reverseGradientOrder:t}}function P(e){return!!e&&(!!(void 0!==e.hue&&n.isNumber(e.hue)&&e.hue>=0&&e.hue<=1)&&(!!(void 0!==e.saturation&&n.isNumber(e.saturation)&&e.saturation>=.7&&e.saturation<=1)&&!!(void 0!==e.value&&n.isNumber(e.value)&&e.value>=.2&&e.value<=1)))}function A(){return h}t.genFromHsvs=T,t.serializeColorInfo=function(e){const t=n.findKey(A(),((t,i)=>(0,a.default)(t,e)));return t||(e.hsvs||(e.hsvs=n.map(e.colors,(e=>s.rgbToHsv(s.colorStringToRgb(e))))),"hsv_"+n.map(e.hsvs,(e=>e.hue+","+e.saturation+","+e.value)).join(_)+(e.reverseGradientOrder?"_reverse":""))},t.deserializeColorInfo=function(e){if(!e)return S();let t=A()[e];if(t)return t;const i=p[e];if(i){let e=A()[i];if(e)return e}const o=e.split(_);if("hsv"===o[0]&&o.length>=2){let e,t=!1;n.last(o)===v?(e=o.slice(1,o.length-1),t=!0):e=o.slice(1,o.length);let i=!1;const s=[];if(n.each(e,(e=>{try{const t=e.split(","),i={hue:Number(t[0]),saturation:Number(t[1]),value:Number(t[2])};if(P(i))return s.push(i),!0}catch(e){}return i=!0,!1})),!i)return T(s,t)}if("cust"===o[0]&&o.length>=2){let e,t=!1;n.last(o)===v?(e=o.slice(1,o.length-1),t=!0):e=o.slice(1,o.length);if(e.length&&n.every(e,(e=>c.test(e))))return 1===e.length&&e.push(e[0]),{key:b,colors:e,reverseGradientOrder:t}}return S()},t.validateHsvColor=P},57113:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74958),o=i(96486),s=i(69755),a=i(62783),r=i(97691),l=i(46096),c=i(36237),d=i(4057),u=i(12770);class g{static checkCookieValue(e,t,i,n=5){let o={exponentialTime:new a.ExponentialTime(100,5e3),numberRetriesSoFar:-1};return g._checkCookieValue(e,t,i,n,o)}static getCookieSupported(){return!1}static clearCookies(){return s.default.clearAllCookies()}static _checkCookieValue(e,t,i,a=5,u){return s.default.getCookiesForDomain(e).then((n=>{const s=t.trim();return o.find(n,((e,t)=>t.trim()===s))===i?r.Resolved():g._retryCheckCookieValue(e,t,i,a,u)}),(o=>(c.error(l.LogTraceArea.CookieUtils,"Failed to fetch cookies for domain: '",n.pii.Omit(e),"' , error: ",d.default.errorAsString(o)),g._retryCheckCookieValue(e,t,i,a,u))))}static _retryCheckCookieValue(e,t,i,o,s){return s.numberRetriesSoFar=s.numberRetriesSoFar+1,s.numberRetriesSoFar<=o?(c.log(l.LogTraceArea.CookieUtils,"Retrying getting cookie value. Domain:",n.pii.Omit(e),", retryInfo:",JSON.stringify(s)),u.default.sleep(s.exponentialTime.getTimeAndCalculateNext()).then((()=>this._checkCookieValue(e,t,i,o,s)))):r.Rejected()}}t.default=g},97431:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tryMigrateCredentials=t.tryMigrateUWPCredentials=void 0;const n=i(43550),o=i(46096),s=i(36237),a=i(11377);t.tryMigrateUWPCredentials=function(){return n.CredentialsMigration.tryMigrateCredentials()},t.tryMigrateCredentials=function(e,t){return n.CredentialsMigration.tryMigrateCredentials().then((t=>a.default.getAccessTokenFromRefreshToken(t.msaRefreshToken,!0).then((i=>{e(t,i)})).done((()=>{n.CredentialsMigration.onMigrationComplete(),s.log(o.LogTraceArea.SISU,"Credential migration successfully marked as completed")})))).catch((()=>{s.log(o.LogTraceArea.SISU,"Failed to migrate credentials, falling back to normal login flow"),t()}))}},85609:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileIconHelper=void 0;const n=i(16778),o=i(53559),s=i(15877),a=i(33754),r=i(81760),l=i(11828),c=i(78262),d=(0,s.lazyProperties)({iconBackgroundColorFile:()=>n.Styles.createViewStyle({backgroundColor:r.Color.gray300})});t.FileIconHelper=class{static getIconFromFileType(e,t){let i,n;switch(t||o.default.getFileType(o.default.extractFileExtension(e))){case c.UploadFileType.Excel:i=l.SkypeIcon.MSExcel,n=a.getString("Global.MsExcelLabel");break;case c.UploadFileType.OneNote:i=l.SkypeIcon.MSOneNote,n=a.getString("Global.MsOneNoteLabel");break;case c.UploadFileType.Powerpoint:i=l.SkypeIcon.MSPowerPoint,n=a.getString("Global.MsPowerPointLabel");break;case c.UploadFileType.Word:i=l.SkypeIcon.MSWord,n=a.getString("Global.MsWordLabel");break;case c.UploadFileType.Picture:i=l.SkypeIcon.Picture,n=a.getString("Global.Photo");break;case c.UploadFileType.Video:case c.UploadFileType.VideoMessage:i=l.SkypeIcon.Video,n=a.getString("Global.Video");break;case c.UploadFileType.Audio:i=l.SkypeIcon.FileAudio,n=a.getString("ShareWithPanel.AudioPreviewInfo");break;default:i=l.SkypeIcon.File,n=a.getString("Global.FileLabel")}return{icon:i,displayString:n,iconColor:r.Color.gray300,backgroundStyle:d.iconBackgroundColorFile}}static getFileIconGlyph(e){switch(o.default.extractFileExtension(e)){case"doc":case"docx":return l.SkypeIcon.MSWord;case"xls":case"xlsx":return l.SkypeIcon.MSExcel;case"ppt":case"pptx":return l.SkypeIcon.MSPowerPoint;case"one":return l.SkypeIcon.MSOneNote}return l.SkypeIcon.File}static getFileIconColor(e){const t=o.default.extractFileExtension(e);let i=r.Color.darkThemeBackground;switch(t){case"docx":case"doc":i=r.Color.docFile;break;case"xlsx":case"xls":i=r.Color.xlsFile;break;case"pptx":case"ppt":i=r.Color.pptFile;break;case"one":i=r.Color.oneNoteFile}return i}}},61317:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FilePickerUtils=t.FilePickerAcceptType=void 0;const n=i(96486),o=i(33010),s=i(62520),a=i(89391),r=i(46096),l=i(35933),c=i(36237),d=i(33754),u=i(18743);var g;!function(e){e[e.Image=1]="Image",e[e.Video=2]="Video"}(g=t.FilePickerAcceptType||(t.FilePickerAcceptType={}));t.FilePickerUtils=class{static showSingleFilePicker(e,t,i,n){o.default.show(this._fillMissingOptions(n),t,i,(t=>{c.warn(r.LogTraceArea.FilePicker,"Single file picker used to select more than one item."),t.forEach((t=>e(t)))}))}static showOpenDialog(e,t){o.default.showOpenDialog(e,t)}static getFileDownloadPath(){return o.default.getFileDownloadPath()}static getFileUri(e,t){return a.default.getS4LMessagingFeaturesNoSubscription().enableCustomFileDownloadLocation&&t?s.join(t,e):e}static showMultiFilesPicker(e,t,i,s,a,r){let d=this._getFileLimit(r);const g=(u.FilePickerOrigin.FilePickerItem,d);o.default.show(this._fillMissingOptions(i,!0),s,a,(i=>{let o=i.length>g;o?l.show(s):i.forEach((t=>e(t))),c.track(new u.FilesSentViaPicker(t,g,o,n.map(i,(e=>e.extension))))}))}static isDocumentPickerSupported(){return o.default.isDocumentPickerSupported()}static cleanUp(e){o.default.cleanUp(e)}static showDocumentPicker(e,t,i){o.default.isDocumentPickerSupported()&&o.default.showDocumentPicker((n=>this._callbackWrapper(n,u.FilePickerOrigin.FilePickerItem,e,t,i)))}static _callbackWrapper(e,t,i,o,s){const a=this._getFileLimit(s);let r=e.length>a;r?l.show(o):e.forEach((e=>i(e))),c.track(new u.FilesSentViaPicker(t,a,r,n.map(e,(e=>e.extension))))}static _fillMissingOptions(e,t){return{title:d.getString("FilePicker.SelectImageTitle"),cancelButtonTitle:d.getString("Global.CancelLabel"),chooseFromLibraryButtonTitle:d.getString("FilePicker.LibraryOptionTitle"),takePhotoButtonTitle:d.getString("FilePicker.CameraOptionTitle"),maxWidth:e&&e.maxSize||4096,maxHeight:e&&e.maxSize||4096,quality:e&&e.quality||.7,allowsEditing:e&&e.allowEditing||!1,acceptImage:e&&e.acceptType===g.Image,acceptVideo:e&&e.acceptType===g.Video,allowMultipleSelection:t||!1,allowsFileChoosing:e&&e.allowsFileChoosing||!1}}static _getFileLimit(e){const t=a.default.getS4LMessagingFeaturesNoSubscription().limitForFilePicker;return e?t-e||0:t}}},52115:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileSizeInformation=void 0;const n=i(96486),o=i(89391),s=i(65976),a=i(46096),r=i(53700),l=i(49679),c=i(36237),d=i(33754),u=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];t.FileSizeInformation=class{};class g{static formatFileSize(e,t=2){let i=e;i<0&&(i=0,c.warn(a.LogTraceArea.FileSizeHelpers,"Invalid byte size passed: "+e));let o=t>0?t:0;if(o<0&&(o=0,c.warn(a.LogTraceArea.FileSizeHelpers,"Invalid decimal places passed: "+t)),0===i)return{value:0,unit:u[0],formattedString:d.getString("FileSizeHelpers.0Bytes")};if(1===i)return{value:1,unit:u[0],formattedString:d.getString("FileSizeHelpers.1Byte")};const s=Math.floor(Math.log(i)/Math.log(1024));let r=u[s];if(n.isUndefined(r))return c.warn(a.LogTraceArea.FileSizeHelpers,"Invalid byte size passed (too big): "+e),{value:void 0,unit:void 0,formattedString:"too big"};const g=parseFloat((i/Math.pow(1024,s)).toFixed(o));return{value:g,unit:r,formattedString:d.getString("FileSizeHelpers.SizeDescription",{size:l.toStringWithFormattedDecimalSeparator(g),unit:d.getStringUnsafe("FileSizeHelpers."+r)})}}static getMaximumLimitsForType(e){const t=s.getUploadContentId(e),i=o.default.getAsyncMediaFeatures().storage_limits;if(t in i)return i[t];c.log(a.LogTraceArea.FileSizeHelpers,"Unknown limits for UploadFileType: "+e+", StorageLimits: "+JSON.stringify(i)+", uploadType: "+e+", uploadContentId: "+t)}static getMaximumFileSizeForType(e){const t=g.getMaximumLimitsForType(e);return t&&t.size||1/0}static getAmsUploadFileSize(e){let t=e.amsUploadFullData.file.size;return!n.isNumber(t)&&e.amsFullDataCacheInfo&&(t=r.default.getSize(e.amsFullDataCacheInfo.name)),t}}t.default=g},53559:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(78262),s=["png","jpg","jpeg","gif","heif","heic"],a=["mp4","webm","mov"],r=["mp3","wav","m4a"],l=["txt","pdf","svg","bmp","tif","tiff"],c=["doc","docx"],d=["xls","xlsx"],u=["ppt","pptx"],g=["one"],h=n.union(c,d,u,g,["wopitest"]);class p{static extractFileNameWithExtension(e){return e.replace(/^.*[\\\/]/,"")}static extractFileExtension(e,t=!0){if(!e)return"";const i=e.lastIndexOf(".");let n="";return i>=0&&(n=e.substr(i+1)),t&&(n=n.toLowerCase()),n}static extractFileName(e){const t=e.lastIndexOf(".");return t>0?e.substr(0,t):e}static extractFileNameForKnownFileTypes(e){let t=p.extractFileExtension(e);return this.isKnownExtension(t)?this.extractFileName(e):e}static isInExtensionsList(e,t){return n.includes(e,t.toLowerCase())}static isImageExtension(e){return this.isInExtensionsList(s,e)}static isGifImageExtension(e){return"gif"===e}static isAudioExtension(e){return this.isInExtensionsList(r,e)}static isVideoExtension(e){return this.isInExtensionsList(a,e)}static isExcelExtension(e){return this.isInExtensionsList(d,e)}static isOneNoteExtension(e){return this.isInExtensionsList(g,e)}static isPowerPointExtension(e){return this.isInExtensionsList(u,e)}static isWordExtension(e){return this.isInExtensionsList(c,e)}static isOfficeExtension(e){return this.isInExtensionsList(h,e)}static isOtherKnowExtension(e){return this.isInExtensionsList(l,e)}static isKnownExtension(e){return this.isImageExtension(e)||this.isAudioExtension(e)||this.isVideoExtension(e)||this.isOfficeExtension(e)||this.isOtherKnowExtension(e)}static isImageMimeType(e){return!!e&&n.includes(p.imageContentTypes,e.toLowerCase())}static isSupportedImageFormat(e){return e===p.imageContentTypes.jpeg}static getFileType(e){return this.isImageExtension(e)?o.UploadFileType.Picture:this.isVideoExtension(e)?o.UploadFileType.Video:this.isAudioExtension(e)?o.UploadFileType.Audio:this.isExcelExtension(e)?o.UploadFileType.Excel:this.isOneNoteExtension(e)?o.UploadFileType.OneNote:this.isPowerPointExtension(e)?o.UploadFileType.Powerpoint:this.isWordExtension(e)?o.UploadFileType.Word:o.UploadFileType.File}static getFileContentTypeFromExtension(e){let t="application/unknown";switch(e){case"jpg":case"jpeg":t=p.imageContentTypes.jpeg;break;case"gif":t=p.imageContentTypes.gif;break;case"tif":case"tiff":t=p.imageContentTypes.tiff;break;case"png":t=p.imageContentTypes.png;break;case"mp4":t="video/mp4";break;case"webm":t="video/webm";break;case"mp3":t=p.audioContentTypes.mpeg;break;case"m4a":t=p.audioContentTypes.mp4;break;case"wav":t=p.audioContentTypes.wav}return t}static getAudioFileContentTypeFromExtension(e){let t="application/unknown";switch(e){case"mp3":t=p.audioContentTypes.mpeg;break;case"mp4":case"m4a":t=p.audioContentTypes.mp4;break;case"wav":t=p.audioContentTypes.wav}return t}static getFileContentType(e){const t=this.extractFileExtension(e);return this.getFileContentTypeFromExtension(t)}static isThumbnailSupportedFileType(e){switch(e){case o.UploadFileType.Picture:case o.UploadFileType.Video:case o.UploadFileType.VideoMessage:return!0;default:return!1}}}t.default=p,p.imageContentTypes={png:"image/png",jpeg:"image/jpeg",gif:"image/gif",svg:"image/svg",bmp:"image/bmp",tiff:"image/tiff",heif:"image/heif",heic:"image/heic"},p.audioContentTypes={mp4:"audio/mp4",mpeg:"audio/mpeg",wav:"audio/wav"},p.htmlContentTypes={textHtml:"text/html"}},70004:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileUploadCacheUtils=t.internal_cacheConfig=void 0;const n=i(96486),o=i(43413);t.internal_cacheConfig={DefaultCacheName:"RNManualFileCache"};const s="urn:cache:";t.FileUploadCacheUtils=class{static getBaseUri(e){return o.default.getLocalUriBase(e)}static getLocalCacheUri(e){return s+e}static getAbsoluteFromLocalCacheUri(e,i=t.internal_cacheConfig.DefaultCacheName){const o=this.getBaseUri(i);return o&&n.startsWith(e,s)?e.replace(s,o):e}static getAbsoluteUriForName(e){return this.getAbsoluteFromLocalCacheUri(this.getLocalCacheUri(e))}}},28719:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseFileUri=void 0,t.parseFileUri=function(e){if(!e.startsWith("file:"))return;let t,i;return"/"!==e[5]||"/"!==e[6]?i=5:(i=e.indexOf("/",7),i<0&&(i=e.length),t=e.substring(7,i)),{host:t,path:decodeURIComponent(e.substring(i))}}},69382:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addMediaToSkypeAlbum=t.deleteImageFile=t.openFolderLocation=t.openFileLocation=t.openFile=t.fileExists=t.getFileInformation=void 0;const n=i(94993),o=i(97691);t.getFileInformation=e=>n.default.getFileInformation(e),t.fileExists=e=>n.default.fileExists(e),t.openFile=e=>o.Rejected(new Error("Failed to open file")),t.openFileLocation=e=>o.Resolved(!1),t.openFolderLocation=e=>o.Resolved(!1),t.deleteImageFile=e=>o.Resolved();t.addMediaToSkypeAlbum=e=>n.default.addMediaToSkypeAlbum(e)},12854:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(31844),s=i(97691),a=i(46096),r=i(36237),l=i(4057),c=i(40363);class d{static prepareFeedback(){return d._hasHaptics()?o.default.prepareFeedbackGenerator().then(n.noop,(e=>{r.warn(a.LogTraceArea.GenericUnsafe,"DeviceUtilities prepareFeedbackGenerator failed: "+l.default.errorAsString(e))})):s.Resolved()}static unprepareFeedback(){return d._hasHaptics()?o.default.unprepareFeedbackGenerator().then(n.noop,(e=>{r.warn(a.LogTraceArea.GenericUnsafe,"DeviceUtilities unprepareFeedbackGenerator failed: "+l.default.errorAsString(e))})):s.Resolved()}static triggerFeedback(){return d._hasHaptics()?o.default.triggerFeedback().then(n.noop,(e=>{r.warn(a.LogTraceArea.GenericUnsafe,"DeviceUtilities triggerFeedback failed: "+l.default.errorAsString(e))})):s.Resolved()}static _hasHaptics(){const e=c.default.getPlatformType();return e===a.PlatformType.iOS||e===a.PlatformType.Android}}t.default=d},36801:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JSONAnimationUtils=void 0;const n=i(96486),o=i(75080);class s{getAssetSourceWithColor(e,t){let i,n,s=e.source;if("string"==typeof s)if(n="strong",t){const e=o.colorStringToBodyMovinRgbArray(t);i={key:t,parameters:{color:t,rgbColor:JSON.stringify(e)}}}else i=e.defaultTemplateContext;else s=this._getSourceWithColor(s,t);return{source:s,templateContext:i,cacheStrategy:n}}getAssetSourceWithGradientColors(e,t,i){let n,o,s=e.source;return"string"==typeof s?(o="strong",n=e.defaultTemplateContext):s=this._getSourceWithGradientColors(s,t,i),{source:s,templateContext:n,cacheStrategy:o}}_getSourceWithColor(e,t){if(t){let i=n.cloneDeep(e);const s=o.colorStringToBodyMovinRgbArray(t);return n.each(i.layers,(e=>{n.each(e.shapes,(e=>{e.c&&(e.c.k=s),e.it&&n.each(e.it,(e=>{e.c&&(e.c.k=s)}))})),e.sc&&(e.sc=t)})),i}return e}_getSourceWithGradientColors(e,t,i){let s=n.cloneDeep(e);const a=o.colorStringToBodyMovinRgbArray(t),r=o.colorStringToBodyMovinRgbArray(i);let l=[0];return l.push.apply(l,n.take(a,3)),l.push(1),l.push.apply(l,n.take(r,3)),n.each(s.layers,(e=>{n.each(e.shapes,(e=>{e.it&&n.each(e.it,(e=>{if(e.g&&e.g.k&&e.g.k.k){const t=e.g.k.k;for(let e=0;e<t.length;e+=4){const i=t[e];t[e+1]=this._mapVal(i,a[0],r[0]),t[e+2]=this._mapVal(i,a[1],r[1]),t[e+3]=this._mapVal(i,a[2],r[2])}e.g.k.k=t}}))}))})),s}_mapVal(e,t,i){return t+(i-t)*e}}t.JSONAnimationUtils=s,t.default=new s},75913:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391);t.default=new class{openAccessibilityConformance(){this._openUrl(o.default.getConfigSettingsNoSubscription().frenchAccessibilityConformanceUrl.host)}openPrivacy(){this._openUrl(o.default.getConfigSettingsNoSubscription().privacyUrl.host)}openTerms(){this._openUrl(o.default.getConfigSettingsNoSubscription().termsUrl.host)}_openUrl(e){n.Linking.openUrl(e)}}},4329:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(97691),s=i(46096),a=i(36237),r=i(18078),l=i(4057);const c=new class{constructor(){this._logoutInfos=[]}registerForLogout(e,t){n.find(this._logoutInfos,(t=>t.logoutable===e))||this._logoutInfos.push({logoutable:e,name:t})}logoutAll(e,t,i){if(!r.default.hasSkypeId())return o.Resolved();if(r.default.hasLogoutStarted())return o.Rejected("Cannot call logout twice");r.default.logoutUser(),a.log(s.LogTraceArea.GenericUnsafe,"LogoutContainer: logoutAll causeId: "+e);const c=this._logoutInfos.length;return o.all(n.map(this._logoutInfos,((n,o)=>(a.log(s.LogTraceArea.GenericUnsafe,"LogoutContainer: Logging out "+n.name+" causeId: "+e+" ["+(o+1)+"/"+c+"]"),n.logoutable.logout(e,t,i).catch((e=>{a.log(s.LogTraceArea.GenericUnsafe,"LogoutContainer: "+n.name+" errored: "+l.default.errorAsString(e))})).finally((()=>{a.log(s.LogTraceArea.GenericUnsafe,"LogoutContainer: "+n.name+" logout complete ["+(o+1)+"/"+c+"]")})))))).then(n.noop)}test_getRegisteredLogoutable(e){return n.find(this._logoutInfos,(t=>t.logoutable===e))}};t.default=c},45026:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(98356);t.default=n.NativeUtils},70665:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterModalDialogDismissalException=t.registerModalDialogDismissalException=t.unregister=t.register=t.dismissAll=void 0;const n=i(96486),o=i(16778),s=i(98278),a=i(46096),r=i(36237);let l=0;const c={},d=[];t.dismissAll=function(e){r.log(a.LogTraceArea.Navigation,"NavDismissalHelper.dismissAll"),function(){if(n.some(d,(e=>o.Modal.isDisplayed(e))))return!1;return!0}()&&(e&&e!==s.MainRootViewId?o.Modal.dismissAll(e):o.Modal.dismissAll()),e&&e!==s.MainRootViewId?o.Popup.dismissAll(e):o.Popup.dismissAll(),n.each(c,(e=>{e&&e.dismiss?e.dismiss():r.warn(a.LogTraceArea.Navigation,"NavDismissalHelper.dismissAll called without dismiss handle")}))},t.register=function(e){l++;const t="navDismissalHandler"+l;return r.log(a.LogTraceArea.Navigation,"NavDismissalHelper.register handle: "+t),c[t]=e,t},t.unregister=function(e){r.log(a.LogTraceArea.Navigation,"NavDismissalHelper.unregister handle: "+e),delete c[e]},t.registerModalDialogDismissalException=function(e){r.log(a.LogTraceArea.Navigation,"NavDismissalHelper.registerModalDialogDismissalException: "+e),n.includes(d,e)||d.push(e)},t.unregisterModalDialogDismissalException=function(e){r.log(a.LogTraceArea.Navigation,"NavDismissalHelper.unregisterModalDialogDismissalException: "+e),n.remove(d,e)}},17093:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PesSearchNavigationId=t.InviteLinkQRPanelNavigationContext=t.InviteLinkQRPanelNavigationId=t.MySettingsNavigationContext=t.MySettingsNavigationId=t.MeControlNavigationContext=t.MeControlNavigationId=t.AlertsHubNavigationContext=t.AlertsHubNavigationId=t.MobileHubNavigationContext=t.MobileHubNavigationId=t.ConversationsListNavigationContext=t.ConversationsListNavigationId=t.ForcedUpgradeContext=t.ForcedUpgradeNavigatorId=t.JoiningGuestScreenContext=t.JoiningGuestNavigatorId=t.WelcomeScreenContext=t.WelcomeScreenNavigatorId=t.TwinCamModalContext=t.TwinCamModalNavigationId=t.TogetherModeModalContext=t.TogetherModeNavigationId=t.ScreenShareModalContext=t.ConversationMediaViewerPanelContext=t.MediaViewerPanelContext=t.MediaViewerNavigationId=t.DocumentViewerContext=t.DocumentViewerNavigationId=t.LocationViewerContext=t.LocationPickerContext=t.PromptPermissionContext=t.PromptPermissionsNavigatorId=t.ConversationMediaViewerPanelNavigationId=t.LocationViewerNavigationId=t.LocationPickerNavigationId=t.CompositeNavigationContext=t.SimpleSplitNavigationContext=t.SplitNavigationContext=t.StackNavigationContext=t.RequiredScenarioContext=t.ScenarioContext=t.NavigationContext=t.StackAnimationType=t.SettingsGroup=t.HubTab=t.GalleryViewMode=t.RightSidebarViewMode=t.MainStageNavViewMode=t.LeftNavViewMode=void 0,t.RinglessCallInterstitialNavigationContext=t.CallFailurePostPurchasePromptContext=t.CallFailurePostPurchasePromptNavigationId=t.CallFailurePromptContext=t.CallFailurePromptId=t.CallerIdPromptContext=t.CallerIdPromptNavigationId=t.CallPreviewNavigationId=t.CallPreviewNavigationContext=t.CQFNavigationContext=t.AndroidCallMonitorPermissionNavigationContext=t.UnansweredCallNavigationContext=t.CallNavigationContext=t.CallNavigationReason=t.CallNavigationId=t.ConversationNavigationContext=t.ConversationNavigationId=t.LanguagePickerPanelNavigationContext=t.LanguagePickerNavigationId=t.NewSettingsPanelNavigationContext=t.NewSettingsPanelNavigationId=t.SettingsGroupNavigationContext=t.SettingsGroupNavigationId=t.NavigationSettingsGroupOrigin=t.BackgroundEffectsSettingsNavigationContext=t.AVSettingsContext=t.AVSettingsNavigationId=t.ChooseAvatarCommonPickerContext=t.CommonAvatarNavigationId=t.ChooseAvatarContext=t.AvatarNavigationId=t.PnvDebugToolContext=t.PnvDebugToolNavigationId=t.PnvEnterCodeContext=t.PnvEnterCodeNavigationId=t.PnvEnterNumberContext=t.PnvEnterNumberNavigationId=t.UserProfileContext=t.UserProfileNavigationId=t.ThemeContext=t.TelemetryConsentContext=t.TelemetryConsentNavigationId=t.PeopleYouMayKnowNoticeContext=t.PeopleYouMayKnowNoticeNavigationId=t.SyncAddressBookContext=t.SyncAddressBookNavigationId=t.OnboardingDialogWizardContext=t.ThemeNavigationId=t.ColorPickerNavigationId=t.PesSearchNavigationContext=void 0,t.SendDiagnosticLogsNavigationContext=t.SendDiagnosticLogsId=t.DiagnosticToolsNavigationContext=t.DiagnosticToolsId=t.TelemetryPerformanceMonitorNavigationContext=t.TelemetryPerfId=t.SubscriptionIntroNavigationContext=t.SubscriptionIntroNavigationId=t.PurchaseContinuationNavigationContext=t.PurchaseContinuationId=t.GetBalanceStateNavigationContext=t.GetBalanceStateId=t.ThirdPartyNoticesNavigationContext=t.ThirdPartyNoticesNavigationId=t.AboutNavigationContext=t.AboutNavigationId=t.SearchNavigationContext=t.SearchNavigationId=t.ArchivedConversationsPanelNavigationContext=t.ArchivedConversationsId=t.AugmentedPermissionsViewNavigationContext=t.AugmentedPermissionsViewNavigationState=t.DesktopCaptureComboViewNavigationContext=t.CaptureNavigationContext=t.BotDiscoveryNavigationContext=t.BotDiscoveryNavigationId=t.BotsListNavigationContext=t.BotsListNavigationId=t.ConversationParticipantsNavigationContext=t.SuperComposerNavigationId=t.ConversationParticipantsNavigationId=t.ElectronForceUpgradeScreen=t.LoadingPanelNavigationContext=t.LoadingPanelNavigationId=t.ReportConcernNavigationContext=t.ReportConcernNavigationId=t.CreateConversationNavigationContext=t.CreateConversationNavigationId=t.AddToCallNavigationContext=t.AddToCallNavigationId=t.CallRosterNavigationContext=t.CallRosterNavigationId=t.ConversationInCallNavigationContext=t.ConversationInCallNavigationId=t.ChatConfigNavigationContext=t.ChatConfigNavigationId=t.DetailsNavigationContext=t.DetailsNavigationId=t.BingBackgroundNavigationContext=t.BingBackgroundNavigationId=void 0,t.ShareContactsToConversationNavigationId=t.CaptivePortalQuestionnaireContext=t.CaptivePortalQuestionnaireNavigationId=t.EngagementSharePanelContext=t.EngagementSharePanelNavigationId=t.ShareWithPanelNavigationContext=t.ShareWithPanelNavigationId=t.InAppBrowserNavigationContext=t.InAppBrowserNavigationId=t.CaptureMultiPreviewNavigationContext=t.CaptureMultiPreviewNavigationId=t.CapturePreviewNavigationContext=t.CapturePreviewNavigationId=t.MediaEditorNavigationId=t.AlertsNavigationContext=t.AlertsNavigationId=t.SkypeNumberPanelPurchaseFlowNavigationContext=t.SkypeNumberPanelPurchaseFlowNavigationId=t.SkypeNumberListNavigationContext=t.SkypeNumberListNavigationId=t.SkypeNumberWebFlowNavigationContext=t.SkypeNumberWebFlowNavigationId=t.CallingSettingsHeaderAuthWebFlowNavigationContext=t.CallingSettingsHeaderAuthWebFlowNavigationId=t.SsoWebFlowNavigationContext=t.SsoWebFlowNavigationId=t.Payments3dsNavigationContext=t.Payments3dsNavigationId=t.GetProductWebFlowNavigationContext=t.GetProductWebFlowNavigationId=t.DesktopMsaPhoneAccrualNavigationContext=t.DesktopMsaPhoneAccrualNavigationId=t.DesktopCloseAccountNavigationContext=t.DesktopCloseAccountNavigationId=t.CustomReactionsPanelNavigationContext=t.CustomReactionsPanelId=t.RawPreferencesNavigationContext=t.RawPreferencesId=t.SlimcoreFlagListNavigationContext=t.SlimcoreFlagListId=t.FeatureFlagListNavigationContext=t.FeatureFlagListId=t.ManageSearchInfoPanelNavigationContext=t.ManageSearchInfoPanelId=t.ConnectedUsersListNavigationContext=t.ConnectedUsersListNavigationId=t.BlockedUsersListNavigationContext=t.BlockedUsersListId=t.ProfilePicturePanelNavigationContext=t.ProfilePicturePanelId=void 0,t.ActiveNowPanelNavigationContext=t.ActiveNowPanelId=t.AboutPeopleYouMayKnowNavigationContext=t.AboutPeopleYouMayKnowId=t.AddPhoneNumberPanelNavigationContext=t.AddPhoneNumberPanelNavigationId=t.AddContactPanelNavigationContext=t.AddContactPanelId=t.ContactsPanelV2NavigationContext=t.ContactsPanelId=t.SkypeNumberPrefixSelectorNavigationContext=t.SkypeNumberPrefixSelectorPanelId=t.SkypeNumberCountryAreaSelectorNavigationContext=t.SkypeNumberCountryAreaSelectorPanelId=t.E911AcknowledgementPanelNavigationContext=t.E911AcknowledgementPanelId=t.PSTNCountrySelectorNavigationContext=t.PSTNCountrySelectorPanelId=t.PSTNDialerNavigationContext=t.PSTNDialerPanelId=t.QuickCallNavigationContext=t.QuickCallSearchPanelId=t.QuickCallPanelId=t.CallingDebugPanelNavigationContext=t.CallingDebugPanelNavigationId=t.CallingSettingsEntryNavigationContext=t.CallingSettingsEntryNavigationId=t.TranslationSettingsPanelNavigationContext=t.TranslationSettingsPanelNavigationId=t.SubtitlesCallingSettingsPanelNavigationContext=t.SubtitlesCallingSettingsPanelNavigationId=t.AdvancedCallingSettingsPanelNavigationContext=t.AdvancedCallingSettingsPanelNavigationId=t.CallerIdNumberCallingSettingsPanelNavigationContext=t.CallerIdNumberCallingSettingsPanelNavigationId=t.CallerIdCallingSettingsPanelNavigationContext=t.CallerIdCallingSettingsPanelNavigationId=t.CallCaptionsSettingsPanelNavigationContext=t.CallCaptionsSettingsPanelNavigationId=t.CallingSettingsPanelNavigationContext=t.CallingSettingsPanelNavigationId=t.FindPanelNavigationContext=t.FindPanelNavigationId=t.GalleryNavigationContext=t.GalleryNavigationId=t.CaptureComboNavigationContext=t.CaptureComboNavigationId=t.MediaPickerNavigationContext=t.MediaPickerNavigationId=t.ShareContactsToConversationContext=void 0,t.NavigationDirections=t.TasterPostCallPanelContext=t.TasterPostCallPanelId=t.SmsFailurePromptContext=t.SmsFailurePromptId=t.RootCompositeSplitViewContext=t.SpeechConsentNavigationContext=t.SpeechConsentNavigationId=t.SettingsMenuContext=t.SplitMasterNavigationContext=t.LeftNavigationViewContext=t.SubtitlesNavigationContext=t.SubtitlesNavigationId=t.LeftNavigationViewId=t.RightSidebarStackContext=t.DesktopContentPanelNavigationContext=t.MobileContentPanelNavigationContext=t.MobileContentPanelId=t.ManageUsersSettingsPanelNavigationContext=t.ManageUsersSettingsPanelNavigationId=t.DesktopSettingsGroupNavigationContext=t.DesktopSettingsGroupNavigationId=t.SendCreditPanelNavigationContext=t.SendCreditPanelNavigationId=t.SXPlaygroundNavigationContext=t.SXPlaygroundNavigationId=t.GuestUpsellNavigationState=t.GuestUpsellNavigationContext=t.GuestUpsellNavigationId=t.ConversationShareNavigationContext=t.ConversationShareNavigationState=t.ConversationSharingScreenId=t.InviteShareNavigationContext=t.InviteShareNavigationId=t.ProfileNavigationContext=t.ProfileNavigationState=t.ProfileNavigationId=void 0;const n=i(96486),o=i(46096);let s=0;var a,r,l;!function(e){e[e.None=0]="None",e[e.Recents=1]="Recents",e[e.Search=2]="Search",e[e.ConversationInCall=3]="ConversationInCall",e[e.Calls=4]="Calls",e[e.Contacts=5]="Contacts",e[e.Notifications=6]="Notifications",e[e.CallSearch=7]="CallSearch"}(a=t.LeftNavViewMode||(t.LeftNavViewMode={})),function(e){e[e.None=0]="None",e[e.WelcomeScreen=1]="WelcomeScreen",e[e.DesktopContentPanel=2]="DesktopContentPanel",e[e.Call=3]="Call",e[e.MeetNow=4]="MeetNow",e[e.ForcedUpgradeScreen=5]="ForcedUpgradeScreen"}(t.MainStageNavViewMode||(t.MainStageNavViewMode={})),function(e){e[e.None=0]="None",e[e.Gallery=1]="Gallery",e[e.Find=2]="Find",e[e.InAppBrowser=3]="InAppBrowser",e[e.Other=4]="Other"}(t.RightSidebarViewMode||(t.RightSidebarViewMode={})),function(e){e[e.None=0]="None",e[e.All=1]="All",e[e.Media=2]="Media",e[e.Files=3]="Files",e[e.Links=4]="Links"}(t.GalleryViewMode||(t.GalleryViewMode={})),function(e){e[e.Recents=0]="Recents",e[e.MeetNowChats=1]="MeetNowChats",e[e.MeetNowCalls=2]="MeetNowCalls",e[e.CaptureHub=3]="CaptureHub",e[e.Calls=4]="Calls",e[e.People=5]="People",e[e.Notifications=6]="Notifications"}(r=t.HubTab||(t.HubTab={})),function(e){e[e.Notifications=0]="Notifications",e[e.Chat=1]="Chat",e[e.Contacts=2]="Contacts",e[e.Privacy=3]="Privacy",e[e.General=4]="General",e[e.MyAccountAndProfile=5]="MyAccountAndProfile",e[e.AccountAndProfile=6]="AccountAndProfile",e[e.Debug=7]="Debug",e[e.AppSettings=8]="AppSettings",e[e.AudioVideoSettings=9]="AudioVideoSettings",e[e.AudioSettings=10]="AudioSettings",e[e.BalanceState=11]="BalanceState",e[e.SkypeNumber=12]="SkypeNumber",e[e.ThemeSettings=13]="ThemeSettings",e[e.HelpAndFeedback=14]="HelpAndFeedback",e[e.About=15]="About",e[e.SyncAddressBook=16]="SyncAddressBook",e[e.HotKeys=17]="HotKeys",e[e.ManagePayments=18]="ManagePayments",e[e.BackgroundEffectsSettings=19]="BackgroundEffectsSettings",e[e.ReportProblem=20]="ReportProblem"}(t.SettingsGroup||(t.SettingsGroup={})),function(e){e.DEFAULT="default",e.FADE="fade",e.FADE_FROM_BOTTOM="fade_from_bottom",e.FLIP="flip",e.NONE="none",e.SIMPLE_PUSH="simple_push",e.SLIDE_FROM_BOTTOM="slide_from_bottom",e.SLIDE_FROM_RIGHT="slide_from_right",e.SLIDE_FROM_LEFT="slide_from_left"}(l=t.StackAnimationType||(t.StackAnimationType={}));class c{constructor(e){this.stateId="unknown",this._init(e)}_init(e){this.id=s++,this.state=n.cloneDeep(e)}clone(e){let t=Object.create(this);return t._init(this.state),e&&(t.id=this.id),t}}t.NavigationContext=c;class d extends c{constructor(e,t){super(e),this.navigator=t}}t.ScenarioContext=d;class u extends c{constructor(e,t){super(e),this.navigator=t}}t.RequiredScenarioContext=u;class g extends c{constructor(e){super(e)}_init(e){super._init(e),this.setupDefaults()}setupDefaults(){this._navStack=[]}clone(e){let t=Object.create(this);return t._init(this.state),e&&(t.id=this.id),t._navStack=n.clone(this._navStack),t}clearNavStack(){this._navStack=[]}setNavStack(e){this._navStack=e}getNavStack(){return this._navStack}navigateBack(){this._navStack.length>0&&this.setNavStack(this._navStack.slice(0,this._navStack.length-1))}}t.StackNavigationContext=g;class h extends g{clone(e){let t=Object.create(this);return t._init(this.state),e&&(t.id=this.id),t._navStack=n.clone(this._navStack),t._masterContext=this._masterContext&&this._masterContext.clone?this._masterContext.clone(e):n.clone(this._masterContext),t._isCollapsed=this._isCollapsed,t}isValid(){return!!this.getMasterContext()||this.getNavStack().length>0}collapse(e){this._isCollapsed=e}isCollapsed(){return this._isCollapsed}setMasterContext(e){this._masterContext=e}clearMasterContext(){this._masterContext=void 0}getMasterContext(e=!1){return!this._isCollapsed||e?this._masterContext:void 0}getNavStack(e=!1){return this._isCollapsed&&this._masterContext&&!e?[this._masterContext,...this._navStack]:this._navStack}getBackStack(e=!1){return this.getNavStack(e)}}t.SplitNavigationContext=h;class p extends h{}t.SimpleSplitNavigationContext=p;class m extends c{constructor(e){super(e)}_init(e){super._init(e),this.children={}}clone(e){let t=super.clone(e);return n.each(this.children,((i,n)=>{t.children[n]=i.clone(e)})),t}_assignChildrenContext(e,t){const i=this.children[e];return i?n.assign(i,t):this.children[e]=t}}t.CompositeNavigationContext=m,t.LocationPickerNavigationId="LocationPicker",t.LocationViewerNavigationId="LocationViewer",t.ConversationMediaViewerPanelNavigationId="ConversationMediaViewerPanel",t.PromptPermissionsNavigatorId="PromptPermissions";t.PromptPermissionContext=class extends d{constructor(){super(...arguments),this.stateId=t.PromptPermissionsNavigatorId}};t.LocationPickerContext=class extends c{constructor(){super(...arguments),this.stateId=t.LocationPickerNavigationId}};t.LocationViewerContext=class extends c{constructor(){super(...arguments),this.stateId=t.LocationViewerNavigationId}},t.DocumentViewerNavigationId="DocumentViewer";t.DocumentViewerContext=class extends c{constructor(){super(...arguments),this.stateId=t.DocumentViewerNavigationId}},t.MediaViewerNavigationId="MediaViewer";t.MediaViewerPanelContext=class extends c{constructor(){super(...arguments),this.stateId=t.MediaViewerNavigationId}};t.ConversationMediaViewerPanelContext=class extends c{constructor(){super(...arguments),this.stateId=t.ConversationMediaViewerPanelNavigationId}};t.ScreenShareModalContext=class extends c{},t.TogetherModeNavigationId="TogetherMode";t.TogetherModeModalContext=class extends c{constructor(){super(...arguments),this.stateId=t.TogetherModeNavigationId}},t.TwinCamModalNavigationId="TwinCam";t.TwinCamModalContext=class extends c{constructor(){super(...arguments),this.stateId=t.TwinCamModalNavigationId}},t.WelcomeScreenNavigatorId="WelcomeScreen";class S extends c{constructor(){super(...arguments),this.stateId=t.WelcomeScreenNavigatorId}}t.WelcomeScreenContext=S,t.JoiningGuestNavigatorId="JoiningGuestScreen";t.JoiningGuestScreenContext=class extends c{constructor(){super(...arguments),this.stateId=t.JoiningGuestNavigatorId}},t.ForcedUpgradeNavigatorId="ForcedUpgrade";t.ForcedUpgradeContext=class extends c{},t.ConversationsListNavigationId="ConversationsList";class C extends c{constructor(){super(...arguments),this.stateId=t.ConversationsListNavigationId}}t.ConversationsListNavigationContext=C,t.MobileHubNavigationId="MobileHub";t.MobileHubNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.MobileHubNavigationId}},t.AlertsHubNavigationId="AlertsHub";class f extends c{constructor(){super(...arguments),this.stateId=t.AlertsHubNavigationId}}t.AlertsHubNavigationContext=f,t.MeControlNavigationId="MeControlId";t.MeControlNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.MeControlNavigationId}},t.MySettingsNavigationId="MySettingsId";t.MySettingsNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.MySettingsNavigationId}},t.InviteLinkQRPanelNavigationId="InviteLinkQRPanelId";t.InviteLinkQRPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.InviteLinkQRPanelNavigationId}},t.PesSearchNavigationId="PesSearchId";t.PesSearchNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.PesSearchNavigationId}},t.ColorPickerNavigationId="ColorPicker",t.ThemeNavigationId="Theme";t.OnboardingDialogWizardContext=class extends c{},t.SyncAddressBookNavigationId="SyncAddressBook";t.SyncAddressBookContext=class extends d{constructor(){super(...arguments),this.stateId=t.SyncAddressBookNavigationId}},t.PeopleYouMayKnowNoticeNavigationId="PeopleYouMayKnowNotice";t.PeopleYouMayKnowNoticeContext=class extends d{constructor(){super(...arguments),this.stateId=t.PeopleYouMayKnowNoticeNavigationId}},t.TelemetryConsentNavigationId="TelemetryConsent";t.TelemetryConsentContext=class extends d{constructor(){super(...arguments),this.stateId=t.TelemetryConsentNavigationId}};t.ThemeContext=class extends d{constructor(){super(...arguments),this.stateId=t.ThemeNavigationId}},t.UserProfileNavigationId="UserProfile";t.UserProfileContext=class extends d{constructor(){super(...arguments),this.stateId=t.UserProfileNavigationId}},t.PnvEnterNumberNavigationId="PnvEnterNumber";t.PnvEnterNumberContext=class extends d{constructor(){super(...arguments),this.stateId=t.PnvEnterNumberNavigationId}},t.PnvEnterCodeNavigationId="PnvEnterCode";t.PnvEnterCodeContext=class extends d{constructor(){super(...arguments),this.stateId=t.PnvEnterCodeNavigationId}},t.PnvDebugToolNavigationId="PnvDebugTool";t.PnvDebugToolContext=class extends d{constructor(){super(...arguments),this.stateId=t.PnvDebugToolNavigationId}},t.AvatarNavigationId="AvatarPicker";t.ChooseAvatarContext=class extends d{constructor(){super(...arguments),this.stateId=t.AvatarNavigationId}},t.CommonAvatarNavigationId="CommonAvatarPicker";t.ChooseAvatarCommonPickerContext=class extends d{constructor(){super(...arguments),this.stateId=t.CommonAvatarNavigationId}},t.AVSettingsNavigationId="AVSettings";t.AVSettingsContext=class extends d{constructor(){super(...arguments),this.stateId=t.AVSettingsNavigationId}};t.BackgroundEffectsSettingsNavigationContext=class extends c{},function(e){e[e.NavigationFromSettings=0]="NavigationFromSettings"}(t.NavigationSettingsGroupOrigin||(t.NavigationSettingsGroupOrigin={})),t.SettingsGroupNavigationId="settingsgroup";t.SettingsGroupNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SettingsGroupNavigationId}},t.NewSettingsPanelNavigationId="NewSettingsPanelNavigationId";t.NewSettingsPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.NewSettingsPanelNavigationId}},t.LanguagePickerNavigationId="LanguagePicker";t.LanguagePickerPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.LanguagePickerNavigationId}},t.ConversationNavigationId="Conversation";class y extends c{}t.ConversationNavigationContext=y,t.CallNavigationId="Call",function(e){e[e.StartingCall=0]="StartingCall",e[e.JoinOngoing=1]="JoinOngoing",e[e.AnsweredRing=2]="AnsweredRing",e[e.PresentIncomingRing=3]="PresentIncomingRing",e[e.Rejoining=4]="Rejoining",e[e.AutoAnsweredRing=5]="AutoAnsweredRing"}(t.CallNavigationReason||(t.CallNavigationReason={}));t.CallNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CallNavigationId}};t.UnansweredCallNavigationContext=class extends c{};t.AndroidCallMonitorPermissionNavigationContext=class extends c{};t.CQFNavigationContext=class extends c{};t.CallPreviewNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CallPreviewNavigationId}},t.CallPreviewNavigationId="CallPreview",t.CallerIdPromptNavigationId="CallerIdPrompt";t.CallerIdPromptContext=class extends c{constructor(){super(...arguments),this.stateId=t.CallerIdPromptNavigationId}},t.CallFailurePromptId="CallFailurePrompt";t.CallFailurePromptContext=class extends c{constructor(){super(...arguments),this.stateId=t.CallFailurePromptId}},t.CallFailurePostPurchasePromptNavigationId="CallFailurePostPurchasePrompt";t.CallFailurePostPurchasePromptContext=class extends c{constructor(){super(...arguments),this.stateId=t.CallFailurePostPurchasePromptNavigationId}};t.RinglessCallInterstitialNavigationContext=class extends c{},t.BingBackgroundNavigationId="BingBackgrounds";t.BingBackgroundNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.BingBackgroundNavigationId}},t.DetailsNavigationId="Details";t.DetailsNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.DetailsNavigationId}},t.ChatConfigNavigationId="ChatConfig";t.ChatConfigNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.ChatConfigNavigationId}},t.ConversationInCallNavigationId="ConversationInCall";class _ extends c{}t.ConversationInCallNavigationContext=_,t.CallRosterNavigationId="CallRoster";t.CallRosterNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CallRosterNavigationId}},t.AddToCallNavigationId="AddToCall";t.AddToCallNavigationContext=class extends c{},t.CreateConversationNavigationId="CreateConversation";t.CreateConversationNavigationContext=class extends u{constructor(){super(...arguments),this.stateId=t.CreateConversationNavigationId}},t.ReportConcernNavigationId="ReportConcern";t.ReportConcernNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.ReportConcernNavigationId}},t.LoadingPanelNavigationId="LoadingPanel";t.LoadingPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.LoadingPanelNavigationId}};t.ElectronForceUpgradeScreen=class extends c{},t.ConversationParticipantsNavigationId="ConvParticipants",t.SuperComposerNavigationId="SuperComposer";t.ConversationParticipantsNavigationContext=class extends u{constructor(){super(...arguments),this.stateId=t.ConversationParticipantsNavigationId}},t.BotsListNavigationId="BotsList";t.BotsListNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.BotsListNavigationId}},t.BotDiscoveryNavigationId="BotDiscovery";t.BotDiscoveryNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.BotDiscoveryNavigationId}};t.CaptureNavigationContext=class extends c{};t.DesktopCaptureComboViewNavigationContext=class extends c{};t.AugmentedPermissionsViewNavigationState=class{};t.AugmentedPermissionsViewNavigationContext=class extends c{},t.ArchivedConversationsId="ArchivedConversations";class v extends c{constructor(){super(...arguments),this.stateId=t.ArchivedConversationsId}}t.ArchivedConversationsPanelNavigationContext=v,t.SearchNavigationId="Search";class b extends c{constructor(){super(...arguments),this.stateId=t.SearchNavigationId}}t.SearchNavigationContext=b,t.AboutNavigationId="About";t.AboutNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.AboutNavigationId}},t.ThirdPartyNoticesNavigationId="ThirdPartyNotices";t.ThirdPartyNoticesNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.ThirdPartyNoticesNavigationId}},t.GetBalanceStateId="GetBalanceState";t.GetBalanceStateNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.GetBalanceStateId}},t.PurchaseContinuationId="PurchaseContinuation";t.PurchaseContinuationNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.PurchaseContinuationId}},t.SubscriptionIntroNavigationId="SubscriptionIntro";t.SubscriptionIntroNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SubscriptionIntroNavigationId}},t.TelemetryPerfId="TelemetryPerf";t.TelemetryPerformanceMonitorNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.TelemetryPerfId}},t.DiagnosticToolsId="DiagnosticTools";t.DiagnosticToolsNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.DiagnosticToolsId}},t.SendDiagnosticLogsId="SendDiagnosticLogs";t.SendDiagnosticLogsNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SendDiagnosticLogsId}},t.ProfilePicturePanelId="ProfilePicturePanelId";t.ProfilePicturePanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.ProfilePicturePanelId}},t.BlockedUsersListId="BlockedUsersList";t.BlockedUsersListNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.BlockedUsersListId}},t.ConnectedUsersListNavigationId="ConnectedUsersList";t.ConnectedUsersListNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.ConnectedUsersListNavigationId}},t.ManageSearchInfoPanelId="ManageSearchInfo";t.ManageSearchInfoPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.ManageSearchInfoPanelId}},t.FeatureFlagListId="FeatureFlagList";t.FeatureFlagListNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.FeatureFlagListId}},t.SlimcoreFlagListId="SlimcoreFlagList";t.SlimcoreFlagListNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SlimcoreFlagListId}},t.RawPreferencesId="RawPreferences";t.RawPreferencesNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.RawPreferencesId}},t.CustomReactionsPanelId="CustomReactionsPanel";t.CustomReactionsPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CustomReactionsPanelId}},t.DesktopCloseAccountNavigationId="DesktopCloseAccount";t.DesktopCloseAccountNavigationContext=class extends c{},t.DesktopMsaPhoneAccrualNavigationId="DesktopMsaPhoneAccrual";t.DesktopMsaPhoneAccrualNavigationContext=class extends c{},t.GetProductWebFlowNavigationId="GetProductWebFlow";t.GetProductWebFlowNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.GetProductWebFlowNavigationId}},t.Payments3dsNavigationId="Payments3ds";t.Payments3dsNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.Payments3dsNavigationId}},t.SsoWebFlowNavigationId="SsoWebFlow";t.SsoWebFlowNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SsoWebFlowNavigationId}},t.CallingSettingsHeaderAuthWebFlowNavigationId="CallingSettingsHeaderAuthWebFlow";t.CallingSettingsHeaderAuthWebFlowNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CallingSettingsHeaderAuthWebFlowNavigationId}},t.SkypeNumberWebFlowNavigationId="SkypeNumberWebFlow";t.SkypeNumberWebFlowNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SkypeNumberWebFlowNavigationId}},t.SkypeNumberListNavigationId="SkypeNumberList";t.SkypeNumberListNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SkypeNumberListNavigationId}},t.SkypeNumberPanelPurchaseFlowNavigationId="SkypeNumberPanelPurchaseFlow";t.SkypeNumberPanelPurchaseFlowNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SkypeNumberPanelPurchaseFlowNavigationId}},t.AlertsNavigationId="Alerts";t.AlertsNavigationContext=class extends c{},t.MediaEditorNavigationId="MediaEditor",t.CapturePreviewNavigationId="CapturePreview";t.CapturePreviewNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CapturePreviewNavigationId}},t.CaptureMultiPreviewNavigationId="CaptureMultiPreview";t.CaptureMultiPreviewNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CaptureMultiPreviewNavigationId}},t.InAppBrowserNavigationId="InAppBrowser";t.InAppBrowserNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.InAppBrowserNavigationId}},t.ShareWithPanelNavigationId="ShareWith";t.ShareWithPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.ShareWithPanelNavigationId}},t.EngagementSharePanelNavigationId="EngagementSharePanel";t.EngagementSharePanelContext=class extends c{constructor(){super(...arguments),this.stateId=t.EngagementSharePanelNavigationId}},t.CaptivePortalQuestionnaireNavigationId="CaptivePortalQuestionnaire";t.CaptivePortalQuestionnaireContext=class extends c{constructor(){super(...arguments),this.stateId=t.CaptivePortalQuestionnaireNavigationId}},t.ShareContactsToConversationNavigationId="ShareContactsToConversation";t.ShareContactsToConversationContext=class extends c{constructor(){super(...arguments),this.stateId=t.ShareContactsToConversationNavigationId}},t.MediaPickerNavigationId="MediaPicker";t.MediaPickerNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.MediaPickerNavigationId}},t.CaptureComboNavigationId="CaptureCombo";t.CaptureComboNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CaptureComboNavigationId}},t.GalleryNavigationId="Gallery";t.GalleryNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.GalleryNavigationId}},t.FindPanelNavigationId="Find";t.FindPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.FindPanelNavigationId}},t.CallingSettingsPanelNavigationId="CallingSettings";t.CallingSettingsPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CallingSettingsPanelNavigationId}},t.CallCaptionsSettingsPanelNavigationId="CallCaptionsSettings";t.CallCaptionsSettingsPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CallCaptionsSettingsPanelNavigationId}},t.CallerIdCallingSettingsPanelNavigationId="CallerIdCallingSettings";t.CallerIdCallingSettingsPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CallerIdCallingSettingsPanelNavigationId}},t.CallerIdNumberCallingSettingsPanelNavigationId="CallerIdNumberCallingSettings";t.CallerIdNumberCallingSettingsPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CallerIdNumberCallingSettingsPanelNavigationId}},t.AdvancedCallingSettingsPanelNavigationId="AdvancedCallingSettings";t.AdvancedCallingSettingsPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.AdvancedCallingSettingsPanelNavigationId}},t.SubtitlesCallingSettingsPanelNavigationId="SubtitlesCallingSettings";t.SubtitlesCallingSettingsPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SubtitlesCallingSettingsPanelNavigationId}},t.TranslationSettingsPanelNavigationId="TranslationSettings";t.TranslationSettingsPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.TranslationSettingsPanelNavigationId}},t.CallingSettingsEntryNavigationId="CallingSettingsEntry";t.CallingSettingsEntryNavigationContext=class extends c{},t.CallingDebugPanelNavigationId="CallingDebugPanel";t.CallingDebugPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.CallingDebugPanelNavigationId}},t.QuickCallPanelId="QuickCallPanel",t.QuickCallSearchPanelId="QuickCallSearchPanel";class T extends c{constructor(){super(...arguments),this.stateId=t.QuickCallPanelId}}t.QuickCallNavigationContext=T,t.PSTNDialerPanelId="PSTNDialerPanel";t.PSTNDialerNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.PSTNDialerPanelId}},t.PSTNCountrySelectorPanelId="PSTNCountrySelectorPanel";t.PSTNCountrySelectorNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.PSTNCountrySelectorPanelId}},t.E911AcknowledgementPanelId="E911AcknowledgementPanel";t.E911AcknowledgementPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.E911AcknowledgementPanelId}},t.SkypeNumberCountryAreaSelectorPanelId="SkypeNumberCountryAreaSelectorPanel";t.SkypeNumberCountryAreaSelectorNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SkypeNumberCountryAreaSelectorPanelId}},t.SkypeNumberPrefixSelectorPanelId="SkypeNumberPrefixSelectorPanel";t.SkypeNumberPrefixSelectorNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SkypeNumberPrefixSelectorPanelId}},t.ContactsPanelId="Contacts";class P extends c{constructor(){super(...arguments),this.stateId=t.ContactsPanelId}}t.ContactsPanelV2NavigationContext=P,t.AddContactPanelId="AddContactPanel";t.AddContactPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.AddContactPanelId}},t.AddPhoneNumberPanelNavigationId="AddPhoneNumberPanel";t.AddPhoneNumberPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.AddPhoneNumberPanelNavigationId}},t.AboutPeopleYouMayKnowId="AboutPeopleYouMayKnow";t.AboutPeopleYouMayKnowNavigationContext=class extends c{},t.ActiveNowPanelId="ActiveNowPanel";t.ActiveNowPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.ActiveNowPanelId}},t.ProfileNavigationId="Profile";t.ProfileNavigationState=class{};t.ProfileNavigationContext=class extends c{},t.InviteShareNavigationId="InviteShare";t.InviteShareNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.InviteShareNavigationId}},t.ConversationSharingScreenId="ConversationSharingScreenId";t.ConversationShareNavigationState=class{};t.ConversationShareNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.ConversationSharingScreenId}},t.GuestUpsellNavigationId="GuestUpsell";t.GuestUpsellNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.GuestUpsellNavigationId}};t.GuestUpsellNavigationState=class{},t.SXPlaygroundNavigationId="SXPlayground";t.SXPlaygroundNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SXPlaygroundNavigationId}},t.SendCreditPanelNavigationId="SendCreditPanel";t.SendCreditPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SendCreditPanelNavigationId}},t.DesktopSettingsGroupNavigationId="DesktopSettingsGroup";t.DesktopSettingsGroupNavigationContext=class extends c{},t.ManageUsersSettingsPanelNavigationId="ManageUsersSettings";t.ManageUsersSettingsPanelNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.ManageUsersSettingsPanelNavigationId}},t.MobileContentPanelId=t.ConversationNavigationId;t.MobileContentPanelNavigationContext=class extends m{constructor(){super(...arguments),this.stateId=t.MobileContentPanelId}setConversationContext(e){this.children[t.ConversationNavigationId]=new y(e)}getConversationContext(){return this.children[t.ConversationNavigationId]}};t.DesktopContentPanelNavigationContext=class extends m{setConversationContext(e){this.children[t.ConversationNavigationId]=new y(e)}getConversationContext(){return this.children[t.ConversationNavigationId]}};t.RightSidebarStackContext=class extends g{},t.LeftNavigationViewId="LeftNavView",t.SubtitlesNavigationId="Subtitles";t.SubtitlesNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SubtitlesNavigationId}};class A extends m{setViewMode(e){this.state.viewMode=e}getConversationsListContext(){return this.children[t.ConversationsListNavigationId]||(this.children[t.ConversationsListNavigationId]=new C({currentTab:r.Recents})),this.children[t.ConversationsListNavigationId]}getSearchContext(){return this.children[t.SearchNavigationId]||(this.children[t.SearchNavigationId]=new b({searchOrigin:o.SearchPanelInitiator.Unknown})),this.children[t.SearchNavigationId]}getCallSearchContext(){return this.children[t.QuickCallSearchPanelId]||(this.children[t.QuickCallSearchPanelId]=new T({searchOnly:!0})),this.children[t.QuickCallSearchPanelId]}getConversationInCallContext(){return this.children[t.ConversationInCallNavigationId]}setConversationInCallContext(e){this.children[t.ConversationInCallNavigationId]=new _(e)}getCallsContext(){return this.children[t.QuickCallPanelId]||(this.children[t.QuickCallPanelId]=new T({})),this.children[t.QuickCallPanelId]}getContactsV2Context(){return this.children[t.ContactsPanelId]||(this.children[t.ContactsPanelId]=new P({})),this.children[t.ContactsPanelId]}getNotificationsContext(){return this.children[t.AlertsHubNavigationId]||(this.children[t.AlertsHubNavigationId]=new f({})),this.children[t.AlertsHubNavigationId]}getArchivedConversationsContext(){return this.children[t.ArchivedConversationsId]||(this.children[t.ArchivedConversationsId]=new v({})),this.children[t.ArchivedConversationsId]}}t.LeftNavigationViewContext=A;class k extends c{}t.SplitMasterNavigationContext=k;t.SettingsMenuContext=class extends k{},t.SpeechConsentNavigationId="SpeechConsent";t.SpeechConsentNavigationContext=class extends c{constructor(){super(...arguments),this.stateId=t.SpeechConsentNavigationId}};t.RootCompositeSplitViewContext=class extends p{setupDefaults(){super.setupDefaults(),this._navStack=[new S({})],this._masterContext=new A({viewMode:a.Recents})}collapse(e){super.collapse(e),e||0!==this._navStack.length||(this._navStack=[new S({})])}clone(e){let t=Object.create(this);return t._init(this.state),e&&(t.id=this.id),t._navStack=n.clone(this._navStack),t._masterContext=this._masterContext&&this._masterContext.clone?this._masterContext.clone(e):n.clone(this._masterContext),t._isCollapsed=this._isCollapsed,t}getMasterContext(){return super.getMasterContext()}getNavStack(){if(this._isCollapsed){const e=this._masterContext instanceof A?this._masterContext:void 0,t=!!e&&e.state.viewMode!==a.None?n.filter(this._navStack,(e=>!this._shouldFilterNavContext(e))):this._navStack;return e?[e,...t]:t}return this._navStack}getBackStack(){let e=super.getBackStack();return e=n.filter(e,(e=>!(e instanceof A&&e.state.viewMode===a.None))),e}getLeftNavigationContext(){if(this._masterContext instanceof A)return this._masterContext}shouldDisplayMainAreaFullScreen(){return this._displayMainAreaFullScreen}setMainAreaFullScreen(e){this._displayMainAreaFullScreen=e}_shouldFilterNavContext(e){return e instanceof S}},t.SmsFailurePromptId="SmsFailurePrompt";t.SmsFailurePromptContext=class extends c{constructor(){super(...arguments),this.stateId=t.SmsFailurePromptId}},t.TasterPostCallPanelId="TasterPostCallPanel";t.TasterPostCallPanelContext=class extends c{constructor(){super(...arguments),this.stateId=t.TasterPostCallPanelId}},t.NavigationDirections=new Map([[t.AlertsHubNavigationId,l.SLIDE_FROM_BOTTOM],[t.ConversationParticipantsNavigationId,l.SLIDE_FROM_BOTTOM],[t.DetailsNavigationId,l.SLIDE_FROM_BOTTOM],[t.GalleryNavigationId,l.SLIDE_FROM_BOTTOM],[t.MeControlNavigationId,l.SLIDE_FROM_BOTTOM],[t.MediaViewerNavigationId,l.SLIDE_FROM_BOTTOM],[t.PSTNDialerPanelId,l.SLIDE_FROM_BOTTOM],[t.ReportConcernNavigationId,l.SLIDE_FROM_BOTTOM],[t.SearchNavigationId,l.SLIDE_FROM_BOTTOM],[t.PSTNCountrySelectorPanelId,l.SLIDE_FROM_BOTTOM],[t.ShareContactsToConversationNavigationId,l.SLIDE_FROM_BOTTOM]])},48199:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalGestureResponseDistance=t.ConversationHorizontalGestureResponseDistance=t.HorizontalGestureResponseDistance=t.RouteType=void 0;const n=i(96486),o=i(98356),s=i(16778),a=i(65666),r=i(74634),l=i(97691),c=i(46096),d=i(15877),u=i(81760),g=i(40363),h=366;var p;!function(e){e[e.Hub=0]="Hub",e[e.Content=1]="Content",e[e.Search=2]="Search",e[e.ContactsPanel=3]="ContactsPanel",e[e.Other=4]="Other"}(p=t.RouteType||(t.RouteType={}));const m=(0,d.lazyProperties)({transparentCard:()=>s.Styles.createViewStyle({backgroundColor:u.Color.transparent})});t.HorizontalGestureResponseDistance=44,t.ConversationHorizontalGestureResponseDistance=120,t.VerticalGestureResponseDistance=150;let S=new class{constructor(){this._transitionInfoId=0,this._transitionInfoEvent=new r.default}transitionInfoEvent(){return this._transitionInfoEvent}isNavigationAnimationFinished(){if(!this._transitionInfo||this._transitionInfo&&!this._transitionInfo.inProgress)return l.Resolved();const e=l.Defer(),t=this.transitionInfoEvent().subscribe((i=>{i.inProgress||(t.unsubscribe(),e.resolve(void 0))}));return e.promise()}transitionHint(){return this._transitionHint}transitionHintForPopCard(){if(this._transitionHint&&this._transitionHint.forPopCard)return this._transitionHint}setTransitionHint(e){this._transitionHint=e}onNavigationStarted(e,t,i){this._transitionInfo={key:this._transitionInfoId++,inProgress:!0,toRoute:t,fromRoute:i,progress:e},this._transitionInfoEvent.fire(this._transitionInfo)}onNavigationCompleted(){this._transitionInfo&&(this._transitionInfo.inProgress=!1,this._transitionInfoEvent.fire(this._transitionInfo))}floatFromRight(e){if(g.default.getPlatformType()===c.PlatformType.iOS){const t={direction:a.Types.NavigatorSceneConfigType.FloatFromRight,gestureResponseDistance:e,customSceneConfig:{transitionSpec:{duration:h,easing:o.Easing.SkypeExpoOut5},transitionStyle:(e,t)=>({inputRange:[e-1,e,e+.99,e+1],opacityOutput:[1,1,.3,0],scaleOutput:[1,1,1,1],translateXOutput:[t.width,0,-t.width/4,-t.width/4],translateYOutput:[0,0,0,0]})}};return n.isUndefined(e)||(t.gestureResponseDistance=e),t}const t={direction:a.Types.NavigatorSceneConfigType.FloatFromRight};return n.isUndefined(e)||(t.gestureResponseDistance=e),t}floatFromBottom(e){const t={direction:a.Types.NavigatorSceneConfigType.FloatFromBottom,customSceneConfig:{transitionSpec:{duration:h,easing:o.Easing.SkypeExpoOut5},transitionStyle:(e,t)=>({inputRange:[e-1,e,e+.99,e+1],opacityOutput:[1,1,.3,0],scaleOutput:[1,1,.95,.95],translateXOutput:[0,0,0,0],translateYOutput:[t.height,0,-10,-10]})}};return n.isUndefined(e)||(t.gestureResponseDistance=e),t}floatFromBottomNoScale(e=!1){return{direction:a.Types.NavigatorSceneConfigType.FloatFromBottom,gestureResponseDistance:100,customSceneConfig:{hideShadow:e,cardStyle:e?m.transparentCard:void 0,transitionSpec:{duration:h,easing:o.Easing.SkypeExpoOut5},transitionStyle:(e,t)=>({inputRange:[e-1,e,e+1],opacityOutput:[1,1,1],scaleOutput:[1,1,1],translateXOutput:[0,0,0],translateYOutput:[t.height,0,0]})}}}topQuickFade(){return{gestureResponseDistance:0,direction:a.Types.NavigatorSceneConfigType.FloatFromBottom,customSceneConfig:{hideShadow:!0,transitionSpec:{duration:h,easing:o.Easing.SkypeExpoOut5},transitionStyle:(e,t)=>({inputRange:[e-1,e,e+.99,e+1],opacityOutput:[0,1,1,0],scaleOutput:[1,1,1,1],translateXOutput:[0,0,0,0],translateYOutput:[-15,0,0,0]})}}}popCardsQuickFade(){return{gestureResponseDistance:0,direction:a.Types.NavigatorSceneConfigType.FloatFromBottom,customSceneConfig:{hideShadow:!0,transitionSpec:{duration:h,easing:o.Easing.SkypeExpoOut5},transitionStyle:(e,t)=>({inputRange:[e-1,e-.5,e,e+.99,e+1],opacityOutput:[0,0,1,1,0],scaleOutput:[1,1,1,1,1],translateXOutput:[0,0,0,0,0],translateYOutput:[0,0,0,0,0]})}}}noTransition(e=!0){return{gestureResponseDistance:0,direction:a.Types.NavigatorSceneConfigType.FloatFromBottom,customSceneConfig:{hideShadow:!e,cardStyle:e?void 0:m.transparentCard,transitionSpec:{duration:e?1:0,easing:o.Easing.Linear},transitionStyle:(t,i)=>({inputRange:[t-1,t,t+.99,t+1],opacityOutput:[1,1,1,e?0:1],scaleOutput:[1,1,1,1],translateXOutput:[0,0,0,0],translateYOutput:[0,0,0,0]})}}}fade(){return{direction:a.Types.NavigatorSceneConfigType.FadeWithSlide}}sceneConfigForSearchTransition(){return{direction:a.Types.NavigatorSceneConfigType.FloatFromBottom,gestureResponseDistance:0,customSceneConfig:{hideShadow:!0,cardStyle:m.transparentCard,transitionSpec:{duration:o.Common.Duration.Default,easing:o.Easing.SkypeExpoOut5},transitionStyle:(e,t)=>({inputRange:[e-1,e-.05,e+.05,e+1],opacityOutput:[0,1,1,0],scaleOutput:[1,1,1,1],translateXOutput:[0,0,0,0],translateYOutput:[0,0,0,0]})}}}isHubContentTransition(){return!!(this._transitionInfo&&this._transitionInfo.fromRoute&&this._transitionInfo.toRoute)&&(!!this._areUniqueRouteTypes(this._transitionInfo.fromRoute,this._transitionInfo.toRoute)&&(this._isHubOrContentRoute(this._transitionInfo.fromRoute)&&this._isHubOrContentRoute(this._transitionInfo.toRoute)))}isHubSearchTransition(){return!!(this._transitionInfo&&this._transitionInfo.fromRoute&&this._transitionInfo.toRoute)&&(!!this._areUniqueRouteTypes(this._transitionInfo.fromRoute,this._transitionInfo.toRoute)&&(this._isHubOrSearchRoute(this._transitionInfo.fromRoute)&&this._isHubOrSearchRoute(this._transitionInfo.toRoute)))}isContactsPanelSearchTransition(){return!!(this._transitionInfo&&this._transitionInfo.fromRoute&&this._transitionInfo.toRoute)&&(!!this._areUniqueRouteTypes(this._transitionInfo.fromRoute,this._transitionInfo.toRoute)&&(this._isContactsPanelOrSearchRoute(this._transitionInfo.fromRoute)&&this._isContactsPanelOrSearchRoute(this._transitionInfo.toRoute)))}isSearchTransition(){return!!(this._transitionInfo&&this._transitionInfo.fromRoute&&this._transitionInfo.toRoute)&&(!!this._areUniqueRouteTypes(this._transitionInfo.fromRoute,this._transitionInfo.toRoute)&&(this._isRouteType(this._transitionInfo.toRoute,[p.Search])||this._isRouteType(this._transitionInfo.fromRoute,[p.Search])))}_areUniqueRouteTypes(e,t){return(e?e.type:p.Other)!==(t?t.type:p.Other)}_isHubOrSearchRoute(e){return this._isRouteType(e,[p.Hub,p.Search])}_isHubOrContentRoute(e){return this._isRouteType(e,[p.Hub,p.Content])}_isContactsPanelOrSearchRoute(e){return this._isRouteType(e,[p.ContactsPanel,p.Search])}_isRouteType(e,t){return n.includes(t,e.type)}test_reset(){this._transitionInfo=void 0}};t.default=S},33326:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.printNotificationTrace=t.prepareDataForNotification=t.descriptionForWarmCallDisposition=t.LocalNotificationIds=void 0;const n=i(96486),o=i(46096),s=i(36237),a=i(14976);!function(e){e.ACTION_DEFAULT="_default_",e.CHAT_CATEGORY_IDENTIFIER="ChatCategoryIdentifier",e.CHAT_ACTION_THUMBSUP_IDENTIFIER="ChatActionThumbsUpIdentifier",e.CHAT_ACTION_REPLY_IDENTIFIER="ChatActionReplyIdentifier",e.CHAT_ACTION_MARK_AS_READ_IDENTIFIER="ChatActionMarkAsReadIdentifier",e.CHAT_ACTION_THUMBSUP_ICON="notification_action_like",e.CHAT_ACTION_REPLY_ICON="notification_action_reply",e.E2EE_CATEGORY_IDENTIFIER="E2eeCategoryIdentifier",e.CHAT_ERROR_CATEGORY_IDENTIFIER="ChatErrorCategoryIdentifier",e.CALL_CATEGORY_IDENTIFIER="CallCategoryIdentifier",e.CALL_ACTION_ACCEPT_IDENTIFIER="CallActionAcceptIdentifier",e.CALL_ACTION_REJECT_IDENTIFIER="CallActionRejectIdentifier",e.CALL_ACTION_DEFAULT="_default_",e.CALL_ACTION_ACCEPT_ICON="notification_action_call",e.CALL_ACTION_REJECT_ICON="call_btn_end",e.MISSED_CALL_CATEGORY_IDENTIFIER="MissedCallCategoryIdentifier",e.MISSED_CALL_BACK_IDENTIFIER="MissedCallBackIdentifier",e.MISSED_CALL_DEFAULT="_default_",e.MISSED_P2P_CALL_CATEGORY_IDENTIFIER="MissedP2PCallCategoryIdentifier",e.GO_LIVE_CATEGORY_IDENTIFIER="GoLiveCategoryIdentifier",e.GO_LIVE_ACTION_JOIN_IDENTIFIER="GoLiveJoinIdentifier",e.GO_LIVE_ACTION_DEFAULT="_default_",e.CALLBACK_REMINDER_CATEGORY_IDENTIFIER="CallbackReminderCategoryIdentifier",e.CALLBACK_REMINDER_ACTION_CALL_IDENTIFIER="CallbackReminderCallIdentifier",e.CALLBACK_REMINDER_ACTION_DEFAULT="_default_",e.DELETE_IDENTIFIER="DeleteNotificationIdentifier",e.NOTIFICATION_FROM_BUBBLE="notificationFromBubble",e.CLEAR_NOTIFICATION_BUBBLE_CONTEXT="clearNotificationBubbleContext",e.INBOUND_VIDEO_CALL_IDENTIFIER="InboundVideoCallIndentifier",e.LOGOUT_REMINDER_IDENTIFIER="LogoutReminderIdentifier",e.SIGNOUT_REMINDER_IDENTIFIER="SignOutReminderIdentifier",e.SIGNIN_REMINDER_IDENTIFIER="SignInReminderIdentifier",e.SCHEDULED_CALL_INVITE="ScheduledCallInvite",e.SCHEDULED_CALL_INVITE_EDIT="ScheduledCallInviteEdit",e.SCHEDULED_CALL_INVITE_ACCEPT="ScheduledCallInviteAccept",e.SCHEDULED_CALL_INVITE_DECLINE="ScheduledCallInviteDecline",e.SCHEDULED_CALL_INVITE_RESPONSE="ScheduledCallInviteResponse",e.SCHEDULED_CALL_PREREMINDER="ScheduledCallPreReminder",e.SCHEDULED_CALL_REMINDER="ScheduledCallReminder",e.POLL_PREREMINDER="PollPreReminder",e.POLL_REMINDER="PollReminder",e.AUTH_BACKGROUND_REFRESH_CATEGORY_IDENTIFIER="AuthBackgroundRefreshIdentifier",e.PRESENCE_CHANGE_IDENTIFIER="PresenceChangeIdentifier"}(t.LocalNotificationIds||(t.LocalNotificationIds={})),t.descriptionForWarmCallDisposition=function(e){switch(e){case o.WarmCallNotificationDisposition.Wasted:return"Wasted";case o.WarmCallNotificationDisposition.AlreadyRunning:return"AlreadyRunning";case o.WarmCallNotificationDisposition.FollowedByNonWarmPush:return"FollowedByNonWarmPush";case o.WarmCallNotificationDisposition.FollowedByForegrounding:return"FollowedByForegrounding";case o.WarmCallNotificationDisposition.FollowedByCall:return"FollowedByCall";default:return"Unknown"}},t.prepareDataForNotification=function(e){return n.omitBy(e,(e=>!e))},t.printNotificationTrace=function(e,t){s.log(o.LogTraceArea.Notifications,"Notification id: "+a.mriOrId(e.id)+" origin: "+t+" enableVibration: "+e.enableVibration+" enableLight: "+e.enableLight+" silent:"+e.silent+" sound:"+e.sound+" grouped: "+(e.groupedNotifications?e.groupedNotifications.length:"No"))}},64956:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(15069),o=i(2604),s=i(16778),a=i(44770),r=i(19784),l=i(47447),c=i(98278),d=i(33754),u=i(40363),g=i(78262),h=i(53374);t.default=new class{getDeniedPrompt(e){const t=this.getDeniedPromptKey(e);return t?d.getString(t):void 0}getDeniedPromptKey(e){switch(e){case g.PermissionType.Camera:return u.default.isElectronOsx()?"CapturePermissions.PermissionCameraDeniedPromptMac":n.BrowserEnvironment.isChrome()?"CapturePermissions.PermissionCameraDeniedPromptChrome":n.BrowserEnvironment.isEngineEdgeHTML()?"CapturePermissions.PermissionCameraDeniedPromptEdge":n.BrowserEnvironment.isEngineWebkit()?"CapturePermissions.PermissionCameraDeniedPromptSafari":n.BrowserEnvironment.isEngineChromium()||n.BrowserEnvironment.isEngineGecko()?"CapturePermissions.PermissionCameraDeniedPromptChromium":void 0;case g.PermissionType.CameraRoll:case g.PermissionType.WriteCameraRoll:0;break;case g.PermissionType.Microphone:return u.default.isElectronOsx()?"CapturePermissions.PermissionMicrophoneDeniedPromptMac":n.BrowserEnvironment.isChrome()?"CapturePermissions.PermissionMicrophoneDeniedPromptChrome":n.BrowserEnvironment.isEngineEdgeHTML()?"CapturePermissions.PermissionMicrophoneDeniedPromptEdge":n.BrowserEnvironment.isEngineWebkit()?"CapturePermissions.PermissionMicrophoneDeniedPromptSafari":n.BrowserEnvironment.isEngineChromium()||n.BrowserEnvironment.isEngineGecko()?"CapturePermissions.PermissionMicrophoneDeniedPromptChromium":void 0;case g.PermissionType.MicrophoneAndCamera:if(u.default.isElectronOsx())return"CapturePermissions.PermissionMicrophoneAndCameraDeniedPromptMac";break;case g.PermissionType.Contacts:case g.PermissionType.Notifications:case g.PermissionType.Location:case g.PermissionType.LocationAlways:case g.PermissionType.Calendar:0;break;case g.PermissionType.ScreenRecording:if(u.default.isElectronOsx())return"CapturePermissions.PermissionScreenRecordingDeniedPrompt";break;case g.PermissionType.DrawOver:case g.PermissionType.ReadPhoneState:case g.PermissionType.ReadSms:case g.PermissionType.SendSms:case g.PermissionType.ReceiveSms:case g.PermissionType.BackgroundExecution:break;default:h.default.switchStatementExhaustiveChecking(e)}}_getDeniedPromptWithSettings(e){switch(e){case g.PermissionType.Location:case g.PermissionType.LocationAlways:0}return this.getDeniedPrompt(e)}getPrePrompt(e){switch(e){case g.PermissionType.Camera:return d.getString("CapturePermissions.PermissionCameraPrePrompt");case g.PermissionType.CameraRoll:case g.PermissionType.WriteCameraRoll:return d.getString("CapturePermissions.PermissionCameraRollPrePrompt");case g.PermissionType.Microphone:return d.getString("CapturePermissions.PermissionMicrophonePrePrompt");case g.PermissionType.Contacts:return d.getString("CapturePermissions.PermissionContactsPrePrompt");case g.PermissionType.Location:case g.PermissionType.LocationAlways:return d.getString("CapturePermissions.PermissionLocationPrePrompt");case g.PermissionType.Calendar:return d.getString("CapturePermissions.PermissionCalendarPrePrompt");case g.PermissionType.ScreenRecording:return d.getString("CapturePermissions.PermissionScreenRecordingPrePrompt")}}getPromptTitle(e){switch(e){case g.PermissionType.Camera:return d.getString("CapturePermissions.PermissionCamera");case g.PermissionType.CameraRoll:case g.PermissionType.WriteCameraRoll:return d.getString("CapturePermissions.PermissionCameraRoll");case g.PermissionType.Microphone:return d.getString("CapturePermissions.PermissionMicrophone");case g.PermissionType.MicrophoneAndCamera:return d.getString("CapturePermissions.PermissionMicrophoneAndCamera");case g.PermissionType.Contacts:return d.getString("CapturePermissions.PermissionContacts");case g.PermissionType.Notifications:return d.getString("CapturePermissions.PermissionNotifications");case g.PermissionType.Location:case g.PermissionType.LocationAlways:return d.getString("CapturePermissions.PermissionLocation");case g.PermissionType.Calendar:return d.getString("CapturePermissions.PermissionCalendar");case g.PermissionType.ScreenRecording:return d.getString("CapturePermissions.PermissionScreenRecording");case g.PermissionType.ReadPhoneState:case g.PermissionType.ReadSms:case g.PermissionType.SendSms:case g.PermissionType.ReceiveSms:case g.PermissionType.DrawOver:case g.PermissionType.BackgroundExecution:return"";default:return h.default.switchStatementExhaustiveChecking(e)}}descriptorForPermissionType(e){switch(e){case g.PermissionType.Camera:return"Camera";case g.PermissionType.CameraRoll:return"CameraRoll";case g.PermissionType.WriteCameraRoll:return"WriteCameraRoll";case g.PermissionType.Microphone:return"Mic";case g.PermissionType.MicrophoneAndCamera:return"MicAndCamera";case g.PermissionType.Contacts:return"Contacts";case g.PermissionType.Notifications:return"Notifications";case g.PermissionType.Location:case g.PermissionType.LocationAlways:return"Location";case g.PermissionType.BackgroundExecution:return"BackgroundExecution";case g.PermissionType.Calendar:return"Calendar";case g.PermissionType.ScreenRecording:return"ScreenRecording";case g.PermissionType.SendSms:case g.PermissionType.ReceiveSms:case g.PermissionType.ReadSms:case g.PermissionType.ReadPhoneState:case g.PermissionType.DrawOver:break;default:h.default.switchStatementExhaustiveChecking(e)}}showDeniedPromptWithSettingsOption(e,t,i){e===g.PermissionType.Camera?this._showDeniedWebEscalationPromptWithImage(t,g.PermissionType.Camera):e===g.PermissionType.Microphone&&n.BrowserEnvironment.isSafari()?this._showDeniedWebEscalationPromptWithImage(t,g.PermissionType.Microphone):this._showDeniedPrompt(e,!0,t,i)}getDeniedImageSourceBrowser(){if(this._isSupportedBrowserForCalling())return n.BrowserEnvironment.isChrome()?a.Collection.WEB_CHROME_PERMISSIONS:n.BrowserEnvironment.isSafari()?a.Collection.WEB_SAFARI_PERMISSIONS_DENIED:a.Collection.WEB_EDGE_PERMISSIONS}getDeniedTextDuringCallBrowser(e){if(!this._isSupportedBrowserForCalling())return;let t;switch(e){case g.PermissionType.Camera:t="AugmentedPermissions.CameraDeficiencyMainDisplayTextEdge",n.BrowserEnvironment.isEngineChromium()?t="AugmentedPermissions.CameraDeficiencyMainDisplayTextChrome":n.BrowserEnvironment.isEngineWebkit()?t="AugmentedPermissions.CameraDeficiencyMainDisplayTextSafari":n.BrowserEnvironment.isEngineGecko()&&(t="AugmentedPermissions.CameraDeficiencyMainDisplayTextFirefox");break;case g.PermissionType.Microphone:t="AugmentedPermissions.MicrophoneDeficiencyMainDisplayTextEdge",n.BrowserEnvironment.isEngineChromium()?t="AugmentedPermissions.MicrophoneDeficiencyMainDisplayTextChrome":n.BrowserEnvironment.isEngineWebkit()?t="AugmentedPermissions.MicrophoneDeficiencyMainDisplayTextSafari":n.BrowserEnvironment.isEngineGecko()&&(t="AugmentedPermissions.MicrophoneDeficiencyMainDisplayTextFirefox");break;case g.PermissionType.MicrophoneAndCamera:t="AugmentedPermissions.MicrophoneAndCameraDeficiencyMainDisplayTextEdge",n.BrowserEnvironment.isEngineChromium()?t="AugmentedPermissions.MicrophoneAndCameraDeficiencyMainDisplayTextChrome":n.BrowserEnvironment.isEngineWebkit()?t="AugmentedPermissions.MicrophoneAndCameraDeficiencyMainDisplayTextSafari":n.BrowserEnvironment.isEngineGecko()&&(t="AugmentedPermissions.MicrophoneAndCameraDeficiencyMainDisplayTextFirefox")}return t?d.getString(t):void 0}_isSupportedBrowserForCalling(){return l.CallingCapabilities.anyCallingSupported()}_getImageResizeMode(){return n.BrowserEnvironment.isSafari()?c.ImageResizeModeEnum.contain:c.ImageResizeModeEnum.cover}_getTitleForEscalation(e){return e===g.PermissionType.Camera?d.getString("AugmentedPermissions.VideoEscalationPromptTitle"):e===g.PermissionType.Microphone?d.getString("AugmentedPermissions.MicEscalationPromptTitle"):""}_showDeniedWebEscalationPromptWithImage(e,t){const i=[{text:d.getString("Global.CancelLabel")}],n=this.getDeniedImageSourceBrowser(),o=this.getDeniedTextDuringCallBrowser(t);if(!n||!o)return;const s={centerImageInAlert:!0,width:420,height:200,source:n};r.default.showCustomAlertWithOptions({rootViewId:e,buttons:i,imageSource:s,accessibilityTitle:o,dialogTitle:this._getTitleForEscalation(t),dialogText:o,imageResizeMode:this._getImageResizeMode()})}_showDeniedPrompt(e,t,i,n){const o=this.getPromptTitle(e),a=t?this._getDeniedPromptWithSettings(e):this.getDeniedPrompt(e);let c=[{text:d.getString("Global.CancelLabel")}];(t&&l.UICapabilities.systemSettingsDeepLinkSupported()||t&&n)&&c.push({text:d.getString("CapturePermissions.AlertSettingsButtonTitle"),onPress:n||(()=>{s.Linking.openUrl("app-settings:")})}),r.default.showWithOptions({title:o,dialogAccessibilityTitle:a||o,message:a,buttons:c,rootViewId:i,useFocussedWindowFallback:!0})}showLimitedCameraRollPrompt(e,t){const i=d.getString("CapturePermissions.PermissionCameraRollLimitedTitle"),n=d.getString("CapturePermissions.PermissionCameraRollLimitedText");let s=[{text:d.getString("CapturePermissions.PermissionCameraRollLimitedChangeButton"),onPress:t||(()=>{o.default.cameraRollLimitedCheck()})}];s.push({text:d.getString("CapturePermissions.PermissionCameraRollLimitedKeepButton")}),r.default.showWithOptions({title:i,dialogAccessibilityTitle:n||i,message:n,buttons:s,rootViewId:e,useFocussedWindowFallback:!0})}}},72997:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WidthBreakPoints=void 0;const n=i(78262);t.WidthBreakPoints={minDesktop:450,tiny:760,small:896,medium:1280};t.default=class{static responsiveWidthForSize(e){return e<=t.WidthBreakPoints.minDesktop?n.ResponsiveWidth.MinDesktop:e<=t.WidthBreakPoints.tiny?n.ResponsiveWidth.Tiny:e<=t.WidthBreakPoints.small?n.ResponsiveWidth.Small:e<=t.WidthBreakPoints.medium?n.ResponsiveWidth.Medium:n.ResponsiveWidth.Large}}},50795:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationDuration=void 0;const n=i(98356);t.AnimationDuration=n.Common.Duration;const o=n.timing;t.default=o},78780:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SXAnimations=void 0;const n=i(2840),o={key:"default",parameters:{color:"#000000",rgbColor:"[0, 0, 0, 0]"}};class s{get SPLASH_LOADER(){return{key:"SPLASH_LOADER",source:n.default.SPLASH_LOADER,intrinsicSize:{width:375,height:375}}}get SPLASH_LOADER_NEXT(){return{key:"SPLASH_LOADER_NEXT",source:n.default.SPLASH_LOADER_NEXT,intrinsicSize:{width:160,height:160}}}get CAPTURE_PHOTO(){return{key:"CAPTURE_PHOTO",source:n.default.CAPTURE_PHOTO,intrinsicSize:{width:117,height:117}}}get CAPTURE_RECORD_PROGRESS_60_SECONDS(){return{key:"CAPTURE_RECORD_PROGRESS_60_SECONDS",source:n.default.CAPTURE_RECORD_PROGRESS_60_SECONDS,intrinsicSize:{width:80,height:80}}}get CIRCLE_SPINNER(){return{key:"CIRCLE_SPINNER",source:n.default.CIRCLE_SPINNER,defaultTemplateContext:o,intrinsicSize:{width:200,height:200}}}get CIRCLE_SPINNER_80(){return{key:"CIRCLE_SPINNER_80",source:n.default.CIRCLE_SPINNER_80,defaultTemplateContext:o,intrinsicSize:{width:80,height:80}}}get CIRCLE_SPINNER_40(){return{key:"CIRCLE_SPINNER_40",source:n.default.CIRCLE_SPINNER_40,defaultTemplateContext:o,intrinsicSize:{width:40,height:40}}}get CIRCLE_STEP0(){return{key:"CIRCLE_STEP0",source:n.default.CIRCLE_STEP0,defaultTemplateContext:o,intrinsicSize:{width:200,height:200}}}get CIRCLE_STEP1(){return{key:"CIRCLE_STEP1",source:n.default.CIRCLE_STEP1,defaultTemplateContext:o,intrinsicSize:{width:200,height:200}}}get CIRCLE_STEP2(){return{key:"CIRCLE_STEP2",source:n.default.CIRCLE_STEP2,defaultTemplateContext:o,intrinsicSize:{width:200,height:200}}}get CIRCLE_STEP3(){return{key:"CIRCLE_STEP3",source:n.default.CIRCLE_STEP3,defaultTemplateContext:o,intrinsicSize:{width:200,height:200}}}get CIRCLE_STEP4(){return{key:"CIRCLE_STEP4",source:n.default.CIRCLE_STEP4,defaultTemplateContext:o,intrinsicSize:{width:200,height:200}}}get PAGINATION(){return{key:"PAGINATION",source:n.default.PAGINATION,intrinsicSize:{width:20,height:20}}}get ONBOARDING_SYNC_ADDRESSBOOK(){return{key:"ONBOARDING_SYNC_ADDRESSBOOK",source:n.default.ONBOARDING_SYNC_ADDRESSBOOK,intrinsicSize:{width:375,height:300}}}get CELEBRATION_ICBC(){return{key:"CELEBRATION_ICBC",source:n.default.CELEBRATION_ICBC,intrinsicSize:{width:2500,height:2e3}}}get CELEBRATION_ICBC_PORTRAIT(){return{key:"CELEBRATION_ICBC_PORTRAIT",source:n.default.CELEBRATION_ICBC_PORTRAIT,intrinsicSize:{width:750,height:1334}}}get BEER(){return{key:"BEER",source:n.default.BEER,intrinsicSize:{width:2500,height:2e3}}}get CLAP(){return{key:"CLAP",source:n.default.CLAP,intrinsicSize:{width:2500,height:2e3}}}get DROPTHEMIC(){return{key:"DROPTHEMIC",source:n.default.DROPTHEMIC,intrinsicSize:{width:2500,height:2e3}}}get FACEPALM(){return{key:"FACEPALM",source:n.default.FACEPALM,intrinsicSize:{width:2500,height:2e3}}}get FIRE(){return{key:"FIRE",source:n.default.FIRE,intrinsicSize:{width:2500,height:2e3}}}get HEART(){return{key:"HEART",source:n.default.HEART,intrinsicSize:{width:2500,height:2e3}}}get HIGHFIVE(){return{key:"HIGHFIVE",source:n.default.HIGHFIVE,intrinsicSize:{width:2500,height:2e3}}}get LAUGH(){return{key:"LAUGH",source:n.default.LAUGH,intrinsicSize:{width:2500,height:2e3}}}get MISTLETOE(){return{key:"MISTLETOE",source:n.default.MISTLETOE,intrinsicSize:{width:2500,height:2e3}}}get PENGUIN(){return{key:"PENGUIN",source:n.default.PENGUIN,intrinsicSize:{width:2500,height:2e3}}}get RUDOLFSURPRISE(){return{key:"RUDOLFSURPRISE",source:n.default.RUDOLFSURPRISE,intrinsicSize:{width:2500,height:2e3}}}get SAD(){return{key:"SAD",source:n.default.SAD,intrinsicSize:{width:2500,height:2e3}}}get SARCASTIC(){return{key:"SARCASTIC",source:n.default.SARCASTIC,intrinsicSize:{width:2500,height:2e3}}}get SNOWFLAKE(){return{key:"SNOWFLAKE",source:n.default.SNOWFLAKE,intrinsicSize:{width:2500,height:2e3}}}get SURPRISED(){return{key:"SURPRISED",source:n.default.SURPRISED,intrinsicSize:{width:2500,height:2e3}}}get XMASCWL(){return{key:"XMASCWL",source:n.default.XMASCWL,intrinsicSize:{width:2500,height:2e3}}}get XMASYES(){return{key:"XMASYES",source:n.default.XMASYES,intrinsicSize:{width:2500,height:2e3}}}get YES(){return{key:"YES",source:n.default.YES,intrinsicSize:{width:2500,height:2e3}}}}t.SXAnimations=s,t.default=new s},89667:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isAgnosticGradientColor=t.getButtonsAgnosticGradientFillColor=void 0;const n=i(81760);t.getButtonsAgnosticGradientFillColor=function(e){return n.ButtonAgnosticGradientFillColorsMappings[e]},t.isAgnosticGradientColor=function(e){return void 0!==e&&void 0!==n.AgnosticGradientFillButtonColors[e]}},11010:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(35438),s=i(98278),a=i(15877),r=i(81760),l=i(212),c=i(63841),d=i(18037),u=i(53374);class g{static _textStyle(e,t){return g._createTextStyle(e,t)}static _createTextStyle(e,t){let i=[e.toString(),"|",t.toString()].join(""),o=g.textStylesCache[i];if(!o){const s=l.default.themeStylesForTheme(t);let a,r;switch(e){case c.TextStyleCategories.Subtitle:a=g.fontStyle.subtitle,r=s.secondaryTextColorStyle;break;case c.TextStyleCategories.Caption:a=g.fontStyle.caption,r=s.secondaryTextColorStyle;break;case c.TextStyleCategories.SelectedCaption:a=g.fontStyle.captionSelected,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.CaptionSmall:a=g.fontStyle.captionSmall,r=s.secondaryTextColorStyle;break;case c.TextStyleCategories.SelectedCaptionSmall:a=g.fontStyle.captionSmallBold,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.RowTitle:a=g.fontStyle.rowTitle,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.Body:a=g.fontStyle.body,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.BodyBold:a=g.fontStyle.bodyBold,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.BodyBig:a=g.fontStyle.bodyBigDeprecated,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.BodyBigBold:a=g.fontStyle.bodyBigBoldDeprecated,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.BodySmall:a=g.fontStyle.bodySmallDeprecated,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.BodySmallBold:a=g.fontStyle.bodySmallBoldDeprecated,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.MessagingHeader:a=g.fontStyle.messagingHeader,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.MessagingHeaderSmall:a=g.fontStyle.messagingHeaderSmall,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.CardTitle:a=g.fontStyle.cardTitle,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.CardTitleSmall:a=g.fontStyle.cardTitleSmall,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.PanelHeader:a=g.fontStyle.panelHeader,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.PanelHeaderLandscape:a=g.fontStyle.panelHeaderLandscape,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.CallHeaderSubtitleV2:a=g.fontStyle.callHeaderSubtitleV2,r=s.secondaryTextColorStyle;break;case c.TextStyleCategories.ModernizeChatSmallHeaderTitle:a=g.fontStyle.messagingStreamChatHeader,r=s.primaryTextColorStyle;break;case c.TextStyleCategories.ModernizeChatSmallHeaderTitleMobile:a=g.fontStyle.messagingStreamChatHeaderMobile,r=s.primaryTextColorStyle;break;default:u.default.switchStatementExhaustiveChecking(e)}o=n.Styles.combine(a||[],r||[]),g.textStylesCache[i]=o}return o}static rowTitleFontStyle(e){const t=null!=e?e:d.default.colorThemeNoSubscription();return g._textStyle(c.TextStyleCategories.RowTitle,t)}static subtitleFontStyle(e){const t=null!=e?e:d.default.colorThemeNoSubscription();return g._textStyle(c.TextStyleCategories.Subtitle,t)}static callHeaderSubtitleFontStyle(e,t){const i=null!=e?e:d.default.colorThemeNoSubscription(),n=t?c.TextStyleCategories.CallHeaderSubtitleV2:c.TextStyleCategories.Subtitle;return g._textStyle(n,i)}static captionFontStyle(e){const t=null!=e?e:d.default.colorThemeNoSubscription();return g._textStyle(c.TextStyleCategories.Caption,t)}static selectedCaptionFontStyle(e){const t=null!=e?e:d.default.colorThemeNoSubscription();return g._textStyle(c.TextStyleCategories.SelectedCaption,t)}static captionSmallFontStyle(e){const t=null!=e?e:d.default.colorThemeNoSubscription();return g._textStyle(c.TextStyleCategories.CaptionSmall,t)}static selectedCaptionSmallFontStyle(e){const t=null!=e?e:d.default.colorThemeNoSubscription();return g._textStyle(c.TextStyleCategories.SelectedCaptionSmall,t)}static bodyFontStyle(e,t){const i=null!=e?e:d.default.colorThemeNoSubscription();let n;switch(t){case s.BodyTextSize.BigDeprecated:n=c.TextStyleCategories.BodyBig;break;case s.BodyTextSize.SmallDeprecated:n=c.TextStyleCategories.BodySmall;break;default:n=c.TextStyleCategories.Body}return g._textStyle(n,i)}static bodyBoldFontStyle(e,t){const i=null!=e?e:d.default.colorThemeNoSubscription();let n;switch(t){case s.BodyTextSize.BigDeprecated:n=c.TextStyleCategories.BodyBigBold;break;case s.BodyTextSize.SmallDeprecated:n=c.TextStyleCategories.BodySmallBold;break;default:n=c.TextStyleCategories.BodyBold}return g._textStyle(n,i)}static cardTitleFontStyle(e,t){const i=null!=e?e:d.default.colorThemeNoSubscription();return g._textStyle(t?c.TextStyleCategories.CardTitleSmall:c.TextStyleCategories.CardTitle,i)}static messagingHeaderFontStyle(e,t,i,n){const o=null!=i?i:d.default.colorThemeNoSubscription();return e?g.rowTitleFontStyle(o):g._textStyle(t||n?c.TextStyleCategories.MessagingHeaderSmall:c.TextStyleCategories.MessagingHeader,o)}static panelHeaderFontStyle(e=!1,t){const i=null!=t?t:d.default.colorThemeNoSubscription();return g._textStyle(e?c.TextStyleCategories.PanelHeaderLandscape:c.TextStyleCategories.PanelHeader,i)}static modernizeSmallPanelHeaderFontStyle(e){const t=null!=e?e:d.default.colorThemeNoSubscription();return g._textStyle(c.TextStyleCategories.ModernizeChatSmallHeaderTitle,t)}static modernizeSmallHeaderMobileFontStyle(e){const t=null!=e?e:d.default.colorThemeNoSubscription();return g._textStyle(c.TextStyleCategories.ModernizeChatSmallHeaderTitleMobile,t)}}t.default=g,g.textStylesCache={},g.fontSize={size13Deprecated:13,size14:14,size15:15,size16:16,size17:17,size18:18,size20:20,size32:32},g.controlFontSize={h0:50,h1:42,h2:40,h3:36,h4:26,h5:22,smallBadge:10,tinyBadge:8,caption:12,captionSmall:10,captionTiny:9,subtitle:12,body:15,bodyBigDeprecated:16,bodySmallDeprecated:14,button:15,smallButton:12,largeButton:18,rowTitle:15,modernizeRowTitle:17,actionButtonLabel:11,tabHeader:15,tabHeaderSmall:13,messagingHeaderSmall:20,panelHeader:18,panelHeaderTiny:15,panelHeaderLarge:24,headerSizeSmall:24,cardTitle:18,cardTitleSmall:15,searchInput:14,searchInputMobile:15,searchFiltersTab:14,dialpadNumber:32,dialpadNumberLarge:36,adaptiveCardTiny:10,adaptiveCardSmall:11,adaptiveCardDefault:12,adaptiveCardMedium:14,adaptiveCardLarge:16,adaptiveCardMediumLarge:20,adaptiveCardExtraLarge:24,filterText:13,captureMarkupText:22,dialpadInput:22,callHeaderTitleV2:12,callHeaderSubtitleV2:12,messageComposerMobile:16,messageComposerDesktop:14,messageStreamItemMobile:17,messageStreamItemDesktop:14,messageStreamQuoteAttributeMobile:14,messageStreamQuoteAttributeDesktop:12,webFooter:11,screenShareZoomControlActiveItem:14,screenShareZoomControlNonActiveItem:10},g.tabUnderlineHeight=2,g.messageTextLineHeight=22,g.maxContentSizeMultiplier=1.353,g.fontFamily={monospace:o.Collection.MONOSPACE,uidDisplaySemibold:o.Collection.DISPLAY_SEMIBOLD,uidDisplayRegular:o.Collection.DISPLAY_REGULAR,uidDisplayBold:o.Collection.DISPLAY_BOLD},g._fontFamily={uidDisplayLight:o.Collection.DISPLAY_LIGHT,uidDisplaySemibold:o.Collection.DISPLAY_SEMIBOLD},g.font={uiDisplayRegular:{fontFamily:g.fontFamily.uidDisplayRegular,fontWeight:s.FontWeight.regular},uiDisplaySemibold:{fontFamily:g._fontFamily.uidDisplaySemibold,fontWeight:s.FontWeight.regular},uiDisplayBold:{fontFamily:g.fontFamily.uidDisplayBold,fontWeight:s.FontWeight.regular}},g._fontNext={uiDisplayLight:{fontFamily:g._fontFamily.uidDisplayLight}},g.fontStyle=(0,a.lazyProperties)({h0:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.h0,color:r.Color.gray400}),h1:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.h1,color:r.Color.gray400}),h2:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.h2,color:r.Color.gray400}),h3:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.h3,color:r.Color.gray400}),h4:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.h4,color:r.Color.gray400}),h5:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.h5}),body:()=>n.Styles.createTextStyle({font:g.font.uiDisplayRegular,fontSize:g.controlFontSize.body}),bodyBold:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.body}),bodyBigDeprecated:()=>n.Styles.createTextStyle({font:g.font.uiDisplayRegular,fontSize:g.controlFontSize.bodyBigDeprecated}),bodyBigBoldDeprecated:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.bodyBigDeprecated}),bodySmallDeprecated:()=>n.Styles.createTextStyle({font:g.font.uiDisplayRegular,fontSize:g.controlFontSize.bodySmallDeprecated}),bodySmallBoldDeprecated:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.bodySmallDeprecated}),caption:()=>n.Styles.createTextStyle({font:g.font.uiDisplayRegular,fontSize:g.controlFontSize.caption,color:r.Color.gray300}),captionSelected:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.caption}),captionSmall:()=>n.Styles.createTextStyle({font:g.font.uiDisplayRegular,fontSize:g.controlFontSize.captionSmall,color:r.Color.gray300}),captionSmallBold:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.captionSmall}),primaryButtonLarge:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.largeButton,textAlign:"center"}),secondaryButton:()=>n.Styles.createTextStyle({font:g.font.uiDisplayRegular,fontSize:g.controlFontSize.largeButton}),tertiaryButton:()=>n.Styles.createTextStyle({font:g.font.uiDisplayRegular,fontSize:g.controlFontSize.smallButton}),rowTitle:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.rowTitle,color:r.Color.gray400}),modernizeRowTitle:()=>n.Styles.createTextStyle({font:g.font.uiDisplayRegular,fontSize:g.controlFontSize.modernizeRowTitle,lineHeight:22}),subtitle:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.subtitle,color:r.Color.gray300}),callHeaderTitleV2:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.callHeaderTitleV2}),callHeaderSubtitleV2:()=>n.Styles.createTextStyle({font:g.font.uiDisplayRegular,fontSize:g.controlFontSize.callHeaderTitleV2,color:r.Color.gray100}),messagingHeader:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.panelHeaderLarge}),messagingHeaderSmall:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.messagingHeaderSmall}),messagingStreamChatSubHeader:()=>n.Styles.createTextStyle({font:g.font.uiDisplayRegular,fontSize:g.fontSize.size14,lineHeight:18}),messagingStreamChatSubHeaderMobile:()=>n.Styles.createTextStyle({font:g.font.uiDisplayRegular,fontSize:g.fontSize.size15,lineHeight:20}),panelHeader:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.panelHeader}),panelHeaderLandscape:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.panelHeaderTiny}),cardTitle:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.cardTitle,color:r.Color.gray400}),cardTitleSmall:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.cardTitleSmall,color:r.Color.gray400}),cardAction:()=>n.Styles.createTextStyle({font:g.font.uiDisplayBold,fontSize:g.controlFontSize.button}),semibold14:()=>n.Styles.createTextStyle({font:g.font.uiDisplaySemibold,fontSize:g.fontSize.size14}),messagingStreamChatHeader:()=>n.Styles.createTextStyle({font:g.font.uiDisplaySemibold,fontSize:g.fontSize.size16,lineHeight:20}),messagingStreamChatHeaderMobile:()=>n.Styles.createTextStyle({font:g.font.uiDisplaySemibold,fontSize:g.fontSize.size17,lineHeight:22})}),g.fontStyleNext=(0,a.lazyProperties)({h0Light:()=>n.Styles.createTextStyle({font:g._fontNext.uiDisplayLight,fontSize:g.controlFontSize.h0,color:r.Color.gray400}),h1Light:()=>n.Styles.createTextStyle({font:g._fontNext.uiDisplayLight,fontSize:g.controlFontSize.h1,color:r.Color.gray400}),h2Light:()=>n.Styles.createTextStyle({font:g._fontNext.uiDisplayLight,fontSize:g.controlFontSize.h2,color:r.Color.gray400}),h3Light:()=>n.Styles.createTextStyle({font:g._fontNext.uiDisplayLight,fontSize:g.controlFontSize.h3,color:r.Color.gray400}),h4Light:()=>n.Styles.createTextStyle({font:g._fontNext.uiDisplayLight,fontSize:g.controlFontSize.h4,color:r.Color.gray400}),h5Light:()=>n.Styles.createTextStyle({font:g._fontNext.uiDisplayLight,fontSize:g.controlFontSize.h5})})},34528:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.okIcon=t.getQuoteSymbol=t.prevChevron=t.nextChevron=t.navBackIcon=t.navForwardIcon=t.forwardIcon=t.backIcon=t.closeIcon=t.moreIcon=t.shareIcon=void 0;const n=i(96486),o=i(46096),s=i(33754),a=i(40363),r=i(11828);function l(){return a.default.isRTL()?r.SkypeIcon.Right:r.SkypeIcon.Left}t.shareIcon=function(){switch(a.default.getPlatformType()){case o.PlatformType.iOS:case o.PlatformType.OSX:return r.SkypeIcon.ShareiOS;case o.PlatformType.Android:return r.SkypeIcon.ShareAndroid;default:return r.SkypeIcon.Share}},t.moreIcon=function(){return a.default.getPlatformType()===o.PlatformType.Android?r.SkypeIcon.MoreVertical:r.SkypeIcon.More},t.closeIcon=function(){return a.default.getPlatformType()===o.PlatformType.Android?l():r.SkypeIcon.ClosePanel},t.backIcon=l,t.forwardIcon=function(){return a.default.isRTL()?r.SkypeIcon.Left:r.SkypeIcon.Right},t.navForwardIcon=function(e=!1){return e?a.default.isRTL()?r.SkypeIcon.NavigationBackCentered:r.SkypeIcon.NavigationForwardCentered:a.default.isRTL()?r.SkypeIcon.NavigationBack:r.SkypeIcon.NavigationForward},t.navBackIcon=function(e=!1){return e?a.default.isRTL()?r.SkypeIcon.NavigationForwardCentered:r.SkypeIcon.NavigationBackCentered:a.default.isRTL()?r.SkypeIcon.NavigationForward:r.SkypeIcon.NavigationBack},t.nextChevron=function(){return a.default.isRTL()?r.SkypeIcon.LeftChevron:r.SkypeIcon.RightChevron},t.prevChevron=function(){return a.default.isRTL()?r.SkypeIcon.RightChevron:r.SkypeIcon.LeftChevron},t.getQuoteSymbol=function(e){return e?r.SkypeIcon.Reply:n.includes(["ar-SA","bg-BG","cs-CZ","da-DK","de-DE","et-EE","fi-FI","he-IL","hu-HU","nb-NO","pl-PL","ro-RO","sk-SK","sr-Latn-RS","sv-SE","uk-UA"],s.getLocale())?r.SkypeIcon.QuoteClose:r.SkypeIcon.QuoteOpen},t.okIcon=function(){return r.SkypeIcon.Ok}},212:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(15877),s=i(49603),a=i(81760),r=i(63841);class l{static _buildTheme(e){const t={primaryTextColorStyle:()=>n.Styles.createTextStyle({color:e.primaryTextColor}),headerTextColorStyle:()=>n.Styles.createTextStyle({color:e.headerTextColor}),secondaryTextColorStyle:()=>n.Styles.createTextStyle({color:e.secondaryTextColor}),tertiaryTextColorStyle:()=>n.Styles.createTextStyle({color:e.tertiaryTextColor}),textHoverColorStyle:()=>n.Styles.createTextStyle({color:e.textHoverColor}),buttonTextColorStyle:()=>n.Styles.createTextStyle({color:e.buttonTextColor}),primaryViewColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.primaryTextColor}),secondaryViewColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.secondaryTextColor}),dividerColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.dividerColor}),dividerForButtonsColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.primaryTextColor}),dividerBorderColorStyle:()=>n.Styles.createViewStyle({borderColor:e.dividerColor}),headerShadowColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.headerShadowColor}),headerShadowBorderColorStyle:()=>n.Styles.createViewStyle({borderColor:e.headerShadowColor}),bubbleColorSelfStyle:()=>n.Styles.createViewStyle({backgroundColor:e.bubbleColorSelf}),bubbleColorSelfStyleModernize:()=>n.Styles.createViewStyle({backgroundColor:e.bubbleColorSelfModernize}),bubbleTextColorSelfStyle:()=>n.Styles.createTextStyle({color:e.bubbleTextColorSelf}),primaryIconColorStyle:()=>n.Styles.createTextStyle({color:e.primaryIconColor}),headerIconColorStyle:()=>n.Styles.createTextStyle({color:e.headerIconColor}),iconHoverColorStyle:()=>n.Styles.createTextStyle({color:e.iconHoverColor}),destructiveTextColorStyle:()=>n.Styles.createTextStyle({color:e.destructiveTextColor}),destructiveTextHoverColorStyle:()=>n.Styles.createTextStyle({color:e.destructiveTextHoverColor}),disclosureArrowColorStyle:()=>n.Styles.createTextStyle({color:e.disclosureArrowColor}),rowHighlightViewStyle:()=>n.Styles.createViewStyle({backgroundColor:e.rowHighlightColor}),rowHoverViewStyle:()=>n.Styles.createViewStyle({backgroundColor:e.rowHoverColor}),secondaryRowHighlightViewStyle:()=>n.Styles.createViewStyle({backgroundColor:e.secondaryRowHighlightColor}),secondaryRowHoverViewStyle:()=>n.Styles.createViewStyle({backgroundColor:e.secondaryRowHoverColor}),secondaryDividerBorderStyle:()=>n.Styles.createViewStyle({borderColor:e.secondaryDividerColor}),searchBoxColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.searchBoxColor}),searchPlaceholderTextColorStyle:()=>n.Styles.createTextStyle({color:e.searchPlaceholderTextColor}),searchHeaderColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.searchHeaderColor}),searchBorderModernizeColorStyle:()=>n.Styles.createViewStyle({borderColor:e.dividerColor,borderWidth:1}),searchModernizeColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.searchModernizeColor}),pesPickerCategoryColorStyle:()=>n.Styles.createTextStyle({color:e.pesPickerCategoryColor}),primaryBackgroundColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.primaryBackgroundColor}),primaryBackgroundColorTextStyle:()=>n.Styles.createTextStyle({color:e.primaryBackgroundColor}),primaryBorderColorStyle:()=>n.Styles.createViewStyle({borderColor:e.primaryBackgroundColor}),secondaryBackgroundColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.secondaryBackgroundColor}),disabledTextColorStyle:()=>n.Styles.createTextStyle({color:e.disabledTextColor}),messageStreamBackgroundColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.messageStreamBackgroundColor}),tabIndicatorColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.tabIndicatorColor}),popoverBackgroundColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.popoverBackgroundColor}),pillBorderColorStyle:()=>n.Styles.createViewStyle({borderColor:e.pillBorderColor}),toggleBorderColorStyle:()=>n.Styles.createViewStyle({borderColor:e.toggleBorderColor}),buttonBackgroundColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.buttonBackgroundColor}),buttonBackgroundHoverColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.buttonBackgroundHoverColor}),viewBorderStyle:()=>n.Styles.createViewStyle({borderColor:e.dividerColor,borderWidth:1}),cardColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.cardColor}),updateCard:()=>n.Styles.createViewStyle({backgroundColor:e.updateCardBackgroundColor}),updateCardHover:()=>n.Styles.createViewStyle({backgroundColor:e.updateCardBackgroundHoverColor}),mandatoryUpdateCard:()=>n.Styles.createViewStyle({backgroundColor:e.mandatoryUpdateCardBackgroundColor}),mandatoryUpdateCardHover:()=>n.Styles.createViewStyle({backgroundColor:e.mandatoryUpdateCardBackgroundHoverColor}),sliderHandleColorStyle:()=>n.Styles.createViewStyle({backgroundColor:e.sliderHandleColor}),engagementBannerBackgroundStyle:()=>n.Styles.createViewStyle({backgroundColor:e.engagementBannersContentBackround,borderColor:e.engagementBannersContentBorderColor}),engagementBannerTextStyle:()=>n.Styles.createTextStyle({color:e.engagementBannerTextColor})};return e.bubbleColorOther&&(t.bubbleColorOtherStyle=()=>n.Styles.createViewStyle({backgroundColor:e.bubbleColorOther})),e.bubbleTextColorOther&&(t.bubbleTextColorOtherStyle=()=>n.Styles.createTextStyle({color:e.bubbleTextColorOther})),e.bubbleColorBot&&(t.bubbleColorBotStyle=()=>n.Styles.createViewStyle({backgroundColor:e.bubbleColorBot})),e.bubbleTextColorBot&&(t.bubbleTextColorBotStyle=()=>n.Styles.createTextStyle({color:e.bubbleTextColorBot})),e.primaryBadgeColor&&(t.primaryBadgeColorStyle=()=>n.Styles.createViewStyle({backgroundColor:e.primaryBadgeColor})),e.secondaryBadgeColor&&(t.secondaryBadgeColorStyle=()=>n.Styles.createViewStyle({backgroundColor:e.secondaryBadgeColor})),e.primaryBadgeTextColor&&(t.primaryBadgeTextColorStyle=()=>n.Styles.createTextStyle({color:e.primaryBadgeTextColor})),e.notificationColor&&(t.notificationColorStyle=()=>n.Styles.createViewStyle({backgroundColor:e.notificationColor})),e.linkTextColor&&(t.linkTextColorStyle=()=>n.Styles.createTextStyle({color:e.linkTextColor})),e.messageComposerBackgroundColor&&(t.messageComposerBackgroundStyle=()=>n.Styles.createViewStyle({backgroundColor:e.messageComposerBackgroundColor})),e.bubbleReactionColorOther&&(t.bubbleReactionColorOtherStyle=()=>n.Styles.createTextStyle({color:e.bubbleReactionColorOther})),(0,o.lazyProperties)(t)}static buildHighContrastThemeColors(e){return{useCompactLayout:!0,useInitialsForConversationIcon:!0,defaultStatusBarBackgroundColor:e.windowColor,defaultStatusBarTheme:s.BarStyleTheme.Default,primaryBackgroundColor:e.windowColor,secondaryBackgroundColor:e.windowColor,uwpMenuBarColor:e.windowColor,webFooterColor:e.windowColor,primaryTextColor:e.textColor,headerTextColor:e.textColor,secondaryTextColor:e.textColor,tertiaryTextColor:e.textColor,textHoverColor:e.highlightTextColor,buttonTextColor:e.buttonTextColor,dividerColor:e.textColor,headerShadowColor:e.textColor,bubbleColorSelf:e.windowColor,bubbleColorSelfModernize:e.windowColor,bubbleTextColorSelf:e.textColor,bubbleColorBot:e.windowColor,bubbleTextColorBot:e.textColor,messageComposerBackgroundColor:e.windowColor,primaryIconColor:e.buttonTextColor,headerIconColor:e.buttonTextColor,iconDisabledColor:e.grayTextColor,iconHoverColor:e.highlightTextColor,destructiveTextColor:e.textColor,destructiveTextHoverColor:e.highlightTextColor,disclosureArrowColor:e.textColor,rowHighlightColor:e.highlightColor,rowHoverColor:e.highlightColor,secondaryRowHighlightColor:e.highlightColor,secondaryRowHoverColor:e.highlightColor,secondaryDividerColor:e.textColor,searchBoxColor:e.windowColor,searchPlaceholderTextColor:e.textColor,searchHeaderColor:e.windowColor,searchModernizeColor:e.textColor,disabledTextColor:e.grayTextColor,messageStreamBackgroundColor:e.windowColor,tabIndicatorColor:e.textColor,popoverBackgroundColor:e.windowColor,pillBorderColor:e.buttonFaceColor,pesPickerCategoryColor:e.textColor,toggleBorderColor:e.buttonFaceColor,buttonBackgroundColor:e.buttonFaceColor,buttonBackgroundHoverColor:e.highlightColor,cardColor:e.windowColor,secondaryBadgeColor:e.windowColor,updateCardBackgroundColor:e.windowColor,updateCardBackgroundHoverColor:e.highlightColor,mandatoryUpdateCardBackgroundColor:e.windowColor,mandatoryUpdateCardBackgroundHoverColor:e.highlightColor,sliderHandleColor:e.buttonFaceColor,adaptiveCardBackgroundColor:e.windowColor,adaptiveCardBorderColor:e.textColor,adaptiveCardButtonBackgroundColor:e.buttonFaceColor,adaptiveCardButtonBackgroundHoverColor:e.highlightColor,adaptiveCardButtonBackgroundExpandedColor:e.windowColor,adaptiveCardDefaultTextColor:e.textColor,adaptiveCardDarkTextColor:e.textColor,adaptiveCardLightTextColor:e.textColor,adaptiveCardInputUnselectedBorderColor:e.textColor,upgraderButtonBackgroundColor:e.buttonFaceColor,coloredBackgroundTextColor:e.textColor,subtleIconOnThemedBackground:e.grayTextColor}}static themeColorsForTheme(e){switch(e){case r.Theme.Accessible:return l._themeColors.accessible;case r.Theme.Mono:return l._themeColors.mono;case r.Theme.AccessibleDark:return l._themeColors.accessibleDarkV2;case r.Theme.ColorfulDark:return l._themeColors.colorfulDark;case r.Theme.MonoDark:return l._themeColors.monoDark;case r.Theme.ClassicDeprecated:case r.Theme.Delphi:return l._themeColors.delphi;case r.Theme.ClassicDarkDeprecated:case r.Theme.DelphiDark:return l._themeColors.delphiDark;case r.Theme.Colorful:default:return l._themeColors.default}}static themeStylesForTheme(e){switch(e){case r.Theme.Accessible:return l._themeStyles.accessible;case r.Theme.Mono:return l._themeStyles.mono;case r.Theme.AccessibleDark:return l._themeStyles.accessibleDark;case r.Theme.ColorfulDark:return l._themeStyles.colorfulDark;case r.Theme.MonoDark:return l._themeStyles.monoDark;case r.Theme.ClassicDeprecated:case r.Theme.Delphi:return l._themeStyles.delphi;case r.Theme.ClassicDarkDeprecated:case r.Theme.DelphiDark:return l._themeStyles.delphiDark;case r.Theme.Colorful:default:return l._themeStyles.default}}static _buildThemeStyles(){return(0,o.lazyProperties)({default:()=>l._buildTheme(l._themeColors.default),mono:()=>l._buildTheme(l._themeColors.mono),accessible:()=>l._buildTheme(l._themeColors.accessible),accessibleDark:()=>l._buildTheme(l._themeColors.accessibleDarkV2),colorfulDark:()=>l._buildTheme(l._themeColors.colorfulDark),monoDark:()=>l._buildTheme(l._themeColors.monoDark),delphi:()=>l._buildTheme(l._themeColors.delphi),delphiDark:()=>l._buildTheme(l._themeColors.delphiDark)})}}t.default=l,l._lightThemeCommon={updateCardBackgroundColor:a.Color.desktopUpgradeNotificationGreen,updateCardBackgroundHoverColor:a.Color.desktopUpgradeNotificationGreenHover,mandatoryUpdateCardBackgroundColor:a.Color.desktopMandatoryUpgradeNotificationRed,mandatoryUpdateCardBackgroundHoverColor:a.Color.desktopMandatoryUpgradeNotificationRedHover,adaptiveCardBackgroundColor:a.Color.white,adaptiveCardBorderColor:a.Color.gray100,adaptiveCardButtonBackgroundColor:a.Color.gray50,adaptiveCardButtonBackgroundHoverColor:a.Color.gray100,adaptiveCardButtonBackgroundExpandedColor:a.Color.gray200,adaptiveCardDefaultTextColor:a.Color.gray400,adaptiveCardDarkTextColor:a.Color.black,adaptiveCardLightTextColor:a.Color.gray300,adaptiveCardInputUnselectedBorderColor:a.Color.gray300,coloredBackgroundTextColor:a.Color.white,subtleIconOnThemedBackground:a.Color.gray400Overlay50},l._themeColorsDefault=Object.assign({useCompactLayout:!0,useInitialsForConversationIcon:!0,defaultStatusBarBackgroundColor:a.Color.white,defaultStatusBarTheme:s.BarStyleTheme.Dark,primaryBackgroundColor:a.Color.white,secondaryBackgroundColor:a.Color.gray50,uwpMenuBarColor:a.Color.gray100,webFooterColor:a.Color.gray400,primaryTextColor:a.Color.gray400,headerTextColor:a.Color.gray400,secondaryTextColor:a.Color.gray300,tertiaryTextColor:a.Color.gray200,textHoverColor:a.Color.gray300,buttonTextColor:a.Color.gray400,dividerColor:a.Color.gray200,headerShadowColor:a.Color.shadow,bubbleColorSelf:a.Color.gray50,bubbleColorSelfModernize:a.Color.gray50,bubbleTextColorSelf:a.Color.gray400,bubbleColorBot:a.Color.gray50,bubbleTextColorBot:a.Color.gray400,messageComposerBackgroundColor:a.Color.gray50,primaryIconColor:a.Color.gray400,pesPickerCategoryColor:a.Color.gray300,headerIconColor:a.Color.gray400,iconDisabledColor:a.Color.gray300,iconHoverColor:a.Color.gray400Overlay70,destructiveTextColor:a.Color.red,destructiveTextHoverColor:a.Color.pink,disclosureArrowColor:a.Color.gray200,rowHighlightColor:a.Color.gray50,rowHoverColor:a.Color.gray50Overlay50,secondaryRowHighlightColor:a.Color.white,secondaryRowHoverColor:a.Color.leftNavRowHoverColor,secondaryDividerColor:a.Color.black,searchBoxColor:a.Color.gray50,searchPlaceholderTextColor:a.Color.gray300,searchHeaderColor:a.Color.gray50,searchModernizeColor:a.Color.gray50,disabledTextColor:a.Color.gray300,messageStreamBackgroundColor:a.Color.white,tabIndicatorColor:a.Color.black,popoverBackgroundColor:a.Color.white,pillBorderColor:a.Color.gray100,toggleBorderColor:a.Color.gray200,buttonBackgroundColor:a.Color.gray50,buttonBackgroundHoverColor:a.Color.gray100,cardColor:a.Color.gray50,secondaryBadgeColor:a.Color.gray300,sliderHandleColor:a.Color.gray200,upgraderButtonBackgroundColor:a.Color.blueLight,engagementBannersContentBackround:a.Color.gray50Overlay50,engagementBannersContentBorderColor:a.Color.transparent,engagementBannerTextColor:a.Color.gray500},l._lightThemeCommon),l._darkThemeColorsDefault={useCompactLayout:!0,useInitialsForConversationIcon:!0,defaultStatusBarBackgroundColor:a.Color.darkThemeBackground,defaultStatusBarTheme:s.BarStyleTheme.Light,primaryBackgroundColor:a.Color.darkThemeBackground,secondaryBackgroundColor:a.Color.darkThemeSecondaryBackground,uwpMenuBarColor:a.Color.black,webFooterColor:a.Color.gray400,headerTextColor:a.Color.white,primaryTextColor:a.Color.gray100,secondaryTextColor:a.Color.darkThemeSecondaryTextColor,tertiaryTextColor:a.Color.gray300,textHoverColor:a.Color.gray200,buttonTextColor:a.Color.gray100,dividerColor:a.Color.gray400,headerShadowColor:a.Color.gray400,bubbleColorSelf:a.Color.gray400,bubbleColorSelfModernize:a.Color.gray400,bubbleTextColorSelf:a.Color.white,bubbleColorBot:a.Color.gray400,bubbleTextColorBot:a.Color.white,messageComposerBackgroundColor:a.Color.gray400,primaryIconColor:a.Color.darkThemeSecondaryTextColor,pesPickerCategoryColor:a.Color.darkThemeSecondaryTextColor,headerIconColor:a.Color.white,iconDisabledColor:a.Color.gray300,iconHoverColor:a.Color.gray200Overlay60,destructiveTextColor:a.Color.red,destructiveTextHoverColor:a.Color.pink,disclosureArrowColor:a.Color.gray300,rowHighlightColor:a.Color.gray400,rowHoverColor:a.Color.gray400Overlay50,secondaryRowHighlightColor:a.Color.gray400,secondaryRowHoverColor:a.Color.gray400Overlay50,secondaryDividerColor:a.Color.white,searchBoxColor:a.Color.gray400,searchPlaceholderTextColor:a.Color.darkThemeSecondaryTextColor,searchHeaderColor:a.Color.gray400,searchModernizeColor:a.Color.gray400,disabledTextColor:a.Color.gray300,messageStreamBackgroundColor:a.Color.darkThemeBackground,tabIndicatorColor:a.Color.gray100,popoverBackgroundColor:a.Color.black,pillBorderColor:a.Color.gray300,toggleBorderColor:a.Color.gray300,buttonBackgroundColor:a.Color.gray400,buttonBackgroundHoverColor:a.Color.black,popupBorderColor:a.Color.gray400,primaryBadgeTextColor:a.Color.white,cardColor:a.Color.gray400,secondaryBadgeColor:a.Color.gray300,sliderHandleColor:a.Color.gray300,updateCardBackgroundColor:a.Color.gray400Overlay70,updateCardBackgroundHoverColor:a.Color.gray400Overlay80,mandatoryUpdateCardBackgroundColor:a.Color.gray400Overlay70,mandatoryUpdateCardBackgroundHoverColor:a.Color.gray400Overlay70,adaptiveCardBackgroundColor:a.Color.gray400,adaptiveCardBorderColor:a.Color.adaptiveCardDarkThemeBorder,adaptiveCardButtonBackgroundColor:a.Color.gray400,adaptiveCardButtonBackgroundHoverColor:a.Color.gray400Overlay80,adaptiveCardButtonBackgroundExpandedColor:a.Color.gray400Overlay50,adaptiveCardDefaultTextColor:a.Color.gray200,adaptiveCardDarkTextColor:a.Color.gray300,adaptiveCardLightTextColor:a.Color.white,adaptiveCardInputUnselectedBorderColor:a.Color.gray300,upgraderButtonBackgroundColor:a.Color.blueDark,engagementBannersContentBackround:a.Color.darkMessageComposerContentBackground,engagementBannersContentBorderColor:a.Color.transparent,engagementBannerTextColor:a.Color.classicDarkBubbleTextOther,coloredBackgroundTextColor:a.Color.white,subtleIconOnThemedBackground:a.Color.gray200},l._themeColors={default:l._themeColorsDefault,mono:l._themeColorsDefault,delphi:Object.assign(Object.assign({},l._themeColorsDefault),{bubbleColorOther:a.Color.delphiBubbleColorOther,bubbleTextColorOther:a.Color.delphiBubbleText,bubbleReactionColorOther:a.Color.gray300Overlay80,bubbleColorSelf:a.Color.delphiBubbleColorSelf,bubbleColorSelfModernize:a.Color.delphiBubbleColorSelfModernize,bubbleTextColorSelf:a.Color.delphiBubbleText,bubbleColorBot:a.Color.delphiBubbleColorBot,bubbleTextColorBot:a.Color.delphiBubbleText,secondaryBackgroundColor:a.Color.delphiSecondaryBackgroundColor,secondaryRowHighlightColor:a.Color.delphiSecondaryRowHighlightColor,secondaryRowHoverColor:a.Color.delphiSecondaryRowHoverColor,messageComposerBackgroundColor:a.Color.delphiMessageComposerBackgroundColor,primaryTextColor:a.Color.delphiPrimaryTextColor}),accessible:Object.assign(Object.assign({useCompactLayout:!0,useInitialsForConversationIcon:!0,defaultStatusBarBackgroundColor:a.Color.white,defaultStatusBarTheme:s.BarStyleTheme.Default,primaryBackgroundColor:a.Color.white,secondaryBackgroundColor:a.Color.white,uwpMenuBarColor:a.Color.white,webFooterColor:a.Color.gray400,primaryTextColor:a.Color.gray400,headerTextColor:a.Color.gray400,secondaryTextColor:a.Color.gray400,tertiaryTextColor:a.Color.gray400,textHoverColor:a.Color.gray300,buttonTextColor:a.Color.gray400,dividerColor:a.Color.gray400,headerShadowColor:a.Color.shadow,bubbleColorBot:a.Color.gray50,bubbleTextColorBot:a.Color.gray400,bubbleColorSelf:a.Color.gray50,bubbleColorSelfModernize:a.Color.gray50,bubbleTextColorSelf:a.Color.gray400,bubbleColorOther:a.Color.gray400,messageComposerBackgroundColor:a.Color.gray50,primaryIconColor:a.Color.gray400,headerIconColor:a.Color.gray400,iconDisabledColor:a.Color.gray300,iconHoverColor:a.Color.gray400Overlay70,primaryBadgeColor:a.Color.gray400,pesPickerCategoryColor:a.Color.black,secondaryBadgeColor:a.Color.gray400,primaryBadgeTextColor:a.Color.white,destructiveTextColor:a.Color.gray400,destructiveTextHoverColor:a.Color.gray300,disclosureArrowColor:a.Color.gray400,secondaryDividerColor:a.Color.black,searchBoxColor:a.Color.gray50,searchPlaceholderTextColor:a.Color.gray400,searchHeaderColor:a.Color.gray100,searchModernizeColor:a.Color.white,disabledTextColor:a.Color.gray300,messageStreamBackgroundColor:a.Color.white,tabIndicatorColor:a.Color.black,popoverBackgroundColor:a.Color.white,notificationColor:a.Color.black,pillBorderColor:a.Color.gray100,toggleBorderColor:a.Color.gray200,buttonBackgroundColor:a.Color.gray50,buttonBackgroundHoverColor:a.Color.gray100,cardColor:a.Color.gray50,secondaryRowHighlightColor:a.Color.gray100,secondaryRowHoverColor:a.Color.gray50,rowHighlightColor:a.Color.gray100,rowHoverColor:a.Color.gray50,sliderHandleColor:a.Color.white,upgraderButtonBackgroundColor:a.Color.blueLight,engagementBannersContentBackround:a.Color.white,engagementBannersContentBorderColor:a.Color.black,engagementBannerTextColor:a.Color.gray400},l._lightThemeCommon),{subtleIconOnThemedBackground:a.Color.gray400Overlay80}),accessibleDark:Object.assign(Object.assign({},l._darkThemeColorsDefault),{bubbleColorOther:a.Color.gray50,bubbleTextColorOther:a.Color.gray400,searchModernizeColor:a.Color.black,coloredBackgroundTextColor:a.Color.black,subtleIconOnThemedBackground:a.Color.white}),accessibleDarkV2:Object.assign(Object.assign({},l._darkThemeColorsDefault),{primaryBackgroundColor:a.Color.black,secondaryBackgroundColor:a.Color.black,uwpMenuBarColor:a.Color.black,webFooterColor:a.Color.gray400,primaryTextColor:a.Color.white,headerTextColor:a.Color.white,secondaryTextColor:a.Color.gray50,tertiaryTextColor:a.Color.gray50,bubbleColorOther:a.Color.gray50,bubbleTextColorOther:a.Color.gray400,primaryBadgeColor:a.Color.white,secondaryBadgeColor:a.Color.white,primaryBadgeTextColor:a.Color.gray400,pesPickerCategoryColor:a.Color.gray50,disclosureArrowColor:a.Color.gray50,messageStreamBackgroundColor:a.Color.black,primaryIconColor:a.Color.white,headerIconColor:a.Color.white,iconDisabledColor:a.Color.gray100,iconHoverColor:a.Color.gray100,dividerColor:a.Color.gray100,headerShadowColor:a.Color.gray100,messageComposerBackgroundColor:a.Color.gray400,sliderHandleColor:a.Color.black,searchModernizeColor:a.Color.black,destructiveTextColor:a.Color.white,destructiveTextHoverColor:a.Color.gray100,engagementBannersContentBackround:a.Color.black,engagementBannersContentBorderColor:a.Color.white,engagementBannerTextColor:a.Color.gray100,coloredBackgroundTextColor:a.Color.black,subtleIconOnThemedBackground:a.Color.white}),delphiDark:Object.assign(Object.assign({},l._darkThemeColorsDefault),{bubbleColorOther:a.Color.delphiDarkBubbleColorOther,bubbleTextColorOther:a.Color.delphiDarkBubbleText,bubbleColorSelf:a.Color.delphiDarkBubbleColorSelf,bubbleColorSelfModernize:a.Color.delphiDarkBubbleColorSelf,bubbleTextColorSelf:a.Color.delphiDarkBubbleText,bubbleColorBot:a.Color.delphiDarkBubbleColorBot,bubbleTextColorBot:a.Color.delphiDarkBubbleText,messageStreamBackgroundColor:a.Color.black,primaryTextColor:a.Color.delphiDarkPrimaryTextColor,secondaryTextColor:a.Color.delphiDarkSecondaryTextColor,primaryBackgroundColor:a.Color.classicDarkPrimaryBackground,secondaryBackgroundColor:a.Color.classicDarkSecondaryBackground,secondaryRowHighlightColor:a.Color.classicDarkBubbleSelf,secondaryRowHoverColor:a.Color.classicDarkBubbleOther,buttonBackgroundColor:a.Color.classicDarkBubbleSelf,primaryIconColor:a.Color.classicDarkBubbleTextSelf,headerIconColor:a.Color.classicDarkBubbleTextSelf}),delphiDarkMobile:Object.assign(Object.assign({},l._darkThemeColorsDefault),{bubbleColorOther:a.Color.classicDarkBubbleOther,bubbleTextColorOther:a.Color.classicDarkBubbleTextOther,bubbleColorSelf:a.Color.classicDarkBubbleSelf,bubbleColorSelfModernize:a.Color.classicDarkBubbleSelf,bubbleTextColorSelf:a.Color.classicDarkBubbleTextSelf,bubbleColorBot:a.Color.classicDarkBubbleOther,bubbleTextColorBot:a.Color.classicDarkBubbleTextOther}),colorfulDark:l._darkThemeColorsDefault,monoDark:l._darkThemeColorsDefault},l._themeStyles=l._buildThemeStyles()},81115:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(46096),s=i(36237);class a{static paddingTopStyle(e){let t=this._cachedPaddingTopStyles[e];return t||(s.log(o.LogTraceArea.GenericUnsafe,"SafeAreaStyleUtils: Creating paddingTopStyle "+e),t=n.Styles.createViewStyle({paddingTop:e},!1),this._cachedPaddingTopStyles[e]=t),t}static marginTopStyle(e){let t=this._cachedMarginTopStyles[e];return t||(s.log(o.LogTraceArea.GenericUnsafe,"SafeAreaStyleUtils: Creating marginTopStyle "+e),t=n.Styles.createViewStyle({marginTop:e},!1),this._cachedMarginTopStyles[e]=t),t}static paddingBottomStyle(e){let t=this._cachedPaddingBottomStyles[e];return t||(s.log(o.LogTraceArea.GenericUnsafe,"SafeAreaStyleUtils: Creating paddingBottomStyle "+e),t=n.Styles.createViewStyle({paddingBottom:e},!1),this._cachedPaddingBottomStyles[e]=t),t}static marginBottomStyle(e){let t=this._cachedMarginBottomStyles[e];return t||(s.log(o.LogTraceArea.GenericUnsafe,"SafeAreaStyleUtils: Creating marginBottomStyle "+e),t=n.Styles.createViewStyle({marginBottom:e},!1),this._cachedMarginBottomStyles[e]=t),t}static heightStyle(e){let t=this._cachedHeightStyles[e];return t||(s.log(o.LogTraceArea.GenericUnsafe,"SafeAreaStyleUtils: Creating heightStyle "+e),t=n.Styles.createViewStyle({height:e},!1),this._cachedHeightStyles[e]=t),t}static horizontalPaddingStyle(e){let t=e.left+"_"+e.right,i=this._cachedHorizontalPaddingStyles[t];return i||(s.log(o.LogTraceArea.GenericUnsafe,"SafeAreaStyleUtils: Creating horizontalPaddingStyle left: "+e.left+", right: "+e.right),i=n.Styles.createViewStyle({paddingLeft:e.left,paddingRight:e.right},!1),this._cachedHorizontalPaddingStyles[t]=i),i}static horizontalMarginStyle(e){let t=e.left+"_"+e.right,i=this._cachedHorizontalMarginStyles[t];return i||(s.log(o.LogTraceArea.GenericUnsafe,"SafeAreaStyleUtils: Creating horizontalMarginStyle left: "+e.left+", right: "+e.right),i=n.Styles.createViewStyle({marginLeft:e.left,marginRight:e.right},!1),this._cachedHorizontalMarginStyles[t]=i),i}static hasHorizontalSafeAreas(e){return 0!==e.left||0!==e.right}}t.default=a,a._cachedPaddingTopStyles={},a._cachedMarginTopStyles={},a._cachedPaddingBottomStyles={},a._cachedMarginBottomStyles={},a._cachedHeightStyles={},a._cachedHorizontalPaddingStyles={},a._cachedHorizontalMarginStyles={}},85773:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486);t.default=class{constructor(e){this._onFinishHandlers=[],this.finish=(e,t)=>{this.extendContext(t),n.each(this._onFinishHandlers,(t=>{t&&t(e,this._context)}))},this._context=e||{}}get context(){return this._context}start(e){this._rootViewId=e}extendContext(e){this._context=n.extend(this._context,e)}onFinish(e){e&&this._onFinishHandlers.push(e)}}},86045:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778);class s{static shouldAnnounceForAccessibility(){return!0}static isMobileScreenReaderEnabled(){return!1}static maybeAnnounceForAccessibility(e,t){const i=()=>{e&&s.shouldAnnounceForAccessibility()&&o.Accessibility.announceForAccessibility(e)};t?n.delay(i,t):0===t?n.defer(i):i()}}t.default=s},59898:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchUWPSettings=t.migrateLocalPreferences=t.migrateDeviceSettings=t.migratePreferredDevices=void 0;const n=i(74958),o=i(96486),s=i(97691),a=i(50781),r=i(94224),l=i(10561),c=i(46096),d=i(36237),u=i(78735),g=i(46929),h=i(49130),p=i(22538),m=i(4057),S=i(53374);function C(e){if(e){const t=e.split("#");if(t.length>=3)return t[2]}}function f(e){return o.isUndefined(e.backgroundReplacementForAllCalls)&&o.isUndefined(e.backgroundReplacementType)?e.blurBackground||e.blurBackgroundForAllCalls?c.BackgroundEffect.Blur:c.BackgroundEffect.Off:e.backgroundReplacementType||e.backgroundReplacementForAllCalls||c.BackgroundEffect.Off}t.migratePreferredDevices=function(e){const t=C(e.camera),i=C(e.microphone),n=C(e.speaker);C(e.secondarySpeaker),a.default.loadCallingBundle().then((()=>{const e=S.default.newCauseId(),s=o.find(r.default.DeviceStore.getSpeakers(),(e=>e.id===n)),a=o.find(r.default.DeviceStore.getMicrophones(),(e=>e.id===i)),l=o.find(r.default.DeviceStore.getCameras(),(e=>e.id===t));d.log(c.LogTraceArea.SISU,"migrateUwpSettings Migrating A/V Setting mic "+a+" cam "+l+" speaker "+s),r.default.DeviceStore.choosePreferredDevices({microphone:a?a.id:void 0,camera:l?l.id:void 0,speaker:s?s.id:void 0},e)}))},t.migrateDeviceSettings=function(e){const t=(0,l.default)();p.EnsureStarted(t).then((()=>{t.migrateSettings(e)}))},t.migrateLocalPreferences=function(e){u.default.setUserPreferencesLocal(e)},t.fetchUWPSettings=function(e){d.log(c.LogTraceArea.SISU,"Checking if UWP settings migration is needed for current MSIX instance...");const t="s4l-"+h.strictForInternalFile(e)+".db";d.log(c.LogTraceArea.SISU,"migrateUwpSettings - Preparing to fetch settings from db "+n.pii.Mri(t)+"!"),g.default.requestUWPToMSIXMigration();const i=window.electronApi.ipcProvider.uwpMigration.fetchSettings.invoke(t).then((e=>{let t={};if(e.localPrefs){const i=m.default.parseJsonErrorable(e.localPrefs);o.isError(i)?d.log(c.LogTraceArea.SISU,"migrateUwpSettings - failed to parse local preferences"):(d.log(c.LogTraceArea.SISU,"migrateUwpSettings - migrating local preferences"),t.localPrefs=i.value)}else d.log(c.LogTraceArea.SISU,"migrateUwpSettings - nothing to migrate for local user preferences");if(e.preferredDevices){const i=m.default.parseJsonErrorable(e.preferredDevices);o.isError(i)?d.log(c.LogTraceArea.SISU,"migrateUwpSettings - failed to parse prefferred devices"):(d.log(c.LogTraceArea.SISU,"migrateUwpSettings - migrating user preferred devices"),t.preferredDevices=i.value)}else d.log(c.LogTraceArea.SISU,"migrateUwpSettings - nothing to migrate for user preferred devices");if(e.deviceStore){const i=m.default.parseJsonErrorable(e.deviceStore);if(o.isError(i))d.log(c.LogTraceArea.SISU,"migrateUwpSettings - failed to parse device store");else{d.log(c.LogTraceArea.SISU,"migrateUwpSettings - migrating device store");const e={agc:i.value.agc,microphoneVolumes:{},speakerVolumes:{},backgroundReplacementType:f(i.value)};o.each(i.value.microphoneVolumes,((t,i)=>{const n=C(i);n&&(e.microphoneVolumes[n]=t)})),o.each(i.value.speakerVolumes,((t,i)=>{const n=C(i);n&&(e.speakerVolumes[n]=t)})),t.deviceSettings=e}}return t})).catch((e=>{let t=e;return e.statusCode&&(t=m.default.errorAsString(e)),d.log(c.LogTraceArea.SISU,"[UWPMigration] Failed to migrate UWP settings, reason: "+t),{}}));return s.fromThenable(i)}},90298:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SkypeVersionParser=void 0;i(96486);const n=/([0-9]+)?\/?([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)\/*([a-zA-Z0-9]*)\/*/;t.SkypeVersionParser=class{static parse(e){if(!e)return;const t=e.match(n);if(!t)return;return{platformId:parseInt(t[1],10),version:{major:parseInt(t[2],10),minor:parseInt(t[3],10),cobrand:parseInt(t[4],10),build:parseInt(t[5],10)},tag:t.length>6?t[6]:void 0}}static serialize(e){return(e.platformId?e.platformId+"/":"")+e.version.major+"."+e.version.minor+"."+e.version.cobrand+"."+e.version.build+(e.tag?"/"+e.tag:"")}}},97634:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isUsingDarkTheme=t.isUsingAccessibleTheme=t.currentTheme=t.themeColors=t.themeStyles=t.systemThemeEnabled=t.getAccessibilityLabel=t.convertOSThemeToTheme=t.convertThemeToDelphiTheme=t.themeMatchesOSTheme=t.matchingLightTheme=t.matchingLightOrDarkTheme=t.matchingAccessibleTheme=t.isColorfulTheme=t.isClassicTheme=t.isDelphiTheme=t.isMonoTheme=t.isAccessibleTheme=t.isDarkTheme=void 0;const n=i(31844),o=i(47447),s=i(33754),a=i(63841),r=i(53374),l=i(212);function c(e){return!!e&&(e===a.Theme.AccessibleDark||e===a.Theme.ColorfulDark||e===a.Theme.MonoDark||e===a.Theme.ClassicDarkDeprecated||e===a.Theme.DelphiDark)}function d(e){return!!e&&(e===a.Theme.Accessible||e===a.Theme.AccessibleDark)}function u(e){switch(e){case a.Theme.Colorful:return a.Theme.ColorfulDark;case a.Theme.Mono:return a.Theme.MonoDark;case a.Theme.Accessible:return a.Theme.AccessibleDark;case a.Theme.ClassicDeprecated:return a.Theme.ClassicDarkDeprecated;case a.Theme.Delphi:return a.Theme.DelphiDark;case a.Theme.ColorfulDark:return a.Theme.Colorful;case a.Theme.MonoDark:return a.Theme.Mono;case a.Theme.AccessibleDark:return a.Theme.Accessible;case a.Theme.ClassicDarkDeprecated:return a.Theme.ClassicDeprecated;case a.Theme.DelphiDark:return a.Theme.Delphi;default:return r.default.switchStatementExhaustiveChecking(e)}}function g(e,t){return void 0!==t&&(t===n.OSTheme.Dark&&c(e)||t===n.OSTheme.Light&&!c(e))}function h(e,t){return null!=t?t:e.theme}t.isDarkTheme=c,t.isAccessibleTheme=d,t.isMonoTheme=function(e){return!!e&&(e===a.Theme.Mono||e===a.Theme.MonoDark)},t.isDelphiTheme=function(e){return!!e&&(e===a.Theme.Delphi||e===a.Theme.DelphiDark)},t.isClassicTheme=function(e){return!!e&&(e===a.Theme.ClassicDeprecated||e===a.Theme.ClassicDarkDeprecated||e===a.Theme.Delphi||e===a.Theme.DelphiDark)},t.isColorfulTheme=function(e){return!!e&&(e===a.Theme.Colorful||e===a.Theme.ColorfulDark)},t.matchingAccessibleTheme=function(e){switch(e){case a.Theme.Colorful:case a.Theme.Mono:case a.Theme.ClassicDeprecated:case a.Theme.Delphi:return a.Theme.Accessible;case a.Theme.ColorfulDark:case a.Theme.MonoDark:case a.Theme.ClassicDarkDeprecated:case a.Theme.DelphiDark:return a.Theme.AccessibleDark;default:return a.Theme.Accessible}},t.matchingLightOrDarkTheme=u,t.matchingLightTheme=function(e){switch(e){case a.Theme.ColorfulDark:return a.Theme.Colorful;case a.Theme.MonoDark:return a.Theme.Mono;case a.Theme.AccessibleDark:return a.Theme.Accessible;case a.Theme.ClassicDarkDeprecated:return a.Theme.ClassicDeprecated;case a.Theme.DelphiDark:return a.Theme.Delphi;default:return e}},t.themeMatchesOSTheme=g,t.convertThemeToDelphiTheme=function(e){return d(e)?c(e)?a.Theme.DelphiDark:a.Theme.Delphi:e},t.convertOSThemeToTheme=function(e,t){if(void 0!==t)return g(e,t)?e:u(e)},t.getAccessibilityLabel=function(e){let t;switch(e){case a.Theme.Accessible:case a.Theme.AccessibleDark:t="ColorThemeDialog.HighContrastThemeTitle";break;case a.Theme.Mono:case a.Theme.MonoDark:t="ColorThemeDialog.ClassicThemeTitle";break;case a.Theme.ClassicDeprecated:case a.Theme.ClassicDarkDeprecated:case a.Theme.Delphi:case a.Theme.DelphiDark:t="ColorThemeDialog.BlueThemeTitle";break;case a.Theme.Colorful:case a.Theme.ColorfulDark:t="ColorThemeDialog.ColorThemeTitle";break;default:t=r.default.switchStatementExhaustiveChecking(e)}return s.getString(t)+" "+s.getString("AccessibilityLabel.SelectedControlLabel")},t.systemThemeEnabled=function(){return o.UICapabilities.systemThemeSupported()},t.themeStyles=function(e,t){return t?l.default.themeStylesForTheme(t):e.themeStyles},t.themeColors=function(e,t){return t?l.default.themeColorsForTheme(t):e.themeColors},t.currentTheme=h,t.isUsingAccessibleTheme=function(e,t){return d(h(e,t))},t.isUsingDarkTheme=function(e,t){return c(h(e,t))}},28069:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isForceUpdateEnabled=t.setLastDisplayDate=t.shouldDisplayUpgradeAlert=void 0;const n=i(16778),o=i(97691),s=i(89391),a=i(46096),r=i(36237),l=i(4057),c="UpgradeAlertLastDisplayDate";t.shouldDisplayUpgradeAlert=function(){return s.default.getS4LFeatures().enableUpgradeAlert?s.default.getS4LFeatures().upgradeAlertConfig.forceUpgrade?o.Resolved(!0):n.Storage.getItem(c).then((e=>!e||Date.now()>+e+1e3*s.default.getS4LFeatures().upgradeAlertConfig.upgradeAlertDisplayIntervalSeconds)).catch((e=>(r.warn(a.LogTraceArea.GenericUnsafe,"UpgradeAlertHelper:shouldDisplayUpgradeAlert failed: "+l.default.errorAsString(e)),o.Rejected(e)))):o.Resolved(!1)},t.setLastDisplayDate=function(){return n.Storage.setItem(c,String(""+Date.now()))},t.isForceUpdateEnabled=function(){const e=s.default.getS4LFeatures().upgrade;return!(!e||!e.noticeUrl)}},17840:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(89391),s=o.default.getConfigSettingsNoSubscription().urlPreview.host+"url/content?url=";t.default=new class{proxyImageUrl(e){if(e)return n.startsWith(e,s)||o.default.isTrustedDomain(e,!1)?e:s+encodeURIComponent(e)}}},26712:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74958),o=i(96486),s=i(36385),a=i(3689),r=i(46096),l=i(36237),c=i(61253),d=i(33754),u=i(27683),g=i(4057),h=i(40363),p=i(61694),m=i(53374);var S;!function(e){e[e.All=0]="All",e[e.Protocol=1]="Protocol",e[e.MailtoLiteral=2]="MailtoLiteral",e[e.MsProtocol=3]="MsProtocol",e[e.SkypeWinProtocol=4]="SkypeWinProtocol",e[e.SkypeLiteral=5]="SkypeLiteral",e[e.SkypeParticipants=6]="SkypeParticipants",e[e.TelLiteral=7]="TelLiteral",e[e.TelParticipants=8]="TelParticipants",e[e.EmailName=9]="EmailName",e[e.Host=10]="Host",e[e.Port=11]="Port",e[e.PathBeforeLastSlash=12]="PathBeforeLastSlash",e[e.PathAfterLastSlash=13]="PathAfterLastSlash",e[e.PathAfterLastDot=14]="PathAfterLastDot",e[e.QueryParameters=15]="QueryParameters",e[e.Fragment=16]="Fragment"}(S||(S={}));const C=/^\(?(?:(http|https|ftp):\/\/|(mailto):|(ms-voip-call|ms-voip-video|ms-ipmessaging):|(skypewin):|(skype):((?:[^\W\s]|\.|-|\:|\;)+)?|(tel):((?:[^\W\s]|[\.\-_~!$&'()\*\+,;=])+))?(?:(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\r\n\?]*[\/]{1})*?(?:\/?([^\r\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?))?(?:\?{1}([^\s\n\#\[\]]*))?(?:[\#]([^\s\n]*))?\)?$/i,f=/^(?:https?|ftp):\/\/|(?:mailto|skype|skype-meetnow|skypewin|tel|callto|ms-voip-call|ms-voip-video|ms-ipmessaging):/i,y=/\b(?:[^\W\s]|\.|-|[:]{1})+@{1}(?:[^\W\s]|\.|-)+/i,_=/^chat|call|golive|buycredit|action|home/i,v=/^[a-z-]+:/i,b=/^https:\/\/join.skype.com\/(?:[^\W_]){12}$/,T={"ms-voip-call":p.UrlType.VoipAudio,"ms-voip-video":p.UrlType.VoipVideo,"ms-ipmessaging":p.UrlType.Messaging};class P{static isUrlValid(e){if(!e)return!1;const t=this.getURIComponents(e);return this._isComponentsValid(t)}static removeHost(e){const t=this.getURIComponents(e);if(!t||!this._isComponentsValid(t))return e;let i="";return t.pathname&&(i+=t.pathname),t.queryParameterString&&(i+="?"+t.queryParameterString),t.fragment&&(i+="#"+t.fragment),i}static _isComponentsValid(e){if(!e)return!1;const{port:t,protocol:i,emailName:n,host:s}=e,a=t?parseInt(t,10):void 0,r=i&&o.includes(["http","https","ftp","onenote"],i),l=e.type===p.UrlType.Email&&n,c=s&&-1===s.indexOf("..")&&"."!==o.head(s)&&"."!==o.last(s),d=void 0!==a&&a>=0&&a<=65535,u=!o.isFinite(a)||d;return!(!r&&!l||!u||!c&&e.type!==p.UrlType.OneNote)||(e.type===p.UrlType.SkypeWin||(!!this._isSkypeUrlComponentsValid(e)||(!!this._isPhoneUrlComponentsValid(e)||(!!this._isCommsUrlComponentsValid(e)||!!this.isContactUrlComponentsValid(e)))))}static isContactUrlComponentsValid(e){return!!e&&"content"===e.protocol&&("com.android.contacts"===e.host||!!e.pathname&&e.pathname.indexOf("com.android.contacts")>-1)}static _isSkypeUrlComponentsValid(e){return!(!e||e.type!==p.UrlType.Skype&&e.type!==p.UrlType.Winshell||e.queryParameterString&&!_.test(e.queryParameterString))}static _isPhoneUrlComponentsValid(e){return o.includes([p.UrlType.Tel,p.UrlType.CallTo],null==e?void 0:e.type)&&u.default.isPossiblyPhoneNumber(e.telNumber)}static _isCommsUrlComponentsValid(e){return!(!e||!o.includes([p.UrlType.Messaging,p.UrlType.VoipAudio,p.UrlType.VoipVideo],e.type))}static getDomainName(e){const t=this.getURIComponents(e);return t&&t.host?this.buildUrl(t.protocol,t.host):(l.log(r.LogTraceArea.UrlUtils,"getDomainName: Found no components for url: "+e),"")}static getHost(e){const t=this.getURIComponents(e);if(t)return t.host;l.log(r.LogTraceArea.UrlUtils,"getHost: Found no components for url: "+e)}static getIDNSafeUrl(e){let t=this.getURIComponents(e);if(!t||!this._isComponentsValid(t)||!t.host){l.log(r.LogTraceArea.UrlUtils,"getIDNSafeUrl: Parsing failed converting to ASCII.");const i=a.toASCII(e.toLowerCase());if(t=this.getURIComponents(i),!t||!this._isComponentsValid(t)||!t.host)return e}if(t.type===p.UrlType.Email)return a.toASCII(e.toLowerCase());if(t.type===p.UrlType.Web)try{let i=t.host;t.port&&(i=t.host.replace(`:${t.port}`,""));const n=a.toUnicode(i),o=a.toASCII(i.toLowerCase()),s=new RegExp(n,"i");return e.replace(s,o)}catch(e){l.log(r.LogTraceArea.UrlUtils,"getIDNSafeUrl: "+g.default.errorAsString(e))}return e}static getProtocol(e){const t=this.getURIComponents(e);if(t)return t.protocol;l.log(r.LogTraceArea.UrlUtils,"getProtocol: Found no components for url: "+e)}static normalizeUrlProtocol(e){const t=this.getProtocol(e);if(t){let i=new RegExp(t,"i");return e.replace(i,t)}}static createSanitizedHref(e){let t=this.getIDNSafeUrl(e);const i=this.getURIComponents(t);if(!i||!this._isComponentsValid(i))return void l.log(r.LogTraceArea.UrlUtils,"createSanitizedHref: No valid components: "+JSON.stringify(i)+", URL: "+e);let n;if(!i.queryParameterString&&!i.fragment){const e=t;t=o.trimEnd(t,".-:;?"),n=e.substr(t.length)}let s=t;return i.type===p.UrlType.Email?t=/^mailto:/i.test(t)?t:"mailto:"+t:i.host&&(t=/^w{3}\./i.test(t)?"https://"+t:t),{href:t,text:s,trailingCharacters:n,urlType:i.type}}static sanitizeUrl(e){const t=this.createSanitizedHref(e);return t?t.href:void 0}static getURIComponents(e){if(!e)return;f.test(e)||(y.test(e)?e=/^mailto:/i.test(e)?e:"mailto:"+e:/^w{3}\./i.test(e)&&(e="https://"+e));let t=this._syncGetUriComponents(e);if(t){if(t.pathname&&"/"===o.head(t.pathname)&&(t.pathname=t.pathname.substr(1)),t.pathname&&"/"!==o.last(t.pathname)&&(t.pathname=t.pathname+"/"),t.pathname||t.queryParameterString||t.fragment||(t.host=o.trimEnd(t.host,".-"),t.skypeParticipants=o.trimEnd(t.skypeParticipants,".-:;")),t.queryParameterString){const e=m.default.unescapeXml(t.queryParameterString).split("&"),i=this.parseParameterPairs(e);if(i.foundInvalidParameter)return;t.queryParameterKeyValues=i.parameterKeyValues}else t.queryParameterKeyValues={};if(o.includes([p.UrlType.Messaging,p.UrlType.VoipAudio,p.UrlType.VoipVideo],t.type)){const e=t.queryParameterKeyValues.ContactRemoteIds;e&&(t.skypeParticipants=o.replace(e,",",";"))}return t}l.log(r.LogTraceArea.UrlUtils,"getURIComponents: Parsing failed for uri: "+e)}static parseParameterPairs(e){let t={},i=!1;return o.each(e,(e=>{const n=e.indexOf("="),s=-1===n?e.length:n,a=o.attempt((()=>decodeURIComponent(e.substr(0,s)))),r=o.attempt((()=>decodeURIComponent(e.substr(s+1))));o.isError(a)||o.isError(r)?i=!0:t[a]=r})),{parameterKeyValues:t,foundInvalidParameter:i}}static getUrlParamsInFragment(e){const t=e.indexOf("#");if(-1===t)return;const i=e.substr(t+1).split("&"),{parameterKeyValues:n}=this.parseParameterPairs(i);return n||{}}static getUrlParameterValue(e,t,i=!1){if(this.isUrlValid(e)){const n=this._getUrlParameterRegularExpress(t);let o=e.match(n);if(o&&o.length>=3)return i?decodeURIComponent(o[2]):o[2]}}static addUrlParameter(e,t,i,n){if(n||this.isUrlValid(e)){const n=e.indexOf("#"),s=-1===n?"":e.substr(n),a=(e=-1===n?e:e.substr(0,n)).indexOf("?");let r=e,l="";-1!==a&&(r=e.slice(0,a),l=e.slice(a,e.length));const c=this._getUrlParameterRegularExpress(t);if(i)if(l.match(c))l=l.replace(c,"$1"+t+"="+i);else{l=l+(-1!==e.indexOf("?")?"&":"?")+t+"="+i}else if(""!==l){const e=new RegExp("([?&])"+t+"=[^&#/]*","i");l=l.replace(e,""),"?"!==o.head(l)&&(l=l.replace(/&/,"?"))}return r+l+s}return e}static _getUrlParameterRegularExpress(e){return new RegExp("([?&])"+e+"=([^\\s\\n&#/]*)","i")}static addUrlParameters(e,t,i){let n=e;return o.forOwn(t,((e,t)=>{n=P.addUrlParameter(n,t,e,i)})),n}static isHttp(e){const t=P.getURIComponents(e);return!!t&&(!!e&&/^https?/i.test(t.protocol))}static isPdfUrl(e){const t=this.getURIComponents(e);return!!(t&&this._isComponentsValid(t)&&this.isHttp(e))&&(!!t.pathname&&o.endsWith(o.trimEnd(t.pathname,"/"),".pdf"))}static isGifUrl(e){const t=this.getURIComponents(e);return!!(t&&this._isComponentsValid(t)&&this.isHttp(e))&&(!!t.pathname&&o.endsWith(o.trimEnd(t.pathname,"/"),".gif"))}static isFile(e){return o.startsWith(e,"file:")||o.startsWith(e,"urn:future-access-list:")}static isFileOrBlob(e){return P.isFile(e)||o.startsWith(e,"blob:")||o.startsWith(e,"ph:")}static getFileUrl(e){let t;const i=e.file;if(i&&i.uri)t=i.uri;else{const i=e.file;t=URL.createObjectURL(i)}return t}static appendLanguageUrlParameter(e){return P.addUrlParameter(e,"lang",encodeURIComponent(d.getLocale()))}static areUrlsSame(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=P.getURIComponents(e);if(!i)return!1;const n=P.getURIComponents(t);return!!n&&(i.protocol===n.protocol&&i.host===n.host&&i.port===n.port&&i.pathname===n.pathname&&(0,c.default)(i.queryParameterKeyValues,n.queryParameterKeyValues))}static urlContains(e,t,i){const n=i||{compareQueryParamValues:!1};if(e===t)return!0;if(!e||!t)return!1;const s=P.getURIComponents(e);if(!s)return!1;const a=P.getURIComponents(t);if(!a)return!1;if(s.protocol!==a.protocol||s.host!==a.host||s.port!==a.port)return!1;if(this._getUrlType(s.protocol)!==this._getUrlType(a.protocol)||this._getUrlType(s.protocol)!==p.UrlType.Web)return!1;if(!o.isEmpty(a.pathname)&&a.pathname!==s.pathname)return!1;const r=o.keys(a.queryParameterKeyValues);return!(!o.isEmpty(a.queryParameterKeyValues)&&o.intersection(o.keys(s.queryParameterKeyValues),r).length!==r.length)&&!(n.compareQueryParamValues&&!o.isEmpty(a.queryParameterKeyValues)&&o.some(r,(e=>a.queryParameterKeyValues[e]!==s.queryParameterKeyValues[e])))}static areHostsSame(e,t){return!!e&&!!t&&e.host===t.host}static isSkypeUrl(e){if(!this.isUrlValid(e))return!1;const t=this.getHost(e);return o.endsWith(t,".skype.com")||o.endsWith(t,".skype.net")}static isSkypeDeepLinkUrl(e){const t=this.getURIComponents(e);let i=!1;if(t){const e=t.pathname?o.compact(t.pathname.split("/")):[];i=(t.host&&t.host.toLowerCase())===h.default.getFrontendHost()&&1===e.length}return i}static isJoinLinkUrl(e){return b.test(e)}static _syncGetUriComponents(e){let t,i;if(e=(e=e.replace(/^skype:\/\//,"skype:")).replace(/^skype-meetnow:\/\//,"skype-meetnow:"),"undefined"!=typeof document&&"function"==typeof document.createElement){if(!v.test(e))return void l.log(r.LogTraceArea.UrlUtils,"_syncGetUriComponents: non-standard URI: "+n.pii.Omit(e));const s=document.createElement("a");s.setAttribute("href",e);let a=o.attempt((()=>s.protocol));if(o.isError(a))return void l.log(r.LogTraceArea.UrlUtils,"_syncGetUriComponents: Error accessing protocol "+a+", uri:"+e);if(!a)return void l.log(r.LogTraceArea.UrlUtils,"_syncGetUriComponents: URI does not have protocol: "+e);a=o.toLower(o.trimEnd(s.protocol,":"));const c=this._getUrlType(a);i=s.pathname,t={type:c,protocol:a,host:s.host,port:s.port,queryParameterString:o.trimStart(s.search,"?"),fragment:o.trimStart(s.hash,"#")}}else{0;const n=s.default.syncGetUriComponents(e);if(!n)return;const a=o.toLower(n.protocol),r=this._getUrlType(a);i=n.path,t={type:r,protocol:a,host:n.host,port:n.port,queryParameterString:n.query,fragment:n.fragment}}if(i)if(t.type===p.UrlType.Email){const e=i.indexOf("@");t.emailName=i.substr(0,e),t.host=i.substr(e+1)}else if(t.type===p.UrlType.Skype)t.skypeParticipants=i;else if(t.type===p.UrlType.Tel||t.type===p.UrlType.CallTo){const e=g.default.safeDecodeURIComponent(i);t.telNumber=e?u.default.getNormalizedPhoneNumber(e,!0):void 0}else t.pathname=i;return t}static _regexGetUriComponents(e){const t=C.exec(e);if(!t)return;let i=p.UrlType.Web;const n=t[S.Host],s=t[S.EmailName],a=!!t[S.MailtoLiteral]||!!s,r=!!t[S.SkypeLiteral],l=!!t[S.TelLiteral],c=!!t[S.MsProtocol],d=!!t[S.SkypeWinProtocol];let g,h;a?i=p.UrlType.Email:r?(i=p.UrlType.Skype,g=t[S.SkypeParticipants]):l?(i=p.UrlType.Tel,h=u.default.getNormalizedPhoneNumber(t[S.TelParticipants],!0)):c?i=T[t[S.MsProtocol]]:d&&(i=p.UrlType.SkypeWin);const m=t[S.QueryParameters],f=t[S.Fragment];let y=t[S.Protocol]?t[S.Protocol].toLowerCase():!a&&n&&/^w{3}\./i.test(n)?"http":"",_=o.compact([t[S.PathBeforeLastSlash],t[S.PathAfterLastSlash],t[S.PathAfterLastDot]]).join("");return{protocol:y,type:i,skypeParticipants:g,telNumber:h,emailName:s,host:n,port:t[S.Port],pathname:_,queryParameterString:m,fragment:f}}static _getUrlType(e){return e?"mailto"===(e=e.toLowerCase())?p.UrlType.Email:"skype"===e?p.UrlType.Skype:"skype-meetnow"===e?p.UrlType.Winshell:"tel"===e?p.UrlType.Tel:"callto"===e?p.UrlType.CallTo:"ms-voip-call"===e?p.UrlType.VoipAudio:"ms-voip-video"===e?p.UrlType.VoipVideo:"ms-ipmessaging"===e?p.UrlType.Messaging:"skypewin"===e?p.UrlType.SkypeWin:o.includes(["http","https"],e)?p.UrlType.Web:"onenote"===e?p.UrlType.OneNote:p.UrlType.Unknown:p.UrlType.Unknown}static buildUrl(e,t){return e+"://"+t}static test_syncGetUriComponents(e){return this._syncGetUriComponents(e)}static test_regexGetUriComponents(e){return this._regexGetUriComponents(e)}}t.default=P},89391:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppConfigStore=void 0;const n=i(70655),o=i(74395),s=i(96486),a=i(52400),r=i(88837),l=i(97691),c=i(72311),d=i(14806),u=i(61294),g=i(56280),h=i(68894),p=i(46096),m=i(33754),S=i(95473),C=i(72335),f=i(52914),y=i(53154),_=i(40363),v=i(26712),b=!0;let T=class extends r.StoreBase{isMurphyUser(){return this.getS4LFeatures().Murphy}useCachedEcsConfig(e){this.isUserEcsConfig()&&e&&e.configType===o.Models.EcsConfigType.Default||(this._cachedEcsConfig=e,this._updateMergedConfig())}internal_setOverrides(e){this._internalOverrides=e,void 0!==this._cachedEcsConfig&&this._updateMergedConfig()}_updateMergedConfig(){const e=this._cachedEcsConfig&&this._cachedEcsConfig.config,t=this._getEcsFallbacks();let i=e?u.mergeConfigs(t,e):t;void 0!==this._internalOverrides&&(i=u.mergeConfigs(i,this._internalOverrides)),this._mergedEcsConfig=i,this._mergedConfigSettings=void 0,this.trigger()}getMergedEcsConfig(){return this._getMergedEcsConfig()}_getMergedEcsConfig(){return this._mergedEcsConfig||(this._mergedEcsConfig=this._getEcsFallbacks()),this._mergedEcsConfig}_getMergedConfigSettings(){if(!this._mergedConfigSettings){const e=this._getConfigDefaults();this._mergedConfigSettings=u.mergeConfigs(e,this._getS4LConfigFeatures())}return this._mergedConfigSettings}_getEcsFallbacks(){return{Ads:this._getAdsDefaults(),ConfigIDs:this._getConfigIdDefaults(),AsyncMediaClient:this._getAsyncMediaDefaults(),ConsumerEntitlement:this._getS4LEntitlementDefaults(),Headers:this._getHeadersDefault(),Join:this._getJoinDefaults(),MDN_TRAP:{},PeopleSearch:this._getPeopleSearchDefault(),SkypeAudioLibrary:this._getSkypeAudioLibraryDefaults(),SkypePersonalization:this._getPesDefaults(),SkypeTelemetry:this.getTelemetryDefaults(),S4L_Telemetry:this._getS4LTelemetryDefaults(),S4L:this._getS4LDefaults(),S4L_Caap:this._getS4LCaapDefaults(),S4L_Config:this._getS4LConfigDefaults(),S4L_Integrations:this._getS4LIntegrationsDefaults(),S4L_Messaging:C.default,S4L_Contacts:this._getS4LContactsDefaults(),S4L_Search:this._getS4LSearchDefaults(),S4L_Commerce:this._getS4LCommerceDefaults(),S4L_NativePlatforms:this._getNativePlatformsDefaults(),S4L_CMC:c.default,SkypeRootTools:this._getSkypeRootToolsDefaults(),DebugabilitySquad:this._getDebugabilitySquadDefaults(),SkypeRealTimeMedia:this._getSkypeRealTimeMediaDefaults(),S4L_Onboarding:this._getOnboardingDefaults(),S4L_Engagement:this._getEngagementDefaults(),S4L_SISU:this._getS4LSisuDefaults(),S4L_UI:this._getS4LUiDefaults(),S4L_Stratus:this._getS4LStratusDefaults(),SkypeEngagement:this._getSkypeEngagementDefaults(),OEM_Operator_Squad:this._getOEMConfigDefaults(),S4L_Feedback:this._getS4LFeedbackDefaults(),TrouterJScriptClient:this._getTrouterJScriptClientDefaults(),S4L_MeetNow:S.default}}_getConfigIdDefaults(){return{Ads:"",AsyncMediaClient:"",ConsumerEntitlement:"",Headers:"",Join:"",PeopleSearch:"",PeopleRecommendation:"",SkypePersonalization:"",SkypeTelemetry:"",S4L_Telemetry:"",S4L:"",S4L_Caap:"",S4L_Config:"",S4L_Integrations:"",S4L_Messaging:"",S4L_UI:"",S4L_Contacts:"",S4L_Search:"",S4L_Commerce:"",S4L_NativePlatforms:"",S4L_CMC:"",SkypeRootTools:"",DebugabilitySquad:"",SkypeRealTimeMedia:"",S4L_Onboarding:"",S4L_SISU:"",S4L_Stratus:"",S4L_Engagement:"",SkypeEngagement:"",S4L_Feedback:"",TrouterJScriptClient:"",S4L_MeetNow:""}}getSkypeAudioLibraryFeatures(){return this._getMergedEcsConfig().SkypeAudioLibrary}getS4LFeatures(){return this._getMergedEcsConfig().S4L}getS4LFeaturesNoSubscription(){return this._getMergedEcsConfig().S4L}_getS4LConfigFeatures(){return this._getMergedEcsConfig().S4L_Config}getS4LCaapFeatures(){return this._getMergedEcsConfig().S4L_Caap}getS4LIntegrationsFeatures(){return this._getMergedEcsConfig().S4L_Integrations}getS4LMessagingFeatures(){return this._getMergedEcsConfig().S4L_Messaging}getS4LMessagingFeaturesNoSubscription(){return this._getMergedEcsConfig().S4L_Messaging}getS4LMessagingConfigIds(){return s.split(this._getMergedEcsConfig().ConfigIDs.S4L_Messaging,",")}getS4LUiConfigIds(){return s.split(this._getMergedEcsConfig().ConfigIDs.S4L_UI,",")}getS4LMessagingExperimentalConfigString(){return s.filter(this.getS4LMessagingConfigIds(),(e=>s.startsWith(e,"P-E"))).toString()}getS4LUiExperimentalConfigString(){return s.filter(this.getS4LUiConfigIds(),(e=>s.startsWith(e,"P-E"))).toString()}getNRTMapping(){return this._getMergedEcsConfig().EventToConfigIdsMapping}dangerouslyGetS4LMessagingFeatures(){return this._getMergedEcsConfig().S4L_Messaging}getS4LContactsFeatures(){return this._getMergedEcsConfig().S4L_Contacts}getS4LContactsFeaturesNoSubscription(){return this._getMergedEcsConfig().S4L_Contacts}getS4LSearchFeatures(){return this._getMergedEcsConfig().S4L_Search}getS4LCommerceFeatures(){return this._getMergedEcsConfig().S4L_Commerce}dangerouslyGetS4LCommerceFeatures(){return this._getMergedEcsConfig().S4L_Commerce}getS4LEntitlementFeatures(){return this._getMergedEcsConfig().ConsumerEntitlement}getS4LEntitlementFeaturesNoSubscription(){return this._getMergedEcsConfig().ConsumerEntitlement}getS4LCommerceFeaturesNoSubscription(){return this._getMergedEcsConfig().S4L_Commerce}getHeaders(){return this._getMergedEcsConfig().Headers}getPeopleSearchSettings(){return this._getMergedEcsConfig().PeopleSearch}getS4LNativePlatformsEcsConfig(){return this._getMergedEcsConfig().S4L_NativePlatforms}getS4LNativePlatformsEcsConfigNoSubscription(){return this._getMergedEcsConfig().S4L_NativePlatforms}getS4LCMCFeatures(){return this._getMergedEcsConfig().S4L_CMC}getS4LCMCFeaturesNoSubscription(){return this._getMergedEcsConfig().S4L_CMC}getTelemetryFeatures(){return this._getMergedEcsConfig().SkypeTelemetry}getS4LTelemetryFeatures(){return this._getMergedEcsConfig().S4L_Telemetry}getS4LTelemetryFeaturesNoSubscription(){return this.getS4LTelemetryFeatures()}getS4LMeetNowFeatures(){return this._getMergedEcsConfig().S4L_MeetNow}getS4LMeetNowFeaturesNoSubscription(){return this.getS4LMeetNowFeatures()}getPesConfig(){return this._getMergedEcsConfig().SkypePersonalization}getAsyncMediaFeatures(){return this._getMergedEcsConfig().AsyncMediaClient}getSkypeRootToolsConfig(){return this._getMergedEcsConfig().SkypeRootTools}getTrouterJScriptClientConfig(){return this._getMergedEcsConfig().TrouterJScriptClient}getMDNTRAPClientConfig(){return this._getMergedEcsConfig().MDN_TRAP}getJoinFeaturesNoSubscription(){return this._getMergedEcsConfig().Join}getJoinFeatures(){return this._getMergedEcsConfig().Join}getAdsFeatures(){return this._getMergedEcsConfig().Ads}getOnboardingFeatures(){return this._getMergedEcsConfig().S4L_Onboarding}getEngagementFeatures(){return this._getMergedEcsConfig().S4L_Engagement}getSkypeEngagementFeatures(){return this._getMergedEcsConfig().SkypeEngagement}dangerouslyGetOnboardingFeatures(){return this._getMergedEcsConfig().S4L_Onboarding}getDebugabilitySquad(){return this._getMergedEcsConfig().DebugabilitySquad}getSkypeRealTimeMedia(){return this._getMergedEcsConfig().SkypeRealTimeMedia}getS4LSisuFeatures(){return this._getMergedEcsConfig().S4L_SISU}dangerouslyGetS4LSisuFeatures(){return this._getMergedEcsConfig().S4L_SISU}getS4LUiFeatures(){return this._getMergedEcsConfig().S4L_UI}getS4LUiFeaturesNoSubscription(){return this._getMergedEcsConfig().S4L_UI}getS4LStratusFeatures(){return this._getMergedEcsConfig().S4L_Stratus}getOEMConfig(){return this._getMergedEcsConfig().OEM_Operator_Squad}getFeedbackFeatures(){return this._getMergedEcsConfig().S4L_Feedback}getULLogUploadConfig(e,t){const i=this._getMergedEcsConfig()[e];return i?i[t]:void 0}getConfigSettings(){return this._getMergedConfigSettings()}getConfigSettingsNoSubscription(){return this._getMergedConfigSettings()}getCachedEcsConfig(){return this._cachedEcsConfig}isUserEcsConfig(){return!!this._cachedEcsConfig&&this._cachedEcsConfig.configType===o.Models.EcsConfigType.User}getCachedEcsConfigEtag(){return this._cachedEcsConfig?this._cachedEcsConfig.eTag:""}getCachedEcsConfigExpiration(){return this._cachedEcsConfig?this._cachedEcsConfig.expiration:0}getTrustedDomainInfo(){const e=this.getAsyncMediaFeatures().trusted_domains.toLowerCase().split(";");return{authTrustedDomains:this.getAsyncMediaFeatures().auth_trusted_domains.toLowerCase().split(";"),trustedDomains:e.length>0?e.concat(this.getS4LMessagingFeatures().safeDisplayDomains):this.getS4LMessagingFeatures().safeDisplayDomains,thirdPartyDownloaderUrlSchemas:this.getAsyncMediaFeatures().third_party_downloader_url_schemas.toLowerCase().split(";")}}isTrustedDomain(e,t){const i=this.getTrustedDomainInfo(),n=v.default.getURIComponents(e);if(!n||!n.protocol||!n.host)return!1;if(!s.includes(i.thirdPartyDownloaderUrlSchemas,n.protocol))return!1;const o=n.host.toLowerCase();return s.some(t?i.authTrustedDomains:i.trustedDomains,(e=>{if("*"===e[0]&&"."===e[1]){const t=e.substr(1);return s.endsWith(o,t)&&o.length>t.length}return o===e}))}getBingUrls(){return{privacyStatementUrl:`https://privacy.microsoft.com/${m.getLocale()}/privacystatement`,termsOfServiceUrl:`https://www.microsoft.com/${m.getLocale()}/servicesagreement`}}getBingMapsConfig(){return{urlBase:this.getS4LMessagingFeatures().bingMapsImageryRestApiBaseUrl,apiKey:this.getS4LMessagingFeatures().bingMapsRestApiKey,termsOfUseUrl:"https://www.microsoft.com/en-us/maps/product"}}isDesktopVIMEnabled(){return this.getS4LCMCFeatures().enableDesktopVIM}isEnabledVideoRendererBoundToView(){return!0}performWhenServerDefaultConfigAvailable(){if(this._cachedEcsConfig)return l.Resolved();const e=l.Defer(),t=this.subscribe((()=>{this._cachedEcsConfig&&(this.unsubscribe(t),e.resolve(void 0))}));return e.promise()}_getS4LDefaults(){return{chatFeatures:{recommendedRing:0},pushConfig:{ttlSeconds:15552e3,refreshIntervalSeconds:604800,refreshOnLaunch:!1},MSFT:!0,Murphy:!1,tracing:2147483647,tracing2:2147483647,tracing3:2147483647,tracing4:2147483647,tracing5:2147483647,tracing6:2147483647,tracing7:2147483647,tracing8:2147483647,tracing9:2147483647,unsafeTraceAreas:[],saveUlLog:!1,pii:{findPotentialPii:!1},enableUpgradeAlert:!1,upgradeAlertConfig:{upgradeAlertDisplayIntervalSeconds:86400,forceUpgrade:!1},idleService:{afterUiShownDelay:2500,busyTaskDelay:500},intentStartup:{enabled:!1,enabledManifests:["AllPreUI","AllPostUI","Recents","Chat","Call","Dialpad"],getIntentFromDeepLink:!1},beforeStartupDecorator:{enabled:!1,enforceNoEnsureStarted:!1},exceptions:{reloadOnException:!0},scheduler:{enableSmsPriceThrottling:!1,enablePeopleServiceClientThrottling:!1,enableTelemetryServiceThrottling:!1,enableEcsServiceThrottling:!1,telemetryServiceResumeTimeout:6e4},userCache:{enabled:!1,canClearCacheOnLogout:!1}}}_getS4LCaapDefaults(){return{autoAddBotsEnabled:!1,botIdsToAdd:[],botDiscoveryEnabled:!1,botStoreAsList:!1,suggestions:{enabled:!1,feedbackEnabled:!1,orderingEnabled:!1,iconEnabled:!1,ordering:[],suggestionIdTelemetryEnabled:!1,enableSuggestionsV2:!1},adaptiveCards:{enableSharing:!1,imagePrefetchEnabled:!1,placeholderLoadingTimeout:1e3},textSuggestions:{enabled:!1,allowedSuggestions:[],maxSuggestions:0},clientSideSuggestions:{enabled:!1,suggestions:[]},highAccuracyLocationTimeout:5e3}}_getS4LConfigDefaults(){return{}}_getS4LContactsDefaults(){return{enableInviteFree:!0,enableGroupInviteFree:!0,sendLegacyInvite:!1,sendLegacyInviteSfB:!0,consumeLegacyInvites:!0,maxContactInviteMessageCount:10,shortCircuitHashBatchSize:200,shortCircuitSyncMatchLimit:0,avatarChangeNotifications:this._getAvatarChangeNotificationsDefaults(),enableGroupShareButtonInChat:!1,enableSearchFeedback:!1,enableNewConnectionMessage:!1,enableIOSAutoBuddy:!1,overrideWithAddressBookName:!1,enableDeviceIdForShortcircuit:!1,enableAvatarLoadErrorTracking:!1,contactsFullSyncRefreshInHours:void 0,profileV2Url:"https://edge.skype.com/profile/v2/users/%username%/profile/private",profileV2PartialUrl:"https://edge.skype.com/profile/v2/users/%username%/profile/partial",enableProfileV2MigrationSuggestion:!1,enableProfileV2AutoMigration:!1,enableShortCircuitContactsRoaming:!1,enableAlwaysShowActiveNowFilter:!1,enableHideSkypeName:!1}}_getAvatarChangeNotificationsDefaults(){return{enabled:!1,showMaxNumberOfAlerts:5,actionButtonType:0}}_getS4LSearchDefaults(){return{searchHeaderDebounceWait:350,hideInactivePublicDirectoryResults:!1,customizeExperienceByContactsLevel:!1,engagedContactsThreshold:void 0}}_getS4LCommerceDefaults(){return{accountLinkEnabled:!0,callerIdCTA:{postCallInterruptPanel:{enabled:!1,showAfterCallNumber:5,showMaxAmount:5,maxTimeSinceFirstCallDays:30,minTimeSinceLastShowHours:48},inChatMessages:{enabled:!1,messageType:"text",minTimeSinceLastShowHours:0},dialpadCTA:{enabled:!1},ignoreCallTerminatedReasons:[14],trackIgnoredCalls:!1},callingSettingsPanel:{callForwarding:{enabled:!1,link:"https://secure.skype.com/portal/main-page?page=callForwarding",goTarget:"myaccount.call-forwarding"},callerId:{enabled:!0,dataThrottlingMs:6e4,countryCodesThrottlingMs:6048e5,smsCapableEnabled:!0,learnMoreLink:"https://go.skype.com/help.faq.callerid",upsellSkypeNumber:!1}},callIntent:{allowNonE164NumberCalls:!1},creditUpsell:{enablePaidUsersCallForwardingUpsell:!1,enableAllUsersCallForwardingUpsell:!1},sendCredit:{enabled:!1,defaultDenominationEnabled:!0,defaultDenominationId:"option-2",defaultCardEnabled:!0,defaultCardId:"misc:skype-credit",contactsRefreshIntervalMs:864e5,optionsRefreshThrottlingMs:36e5,statusCheckDelayMs:1e3,statusCheckIntervalMs:3500,statusCheckAttempts:20,topupEnabled:!0,topupButtonType:d.SendCreditTopupButtonType.Orange,learnMoreLink:"http://go.skype.com/gift.promo.home"},skypeNumber:{showInProfile:!1,forceLearnMoreButton:!1,link:"https://secure.skype.com/my/skype-number",goLink:"client.s4l.skype-number",manageGoLink:"client.s4l.skype-number-manage",backNavigation:!1,useExternalWebBrowser:!1,smsPackCampaign:{countries:[],endDate:void 0},nativeBuyExperience:{enabled:!1,showInfoButton:!0,openInfoWebViewByDefault:!0},newSkypeNumberPanel:{enableInfoText:!1,enableWarningText:!0,enableCallerIdToggle:!0,prettifyBuyButton:!0,showShareButton:!0,desktopShare:{defaultMail:!0,outlook:!0,gmail:!0},showInfoButton:!0}},currencyConversion:{cacheInSeconds:60},purchaseOptions:{enabled:!0,refreshIntervalSeconds:60},billingInformations:{refreshIntervalSeconds:60},orderStatus:{statusMap:{DELIVERED:"success",CREATED:"pending",SENT_TO_PSP:"pending",PAYMENT_PENDING:"pending",PAYMENT_CONFIRMED:"pending",PSP_ERROR:"failure",REFUSED:"failure",PAYMENT_REFUSED:"failure",SENT_FOR_REVERSE:"failure",REVERSED:"failure",SENT_FOR_CANCEL:"failure",CANCELLED:"failure",SENT_FOR_PARTIAL_REFUND:"failure",PARTIALLY_REFUNDED:"failure",SENT_FOR_REFUND:"failure",REFUNDED:"failure",CHARGED_BACK:"failure",CHARGE_BACK_INITIATED:"failure"}},offerStore:{prefetch:!0},nativeProducts:{refreshIntervalSeconds:60,offerHref:"/offers/credit/skus/credit-10",offerHrefMap:{"com.skype.skype.subscription.au_mixed_300_ios.1_month":"/offers/calling/skus/au-mixed-300-ios/subscriptions/1-month","com.skype.skype.subscription.bd_mixed_400_ios.1_month":"/offers/calling/skus/bd-mixed-400-ios/subscriptions/1-month","com.skype.skype.subscription.in_mixed_800_ios.1_month":"/offers/calling/skus/in-mixed-800-ios/subscriptions/1-month","com.skype.skype.subscription.us_mixed_unlimited_ios.1_month":"/offers/calling/skus/us-mixed-unlimited-ios/subscriptions/1-month","com.skype.skype.subscription.world_mixed_unlimited_ios.1_month":"/offers/calling/skus/world-mixed-unlimited-ios/subscriptions/1-month","com.skype.skype.subscription.true_world_mixed_unlimited_ios.1_month":"/offers/calling/skus/new-world-mixed-unlimited-ios/subscriptions/1-month","com.skype.raider.subscription.world_mixed_unlimited_gplay.1_month":"/offers/calling/skus/world-mixed-unlimited-ios/subscriptions/1-month"},destinations:{enabled:!1},personalizedOffers:{enabled:!1,balanceStatePanelEnabled:!1,callFailureScreenEnabled:!0,callFailureScreenPrefilledFallback:!0,usePreFilledAfterTimeout:!0,timeoutTime:5e3},webToNativeOfferMap:{ipad:{},iphone:{},gPlay:{}},manageSubscription:{apple:{enabled:!0,subscriptionPlanRegExp:"-ios$",url:"itms-apps://apps.apple.com/account/subscriptions"},gPlay:{enabled:!1,openInExternalBrowser:!1,subscriptionPlanRegExp:"-gplay$",url:"https://play.google.com/store/account/subscriptions"}},ios:{credit:{china:["com.skype.tomskype.pricetier.5"],ipad:["com.skype.SkypeForiPad.pricetier.5","com.skype.SkypeForiPad.pricetier.10","com.skype.SkypeForiPad.pricetier.25"],iphone:["com.skype.skype.pricetier.5","com.skype.skype.pricetier.10","com.skype.skype.pricetier.25"]},subscription:{china:[],ipad:[],iphone:["com.skype.skype.subscription.au_mixed_300_ios.1_month","com.skype.skype.subscription.bd_mixed_400_ios.1_month","com.skype.skype.subscription.in_mixed_800_ios.1_month","com.skype.skype.subscription.us_mixed_unlimited_ios.1_month","com.skype.skype.subscription.true_world_mixed_unlimited_ios.1_month"]},skypeNumber:{china:{},ipad:{},iphone:{}}},android:{credit:{gPlay:["com.skype.raider.pricetier.5","com.skype.raider.pricetier.10","com.skype.raider.pricetier.25"]},subscription:{gPlay:["com.skype.raider.subscription.au_mixed_300_gplay.1_month","com.skype.raider.subscription.bd_mixed_400_gplay.1_month","com.skype.raider.subscription.in_mixed_800_gplay.1_month","com.skype.raider.subscription.us_mixed_unlimited_gplay.1_month","com.skype.raider.subscription.world_mixed_unlimited_gplay.1_month"]},skypeNumber:{gPlay:{US:"com.skype.raider.skype_number.us_gplay.1_month",GB:"com.skype.raider.skype_number.gb_gplay.1_month"}}},subscriptionSearch:{iphone:[],ipad:[],gPlay:[]},disclaimers:{indiaCallLimitations:{enabled:!1,learnMoreLink:"https://go.skype.com/indiafaq",subscriptions:["com.skype.skype.subscription.in_mixed_800_ios.1_month","com.skype.skype.subscription.in_mixed_2500_ios.1_month","com.skype.raider.subscription.in_mixed_800_gplay.1_month"]}}},webProducts:{refreshIntervalSeconds:60,goLinkCreditCheckout:"client.s4l.credit-checkout.web",goLinkCallingCheckout:"client.s4l.calling-checkout.web",goLinkCreditSelection:"client.s4l.credit-selection.web",goLinkCallingSelection:"client.s4l.calling-selection.web",goLinkCallingRates:"client.s4l.calling-rates.web",credits:[{goLink:"client.s4l.credit-checkout.web",apiPurchaseItem:"/offers/credit/skus/credit-5"}],subscriptions:[{goLink:"client.s4l.calling-rates.web",apiPurchaseItem:""}],destinations:{enabled:!1},disclaimers:{indiaCallLimitations:{enabled:!1,learnMoreLink:"https://go.skype.com/indiafaq",subscriptions:["in-mixed-100","in-mixed-800","in-mixed-2500"]}},billingPeriods:{enabled:!1,useAssetsApi:!1,periods:{threeMonths:!1,twelveMonths:!1}}},webConfig:{pathsRequiringHeaders:["buy/offer/","portal/overview/","portal/profile/"],checkoutPaths:["buy/offer/","my/checkout/"],checkoutOfferParams:["item","F%5BexternalId%5D"]},atu:{offerHref:"/offers/credit/skus/credit-10",limits:{EUR:"2,00",USD:"$2.00",GBP:"2.00",JPY:"300",PLN:"8,00 z",SEK:"20 kr",DKK:"kr.16,00",HKD:"HK$ 20.00",NOK:"kr 16,00",CAD:"C$3.00",AUD:"AU$4.00",CHF:"SFr. 4.00",CNY:"12.00",BRL:"R$ 6,00",TWD:"NT$80",KRW:"3,000",INR:" 120.00"}},callFailure:{callFailurePrompt:{enabled:!1,addParticipantEnabled:!1,copiesOption:"positive",cardsToShow:{credit:1,calling:1}},smsFailurePrompt:{enabled:!1,cardsToShow:{credit:1,calling:1}},postPurchasePrompt:{enabled:!1,timeLimitMinutes:10},tasterPostCall:{enabled:!1,cardsToShow:{credit:1,calling:1}}},pstnProfileOption:{enabled:!1},newBuyCreditExperience:{preselectedCreditId:"credit-10",iPadPreselectedCreditId:"com.skype.SkypeForiPad.pricetier.10",gPlayPreselectedCreditId:"com.skype.raider.pricetier.10",useClientFormattingForCurrencies:[],wrapForContentLengthGreaterThan:10,sizes:{large:{contentLengthThreshold:4,smallDeviceFontSize:20,selectedItemSmallDeviceFontSize:20,mobileFontSize:20,selectedItemMobileFontSize:20,desktopFontSize:20,selectedItemDesktopFontSize:20},medium:{contentLengthThreshold:8,smallDeviceFontSize:14,selectedItemSmallDeviceFontSize:14,mobileFontSize:16,selectedItemMobileFontSize:16,desktopFontSize:19,selectedItemDesktopFontSize:19},small:{contentLengthThreshold:100,smallDeviceFontSize:13,selectedItemSmallDeviceFontSize:13,mobileFontSize:16,selectedItemMobileFontSize:16,desktopFontSize:19,selectedItemDesktopFontSize:19}}},createOrderFailure:{recoveryFlowEnabled:!1,forceRedirectToWebEnabled:!1,displayUserMessage:!0},payments3ds:{enabled:!1,popupDelay:.5,allowRetryOnPurchaseLimitReached:!0,allowRedirectPage:!0,redirectGolink:"3ds.checkout",redirectParamName:"pspRedirect"},smsPromo:{unpaidUserEnabled:!1},googlePay:{enabled:!1,enabledForSubscriptions:!1,tokenSpecGateway:"adyen",tokenSpecMerchantId:"SkypeAdyenOneOff",merchantName:"Skype Communications S.a.r.l.",merchantId:"BCR2DN6TSO56BQLA",forbiddenForOfferIds:[],instrumentName:"Google Pay",instrumentDisplay:"Google Pay",instrumentLogoPath:"payment/methods/logo/large/GOOGLE-PAY",totalPriceStatus:"NOT_CURRENTLY_KNOWN",storeInstrument:"0",storeInstrumentForSubscriptions:"1",tempDisableAfterError:!0},enableAgeAppropriateDesign:!1}}_getHeadersDefault(){return{CountryCode:"",ETag:"",Expires:Date.now().toString(),StatusCode:""}}_getPeopleSearchDefault(){return{v2Endpoint:"https://skypegraph.skype.com/v2.0/search",serviceSettings:{experiment:"Default",geoProximity:"disabled"}}}_getS4LEntitlementDefaults(){return{SCE:{UserServices:{Client:{Features:{BackendEnabled:!0,UIEnabled:!0,AdvancedPullingEnabled:!0,RateIntegrationEnabled:!0,ReactivationEnabled:!1,DarkerDialerBarEnabled:!1,OldEntitlementsClientEnabled:!1,NewUcuxCallActionEnabled:!1,ImprovedPollingTelemetryEnabled:!1,gPlayFallbackToSkypeOffers:!0},Service:{Host:"consumer.entitlement.skype.com",RetryLimit:5,RetriableCodes:["40402","50310","500"],RetryInterval:[{Codes:["40402"],Pattern:[5e3,1e4,2e4,3e4,6e4]},{Codes:["50310","IOException"],Pattern:[1e3,2e3,4e3,8e3,16e3]}],PollingStrategies:{Long:36e5,Medium:3e5,Fast:3e3,Immediate:0}},Experiments:{SkypeToPhoneCard:"default",SkypeToPhoneInProfile:!0,SkypeToPhoneBanner:"default"}},ServiceGroups:{Credit:["pstn"],Calling:["plan","package","minute_plan"],OnlineNumbers:["skypein","skypein2"],PersonalExpressions:["moiji"]}},Dialpad:{EmergencyCall:{allowedCountries:["gb","fi","au","dk","us"],allowedNumbers:["000","01","02","03","04","08","11","15","16","17","18","051","61","62","91","93","94","100","101","102","103","104","105","107","108","110","111","0112","112","113","114","115","117","118","119","122","123","128","133","140","141","142","143","144","145","147","150","151","155","158","160","163","166","175","177","179","190","191","192","196","197","199","532","911","961","984","985","986","987","991","992","993","994","995","996","997","998","999","1145","1400","1412","1414","1415","1510","1515","1525","1530","1591","1717","1800","1802","1804","1987","9155","116000","116006","116111","116117","116123"]},E911:{enabledCountries:["us"],locationEnabled:!0,locationNumbers:["911"],locationUpdateEventEnabled:!0,locationUpdateThrottlingMs:6e5,locationFAQLink:"https://go.skype.com/e911"},CountryCodeToCountryDefault:{1:"us",7:"ru",44:"gb",47:"no",61:"au",64:"nz",262:"re",358:"fi",500:"fk",590:"gp",599:"cw"},ContactsSearch:{ExecutionDelay:280,T9SearchEnabled:!1},Calling:{TestPrefixes:[999],NonGeographicPrefixes:[800,883,870,871,872,873,874,888]},Features:{ContactsIconEnabled:!1,SaveContactEnabled:!1,SiriIntegrationPromptEnabled:!1,SmsButtonEnabled:!0,ExtensionDialingEnabled:!1,TasterPromotionEnabled:!1},NumberInput:{decodeHtmlMaxIterations:5}},CallRates:{PerCurrency:{AUD:.025,BRL:.05,CAD:.024,CHF:.02,CNY:.14,DKK:.127,EUR:.017,GBP:.014,HKD:.18,INR:1.39,JPY:2.26,KRW:24.95,NOK:.137,POL:.07,SEK:.149,TWD:.68,USD:.023},TasterCallMaxDurationMinutes:5},PersonalizedOffers:{Features:{CallEndRecommendationsEnabled:!0,FreeTrialsEnabled:!1,UpsellOnBalanceStateEnabled:!1,UpsellOnBalanceStateSettings:{cardsToShow:3,defaultOpened:!0,showAllButtonEnabled:!1},DynamicRecommendationsLoadingEnabled:!1,RecommendationsToLoadCount:3,PromotionsEndpointsTelemetryEnabled:!1,SearchOnViewMoreClick:{enabled:!1,nativeSearchOnSecondClick:!1}}},ConsumableProducts:{Features:{gPlayConsumablesEnabled:!1}},CallingSubscriptions:{Features:{UpgradeEnabled:!1,UpgradeCoachMarkEnabled:!1,iOSSubscriptionsEnabled:!1,gPlaySubscriptionsEnabled:!1,MinutesResetEnabled:!1,ManageSubscriptionsUXImprovements:!1},UpgradeSettings:{Threshold:.1}},SkypeToPhoneBanner:{Features:{BannerEnabled:!1,ForceShowBanner:!1}}}}}_getSkypeAudioLibraryDefaults(){return{ECS_AudioDL_DisableRouteChangeNotification:"0",ECS_ADSP_VirtualSessionVolume:"true"}}_getNativePlatformsDefaults(){return{enableIOSNewNotifications:!1,enableAlertNotifications:!1,dismissNotificationForReadMessages:!1,quickActions:{enabled:!1,options:a.DefaultQuickActionIds},iPadCredentialsMigration:!0,enableMacOSQuarantineFlagForDownloadedFiles:!1,enableRemoteClientAppearancePreferences:!1,enableElectronNativeModals:!1,enableElectronSplitView:!1,enableSplitView:!1,enableAndroidDirectShare:!1,enableMobileThemePickerAutoSkip:!1,enablePresenceCorrection:!1,enableAppActivationStateEventsDebouncing:!1,appActivationStateChangeDebounceTime:600,enableAndroidRConversationBubbles:!1,enableIAPFlowForAmazonDevices:!1,enablePurchaseLinkForAmazonDevices:!1,enableInAppNotificationsForMobileBrowsers:!1,showPluginlessCallingStackOption:!1}}_getJoinDefaults(){return{autoJoinCall:!1,guestFlow:{enabled:!1},meetings:{apiHost:"https://api.join.skype.com"},joinLinkHost:"https://join.skype.com"}}_getAdsDefaults(){return{enabled:!1,naExperimentEnabled:!1,naExperimentName:"No Experiment",isAdDescriptionClickable:!1,testDevices:[],placementSettings:{conversationList:{enabled:!1,forced:!1,minRequiredAdjacentItems:1,maxRequiredAdjacentItems:9999,placementIds:["noPlacementId"],bingAdsSettings:void 0,provider:g.AdsProvider.MeetNow,adsType:g.AdsType.ListItemNarrow,adsToRequest:0,isAdMediaClickable:!0,refreshIntervalInMinutes:50,canHide:!1,adIconMaskSettings:{enabled:!0,adIconMask:"CircleBigNeg"},fixedPosition:8,enhancedPositioning:{enabled:!0,minPosition:2,availableScreenSizeFactor:1,minimumVisibleAdHeightRate:.05,allowMoveToPreviousGroup:!0,groupLimitation:g.AdsListGroupType.Favourites},dynamicDimensionsSettings:{enabled:!0,adMediaRatio:1.91,defaultMediaHeight:119,defaultMediaWidth:227,numberOfNeighbouringItemsDefiningMaxAdHeight:4},backupContent:{enabled:!1,contentProvider:g.AdsProvider.Msn,switchAfterErrorCount:0,switchDelayInSeconds:1},rotateProviderAfterNErrors:1,rotateProviderWhenNotEligible:!1},alertsPanel:{enabled:!1,forced:!1,minRequiredAdjacentItems:1,maxRequiredAdjacentItems:9999,placementIds:["noPlacementId"],bingAdsSettings:void 0,provider:g.AdsProvider.MeetNow,adsType:g.AdsType.ListItemNarrow,adsToRequest:0,canHide:!1,isAdMediaClickable:!0,refreshIntervalInMinutes:50,adIconMaskSettings:{enabled:!0,adIconMask:"CircleBigNeg"},fixedPosition:8,enhancedPositioning:{enabled:!0,minPosition:2,availableScreenSizeFactor:1,minimumVisibleAdHeightRate:.05,allowMoveToPreviousGroup:!1,groupLimitation:g.AdsListGroupType.None},dynamicDimensionsSettings:{enabled:!0,adMediaRatio:1.91,defaultMediaHeight:119,defaultMediaWidth:227,numberOfNeighbouringItemsDefiningMaxAdHeight:4},backupContent:void 0}},msnApiContent:{ocid:"skypeint",apiKey:"NO_API_KEY",downloadProviderIcon:!0,msnFeedbackUrl:"https://api.msn.com/feedback/api/AppEvents",msnPersonalizeUrl:"https://go.microsoft.com/fwlink/?LinkID=286759",categoryFilter:["lifestyle"]},templateSettings:{msn:{showSponsored:!0,showAdChoices:!1,narrowTemplateShowButton:!1,narrowTemplateShowButtonNoBorder:!1,bannerShowProviderIcon:!0,bannerShowAdLabel:!1,nativePrefixSponsoredWithProviderName:!1},meetnow:{showSponsored:!1,showAdChoices:!1,narrowTemplateShowButton:!0,narrowTemplateShowButtonNoBorder:!1,bannerShowAdLabel:!1,bannerTitleWithBody:!0},fan:{showSponsored:!0,showAdChoices:!0,narrowTemplateShowAdChoicesUnderSponsored:!0}},featurePromoConfig:{showToPaying:!0,showToUnderAge:!0,meetNowShowOnlyToSmallContactList:!1,meetNowShowOnlyWhenNotUsed:!1,meetNowSmallContactListSize:3,meetNowTitleVariant:2},reloadOnClick:!0}}_getOnboardingDefaults(){return{enableCoachMarks:!0,enableReportProblemViaBot:!1,enableInContextCameraPermission:!1,themeAwareOnboardingEnabled:!1,contactInviteHeaderVariant:y.ContactInviteHeaderVariant.Old,useCommonAvatarPicker:!1,showAvatarUploadPictureButton:!1,showAvatarPickerOnlyToUsersWithoutAvatar:!1,desktopAvatarPickerRedesignEnabled:!1,desktopAvatarPickerRedesignVariant:void 0,features:{enablePrefillPhoneNumberAndCode:!1,enableReportProblemDirectly:!1,disableAllDialogsAndPopCards:!1,enablePhoneNumberVerification:!1,showPrefillPhoneNumberPrompt:!1,checkAccountSectionDataLoadTimeOut:1e3,checkAccountSectionBoxEnabled:!0,androidFinishSetupPromptEnabled:!0,showMobileCoachmarksOnFirstRun:!0,disableShowWebSetupWizardOnlyOnce:!1,landingCarouselWebsiteLink:"https://www.skype.com",userProfileScreen:{enabled:!1,enableAddPhone:!1,enableAddEmail:!1,learnMoreLink:"https://go.skype.com/privacy",closeBackIconEnabled:!1},emptyStateBanner:{enabled:!1,type:h.EngagementBannerType.CreateGroup,syncContactsBannerConvCountLimit:5},skipAudioVideoSettingsSteps:!1},landingPageWithCards:{enabled:!1,cardsConfig:{},timelineConfig:{},whatsNewCardAfterUpdate:{enabled:!1,showCardTimes:3,cardActionUrl:"https://go.skype.com/whats.new.client"}},enableContactSyncWithoutConfirmationScreen:!1,telemetryConsent:{enabled:!0},hubToShowAfterFinishedOnboarding:y.HubToShowAfterFinishedOnboarding.Recents,displayUserIconInAllHubs:!1,enableThemeUsingSystemDefaultOnly:!1,conversationsListEmptyStateDesignV2:{enabled:!1,backgroundVariant:y.ChatsEmptyStateBackground.Chat},enableEmptyStateCTADesignV2:!1}}_getEngagementDefaults(){return{engagementSenderIdentity:["28:concierge","28:concierge_df"],conciergeBlockedMessageTypes:["RichText","RichText/Media_FlikMsg","RichText/Media_Card"],conciergeBotSettings:{enableVisibility:!1,enableMessageReactions:!1,allowedRecentMessageTypes:["RichText"]},notAllowedForChildrenList:[],enableExternalBrowserLinkOpen:!1,enableInAppBrowserLinkOpen:!1,enableFirstRunExperienceFiltering:!0,firstRunExperienceAllowedList:[],shouldPrevalidateChatServiceMessage:!1,notices:{enabled:!1,defaultTimeoutSeconds:1209600,enabledMessageContentTypes:[],maxBulkSize:20,schemaVersion:[1]},popCards:{enabled:!1,backButtonEnabled:!0,escKeyEnabled:!0,defaultTimeoutSeconds:1209600,maxBulkSize:10,toggleCloseOnLeft:!1,uiVersion:h.EngagementUiVersion.V3,imagePreloadEnabled:!0},coachMarks:{disabledCoachMarkAreas:[],disabledCoachMarkTypes:[],thresholdPerSession:0,navigationAnimationDelayInMilliseconds:1e3},tooltips:{campaignName:"",enabledTypes:[],emoticonsAfterBody:{},imageAfterBody:{},triggers:{},showGotItButton:{}},engagementUserTagging:{enabled:!0,maxDurationInSeconds:10},clientTriggeredEngagement:{enabled:!1,queueProcessingDelayInMs:500,campaignFiltering:{enabled:!1,allowedCampaignIds:[]}},engagementTelemetryAttributes:{allowedKeys:[]},engagementPostMessage:{enabled:!1,userContextAllowedOrigins:[]},engagementApiClient:{enabled:!0,engagementApiHostPath:"https://engagementapi.skype.com/v1",excludedCampaignIds:[],requestRetries:3,postApiEnabled:!1},engagementShareableContent:{enabled:!0,enableOneClickSend:!0,enableCustomMessageField:!1,enableCarousel:!0,dialogTitleVariant:h.EngagementShareableContentTextVariant.ShareContacts,cardBtnTitleVariant:h.EngagementShareableContentTextVariant.Share},notificationSettings:{emailNotificationsSettingsEnabled:!1,emailMissedMessageReminders:{enabled:!1,timeWindowInHours:24},emailMissedCallReminders:{enabled:!1,timeWindowInHours:24}},engagementMessagesQueue:{enabled:!1,refreshTime:6e5},signInReminders:{enabled:!1,schedule:[],throttlingInSeconds:-1,campaignId:"",emitControlTelemetryEnabled:!1},signOutReminders:{enabled:!1,schedule:[],throttlingInSeconds:-1,campaignId:"",emitControlTelemetryEnabled:!1},engagementHelperRetrySetting:{maxNumberOfRetries:5,exponentialTimeForRetryInitialTime:100,exponentialTimeForRetryMaxTime:5e3},engagementOfflineTargetedPullSetting:{searchForOfflineTargetedPullMetadataEnabled:!1},engagementCelebrationNotificationSetting:{enabled:!1,refreshTime:864e5,celebrationNotificationsTopContactCutOff:-1,isThrottlingOnLocalSettingsEnabled:!1,isThrottlingOnRoamingSettingsEnabled:!1,isContactCutOffEnabled:!1,getAllContactsMrisEnabled:!1,isDiscardingOnAppActiveEnabled:!1},whatsNewSetting:{enabled:!1,url:"https://go.skype.com/whats.new.client",coachmarkEnabled:!1},inviteFriendsSetting:{enabled:!1,isBold:!1},guestUserUpsell:{enabled:!0,meetNowWebUrl:"https://www.skype.com/en/free-conference-call/?cm_mmc=guest_postcall",meetNowDeepLink:"skype-meetnow:?action=meetnow&partner=guestUpsell"},engagementPostCallCampaign:{enabled:!1,campaignId:"",campaignVariant:"",eligibleCallOrigins:[p.NavigationCallOrigin.ConversationHeader,p.NavigationCallOrigin.ConversationListItem,p.NavigationCallOrigin.MeetNow]}}}_getSkypeEngagementDefaults(){return{experiments:{},pullCampaigns:{},blockedCampaignIds:[],shareableContent:{},birthdayContent:{campaignId:"",variantId:"",celebrationNotificationsTopContactCutOff:-1}}}_getS4LFeedbackDefaults(){return{forceSsoFlow:!1}}_getS4LIntegrationsDefaults(){return{enableDesktop:!1,enableAps:!0,apsPublishedStatus:"published",bingIntegration:{enabled:!1,id:"bing",name:"Search",icon:"https://www.bing.com/favicon.ico",url:"https://www.bing.com/api/custom/v1/skype/findpanelconfig",version:1,brandColor:"",brandTextColor:""},integrations:[{enabled:!1,id:"youtube",name:"Youtube",brandColor:"#e62117",brandTextColor:"#ffffff",icon:"https://skypeapps.azureedge.net/assets/youtube/youtube.png",url:"https://skypeapps.azureedge.net/youtube/",version:1}],nativeIntegrationSettings:{onedrive:{maxRecentItemCount:5,shouldShareOnTappingFileItem:!0,shouldShowThumbnailAsFileTypeIcon:!1,shareCardType:"application/vnd.microsoft.card.thumbnail",shouldShowInAddFilesAsAnOption:!1}},findPanelLayout:{isFlatList:!1,includeMediaBarItemsInFlatList:!1,excludedMediaBarItemsInFlatList:[]}}}_getS4LSisuDefaults(){return{msaClientFlight:"ReservedFlight33,suhs",msaClaims:"",msaFlightParameter:"phone2",msaLightweightEnabled:!0,wamLoginEnabled:!1,msaWebViewBackButtonEnabled:!1,enableMsaPhoneAccrual:!0,enableMsaWebViewPreload:!1,forceMobileView:!1,cobrandId:f.MsaCobrand.SkypeDefault,enableNopa:!1,nopaVersion:1,enableCoBaSi:!0,coBaSiVersion:1,sisuExpId:"Default",enableCloseMyAccount:!0,quickSignOnEnabled:!0,enableAccountProviderMultipleAccounts:!1,interruptHandlerEnabled:!0,hideInterruptHandlerOnFirstTimeSignIn:!1,enableSso:!0,phoneVerificationCampaignEnabled:!1,autoSignInEnabled:!0,signoutSurveyEnabled:!1,enableAvatarAppBadge:!1,phoneVerificationCampaignQueryInterval:6048e5,wamRequestRetryTimerInHours:1,enableSiSuRedesignWebViewTopBanner:!0,enableRemoveAccountOnSignOut:!0,identityUrls:{substitutionValue:"%username%",avatar:{enabled:!0,url:"https://avatar.skype.com/v1/avatars/%username%"},avatarPublic:{enabled:!0,url:"https://avatar.skype.com/v1/avatars/%username%/public"},profile:{enabled:!0,url:"https://edge.skype.com/profile/v1/users/%username%/profile"},profilePartial:{enabled:!0,url:"https://edge.skype.com/profile/v1/users/%username%/profile/partial"},ssoNonce:{enabled:!0,url:"https://edge.skype.com/sso/v1/skypetoken"}},reminderNotificationsSchedule:{logoutReminder:[1,3,7,15],remindersToCancelOnLaunch:10},backgroundTokenRefresh:{enabled:!0,enableRefreshTelemetry:!0,forceRefresh:!1,timerRefreshDayInterval:1},enableFailedMigratedCredentialsStorage:!0,signInButtonLabelType:1,enableMigratedCredentialsRecovery:!0,autoSelectInterruptedAccount:!1,msaConvergenceFlags:{convergenceEnabled:!1,entryPointStalenessWindowEnabled:!0,entryPointStalenessWindow:3e5,softInterruptEnabled:!1,interruptInBackground:!1,interruptOnCalls:!1,interruptOnNotifications:!1},msaTokenKeyMigration:{enabled:!1,keychainKey:"Skype for Desktop MSAv2"},validateMsaTokenInKeychain:!1,msaProfileAgeGroupTTL:108e5,aadcLearnMoreLink:"",alternativeLoginMethods:{methods:[],flipMainAndAlternativeSisuButtons:!1}}}_getS4LUiDefaults(){return{onlinePresenceTimeoutSeconds:180,showReportAProblemInDesktopOverflow:!1,leftSideBarResizeMode:g.SideBarResizeMode.None,useNativeContextMenus:!0,androidTabletSizeThreshold:6.8,tabletConversationDetailsEnabled:!1,errorSafeImageAltViewDelayMs:200,jsonAnimationEnabled:!0,enableUwpToggleStyle:_.default.getPlatformType()===p.PlatformType.Windows,enableBrowseKnownIssuesLink:!1,searchBarStyle:0,enableRecentChatsSwipeActions:!1,recentChatsSwipeActionsConfig:{left:["markread"],right:["more","call"],overScrollLeft:!0,overScrollRight:!1,overScrollDistance:150},contextHeaderDropdownActions:{oneOnOne:["settings","sendsms","privateconversation","newgroup","translate","highlignts"],group:["settings","shareLink","addpeople"]},enableWebFooterEverywhere:!1,enableWebFooterPreviewBadge:!1,enableWebFeedbackBanner:!1,enableIOSCallsFABExperiment:!1,isPstnCallDetectionFix:!1,joinLinkPlaceholderText:"https://join.skype.com/code",enableWindowRightClose:!1,limitedSupportBrowserToastConfig:{enabled:!0,downloadGoLink:"https://www.microsoft.com/en-us/edge"},enableResponsiveDesign:!1,enableFlatListVLV:!1,enableStackReactNavigation:!1,enableNativeBaseModals:!1,enableNativeBaseControls:!1}}_getS4LTelemetryDefaults(){return{telemetrySampling:{},perfTelemetrySampling:{},censusTelemetryEnabled:!1,clockSkewRefreshDurationInMins:1,ariaMaxEvents:0,ariaEventsReportIfGreater:0,enableTelemetryFiltering:!0,enableTelemetryConsentUI:!1}}getTelemetryDefaults(){return{kpi_inapp_activity_ended:{enabled:b},kpi_inapp_activity_start:{enabled:b},kpi_call_ended:{enabled:b},kpi_message_viewed:{enabled:b},kpi_message_sent:{enabled:b,percentage:10},kpi_message_delivered:{enabled:b,percentage:10},kpi_chatsync_complete:{enabled:b},kpi_pushnotif_delivered:{enabled:b},kpi_pushnotif_displayed:{enabled:b},kpi_badge_count_state:{enabled:b},kpi_client_init:{enabled:b},kpi_push_to_sync_complete:{enabled:b},kpi_search_request:{enabled:b},kpi_postsearch_action:{enabled:b},kpi_contacts_sync_complete:{enabled:b},kpi_chat_service_connection:{enabled:b},kpi_message_sent_retry:{enabled:b},kpi_chatsync_failed:{enabled:b},file_sent:{enabled:b},file_received:{enabled:b},log_crash_sent:{enabled:b},contacts_sync_start_time:{enabled:b},contacts_sync_end_time:{enabled:b},kpi_longpoll_complete:{enabled:b,percentage:1},kpi_longpoll_failed:{enabled:b,percentage:1},sendEcsExpirationTime:!0,engagement_push_notification_event:{enabled:b}}}_getAsyncMediaDefaults(){return{auth_trusted_domains:"go.skype.com;login.skype.com;*.api.skype.com;*.asm.skype.com;*.asm.skype.net;neu1-api-xmm.cloudapp.net;*.neu1-api-xmm.cloudapp.net;url-preview.cloudapp.net;*.url-preview.cloudapp.net;latest-webclient.skype.com;web.skype.com;mockproxy-asynclib.cloudapp.net;mockproxy-asynclib3.cloudapp.net;mockproxy-asynclib2.cloudapp.net;authgwint.trafficmanager.net;authgw-preqa.cloudapp.net",trusted_domains:"go.skype.com;login.skype.com;*.api.skype.com;*.asm.skype.com;*.asm.skype.net;neu1-api-xmm.cloudapp.net;*.neu1-api-xmm.cloudapp.net;url-preview.cloudapp.net;*.url-preview.cloudapp.net;*.secure.skypeassets.com;*.secure.skypeassets.net;latest-webclient.skype.com;web.skype.com;mockproxy-asynclib.cloudapp.net;mockproxy-asynclib3.cloudapp.net;mockproxy-asynclib2.cloudapp.net;authgw-preqa.cloudapp.net;avatar.skype.com;apps.skypeassets.com",third_party_downloader_url_schemas:"https;http",storage_limits:{original:{size:314573500},imgpsh:{size:20971520},video:{size:104857600,format:["mp4","mov","webm"]},thumbnail:{size:5242880},audio:{size:20971520,format:["m4a","wav","mp3"]}},cdn_cookie_refresh_request_enabled:!0,cdn_cookie_setter_debounce_wait:6e4,ams_cookie_refresh_request_enabled:!0,ams_cookie_setter_debounce_wait:6e5,fallback_to_file:!1,ams_base_url:"https://api.asm.skype.com",ams_skypetokenauth_url_format:"{0}/v1/skypetokenauth",ams_create_document_url_format:"{0}/v1/objects",ams_doc_url_format:"{0}/v1/objects/{1}",max_extension_length:4}}_getPesDefaults(){return{pes_config:"https://static-asm.secure.skypeassets.com/pes/v1/configs/854962fa4bbc4be6a04d545ef2e73ea9/views/default",sticker_config:"https://static-asm.secure.skypeassets.com/pes/v1/configs/fc800ab4c80e49d6a598bd6d403772e2/views/default",sticker_chat_config:"",gif_config:"https://static-asm.secure.skypeassets.com/pes/v1/configs/dc9817a7240f4451a3b97aa11cd75416/views/default"}}_getSkypeRootToolsDefaults(){return{ULBaseline:{}}}_getTrouterJScriptClientDefaults(){return{TrouterConnectionUrl:"https://go.trouter.skype.com/v4/a",TelemetryEnabled:!0,ClientTelemetryEventEnabled:{trouter_js_client_connected:!0,trouter_js_client_disconnected:!0,trouter_js_client_error:!0,trouter_js_client_progress:!0,trouter_js_client_response:!0,logHealthCheckError:!0,numberOfStepsToMaintain:0,sendProgressTimeoutSecs:0}}}_getDebugabilitySquadDefaults(){return{brb_enabled:!1,brb_upload_logs_for_hockeyapp_crash:!1}}_getSkypeRealTimeMediaDefaults(){return{Configurations:{CQF_Trigger:{S2S_Percent:10,PSTN_Percent:10,GroupCall_Percent:10,MinCallDurationSecs:5}}}}_getS4LStratusDefaults(){return{request:{includeDeviceIdInRequestPolicy:"requested"}}}_getOEMConfigDefaults(){return{zeroRating:{mccMncList:[]}}}_getIntConfigDefaults(){return{ecs:{hosts:["https://config.edge.skype.net"],fetchTimeout:void 0,ignoreActivationState:!0},chat:{productionHost:"https://client-s.gateway.messenger.live-int.com/",dogfoodHost:"https://client-s.gateway.messenger.live-int.com/",blacklistedHosts:[],prodCloudParam:"",dogfoodCloudParam:"",notifyLikes:!0,forceChSetOnSend:!0,serverSideEdits:!0,serverSideEdits1to1:!0,backgroundReleaseWakeLockTime:500,backgroundWaitForAmsUpload:!1,backgroundPostingHoldOwnWakeLockEnabled:!0,backgroundWakeLockWhilePostWaitingForTransfer:!0,authentication:{useRegToken:!0},syncBackoffOnNoNetwork:!0,restoreEndpointsTimeout:25e3,reportInternalFailures:!1,reportUnknownInternalFailures:!1,reportSystemExceptionInternalFailures:!1,syncWhenNoSubscription:!0,syncFreeFetchesConfig:{maxFetchesREST:4,bandwidthAwareFetchesREST:3},maxSimultaneousRESTRequests:{defaultMaxRequests:10,maxRequestsByNetworkType:{3:4,4:7}},enableForegroundMessagePostWithREST:{},recreateEndpointOnSameLocationRedirect:!0,updateEndpointOnEcsEtagChange:!1,dontPersistSessionInfoOnWeb:!0,durableEndpointId:{enabled:!1,recreateToMatchEnabled:!1},userPropertiesExpirationTime:6e4,chatServiceHostRefreshEnabled:!1,chatServiceHostRefreshInterval:1e4,chatServiceRedirectTimerEnabled:!1,msgApiConfig:{enabled:!1,host:"https://noam-canary.msgapi.teams.microsoft.com/"},msgDeletionLearnMoreLink:"https://support.skype.com/faq/FA34636",keepConnectionIfNotActive:!1},abch:{profileUrl:"https://scd.skype.com/",appId:"d5e63001-9bae-4d30-9b77-fd84664df1ec"},bot:{joinLink:"https://join.skype.net/bot/"},contacts:{host:"https://contacts.skype.net/",dogfoodHost:"https://contacts.skype.net/"},messageSearch:{host:"https://search-int.cloudapp.net/v2/",searchQueryDelay:0},stratus:{host:"https://qaapi.skype.net/"},secureStratus:{host:"https://qasecure.skype.net/"},appAssets:{host:"https://qaapps.skypeassets.net/"},promotions:{host:"https://qa-promotions.skype.net/"},go:{host:"https://qago.skype.net/"},aps:{host:"https://aps-dev-0-skype.cloudapp.net/"},avatars:{host:"https://avatar.skype.net/v1/avatars/"},rps:{host:"https://edge.skype.net/"},optionsService:{productionHost:"https://optionsservice-test-northeurope.cloudapp.net:443/options/",dogfoodHost:"https://optionsservice-test-northeurope.cloudapp.net:443/options/"},peopleService:{host:"https://people.skype.net/"},entitlements:{host:"https://consumer.entitlement.test.skype.net/"},loginLive:{host:"https://login.live-int.com/",clientId:"0000000060403363",scopes:"service::lw.skype.net::MBI_SSL"},signUpLive:{host:"https://signup.live-int.com/signup"},loginSkype:{host:"https://qalogin.skype.net/"},asm:{cdnUrl:"https://static-asm.secure.skypeassets.com"},pes:{emoticonBaseUrl:"https://static-asm.secure.skypeassets.net/pes/v1/emoticons",skypeServiceHost:"static.asm.skype.net",tokenSourceEndpoint:"/pes/v1/petoken",cdnServiceHost:"static-asm.secure.skypeassets.net",cookieSourceEndpoint:"/token/token_to_cookies",cdnTokenTtlMs:24e4,rewriteRules:[{from:"static.asm.skype.net",to:"static-asm.secure.skypeassets.net"},{from:"api.asm.skype.net",to:"static-asm.secure.skypeassets.net"}],xmmFallbackUrl:"https://qalogin.skype.net/login/sso",xmmFallbackUrlParams:"?go=webclient.xmm&amp;"},urlPreview:{host:"https://urlp.asm.skype.net/v1/",gifSizeLimitInBytes:12e5,timeout:1e4},inviteLinkGenerator:{host:"https://df-inviteconnector.skype.net/"},registrar:{host:"https://qe.registrar.skype.net/",registrationRelativeUrl:"v2/registrations"}}}_getConfigDefaults(){return{ecs:{hosts:["https://config.edge.skype.com"],fetchTimeout:void 0,ignoreActivationState:!0},chat:{productionHost:"https://client-s.gateway.messenger.live.com/",dogfoodHost:"https://co4-df-client-s.gateway.messenger.live.com/",blacklistedHosts:[],prodCloudParam:"cloud=apis",dogfoodCloudParam:"cloud=df-apis",notifyLikes:!0,forceChSetOnSend:!0,serverSideEdits:!0,serverSideEdits1to1:!0,backgroundReleaseWakeLockTime:500,backgroundWaitForAmsUpload:!1,backgroundPostingHoldOwnWakeLockEnabled:!0,backgroundWakeLockWhilePostWaitingForTransfer:!0,authentication:{useRegToken:!0},syncBackoffOnNoNetwork:!0,restoreEndpointsTimeout:25e3,reportInternalFailures:!1,reportUnknownInternalFailures:!1,reportSystemExceptionInternalFailures:!1,syncWhenNoSubscription:!0,syncFreeFetchesConfig:{maxFetchesREST:4,bandwidthAwareFetchesREST:3},maxSimultaneousRESTRequests:{defaultMaxRequests:10,maxRequestsByNetworkType:{3:4,4:7}},enableForegroundMessagePostWithREST:{},recreateEndpointOnSameLocationRedirect:!0,updateEndpointOnEcsEtagChange:!1,dontPersistSessionInfoOnWeb:!0,durableEndpointId:{enabled:!1,recreateToMatchEnabled:!1},userPropertiesExpirationTime:6e4,chatServiceHostRefreshEnabled:!1,chatServiceHostRefreshInterval:1e4,chatServiceRedirectTimerEnabled:!1,msgApiConfig:{enabled:!1,host:"https://noam-canary.msgapi.teams.microsoft.com/"},msgDeletionLearnMoreLink:"https://support.skype.com/faq/FA34636",keepConnectionIfNotActive:!1},auth:{skypeTokenFetchBeforeExpiryMinutes:720,skypeTokenFetchBeforeExpiryMinutesUWP:60,skypeTokenFetchBeforeExpiryMinutesGuest:5},profile:{maxProfileAge:864e5},abch:{profileUrl:"https://pnv.skype.com/profile/",appId:"d5e63001-9bae-4d30-9b77-fd84664df1ec"},asm:{cdnUrl:"https://static-asm.secure.skypeassets.com"},bot:{joinLink:"https://join.skype.com/bot/"},contacts:{host:"https://contacts.skype.com/",dogfoodHost:"https://df.contacts.skype.com/"},feedback:{host:"https://feedback.skype.com",sendLogsByDefault:!1},search:{longQueryCharCount:3},graphSearch:{searchQueryDelay:0},messageSearch:{host:"https://msgsearch.skype.com/v2/",searchQueryDelay:0},groupDbSearch:{searchQueryDelay:100},botSearch:{searchQueryDelay:0},stratus:{host:"https://api.skype.com/"},secureStratus:{host:"https://secure.skype.com/"},appAssets:{host:"https://apps.skypeassets.com/"},promotions:{host:"https://api.promotions.skype.com/"},go:{host:"https://go.skype.com/"},aps:{host:"https://api.aps.skype.com/"},avatars:{host:"https://avatar.skype.com/v1/avatars/"},rps:{host:"https://edge.skype.com/"},optionsService:{productionHost:"https://options.skype.com:443/options/",dogfoodHost:"https://options-df.skype.com:443/options/"},peopleService:{host:"https://people.skype.com/"},entitlements:{host:"https://consumer.entitlement.skype.com/"},loginLive:{host:"https://login.live.com/",clientId:"00000000480BC46C",scopes:"service::lw.skype.com::MBI_SSL"},signUpLive:{host:"https://signup.live.com/signup"},loginSkype:{host:"https://login.skype.com/"},downloadSkype:{downloadSkypeUrl:"https://www.skype.com/get-skype"},pes:{emoticonBaseUrl:"https://static-asm.secure.skypeassets.com/pes/v1/emoticons",skypeServiceHost:"static.asm.skype.com",tokenSourceEndpoint:"/pes/v1/petoken",cdnServiceHost:"static-asm.secure.skypeassets.com",cookieSourceEndpoint:"/token/token_to_cookies",cdnTokenTtlMs:24e4,rewriteRules:[{from:"static.asm.skype.com",to:"static-asm.secure.skypeassets.com"},{from:"api.asm.skype.com",to:"static-asm.secure.skypeassets.com"}],xmmFallbackUrl:"https://login.skype.com/login/sso",xmmFallbackUrlParams:"?go=webclient.xmm&amp;"},profileCard:{manageProfileGoLink:"account.profile",manageAccountGoLink:"myaccount",closeMyAccountUrl:"https://go.microsoft.com/fwlink/?linkid=854340",closeMyAccountEndUrl:"https://account.live.com/MessagePage.aspx",closeMyAccountWebUrl:"https://go.skype.com/closeaccount",editProfileGoLink:"editmicrosoftaccount",learnMoreUrl:"https://go.skype.com/profilechanges.skype",manageMSAccountUrl:"https://account.live.com/names/Manage"},mySettings:{termsOfServiceGoLink:"tou"},balanceState:{fairUsagePolicyGoLink:"fair.usage.policy",manageSubscriptionsGoLink:"myaccount",callingRatesGoLink:"prices",callingOffersGoLink:"client.rates",noCreditGoLink:"check.account",noCreditLinkEnabled:!0,serviceDetailsGoLink:"client.s4l.service-settings"},skypeGoLinks:{servicesAgreement:"https://go.skype.com/microsoft.services.agreement",privacyAndCookies:"https://go.skype.com/privacy",refundPolicy:"https://go.skype.com/tou.refund",publicWebSafety:"https://go.skype.com/web.incognito",amazonPurchase:"https://go.skype.com/amazon",aadcLearnMoreLink:"https://go.skype.com/aadc.support.faq",giftSkypeCreditLink:"https://go.skype.com/send.credit"},registrar:{host:"https://prod.registrar.skype.com/",registrationRelativeUrl:"v2/registrations"},pstn:{host:"https://mrrcountries.cdn.skype.com/",ratesEndpoint:"pstn/v1.2/",indiaRegulatoryFaq:"https://go.skype.com/indiafaq",netherlandsRegulatoryFaq:"https://go.skype.com/help.calling.netherlands"},cortana:{mri:"28:cece905d-8137-4f70-8cbc-e94e16211a46"},bing:{signalsHost:"https://platform.bing.com/"},suggestions:{feedbackHost:"https://search.knowledge.store/api/SuggestedActions/Feedback"},urlPreview:{host:"https://urlp.asm.skype.com/v1/",gifSizeLimitInBytes:12e5,timeout:1e4},inviteLinkGenerator:{host:"https://inviteconnector.skype.com/"},termsUrl:{host:"https://go.microsoft.com/fwlink/?LinkID=246338"},infringementUrl:{host:"https://www.microsoft.com/info/cpyrtInfrg.html"},externalReportingUrl:{infringement:"https://go.skype.com/report.infringement",revengePorn:"https://go.skype.com/report.revengeporn"},privacyUrl:{host:"https://go.microsoft.com/fwlink/?LinkId=521839",splitSearchSuggestionsSettingsUrl:"https://go.microsoft.com/fwlink/?linkid=873474",profileLearnMoreUrl:"https://go.skype.com/privacy.profile",receiveContactSuggestionsUrl:"https://go.skype.com/receive.suggestions",appearInSuggestionsUrl:"https://go.skype.com/appear.suggestions"},frenchAccessibilityConformanceUrl:{label:"Accessibilit: partiellement conforme",host:"https://www.microsoft.com/fr-fr/accessibility/accessibility-statement"},azureMediaServices:{apiUrl:"https://api.azms.skypeassets.com/api/"},feedbackBot:{id:"a62068e3-63e9-4ffc-89a6-14d841e224d2",displayName:"Skype Bot"},foursquare:{endpoint:"https://api.foursquare.com/v2/venues/explore",clientId:"0IBWTR05GKAKUMWMMAVFP2CHFUAGNX00MDV1H1FMGLOYUUGK",secret:"YRSJUR2BPTUVQB405H55DGRYKQIUIEUMYGIEQ3DYR5BMH4QB"},endpointPresence:{activeEndpointRequestEnabled:!0,inactiveDelay:12e4,useSystemIdle:!1,idleSystemTimeWindow:180,ensurePresencePublished:!1},presence:{presenceAwayTimerInSeconds:3600,enablePresenceChangeNotification:!1,enableLegacyPresence:!0,enableUpsPresence:!1,upsUrl:"https://noamdf.presence.skype.com/",upsClientType:"skype4life"},iOSAppStore:{host:"itms-apps://itunes.apple.com/app/",chinaBundleID:"com.skype.tomskype.t2",iPadBundleID:"com.skype.SkypeForiPad.t2",chinaAppID:"419713786",iPadAppID:"442012681",iPhoneAppID:"304878510"},androidPlayStoreUrl:{url:"market://details?id=com.skype.raider"},windowsStore:{reviewUrl:"ms-windows-store://review/?ProductId=9wzdncrfj364",feedback:{baseUrl:"windows-feedback:?contextid=596&tabid=2&newFeedback=true&feedbackType=",feedbackType:"2",suggestionType:"1"}},helpGoParam:{browseKnownIssues:"s4l.browseissues",supportArticles:"help.t2d",upgradeLearnMore:"upgrade.learnmore",skypeStatus:"skype.status"},feedbackAndProblemGoParam:{feedback:"s4l.sendfeedback",problem:"s4l.reportproblem",suggestAddIns:"feedback.addins",rating:"feedback.rate",userVoice:"feedback.uv"},brb:{submitPath:"https://brbv2.skype.com/AuthService.svc/SubmitBRBReport/S4L/",releasePath:"https://brbv2.skype.com/AuthService.svc/release?container=",version:"2016-05-31",blobType:"BlockBlob",blobDisposition:"attachment",logsName:"/logs.zip?",screenshotName:"/screenshot.png?",feedbackSubmitPath:"https://feedback.skype.com/survey/questionanswerpost?id=slp",enableHeartEntryPoint:!1,disableShakeAndSendByDefault:!1,extendReportTitle:"Extend report"},calling:{emergencyCallingLearnMoreLink:"https://go.skype.com/emergency/",disableEcsParamCache:!1,disableSharedIdCache:!1,enableDeferredStartup:!1},avSettings:{learnMoreLink:"https://go.skype.com/call.quality.guide",webcamLearnMoreLink:"https://support.microsoft.com/help/2998316/"},msAccountUrl:{url:"https://account.microsoft.com"},msAccountContactInfoUrl:{url:"https://account.microsoft.com/profile/contact-info"},combinedSisu:{bundle_version:"0.0.0.0"},welcomeScreenProblemSigningInUrl:{url:"https://go.skype.com/help.password.faq2"},telemetryInfoUrl:{url:"https://go.skype.com/faq.telemetry"},checkAccountUrl:{goParam:"check.account"},sms:{host:"https://consumer.entitlement.skype.com/",organizationId:"skype"},creditExpiration:{creditExpirationFaqLink:"https://support.skype.com/en/faq/FA10378/how-do-i-reactivate-skype-credit"},connectors:{host:"https://outlook.office.com/connectors/",home:"https://outlook.office.com/connectors/Home/Login/#/configurations"},gogo:{enabled:!1,ssid:["gogoinflight","gogowifi"],isOnGogoIpRange:!1},autoBuddySetup:{url:"https://join.skype.com/setup"},readReceipts:{learnMoreLink:"https://go.skype.com/receipts.help"},teams:{imgHost:"https://img.teams.skype.com/amer/beta/users/"},database:{splitLargeTransactions:!1},msGraph:{host:"https://graph.microsoft.com/v1.0"},captivePortalDetection:{statusCode:200,enabled:!0,url:"http://www.msftconnecttest.com/",browserUrl:"http://www.msftconnecttest.com/redirect",path:"connecttest.txt",expectedContent:"Microsoft Connect Test",timeout:1e4},debug:{verboseDbLogging:"off"},fileNode:{learnMoreLink:"https://go.skype.com/file.sharing.limits"},images:{cacheControlRequestHeader:""},restClient:{defaultTimeout:6e4,checkCorruptNullBody:!1,originHeaderValue:void 0},hotkeys:{learnMoreUrl:"https://go.skype.com/keyboard.shortcuts"},translator:{help:"https://go.skype.com/translator.help",learnMoreUrl:"https://go.skype.com/translator.learnmoreurl",privacyStatementUrl:"https://go.microsoft.com/fwlink/?LinkId=521839",speechConsentLearnMoreUrl:"https://go.microsoft.com/fwlink/p/?linkid=2147642"},shareExternalPlatforms:{gmail:"https://mail.google.com/mail/?view=cm&fs=1&su={subject}&body={body}",outlook:"https://outlook.office.com/mail/deeplink/compose?subject={subject}&body={body}",facebook:"https://www.facebook.com/sharer.php?u={url}"},noiseSuppression:{learnMoreUrl:"https://www.skype.com/go/audiovideo.settings"},togetherModeNotice:{learnMoreUrl:"https://go.skype.com/together.mode"},formatting:{learnMoreUrl:"https://go.skype.com/faq.formatting"},twinCam:{learnMoreUrl:"https://go.skype.com/twin.cam"},musicMode:{learnMoreUrl:"https://go.skype.com/high.fidelity.audio"}}}_initCapability(e){return e}test_getEcsFallbacks(){return this._getEcsFallbacks()}test_initCapability(e){return this._initCapability(e)}test_trigger(){this.trigger()}};(0,n.__decorate)([r.autoSubscribe],T.prototype,"isMurphyUser",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getMergedEcsConfig",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getSkypeAudioLibraryFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LFeatures",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"getS4LFeaturesNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LCaapFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LIntegrationsFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LMessagingFeatures",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"getS4LMessagingFeaturesNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LMessagingConfigIds",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LUiConfigIds",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LMessagingExperimentalConfigString",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LUiExperimentalConfigString",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"dangerouslyGetS4LMessagingFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LContactsFeatures",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"getS4LContactsFeaturesNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LSearchFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LCommerceFeatures",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"dangerouslyGetS4LCommerceFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LEntitlementFeatures",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"getS4LEntitlementFeaturesNoSubscription",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"getS4LCommerceFeaturesNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getHeaders",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getPeopleSearchSettings",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LNativePlatformsEcsConfig",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"getS4LNativePlatformsEcsConfigNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LCMCFeatures",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"getS4LCMCFeaturesNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getTelemetryFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LTelemetryFeatures",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"getS4LTelemetryFeaturesNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LMeetNowFeatures",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"getS4LMeetNowFeaturesNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getPesConfig",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getAsyncMediaFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getSkypeRootToolsConfig",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getTrouterJScriptClientConfig",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getMDNTRAPClientConfig",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"getJoinFeaturesNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getJoinFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getAdsFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getOnboardingFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getEngagementFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getSkypeEngagementFeatures",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"dangerouslyGetOnboardingFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getDebugabilitySquad",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getSkypeRealTimeMedia",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LSisuFeatures",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"dangerouslyGetS4LSisuFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LUiFeatures",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"getS4LUiFeaturesNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getS4LStratusFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getOEMConfig",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getFeedbackFeatures",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getULLogUploadConfig",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getConfigSettings",null),(0,n.__decorate)([r.disableWarnings],T.prototype,"getConfigSettingsNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getCachedEcsConfig",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"isUserEcsConfig",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getTrustedDomainInfo",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"isTrustedDomain",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getBingUrls",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"getBingMapsConfig",null),(0,n.__decorate)([r.autoSubscribe],T.prototype,"isDesktopVIMEnabled",null),T=(0,n.__decorate)([r.AutoSubscribeStore],T),t.AppConfigStore=T;let P=new T;t.default=P},59294:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calcAlertsForUpdatedMessage=void 0;const n=i(96486),o=i(95314),s=i(42826),a=i(89391),r=i(63413),l=i(81169),c=i(51077),d=i(16402),u=i(46096),g=i(36237),h=i(78735),p=i(18078),m=i(33714),S=i(77275),C=i(79829),f=i(78262);t.calcAlertsForUpdatedMessage=function(e,t,i){if(g.log(u.LogTraceArea.AlertsHelpers,`Start calculating alerts for updated message: ${t.cuid}`),c.getMessageTypeGroup(t)===c.MessageTypeGroups.None||e.isMuted())return void g.log(u.LogTraceArea.AlertsHelpers,"No alerts displayed because chat is muted or message has None type group");const y=d.default.add(Date.now(),0,-s.AlertsConstants.DaysOfAlertsToDisplay),_=t.getMessageNotificationClass();if(_===f.MessageNotificationClass.SystemInformational&&t.createdTime>=y)return;const v=n.filter(i.getAllItems(),(e=>!!e.message&&t.cuid===e.message.cuid&&t.conversationId===e.message.conversationId));n.each(v,(e=>{i.deleteItem(e),g.log(u.LogTraceArea.AlertsHelpers,"Removed existing alert for the same item")}));const b=t.getLastReactionTimeExcludingCurrentUser()||t.createdTime;if(!t.isDeletedMessage()&&b>=y){if(_===f.MessageNotificationClass.MentionedOrQuoted){const n=e.getConsumptionHorizonTimestamp(),a=o.default.fromScratch(s.AlertType.HighPriorityMessage,t.createdTime,t.createdTime<=n,t);i.addItem(a),g.log(u.LogTraceArea.AlertsHelpers,"Mention or quote notification added")}if(a.default.getConfigSettings().chat.notifyLikes){const d=function(e,t){const i=t.isHighlightsThread();if(i)return;const d=n.filter(e.getEmotionAnnotations(),(e=>e.key!==c.MessageAnnotations.ViewCount&&e.key!==c.MessageAnnotations.ReactionsConsumptionHorizon));if(d&&d.length>0){g.log(u.LogTraceArea.AlertsHelpers,`Emoticon annotations length ${d.length}`);const h=(0,l.chain)(d,(0,l.map)((e=>e.users)),(0,l.flatten)());return p.default.isMyMri(e.creator)?function(e,t,i){let a;const l=n.filter(i,(e=>!p.default.isMyMri(e.mri)));if(0===l.length)return;const d=n.map(l,(e=>e.time)),u=n.max(d),g=e.getReactionsReadTimeForCurrentUser()||0;a=o.default.fromScratch(s.AlertType.Reaction,u,u<=g,e);const h=t.isOneOnOne()?t.getOtherPartyMri():e.conversationId;if(!h)return;if(n.some(l,(e=>e.mri===h))&&r.default.isMriBlocked(h))return;if(c.isPollType(e.messagetype)||c.isScheduledCallType(e.messagetype))return;return a}(e,t,h):function(e,t,i){const r=a.default.getS4LMessagingFeatures().notifyForAdditionalReactions;if(!i&&!c.isPollType(e.messagetype)){const i=n.map(t,(e=>e.mri)),a=n.find(p.default.getMyMris(),(e=>n.includes(i,e)));if(a){const i=(0,l.chain)(t,(0,l.filter)((e=>e.mri===a)),(0,l.map)((e=>e.time))),c=n.min(i)||1/0,d=e.getReactionsReadTimeForCurrentUser()||0,u=n.filter(t,(e=>e.mri!==a)),g=n.max(n.map(u,(e=>e.time)))||-1/0;return g>c&&r?o.default.fromScratch(s.AlertType.AdditionalReaction,g,g<=d,e):void 0}}return}(e,h,i)}return}(t,e);d&&(i.addItem(d),g.log(u.LogTraceArea.AlertsHelpers,"Reaction notification added"))}if(!r.default.isMriBlocked(t.conversationId)){const e=function(e){if(!c.isScheduledCallType(e.messagetype))return[];const t=S.default.extractScheduledCallFromMessage(e);if(!t)return[];if(!h.default.getUserPreferencesLocal().enableScheduledCallNotifications)return[];const i=[],a=e.getScheduledCallReadTimeForCurrentUser();p.default.isMyMri(e.creator)?n.each(t.invitations,((n,r)=>{if(n.invitationStatus&&n.invitationStatus!==C.ScheduledCallInvitationStatus.Unknown){const l=n.updatedTimeMs||Date.now(),c={type:n.invitationStatus===C.ScheduledCallInvitationStatus.Accepted?m.ScheduleCallAlertTypes.InvitationAccepted:m.ScheduleCallAlertTypes.InvitationDeclined,initiator:r,subject:t.subject};i.push(o.default.fromScratch(s.AlertType.ScheduledCall,l,l<=a,e,{scheduledCallInfo:c})),g.log(u.LogTraceArea.AlertsHelpers,"Scheduled call invitation notification added")}})):(i.push(o.default.fromScratch(s.AlertType.ScheduledCall,e.createdTime,e.createdTime<=a,e,{scheduledCallInfo:{type:m.ScheduleCallAlertTypes.Received,initiator:t.organizer,subject:t.subject}})),g.log(u.LogTraceArea.AlertsHelpers,"Scheduled call invitation received notification added"),t.editedTimeMs&&(i.push(o.default.fromScratch(s.AlertType.ScheduledCall,t.editedTimeMs,t.editedTimeMs<=a,e,{scheduledCallInfo:{type:m.ScheduleCallAlertTypes.Edited,initiator:t.organizer,subject:t.subject}})),g.log(u.LogTraceArea.AlertsHelpers,"Scheduled call invitation edited notification added")),t.canceledTimeMs&&(i.push(o.default.fromScratch(s.AlertType.ScheduledCall,t.canceledTimeMs,t.canceledTimeMs<=a,e,{scheduledCallInfo:{type:m.ScheduleCallAlertTypes.Canceled,initiator:t.organizer,subject:t.subject}})),g.log(u.LogTraceArea.AlertsHelpers,"Scheduled call invitation canceled notification added")));return i}(t);n.some(e)&&(n.each(e,(e=>{i.addItem(e)})),g.log(u.LogTraceArea.AlertsHelpers,"Scheduled call notifications added"))}}else g.log(u.LogTraceArea.AlertsHelpers,"Updated message is too old or removed");g.log(u.LogTraceArea.AlertsHelpers,`Finish calculating alerts for updated message: ${t.cuid}`)}},23606:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.backgroundColorStyleForColorInfo=t.accentColorForColorInfo=t.accentColor=t.useSecondaryAccentColor=void 0;const n=i(10102),o=i(18037),s=i(97634);function a(e){return function(e,t){return s.isDarkTheme(t)&&!s.isDelphiTheme(t)&&!n.isCustomColor(e)}(e,o.default.colorTheme())}function r(e,t){return n.accentColor(e,t)}t.useSecondaryAccentColor=a,t.accentColor=function(e){return r(e,a(e))},t.accentColorForColorInfo=r,t.backgroundColorStyleForColorInfo=function(e){const t=a(e);return n.backgroundColorStyleForColorInfo(e,t)}},31761:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(97691),a=i(19784),r=i(89391),l=i(22801),c=i(76621),d=i(71830),u=i(98278),g=i(57102),h=i(46096),p=i(36237),m=i(33754),S=i(18078),C=i(4735),f=i(30124),y=i(95691),_=i(61781),v=i(85773),b=i(16392),T=i(4057),P=i(78262),A=i(53374),k=[y.WizardSteps.setConvInfo,y.WizardSteps.setConvParticipants];class I extends v.default{constructor(e){super(e),void 0===e.convId&&void 0===e.wizardSteps&&this.extendContext({wizardSteps:k}),void 0!==e.convId||e.creating1on1Conversation||this.extendContext({newGroupTelemetryScenario:new _.default})}goBack(){const e=A.default.newCauseId();p.log(h.LogTraceArea.Navigation,"CreateOrModifyChatScenarioNavigator.goBack currentStepIndex: "+this._currentStepIndex+" causeId: "+e),n.isUndefined(this._currentStepIndex)?p.warn(h.LogTraceArea.Navigation,"CreateOrModifyChatScenarioNavigator.goBack called without initializing this._currentStepIndex causeId: "+e):this._currentStepIndex<0?p.warn(h.LogTraceArea.Navigation,"CreateOrModifyChatScenarioNavigator.goBack called with a negative value for this._currentStepIndex causeId: "+e):(f.default.isUsingStackNavigationContext()||0===this._currentStepIndex?this._closePanel(this._currentStepIndex,e):this._navigateToPanel(this._currentStepIndex-1,e),0===this._currentStepIndex&&(p.log(h.LogTraceArea.Navigation,"CreateOrModifyChatScenarioNavigator.goBack, finish causeId: "+e),this._context.newGroupTelemetryScenario&&this._context.newGroupTelemetryScenario.markFunnelDropped(),this.finish(!1)),this._currentStepIndex--)}goNext(){const e=A.default.newCauseId();p.log(h.LogTraceArea.Navigation,"CreateOrModifyChatScenarioNavigator.goNext, causeId: "+e),n.isUndefined(this._currentStepIndex)?p.warn(h.LogTraceArea.Navigation,"CreateOrModifyChatScenarioNavigator.goNext called without initializing this._currentStepIndex causeId: "+e):(this._currentStepIndex++,this._context.wizardSteps&&n.isNumber(this._context.wizardSteps[this._currentStepIndex])?this._navigateToPanel(this._currentStepIndex,e):this._context.convId?this._context.stayOnCurrentScreenOnceFinished?(this._closePanel(this._currentStepIndex-1,e),this.finish(!0)):c.default.ensureConversationLoadedOrFaked(this._context.convId,h.ConversationFakedOrigin.CreateChatScenario).then((t=>{this._navigateToConversation({causeId:e,convId:this._context.convId,origin:this._context.navigationOrigin,isNewConversation:!0}),this.finish(!0)})):this._initiateConversationCreation().then((()=>{this._context.newGroupTelemetryScenario&&this._context.newGroupTelemetryScenario.finish();let e=this._context.creating1on1Conversation?"CreateOrModifyChatScenarioNavigator.ConversationOpenedAccessibilityLabel":"CreateOrModifyChatScenarioNavigator.GroupCreatedAccessibilityLabel";o.Accessibility.announceForAccessibility(m.getString(e,{conversationName:this._context.convName||""})),this.finish(!0)})).catch((t=>{if(this._context.newGroupTelemetryScenario){const e=t&&t.errorMessage,i=t&&t.errorCode,n=t&&t.statusText,o=t&&t.statusCode,s=e||i||n||o?void 0:JSON.stringify(t);this._context.newGroupTelemetryScenario.fail(e,i,o,n,s)}p.warn(h.LogTraceArea.GenericUnsafe,"initiateConversationCreation failed: "+T.default.errorAsString(t)),C.default.navigateToHub(e),this._rootViewId&&a.default.showErrorAlert(m.getString("CreateOrModifyChatScenarioNavigator.CreateConversationError"),this._rootViewId),this.finish(!1)})))}goEnd(){this.finish(!0)}start(e){super.start(e);const t=A.default.newCauseId();p.log(h.LogTraceArea.Navigation,"CreateOrModifyChatScenarioNavigator.start, causeId: "+t),n.isEmpty(this._context.wizardSteps),this._currentStepIndex=0,this._context.newGroupTelemetryScenario&&this._context.newGroupTelemetryScenario.start(r.default.getS4LUiExperimentalConfigString(),this._context.navigationOrigin,n.map(this.context.wizardSteps,(e=>y.WizardSteps[e])).toString()),this._navigateToPanel(this._currentStepIndex,t)}_navigateToPanel(e,t){var i,n;const o=this._context.wizardSteps&&this._context.wizardSteps[e];switch(p.log(h.LogTraceArea.Navigation,"CreateOrModifyChatScenarioNavigator._navigateToPanel stepIndex: "+e+" wizardStep: "+o+" causeId: "+t),o){case y.WizardSteps.setConvInfo:C.default.navigateToSetConversationInfoPanel(this,null!==(i=this._rootViewId)&&void 0!==i?i:u.MainRootViewId,this._context.presentedFromSuperComposer?b.StackNavigationDirection.Push:void 0);break;case y.WizardSteps.setConvParticipants:C.default.navigateToSetConversationParticipantsPanel(this,!!this._context.creating1on1Conversation&&!!this._context.useSuperComposerFor1on1Conversation,null!==(n=this._rootViewId)&&void 0!==n?n:u.MainRootViewId,this._context.presentedFromSuperComposer?b.StackNavigationDirection.Push:void 0)}}_closePanel(e,t){switch(p.log(h.LogTraceArea.Navigation,"CreateOrModifyChatScenarioNavigator._closePanel, causeId: "+t),this._context.wizardSteps&&this._context.wizardSteps[e]){case y.WizardSteps.setConvInfo:C.default.closeSetConversationInfoPanel(t,this._getPartialContext());break;case y.WizardSteps.setConvParticipants:C.default.closeSetConversationParticipantsPanel(t,this._getPartialContext())}}_getPotentialExistingConversation(e){return this.context.convName||this._context.createCellularSmsConversation?s.Resolved([]):g.ConversationUtils.getPotentialExistingConversations(e,!0)}_initiateConversationCreation(){const e=A.default.newCauseId();p.log(h.LogTraceArea.Navigation,"CreateOrModifyChatScenarioNavigator._initiateConversationCreation, causeId: "+e);const t=this._context.invitedUsersMris||[];return this._getPotentialExistingConversation(t).then((i=>{if(!n.isEmpty(i))return this._context.newGroupTelemetryScenario&&(this._context.newGroupTelemetryScenario.setParticipantCount(t.length),this._context.newGroupTelemetryScenario.setExistingConversationFound(),this._context.newGroupTelemetryScenario.markFunnelCompleted()),c.default.ensureConversationLoadedOrFaked(i[0].id,h.ConversationFakedOrigin.CreateChatScenario).then((t=>{this._navigateToConversation({convId:i[0].id,origin:this._context.navigationOrigin,causeId:e})}));if(this._context.creating1on1Conversation){const i=t[0];return c.default.ensureConversationLoadedOrFaked(i,h.ConversationFakedOrigin.CreateChatScenario).then((t=>{this._navigateToConversation({convId:i,origin:this._context.navigationOrigin,isNewConversation:t,causeId:e})}))}const o={};o[S.default.getSkypeMri()]=P.ThreadMemberAccessType.Admin;const s=this._context.navigationOrigin===h.NavigationConversationOrigin.NewModeratedGroup,a={};let r;return n.each(this._context.invitedUsersMris,(e=>{a[e]=d.isPhoneMri(e)||s?P.ThreadMemberAccessType.User:P.ThreadMemberAccessType.Admin})),this._context.newGroupTelemetryScenario&&(this._context.newGroupTelemetryScenario.setParticipantCount(n.keys(a).length),this._context.newGroupTelemetryScenario.markFunnelCompleted()),g.ConversationUtils.createConversation(o,a,this._context.convName,s).then((e=>(r=e.threadId,g.ConversationUtils.setConversationProps(r,this._context.convColor,this._context.convAvatar)))).then((()=>(this._context.newGroupTelemetryScenario&&(this._context.newGroupTelemetryScenario.markConversationCreated(),this.extendContext({convId:r})),c.default.ensureConversationLoadedOrFaked(r,h.ConversationFakedOrigin.CreateChatScenario).then((t=>{this._maybeGenerateJoinLink(t,r),this._navigateToConversation({causeId:e,convId:r,origin:this._context.navigationOrigin,isNewConversation:!0})})))))}))}_maybeGenerateJoinLink(e,t){this.context.shareLink&&!e&&r.default.getS4LMessagingFeaturesNoSubscription().enableNewConversationCreation&&l.default.setJoinEnabled(t,!0)}_navigateToConversation(e){var t;p.log(h.LogTraceArea.Navigation,"CreateOrModifyChatScenarioNavigator._navigateToConversation, causeId: "+e.causeId),C.default.navigateToConversation(e),f.default.isUsingStackNavigationContext()?f.default.isMobileSplitView()&&this._rootViewId===u.MainRootViewId&&(C.default.closeSetConversationParticipantsPanel(e.causeId,this._getPartialContext()),C.default.closeSetConversationInfoPanel(e.causeId,this._getPartialContext()),C.default.navigateToHub(e.causeId)):C.default.closeGenericDesktopModal(e.causeId,null!==(t=this._rootViewId)&&void 0!==t?t:u.MainRootViewId)}_getPartialContext(){var e;return{rootViewId:null!==(e=this._rootViewId)&&void 0!==e?e:u.MainRootViewId,rootViewType:u.RootViewType.MainWindow}}}t.default=I},27447:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isDisabledChatNotification=t.isDisabledCallNotification=void 0;const n=i(97691),o=i(76621),s=i(90239),a=i(62630),r=i(46096),l=i(36237),c=i(78735),d=i(46929),u=i(88273),g=i(22538),h=i(92772);function p(e){return(u.default.getStatusNoSubscription()===s.UserStatus.Unknown?g.EnsureStarted(u.default):n.Resolved()).then((()=>u.default.getStatusNoSubscription())).then((t=>{const i=h.maskedUserStatus(t);return l.log(r.LogTraceArea.Notifications,"isDisabledNotification user status: "+t+", maskedStatus: "+i),i===s.UserStatus.Busy&&g.EnsureStartedOnly(d.default,[o.default,c.default]).then(e)}))}t.isDisabledCallNotification=function(){const e=(0,a.tryGetDndOsState)(!1);return e&&l.log(r.LogTraceArea.Notifications,"isDisabledCallNotification dndOsState.enabled: "+e.enabled+", dndOsState.allowAnyCalls: "+e.allowAnyCalls),e&&e.enabled&&!e.allowAnyCalls?n.Resolved(!0):p((()=>{const e=d.default.getCallNotificationsWhileDNDEnabled();return l.log(r.LogTraceArea.Notifications,"isDisabledCallNotification UserStatus: Busy, callNotificationsWhileDNDEnabled: "+e),!e}))},t.isDisabledChatNotification=function(){const e=(0,a.tryGetDndOsState)(!0);return e&&l.log(r.LogTraceArea.Notifications,"isDisabledChatNotification dndOsState.enabled: "+e.enabled),e&&e.enabled?n.Resolved(!0):p((()=>{const e=d.default.getChatNotificationsWhileDNDEnabled();return l.log(r.LogTraceArea.Notifications,"isDisabledChatNotification UserStatus: Busy, chatNotificationsWhileDNDEnabled: "+e),!e}))}},46172:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16392),o=(i(60305),i(30124));t.default=class{static collapseDesktopStackNavContext(){return this._desktopNavigationType()===n.DesktopNavigationType.StackCollapsible&&!o.default.isUsingStackNavigationContext()}static collapseDesktopStackNavContextNoSubscription(){return this._desktopNavigationType()===n.DesktopNavigationType.StackCollapsible&&!o.default.isUsingStackNavigationContextNoSubscription()}static _desktopNavigationType(){return n.DesktopNavigationType.StackCollapsible}}},76679:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getReactionAlertAccessibilityLabel=t.getEmojiSupport=t.getOnboardingDisplayInfo=t.getScheduledCallDisplayInfo=t.getReactionsDisplayInfo=t.getMessageDisplayInfo=t.getCompactNotificationDisplayInfo=t.getScheduledCallDisplayInfoForInvitationReceivedAlert=t.getScheduledCallDisplayInfoForInvitationUpdatedAlert=t.getScheduledCallDisplayInfoForInvitationAlert=t.formatPreviousMessagePotentiallyBeforeStartup=t.getCompactNotificationDisplayInfoPotentiallyBeforeStartupAsync=void 0;const n=i(96486),o=i(97691),s=i(89391),a=i(81169),r=i(51077),l=i(71830),c=i(29791),d=i(47477),u=i(81959),g=i(16402),h=i(86374),p=i(52262),m=i(82433),S=i(70891),C=i(46096),f=i(53559),y=i(47662),_=i(33754),v=i(12762),b=i(14572),T=i(97223),P=i(13847),A=i(33714),k=i(79829),I=i(71987),w=i(40363),N=i(78262),M=i(72758),E=i(53374),x="Photo",L="Video",R="Audio",D="File",B="Call",O="Post",F="PostWithContent",V="Location",U="SwiftCard",H="GIF",W="MediaAlbum",z={[r.MessageTypeGroups.Picture]:x,[r.MessageTypeGroups.Video]:L,[r.MessageTypeGroups.Audio]:R,[r.MessageTypeGroups.UriFile]:D,[r.MessageTypeGroups.Calling]:B,[r.MessageTypeGroups.Location]:V,[r.MessageTypeGroups.SwiftCard]:U,[r.MessageTypeGroups.Gif]:H,[r.MessageTypeGroups.MediaAlbum]:W};function G(e,t,i){let n,o,s,r,l;if(e&&e.length>0){const d=(0,a.chain)(e,(0,a.sortBy)((e=>e.time?-e.time:NaN)),(0,a.uniqBy)((e=>e.mri)));o=j(d.length,t,i),d.length>=1&&(n=d[0].mri,s=$(d[0].mri)),d.length>=2&&(c=d[1].mri,r=p.default.getDisplayableProfile(c).getShortName(),l=d.length-1)}var c;return{mostRecentMri:n,labelKey:o,firstPersonToReact:s&&s.name,gender:s&&s.gender,secondPersonToReact:r,othersCount:l}}function K(){return w.default.getPlatformType()===C.PlatformType.Windows?"disabled":"enabled"}function j(e,t,i){let n;if(i&&t.objectType===r.MessageTypeGroups.SwiftCard){const e=i.getFirstUriObjectChild(v.SwiftUriObjectNode);e&&e.getCardType()===f.default.imageContentTypes.gif&&(n=r.MessageTypeGroups.Gif)}const o=function(e,t){let i=z[e];i||(i=t?O:F);return i}(n||t.objectType,t.isQuoteOnly);let s;return 1===e?s="OnePersonReactedToYour"+o:2===e?s="TwoPeopleReactedToYour"+o:e>2&&(s="MoreThanTwoPeopleReactedToYour"+o),s?(s=t.isPushNotification?"PushNotification."+s:"AlertCard."+s,s):s}function q(e,t,i,n){let o;return e.isCurrentUserMentioned(!1)?o=_.getString("Notifications.UserMentionTitle",{creator:i}):r.hasAllAtMention(e.content)?o=_.getString("Notifications.AllMentionTitle",{creator:i}):e.isCurrentUserQuoted()?o=_.getString(s.default.getS4LMessagingFeatures().enableReply?"Notifications.ReplyTitle":"Notifications.QuoteTitle",{creator:i}):t&&t.isOneOnOne()?o=_.getString("Notifications.OneOnOneTitle",{creator:i}):(n.length>20&&(n=n.substr(0,17)+"..."),o=_.getString("Notifications.ConversationGroupTitle",{creator:i,conversationName:n})),o}function Q(e,t){let i;const n=r.getMessageTypeGroup(e),o=h.decode(e);switch(n){case r.MessageTypeGroups.Audio:i=_.getString("Notifications.AudioBody",{emoji:K()});break;case r.MessageTypeGroups.Location:i=function(e,t){const i=u.renderText(e,{message:t,processing:{quotes:S.ProcessingLevel.None,wikiMarkup:S.ProcessingLevel.Stripped},trimToFirstLine:!0});return _.getString("Notifications.LocationBody",{address:i,emoji:K()})}(o,e);break;case r.MessageTypeGroups.Picture:i=X(o);break;case r.MessageTypeGroups.Video:i=_.getString("Notifications.VideoBody",{emoji:K()});break;case r.MessageTypeGroups.UriFile:i=function(e){const t=J(e),i=f.default.extractFileExtension(t);if(f.default.isImageExtension(i))return X(e);return _.getString("Notifications.FileBody",{fileName:t})}(o);break;case r.MessageTypeGroups.Moji:i=_.getString("Notifications.MojiBody");break;case r.MessageTypeGroups.Sticker:i=_.getString("Notifications.StickerBody");break;case r.MessageTypeGroups.ScheduledCallInvite:i=_.getString("Notifications.ScheduledCallInviteBody",{organizerName:t});break;case r.MessageTypeGroups.Text:r.isContactMessageType(e)&&(i=function(e){const t=e.children[0];if(t.children&&1===t.children.length){const e=t.children[0];return _.getString("Notifications.ContactBody",{emoji:K(),contactName:e.fullName})}return _.getString("Notifications.ContactsBody",{emoji:K()})}(o));break;case r.MessageTypeGroups.SwiftCard:const n=o.getFirstUriObjectChild(v.SwiftUriObjectNode);n&&(i=n.getCardType()===f.default.imageContentTypes.gif?_.getString("Notifications.GifBody",{emoji:K()}):u.renderText(n,{message:e,processing:{quotes:S.ProcessingLevel.None,wikiMarkup:S.ProcessingLevel.Stripped},trimToFirstLine:!0})),i||(i=_.getString("Notifications.CardBody"));break;case r.MessageTypeGroups.System:e.messagetype===r.MessageTypes.HandshakeInvite?i=_.getString("Notifications.E2eeInvitedNotificationLabel"):e.messagetype===r.MessageTypes.HandshakeAccept?i=_.getString("Notifications.E2eeAcceptedNotificationLabel"):e.messagetype===r.MessageTypes.HandshakeComplete&&(i=_.getString("Notifications.E2eeEstablishedNotificationLabel"));break;case r.MessageTypeGroups.MediaAlbum:i=_.getString("Notifications.MediaAlbumBody",{emoji:K()})}return l.isEncryptedThread(e.conversationId)&&(i=_.getString("Notifications.E2eeTextNotificationLabel")),e.isTranslationSettings()&&(i=d.getTranslationActionString(e.content)),i||(i=u.renderText(o,{message:e,utfFallback:s.default.getS4LMessagingFeatures().enableNotificationUtfFallback,processing:{quotes:S.ProcessingLevel.None,wikiMarkup:S.ProcessingLevel.Stripped},trimToFirstLine:!0})),i||""}function X(e){const t=J(e);return f.default.getFileContentType(t)===f.default.imageContentTypes.gif?_.getString("Notifications.GifBody",{emoji:K()}):_.getString("Notifications.PhotoBody",{emoji:K()})}function J(e){const t=e.getFirstUriObjectChild(v.UriObjectNode);return t&&t.getNameForUI()||""}function $(e,t=!1){const i=M.default.getFullUserProfileByMri(e);return{name:t?i.getDisplayName():i.getShortName(),gender:i.gender||N.eGender.Unspecified}}function Y(e,t=!1){const i=M.default.getFullUserProfileByMri(e);return p.default.getDisplayableProfilePotentiallyBeforeStartupAsync(e).then((e=>({name:t?e.getDisplayName():e.getShortName(),gender:i.gender||N.eGender.Unspecified})))}t.getCompactNotificationDisplayInfoPotentiallyBeforeStartupAsync=function(e,t,i,s,l,c,d){var u;const S=s||_.getString("Notifications.UnknownUser"),C=l||_.getString("Notifications.UnknownUserShort"),f=c||_.getString("Notifications.UnknownUserShort");if(i===T.MessageNotificationType.AddToConversation){const t=b.getMessageInitiator(e);if(t)return Y(t,!0).then((e=>{if(!e.name){const e=_.getString("Notifications.AddedToConversationDefault",{conversationName:f});return o.Resolved({title:e,body:""})}return{title:_.getParts("Notifications.AddedToConversationByUser",{conversationName:f,displayName:e.name,gender:y.getLocalizeParamForGender(e.gender)}).join(""),body:""}}));const i=_.getString("Notifications.AddedToConversationDefault",{conversationName:f});return o.Resolved({title:i,body:""})}if(i===T.MessageNotificationType.Reaction){const i=e.getReactionsReadTimeForCurrentUser(),s=Date.now(),l=(0,a.chain)(e.getCleanedEmotionAnnotations(),(0,a.map)((e=>e.users)),(0,a.flatten)(),(0,a.filter)((e=>(e.time||s)>i))),c=null===(u=n.last(e.getCleanedEmotionAnnotations()))||void 0===u?void 0:u.key,d=c?m.default.getEmoticonUtfFallback(c):void 0,g=d?`${d} `:"",v=r.getMessageTypeGroup(e);return function(e,t,i){let n,s,r,l=o.Resolved(void 0),c=o.Resolved(void 0);if(e&&e.length>0){const o=(0,a.chain)(e,(0,a.sortBy)((e=>e.time?-e.time:NaN)),(0,a.uniqBy)((e=>e.mri)));s=j(o.length,t,i),o.length>=1&&(n=o[0].mri,l=Y(o[0].mri,!0)),o.length>=2&&(c=function(e,t=!1){return p.default.getDisplayableProfilePotentiallyBeforeStartupAsync(e).then((e=>t?e.getDisplayName():e.getShortName()))}(o[1].mri,!0),r=o.length-1)}return o.all([l,c]).then((([e,t])=>({mostRecentMri:n,labelKey:s,firstPersonToReact:e&&e.name,gender:e&&e.gender,secondPersonToReact:t,othersCount:r})))}(l,{objectType:r.getMessageTypeGroup(e),isQuoteOnly:!1,isPushNotification:!0},v===r.MessageTypeGroups.SwiftCard?h.decode(e):void 0).then((i=>{let o;o=i.labelKey?g+_.getParts(i.labelKey,{user:i.creatorDisplayName,firstOtherPerson:i.firstPersonToReact,secondOtherPerson:i.secondPersonToReact,gender:y.getLocalizeParamForGender(i.gender),otherCount:i.othersCount}).join(""):q(e,t,S,f);const s=n.endsWith(i.labelKey,O)||n.endsWith(i.labelKey,F),a=Q(e,C);return s?{title:o,body:a}:{title:"",body:o}}))}if(i===T.MessageNotificationType.ScheduledCall&&d){return Y(d.userMri,!0).then((e=>{let i;if(d.invitationStatus){const t=d.invitationStatus===k.ScheduledCallInvitationStatus.Accepted?"Notifications.ScheduledCallAcceptedBody":"Notifications.ScheduledCallDeclinedBody";i=_.getString(t,{gender:y.getLocalizeParamForGender(e.gender),displayName:e.name,subject:d.subject})}else if(d.wasCanceled)i=_.getString("Notifications.ScheduledCallDeletedBody",{gender:y.getLocalizeParamForGender(e.gender),displayName:e.name,subject:d.subject});else if(d.hasUpdates)i=_.getString("Notifications.ScheduledCallEditedBody",{gender:y.getLocalizeParamForGender(e.gender),displayName:e.name,subject:d.subject});else{const n=t&&t.isOneOnOne()?"Notifications.ScheduledCallInviteTime":"Notifications.ScheduledCallInviteTimeGroup";i=_.getString(n,{gender:y.getLocalizeParamForGender(e.gender),subject:d.subject,time:g.default.getDisplayDateTimeString(d.datetimeMs),conversationDisplayName:t&&t.topicName()||""})}return{title:_.getString("Notifications.OneOnOneTitle",{creator:e.name}),body:i}}))}return o.Resolved({title:q(e,t,S,f),body:Q(e,C)})},t.formatPreviousMessagePotentiallyBeforeStartup=function(e,t,i,n){const o=t||_.getString("Notifications.UnknownUserShort");return{userDisplayName:o,userIdentifier:n||"",userAvatar:i,receivedTime:e.createdTime,message:Q(e,o)}},t.getScheduledCallDisplayInfoForInvitationAlert=function(e,t,i){const n=$(e,!0),o=I.default.getScheduledCallSubject(i),s=t===A.ScheduleCallAlertTypes.InvitationAccepted?"Notifications.ScheduledCallAcceptedBody":"Notifications.ScheduledCallDeclinedBody";return{title:_.getString("Notifications.OneOnOneTitle",{creator:n.name}),body:_.getString(s,{gender:y.getLocalizeParamForGender(n.gender),displayName:n.name,subject:o})}},t.getScheduledCallDisplayInfoForInvitationUpdatedAlert=function(e,t,i){const n=$(e),o=I.default.getScheduledCallSubject(i),s=t===A.ScheduleCallAlertTypes.Edited?"Notifications.ScheduledCallEditedBody":"Notifications.ScheduledCallDeletedBody";return{title:_.getString("Notifications.OneOnOneTitle",{creator:n.name}),body:_.getString(s,{displayName:n.name,subject:o})}},t.getScheduledCallDisplayInfoForInvitationReceivedAlert=function(e){const t=$(e);return{title:_.getString("Notifications.OneOnOneTitle",{creator:t.name}),body:_.getString("Notifications.ScheduledCallInviteBody",{gender:y.getLocalizeParamForGender(t.gender),organizerName:t.name})}},t.getCompactNotificationDisplayInfo=function(e,t,i,o,s){const l=i||_.getString("Notifications.UnknownUser"),c=o||_.getString("Notifications.UnknownUserShort"),d=s||_.getString("Notifications.UnknownUserShort");if((0,P.isLastMessageUpdateReaction)(e)){const i=e.getReactionsReadTimeForCurrentUser(),o=Date.now(),s=G((0,a.chain)(e.getCleanedEmotionAnnotations(),(0,a.map)((e=>e.users)),(0,a.flatten)(),(0,a.filter)((e=>(e.time||o)>i))),{objectType:r.getMessageTypeGroup(e),isQuoteOnly:!1,isPushNotification:!0});let u;u=s.labelKey?_.getParts(s.labelKey,{user:s.creatorDisplayName,firstOtherPerson:s.firstPersonToReact,secondOtherPerson:s.secondPersonToReact,gender:y.getLocalizeParamForGender(s.gender),otherCount:s.othersCount}).join(""):q(e,t,l,d);return{title:u,body:n.endsWith(s.labelKey,O)||n.endsWith(s.labelKey,F)?Q(e,c):""}}return{title:q(e,t,l,d),body:Q(e,c)}},t.getMessageDisplayInfo=function(e,t){let i;e.isCurrentUserQuoted()?i=t?s.default.getS4LMessagingFeatures().enableReply?"AlertCard.ReplyWithoutContent":"AlertCard.QuoteWithoutContent":s.default.getS4LMessagingFeatures().enableReply?"AlertCard.ReplyWithContent":"AlertCard.QuoteWithContent":e.isCurrentUserMentioned()&&(i=r.hasAllAtMention(e.content)?"AlertCard.MentionAll":"AlertCard.MentionYou");const n=e&&$(e.creator);return{labelKey:i,mostRecentMri:e.creator,creatorDisplayName:n&&n.name,gender:n&&n.gender}},t.getReactionsDisplayInfo=G,t.getScheduledCallDisplayInfo=function(e){let t;switch(e.type){case A.ScheduleCallAlertTypes.Canceled:t="AlertCard.CallInviteDeleted";break;case A.ScheduleCallAlertTypes.InvitationAccepted:t="AlertCard.UserAcceptedCallInvite";break;case A.ScheduleCallAlertTypes.InvitationDeclined:t="AlertCard.UserDeclinedCallInvite";break;case A.ScheduleCallAlertTypes.Received:t="AlertCard.CallInviteReceived";break;case A.ScheduleCallAlertTypes.Edited:t="AlertCard.CallInviteEdited";break;default:return E.default.switchStatementExhaustiveChecking(e.type)}const i=$(e.initiator);return{mostRecentMri:void 0,labelKey:t,creatorDisplayName:i.name,gender:i.gender,subject:e.subject}},t.getOnboardingDisplayInfo=function(){return{mostRecentMri:void 0,labelKey:"PopCards.NotificationHeader"}},t.getEmojiSupport=K,t.getReactionAlertAccessibilityLabel=function(e){const t=c.toAccessibilityLabel(h.decode(e),{message:e,includeSenderInformationInAccessibilityLabel:!1,includeReactionInformationInAccessibilityLabel:!1}),i=(0,a.chain)(e.getCleanedEmotionAnnotations(),(0,a.map)((e=>n.map(e.users,(t=>({key:e.key,mri:t.mri,time:t.time||NaN}))))),(0,a.flatten)(),(0,a.sortBy)((e=>e.time?-e.time:NaN))),o={messageContent:t},s=n.uniqBy(i,(e=>e.mri)),[r,l]=s;if(r&&(o.firstName=p.default.getDisplayName(r.mri)||r.mri),l&&(o.secondName=p.default.getDisplayName(l.mri)||l.mri),1===i.length){const e=m.default.getEmoticonByName(i[0].key);e&&(o.reaction=e.description||i[0].key)}o.nuberOfUsersReacted=s.length-1;const d=function(e){const t=(0,a.chain)(e.getCleanedEmotionAnnotations(),(0,a.map)((e=>e.users)),(0,a.flatten)(),(0,a.sortBy)((e=>e.time?-e.time:NaN)),(0,a.groupBy)((e=>e.mri)));switch(n.keys(t).length){case 1:const e=n.first(n.values(t));return e&&e.length>1?"AlertCard.SingleUserReactedAccessibilityLabel":e&&1===e.length?"AlertCard.SingleUserReactedWithReactionAccessibilityLabel":void 0;case 2:return"AlertCard.TwoUsersReactedAccessibilityLabel";default:return"AlertCard.MultipleUsersReactedAccessibilityLabel"}}(e);return _.getString(d,o)}},62630:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tryGetDndOsState=void 0,t.tryGetDndOsState=function(e){}},32910:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isUpgradedFromDelphiToElectron=t.tryToQuitAndInstallUpdate=t.quitAndUpdate=void 0;const n=i(52210),o=i(19784),s=i(94224),a=(i(10167),i(36237)),r=i(33754);let l=null;function c(){l?(a.debug((()=>"ElectronUtils: Calling quit and update.")),l.ipcProvider.appUpdate.quitAndUpdate.send()):a.error(n.LogTraceArea.GenericUnsafe,"ElectronUtils: No ElectronApi attached on window.")}"undefined"!=typeof window&&window.electronApi&&(l=window.electronApi),t.quitAndUpdate=c,t.tryToQuitAndInstallUpdate=function(e){if(l)return s.default.CallingStore.hasConnectedCalls()?(a.debug((()=>"ElectronUtils: Connected call when trying to update.")),void o.default.showConfirmationAlert(r.getString("QuitDialog.Message"),void 0,r.getString("QuitDialog.QuitLabel"),c,e)):void c();a.error(n.LogTraceArea.GenericUnsafe,"ElectronUtils: No ElectronApi attached on window.")},t.isUpgradedFromDelphiToElectron=function(){return!1}},31733:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getHelpAndFeedbackUrl=t.isSsoEnabled=t.getTelemetryCorrelationId=t.getUserVoiceLinkUrl=t.isUserVoiceLinkEnabled=t.addCommonTrackingParams=void 0;const n=i(96486),o=i(89391),s=i(33754),a=i(70583),r=i(82445),l=i(40363),c=i(58874),d=i(26712),u=i(53374);t.addCommonTrackingParams=function(e,t,i,n){const o=i?s.getLocale():l.default.getSystemLanguage();return e=d.default.addUrlParameter(e,"lang",o,t),e=d.default.addUrlParameter(e,"p",l.default.getSkypePlatformId().toString(),t),e=d.default.addUrlParameter(e,"v",l.default.getAppVersion(),t),e=d.default.addUrlParameter(e,"e",c.UIFactor[c.UIFactorHelper.getUIFactor()],t),n&&(e=d.default.addUrlParameter(e,"tcg",n,t)),e},t.isUserVoiceLinkEnabled=function(){return s.isEnglishLanguage()},t.getUserVoiceLinkUrl=function(){return o.default.getConfigSettings().go.host+o.default.getConfigSettings().feedbackAndProblemGoParam.userVoice},t.getTelemetryCorrelationId=function(){return u.default.newGuid()},t.isSsoEnabled=function(){return o.default.getFeedbackFeatures().forceSsoFlow},t.getHelpAndFeedbackUrl=function(e,t,i){let s=o.default.getConfigSettings().go.host+e;return s=a.addDefaultParamsToUrl(s,t,!0),s=d.default.addUrlParameters(s,n.pickBy(i,r.isQueryParameterOverrideValid)),d.default.getUrlParameterValue(s,"lang")&&(s=d.default.addUrlParameter(s,"setlang","")),s}},39769:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shouldRunUserIconExperiment=t.shouldRunPeopleTabsExperiment=t.runLandingExperiment=t.shouldRunLandingExperiment=void 0;const n=i(98278),o=i(46096),s=i(46195),a=i(41209),r=i(4735),l=i(53154),c=i(53374);function d(e){return a.isAddressBookEnabled()&&e}t.shouldRunLandingExperiment=d,t.runLandingExperiment=function(e,t){switch(e){case l.HubToShowAfterFinishedOnboarding.Recents:r.default.navigateToRecentsTab();break;case l.HubToShowAfterFinishedOnboarding.Calls:r.default.navigateToCallsTab();break;case l.HubToShowAfterFinishedOnboarding.People:r.default.navigateToPeopleTab();break;case l.HubToShowAfterFinishedOnboarding.Dial:r.default.navigateToCallsTab(),r.default.navigateToPSTNDialerWithParams({causeId:t,navigationSource:o.DialerNavigationSource.DeepLink},n.MainRootViewId);break;default:c.default.switchStatementExhaustiveChecking(e),r.default.navigateToRecentsTab()}},t.shouldRunPeopleTabsExperiment=function(e,t){return d(e)&&t===l.HubToShowAfterFinishedOnboarding.People},t.shouldRunUserIconExperiment=function(e,t){return e.centerControl===s.HeaderButtonType.Title&&t}},58666:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getShortLanguageTitle=t.getLanguageTitle=t.setLocale=t.resetLocaleToSystem=t.sortedLanguageInfo=void 0;const n=i(95283),o=(i(10167),i(33754)),s=i(78735);t.sortedLanguageInfo=[{code:"ar-SA",rtl:!0},{code:"bg-BG"},{code:"ca-ES"},{code:"zh-CN"},{code:"zh-TW"},{code:"hr-HR"},{code:"cs-CZ"},{code:"da-DK"},{code:"nl-NL"},{code:"de-DE"},{code:"el-GR"},{code:"en-GB"},{code:"en-US"},{code:"es-ES"},{code:"es-MX"},{code:"et-EE"},{code:"fi-FI"},{code:"fr-CA"},{code:"fr-FR"},{code:"he-IL",rtl:!0},{code:"hi-IN"},{code:"hu-HU"},{code:"id-ID"},{code:"it-IT"},{code:"ja-JP"},{code:"ko-KR"},{code:"lt-LT"},{code:"lv-LV"},{code:"ms-MY"},{code:"nb-NO"},{code:"pl-PL"},{code:"pt-PT"},{code:"pt-BR"},{code:"ro-RO"},{code:"ru-RU"},{code:"sk-SK"},{code:"sl-SI"},{code:"sr-Latn-RS"},{code:"sv-SE"},{code:"th-TH"},{code:"tr-TR"},{code:"uk-UA"},{code:"vi-VN"}],t.resetLocaleToSystem=function(){o.resetLocaleToSystem().toEs6Promise().then((()=>{s.default.setUserPreferencesLocal({locale:void 0})}))},t.setLocale=function(e){return o.setLocale(e).then((()=>{s.default.setUserPreferencesLocal({locale:e}),(0,n.setLanguageCookie)(e)}))},t.getLanguageTitle=function(e){return o.getStringUnsafe("SettingsLanguages."+e)},t.getShortLanguageTitle=function(e){return o.getStringUnsafe("ShortLanguages."+e)}},65515:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(31844),o=i(16778),s=i(97691),a=i(89391),r=i(98278),l=i(46096),c=i(36237),d=i(29130),u=(i(72997),i(4057)),g=i(30124);t.default=class{static shouldUseStackNavigationFromScreenSize(){if(g.default.isMobileSplitView())return s.Resolved(!0);if(d.default.isMobileScreenSize(r.MainRootViewId))return c.log(l.LogTraceArea.Navigation,"shouldUseStackNavigationFromScreenSize: Is mobile screen size, returning true"),s.Resolved(!0);let e;return e=void 0===this._screenDpi?n.default.screenDpi().then((e=>(this._screenDpi=e,e)),(e=>(c.warn(l.LogTraceArea.Navigation,"DeviceUtilities screenDpi failed: "+u.default.errorAsString(e)),0))):s.Resolved(this._screenDpi),e.then((e=>{if(0===e)return c.log(l.LogTraceArea.Navigation,"shouldUseStackNavigationFromScreenSize: screenDpi is unknown, returning "+!0),!0;const t=o.UserInterface.getPixelRatio(),i=o.UserInterface.measureWindow(),n=i.width*t/e,s=i.height*t/e,r=Math.sqrt(Math.pow(n,2)+Math.pow(s,2)),d=a.default.getS4LUiFeaturesNoSubscription().androidTabletSizeThreshold,u=r<d;return c.log(l.LogTraceArea.Navigation,"shouldUseStackNavigationFromScreenSize: screenSize: "+r+" threshold: "+d+" shouldUseStackNav: "+u),u}))}}},13608:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(71830),o=i(4735);t.default=class{static navigateToConversationOrScheduleNavigationOnLaunch(e){e.convId&&!n.isHighlightsThread(e.convId)&&o.default.navigateToNonHighlightsConversationOrScheduleNavigationOnLaunch(e)}}},21090:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDirection=t.isUsingReactNavigationFlow=t.navigateWithReactNavigation=t.navigationTypesToTriggerKeys=t.setLeftNavViewMode=t.setEligibleLeftNavViewModes=t.baseSettingsGroup=t.getValidConversationIdForNavigation=t.searchViewModeContext=t.mainContentNavigatorIdForRootViewId=t.modalNavigatorIdForRootViewId=t.modalNavigatorIdForComponentContext=t.rightSideBarNavigatorIdForRootViewId=t.rightSideBarNavigatorIdForComponentContext=t.rootViewIdForComponentContext=t.mainContentNavigatorIdForComponentContext=t.maybeUpdateDesktopNavContext=t.mainStageViewModeForNavContext=t.stackNavigationDirection=t.shouldResetToHubAndConversation=t.considerNavContextsEqual=t.shouldNavigationContextPartReplaceExisting=t.deriveViewModeFromRightNavContext=t.defaultLeftNavViewMode=t.createRootCompositeSplitViewContext=t.convertStackNavContextToCompositeSplitNavContext=t.convertCompositeNavContextToStackNavContextStack=t.conversationNavigationDirection=void 0;const n=i(96486),o=i(97691),s=i(76621),a=i(71830),r=i(98278),l=i(39549),c=i(46096),d=i(36237),u=i(62807),g=i(17093),h=i(95691),p=i(48199),m=i(14976),S=i(16392),C=i(53374),f=i(44330),y=i(89391),_=i(30124),v=[g.MainStageNavViewMode.DesktopContentPanel,g.MainStageNavViewMode.Call];let b;function T(e){return e&&(e instanceof g.MobileHubNavigationContext||e instanceof g.AlertsHubNavigationContext||e instanceof g.SearchNavigationContext||e instanceof g.ContactsPanelV2NavigationContext||e instanceof g.ConversationParticipantsNavigationContext||e instanceof g.CreateConversationNavigationContext||e instanceof g.ActiveNowPanelNavigationContext||e instanceof g.ArchivedConversationsPanelNavigationContext)?S.StackNavigationDirection.Push:S.StackNavigationDirection.Present}function P(e){d.log(c.LogTraceArea.Navigation,"NavigationUtils.createRootCompositeSplitViewContext causeId: "+e);const t=new g.RootCompositeSplitViewContext({}),i=t.getLeftNavigationContext();return i&&M(i,i.state.viewMode,e),t}function A(e,t,i){return(t instanceof g.CallNavigationContext||t instanceof u.MeetNowNavigationContext)&&!i?g.LeftNavViewMode.None:g.LeftNavViewMode.Recents}function k(e){return e&&e.rootViewId?e.rootViewId:r.MainRootViewId}function I(e){let t=S.StackNavigatorId.DesktopSidebar;if(f.default.isSplitViewSupported()){const i=function(e){return e===r.MainRootViewId?r.MainRootViewId:h.RightSidebarNavigatorPrefix+e}(e);i&&(t=i)}return t}function w(e){return e!==r.MainRootViewId&&e.startsWith(h.ModalNavigatorPrefix)?e:h.ModalNavigatorPrefix+e}function N(e){let t=S.StackNavigatorId.DesktopContent;if(f.default.isSplitViewSupported()){const i=e!==r.MainRootViewId?h.MainContentNavigatorPrefix+e:void 0;i&&(t=i)}return t}function M(e,t,i){if(b){const o=n.includes(b,t)?t:g.LeftNavViewMode.None;d.log(c.LogTraceArea.Navigation,"NavigationUtils.setLeftNavViewMode viewMode: "+t+" filteredViewMode: "+o+" causeId: "+i),e.setViewMode(o)}else d.log(c.LogTraceArea.Navigation,"NavigationUtils.setLeftNavViewMode viewMode: "+t+" causeId: "+i),e.setViewMode(t);return h.CompositeNavigationType.LeftSidebar}t.conversationNavigationDirection=T,t.convertCompositeNavContextToStackNavContextStack=function(e){d.log(c.LogTraceArea.Navigation,"NavigationUtils._convertCompositeNavContextToStackNavContextStack");const t=[],i=new g.SimpleSplitNavigationContext({});d.log(c.LogTraceArea.Navigation,"NavigationUtils: convert to stack nav, adding hub");const o=new g.MobileHubNavigationContext({hubTab:g.HubTab.Recents});if(t.push(o),!e)return i.setNavStack(t),i;if(e){const i=e.getLeftNavigationContext();if(i){const e=i.getConversationsListContext();o.state.hubTab=e.state.currentTab}const s=n.last(e.getNavStack());if(s instanceof g.DesktopContentPanelNavigationContext){const e=function(e){const t=e.getConversationContext();if(t&&t.state.conversationId){d.log(c.LogTraceArea.Navigation,"NavigationUtils: convert to stack nav, adding conversation: "+m.mriOrId(t.state.conversationId));const e=new g.MobileContentPanelNavigationContext({});return e.setConversationContext(t.state),e}return}(s);e&&t.push(e)}}return i.setNavStack(t),i},t.convertStackNavContextToCompositeSplitNavContext=function(e){const t=C.default.newCauseId();d.log(c.LogTraceArea.Navigation,"NavigationUtils.convertStackNavContextToCompositeSplitNavContext causeId: "+t);let i,o=P(t),s=!1;const a=e?e.getNavStack():[];if(!s&&n.includes(v,g.MainStageNavViewMode.Call)){const e=n.findLast(a,(e=>e instanceof g.CallNavigationContext));i=e?e.state.conversationId:void 0,e&&(d.log(c.LogTraceArea.Navigation,"NavigationUtils: convert to composite nav, adding Call, callId: "+e.state.callId),o.setNavStack([e]),s=!0)}if(!s&&n.includes(v,g.MainStageNavViewMode.DesktopContentPanel)){const e=n.findLast(a,(e=>e instanceof g.MobileContentPanelNavigationContext)),t=e?e.getConversationContext():void 0;if(i=t?t.state.conversationId:void 0,t&&i){d.log(c.LogTraceArea.Navigation,"NavigationUtils: convert to composite nav, adding DesktopContentPanel, conversationId: "+m.mriOrId(i));const e=new g.DesktopContentPanelNavigationContext({});e.setConversationContext(t.state),o.setNavStack([e]),s=!0}}if(!s){d.log(c.LogTraceArea.Navigation,"NavigationUtils: convert to composite nav, adding WelcomeScreen");const e=new g.WelcomeScreenContext({});o.setNavStack([e])}const r=new g.LeftNavigationViewContext({viewMode:g.LeftNavViewMode.None});M(r,A(void 0,n.last(o.getNavStack())),t),o.setMasterContext(r);let l=g.HubTab.Recents;const u=n.findLast(a,(e=>e instanceof g.MobileHubNavigationContext));u&&!n.isUndefined(u.state.hubTab)&&(l=u.state.hubTab);const h=r.getConversationsListContext();return h.state.currentTab=l,h.state.selectedConversationId=i,o},t.createRootCompositeSplitViewContext=P,t.defaultLeftNavViewMode=A,t.deriveViewModeFromRightNavContext=function(e){return e?e instanceof g.GalleryNavigationContext?g.RightSidebarViewMode.Gallery:e instanceof g.FindPanelNavigationContext?g.RightSidebarViewMode.Find:e instanceof g.InAppBrowserNavigationContext?g.RightSidebarViewMode.InAppBrowser:g.RightSidebarViewMode.Other:g.RightSidebarViewMode.None},t.shouldNavigationContextPartReplaceExisting=function(e,t){if(e instanceof g.MobileHubNavigationContext&&t instanceof g.MobileHubNavigationContext)return!0;if(e instanceof g.MobileContentPanelNavigationContext&&t instanceof g.MobileContentPanelNavigationContext){if(t.state.shouldReplaceCurrentContext)return!0;const i=e.getConversationContext(),n=t.getConversationContext();if((i?i.state.conversationId:void 0)===(n?n.state.conversationId:void 0))return!0}return e instanceof g.CallNavigationContext&&t instanceof g.CallNavigationContext&&e.state.initialConversationMri===t.state.initialConversationMri||e instanceof g.DetailsNavigationContext&&t instanceof g.DetailsNavigationContext&&e.state.mri===t.state.mri},t.considerNavContextsEqual=function(e,t){if(e instanceof g.MobileHubNavigationContext&&t instanceof g.MobileHubNavigationContext)return!0;if(e instanceof g.MobileContentPanelNavigationContext&&t instanceof g.MobileContentPanelNavigationContext){const i=t.getConversationContext(),n=e.getConversationContext();if(i&&n&&n.state.conversationId===i.state.conversationId&&n.state.scrollToTimestamp===i.state.scrollToTimestamp&&n.state.forceRefreshFocus===i.state.forceRefreshFocus&&n.state.selectedNumberForSMS===i.state.selectedNumberForSMS)return d.log(c.LogTraceArea.Navigation,"NavigationUtils.considerNavContextsEqual found matching MobileContentPanelNavigationContext conversationId: "+m.mriOrId(n.state.conversationId)),!0}return e instanceof g.CallNavigationContext&&t instanceof g.CallNavigationContext&&e.state.callId===t.state.callId?(d.log(c.LogTraceArea.Navigation,"NavigationUtils.considerNavContextsEqual found matching CallNavigationContext callId: "+e.state.callId),!0):t.id===e.id},t.shouldResetToHubAndConversation=function(e,t){return e instanceof g.CallNavigationContext&&t instanceof g.MobileContentPanelNavigationContext},t.stackNavigationDirection=function(e,t){return p.default.transitionHintForPopCard()?S.StackNavigationDirection.Present:n.isUndefined(e.state.navigationDirection)?e instanceof g.CaptureComboNavigationContext||e instanceof g.ConversationMediaViewerPanelContext||e instanceof g.InAppBrowserNavigationContext||e instanceof g.MediaPickerNavigationContext||e instanceof g.PSTNCountrySelectorNavigationContext||e instanceof g.SkypeNumberCountryAreaSelectorNavigationContext||e instanceof g.SkypeNumberPrefixSelectorNavigationContext||e instanceof g.SearchNavigationContext||e instanceof g.AlertsHubNavigationContext||e instanceof g.QuickCallNavigationContext?S.StackNavigationDirection.Present:e instanceof g.MobileContentPanelNavigationContext?T(t):e instanceof g.SyncAddressBookContext||e instanceof g.PeopleYouMayKnowNoticeContext||e instanceof g.TelemetryConsentContext||e instanceof g.ThemeContext?e.state.isFirstLogin?S.StackNavigationDirection.Push:S.StackNavigationDirection.Present:e instanceof g.ConversationParticipantsNavigationContext&&t&&t instanceof g.MobileHubNavigationContext||e instanceof g.CreateConversationNavigationContext&&t&&t instanceof g.MobileHubNavigationContext||e instanceof g.ReportConcernNavigationContext&&t&&t instanceof g.MobileHubNavigationContext?S.StackNavigationDirection.Present:S.StackNavigationDirection.Push:e.state.navigationDirection},t.mainStageViewModeForNavContext=function(e){return e instanceof g.WelcomeScreenContext?g.MainStageNavViewMode.WelcomeScreen:e instanceof g.DesktopContentPanelNavigationContext?g.MainStageNavViewMode.DesktopContentPanel:e instanceof g.CallNavigationContext?g.MainStageNavViewMode.Call:e instanceof g.ForcedUpgradeContext?g.MainStageNavViewMode.ForcedUpgradeScreen:void 0},t.maybeUpdateDesktopNavContext=function(e,t){d.log(c.LogTraceArea.Navigation,"NavigationUtils.maybeUpdateDesktopNavContext, causeId "+t);let i=e;if(e instanceof g.ConversationNavigationContext){d.log(c.LogTraceArea.Navigation,"NavigationUtils.maybeUpdateDesktopNavContext: updating desktop conversation context, causeId "+t);const n=new g.DesktopContentPanelNavigationContext({});n.setConversationContext(e.state),i=n}return i},t.mainContentNavigatorIdForComponentContext=function(e){return N(k(e))},t.rootViewIdForComponentContext=k,t.rightSideBarNavigatorIdForComponentContext=function(e){return I(k(e))},t.rightSideBarNavigatorIdForRootViewId=I,t.modalNavigatorIdForComponentContext=function(e){return w(k(e))},t.modalNavigatorIdForRootViewId=w,t.mainContentNavigatorIdForRootViewId=N,t.searchViewModeContext=function(e){let t=g.LeftNavViewMode.Recents;return e.state.viewMode&&e.state.viewMode!==g.LeftNavViewMode.ConversationInCall&&(t=e.state.viewMode),t},t.getValidConversationIdForNavigation=function(e,t,i=c.NavigationConversationOrigin.Unknown){if(d.log(c.LogTraceArea.Navigation,"NavigationUtils: getValidConversationIdForNavigation, desiredConvId = "+m.mriOrId(e)+" causeId: "+t+" origin: "+i),e&&a.isPhoneMri(e))return s.default.ensureConversationLoadedOrFaked(e,c.ConversationFakedOrigin.Navigation).then((()=>e));let n;return n=e?a.isOneOnOneConversation(e)||a.isBookmarkConversation(e)?s.default.ensureConversationLoadedOrFaked(e,c.ConversationFakedOrigin.Navigation).then((()=>e)):s.default.ensureConversationLoaded(e).then((()=>e)):o.Resolved(void 0),n.then((e=>{if(e&&(0,l.default)().ableToViewConversation(e))return d.log(c.LogTraceArea.Navigation,"NavigationUtils: ableToViewConversation, navConvId = "+m.mriOrId(e)+" causeId: "+t),e;d.log(c.LogTraceArea.Navigation,"NavigationUtils: NOT ableToViewConversation, navConvId = "+m.mriOrId(e)+" causeId: "+t),d.log(c.LogTraceArea.Navigation,"NavigationUtils: no valid conversationId, causeId: "+t)}))},t.baseSettingsGroup=function(){return g.SettingsGroup.AccountAndProfile},t.setEligibleLeftNavViewModes=function(e,t){const i=C.default.newCauseId();d.log(c.LogTraceArea.Navigation,"NavigationUtils.setEligibleLeftNavViewModes viewModes: "+e+" causeId: "+i),b=e,t&&M(t,t.state.viewMode,i)},t.setLeftNavViewMode=M,t.navigationTypesToTriggerKeys=function(e){return n.uniq(e.map((e=>{switch(e){case h.CompositeNavigationType.Default:case h.CompositeNavigationType.MainContent:case h.CompositeNavigationType.LeftSidebar:return h.TriggerKeys.NavigationAndTabs;case h.CompositeNavigationType.RightSidebar:return h.TriggerKeys.DesktopSidebar;case h.CompositeNavigationType.Modal:return h.TriggerKeys.ModalNavigation}})))},t.navigateWithReactNavigation=function(e,t,i){var n;if(!i)return;const[o,s]=function(e){if(e instanceof g.MobileContentPanelNavigationContext){const t=Object.keys(e.children),i=e.children[t[0]];return[t[0],Object.assign({},i.state)]}return e instanceof g.RequiredScenarioContext?[e.stateId,Object.assign(Object.assign({},e.state),{navigator:e.navigator})]:[e.stateId,Object.assign({},e.state)]}(i);if(t===S.StackNavigationType.PopToRoot||i.state.shouldResetNavStack){const t=e.getState();if(t&&t.routes.length>0){const n=t.routes[0];e.reset({index:1,routes:[{key:n.key,name:n.name,params:n.params},{name:i.stateId,params:s}]})}else e.navigate(o,s)}else o===(null===(n=e.getCurrentRoute())||void 0===n?void 0:n.name)?e.setParams(s):e.navigate(o,s);window.history.pushState("skype","",window.location.origin)},t.isUsingReactNavigationFlow=function(){return _.default.isUsingStackNavigationContext()&&y.default.getS4LUiFeaturesNoSubscription().enableStackReactNavigation},t.getDirection=function(e){return g.NavigationDirections.get(e)}},13847:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isLastMessageUpdateReaction=t.isContact=t.isCallerAllowed=t.sendWarmCallTelemetry=t.getNotificationIcon=void 0;const n=i(96486),o=i(16778),s=i(44770),a=i(97691),r=i(63413),l=i(9520),c=i(71830),d=i(62141),u=i(984),g=i(87399),h=i(23293),p=i(46096),m=i(36237),S=i(98754),C=i(78735),f=i(18078),y=i(33326),_=i(14976),v=i(22538),b=i(4057),T=i(40363);function P(e,t){return v.HasStarted(u.default)?a.Resolved(u.default.isManuallyAddedContact(e)):v.EnsureStartedExclusive([S.default]).then((()=>{const i=S.default.getData(d.InternalKeys.ContactMris)||[],o=n.includes(i,e);return o?d.default.getDisplayableUser(e).then((e=>!(n.isUndefined(e)||!e.isManuallyAdded))).catch((i=>(m.log(p.LogTraceArea.Notifications,"Failed to getDisplayableUser for "+_.mriOrId(e)+" error: "+b.default.errorAsString(i)+" causeId: "+t),!1))):o})).catch((i=>(m.log(p.LogTraceArea.Notifications,"isContact set to false - InternalDataStore not started for caller "+_.mriOrId(e)+" error: "+b.default.errorAsString(i)+" causeId: "+t),!1)))}t.getNotificationIcon=function(e,t){if(!t)return s.Collection.GROUP_AVATAR_128;const i=t.getAvatarUrl();if(i)return i;let n=t.getMri();if(n&&e&&c.isEncryptedThread(n)&&(n=e.getMri()),n&&c.isUserMri(n)){if(e){const t=e.getAvatarUrl();if(t)return t;if(T.default.getPlatformType()===p.PlatformType.Android)return{initials:e.getInitials(),color:h.default.getPrimaryColor(n)}}return s.Collection.AVATAR_128}return n&&T.default.getPlatformType()===p.PlatformType.Android?{isGroupConversation:!0,color:h.default.getPrimaryColor(n)}:s.Collection.GROUP_AVATAR_128},t.sendWarmCallTelemetry=function(e,t){v.EnsureStarted(C.default).then((()=>{m.log(p.LogTraceArea.Notifications,"Previous warm push at "+new Date(e).toISOString()+" ended with disposition: "+y.descriptionForWarmCallDisposition(t)),m.track(new l.WarmCalNotificationDisposition(e,t)),C.default.setUserPreferencesLocal({timeAwakenedByWarmCallNotification:void 0})}))},t.isCallerAllowed=function(e,t,i){return e?function(e){let t;t=o.App.getActivationState()!==o.Types.AppActivationState.Active?v.EnsureStarted(r.default).then((()=>r.default.isContactBlocked(e))):g.isConversationBlockedAsync(e);return t}(e).then((n=>(m.log(p.LogTraceArea.Notifications,"isCallerAllowed caller "+_.mriOrId(e)+" blocked: "+n+" causeId: "+i),n||!t||c.isPhoneMri(e)?a.Resolved(n?p.PersonAllowed.Blocked:p.PersonAllowed.Allowed):c.isGroupConversation(e)?a.Resolved(p.PersonAllowed.NotContact):P(e,i).then((t=>(m.log(p.LogTraceArea.Notifications,"isCallerAllowed caller "+_.mriOrId(e)+" isContact: "+t+" causeId: "+i),a.Resolved(t?p.PersonAllowed.Allowed:p.PersonAllowed.NotContact))))))):(m.log(p.LogTraceArea.Notifications,"isCallerAllowed caller undefined blocked: false causeId: "+i),a.Resolved(p.PersonAllowed.Allowed))},t.isContact=P,t.isLastMessageUpdateReaction=function(e){return f.default.isMyMri(e.creator)&&e.hasUnseenReactions()}},33825:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNewMessageFromSelection=t.getSelectedText=t.isTextSelected=void 0;const n=i(78045),o=i(82261),s=i(46096),a=i(78735),r=i(30124);function l(){if(r.default.isUsingSplitViewNoSubscription()){const e=n.default.getLastActiveSplitViewWindow();return e&&e.getWindow()}if("undefined"!=typeof window)return window}function c(){var e;const t=l();if(!t)return"";const i=t.getSelection(),n=null==i?void 0:i.getRangeAt(0),o=null==n?void 0:n.endContainer,s=null===(e=null==o?void 0:o.parentElement)||void 0===e?void 0:e.classList.contains("DraftEditor-editorContainer");return 0===(null==i?void 0:i.focusOffset)&&n&&s&&!a.default.getUserPreferencesLocalNoSubscription().pasteAsQuotesEnabled&&n.setEnd(n.commonAncestorContainer,1),i?i.toString():""}t.isTextSelected=function(){const e=l();if(!e)return!1;const t=e.getSelection();return!!t&&"Range"===t.type},t.getSelectedText=c,t.getNewMessageFromSelection=function(e,t){return o.createMessageInfoFromEscapedText(e,s.PostSource.EphemeralMessage,t||c())}},12187:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(51070),s=i(69203);t.default=class{static createHiddenStyle(e,t=s.ShowHideTransition.Slide,i=!1){let n=e;return n&&!i&&(n=!o.default.keepStatusBarVisibleNoSubscription()),{hidden:{hide:n,showHideTransition:t}}}static createBackgroundColorStyle(e,t=!0){return{backgroundColor:{color:e,animated:t}}}static createBarStyle(e,t=!0){return{barStyle:{style:e,animated:t}}}static mergeStyles(e){return n.reduce(e,((e,t)=>n.merge(e,t)),{})}}},60305:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(15069),o=i(89391),s=(i(46096),i(30124));i(40363);t.default=class{static useTabletUI(){return o.default.getS4LUiFeatures().enableResponsiveDesign&&n.EnvironmentInfo.isMobile()&&!s.default.isUsingStackNavigationContext()}static useTabletUINoSubscription(){return o.default.getS4LUiFeaturesNoSubscription().enableResponsiveDesign&&n.EnvironmentInfo.isMobile()&&!s.default.isUsingStackNavigationContextNoSubscription()}static isTablet(){return!(!o.default.getS4LUiFeaturesNoSubscription().enableResponsiveDesign||!n.EnvironmentInfo.isMobile())&&this.useTabletUI()}static isTabletNoSubscription(){return!(!o.default.getS4LUiFeaturesNoSubscription().enableResponsiveDesign||!n.EnvironmentInfo.isMobile())&&this.useTabletUINoSubscription()}static isIPad(){return!1}}},65953:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(36237),o=i(89391),s=i(78735),a=i(349);t.default=new class{constructor(){this._setFilterSetting=()=>{const e=s.default.shouldSendOptionalTelemetryData()||!o.default.getS4LTelemetryFeatures().enableTelemetryFiltering;a.setShouldSendOptionalData(e),n.debug((()=>`[TelemetryHelper] EventBase.ShouldSendOptionalData = ${a.ShouldSendOptionalData}`))}}init(){this._setFilterSetting(),s.default.subscribe(this._setFilterSetting),o.default.subscribe(this._setFilterSetting),o.default.subscribe((()=>{a.setTelemetryFilteringEnabled(o.default.getS4LTelemetryFeatures().enableTelemetryFiltering)}))}}},62751:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getResizedImageFromFilePath=t.getThumbnailFromFilePath=void 0;const n=i(97691);t.getThumbnailFromFilePath=(e,i,n,o)=>(0,t.getResizedImageFromFilePath)(e,i,n,50,o);t.getResizedImageFromFilePath=(e,t,i,o,s)=>n.Resolved({imageUri:e})},58874:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UIFactorHelper=t.UIFactor=void 0;const n=i(60305);var o;!function(e){e[e.Mobile=0]="Mobile",e[e.Tablet=1]="Tablet",e[e.Desktop=2]="Desktop"}(o=t.UIFactor||(t.UIFactor={}));t.UIFactorHelper=class{static getUIFactor(){return n.default.isTablet()?o.Tablet:o.Desktop}}},51038:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.populateProfilesToCalculateConvDisplayName=t.getDisplayableProfileWithConversationOwnerLookup=t.getDisplayableProfilePotentiallyBeforeStartupAsync=t.getDisplayableProfile=void 0;const n=i(96486),o=i(97691),s=i(1706),a=i(71830),r=i(76335),l=i(18078),c=i(72758);t.getDisplayableProfile=function(e){return a.isConnector(e)?r.default.getConnectorDescription(e):a.isAgent(e)?s.default.getAgentDescriptionForMri(e):(l.default.isMyMri(e)&&(e=l.default.getSkypeMri()),c.default.getDisplayableUserByMri(e))},t.getDisplayableProfilePotentiallyBeforeStartupAsync=function(e){return a.isConnector(e)?r.default.getConnectorDescriptionPotentiallyBeforeStartupAsync(e):a.isAgent(e)?s.default.getAgentDescriptionForMriPotentiallyBeforeStartupAsync(e):(l.default.isMyMri(e)&&(e=l.default.getSkypeMri()),c.default.getDisplayableUserByMriAsync(e))},t.getDisplayableProfileWithConversationOwnerLookup=function(e){const t=c.default.getConversationOwner(e);return c.default.getDisplayableUserByMri(t)},t.populateProfilesToCalculateConvDisplayName=function(e){if(!e||e.topicName())return o.Resolved();let t;if(t=e.isHighlightsThread()?a.isMyHighlightThread(e.id)?[]:n.compact([e.creator()]):e.getMemberMrisWithoutMe(),t.length>0){let e=[];const[i,r]=n.partition(t,(e=>a.isAgent(e)));if(r.length>0){const t=n.map(r,(e=>c.default.getDisplayableUserByMriAsync(e)));e.push(o.all(t).then((e=>{c.default.cacheDisplayableUsersBeforeStartup(e)})))}if(i.length>0){const t=n.map(i,(e=>s.default.getAgentDescriptionForMriPotentiallyBeforeStartupAsync(e)));e.push(o.all(t).then((e=>{s.default.cacheProfilesBeforeStartup(e)})))}return o.all(e).then(n.noop)}return o.Resolved()}},73877:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WindowDimensionUtils=void 0;const n=i(16778),o=i(98278),s=i(29130);i(51070);class a{static measureWindow(e){return s.default.windowDimensionsNoSubscription(e)}static measureScreen(e){return n.UserInterface.measureWindow(e===o.MainRootViewId?void 0:e)}static windowHeightWithoutStatusBar(e){return this.measureWindow(e).height}}t.WindowDimensionUtils=a,t.default=a},44330:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(78045),s=(i(89391),i(71830)),a=i(4336),r=i(61253),l=i(78735),c=i(95691);t.default=class{static isSplitViewSupported(){return o.default.splitViewSupported}static getWindowPreferences(e){return l.default.getUserPreferencesForConversationLocal(e).windowPreferences}static getDefaultWindowPreferences(){return{position:c.SplitViewDefaultWindowDimensions,isMaximized:!1}}static getDefaultModalPreferences(){return{position:{width:a.DefaultHeight,height:a.DefaultWidth,x:void 0,y:void 0},isMaximized:!1}}static getAuxiliaryWindowPreferences(e){var t;return null===(t=l.default.getUserPreferencesLocal().auxiliaryWindowPrefs)||void 0===t?void 0:t[e]}static storeAuxiliaryWindowPreferences(e,t){if(!t)return;const i=l.default.getUserPreferencesLocal().auxiliaryWindowPrefs||{},o=!n.isEmpty(i)&&i[e]?i[e]:{};(0,r.default)(o,t)||l.default.setUserPreferencesLocal({auxiliaryWindowPrefs:{[e]:t}})}static storeWindowPreferences(e,t,i){if(!t||!s.isMri(e))return;const o=l.default.getUserPreferencesLocal().conversationPrefs||{},a=!n.isEmpty(o)&&o[e]?o[e]:{},c={position:t,isMaximized:i};(0,r.default)(a.windowPreferences,c)||l.default.setUserPreferencesLocal({conversationPrefs:{[e]:{windowPreferences:c}}})}}},14980:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.navigateToCapturePreviewModalWithParams=t.closeCaptureCombo=t.navigateToCaptureComboWithParams=t.navigateToCaptureComboModalWithParams=void 0;const n=i(96486),o=i(52210),s=i(19784),a=i(94224),r=i(71727),l=i(51267),c=i(66649),d=i(36237),u=i(33754),g=i(4735),h=i(17093),p=i(30124),m=i(27357),S=i(21090),C=i(92210),f=i(53374);var y;function _(e,t,i,l){const g=function(){if(c.default.isUsingGogoNetworkNoSubscription())return y.isUsingGogoNetwork;const e=a.default.CallingStore.getConnectedAndNotOnHoldCallId();if(e&&r.default.disableCaptureAndChanges(e))return y.isProvidingInCallVideo;return}();if(g){if(!i&&g===y.isUsingGogoNetwork)return void d.log(o.LogTraceArea.Navigation,"CaptureNavigationActions: navigateToCaptureComboModalWithParams cancelled, gogo network detected");if(g===y.isProvidingInCallVideo&&!e.mediaPickerOnly){if(l){const t=n.clone(e);return t.mediaPickerOnly=!0,t.disableMediaPicker=!1,t}return d.log(o.LogTraceArea.Navigation,"CaptureNavigationActions: navigateToCaptureComboModalWithParams cancelled, providing in call video"),void s.default.showOKAlert(u.getString("CapturePanel.NoCameraWarning"),void 0,S.rootViewIdForComponentContext(t))}}return e}function v(e){if(e.pressTime){let t=new C.default(C.ScenarioName.ShowCameraViewfinder);t.start(void 0,e.pressTime),t.markStepCompleted("navigateToCaptureComboWithParams"),l.default.setPerfScenario(C.ScenarioName.ShowCameraViewfinder,t)}}!function(e){e[e.isUsingGogoNetwork=1]="isUsingGogoNetwork",e[e.isProvidingInCallVideo=2]="isProvidingInCallVideo"}(y||(y={})),t.navigateToCaptureComboModalWithParams=function(e,t,i,s,a){const r=_(e,t,!!s,!!a);if(!r)return;n.isUndefined(r.cameraMode)||l.default.setCameraMode(r.cameraMode),v(r);const c=f.default.newCauseId();d.log(o.LogTraceArea.Navigation,"NavigationActions: navigateToCaptureComboModalWithParams causeId: "+c),g.default.navigateAssertingUIStarted((()=>{g.default.launchModalEvent.fire({context:new h.CaptureComboNavigationContext(r),onDismiss:i,rootViewId:S.rootViewIdForComponentContext(t),causeId:c})}))},t.navigateToCaptureComboWithParams=function(e,t,i,n,s){const a=_(e,t,!!n,!!s);a&&(v(a),g.default.navigateAssertingUIStarted((()=>{const e=f.default.newCauseId();if(d.log(o.LogTraceArea.Navigation,"NavigationActions: navigateToCaptureComboWithParams, causeId: "+e),p.default.isUsingStackNavigationContext()){if(m.default.isOnTopOfNavigationStack(h.CaptureComboNavigationId))return void(i&&i());i&&g.default.setStackNavigationCompleteCallback(i);const t=new h.CaptureComboNavigationContext(a);m.default.navigateToView(t,e)}})))},t.closeCaptureCombo=function(e,t){d.log(o.LogTraceArea.Navigation,"NavigationActions: closeCaptureCombo,  causeId: "+e),p.default.isUsingStackNavigationContext()?m.default.isOnTopOfNavigationStack(h.CaptureComboNavigationId)&&g.default.navigateBack(e,t):g.default.navigateToDefaultConversation()},t.navigateToCapturePreviewModalWithParams=function(e,t,i){const n=f.default.newCauseId();d.log(o.LogTraceArea.Navigation,"NavigationActions.navigateToCapturePreviewModalWithParams, causeId: "+n),g.default.navigateAssertingUIStarted((()=>{g.default.launchModalEvent.fire({context:new h.CapturePreviewNavigationContext(e),rootViewId:S.rootViewIdForComponentContext(t),causeId:n,modalId:i})}))}},78364:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteConversationGroup=t.deleteConversation=void 0;const n=i(96486),o=i(16778),s=i(44720),a=i(91114),r=i(31751),l=i(39549),c=i(57102),d=i(52262),u=i(67121),g=i(46096),h=i(36237),p=i(33754),m=i(4735),S=i(21090),C=i(85677),f=i(35370),y=i(53374);function _(e,t,i,n,C,_){const v=S.rootViewIdForComponentContext(i);s.default.showDialog([e],t,v,C).then((t=>{const s=y.default.newCauseId();if(t){h.log(g.LogTraceArea.Navigation,`${n}._deleteChat confirmed, causeId: ${s}`),o.Accessibility.announceForAccessibility(p.getString("InfoPanel.ChatDeletedAccessibilityLabel",{chatName:d.default.getDisplayName(e)||""}));const t=(0,l.default)().getConversation(e);t&&t.isEncryptedThread()&&u.default.forgetPrivateConversation(e);const a=c.ConversationUtils.getOrderedConversations(r.default.getAllSiblingConversations(e),t).map((e=>e.id)),S=a.indexOf(e);let C;S>=0&&(C=S>0?a[S-1]:a[S+1]),m.default.navigateAfterDeleteConversation(e,s,i,C)}else{h.log(g.LogTraceArea.Navigation,`${n}._deleteChat canceled, causeId: ${s}`);const t=f.getConversationTypeForTelemetry(e);h.track(new a.ConversationDeletionCanceled(e,t)),_&&_()}}))}t.deleteConversation=_,t.deleteConversationGroup=function(e,t,i,l,c,u){const v=r.default.getDisplayableConversationsForUser(e);if(v.length<2)return void _(e,t,i,l,c,u);const b=n.find(v,(e=>e.isOneOnOne()&&!e.isEncryptedThread()&&!e.isSkypeSMSConversation()&&!e.isDeleted())),T=n.find(v,(e=>e.isEncryptedThread()&&!e.isDeleted())),P=v.filter((e=>!e.isDeleted()&&e.isSkypeSMSConversation())).map((e=>({mri:e.id,otherPartyMri:e.getOtherPartyMri()}))),A=n.compact([b&&{mri:b.id},T&&{mri:T.id},...P]),k=S.rootViewIdForComponentContext(i);C.default.showDialog(A,t,k).then((e=>{e&&s.default.showDialog(e,t,k,c).then((t=>{const n=y.default.newCauseId();if(t){h.log(g.LogTraceArea.Navigation,`${l}._deleteChat confirmed, causeId: ${n}`);const t=e.length>1?p.getString("InfoPanel.MultipleConversationsDeletedAnnouncement"):p.getString("InfoPanel.ChatDeletedAccessibilityLabel",{chatName:d.default.getDisplayName(e[0])||""});o.Accessibility.announceForAccessibility(t),m.default.navigateAfterDeleteConversation(e[0],n,i)}else{h.log(g.LogTraceArea.Navigation,`${l}._deleteChat canceled, causeId: ${n}`);const t=f.getConversationTypeForTelemetry(e[0]);h.track(new a.ConversationDeletionCanceled(e[0],t)),u&&u()}}))}))}},4735:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74958),o=i(96486),s=i(78045),a=i(16778),r=i(74634),l=i(72742),c=i(89391),d=i(19061),u=i(5531),g=i(22801),h=i(51077),p=i(81697),m=i(71830),S=i(98278),C=i(31751),f=i(75049),y=i(92758),_=i(39549),v=i(4336),b=i(46172),T=i(52262),P=i(59799),A=i(46096),k=i(81020),I=i(31733),w=i(66649),N=i(36237),M=i(26448),E=i(97073),x=i(33754),L=i(36699),R=i(62807),D=i(63189),B=i(89808),O=i(18078),F=i(17093),V=i(30124),U=i(95691),H=i(27357),W=i(24148),z=i(48199),G=i(21090),K=i(92210),j=i(10996),q=i(28377),Q=i(49140),X=i(93818),J=i(35426),$=i(50325),Y=i(29130),Z=i(14976),ee=i(44487),te=i(83181),ie=i(18639),ne=i(16392),oe=i(99948),se=i(60305),ae=i(94050),re=i(26712),le=i(72758),ce=i(53374),de=i(69496),ue=i(78440),ge=i(44330),he=i(66957),pe=i(21090);t.default=new class{constructor(){this.launchModalEvent=new r.default,this.closeModalEvent=new r.default,this._forceRefreshOnNextNavigate=!1,this._scenarioLookupByConversationId={},this._animationScenarios={},this._defaultNavigateToConvParams={convId:void 0,scrollToTimestamp:void 0,focusedMessageCuid:void 0,forceRefreshFocus:!1,contextConversationId:void 0,causeId:"",shouldAutoFocusInput:!1,shouldResetNavStack:!0,shouldFlattenNavOnInteraction:!1,origin:A.NavigationConversationOrigin.Unknown,isNewConversation:!1,inviteToken:void 0,popToRoot:!0,isFromPeopleRecommendations:!1,directShareEventData:void 0},this.navigateBack=(e,t)=>{if(N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateBack, causeId: "+e),t){if(t.isPresentedInDesktopRightNav)return this._rightSidebarNavigateBack(e,t);if(t.isPresentedInGenericDesktopModal)return this._modalNavigateBack(e,t);if(t.isPresentedInDesktopContentPanel)return this._desktopContentNavigateBack(e,t);if(t.isPresentedByMobileStackNavigator)return this._stackNavNavigateBack(e)}return V.default.isUsingStackNavigationContext()?this._stackNavNavigateBack(e):this._modalNavigateBack(e,t)}}navigateAfterUIStarted(e){te.default.performAfterUIStarted((()=>{c.default.getS4LUiFeaturesNoSubscription().enableStackReactNavigation&&V.default.isUsingStackNavigationContextNoSubscription()?H.default.performAfterNavigationInitialized(e):e()}))}navigateAssertingUIStarted(e){te.default.isUIDisplayed()?e():N.log(A.LogTraceArea.Navigation,"navigation attempted prior to UI being displayed")}forceRefreshOnNextNavigation(){this._forceRefreshOnNextNavigate=!0}flattenNavStack(){V.default.isUsingStackNavigationContext()&&H.default.flattenNavStack()}reduceNavStack(e,t=!1){V.default.isUsingStackNavigationContext()&&H.default.reduceNavStack(e,void 0,t)}reduceModalNavStack(e,t,i=!1){const n=G.modalNavigatorIdForRootViewId(t);H.default.reduceNavStack(e,n,i)}goBack(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.goBack, causeId: "+e),(null==t?void 0:t.goBack)?t.goBack(e):(N.warn(A.LogTraceArea.Navigation,"NavigationActions.goBack called without componentContext.goBack, causeId: "+e),this.navigateBack(e,t))}stackNavigationStarted(e,t,i,n,o){if(N.log(A.LogTraceArea.Navigation,"NavigationActions: navigationStarted: "+(o||n?o+" -> "+n:"no progress info")),t instanceof F.MobileContentPanelNavigationContext){const e=t.getConversationContext();if(e){const t=e.state.conversationId,i=this._getScenarioIdForAnimation(t),n=new ae.default(K.ScenarioName.ConversationOpenAnimation,i);n.start(),this._animationScenarios[t]=n}}const s={index:n,type:this._routeTypeForContext(t)},a={index:o,type:this._routeTypeForContext(i)};z.default.onNavigationStarted(e,s,a)}stackNavigationCompleted(){var e;const t=ce.default.newCauseId();if(N.log(A.LogTraceArea.Navigation,"NavigationActions: navigationCompleted causeId: "+t),V.default.isUsingStackNavigationContext()){const t=H.default.getCurrentNavigationStackRoute();if((null==t?void 0:t.name)===F.MobileContentPanelId){if(t.params){const i=this._animationScenarios[null===(e=t.params)||void 0===e?void 0:e.conversationId];i&&!i.isResolved()&&i.finish()}if(!(0,pe.isUsingReactNavigationFlow)()){const e=o.last(H.default.getCurrentNavigationStack());(null==e?void 0:e.state.shouldResetNavStack)&&this.flattenNavStack()}}this._stackNavigationCompleteCallback&&(N.log(A.LogTraceArea.Navigation,"NavigationActions: navigationCompleted, calling _navigationCompleteCallback"),this._stackNavigationCompleteCallback(),this._stackNavigationCompleteCallback=void 0)}z.default.onNavigationCompleted(),z.default.setTransitionHint(void 0),E.default.stopSkippingMobileHub(t)}collapseSplitNavContext(e,t,i){N.log(A.LogTraceArea.Navigation,"NavigationActions: collapseSplitNavContext collapsed: "+t+" navigator: "+n.pii.Omit(e)+" causeId: "+i),e===ne.StackNavigatorId.DesktopContent&&this.clearRightSidebarContext(!0,i,S.MainRootViewId),H.default.collapseSplitNavContext(e,t,i)}navigateToCompositeGroup(e,t,i,n=!0){const s=H.default.getCompositeCallVisible(t),a=i(n,e),r=o.includes(a,U.CompositeNavigationType.MainContent)&&H.default.getCompositeCallVisible(t);N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToCompositeGroup,  isCallVisible: "+s+" isNewCallVisible: "+r+" causeId: "+e),this.navigateToCompositeContext(e,a,s&&!r,t)}navigateToModalContext(e,t,i,o){const s=G.modalNavigatorIdForRootViewId(o);N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToModalContext navigatorId: "+n.pii.Omit(s)+" causeId: "+i);const a=H.default.getCurrentStackNavigationContext(s,!1);H.default.modalNavigateToView(e,a.getMasterContext(),s,o,t?ne.StackNavigationType.PopToRoot:ne.StackNavigationType.Push,!0,i)}navigateToDesktopSettings(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToDesktopSettings, causeId: "+t),Y.default.isMobileScreenSize(e)&&(c.default.getS4LNativePlatformsEcsConfig().enableElectronNativeModals,1)?this.navigateToSettingsModalContext(new F.SettingsMenuContext({title:x.getString("UserSettingsPanel.SettingsTitle")}),!0,t,e):this.navigateToRootDesktopSettingsGroup(G.baseSettingsGroup(),e,t)}navigateToSettingsModalContext(e,t,i,n){N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToSettingsModalContext, causeId: "+i);const o=G.modalNavigatorIdForRootViewId(n);let s=H.default.getCurrentStackNavigationContext(o,!1).getMasterContext();s&&s instanceof F.SettingsMenuContext||(s=new F.SettingsMenuContext({title:x.getString("UserSettingsPanel.SettingsTitle")})),e instanceof F.SettingsMenuContext&&(e=s),H.default.stackNavigateToView(e,s,o,t?ne.StackNavigationType.PopToRoot:ne.StackNavigationType.Push,!0,i)}navigateToNonHighlightsConversationOrScheduleNavigationOnLaunch(e){const t=ce.default.newCauseId();if(N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToNonHighlightsConversationOrScheduleNavigationOnLaunch convId = "+Z.mriOrId(e.convId)+" causeId: "+t),te.default.isUIDisplayed())this.navigateToConversation(e);else{const i=i=>{N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToNonHighlightsConversationOrScheduleNavigationOnLaunch complete navigation. convId = "+Z.mriOrId(i)+" causeId: "+t);const n=this._getConversationNavigationContext(e,i);{const e=V.default.isUsingSplitViewNoSubscription()?f.default.rootViewIdForConversationMri(i):S.MainRootViewId;H.default.setNewStartingNavigationContext((()=>n),e),e!==S.MainRootViewId&&this._openSplitView(e,t)}};this.scheduleConvNavigationOnLaunch(e,i)}}scheduleConvNavigationOnLaunch(e,t){!o.isUndefined(e.origin)&&e.convId&&this._startNavigateToConvScenario(e.convId,e.origin,e.browserOrigin);const i=e.causeId;N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToConversationOnLaunch, convId = "+Z.mriOrId(e.convId)+" causeId: "+i),E.default.skipMobileHub(i),te.default.performAfterUIStarted((()=>{G.getValidConversationIdForNavigation(e.convId,i,e.origin).then((n=>{n?(this._sendConversationNavigationTelemetry(e,n),p.default.prioritizeConversation(n),this.fetchMemberConsumptionHorizon(n),t(n)):E.default.stopSkippingMobileHub(i)}))}))}navigateToSelectConversationsForSharingOrScheduleNavigationOnLaunch(e){te.default.isUIDisplayed()?this.navigateToShareWithPanel(e,void 0):(N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToSelectConversationsForSharingOrScheduleNavigationOnLaunch causeId: "+e.causeId),E.default.skipMobileHub(e.causeId),te.default.performAfterUIStarted((()=>{if(V.default.isUsingStackNavigationContext()){const t=new F.ShareWithPanelNavigationContext(e);H.default.setNewStartingNavigationContext((()=>t),S.MainRootViewId)}else this.navigateToShareWithPanel(e,void 0)})))}navigateToConversationFromSearch(e){const t=e.causeId||ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToConversationFromSearch, convId = "+Z.mriOrId(e.convId)+" causeId: "+t),this.navigateToConversation({convId:e.convId,scrollToTimestamp:e.scrollToTimestamp,focusedMessageCuid:e.focusedMessageCuid,causeId:t,shouldResetNavStack:!1,shouldFlattenNavOnInteraction:!0,origin:e.origin||A.NavigationConversationOrigin.Search,isNewConversation:e.isNewConversation,forceRefreshFocus:e.forceRefreshFocus})}navigateToConversationFromDiscoverPeople(e){const t=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToConversationFromDiscoverPeople convId = "+Z.mriOrId(e.convId)+" causeId: "+t),this.navigateToConversation({convId:e.convId,scrollToTimestamp:e.scrollToTimestamp,focusedMessageCuid:e.focusedMessageCuid,causeId:t,shouldResetNavStack:!1,shouldFlattenNavOnInteraction:!0,isFromPeopleRecommendations:!0,origin:e.origin||A.NavigationConversationOrigin.PeopleRecommendationsDiscoverPanel,isNewConversation:e.isNewConversation,forceRefreshFocus:e.forceRefreshFocus})}markScenarioStepCompleted(e,t){const i=this._getScenarioByConversationId(e);!i||i.isResolved()||i.isStepMarked(t)||i.markStepCompleted(t)}finishScenario(e){const t=this._getScenarioByConversationId(e);t&&!t.isResolved()&&t.finish()}navigateToPotentiallyRestrictedConversation(e){O.default.isGuestUser()?(G.setEligibleLeftNavViewModes(d.default.eligibleLeftNavViewModes(),this.getLeftNavigationContext(S.MainRootViewId)),this.navigateToConversation(e),this.reduceNavStack([F.JoiningGuestNavigatorId,F.MobileHubNavigationId,F.PromptPermissionsNavigatorId])):this.navigateToConversation(e)}navigateToConversation(e){this.navigateAfterUIStarted((()=>{e=o.extend(o.clone(this._defaultNavigateToConvParams),e);const t=V.default.isUsingStackNavigationContext(),i=e.causeId;N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToConversation, convId = "+Z.mriOrId(e.convId)+" causeId: "+i),G.getValidConversationIdForNavigation(e.convId,i,e.origin).then((n=>{if(N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToConversation, validConversationId = "+Z.mriOrId(n)+" causeId: "+i),n&&!o.isUndefined(e.origin)&&this._startNavigateToConvScenario(n,e.origin,e.browserOrigin),!n)return void(t||V.default.isUsingSplitViewNoSubscription()||this.navigateToCompositeGroup(i,S.MainRootViewId,((e,t)=>{const n=[];n.push(this.clearMainStageContext(e,t,S.MainRootViewId));const o=this.getLeftNavigationContext(S.MainRootViewId);return o&&n.push(G.setLeftNavViewMode(o,G.defaultLeftNavViewMode(F.MainStageNavViewMode.None,void 0),i)),n.push(this.clearRightSidebarContext(e,t,S.MainRootViewId)),n.push(this.setMainAreaFullScreen(!1,S.MainRootViewId)),n})));this._sendConversationNavigationTelemetry(e,n),p.default.prioritizeConversation(n),this.fetchMemberConsumptionHorizon(n);const s=this._getConversationNavigationContext(e,n);ee.default.deactivateSelectMessagesMode();const a=(0,_.default)().getConversation(n);if(a&&a.isArchived()&&y.default.setConversationsListMode(y.ConversationsListMode.ArchivedConversations),y.default.setLastVisitedConversationId(n),t&&!V.default.isMobileSplitView())H.default.navigateToView(this._getMobileContentPanelContext(e,s),i),u.default.meetnow().canNavigateBackFromJoinInvite||this.reduceNavStack([R.MeetNowLobbyNavigationId]);else{if(y.default.getConversationsListMode()===y.ConversationsListMode.ArchivedConversations){const t=a&&a.isArchived();(!t||t&&e.origin!==A.NavigationConversationOrigin.TabSwitcher&&e.origin!==A.NavigationConversationOrigin.Search&&e.origin!==A.NavigationConversationOrigin.ArchivedConversations)&&y.default.setConversationsListMode(y.ConversationsListMode.AllConversations)}const t=V.default.isUsingSplitViewNoSubscription(),r=t?f.default.rootViewIdForConversationMri(n):S.MainRootViewId;this.navigateToCompositeGroup(i,r,((i,a)=>{const l=[],c=n?F.MainStageNavViewMode.DesktopContentPanel:F.MainStageNavViewMode.None;if(n?l.push(this.navigateToMainStageContext(s,!!e.popToRoot,i,a,r)):l.push(this.clearMainStageContext(i,a,r)),!t){let t;if(Y.default.isMobileScreenSize(G.rootViewIdForComponentContext(void 0)))b.default.collapseDesktopStackNavContextNoSubscription()&&H.default.isSplitNavStackCollapsed(ne.StackNavigatorId.DesktopContent)&&H.default.isLeftPanelShowing(S.MainRootViewId)&&!H.default.isCallChatShowing(S.MainRootViewId)||(t=G.defaultLeftNavViewMode(c,s));else switch(e.origin){case A.NavigationConversationOrigin.Search:case A.NavigationConversationOrigin.AlertsPanel:break;default:t=G.defaultLeftNavViewMode(c,s)}const i=this.getLeftNavigationContext(S.MainRootViewId);if(i){o.isUndefined(t)||l.push(G.setLeftNavViewMode(i,t,a));i.getConversationsListContext().state.selectedConversationId=n}}return l.push(this.clearRightSidebarContext(i,a,r)),l.push(this.clearModalContext(i,a,r)),l.push(this.setMainAreaFullScreen(!1,r)),l}))}e.inviteLinkScenario&&!e.inviteLinkScenario.isResolved()&&(e.inviteLinkScenario.markStepCompleted("NavigateToConversation"),e.inviteLinkScenario.finish())}))}))}navigateToMessageFromSearchMessagePanel(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToMessageFromSearchMessagePanel convId = "+Z.mriOrId(t)+" causeId: "+n);const o=H.default.getActiveConversationState(i);if(o){o.scrollToTimestamp=e;const t=new F.ConversationNavigationContext(o);t.state.scrollToTimestamp=e,this.navigateToMainStageContext(t,!0,!1,n,i)}}navigateToMessage(e,t,i){this.navigateAfterUIStarted((()=>{const n=t;n.convId=e.conversationId,n.scrollToTimestamp=e.createdTime,n.focusedMessageCuid=e.cuid,o.isUndefined(n.forceRefreshFocus)&&H.default.getActiveConversationId(i)===e.conversationId&&(n.forceRefreshFocus=!0),this.navigateToConversation(n)}))}navigateCallComplete(e,t,i,n,s,a=!1){N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateCallComplete causeId: "+s),V.default.isUsingStackNavigationContext()?(o.some(H.default.getCurrentNavigationStack(),(e=>e instanceof F.CallNavigationContext))||N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateCallComplete, NO call found, causeId: "+s),i&&this.setStackNavigationCompleteCallback((()=>{D.default.focusMessageComposer()})),t?this.goBack(s,n):this.navigateToConversation({convId:e,shouldAutoFocusInput:i,causeId:s,isFromConversationBubble:a,origin:A.NavigationConversationOrigin.CallComplete})):this.navigateToConversation({convId:e,causeId:s,isFromConversationBubble:a,origin:A.NavigationConversationOrigin.CallComplete})}setStackNavigationCompleteCallback(e){this._stackNavigationCompleteCallback=e}navigateAfterDeleteConversation(e,t,i,n){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateAfterDeleteConversation, causeId: "+t);const o=V.default.isUsingStackNavigationContext(),s=(0,_.default)().isClearApplicableAndKeepInRecents(e),a={convId:n,causeId:t,shouldReplaceCurrentContext:!0,origin:A.NavigationConversationOrigin.TabSwitcher};if(!o||!s)if(s||!o){if(this.closeDetailsPanel(t,i),!s){const o=G.mainContentNavigatorIdForComponentContext(i),s=H.default.getCurrentStackNavigationContext(o,!1);if(s instanceof F.RootCompositeSplitViewContext){const i=s.getLeftNavigationContext();i&&i.getConversationsListContext().state.selectedConversationId===e&&(n?this.navigateToConversation(a):(y.default.setConversationsListMode(y.ConversationsListMode.AllConversations),this.navigateToWelcomeScreen(t)))}}}else n?this.navigateToConversation(a):this.navigateToRecentsTab()}openMainWindow(e,t,i){N.log(A.LogTraceArea.Navigation,"NavigationActions.openMainWindow causeId: "+i),e&&this.navigateToDesktopRecents(i),s.default.openMainView(t)}toggleRecentsInCall(e,t,i){N.log(A.LogTraceArea.Navigation,"NavigationActions.toggleRecentsInCall show: "+e+" causeId: "+t);const n={willToggle:!1,completeAction:o.noop};if(V.default.isUsingStackNavigationContext())return n;const s=i.rootViewId;return V.default.isUsingSplitView()&&i.rootViewType===S.RootViewType.SplitViewContent?s!==S.MainRootViewId?{willToggle:!1,completeAction:()=>{this.openMainWindow(!0,s,t)}}:n:H.default.isDesktopSplitNavStackCollapsedForRootViewId(s)?(this.mainStageContextPopToRoot(!1,t,i),{willToggle:!1,completeAction:()=>this.mainStageContextPopToRoot(!1,t,i)}):{willToggle:!0,completeAction:()=>{this.navigateToCompositeGroup(t,s,((t,i)=>{const n=[],o=this.getLeftNavigationContext(S.MainRootViewId);return o&&(e?n.push(G.setLeftNavViewMode(o,F.LeftNavViewMode.Recents,i)):n.push(G.setLeftNavViewMode(o,F.LeftNavViewMode.None,i))),n}))}}}openConversationInCall(e,t,i,n,o){N.log(A.LogTraceArea.Navigation,"NavigationActions.openConversationInCall, causeId: "+e),this._openConversationInCallNext(e,t,i,n,o)}closeConversationInCall(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.closeConversationInCall, causeId: "+e),this._closeConversationInCallNext(e,t)}navigateToBotsList(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToBotsList, causeId: "+e.causeId),this.navigateAssertingUIStarted((()=>{const i=new F.BotsListNavigationContext({filterBotsFunction:e.filterBotsFunction,sortBotsByProperty:e.sortBotsByProperty,botMarketplaceTitle:e.botMarketplaceTitle,navigationDirection:ne.StackNavigationDirection.Present});V.default.isUsingStackNavigationContext()?H.default.navigateToView(i,e.causeId,G.rootViewIdForComponentContext(t)):this.navigateToModalContext(i,!1,e.causeId,G.rootViewIdForComponentContext(t))}))}navigateToBotDiscovery(e=ne.StackNavigationDirection.Present,t){this._commonNavigateToModal(F.BotDiscoveryNavigationContext,t,"navigateToBotDiscovery",{},((t,i)=>{i&&(t.state.navigationDirection=e)}))}navigateToMobileArchivedConversationsPanel(){const e=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToMobileArchivedConversationsPanel, causeId: "+e),this.navigateAssertingUIStarted((()=>{if(V.default.isUsingStackNavigationContext()){const t=new F.ArchivedConversationsPanelNavigationContext({navigationDirection:ne.StackNavigationDirection.Present});H.default.navigateToView(t,e)}else;}))}navigateToDesktopRecents(e,t,i){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToRecents, causeId: "+e),this.navigateAssertingUIStarted((()=>{V.default.isUsingStackNavigationContext()&&!V.default.isMobileSplitView()||(y.default.getConversationsListMode()!==y.ConversationsListMode.AllConversations&&y.default.setConversationsListMode(y.ConversationsListMode.AllConversations),t?this.navigateToConversation({convId:t,origin:i||A.NavigationConversationOrigin.Recents,causeId:e}):this.navigateToCompositeGroup(e,S.MainRootViewId,((e,t)=>{const i=[];i.push(this.clearModalContext(e,t,S.MainRootViewId));const n=this.getLeftNavigationContext(S.MainRootViewId);if(n){i.push(G.setLeftNavViewMode(n,F.LeftNavViewMode.Recents,t));n.getConversationsListContext().state.currentTab=F.HubTab.Recents}return i})))}))}navigateToSearchFromPanel(e,t,i,n){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSearchFromPanel, causeId: "+e),V.default.isUsingStackNavigationContext()||i?this.navigateToSearch({searchOrigin:n},e):this.navigateToSearchInModal({searchOrigin:n},e,t)}navigateToSearch(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSearch, causeId: "+t),this.navigateAssertingUIStarted((()=>{const i=new F.SearchNavigationContext(e);if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.SearchNavigationId))return;j.searchWillOpen(),H.default.navigateToView(i,t)}else this.navigateToCompositeGroup(t,S.MainRootViewId,((e,t)=>{const n=this.getLeftNavigationContext(S.MainRootViewId);if(n){const e=n.getSearchContext();n.state.viewMode!==F.LeftNavViewMode.Search&&(n.state.searchViewModeContext=G.searchViewModeContext(n),G.setLeftNavViewMode(n,F.LeftNavViewMode.Search,t)),e.state=i.state}return j.searchWillOpen(),[U.CompositeNavigationType.LeftSidebar]}))}))}navigateToQuickCallPanelInLeftNav(e){const t=e.causeId;N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToQuickCallPanelInLeftNav, causeId: "+t),this.navigateAssertingUIStarted((()=>{V.default.isUsingStackNavigationContext()||this.navigateToCompositeGroup(t,S.MainRootViewId,((t,i)=>{const n=this.getLeftNavigationContext(S.MainRootViewId);if(n){const t=n.getCallsContext();G.setLeftNavViewMode(n,F.LeftNavViewMode.Calls,i),t.state=e;n.getConversationsListContext().state.currentTab=F.HubTab.Calls}return[U.CompositeNavigationType.LeftSidebar]}))}))}navigateToContactsPanelInLeftNav(e){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToContactsPanelInLeftNav, causeId: "+e),this.navigateAssertingUIStarted((()=>{V.default.isUsingStackNavigationContext()||this.navigateToCompositeGroup(e,S.MainRootViewId,((e,t)=>{const i=this.getLeftNavigationContext(S.MainRootViewId);if(i){G.setLeftNavViewMode(i,F.LeftNavViewMode.Contacts,t);i.getConversationsListContext().state.currentTab=F.HubTab.People}return[U.CompositeNavigationType.LeftSidebar]}))}))}navigateToNotificationsPanelInLeftNav(e){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToNotificationsPanelInLeftNav, causeId: "+e),this.navigateAssertingUIStarted((()=>{V.default.isUsingStackNavigationContext()||this.navigateToCompositeGroup(e,S.MainRootViewId,((e,t)=>{const i=[],n=this.getLeftNavigationContext(S.MainRootViewId);if(n){i.push(G.setLeftNavViewMode(n,F.LeftNavViewMode.Notifications,t));n.getConversationsListContext().state.currentTab=F.HubTab.Notifications}return i.push(this.clearRightSidebarContext(e,t,S.MainRootViewId)),i.push(this.setMainAreaFullScreen(!1,S.MainRootViewId)),i}))}))}navigateToNotificationsInLeftNav(){const e=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToNotificationsInLeftNav, causeId: "+e),this.navigateAssertingUIStarted((()=>{V.default.isUsingStackNavigationContext()||this.navigateToCompositeGroup(e,S.MainRootViewId,((e,t)=>{const i=this.getLeftNavigationContext(S.MainRootViewId);if(i){G.setLeftNavViewMode(i,F.LeftNavViewMode.Notifications,t);i.getConversationsListContext().state.currentTab=F.HubTab.Notifications}return[U.CompositeNavigationType.LeftSidebar]}))}))}navigateToSearchInModal(e,t,i){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSearchInModal, causeId: "+t),this.navigateAssertingUIStarted((()=>{if(V.default.isUsingStackNavigationContext());else{j.searchWillOpen();const n=new F.SearchNavigationContext(e);this.navigateToModalContext(n,!1,t,G.rootViewIdForComponentContext(i))}}))}navigateToPesSearch(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToPesSearch, causeId: "+e.causeId),this.navigateAssertingUIStarted((()=>{const i=new F.PesSearchNavigationContext({searchType:e.searchType,conversationId:e.conversationId,onMessageSent:e.onMessageSent,onCloseSearch:e.onCloseSearch,clearEditInChatsComposer:e.clearEditInChatsComposer});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.PesSearchNavigationId))return;i.state.navigationDirection=ne.StackNavigationDirection.Present,H.default.navigateToView(i,e.causeId,G.rootViewIdForComponentContext(t))}else this.navigateToModalContext(i,!1,e.causeId,G.rootViewIdForComponentContext(t))}))}closeSearchPanel(e,t,i){if(N.log(A.LogTraceArea.Navigation,"NavigationActions.closeSearchPanel, causeId: "+e),V.default.isUsingStackNavigationContext())H.default.isOnTopOfNavigationStack(F.SearchNavigationId)&&this.goBack(e,t);else{const t=this.getLeftNavigationContext(S.MainRootViewId);if(t&&t.state.viewMode!==F.LeftNavViewMode.Search)return;this.navigateToCompositeGroup(e,S.MainRootViewId,((e,t)=>{const n=this.getLeftNavigationContext(S.MainRootViewId);return n&&(G.setLeftNavViewMode(n,n.state.searchViewModeContext||F.LeftNavViewMode.Recents,t),n.state.searchViewModeContext=F.LeftNavViewMode.None,n.state.isMessageSent=i),[U.CompositeNavigationType.LeftSidebar]}))}}closeCallSearchPanel(e,t){if(N.log(A.LogTraceArea.Navigation,"NavigationActions.closeCallSearchPanel, causeId: "+e),V.default.isUsingStackNavigationContext())H.default.isOnTopOfNavigationStack(F.QuickCallPanelId)&&this.navigateBack(e,t);else{const t=this.getLeftNavigationContext(S.MainRootViewId);if(t&&t.state.viewMode!==F.LeftNavViewMode.CallSearch)return;this.navigateToCompositeGroup(e,S.MainRootViewId,((e,t)=>{const i=this.getLeftNavigationContext(S.MainRootViewId);return i&&G.setLeftNavViewMode(i,F.LeftNavViewMode.Recents,t),[U.CompositeNavigationType.LeftSidebar]}))}}navigateToAlertsHub(){const e=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToAlertsHub, causeId: "+e),this.navigateAssertingUIStarted((()=>{if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.AlertsHubNavigationId))return;const t=new F.AlertsHubNavigationContext({navigationDirection:ne.StackNavigationDirection.Present});H.default.navigateToView(t,e)}}))}navigateToMeControl(e,t,i=ne.StackNavigationDirection.Push,n=!1){this._fetchLatestUserInfoNow(),ue.default.maybeSetTooltipVisibility(!1),this._commonNavigateToModal(F.MeControlNavigationContext,e,"navigateToMeControl",{isMoodMessageEditMode:n},((e,t)=>{t&&(e.state.navigationDirection=i)}),t)}navigateToMyProfile(e,t,i=ne.StackNavigationDirection.Push){t!==A.ProfileOpenOrigin.MeControl&&this._fetchLatestUserInfoNow();this._commonNavigateToModal(F.MySettingsNavigationContext,e,"navigateToMyProfile",{},((e,n)=>{N.track(new X.ProfileOpened(A.ProfileType.My,t)),n&&(e.state.navigationDirection=i)}))}navigateToSettingsGroup(e,t,i,n){const o=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSettingsGroup, causeId: "+o),this.navigateAssertingUIStarted((()=>{if(V.default.isUsingStackNavigationContext()){const s=H.default.getCurrentNavigationStackRoute();if((null==s?void 0:s.name)===F.SettingsGroupNavigationId&&(null==s?void 0:s.params).group===e)return;const a=new F.SettingsGroupNavigationContext({group:e,origin:n});i&&(a.state.navigationDirection=i),H.default.navigateToView(a,o,t)}else this.navigateToRootDesktopSettingsGroup(e,t,o)}))}navigateToInviteLinkQRPanel(e,t,i,n){this._commonNavigateToModal(F.InviteLinkQRPanelNavigationContext,n,"navigateToInviteLinkQRPanel",{inviteLink:e,displayName:i},((e,t)=>{t&&(e.state.navigationDirection=ne.StackNavigationDirection.Present)}))}navigateToLanguagePicker(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToLanguagePicker, causeId: "+i);const n=new F.LanguagePickerPanelNavigationContext({});this.navigateAssertingUIStarted((()=>{V.default.isUsingStackNavigationContext()?H.default.navigateToView(n,i,t):this.navigateToModalContext(n,e,i,t)}))}navigateToNewSettingsPanel(e,t){this._commonNavigateToModal(F.NewSettingsPanelNavigationContext,t,"NewSettingsPanelNavigationContext",{},((t,i)=>{i&&(t.state.navigationDirection=e)}))}navigateToRootDesktopSettingsGroup(e,t,i){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToRootDesktopSettingsGroup, causeId: "+i),this.navigateAssertingUIStarted((()=>{if(!V.default.isUsingStackNavigationContext()){const n=new F.DesktopSettingsGroupNavigationContext({group:e,causeId:i});this.navigateToSettingsModalContext(n,!0,i,t)}}))}navigateToDesktopSettingsGroup(e,t,i,n){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToDesktopSettingsGroup, causeId: "+i),this.navigateAssertingUIStarted((()=>{if(!V.default.isUsingStackNavigationContext()){const o=new F.DesktopSettingsGroupNavigationContext({group:e,source:n});this.navigateToModalContext(o,!1,i,t)}}))}navigateToManageUsersSettingsPanel(e){this._commonNavigateToModal(F.ManageUsersSettingsPanelNavigationContext,e,"navigateToManageUsersSettingsPanel",{})}navigateToPnvEnterNumber(e,t){this._commonNavigateToModal(F.PnvEnterNumberContext,t,"navigateToPnvEnterNumber",{phoneNumber:e})}navigateToPnvEnterCode(e){this._commonNavigateToModal(F.PnvEnterCodeContext,e,"navigateToPnvEnterCode",{})}navigateToPnvDebugTool(){const e=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToPnvEnterCode, causeId: "+e),this.navigateAssertingUIStarted((()=>{if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.PnvDebugToolNavigationId))return;const t=new F.PnvDebugToolContext({});H.default.navigateToView(t,e)}}))}navigateToAvatarPickerWithParams(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToAvatarPickerWithParams, causeId: "+i);const n=new(e.useCommonAvatarPicker?F.ChooseAvatarCommonPickerContext:F.ChooseAvatarContext)({origin:e.origin,hideSkipButton:e.hideSkipButton,hideCloseButton:e.hideCloseButton,isFirstLogin:e.isFirstLogin,closeButtonIcon:e.closeButtonIcon,nextButtonIcon:e.nextButtonIcon,showCaptureViewFirst:e.showCaptureViewFirst,scenarioNavigator:null==e?void 0:e.scenarioNavigator});this.navigateAfterUIStarted((()=>{if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.AvatarNavigationId)||H.default.isOnTopOfNavigationStack(F.CommonAvatarNavigationId))return;H.default.navigateToView(n,i,t)}else this.navigateToModalContext(n,!1,i,t)}))}navigateToMediaViewerPanel(e){const t=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToMediaViewerPanel, causeId: "+t),this.navigateAssertingUIStarted((()=>{if(V.default.isUsingStackNavigationContext()){const i=new F.MediaViewerPanelContext({initialMedia:e.initialMedia,controller:e.controller,totalMedia:e.totalMedia,onClose:e.onClose,onLeftBoundSwipe:e.onLeftBoundSwipe,onRightBoundSwipe:e.onRightBoundSwipe,closeOnLastItemSwipe:e.closeOnLastItemSwipe,mouseControlsSize:e.mouseControlsSize,message:e.message,cacheMode:e.cacheMode,navigationDirection:ne.StackNavigationDirection.Present});H.default.navigateToView(i,t)}}))}navigateToConversationMediaViewer(e,t,i,n){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToConversationMediaViewer, causeId: "+t),this.navigateAssertingUIStarted((()=>{var o;if(V.default.isUsingStackNavigationContext()){const s=H.default.getCurrentNavigationStackRoute();if((null==s?void 0:s.name)===F.ConversationMediaViewerPanelNavigationId&&(null===(o=s.params)||void 0===o?void 0:o.conversationMri)===e.conversationMri)return void(n&&n());this.setStackNavigationCompleteCallback(n);const a=G.rootViewIdForComponentContext(i),r=new F.ConversationMediaViewerPanelContext(e);H.default.navigateToView(r,t,a)}}))}closeConversationMediaViewer(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.closeConversationMediaViewer, causeId: "+e),V.default.isUsingStackNavigationContext()&&H.default.isOnTopOfNavigationStack(F.ConversationMediaViewerPanelNavigationId)&&this.navigateBack(e,t)}navigateToAbout(){const e=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToAbout, causeId: "+e),this.navigateAssertingUIStarted((()=>{if(V.default.isUsingStackNavigationContext()){const t=new F.AboutNavigationContext({});H.default.navigateToView(t,e)}}))}navigateToThirdPartyNotices(e){this._commonNavigateToModal(F.ThirdPartyNoticesNavigationContext,e,"navigateToThirdPartyNotices",{})}navigateToBalanceStatePanel(e,t,i,n){this._commonNavigateToModal(F.GetBalanceStateNavigationContext,t,"navigateToBalanceStatePanel",{showHeader:!0,source:e,scrollTo:n},((e,t)=>{t&&i&&this.setStackNavigationCompleteCallback(i)}))}navigateToPurchaseContinuationPanel(e,t,i){this._commonNavigateToModal(F.PurchaseContinuationNavigationContext,i,"navigateToPurchaseContinuationPanel",{offerType:e,campaignRef:t})}navigateToSubscriptionsIntro(e){this._commonNavigateToModal(F.SubscriptionIntroNavigationContext,e,"navigateToSubscriptionsIntro",{})}navigateToTelemetryPerformanceMonitor(e){this._commonNavigateToModal(F.TelemetryPerformanceMonitorNavigationContext,e,"navigateToTelemetryPerformanceMonitor",{showHeader:!0})}navigateToPayments3ds(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToPayments3ds, causeId: "+i),this.navigateAssertingUIStarted((()=>{const n=new F.Payments3dsNavigationContext({order:e,callback:t});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.Payments3dsNavigationId))return;H.default.navigateToView(n,i,S.MainRootViewId)}else this.navigateToModalContext(n,!1,i,S.MainRootViewId)}))}navigateToGetProductWebFlow(e,t,i,n,o){const s=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToGetProductWebFlow, causeId: "+s),this.navigateAssertingUIStarted((()=>{V.default.isUsingStackNavigationContext(),e&&ie.SsoWebFlowExternalBrowser.open(de.default.getGoLinkWithItem(e),t,n,{},o)}))}navigateToSsoWebFlow(e,t,i,n,o=[],s=!1,a={},r=!1){const l=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSsoWebFlow, causeId: "+l),this.navigateAssertingUIStarted((()=>{V.default.isUsingStackNavigationContext(),ie.SsoWebFlowExternalBrowser.open(e,t,n,a)}))}navigateToCallingSettingsPanel(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallingSettingsPanel, causeId: "+i),this.navigateAssertingUIStarted((()=>{const n=new F.CallingSettingsPanelNavigationContext({});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.CallingSettingsPanelNavigationId))return;H.default.navigateToView(n,i,G.rootViewIdForComponentContext(t))}else this.navigateToModalContext(n,e,i,G.rootViewIdForComponentContext(t))}))}navigateToCallingSettingsEntry(e,t,i,n,o,s,a,r){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallingSettingsEntry, causeId: "+a),this._navigateToCallingSettingsEntryDesktop(e,t,n,i,o,s,a,r)}navigateToCallerIdSettingsPanel(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallerIdSettingsPanel, causeId: "+t),this.navigateAssertingUIStarted((()=>{const i=new F.CallerIdCallingSettingsPanelNavigationContext({});V.default.isUsingStackNavigationContext()?H.default.navigateToView(i,t,e):this.navigateToModalContext(i,!1,t,e)}))}navigateToCallerIdNumberPanel(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallerIdNumberPanel, causeId: "+t),this.navigateAssertingUIStarted((()=>{const i=new F.CallerIdNumberCallingSettingsPanelNavigationContext({});V.default.isUsingStackNavigationContext()?H.default.navigateToView(i,t,e):this.navigateToModalContext(i,!1,t,e)}))}navigateToSkypeNumberPurchaseFlow(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,`NavigationActions.navigateToSkypeNumberWebFlow, causeId: ${n}.`),this.navigateAssertingUIStarted((()=>{if(t)ie.SsoWebFlowExternalBrowser.open(e.goTarget,e.source,G.rootViewIdForComponentContext(i));else{const t=new F.SkypeNumberWebFlowNavigationContext(e);V.default.isUsingStackNavigationContext()?H.default.navigateToView(t,n,G.rootViewIdForComponentContext(i)):this.navigateToModalContext(t,!1,n,G.rootViewIdForComponentContext(i))}}))}navigateToSkypeNumberPanel(e=!1,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSkypeNumberList, causeId: ",i),this.navigateAssertingUIStarted((()=>{const n=new F.SkypeNumberListNavigationContext({});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.CallingSettingsPanelNavigationId))return;e&&this.reduceNavStack([F.SkypeNumberListNavigationId,F.SkypeNumberPanelPurchaseFlowNavigationId,F.CallerIdCallingSettingsPanelNavigationId,F.CallerIdNumberCallingSettingsPanelNavigationId,F.CallingSettingsPanelNavigationId,F.NewSettingsPanelNavigationId],!1),H.default.navigateToView(n,i)}else this.navigateToModalContext(n,e,i,t)}))}navigateToCallCaptionsSettingsPanel(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCaptionsSettingsPanel, causeId: ",n),this.navigateAssertingUIStarted((()=>{const o=new F.CallCaptionsSettingsPanelNavigationContext({callId:e,convId:t});V.default.isUsingStackNavigationContext()?H.default.navigateToView(o,n,i):this.navigateToModalContext(o,!1,n,i)}))}navigateToSkypeNumberNativePurchaseFlow(e=!1,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSkypeNumberNativePurchaseFlow, causeId: ",i),this.navigateAssertingUIStarted((()=>{const n=new F.SkypeNumberPanelPurchaseFlowNavigationContext({});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.SkypeNumberPanelPurchaseFlowNavigationId))return;H.default.navigateToView(n,i,t)}else this.navigateToModalContext(n,e,i,t)}))}navigateToDiagnosticTools(e){this._commonNavigateToModal(F.DiagnosticToolsNavigationContext,e,"navigateToDiagnosticTools",{})}navigateToSendDiagnosticLogs(e){this._commonNavigateToModal(F.SendDiagnosticLogsNavigationContext,e,"navigateToSendDiagnosticLogs",{})}navigateToBlockedUsersList(e){this._commonNavigateToModal(F.BlockedUsersListNavigationContext,e,"navigateToBlockedUsersList",{})}navigateToBackgroundEffectsSettings(e){this._commonNavigateToModal(F.BackgroundEffectsSettingsNavigationContext,e,"navigateToBackgroundEffectsSettings",{})}navigateToConnectedUsersList(e){this._commonNavigateToModal(F.ConnectedUsersListNavigationContext,e,"navigateToConnectedUsersList",{})}navigateToProfilePicturePanel(e){this._commonNavigateToModal(F.ProfilePicturePanelNavigationContext,e,"navigateToProfilePicturePanel",{})}navigateToManageSearchInfoPanel(e,t){this._commonNavigateToModal(F.ManageSearchInfoPanelNavigationContext,t,"navigateToManageSearchInfoPanel",{origin:e},(()=>{N.track(new Q.ManageSearchOpenedEvent(e))}))}navigateToFeatureFlags(e){this._commonNavigateToModal(F.FeatureFlagListNavigationContext,e,"navigateToFeatureFlags",{})}navigateToSlimcoreFlags(e){this._commonNavigateToModal(F.SlimcoreFlagListNavigationContext,e,"navigateToSlimcoreFlags",{})}navigateToRawPreferences(e){this._commonNavigateToModal(F.RawPreferencesNavigationContext,e,"navigateToRawPreferences",{})}navigateToCustomReactionsPanel(e,t){this._commonNavigateToModal(F.CustomReactionsPanelNavigationContext,t,"navigateToCustomReactionsPanel",{origin:e})}showDetailsPanelWithParams(e){const t=e.causeId;N.log(A.LogTraceArea.Navigation,"NavigationActions.showDetailsPanelWithParams, causeId: "+t);const i=new F.DetailsNavigationContext({mri:e.mri,conversationId:e.conversationId,showConversationSettings:e.showConversationSettings,origin:e.origin||he.DetailsPanelOrigin.Unknown,onBotAdded:e.onBotAdded});V.default.isUsingStackNavigationContext()?(i.state.navigationDirection=ne.StackNavigationDirection.Present,H.default.navigateToView(i,t,e.rootViewId)):this.navigateToModalContext(i,!1,t,e.rootViewId)}showChatSettingsPanel(e,t,i){this._commonNavigateToModal(F.ChatConfigNavigationContext,i,"showChatSettingsPanel",{mri:e,conversationId:t},((e,t)=>{t&&(e.state.navigationDirection=ne.StackNavigationDirection.Push)}))}closeDetailsPanel(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.closeDetailsPanel, causeId: "+e),V.default.isUsingStackNavigationContext()&&!V.default.isMobileSplitView()?H.default.isOnTopOfNavigationStack(F.DetailsNavigationId)&&this.navigateBack(e,t):this.closeGenericDesktopModal(e,G.rootViewIdForComponentContext(t))}closeDetailsPanelForUser(e,t,i){N.log(A.LogTraceArea.Navigation,"NavigationActions.closeDetailsPanelForUser, causeId: "+t);const n=(t,i)=>{const n=H.default.getCurrentNavigationStackRoute(t);(null==n?void 0:n.name)===F.DetailsNavigationId&&n.params.mri===e&&i()};if(V.default.isUsingStackNavigationContext())n(ne.StackNavigatorId.Mobile,(()=>this.navigateBack(t,i)));else{n(G.modalNavigatorIdForComponentContext(i),(()=>this.closeGenericDesktopModal(t,G.rootViewIdForComponentContext(i))))}}navigateToHub(e){this.navigateAfterUIStarted((()=>{if(N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToHub causeId: "+e),V.default.isUsingStackNavigationContext()){let t=new F.MobileHubNavigationContext({hubTab:F.HubTab.Recents});H.default.navigateToView(t,e)}else this.navigateToDefaultConversation()}))}navigateAfterDecliningContactRequest(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateAfterDecliningContactRequest, causeId: "+e),V.default.isUsingStackNavigationContext()?H.default.isOnTopOfNavigationStack(F.MobileContentPanelId)&&this.navigateBack(e,t):this.navigateToDefaultConversation()}navigateToSetConversationInfoPanel(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSetConversationInfoPanel, causeId: "+n),this.navigateAssertingUIStarted((()=>{const o=new F.CreateConversationNavigationContext({navigationDirection:i},e);V.default.isUsingStackNavigationContext()?H.default.navigateToView(o,n,t):this.navigateToModalContext(o,!1,n,t)}))}closeSetConversationInfoPanel(e,t){N.log(A.LogTraceArea.Navigation,`NavigationActions: closeSetConversationInfoPanel,  causeId: ${e}`),G.isUsingReactNavigationFlow()?this.goBack(e,t):V.default.isUsingStackNavigationContext()?H.default.isOnTopOfNavigationStack(F.CreateConversationNavigationId)&&this.navigateBack(e,t):this.closeGenericDesktopModal(e,G.rootViewIdForComponentContext(t))}navigateToReportConcernModal(e,t){const i=ce.default.newCauseId(),n=new F.ReportConcernNavigationContext({reportInfo:e,afterReportActions:t});N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToReportConcernModal, causeId: ",i),V.default.isUsingStackNavigationContext()?H.default.navigateToView(n,i,e.rootViewId):this.navigateToModalContext(n,!1,i,e.rootViewId)}closeReportConcernModal(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.closeReportConcernModal, causeId: "+e),this.navigateBack(e,t)}navigateToSetConversationParticipantsPanel(e,t,i,n){const o=!te.default.isUIDisplayed(),s=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSetConversationParticipantsPanel performOnLaunch: "+o+" causeId: "+s);const a=o=>{const a=H.default.getCurrentNavigationStackRoute();if((null==a?void 0:a.name)===F.ConversationParticipantsNavigationId&&a.params.isSuperComposer&&t)return;const r=new F.ConversationParticipantsNavigationContext({isSuperComposer:t,navigationDirection:n},e);V.default.isUsingStackNavigationContext()?o?H.default.setNewStartingNavigationContext((()=>r),S.MainRootViewId):H.default.navigateToView(r,s,i):this.navigateToModalContext(r,!1,s,i)};o?te.default.performAfterUIStarted((()=>a(!0))):this.navigateAssertingUIStarted((()=>a(!1)))}closeSetConversationParticipantsPanel(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.closeSetConversationParticipantsPanel, causeId: "+e),G.isUsingReactNavigationFlow()?this.goBack(e,t):V.default.isUsingStackNavigationContext()?H.default.isOnTopOfNavigationStack(F.ConversationParticipantsNavigationId)&&this.navigateBack(e,t):this.closeGenericDesktopModal(e,G.rootViewIdForComponentContext(t))}navigateToForcedUpgradeScreen(){const e=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToForcedUpgradeScreen, causeId: "+e),this.navigateAfterUIStarted((()=>{V.default.isUsingStackNavigationContext()||this.navigateToCompositeGroup(e,S.MainRootViewId,((e,t)=>{const i=[];i.push(this.setMainAreaFullScreen(!0,S.MainRootViewId));const n=new F.ForcedUpgradeContext({});return i.push(this.navigateToMainStageContext(n,!0,e,t,S.MainRootViewId)),i}))}))}navigateToMediaPickerPanelWithParams(e){const t=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToMediaPickerPanelWithParams, causeId: "+t),w.default.isUsingGogoNetworkNoSubscription()?N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToMediaPickerPanelWithParams cancelled, gogo network detected, causeId: "+t):this.navigateAssertingUIStarted((()=>{const i=new F.MediaPickerNavigationContext({capturedContentHandler:e.capturedContentHandler,conversationId:e.conversationId,allowVideo:e.allowVideo,allowMultiple:e.allowMultiple,defaultToAlbums:e.defaultToAlbums,disableMarkup:e.disableMarkup,onSendFlowComplete:e.onSendFlowComplete,onHandleEditMediaSelection:e.onHandleEditMediaSelection});V.default.isUsingStackNavigationContext()&&H.default.navigateToView(i,t)}))}closeMediaPickerPanel(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions: closeMediaPickerPanel,  causeId: "+e),V.default.isUsingStackNavigationContext()?(H.default.isOnTopOfNavigationStack(F.MediaPickerNavigationId)||H.default.isOnTopOfNavigationStack(F.CaptureComboNavigationId))&&this.navigateBack(e,t):this.navigateToDefaultConversation()}navigateToCapturePreview(e){const t=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCapturePreview, causeId: "+t),this.navigateAssertingUIStarted((()=>{const i=new F.CapturePreviewNavigationContext(e);if(V.default.isUsingStackNavigationContext())H.default.navigateToView(i,t,S.MainRootViewId);else{const e="DirectShare_Modal";this.launchModalEvent.fire({context:i,rootViewId:S.MainRootViewId,causeId:t,modalId:e})}}))}navigateToCaptureMultiPreview(e){const t=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCaptureMultiPreview, causeId: "+t),this.navigateAssertingUIStarted((()=>{const i=new F.CaptureMultiPreviewNavigationContext(e);if(V.default.isUsingStackNavigationContext())H.default.navigateToView(i,t,S.MainRootViewId);else{const e="DirectShare_Modal";this.launchModalEvent.fire({context:i,rootViewId:S.MainRootViewId,causeId:t,modalId:e})}}))}navigateToShareContactsToConversationPanel(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToShareContactsToConversationPanel, causeId: "+e.causeId),this.navigateAssertingUIStarted((()=>{const i=new F.ShareContactsToConversationContext(e);V.default.isUsingStackNavigationContext()?(i.state.navigationDirection=e.entryPoint===k.ShareContactOrigin.MessageComposer?ne.StackNavigationDirection.Present:void 0,H.default.navigateToView(i,e.causeId,t)):this.navigateToModalContext(i,!0,e.causeId,t)}))}navigateToShareWithPanel(e,t,i=!1){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToShareWithPanel, causeId: "+e.causeId),this.navigateAssertingUIStarted((()=>{const n=new F.ShareWithPanelNavigationContext(e);if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.ShareWithPanelNavigationId)){if(!e.isExternalShare)return;this.navigateBack(e.causeId,t)}H.default.navigateToView(n,e.causeId,G.rootViewIdForComponentContext(t))}else this.navigateToModalContext(n,i,e.causeId,G.rootViewIdForComponentContext(t))}))}navigateToEngagementShareableContentPanel(e,t,i=!1){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToEngagementShareableContentPanel, causeId:",e.causeId),this.navigateAssertingUIStarted((()=>{const n=new F.EngagementSharePanelContext(e);V.default.isUsingStackNavigationContext()?H.default.navigateToView(n,e.causeId,t):this.navigateToModalContext(n,i,e.causeId,t)}))}navigateToCaptivePortalQuestionnaire(e,t,i=!1){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCaptivePortalQuestionnaire, causeId: "+e),this.navigateAssertingUIStarted((()=>{const n=new F.CaptivePortalQuestionnaireContext({});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.CaptivePortalQuestionnaireNavigationId))return;H.default.navigateToView(n,e,t)}else this.navigateToModalContext(n,i,e,t)}))}navigateToInAppBrowser(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToInAppBrowser, causeId: "+i),this.navigateAssertingUIStarted((()=>{if(!M.default.isIntegrationUrl(e.url)&&!V.default.isUsingStackNavigationContext())return void a.Linking.openUrl(re.default.normalizeUrlProtocol(e.url)||e.url);let n=new F.InAppBrowserNavigationContext({origin:e.origin,url:e.url,integrationCorrelationId:e.openUrlOptions.integrationCorrelationId,headers:e.openUrlOptions.headers,injectedJavaScript:e.openUrlOptions.injectedJavaScript,onNavigationStateChange:e.openUrlOptions.onNavigationStateChange,onInAppWebBrowserClose:e.openUrlOptions.onInAppWebBrowserClose,onShareComplete:e.openUrlOptions.onShareComplete,onWebViewClose:e.openUrlOptions.onWebViewClose,onMessage:e.openUrlOptions.onMessage,headerTitle:e.openUrlOptions.browserTitle,conversationId:e.openUrlOptions.conversationId,messageId:e.openUrlOptions.messageId,suggestionAttributes:e.openUrlOptions.suggestionAttributes,hideBrowserActions:e.openUrlOptions.hideBrowserActions,perfScenario:e.openUrlOptions.openIntegrationScenario,useBingMiniCanvas:e.openUrlOptions.useBingMiniCanvas});if(V.default.isUsingStackNavigationContext())!e.openSecondaryBrowserIfNecessary&&H.default.isOnTopOfNavigationStack(F.InAppBrowserNavigationId)||(n.state.navigationDirection=void 0,H.default.navigateToView(n,i,t));else{const o=!!e.openUrlOptions.integrationCorrelationId;this.navigateToCompositeGroup(i,t,((e,i)=>{const s=[];return s.push(this.clearModalContext(!0,i,t)),s.push(this.navigateToRightSidebarContext(n,H.default.isInAppBrowserShowingNoSubscription(t)?ne.StackNavigationType.PopToRoot:ne.StackNavigationType.Push,e,i,t,o&&c.default.getS4LMessagingFeatures().enableDesktopComposerWithPopUpMenu)),s}))}}))}closeInAppBrowser(e,t){if(N.log(A.LogTraceArea.Navigation,"NavigationActions: closeInAppBrowser,  causeId: "+e),V.default.isUsingStackNavigationContext()){const i=H.default.getCurrentNavigationStackRoute();if((null==i?void 0:i.name)===F.InAppBrowserNavigationId){const n=i.params;n.onInAppWebBrowserClose&&n.onInAppWebBrowserClose(),this.navigateBack(e,t)}}else if(!this._maybePopToConversationInCall(e,t)){const i=G.rootViewIdForComponentContext(t);this.navigateToCompositeGroup(e,i,((e,n)=>{const o=[];return o.push(this.setMainAreaFullScreen(!1,i)),c.default.getS4LMessagingFeatures().enableDesktopComposerWithPopUpMenu?this.closeGenericDesktopModal(n,G.rootViewIdForComponentContext(t)):o.push(this.clearRightSidebarContext(e,n,i)),o}))}}toggleGallery(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.toggleGallery, causeId: "+i);const n=G.rootViewIdForComponentContext(t),o=H.default.isGalleryShowing(n);V.default.isUsingStackNavigationContext()||!o?this.navigateToGallery(e,F.GalleryViewMode.All,t):this.closeGalleryPanel(i,t)}navigateToGallery(e,t,i,n,s,a){const r=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToGallery, causeId: "+r),this.navigateAssertingUIStarted((()=>{const l=new F.GalleryNavigationContext({conversationId:e,viewMode:t,callId:n,parentConversationId:s,onClose:a,navigationDirection:ne.StackNavigationDirection.Present}),c=G.rootViewIdForComponentContext(i);if(V.default.isUsingStackNavigationContext())l.state.viewMode===F.GalleryViewMode.All&&(l.state.viewMode=F.GalleryViewMode.Media),H.default.navigateToView(l,r,G.rootViewIdForComponentContext(i));else if(H.default.shouldDisplayRightNavigationNoSubscription(c)){const t=G.rootViewIdForComponentContext(i),n=!!i&&i.isPresentedInDesktopRightNav,s=()=>{this.navigateToCompositeGroup(r,t,((e,i)=>{const o=[];return o.push(this.clearModalContext(e,i,t)),o.push(this.navigateToRightSidebarContext(l,n?ne.StackNavigationType.Push:ne.StackNavigationType.PopToRoot,e,i,t)),o}))},a=G.mainContentNavigatorIdForComponentContext(i),c=H.default.getCurrentStackNavigationContext(a,!1).getNavStack(),d=o.last(c);if(d instanceof F.DesktopContentPanelNavigationContext){const t=d.getConversationContext();t&&t.state.conversationId!==e&&this.navigateToConversation({convId:e,origin:A.NavigationConversationOrigin.Gallery,causeId:r})}s()}}))}setDesktopGalleryViewMode(e,t,i,n=!0){V.default.isUsingStackNavigationContext()||this.navigateToGallery(e,t,i)}closeGalleryPanel(e,t){if(N.log(A.LogTraceArea.Navigation,"NavigationActions: closeGalleryPanel,  causeId: "+e),G.isUsingReactNavigationFlow())this.goBack(e,t);else if(V.default.isUsingStackNavigationContext())H.default.isOnTopOfNavigationStack(F.GalleryNavigationId)&&this.navigateBack(e,t);else if(!this._maybePopToConversationInCall(e,t)){const i=G.rootViewIdForComponentContext(t);this.navigateToCompositeGroup(e,i,((e,t)=>[this.clearRightSidebarContext(e,t,i)]))}}maybeNavigateToFindPanel(e,t,i,n,o){N.log(A.LogTraceArea.Navigation,"NavigationActions.maybeNavigateToFindPanel, causeId: "+n);const s=G.rootViewIdForComponentContext(i);H.default.isInAppBrowserShowingNoSubscription(s)||this.navigateToFindPanel(e,t,i,n,o)}navigateToFindPanel(e,t,i,n,o){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToFindPanel, causeId: "+n),this.navigateAssertingUIStarted((()=>{let s=new F.FindPanelNavigationContext({conversationId:e,overflowActionConfig:t,onFindComplete:o});const a=G.rootViewIdForComponentContext(i);if(V.default.isUsingStackNavigationContext()&&!V.default.isMobileSplitView())H.default.navigateToView(s,n,a);else if(H.default.shouldDisplayRightNavigationNoSubscription(a)){const e=!!i&&i.isPresentedInDesktopRightNav;this.navigateToCompositeGroup(n,a,((t,i)=>[this.navigateToRightSidebarContext(s,e?ne.StackNavigationType.Push:ne.StackNavigationType.PopToRoot,t,i,a)]))}}))}closeFindPanel(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions: closeFindPanel,  causeId: "+e),V.default.isUsingStackNavigationContext()&&!V.default.isMobileSplitView()?H.default.isOnTopOfNavigationStack(F.FindPanelNavigationId)&&this.navigateBack(e,t):this._maybePopToConversationInCall(e,t)||this.closeRightPanel(e,G.rootViewIdForComponentContext(t))}closeRightPanel(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions: closeRightPanel, causeId: "+e),V.default.isUsingStackNavigationContext()&&!V.default.isMobileSplitView()||this.navigateToCompositeGroup(e,t,((e,i)=>[this.clearRightSidebarContext(e,i,t)]))}maybeCloseRightPanel(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions: maybeCloseRightPanel, causeId: "+e),this._maybePopToConversationInCall(e,t)||this.closeRightPanel(e,G.rootViewIdForComponentContext(t))}navigateToDesktopCloseAccount(e){const t=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToDesktopCloseAccount, causeId: "+t),this.navigateAssertingUIStarted((()=>{if(!V.default.isUsingStackNavigationContext()){const i=new F.DesktopCloseAccountNavigationContext({});this.navigateToModalContext(i,!1,t,G.rootViewIdForComponentContext(e))}}))}navigateToDesktopMsaPhoneAccrual(e,t,i,n){const o=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToDesktopMsaPhoneAccrual,  causeId: "+o),this.navigateAssertingUIStarted((()=>{if(!V.default.isUsingStackNavigationContext()){const s=new F.DesktopMsaPhoneAccrualNavigationContext({phoneNumber:e,email:i,isEmailAccrual:n});this.navigateToModalContext(s,!1,o,t)}}))}openCallRoster(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.openCallRoster, causeId: "+n);const o=G.rootViewIdForComponentContext(i),s=new F.CallRosterNavigationContext({conversationId:e,callId:t,navigationDirection:ne.StackNavigationDirection.Present});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.CallRosterNavigationId))return;H.default.navigateToView(s,n,G.rootViewIdForComponentContext(i))}else H.default.getCompositeCallVisibleNoSubscription(o)&&this.navigateToModalContext(s,!1,n,G.rootViewIdForComponentContext(i))}openAddToCall(e,t,i,n,o){N.log(A.LogTraceArea.Navigation,"NavigationActions.openAddToCall  callId: "+t+" causeId: "+o+" origin: "+i);const s=G.rootViewIdForComponentContext(n);if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.QuickCallPanelId))return;const s=new F.QuickCallNavigationContext({conversationId:e,callId:t,newGroup:!0,navigationDirection:i===A.NavigationAddToCallOrigin.RosterView?ne.StackNavigationDirection.Push:ne.StackNavigationDirection.Present});H.default.navigateToView(s,o,G.rootViewIdForComponentContext(n))}else if(H.default.getCompositeCallVisibleNoSubscription(s)){const s=new F.AddToCallNavigationContext({conversationId:e,callId:t,origin:i,newGroup:!0});this.navigateToModalContext(s,!1,o,G.rootViewIdForComponentContext(n))}}openBingBackgroundsOverview(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.openCallRoster, causeId: "+i);const n=G.rootViewIdForComponentContext(t),o=new F.BingBackgroundNavigationContext({callId:e,navigationDirection:ne.StackNavigationDirection.Present});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.BingBackgroundNavigationId))return;H.default.navigateToView(o,i,G.rootViewIdForComponentContext(t))}else H.default.getCompositeCallVisibleNoSubscription(n)&&this.navigateToModalContext(o,!1,i,G.rootViewIdForComponentContext(t))}updateHubNavigationContext(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions: updateHubNavigationContext,  causeId: "+i),V.default.isUsingStackNavigationContext()?H.default.updateMobileHubContextForStackNavContext(e,t):this.navigateToCompositeGroup(i,S.MainRootViewId,((t,i)=>{const n=this.getLeftNavigationContext(S.MainRootViewId);if(n){n.getConversationsListContext().state.currentTab=e}return[U.CompositeNavigationType.LeftSidebar]}))}navigateToRecentsTab(){this._navigateToHubTab(F.HubTab.Recents),oe.default.willNavigateToRecents()}navigateToCallsTab(){this._navigateToHubTab(F.HubTab.Calls)}navigateToPeopleTab(){this._navigateToHubTab(F.HubTab.People)}_navigateToHubTab(e){this.navigateAfterUIStarted((()=>H.default.navigateToHubTab(e)))}navigateToSyncAddressBook(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSyncAddressBook, causeId: "+n);const o=new F.SyncAddressBookContext({origin:e.origin,hideSkipButton:e.hideSkipButton,hideCloseButton:e.hideCloseButton,isFirstLogin:e.isFirstLogin,closeButtonIcon:e.closeButtonIcon,nextButtonIcon:e.nextButtonIcon,scenarioNavigator:t});this.navigateAfterUIStarted((()=>{V.default.isUsingStackNavigationContext()?H.default.navigateToView(o,n,i):this.navigateToModalContext(o,!1,n,i)}))}navigateToPeopleYouMayKnowNotice(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToPeopleYouMayKnowNotice, causeId: "+n);const o=new F.PeopleYouMayKnowNoticeContext({origin:e.origin,hideSkipButton:e.hideSkipButton,hideCloseButton:e.hideCloseButton,isFirstLogin:e.isFirstLogin,closeButtonIcon:e.closeButtonIcon,nextButtonIcon:e.nextButtonIcon,scenarioNavigator:t});this.navigateAfterUIStarted((()=>{V.default.isUsingStackNavigationContext()?H.default.navigateToView(o,n,i):this.navigateToModalContext(o,!1,n,i)}))}navigateToTelemetryConsent(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToTelemetryConsent, causeId: "+n);const o=new F.TelemetryConsentContext({origin:e.origin,hideSkipButton:e.hideSkipButton,hideCloseButton:e.hideCloseButton,isFirstLogin:e.isFirstLogin,closeButtonIcon:e.closeButtonIcon,nextButtonIcon:e.nextButtonIcon,scenarioNavigator:t});this.navigateAfterUIStarted((()=>{V.default.isUsingStackNavigationContext()?H.default.navigateToView(o,n,i):this.navigateToModalContext(o,!1,n,i)}))}navigateToUserProfile(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToUserProfile, causeId: "+n);const o=new F.UserProfileContext({origin:e.origin,hideSkipButton:e.hideSkipButton,hideCloseButton:e.hideCloseButton,closeButtonIcon:e.closeButtonIcon,nextButtonIcon:e.nextButtonIcon,scenarioNavigator:t});this.navigateAfterUIStarted((()=>{V.default.isUsingStackNavigationContext()?H.default.navigateToView(o,n,i):this.navigateToModalContext(o,!1,n,i)}))}navigateToColorTheme(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToColorTheme, causeId: "+n);const o=new F.ThemeContext({origin:e.origin,hideSkipButton:e.hideSkipButton,hideCloseButton:e.hideCloseButton,isFirstLogin:e.isFirstLogin,closeButtonIcon:e.closeButtonIcon,nextButtonIcon:e.nextButtonIcon,scenarioNavigator:t});this.navigateAfterUIStarted((()=>{V.default.isUsingStackNavigationContext()?H.default.navigateToView(o,n,i):this.navigateToModalContext(o,!1,n,i)}))}navigateToPromptPermission(e,t,i,n=!1){const o=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToPromptPermission, causeId: "+o);const s=!!(t&&t.context&&t.context.isFirstLogin),a=new F.PromptPermissionContext({origin:e,hideCloseButton:n,isFirstLogin:s,showUIPrompts:!0,scenarioNavigator:t});this.navigateAfterUIStarted((()=>{V.default.isUsingStackNavigationContext()?H.default.navigateToView(a,o,i):(G.setEligibleLeftNavViewModes(d.default.eligibleLeftNavViewModes(),this.getLeftNavigationContext(S.MainRootViewId)),this.navigateToModalContext(a,!1,o,i))}))}navigateToLocationPicker(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToLocationPicker, causeId: "+i),this.navigateAssertingUIStarted((()=>{const n={conversationId:e,navigationDirection:ne.StackNavigationDirection.Present},o=new F.LocationPickerContext(n),s=G.rootViewIdForComponentContext(t);if(V.default.isUsingStackNavigationContext()&&!V.default.isMobileSplitView()){if(H.default.isOnTopOfNavigationStack(F.LocationPickerNavigationId))return;H.default.navigateToView(o,i,s)}else if(!se.default.useTabletUINoSubscription()&&H.default.shouldDisplayRightNavigationNoSubscription(s)){const e=!!t&&t.isPresentedInDesktopRightNav;c.default.getS4LMessagingFeatures().enableDesktopComposerWithPopUpMenu?this.navigateToModalContext(o,!e,i,s):this.navigateToCompositeGroup(i,s,((t,i)=>[this.navigateToRightSidebarContext(o,e?ne.StackNavigationType.Push:ne.StackNavigationType.PopToRoot,t,i,s)]))}else this.launchModalEvent.fire({context:o,rootViewId:G.rootViewIdForComponentContext(t),causeId:i})}))}navigateToLocationViewer(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToLocationViewer, causeId: "+i),this.navigateAssertingUIStarted((()=>{const n=Object.assign(Object.assign({},e),{navigationDirection:ne.StackNavigationDirection.Present}),o=new F.LocationViewerContext(n);if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.LocationViewerNavigationId))return;H.default.navigateToView(o,i,G.rootViewIdForComponentContext(t))}else this.launchModalEvent.fire({context:o,rootViewId:G.rootViewIdForComponentContext(t),causeId:i})}))}navigateToDocumentViewer(e,t,i,n){const o=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToDocumentViewer, causeId: "+o),this.navigateAssertingUIStarted((()=>{const s={message:e,fileUri:t,fileName:i,navigationDirection:ne.StackNavigationDirection.Present},a=new F.DocumentViewerContext(s);V.default.isUsingStackNavigationContext()?H.default.navigateToView(a,o,G.rootViewIdForComponentContext(n)):this.launchModalEvent.fire({context:a,rootViewId:G.rootViewIdForComponentContext(n),causeId:o})}))}navigateToDesktopCaptureComboModal(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToDesktopCaptureComboModal, causeId: "+n),c.default.isDesktopVIMEnabled()&&!V.default.isUsingStackNavigationContext()?this.navigateAssertingUIStarted((()=>{this.launchModalEvent.fire({context:new F.DesktopCaptureComboViewNavigationContext({conversationId:e,onShareComplete:t}),rootViewId:G.rootViewIdForComponentContext(i),causeId:n})})):N.log(A.LogTraceArea.Navigation,"Video message is intended for desktop only")}navigateToQuickCallPanel(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToQuickCallPanel, causeId: "+e),this.navigateToQuickCallPanelWithParams({causeId:e},t)}navigateToQuickCallPanelWithParams(e,t){this._commonNavigateToModal(F.QuickCallNavigationContext,t,"navigateToQuickCallWithParams",e)}navigateToQuickCallSearchPanelWithParams(e,t){const i=e.causeId;N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToQuickCallSearchPanelWithParams, causeId: "+i),e.searchOnly=!0,e.causeId=i,this.navigateAssertingUIStarted((()=>{V.default.isUsingStackNavigationContext()?this.navigateToQuickCallPanelWithParams(e,t):this.navigateToCompositeGroup(i,S.MainRootViewId,((t,i)=>{const n=this.getLeftNavigationContext(S.MainRootViewId);if(n){const t=n.getCallSearchContext();G.setLeftNavViewMode(n,F.LeftNavViewMode.CallSearch,i),t.state=e}return[U.CompositeNavigationType.LeftSidebar]}))}))}navigateToPSTNDialerWithParams(e,t,i=!1){if(!i&&P.default.shouldRequestAcknowledgementNoSubscription())return void this.navigateToE911AcknowledgementPanel(e.causeId,t,(()=>{this.navigateToPSTNDialerWithParams(e,t,!0)}));const n=e.causeId;N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToPSTNDialerWithParams, causeId: "+n),N.track(new J.NavigateToDialpad(e.navigationSource,!!e.prefilledNumber));const o=new F.PSTNDialerNavigationContext({callId:e.callId,prefilledNumber:e.prefilledNumber,conversationId:e.conversationId,navigationSource:e.navigationSource}),s=[F.PSTNDialerPanelId];i&&s.push(F.E911AcknowledgementPanelId),oe.default.willNavigateToDialpad(),V.default.isUsingStackNavigationContext()?(this.setStackNavigationCompleteCallback((()=>{this.reduceNavStack(s,!0)})),o.state.navigationDirection=i?ne.StackNavigationDirection.Push:ne.StackNavigationDirection.Present,H.default.navigateToView(o,n,t)):(this.reduceModalNavStack(s,t,!1),this.navigateToModalContext(o,!1,n,t))}navigateToE911AcknowledgementPanel(e,t,i,n=!1){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToE911AcknowledgementPanel, causeId: "+e);const o=new F.E911AcknowledgementPanelNavigationContext({shouldSkipLocationConsent:n,onComplete:i});V.default.isUsingStackNavigationContext()?(o.state.navigationDirection=ne.StackNavigationDirection.Present,H.default.navigateToView(o,e,t)):this.navigateToModalContext(o,!1,e,t)}navigateToCountrySelector(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCountrySelector, causeId: "+i);const n=new F.PSTNCountrySelectorNavigationContext({onCountrySelected:t});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.PSTNCountrySelectorPanelId))return;H.default.navigateToView(n,i,e)}else this.navigateToModalContext(n,!1,i,e)}navigateToCountrySelectorWithFilter(e,t,i,n,o){const s=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCountrySelector, causeId: "+s);const a=new F.PSTNCountrySelectorNavigationContext({onCountrySelected:t,countriesFiltered:i,hideRecentCountries:n,searchAutoFocus:o});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.PSTNCountrySelectorPanelId))return;H.default.navigateToView(a,s,e)}else this.navigateToModalContext(a,!1,s,e)}navigateToCountryAreaSelector(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCountryAreaSelector, causeId: "+i);const n=new F.SkypeNumberCountryAreaSelectorNavigationContext({onCountryAreaSelected:t});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.SkypeNumberCountryAreaSelectorPanelId))return;H.default.navigateToView(n,i,e)}else this.navigateToModalContext(n,!1,i,e)}navigateToPrefixSelector(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToPrefixSelector, causeId: "+i);const n=new F.SkypeNumberPrefixSelectorNavigationContext({onPrefixSelected:t});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.SkypeNumberPrefixSelectorPanelId))return;H.default.navigateToView(n,i,e)}else this.navigateToModalContext(n,!1,i,e)}closeGenericDesktopModal(e,t){const i=G.modalNavigatorIdForRootViewId(t);N.log(A.LogTraceArea.Navigation,"NavigationActions: closeGenericDesktopModal navigatorId: "+n.pii.Omit(i)+" causeId: "+e),this._closeGenericDesktopModal(e,i)}navigateToContactsPanel(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToContactsPanel, causeId: "+n),this.navigateAssertingUIStarted((()=>{const o=new F.ContactsPanelV2NavigationContext({currentTab:e});V.default.isUsingStackNavigationContext()?(o.state.navigationDirection=ne.StackNavigationDirection.Present,H.default.navigateToView(o,n,G.rootViewIdForComponentContext(i)),t&&this.setStackNavigationCompleteCallback((()=>{this.flattenNavStack()}))):this.navigateToModalContext(o,!1,n,G.rootViewIdForComponentContext(i))}))}navigateToAddContactPanel(e,t,i){this._commonNavigateToModal(F.AddContactPanelNavigationContext,i,"navigateToAddContactPanel",{origin:e},((e,i)=>{i&&(e.state.navigationDirection=t)}))}navigateToAddPhoneNumberPanel(e,t,i,n,o,s,a,r){l.default.clearSavedContactDetails(),this._commonNavigateToModal(F.AddPhoneNumberPanelNavigationContext,t,"navigateToAddPhoneNumberPanel",{origin:e,contactMriToEdit:i,phoneNumbers:n,contactName:o,onSave:s,onCancel:a,onClose:r})}navigateToLoadingPanel(e,t,i){this._commonNavigateToModal(F.LoadingPanelNavigationContext,i,"navigateToLoadingPanel",{message:e})}navigateToInviteShare(e,t,i,n){const o=c.default.getS4LMessagingFeaturesNoSubscription().enableRevokeUserProfileShareLink?v.DefaultHeightForInviteShare:void 0;this._commonNavigateToModal(F.InviteShareNavigationContext,n,"navigateToInviteShare",{skypeMri:e,displayName:t||"",origin:i,customizedHeight:o})}navigateToGroupShare(e,t,i,n){this._commonNavigateToModal(F.ConversationShareNavigationContext,n,"navigateToGroupShare",{skypeMri:e,displayName:t||"",origin:i})}navigateToGuestUpsell(e){const t=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToGuestUpsell, causeId: "+t),this.navigateAssertingUIStarted((()=>{const i=new F.GuestUpsellNavigationContext({upsellType:e});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.GuestUpsellNavigationId))return;H.default.navigateToView(i,t,S.MainRootViewId)}else this.navigateToModalContext(i,!1,t,S.MainRootViewId)}))}navigateToJoiningGuestScreen(){const e=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToGuestFlow, causeId: "+e),G.setEligibleLeftNavViewModes(d.default.eligibleLeftNavViewModes(),this.getLeftNavigationContext(S.MainRootViewId)),this.navigateAfterUIStarted((()=>{const t=new F.JoiningGuestScreenContext({});V.default.isUsingStackNavigationContext()?H.default.navigateToView(t,e,S.MainRootViewId):this.navigateToMainStageContext(t,!0,!1,e,S.MainRootViewId)}))}navigateToCallQualityFeedbackPanel(e){const t=ce.default.newCauseId();if(N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallQualityFeedbackPanel, causeId: "+t),te.default.isUIDisplayed()){const i=V.default.isUsingSplitViewNoSubscription()?f.default.rootViewIdForConversationMri(e.callInfo.conversationMri):S.MainRootViewId;this.launchModalEvent.fire({context:new F.CQFNavigationContext(Object.assign({},e)),rootViewId:i,causeId:t})}else N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallQualityFeedbackPanel, ui not displayed, causeId: "+t)}navigateToCallPreviewView(e){const t=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallPreviewView causeId: "+t),L.default.trackLobbyNavigationStarted(e.conversationMri);const i=i=>{this.launchModalEvent.fire({context:new F.CallPreviewNavigationContext(e),rootViewId:i,causeId:t})};te.default.performAfterUIStarted((()=>{const t=V.default.isUsingSplitViewNoSubscription()?f.default.rootViewIdForConversationMri(e.conversationMri):S.MainRootViewId;i(t)}))}navigateToCallPreviewViewModal(e,t){this.navigateAssertingUIStarted((()=>{const i=new F.CallPreviewNavigationContext(e),n=V.default.isUsingSplitViewNoSubscription()?f.default.rootViewIdForConversationMri(e.conversationMri):S.MainRootViewId;if(V.default.isUsingStackNavigationContextNoSubscription()){if(H.default.isOnTopOfNavigationStack(F.CallPreviewNavigationId))return;H.default.navigateToView(i,t,n)}else{const{redesignedLobbiesEnabled:e}=c.default.getS4LCMCFeaturesNoSubscription(),o=800,a=e?620:514;i.state.customizedWidth=o,i.state.customizedHeight=a,s.default.getLastActiveSplitView().then((e=>{const o=(null==e?void 0:e.id)===n?e.id:S.MainRootViewId;this.navigateToModalContext(i,!1,t,o)}),(e=>{N.log(A.LogTraceArea.Navigation,"getLastActiveSplitView() failed. error: "+e),this.navigateToModalContext(i,!1,t,S.MainRootViewId)}))}}))}navigateToRinglessCallInterstitial(e){const t=e.causeId;N.log(A.LogTraceArea.Navigation,"NavigationActions.NavigateToRinglessCallInterstitialParams causeId: "+t),this.navigateAssertingUIStarted((()=>{const i=i=>{this.launchModalEvent.fire({context:new F.RinglessCallInterstitialNavigationContext(Object.assign({},e)),rootViewId:i,causeId:t})};V.default.isUsingSplitViewNoSubscription()?s.default.getLastActiveSplitView().then((e=>{const t=e&&e.isActive?e.id:S.MainRootViewId;i(t)}),(e=>{N.log(A.LogTraceArea.Navigation,"getLastActiveSplitView() failed. error: "+e),i(S.MainRootViewId)})):i(S.MainRootViewId)}))}navigateToCallerIdPromptPanel(){const e=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallerIdPromptPanel, causeId: "+e),this.navigateAssertingUIStarted((()=>{const t=new F.CallerIdPromptContext({customizedHeight:v.CompactHeight,dialogId:"callerIdDialog"});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.CallerIdPromptNavigationId))return;H.default.navigateToView(t,e,G.rootViewIdForComponentContext(void 0))}else this.navigateToModalContext(t,!1,e,G.rootViewIdForComponentContext(void 0))}))}navigateToCallFailurePromptPanel(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallFailurePromptPanel, causeId: "+n),this.navigateAssertingUIStarted((()=>{const o=new F.CallFailurePromptContext({dialogId:"pstnDialog",phoneNumber:t,reason:i,customizedWidth:v.CompactWidth}),s=V.default.isUsingSplitViewNoSubscription()?f.default.rootViewIdForConversationMri(e):S.MainRootViewId;if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.CallFailurePromptId))return;H.default.navigateToView(o,n,s)}else this.navigateToModalContext(o,!1,n,s)}))}navigateToSmsFailurePrompt(e,t,i){const n=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSmsFailurePrompt, causeId: "+n),this.navigateAssertingUIStarted((()=>{const o=new F.SmsFailurePromptContext({dialogId:"smsDialog",phoneNumber:t,isSmsInfo:i,customizedHeight:v.DefaultHeight,customizedWidth:v.CompactWidth}),s=V.default.isUsingSplitViewNoSubscription()?f.default.rootViewIdForConversationMri(e):S.MainRootViewId;if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.SmsFailurePromptId))return;H.default.navigateToView(o,n,s)}else this.navigateToModalContext(o,!1,n,s)}))}navigateToCallFailurePostPurchasePromptPanel(e){const t=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallFailurePostPurchasePromptPanel, causeId: "+t),this.navigateAssertingUIStarted((()=>{const i=new F.CallFailurePostPurchasePromptContext({dialogId:"successfulPurchaseDialog",phoneNumber:e,customizedHeight:v.CompactHeight,customizedWidth:v.CompactWidth});if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.CallFailurePostPurchasePromptNavigationId))return;H.default.navigateToView(i,t,S.MainRootViewId)}else this.navigateToModalContext(i,!1,t,S.MainRootViewId)}))}navigateToTasterPostCallPanel(e){const t=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToTasterPostCallPanel, causeId: "+t),this.navigateAssertingUIStarted((()=>{const i=new F.TasterPostCallPanelContext({dialogId:"taster",customizedHeight:v.CompactHeight,customizedWidth:v.CompactWidth}),n=V.default.isUsingSplitViewNoSubscription()?f.default.rootViewIdForConversationMri(e):S.MainRootViewId;if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(F.TasterPostCallPanelId))return;H.default.navigateToView(i,t,n)}else this.navigateToModalContext(i,!1,t,n)}))}closeCallFailurePrompts(e,t){if(N.log(A.LogTraceArea.Navigation,"NavigationActions.closeCallFailurePrompts, causeId: "+e),V.default.isUsingStackNavigationContext())(H.default.isOnTopOfNavigationStack(F.CallFailurePromptId)||H.default.isOnTopOfNavigationStack(F.SmsFailurePromptId)||H.default.isOnTopOfNavigationStack(F.TasterPostCallPanelId))&&this.reduceNavStack([F.CallFailurePromptId,F.SmsFailurePromptId,F.TasterPostCallPanelId],!1);else{const e=G.rootViewIdForComponentContext(t);this.reduceModalNavStack([F.CallFailurePromptId,F.SmsFailurePromptId,F.TasterPostCallPanelId],e,!1)}}navigateToAndroidCallMonitorPermissionPanel(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToAndroidCallMonitorPermissionPanel, causeId: "+i),te.default.isUIDisplayed()?this.launchModalEvent.fire({context:new F.AndroidCallMonitorPermissionNavigationContext(Object.assign({},e)),rootViewId:t||S.MainRootViewId,causeId:i}):N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToAndroidCallMonitorPermissionPanel, ui not displayed, causeId: "+i)}clearRightSidebarContext(e,t,i){N.log(A.LogTraceArea.Navigation,"NavigationActions.clearRightSidebarContext rootViewId: "+Z.mriOrId(i)+" partOfLargerChange: "+e+" causeId: "+t);const n=G.rightSideBarNavigatorIdForRootViewId(i);return this._clearRightSidebarContext(e,t,n)}clearReportProblemSplitViewDialog(e){if(V.default.isUsingSplitViewNoSubscription())return this.clearMainModalContext(!1,e)}clearMainModalContext(e,t){return this.clearModalContext(e,t,S.MainRootViewId)}clearModalContext(e,t,i){N.log(A.LogTraceArea.Navigation,"NavigationActions.clearModalContext rootViewId: "+Z.mriOrId(i)+" partOfLargerChange: "+e+" causeId: "+t);const n=G.modalNavigatorIdForRootViewId(i);return H.default.clearModalNavStack(n,e,!0,t),U.CompositeNavigationType.Modal}navigateAfterBlock(e,t,i){N.log(A.LogTraceArea.Navigation,"NavigationActions._navigateAfterBlock, causeId: "+t),this.closeDetailsPanelForUser(e,t,i),H.default.getActiveConversationId(G.rootViewIdForComponentContext(i))===e&&(V.default.isUsingStackNavigationContext()?this.navigateToHub(t):this.navigateToWelcomeScreen(t))}clearMainStageContext(e,t,i){const o=G.mainContentNavigatorIdForRootViewId(i);return N.log(A.LogTraceArea.Navigation,"NavigationActions.clearMainStageContext navigatorId: "+n.pii.Omit(o)+" causeId: "+t),H.default.clearNavStack(o,!e,!1,t),U.CompositeNavigationType.MainContent}clearSelectedConversationId(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions.clearSelectedConversationId, causeId: "+e);const i=this.getLeftNavigationContext(S.MainRootViewId);return i&&(t&&G.setLeftNavViewMode(i,F.LeftNavViewMode.Recents,e),i.getConversationsListContext().state.selectedConversationId=void 0),U.CompositeNavigationType.LeftSidebar}mainStageContextPopToRoot(e,t,i){const o=G.mainContentNavigatorIdForComponentContext(i);return N.log(A.LogTraceArea.Navigation,"NavigationActions.mainStageContextPopToRoot navigatorId: "+n.pii.Omit(o)+" causeId: "+t),this.clearSelectedConversationId(t,!0),H.default.clearNavStack(o,!e,!1,t),U.CompositeNavigationType.MainContent}navigateToWelcomeScreen(e){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToWelcomeScreen, causeId: "+e),V.default.isUsingStackNavigationContext()||this.navigateToCompositeGroup(e,S.MainRootViewId,((t,i)=>{const n=[];if(n.push(this.setMainAreaFullScreen(!1,S.MainRootViewId)),n.push(this.clearModalContext(t,e,S.MainRootViewId)),H.default.isSplitNavStackCollapsed(ne.StackNavigatorId.DesktopContent))n.push(this.mainStageContextPopToRoot(t,i,void 0));else{n.push(this.clearSelectedConversationId(i,!0));const e=new F.WelcomeScreenContext({});n.push(this.navigateToMainStageContext(e,!0,t,i,S.MainRootViewId))}return o.compact(n)}))}navigateToMeetNowJoinLinkPanel(e){const t=ce.default.newCauseId(),i=S.MainRootViewId,n=new R.MeetNowJoinLinkPanelNavigationContext(e);this.launchModalEvent.fire({context:n,rootViewId:i,modalId:e.modalId,causeId:t,onDismiss:e.onDismiss})}navigateToScreenSharePanel(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToScreenSharePanel, causeId: "+i);const n=V.default.isUsingSplitViewNoSubscription()?f.default.rootViewIdForConversationMri(e.conversationMri):S.MainRootViewId;N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToScreenSharePanel, causeId: "+i+`rootViewId ${n} isUsingStackNavigationContext ${V.default.isUsingStackNavigationContext()}`),this.navigateAssertingUIStarted((()=>{const o=new F.ScreenShareModalContext(e);V.default.isUsingStackNavigationContext()||this.launchModalEvent.fire({context:o,rootViewId:n,modalId:t,causeId:i})}))}navigateToTogetherModePanel(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToTogetherModePanel, causeId: "+i);const n=V.default.isUsingSplitViewNoSubscription()?f.default.rootViewIdForConversationMri(e.conversationMri):S.MainRootViewId,o=V.default.isUsingStackNavigationContext();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToTogetherModePanel, causeId: "+i+`rootViewId ${n} isUsingStackNavigationContext ${o}`),this.navigateAssertingUIStarted((()=>{const s=new F.TogetherModeModalContext(e);o?H.default.navigateToView(s,i,n):this.launchModalEvent.fire({context:s,rootViewId:n,modalId:t,causeId:i})}))}navigateToTwinCamPanel(e){const t=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToTwinCamPanel, causeId: "+t);const i=V.default.isUsingSplitViewNoSubscription()?f.default.rootViewIdForConversationMri(e.conversationMri):S.MainRootViewId;this._commonNavigateToModal(F.TwinCamModalContext,i,"navigateToTwinCam",e)}getLeftNavigationContext(e){const t=G.mainContentNavigatorIdForRootViewId(e),i=H.default.getCurrentStackNavigationContext(t,!1);if(i instanceof F.RootCompositeSplitViewContext)return i.getLeftNavigationContext()}setMainAreaFullScreen(e,t){const i=G.mainContentNavigatorIdForRootViewId(t),n=H.default.getCurrentStackNavigationContext(i,!1);return n instanceof F.RootCompositeSplitViewContext&&n.setMainAreaFullScreen(e),U.CompositeNavigationType.MainContent}navigateToMainStageContext(e,t,i,n,o){const a=G.mainContentNavigatorIdForRootViewId(o);N.log(A.LogTraceArea.Navigation,"NavigationActions: _navigateToMainStageContext, causeId: "+n);const r=G.maybeUpdateDesktopNavContext(e,n);return H.default.stackNavigateToView(r,void 0,a,t?ne.StackNavigationType.PopToRoot:ne.StackNavigationType.Push,!i,n),(r instanceof F.DesktopContentPanelNavigationContext||r instanceof F.CallNavigationContext||r instanceof R.MeetNowNavigationContext)&&(V.default.isUsingSplitViewNoSubscription()&&o!==S.MainRootViewId?this._openSplitView(o,n):s.MainWindow.requestFocus()),U.CompositeNavigationType.MainContent}navigateToSXPlayground(){const e=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSXPlayground causeId: "+e)}navigateToRightSidebarContext(e,t,i,n,o,s){if(s)return this.navigateToModalContext(e,i,n,o),U.CompositeNavigationType.Modal;{const s=G.rightSideBarNavigatorIdForRootViewId(o);return N.log(A.LogTraceArea.Navigation,"NavigationActions: _navigateToRightSidebarContext, causeId: "+n),H.default.desktopSidebarNavigateToView(e,void 0,s,t,!i,n),U.CompositeNavigationType.RightSidebar}}fetchMemberConsumptionHorizon(e){if(!c.default.getS4LMessagingFeatures().enableReadReceipts)return;if(m.isEncryptedThread(e)||m.isConversationWithPhoneNumber(e)||m.isBookmarkConversation(e))return;const t=(0,_.default)().getConversation(e);if(!t)return;if(t.isFake)return;const i=t.getThreadMembers().length;m.isThread(e)&&(0===i||i>20)||g.default.fetchMemberConsumptionHorizon(e)}navigateToDefaultConversation(){this.navigateAfterUIStarted((()=>{const e=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToDefaultConversation, causeId: "+e),this.navigateToConversation({causeId:e,origin:A.NavigationConversationOrigin.NavToDefaultConv})}))}navigateAfterArchivingConversation(e,t,i){if(N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateAfterArchivingConversation, causeId: "+t),V.default.isUsingStackNavigationContext())return void this.navigateToRecentsTab();this.closeDetailsPanel(t,i);const n=H.default.getActiveConversationId(G.rootViewIdForComponentContext(i)),s=o.find(C.default.getAllSiblingConversations(e),(e=>e.id===n));(e===n||s)&&this.navigateToWelcomeScreen(t)}navigateAfterUnarchivingConversation(e,t,i){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateAfterUnarchivingConversation, causeId: "+t),V.default.isUsingStackNavigationContext();H.default.getActiveConversationId(G.rootViewIdForComponentContext(i))===e&&(y.default.setConversationsListMode(y.ConversationsListMode.AllConversations),this.clearModalContext(!0,t,S.MainRootViewId))}navigateToCompositeContext(e,t=[U.CompositeNavigationType.Default],i,n){this.navigateAfterUIStarted((()=>{if(this._forceRefreshOnNextNavigate)return this._forceRefreshOnNextNavigate=!1,void $.reloadApp(e);H.default.compositeCommitNavigationUpdates(e,t,i,n)}))}navigateToHelpAndFeedbackLink(e,t,i,n,o={}){if(I.isSsoEnabled())this.navigateToSsoWebFlow(e,"",i,n,[],!0,o);else{const i=I.getHelpAndFeedbackUrl(e,t,o);ie.SsoWebFlowExternalBrowser.openExternalBrowser(i,n).then((()=>{N.track(new W.NavigationHelpAndFeedbackLink(i,!1))})).catch((()=>{N.track(new W.NavigationHelpAndFeedbackLink(i,!0))}))}}navigateToTranslationSettingsPanel(e,t){const i=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToTranslationSettingsPanel, causeId: "+i);const n=new F.TranslationSettingsPanelNavigationContext({});this.navigateAssertingUIStarted((()=>{V.default.isUsingStackNavigationContext()?H.default.navigateToView(n,i,G.rootViewIdForComponentContext(t)):this.navigateToModalContext(n,e,i,G.rootViewIdForComponentContext(t))}))}openSubtitles(e,t,i,n,o){N.log(A.LogTraceArea.Navigation,"NavigationActions.openSubtitles, causeId: "+o);const s=G.rootViewIdForComponentContext(i),a=new F.SubtitlesNavigationContext({conversationMri:e,callId:t,onClose:n});V.default.isUsingStackNavigationContext()?H.default.navigateToView(a,o,s):this.navigateToCompositeGroup(o,s,((e,t)=>{const i=[];return i.push(this.clearModalContext(!0,t,s)),i.push(this.navigateToRightSidebarContext(a,ne.StackNavigationType.PopToRoot,e,t,s)),i}))}closeSubtitlesPanel(e,t){if(N.log(A.LogTraceArea.Navigation,"NavigationActions: closeSubtitlesPanel,  causeId: "+e),V.default.isUsingStackNavigationContext())(H.default.isOnTopOfNavigationStack(F.SubtitlesNavigationId)||G.isUsingReactNavigationFlow())&&this.goBack(e,t);else if(!this._maybePopToConversationInCall(e,t)){const i=G.rootViewIdForComponentContext(t);this.navigateToCompositeGroup(e,i,((e,t)=>[this.clearRightSidebarContext(e,t,i)]))}}navigateToCallingDebugPanel(e,t,i=!1){const n=ce.default.newCauseId();if(N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallingDebugPanel, causeId: "+n),V.default.isUsingStackNavigationContext()){const i=new F.CallingDebugPanelNavigationContext({callId:e,nativeWindow:!1});H.default.navigateToView(i,n,G.rootViewIdForComponentContext(t))}else this.navigateAssertingUIStarted((()=>{V.default.isUsingStackNavigationContext();new F.CallingDebugPanelNavigationContext({callId:e,nativeWindow:!0});if(H.default.shouldDisplayRightNavigationNoSubscription(t.rootViewId)){const i=new F.CallingDebugPanelNavigationContext({callId:e,nativeWindow:!1}),o=!!t&&t.isPresentedInDesktopRightNav;this.navigateToCompositeGroup(n,t.rootViewId,((e,n)=>[this.navigateToRightSidebarContext(i,o?ne.StackNavigationType.Push:ne.StackNavigationType.PopToRoot,e,n,t.rootViewId)]))}}))}navigateToBookmarkSource(e){const t=h.getBookmarkMetadata(e),i=t&&t.bookmarkSourceConversationId,n=t&&t.bookmarkSourceComposeTime;if(i&&n){const e=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions: navigateToBookmarkSource causeId: "+e),this.navigateToConversation({convId:i,scrollToTimestamp:o.toNumber(n),forceRefreshFocus:!0,origin:A.NavigationConversationOrigin.BookmarkMessage,causeId:e})}}closeCallDebugPanel(e,t,i){if(i||this._maybePopToConversationInCall(e,t)){const e=G.modalNavigatorIdForRootViewId(S.CallDebugRootViewId);s.default.closeNativeWindow(e)}else{const i=G.rootViewIdForComponentContext(t);V.default.isUsingStackNavigationContext()?(H.default.isOnTopOfNavigationStack(F.CallingDebugPanelNavigationId)||G.isUsingReactNavigationFlow())&&this.goBack(e,t):this.navigateToCompositeGroup(e,i,((e,t)=>[this.clearRightSidebarContext(e,t,i)]))}}showSpeechConsentPanel(e){const t=e.causeId;N.log(A.LogTraceArea.Navigation,"NavigationActions.showSpeechConsentPanel, causeId: "+t),this._commonNavigateToModal(F.SpeechConsentNavigationContext,e.rootViewId,"navigateToSpeechConsentPanel",{})}openSplitView(e){this._openSplitView(e,ce.default.newCauseId())}navigateToSendCreditPanel(e){const t=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToSendCreditPanel, causeId: "+t),this.navigateAssertingUIStarted((()=>{const i=new F.SendCreditPanelNavigationContext({});V.default.isUsingStackNavigationContext()?(i.state.navigationDirection=ne.StackNavigationDirection.Present,H.default.navigateToView(i,t,e)):this.navigateToModalContext(i,!1,t,e)}))}_maybePopToConversationInCall(e,t){const i=G.rightSideBarNavigatorIdForComponentContext(t),n=H.default.getCurrentStackNavigationContext(i,!1).getNavStack(),o=n?n[0]:void 0;if(o&&o instanceof F.ConversationInCallNavigationContext){N.log(A.LogTraceArea.Navigation,"NavigationActions: _maybePopToConversationInCall popToRoot: true causeId: "+e);const i=G.rootViewIdForComponentContext(t);return this.navigateToCompositeGroup(e,i,((e,t)=>[this.navigateToRightSidebarContext(o,ne.StackNavigationType.PopToRoot,e,t,i)])),!0}return N.log(A.LogTraceArea.Navigation,"NavigationActions: _maybePopToConversationInCall popToRoot: false causeId: "+e),!1}_openConversationInCallNext(e,t,i,n,o){if(N.log(A.LogTraceArea.Navigation,"NavigationActions.openConversationInCallNext, causeId: "+e),!V.default.isUsingStackNavigationContext()){const s=G.rootViewIdForComponentContext(n);H.default.getCompositeCallVisibleNoSubscription(s)&&this.navigateToCompositeGroup(e,s,((e,n)=>{const a=new F.ConversationInCallNavigationContext({conversationId:t,callId:i,onClose:o}),r=[];return r.push(this.clearModalContext(!0,n,s)),r.push(this.navigateToRightSidebarContext(a,ne.StackNavigationType.PopToRoot,e,n,s)),this._startNavigateToConvScenario(t,A.NavigationConversationOrigin.Call),r}))}}_closeConversationInCallNext(e,t){if(N.log(A.LogTraceArea.Navigation,"NavigationActions.closeConversationInCallNext, causeId: "+e),V.default.isUsingStackNavigationContext())return;const i=G.rootViewIdForComponentContext(t);this.navigateToCompositeGroup(e,i,((e,t)=>{const n=[];return n.push(this.clearRightSidebarContext(e,t,i)),n}))}_clearRightSidebarContext(e,t,i){return N.log(A.LogTraceArea.Navigation,"NavigationActions._clearRightSidebarContext navigatorId: "+n.pii.Omit(i)+" partOfLargerChange: "+e+" causeId: "+t),H.default.clearDesktopSidebarNavStack(i,!e,!0,t),U.CompositeNavigationType.RightSidebar}_stackNavNavigateBack(e){return N.log(A.LogTraceArea.Navigation,"NavigationActions._stackNavNavigateBack, causeId: "+e),H.default.stackNavNavigateBack(!1,e)}_modalNavigateBack(e,t){const i=G.modalNavigatorIdForComponentContext(t);N.log(A.LogTraceArea.Navigation,"NavigationActions._modalNavigateBack navigatorId: "+n.pii.Omit(i)+" causeId: "+e);return H.default.stackNavNavigateBack(!1,e,i,U.CompositeNavigationType.Modal)||this._closeGenericDesktopModal(e,i),!0}_desktopContentNavigateBack(e,t){const i=G.mainContentNavigatorIdForComponentContext(t),n=H.default.getCurrentNavigationBackStack(i).length,o=H.default.stackNavNavigateBack(!1,e,i,U.CompositeNavigationType.MainContent);return N.log(A.LogTraceArea.Navigation,"NavigationActions._desktopContentNavigateBack backStackSizeBefore: "+n+" handled: "+o+" causeId: "+e),(!o||H.default.getCurrentNavigationBackStack(i).length<=1)&&this.navigateToCompositeGroup(e,G.rootViewIdForComponentContext(t),((e,t)=>[this.clearSelectedConversationId(t)])),n>1}_rightSidebarNavigateBack(e,t){const i=G.rightSideBarNavigatorIdForComponentContext(t);N.log(A.LogTraceArea.Navigation,"NavigationActions._rightSidebarNavigateBack navigatorId: "+n.pii.Omit(i)+" causeId: "+e);return H.default.stackNavNavigateBack(!1,e,i,U.CompositeNavigationType.RightSidebar)||H.default.clearNavStack(i,!0,!0,e),!0}_closeGenericDesktopModal(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions: _closeGenericDesktopModal navigatorId: "+n.pii.Omit(t)+" causeId: "+e),V.default.isUsingStackNavigationContext()&&!V.default.isMobileSplitView()||H.default.clearModalNavStack(t,!0,!0,e)}_getScenarioByConversationId(e){return this._scenarioLookupByConversationId[e]}_getScenarioIdForConversationId(e){return Z.mriOrId(e)+"Navigation"}_getScenarioIdForAnimation(e){return Z.mriOrId(e)+"Animation"}_startNavigateToConvScenario(e,t,i){const n={origin:A.NavigationConversationOrigin[t]};o.isUndefined(i)||(n.browserOrigin=A.BrowserOrigin[i]);const s=this._getScenarioIdForConversationId(e),a=new ae.default(K.ScenarioName.StreamFrom,s,n);this._scenarioLookupByConversationId[e]=a,a.start(),oe.default.willNavigateToChat()}_navigateToCallingSettingsEntryDesktop(e,t,i,n,o,s,a,r){N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallingSettingsEntryDesktop, causeId: "+a),this.navigateAssertingUIStarted((()=>{V.default.isUsingStackNavigationContext();const l=new F.CallingSettingsEntryNavigationContext({link:e,source:t,goTarget:n,title:i,enableWebViewBackNavigation:o,titleAccessibilityRegion:r});this.navigateToModalContext(l,!1,a,G.rootViewIdForComponentContext(s))}))}_navigateToCallingSettingsHeaderAuthWebFlow(e,t,i,n,o,s=[],a,r,l,c){const d=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions.navigateToCallingSettingsHeaderAuthWebFlow, causeId: "+d),this.navigateAssertingUIStarted((()=>{if(V.default.isUsingStackNavigationContext()){const u=new F.CallingSettingsHeaderAuthWebFlowNavigationContext({link:e,source:t,goTarget:o,title:i,titleAllowTextWrap:n,useDocumentTitle:r,pathsRequiringHeaders:s,disableSpinnerAfterGoLink:a,enableWebViewBackNavigation:l});H.default.navigateToView(u,d,G.rootViewIdForComponentContext(c))}else{const n=new F.CallingSettingsEntryNavigationContext({link:e,source:t,goTarget:o,title:i,enableWebViewBackNavigation:l});this.navigateToModalContext(n,!1,d,G.rootViewIdForComponentContext(c))}}))}_sendConversationNavigationTelemetry(e,t){let i;if(!e.isNewConversation){const e=(0,_.default)().getConversation(t);if(i=e?e.getTimestamp():0,i>0){const e=Date.now();i>e&&(i=e-1)}else i=e?e.getConsumptionHorizonTimestamp():0}const n=C.default.getAllSiblingConversations(t).length;N.track(new W.NavigationConversation(t,e.origin,e.browserOrigin,i,n))}_getConversationNavigationContext(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions: _getConversationNavigationContext, conversationId: "+Z.mriOrId(t)+" causeId: "+e.causeId);const i=(0,_.default)().getConversation(t),n=i&&i.isOneOnOne()?i.getOtherPartyMri():void 0;return new F.ConversationNavigationContext({conversationId:t,otherPartyMri:n,isNewConversation:e.isNewConversation,contextConversationId:e.contextConversationId,scrollToTimestamp:e.scrollToTimestamp,focusedMessageCuid:e.focusedMessageCuid,forceRefreshFocus:e.forceRefreshFocus?Date.now():void 0,shouldAutoFocusInput:e.shouldAutoFocusInput,shouldFlattenNavOnInteraction:e.shouldFlattenNavOnInteraction,inviteToken:e.inviteToken,selectedNumberForSMS:e.selectedNumberForSMS,origin:e.origin,isFromPeopleRecommendations:e.isFromPeopleRecommendations,directShareEventData:e.directShareEventData,causeId:e.causeId?e.causeId:ce.default.newCauseId()})}_getMobileContentPanelContext(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions: _getContentPanelContext, convId: "+Z.mriOrId(e.convId)+" causeId: "+e.causeId+" isFromBubble: "+e.isFromConversationBubble);const i=new F.MobileContentPanelNavigationContext({shouldResetNavStack:e.shouldResetNavStack,shouldReplaceCurrentContext:e.shouldReplaceCurrentContext,shouldHideAllExtraControls:e.isFromConversationBubble});return i.setConversationContext(t.state),i}_routeTypeForContext(e){return e instanceof F.MobileHubNavigationContext||e instanceof F.ConversationsListNavigationContext?z.RouteType.Hub:e instanceof F.MobileContentPanelNavigationContext?z.RouteType.Content:e instanceof F.SearchNavigationContext?z.RouteType.Search:e instanceof F.ContactsPanelV2NavigationContext?z.RouteType.ContactsPanel:e instanceof F.QuickCallNavigationContext&&e.state.searchOnly?z.RouteType.Search:z.RouteType.Other}_fetchLatestUserInfoNow(){const e=ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions._fetchLatestUserInfoNow, causeId: "+e),le.default.refreshNow(),B.default.refreshNow(e),q.default.refreshNow(),N.log(A.LogTraceArea.Navigation,"User info refresh requested")}_openSplitView(e,t){N.log(A.LogTraceArea.Navigation,"NavigationActions._openSplitView rootViewId: "+Z.mriOrId(e)+" causeId: "+t);const i={event:{eventId:e,convId:e},reactxp_rootViewId:e},n=ge.default.getWindowPreferences(e)||ge.default.getDefaultWindowPreferences();let o;m.isMri(e)&&(o=T.default.getDisplayName(m.asMri(e)),m.isBookmarkConversation(e)&&(o=x.getString("BookmarksConversation.BookmarksChatTitle"))),s.default.openSplitView(e,"RootContentView",i,n,o||"",((t,i)=>ge.default.storeWindowPreferences(e,t,i)))}_commonNavigateToModal(e,t,i,n,o,s){const a=s||ce.default.newCauseId();N.log(A.LogTraceArea.Navigation,"NavigationActions."+i+", causeId: "+a),te.default.performAfterUIStarted((()=>{const i=new e(n);if(V.default.isUsingStackNavigationContext()){if(H.default.isOnTopOfNavigationStack(i.stateId))return;o&&o(i,!0),H.default.navigateToView(i,a,t)}else o&&o(i,!1),this.navigateToModalContext(i,!1,a,t)}))}}},69413:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.showPrivateConversationSafeCode=t.endPrivateConversation=void 0;const n=i(96486),o=i(19784),s=i(71830),a=i(67121),r=i(46096),l=i(33754),c=i(24722);t.endPrivateConversation=function(e,t,i){const c=[{text:l.getString("Global.CancelLabel"),isCancel:!0},{text:l.getString("InfoPanel.EndConversationButton"),onPress:()=>{const c=s.asSkypeThreadId(e);a.default.sendReject(c,r.E2EERejectionReason.ConversationEnding).then(i||n.noop,(()=>o.default.showErrorAlert(l.getString("InfoPanel.EndConversationFailed"),t)))},isSubmit:!0}],d=l.getString("InfoPanel.EndConversationDialogTitle"),u=l.getString("InfoPanel.EndConversationDialogBody");o.default.showWithOptions({title:d,dialogAccessibilityTitle:u,message:u,buttons:c,rootViewId:t})},t.showPrivateConversationSafeCode=function(e,t){c.default.showForConversationId(e,t)}},20350:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(62783),o=i(97691),s=i(29518),a=i(89391),r=i(22801),l=i(46096),c=i(36237),d=i(54565),u=i(66765),g=i(22538),h=i(12770);class p{constructor(e,t,i){this._name=e,this._setActiveEndpoint=t,this._isConnected=i,this._exponentialTime=new n.ExponentialTime(1e3,3e5)}_report(){this._retryTimer&&(h.default.clearTimeout(this._retryTimer),this._retryTimer=void 0);const e=u.default.getEndpointId();if(e&&this._shouldSendRequest()){const t=s.default.isActive();if(t||s.default.getLastUpdatedInfo().active){let i;i=t?s.AETimeoutInSeconds:a.default.getConfigSettingsNoSubscription().endpointPresence.inactiveDelay/1e3,c.log(l.LogTraceArea.ActiveEndpointService,`[${this._name}] Endpoint is ${t?"":"not "}active, setting timeout to ${i}`),s.default.setLastUpdatedInfo({active:t,timestamp:Date.now()}),this._setActiveEndpoint(e,t,i).then((()=>{this._exponentialTime.reset()}),(e=>{this._retryTimer=h.default.setTimeout((()=>this._report()),this._exponentialTime.getTimeAndCalculateNext())}))}}}reportIfNeeded(e=!1){a.default.getConfigSettingsNoSubscription().endpointPresence.activeEndpointRequestEnabled&&(this._reportIsActive()?!this._isConnected()||this._aeTimer&&!e||(this._report(),this._aeTimer&&h.default.clearInterval(this._aeTimer),this._aeTimer=h.default.setInterval((()=>{this._report()}),1e3*s.AETimerDurationInSeconds)):this._aeTimer&&(h.default.clearInterval(this._aeTimer),this._aeTimer=void 0,this._report()))}_reportIsActive(){return s.default.isActive()&&!!u.default.getEndpointId()}_shouldSendRequest(){return!s.default.isActive()||this._isConnected()}}t.default=new class{constructor(){this._activityReporters=[new p("ChatService",((e,t,i)=>r.default.serviceSetActiveEndpointTimeout(e,i)),(()=>r.default.isConnected())),new p("UPS",((e,t,i)=>d.default.upsSetActiveEndpointTimeout(e,t)),(()=>!0))],g.RegisterStartupable(this,"ActiveEndpointService",[s.default,r.default,d.default])}startup(){return u.default.endpointInfoChanged.subscribe(((e,t)=>{e.id!==t.id&&this._reportEndpointActivityIfNeeded()})),s.default.subscribe((()=>{this._reportEndpointActivityIfNeeded()})),a.default.subscribe((()=>{this._reportEndpointActivityIfNeeded()})),r.default.reconnected.subscribe((()=>{this._reportEndpointActivityIfNeeded(!0)})),this._reportEndpointActivityIfNeeded(),o.Resolved()}_reportEndpointActivityIfNeeded(e=!1){for(const t of this._activityReporters)t.reportIfNeeded(e)}}},64376:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(24198),o=i(97691),s=(i(1656),i(46096)),a=(i(57347),i(36237)),r=i(22538),l=(i(4057),i(40363));t.default=new class{constructor(){this._running=!1,r.RegisterStartupable(this,"AppCenterService")}startup(){if(l.default.getAppCenterSecret()){const e=!1;n.default.configure({applicationSecret:l.default.getAppCenterSecret(),attachLogsToCrash:!1,detectAppNotTerminatingCleanly:!1,crashAttachmentProviderConfig:{allowUploadUnsanitizedLogs:e}}),n.default.start(),this._running=!0}else a.error(s.LogTraceArea.AppCenter,"Skipping - no AppCenter secret provided");return this.checkForUpdates(),o.Resolved()}onSkypeId(e){}checkForUpdates(){a.log(s.LogTraceArea.AppCenter,"Ignoring check for updates - PUBLIC build")}addCrashMetaData(e){n.default.addCrashMetadata(e)}}},78819:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OnMetricsUpdated=void 0;const n=i(31844),o=i(74634),s=i(97691),a=i(89391),r=i(22538),l=i(12770);t.OnMetricsUpdated=new o.default;t.default=new class{constructor(){this._updatePerformanceMetrics=()=>s.all([n.default.getSystemUsage(),n.default.getAppMetrics()]).then((e=>{const[i,n]=e;this._metrics={systemUsageInfo:i,gpu:n?n.find((e=>"GPU"===e.type)):void 0,renderer:n?n.find((e=>"Tab"===e.type)):void 0},t.OnMetricsUpdated.fire()})),r.RegisterStartupable(this,"AppMetricsService")}startup(){return this._updatePerformanceMetrics(),s.Resolved()}startTrackingPerformance(){if(!this._refreshSystemInfoIntervalToken){const e=a.default.getS4LCMCFeatures().perfomanceTelemetryTimeoutInterval;this._refreshSystemInfoIntervalToken=l.default.setInterval(this._updatePerformanceMetrics,e),this._updatePerformanceMetrics()}}stopTrackingPerformance(){this._refreshSystemInfoIntervalToken&&(l.default.clearInterval(this._refreshSystemInfoIntervalToken),this._refreshSystemInfoIntervalToken=void 0)}getPerformanceMetrics(){return this._metrics}isTracking(){return!!this._refreshSystemInfoIntervalToken}}},19731:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(62783),o=i(97691),s=i(40276),a=i(72685),r=i(4735),l=i(50325),c=i(22538),d=i(40363),u=i(12770);t.default=new class{constructor(){this._checkVersion=()=>new n.GenericRestClient(d.default.getFrontendBaseUrl()+"/version").performApiGet("").then((e=>{e&&e.AppVersion!==d.default.getAppVersion()&&(r.default.forceRefreshOnNextNavigation(),u.default.setTimeout((()=>{l.reloadApp("app-needs-to-be-updated")}),6e5+3e5*s.random()))})),c.RegisterStartupable(this,"AppUpdateService",[a.default])}startup(){return a.default.setRefreshOptions("AppUpdateService",{interval:18e5,callback:this._checkVersion,taskTypeFlags:a.TaskTypeFlags.UsesNetworking}),o.Resolved()}}},44135:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Test_CheckUrlRequest=void 0;const n=i(74958),o=i(96486),s=i(9682),a=i(62783),r=i(97691),l=i(89391),c=i(46096),d=i(53700),u=i(70004),g=i(36237),h=i(98754),p=i(68645),m=i(22538),S=i(4057),C=i(61967),f=i(42987),y=i(53374);var _;!function(e){e.supportsUrlRequest=function(e){return!!e.downloadToUri}}(_||(_={})),t.Test_CheckUrlRequest=_,t.default=new class{constructor(){this._deferredTransferQueue=[],m.RegisterStartupable(this,"BackgroundTransferService",[h.default,d.default,p.default,C.default])}startup(){return this._transfers={},this._webRequests={},this._subscribers={},this._progressSubscribers={},this._cachedProgressForTransfer={},this._transferResponseQueueSubscription&&(this._transferResponseQueueSubscription.unsubscribe(),this._transferResponseQueueSubscription=void 0),p.default.subscribe(f.BackgroundTransferActionType,((e,t)=>{const i=y.default.newCauseId();g.log(c.LogTraceArea.BackgroundTransferService,"start transfer(s), restored from db: "+t+", causeId: "+i),o.each(e,(e=>{g.log(c.LogTraceArea.BackgroundTransferService,"Tracking Transfer: "+e.id+": "+e.action+" "+n.pii.Omit(e.url)),e.androidDownloadToPublicFolderWithName&&(e.downloadToPublicFolderWithName=e.androidDownloadToPublicFolderWithName),e.downloadToPublicFolderWithName&&(e.downloadToPublicFolder=!0,e.filename=e.downloadToPublicFolderWithName),this._shouldCancelRequestOnRestart(e)?this._cancelTransfer(e,i):(this._transferNeedsRestartAcrossSessions(e)&&(e.started=!1,p.default.updateAction(e)),this._transfers[e.id]=e,this._reportProgress(e.id,0,e.finished,e.finishSuccess),this._checkForNeededWork(e.id))})),t&&(this._transferResponseQueueSubscription||(this._transferResponseQueueSubscription=C.default.event_response.subscribe((()=>{this._handleResponses()}))),this._handleResponses())})),C.default.event_progress.subscribe(((e,t)=>{this._reportProgress(e,t,!1,!1)})),r.Resolved()}test_reset(){this._subscribers={}}test_getDeferredTransferCount(){return this._deferredTransferQueue.length}_handleResponses(){const e=C.default.drainResponseQueue();o.each(e,(e=>{const{id:t,success:i,response:n}=e,o=this._getResponseBody(n.body,n.headers["content-type"]),s=e.success?void 0:e.response.error;this._finishedTransfer(t,i,n.statusCode,void 0,n.headers,o,s)}))}_getResponseBody(e,t){return!t||"json"!==t&&-1===t.indexOf("application/json")?e:S.default.parseJsonWithDefault(e,{})}_shouldCancelRequestOnRestart(e){return e.started&&!!e.downloadToUri}_transferNeedsRestartAcrossSessions(e){return!(!e.started||e.finished)&&(!this._supportsTransfersAcrossSessions(e)||!C.default.wasTransferIdKnownDuringStartup(e.id))}_supportsTransfersAcrossSessions(e){return _.supportsUrlRequest(e)}subscribe(e,t){this._subscribers[e]=t,this._seeIfAnythingNeedsDoing()}startTransfer(e){let t=e;t.started=!1,t.finished=!1;return p.default.persistAndStartAction(f.BackgroundTransferActionType,t).id}_endTransfer(e){delete this._transfers[e],delete this._cachedProgressForTransfer[e],p.default.removeAction(e);const t=this._deferredTransferQueue.shift();t&&t.resolve(void 0)}cancelTransfer(e,t){g.log(c.LogTraceArea.BackgroundTransferService,"Canceling Background Transfer: "+e+", causeId: "+t);let i=this._transfers[e];i&&this._cancelTransfer(i,t)}_cancelTransfer(e,t){if(this._endTransfer(e.id),e.started){_.supportsUrlRequest(e)&&s.default.cancel(e.id);const i=this._webRequests[e.id];i&&(g.log(c.LogTraceArea.BackgroundTransferService,"BTS aborting in-flight webrequest: "+e.id+", causeId: "+t),i.abort(),delete this._webRequests[e.id])}this._reportProgress(e.id,0,!0,!1)}transferIsTracked(e){return!!e&&!!this._transfers[e]}_checkForNeededWork(e){let t=this._transfers[e];if(!t.started){if(_.supportsUrlRequest(t)){const i=o.clone(t.headers);let n;(t.postData||t.postFileUri||t.contentType)&&(n=a.SimpleWebRequest.mapContentType(t.contentType||"json"));const c=a.SimpleWebRequest.mapContentType(t.acceptType||"json"),d=t.postData?a.SimpleWebRequest.mapBody(t.postData,n):void 0;if(!d||o.isString(d)){const a=t.postFileUri?u.FileUploadCacheUtils.getAbsoluteFromLocalCacheUri(t.postFileUri):void 0,g=l.default.getS4LMessagingFeaturesNoSubscription().backgroundTransfersInFlightLimit;let h;if(g&&o.size(this._transfers)>g){const e=r.Defer();h=e.promise(),this._deferredTransferQueue.push(e)}else h=r.Resolved();h.then((()=>{t=this._transfers[e],t&&s.default.send(e,t.action,t.url,{headers:i,acceptType:c,contentType:n,sendFileUri:a,sendData:d,downloadToUri:t.downloadToUri,filename:t.filename,downloadToPublicFolder:t.downloadToPublicFolder,downloadPublicFolderUseSkypeFolder:t.downloadPublicFolderUseSkypeFolder,withCredentials:t.withCredentials,timeout:t.timeout||void 0,progressTimeout:t.progressTimeout,resumable:t.resumable,resumableUploadStatusUrl:t.resumableUploadStatusUrl,resumableAttemptsSoFar:t.resumableAttemptsSoFar,quarantineDownloadedFile:l.default.getS4LNativePlatformsEcsConfigNoSubscription().enableMacOSQuarantineFlagForDownloadedFiles})})),t.started=!0}}if(!t.started){t.headers,t.postFileUri;{const i={overrideGetHeaders:t.headers,acceptType:t.acceptType,contentType:t.contentType,sendData:t.postData,onProgress:t=>{this._reportProgress(e,t.total?t.loaded/t.total:0,!1,!1)},priority:t.priority,timeout:t.timeout,withCredentials:!!t.withCredentials};let n=new a.SimpleWebRequest(t.action,t.url,i);this._webRequests[e]=n,n.start().then((t=>{this._finishedTransfer(e,!0,t.statusCode,t.statusText,t.headers,t.body)}),(t=>{this._finishedTransfer(e,!1,t.statusCode,t.statusText,t.headers,t.body,t.timedOut?"Timeout":t.canceled?"Canceled":void 0)}))}}t.started=!0,p.default.updateAction(t)}if(!t.finished)return;const i=this._subscribers[t.subscriberType];if(i){const n={body:t.responseData,headers:t.responseHeaders||{},method:t.action,statusCode:t.statusCode||0,statusText:t.statusText||"",url:t.url,errorInfo:t.errorInfo};i(e,t.context,!!t.finishSuccess,n,t.headers||{},t.subscriberType),this._endTransfer(t.id)}}_seeIfAnythingNeedsDoing(){const e=o.keys(this._transfers);o.each(e,(e=>{this._checkForNeededWork(e)}))}_finishedTransfer(e,t,i,o,s,a,r){delete this._webRequests[e];const l=this._transfers[e];g.log(c.LogTraceArea.BackgroundTransferService,"Transfer Completed: "+e+", Worked: "+t+", StatusCode: "+i+", StatusText: "+o+", known: "+!!l+(r?", Failure: "+n.pii.Omit(r):"")),l&&(l.finished=!0,l.finishSuccess=t,l.statusCode=i,l.statusText=o,l.responseHeaders=s,l.responseData=a,l.errorInfo=r,p.default.updateAction(l),this._reportProgress(e,t?1:0,!0,t),this._checkForNeededWork(e))}subscribeToProgress(e,t){this._progressSubscribers[e]?this._progressSubscribers[e].push(t):this._progressSubscribers[e]=[t]}unsubscribeFromProgress(e,t){o.pull(this._progressSubscribers[e],t),0===this._progressSubscribers[e].length&&delete this._progressSubscribers[e]}getProgress(e){return this._cachedProgressForTransfer[e]}_reportProgress(e,t,i,n){const s={progress:t,finished:i,success:!!n},a=!!this._transfers[e];if(a&&(this._cachedProgressForTransfer[e]=s,!this._progressSubscribers[e]))return;g.log(c.LogTraceArea.BackgroundTransferServiceDebug,"Progress report: "+e+", progress: "+t.toFixed(4)+", finished: "+i+", success: "+n+", known: "+a);const r=o.clone(this._progressSubscribers[e]);o.each(r,(t=>t(e,s)))}}},14221:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(97691),s=i(76621),a=i(71830),r=i(39549),l=i(46096),c=i(36237),d=i(69108),u=i(18078),g=i(4735),h=i(17093),p=i(30124),m=i(27357),S=i(14976),C=i(16392),f=i(22538),y=i(53374);t.default=new class{constructor(){f.RegisterStartupable(this,"CheckForValidNavigationStateService",[s.default,r.default])}startup(){return(0,r.default)().subscribe((()=>this._checkState("ConversationsStore"))),s.default.messagesProcessed.subscribe((()=>this._checkState("ChatServiceDataService"))),this._checkState("startup"),o.Resolved()}_checkState(e){n.defer((()=>{let t;const i=p.default.isUsingStackNavigationContext(),n=i?C.StackNavigatorId.Mobile:C.StackNavigatorId.DesktopContent;let o=!1;const s=m.default.getCurrentNavigationStackRoute(n);if((null==s?void 0:s.name)===h.CallNavigationId){t=(null==s?void 0:s.params).initialConversationMri,o=a.isPhoneMri(t)}else if((null==s?void 0:s.name)===h.ConversationNavigationId){t=(null==s?void 0:s.params).conversationId}if(t&&!o&&!(0,r.default)().ableToViewConversation(t)){const n=y.default.newCauseId();c.log(l.LogTraceArea.Navigation,"CheckForValidNavigationStateService._checkState not able to view currentConversationId: "+S.mriOrId(t)+" reason: "+e+" causeId: "+n),u.default.isGuestUser()?d.default.redirectToLogout(l.LogoutReason.GuestSessionEnded):i?g.default.navigateToRecentsTab():g.default.navigateToWelcomeScreen(n)}}))}}},57569:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FailureReason=void 0;const n=i(96486),o=i(62783),s=i(89391),a=i(44135),r=i(36237),l=i(94214);var c;!function(e){e[e.None=0]="None",e[e.MaxRetriesExceeded=1]="MaxRetriesExceeded",e[e.MaxElapsedTimeExceeded=2]="MaxElapsedTimeExceeded",e[e.Permanent=3]="Permanent"}(c=t.FailureReason||(t.FailureReason={}));class d{constructor(e,t){this._transferTypes=e,this._logTraceArea=t,this._retryInfo={}}_getRetryInfo(e,t){return this._retryInfo[e+t]}_setRetryInfo(e,t,i){this._retryInfo[e+t]=i}_resetBackoffs(e){n.each(this._retryInfo,(e=>{e.exponentialTime.reset(),e.nextAttempt=Date.now()-1}))}_makeExponentialTime(e,t){return new o.ExponentialTime(1e3,3e5)}_cleanupRetryInfo(e){n.each(this._transferTypes,(t=>{delete this._retryInfo[e+t]}))}_createTrackedBackgroundTransfer(e,t){return{id:e,finished:!1,finishedAttemptsSoFarCount:t?t.finishedAttemptsSoFarCount:0,failureReason:c.None}}static redoTransfer(e){e&&(e.id=void 0,e.finished=!1,e.success=void 0,e.failureReason=c.None)}static isTransferLost(e){return!(!e||e.finished)&&!(!e.id||a.default.transferIsTracked(e.id))}static isTransferPermanentFailure(e){return!(!e||e.failureReason!==c.Permanent)}_isTransferCompletedSuccessfully(e){return!!e&&e.finished&&!!e.success}_isTransferReadyToStart(e,t,i,n){if(n&&!l.default.hasUsableSkypeToken())return r.log(this._logTraceArea,"Waiting on "+i+" due to missing skype token: "+e),!1;if(!t||!t.id)return!0;if(t.finished&&!t.success&&!d.isTransferPermanentFailure(t)){const t=this._getRetryInfo(e,i);if(!t||t.nextAttempt<=Date.now())return!0}return!1}_isTransferCompletedWithoutSuccess(e,t,i){return!(!t||!t.finished||t.success)&&t.failureReason!==c.None}_handleTransferFinished(e,t,i,o,a,l,u){const g={transfer:t};t.finished=!0;const h=s.default.getS4LCMCFeatures().retryPolicy;(0!==u.statusCode||h.countLocalNetworkFailures)&&t.finishedAttemptsSoFarCount++,t.success=o;const p=this._getMaxRetries(e,i),m=this._getMaxTransferTime(e,i);if(a?t.failureReason=c.Permanent:l>m?t.failureReason=c.MaxElapsedTimeExceeded:t.finishedAttemptsSoFarCount>=p?t.failureReason=c.MaxRetriesExceeded:t.failureReason=c.None,g.canRetry=t.failureReason===c.None,o||!g.canRetry)return g;if(g.retryInfo=this._getRetryInfo(e,i),r.log(this._logTraceArea,"TransferFinished failure, transferId: "+t.id+", failureReason: "+c[t.failureReason]+", RetryInfo:"+JSON.stringify(g.retryInfo)),d.isTransferPermanentFailure(t))return g;if(g.retryInfo){let e=0;if(u.headers["Retry-After"]){const t=Number(u.headers["Retry-After"]);t&&n.isFinite(t)&&(e=1e3*t)}let t=g.retryInfo.exponentialTime.getTime();e<t&&(e=t,g.retryInfo.exponentialTime.calculateNext()),g.retryInfo.nextAttempt=Date.now()+e}else{const t=this._makeExponentialTime(e,i);g.retryInfo={exponentialTime:t,nextAttempt:Date.now()+t.getTimeAndCalculateNext()}}return this._setRetryInfo(e,i,g.retryInfo),g}static isPermanentFailure(e){if(n.includes([400,404,410,413,414,415],e.statusCode))return!0;if(!n.isString(e.errorInfo))return!1;const t=e.errorInfo.toLowerCase();return-1!==t.indexOf("failed to create file on local system")||0===e.statusCode&&(-1!==t.indexOf("no such file")||-1!==t.indexOf("file does not exist"))}static migrateTransfer(e){e&&e.permanentFailure&&(e.failureReason=c.Permanent)}}t.default=d},84469:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(97691),s=i(89391),a=i(62141),r=i(61294),l=i(46096),c=i(36237),d=i(98754),u=i(22538);t.default=new class{constructor(){u.RegisterStartupable(this,"DevConfigService",[d.default])}startup(){return this._overrides=d.default.getDataExclusive(a.InternalKeys.LocalOverriddenEcsConfig),void 0!==this._overrides&&this._updateStore(this._overrides),o.Resolved()}getOverrides(){return this._overrides||{}}setOverride(e,t,i){const o={};n.set(o,t,i);const s=r.mergeConfigs(this.getOverrides(),{[e]:o});return this._saveConfig(s)}clearOverride(e,t){let i=!1;const s=n.cloneDeep(this.getOverrides()),a=n.concat([e],t);for(;n.unset(s,a)&&(i=!0,a.pop(),!n.isEmpty(a)&&n.isEmpty(n.get(s,a))););return i?this._saveConfig(s):o.Resolved()}resetAllOverrides(){return this._saveConfig({})}_saveConfig(e){return this._overrides=e,d.default.putData(a.InternalKeys.LocalOverriddenEcsConfig,e).then((()=>{this._updateStore(e)}))}_updateStore(e){c.log(l.LogTraceArea.GenericUnsafe,"Updating app config with dev settings"),s.default.internal_setOverrides(e)}}},96491:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(36345),s=i(97691),a=i(89391),r=i(62141),l=i(46096),c=i(36237),d=i(98754),u=i(78735),g=i(22538),h=i(40363);t.default=new class{constructor(){this._cache={},this._initialized=!1,g.RegisterStartupable(this,"EcsParamCache",[d.default,u.default])}startup(){return a.default.getConfigSettingsNoSubscription().calling.disableEcsParamCache||(this._cache=d.default.getData(r.InternalKeys.EcsParamCache)||{},c.log(l.LogTraceArea.GenericUnsafe,n.isEmpty(this._cache)?"No cached ECS parameters found.":"Loaded cached ECS parameters for version "+this._cache.appVersion)),this._fetchEcsParamsIfNeeded().then((()=>{if(this._initialized=!0,this._waitingForCallingParams){const e=this._waitingForCallingParams;this._waitingForCallingParams=void 0,e.resolve(void 0)}})),s.Resolved()}_fetchEcsParamsIfNeeded(){return this.needNewParams()?(c.log(l.LogTraceArea.GenericUnsafe,"Cached ECS parameters are stale, waiting for calling to start..."),this._fetchEcsCallingParams()):s.Resolved(void 0)}_fetchEcsCallingParams(){return o.default.getEcsQueryParameters().then((e=>{this._cache={appVersion:h.default.getAppVersion(),callingParams:e},c.log(l.LogTraceArea.GenericUnsafe,"Caching ECS parameters for version "+this._cache.appVersion),d.default.putData(r.InternalKeys.EcsParamCache,this._cache)}))}isInitialized(){return this._initialized}needNewParams(){return!!n.isEmpty(this._cache)||this._cache.appVersion!==h.default.getAppVersion()}getParamsWhenAvailable(){return this._initialized?s.Resolved(this._cache.callingParams):(this._waitingForCallingParams||(this._waitingForCallingParams=s.Defer()),this._waitingForCallingParams.promise().then((()=>this._cache.callingParams)))}test_getCachedEcsParams(){return this._cache.callingParams}test_reset(){this._initialized=!1,this._cache={},this._waitingForCallingParams=void 0}}},26646:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EcsService=void 0;const n=i(74395),o=i(96486),s=i(16778),a=i(97691),r=i(60),l=i(89391),c=i(62141),d=i(1656),u=i(64935),g=i(96491),h=i(46096),p=i(36237),m=i(98754),S=i(33754),C=i(6819),f=i(83181),y=i(22538),_=i(4057),v=i(40363),b=i(35478),T=i(12770),P=i(94214),A=i(67024),k="ecsDefaultConfig";class I{constructor(){this._ecsClient=new n.default,this._isPaused=!0,this._isEnabled=!1,this._wipedDefault=!1,this._wipedUser=!1,this._updateState=()=>{const{tracing:e,tracing2:t,tracing3:i,tracing4:n,tracing5:o,tracing6:s,tracing7:a,tracing8:r,tracing9:c,localeHint:d,unsafeTraceAreas:u,pii:g}=l.default.getS4LFeatures(),{telemetrySampling:h,perfTelemetrySampling:m}=l.default.getS4LTelemetryFeatures(),{responsivenessScenarioSampling:S}=l.default.getS4LCMCFeatures(),C=!this._loggedIn;b.default.setTelemetryConfig(l.default.getTelemetryFeatures(),l.default.getCachedEcsConfigEtag(),l.default.getCachedEcsConfigExpiration(),C,h,m,l.default.getNRTMapping()),p.setEcsOptions([e,t,i,n,o,s,a,r,c],u),p.setShouldFindPotentialPii(g.findPotentialPii),(0,A.setSampledScenarios)(S),this._ecsClient.setFetchTimeout(l.default.getConfigSettingsNoSubscription().ecs.fetchTimeout),this._checkPauseStatus()},this._getEcsParameters=()=>this._getSlimcoreParameters().then((e=>{const t=_.default.parseJsonWithDefault(e,{});let i;return i=v.default.getOSVersion(),this._setParameterIfUndefined(t,"OSVer",i),this._setParameterIfUndefined(t,"ClientID",v.default.getDeviceId()),this._setParameterIfUndefined(t,"Manufacturer",v.default.getSystemManufacturer()),this._setParameterIfUndefined(t,"Model",v.default.getSystemModel()),this._setParameterIfUndefined(t,"Chipset",v.default.getChipset()),this._setParameterIfUndefined(t,"CPUCount",v.default.getCPUCount()),this._setParameterIfUndefined(t,"CPUSpeedMHz",v.default.getCPUSpeedMhz()),this._setParameterIfUndefined(t,"Language",S.getLanguageFromLocale()),this._setParameterIfUndefined(t,"Locale",S.getLocale()),this._setParameterIfUndefined(t,"NetworkMCCCode",C.default.getMccCode()),this._setParameterIfUndefined(t,"NetworkMNCCode",C.default.getMncCode()),p.log(h.LogTraceArea.GenericUnsafe,"ECS - fetching parameters:"+JSON.stringify(t)),t}))}initializePreUserContext(){const e=l.default.getConfigSettingsNoSubscription().ecs,t={hosts:e.hosts,fetchTimeout:e.fetchTimeout,clientName:"Skype",clientVersion:v.default.getSkypePlatformId()+"_"+v.default.getAppVersion()+(v.default.getPreInstallPartnerId()?"_"+v.default.getPreInstallPartnerId():""),configsToFetch:[n.Models.EcsConfigType.Default],getEcsParameters:this._getEcsParameters,initialAppActiveState:this._isAppActive(s.App.getActivationState()),initialSkypeTokenData:void 0,databaseInterface:{putData:(e,t)=>e===n.Models.EcsConfigType.User?y.EnsureStartedExclusive([m.default]).then((()=>m.default.putData(c.InternalKeys.EcsConfig,t))):e===n.Models.EcsConfigType.Default?s.Storage.setItem(k,JSON.stringify(t)):a.Rejected("Unknown ECS Config Type"),getData:e=>e===n.Models.EcsConfigType.User?y.EnsureStartedExclusive([d.default,m.default]).then((()=>!this._wipedUser&&d.default.didLastLaunchCrash()?(this._wipedUser=!0,m.default.deleteKeys([c.InternalKeys.EcsConfig]).then((()=>{}))):a.Resolved(m.default.getData(c.InternalKeys.EcsConfig)))):e===n.Models.EcsConfigType.Default?y.EnsureStartedExclusive([d.default]).then((()=>!this._wipedDefault&&d.default.didLastLaunchCrash()?(this._wipedDefault=!0,s.Storage.removeItem(k).then((()=>{}))):s.Storage.getItem(k).then((e=>_.default.parseJsonErrorToUndefined(e))))):a.Rejected("Unknown ECS Config Type")}};this._ecsClient.pause(),this._ecsClient.telemetryEventAdded.subscribe(((e,t)=>{p.track(new u.EcsTelemetryEvent(e,t))})),r.default.subscribeForChanges("EcsService",(e=>{this._ecsClient.setAppActive(this._isAppActive(e))})),f.default.subscribe((()=>this._checkPauseStatus()),f.TriggerKeys.CallingStatusKey),this._preContextInitializePromise=this._ecsClient.initialize(t).then((()=>{l.default.useCachedEcsConfig(this._ecsClient.getConfig()),l.default.subscribe(this._updateState),this._updateState(),this._ecsClient.configUpdated.subscribe((()=>{l.default.useCachedEcsConfig(this._ecsClient.getConfig())})),this._ecsClient.setConfigsToFetch([n.Models.EcsConfigType.Default])}))}initializeWithUserContext(){return this._preContextInitializePromise.then((()=>(this._loggedIn=!0,this._updateState(),this._ecsClient.setConfigsToFetch([n.Models.EcsConfigType.Default,n.Models.EcsConfigType.User]).then((()=>{y.EnsureStarted(P.default).then((()=>{const e=()=>{const e=P.default.getSkypeToken();e?this._ecsClient.useSkypeToken(e.rawToken,e.expiration):this._ecsClient.useSkypeToken(void 0,0)};P.default.subscribe(e,P.TriggerKeys.SkypeTokenKey),e(),T.default.setTimeout((()=>{this._isEnabled=!0,this._checkPauseStatus()}),1e3)}))})))))}_getSlimcoreParameters(){return this._loggedIn?y.EnsureStarted(g.default).then((()=>g.default.getParamsWhenAvailable())):a.Resolved(void 0)}_setParameterIfUndefined(e,t,i){void 0===e[t]&&(o.isNumber(i)||o.isString(i))&&(e[t]=i)}_checkPauseStatus(){const e=!this._isEnabled||this._shouldThrottleEcsClient();e!==this._isPaused&&(e?this._ecsClient.pause():this._ecsClient.resume(),this._isPaused=e)}_shouldThrottleEcsClient(){return!!l.default.getS4LFeatures().scheduler.enableEcsServiceThrottling&&f.default.isInCall()}_isAppActive(e){return!!l.default.getConfigSettingsNoSubscription().ecs.ignoreActivationState||e===s.Types.AppActivationState.Active}requestUpdate(){this._ecsClient.requestUpdate()}resume(){this._isEnabled=!0,this._checkPauseStatus()}setAllowBackgroundFetch(e){this._ecsClient.setAllowBackgroundFetch(e)}test_reset(){this._loggedIn=!1,this._isPaused=!0,this._isEnabled=!1,this._wipedDefault=!1,this._wipedUser=!1,this._preContextInitializePromise=void 0}}t.EcsService=I;let w=new I;t.default=w},60436:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(97691),o=i(89391),s=i(57347),a=i(72685),r=i(61253),l=i(22538),c=i(40363),d=i(12770),u="NetworkFootprint",g=a.TaskTypeFlags.UsesNetworking;t.default=new class{constructor(){this._footprintServiceIntervalInMinutes=0,this._monitorId="S4LW",this._configUrls=[],this.schedulePostingJob=()=>{const e=o.default.getS4LCMCFeatures().footprintServiceIntervalInMinutes;let t=o.default.getS4LCMCFeatures().footprintServiceConfigUrls,i=!1;if(e!==this._footprintServiceIntervalInMinutes&&(this._footprintServiceIntervalInMinutes=e,i=!0),(0,r.default)(this._configUrls,t)||(this._configUrls=t.slice(),i=!0),i&&(this._stopScheduledJob(),this._footprintServiceIntervalInMinutes>0&&this._configUrls.length>0)){const e=60*this._footprintServiceIntervalInMinutes*1e3;this._serviceTimer=d.default.setInterval((()=>this._postNetworkFootprintTelemetry()),e)}return n.Resolved()},l.RegisterStartupable(this,"FootprintService",[])}startup(){return s.default.queueIdleTask(u,g,this.schedulePostingJob),o.default.subscribe((()=>{s.default.queueIdleTask(u,g,this.schedulePostingJob)})),n.Resolved()}dispose(){this._stopScheduledJob(),this._footprintServiceIntervalInMinutes=0}_postNetworkFootprintTelemetry(){const e=[{TenantId:c.default.getFootprintTenantId()}];let t=[...this._configUrls];Footprint.start(this._monitorId,t,1,JSON.stringify(e),"")}_stopScheduledJob(){this._serviceTimer&&(d.default.clearInterval(this._serviceTimer),this._serviceTimer=void 0)}}},57347:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(17379);(0,n.__exportStar)(i(17379),t),t.default=o.default},72685:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Test_InfoRefreshService=t.TaskTypeFlags=void 0;const n=i(96486),o=i(62783),s=i(97691),a=i(62141),r=i(46096),l=i(57347);Object.defineProperty(t,"TaskTypeFlags",{enumerable:!0,get:function(){return l.TaskTypeFlags}});const c=i(36237),d=i(98754),u=i(83181),g=i(22538),h=i(12770);class p{constructor(e=!1){this._test_allowTimerUpdates=e,this._refreshers={},this._dbOnlyRefreshers={},this._isReadyForRefreshes=!1,this._loadedCache=!1,this._recalcNextUpdate=()=>{this._recalcNextUpdateInternal()},this._recalcNextUpdateInternal=()=>{if(!this._loadedCache||!this._isReadyForRefreshes)return;this._timer&&(h.default.clearExpiration(this._timer),this._timer=void 0);const e=Date.now();let t;n.each(this._refreshers,((i,n)=>{if(!i.callback)return;if(!i.interval&&!i.nextExecution)return;if(i.currentlyRunning)return;let o=i.nextExecution||(i.lastRefresh||0)+(i.interval||0);if(o<=e){if(c.log(r.LogTraceArea.GenericUnsafe,`InfoRefreshService: firing [${n}] [nextExecution=${i.nextExecution}][lastRefresh=${i.lastRefresh}] [interval=${i.interval}]`),this._performCallback(i,n),i.currentlyRunning)return;o=i.nextExecution||(i.lastRefresh||0)+(i.interval||0)}(!t||o<t)&&(t=o)})),t&&(this._timer=h.default.setExpiration(this._recalcNextUpdate,t))},g.RegisterStartupable(this,"InfoRefreshService",[d.default])}startup(){const e=d.default.getData(a.InternalKeys.InfoRefreshServiceCache);return n.each(e,((e,t)=>{this._refreshers[t]?this._refreshers[t].lastRefresh=e:this._dbOnlyRefreshers[t]=e})),u.default.performAfterUIStarted((()=>{this._isReadyForRefreshes=!0,this._recalcNextUpdate()})),this._loadedCache=!0,s.Resolved()}setRefreshOptions(e,t){this._refreshers[e]?n.extend(this._refreshers[e],t):(this._refreshers[e]=n.clone(t),e in this._dbOnlyRefreshers&&(this._refreshers[e].lastRefresh=this._dbOnlyRefreshers[e],delete this._dbOnlyRefreshers[e])),this._recalcNextUpdate()}fireEarly(e){this._fireEarlyInternal(e)}_fireEarlyInternal(e){const t=this._refreshers[e];t&&!t.currentlyRunning&&(c.log(r.LogTraceArea.GenericUnsafe,`InfoRefreshService: fireEarly [${e}]`),this._performCallback(t,e))}fireAllEarly(){n.each(this._refreshers,((e,t)=>{e.callback&&this.fireEarly(t)}))}_performCallback(e,t){e.callback,e.currentlyRunning=!0;const i=()=>{s.Resolved().then((()=>{const t=e.failureBackoff?1+e.failureBackoff.getIncrementCount():0;return e.callback(t)})).finally((()=>{e.currentlyRunning=!1})).then((()=>{e.failureBackoff=void 0,e.nextExecution=void 0,e.lastRefresh=Date.now(),this._saveCache()}),(()=>{e.failureBackoff?e.failureBackoff.calculateNext():e.failureBackoff=new o.ExponentialTime(5e3,18e5),e.nextExecution=Date.now()+e.failureBackoff.getTime()})).finally((()=>{this._recalcNextUpdate()}))};e.taskTypeFlags?l.default.queueIdleTask("InfoRefreshService Task ["+t+"]",e.taskTypeFlags,i):i()}_saveCache(){let e=n.mapValues(this._refreshers,(e=>e.lastRefresh||0));n.each(this._dbOnlyRefreshers,((t,i)=>{e[i]=t})),d.default.putData(a.InternalKeys.InfoRefreshServiceCache,e)}}t.Test_InfoRefreshService=p,t.default=new p},20022:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Test_AppLifecycle=t.LifecycleEventType=void 0;const n=i(96486),o=i(31844),s=i(97691),a=i(75209),r=i(10167),l=i(66355),c=i(36237),d=i(53374);var u;!function(e){e.ON_EXIT="onExit",e.ON_RESUME="onResume",e.ON_SUSPEND="onSuspend",e.ON_SYSTEM_IDLE_CHANGE="onSystemIdleChange"}(u=t.LifecycleEventType||(t.LifecycleEventType={}));class g{constructor(e){this._acknowledgeCallbacks=e,this._onSuspendQueue=[],this._onResumeQueue=[],this._onExitQueue=[],this._onSystemIdleChangeQueue=[],this._onResume=e=>{c.log(l.LogTraceArea.Lifecycle,"LifecycleService._onResume, causeId: "+e);const t=n.clone(this._onResumeQueue).map((t=>t(e)));this._processPromises(t,u.ON_RESUME,e)},this._onSuspend=e=>{c.log(l.LogTraceArea.Lifecycle,"LifecycleService._onSuspend, causeId: "+e);const t=n.clone(this._onSuspendQueue).map((t=>t(e)));this._processPromises(t,u.ON_SUSPEND,e)},this._onExit=e=>{c.log(l.LogTraceArea.Lifecycle,"LifecycleService._onExit, causeId: "+e);const t=n.clone(this._onExitQueue).map((t=>t(e)));this._processPromises(t,u.ON_EXIT,e)},this._onSystemIdleChange=(e,t)=>{c.log(l.LogTraceArea.Lifecycle,"LifecycleService._onSystemIdleChange, causeId: "+e);const i=n.clone(this._onSystemIdleChangeQueue).map((i=>i(e,t)));this._processPromises(i,u.ON_SYSTEM_IDLE_CHANGE,e)}}_processPromises(e,t,i){c.log(l.LogTraceArea.Lifecycle,"LifecycleService._processPromises, causeId: "+i);const n=this._acknowledgeCallbacks[t];(0,a.wrapWithCauseId)((()=>s.all(e)),l.LogTraceArea.Lifecycle,t,i).always(n)}registerEvents(e,t,i,n){e&&e.subscribe(this._onExit),t&&t.subscribe(this._onResume),i&&i.subscribe(this._onSuspend),n&&n.subscribe(this._onSystemIdleChange)}addObserver(e,t){switch(c.log(l.LogTraceArea.Lifecycle,`Add ${e} observer`),e){case u.ON_EXIT:this._onExitQueue.push(t);break;case u.ON_RESUME:this._onResumeQueue.push(t);break;case u.ON_SUSPEND:this._onSuspendQueue.push(t);break;case u.ON_SYSTEM_IDLE_CHANGE:this._onSystemIdleChangeQueue.push(t);break;default:d.default.switchStatementExhaustiveChecking(e)}}removeObserver(e,t){switch(c.log(l.LogTraceArea.Lifecycle,`Remove ${e} observer`),e){case u.ON_EXIT:n.pull(this._onExitQueue,t);break;case u.ON_RESUME:n.pull(this._onResumeQueue,t);break;case u.ON_SUSPEND:n.pull(this._onSuspendQueue,t);break;case u.ON_SYSTEM_IDLE_CHANGE:n.pull(this._onSystemIdleChangeQueue,t);break;default:d.default.switchStatementExhaustiveChecking(e)}}}t.Test_AppLifecycle=g;const h=new g({[u.ON_EXIT]:()=>r.default.acknowledgeAppExit()});h.registerEvents(o.default.onExit,o.default.onResume,o.default.onSuspend,o.default.onSystemIdleChange),t.default=h},70518:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});i(74958);const n=i(96486),o=i(97792),s=i(26999),a=i(97691),r=(i(76343),i(89391)),l=i(46096),c=i(36237),d=i(14138),u=i(33326),g=i(22538),h=i(99948),p=i(47202);t.default=new class{constructor(){g.RegisterStartupable(this,"LocalEngagementNotificationsService")}startup(){return d.default.initializeLocalNotifications().then((e=>e?(this._applyConfigurationToLocalNotifications(),d.default.event_localEngagementNotificationQueueChanged.subscribe((()=>{c.log(l.LogTraceArea.Engagement,"localEngagementNotificationQueueChanged"),this._drainLocalEngagementNotificationQueue()})),this._drainLocalEngagementNotificationQueue(),a.Resolved()):(c.log(l.LogTraceArea.Engagement,"LocalEngagementNotificationsService: Push not granted. Not subscribing to NotificationQueueService"),a.Resolved())))}_drainLocalEngagementNotificationQueue(){n.each(d.default.fetchAndDrainLocalEngagementNotificationQueue(),(e=>{c.log(l.LogTraceArea.Engagement,"_drainLocalEngagementNotificationQueue"),this._handleLocalEngagementNotificationEventReceived(e.notification,e.causeId)}))}_handleLocalEngagementNotificationEventReceived(e,t){h.default.startedProcessingLocalNotification(e.category);let i="Received local notification event: ";i=i+"(category:"+e.category+" identifier: "+e.identifier+")",i=i+" causeId: "+t,c.log(l.LogTraceArea.Notifications,i),e.category!==p.TPUM_CATEGORY_IDENTIFIER&&e.category!==u.LocalNotificationIds.SIGNIN_REMINDER_IDENTIFIER&&e.category!==u.LocalNotificationIds.SIGNOUT_REMINDER_IDENTIFIER||(c.log(l.LogTraceArea.Engagement,"_handleLocalEngagementNotificationEventReceived"),p.default.handleTPUMNotificationEventReceived(e,t)),e.notificationProcessingId&&s.LocalNotifications.notificationProcessingCompleted(e.notificationProcessingId),window.focus(),e.wakeLockId&&o.default.release(e.wakeLockId,"Notifications:quickreply")}_applyConfigurationToLocalNotifications(){{const e=()=>{let e;e={Web:{MultiTabNotifications:r.default.getS4LMessagingFeatures().browserMultiTabNotifications}},s.LocalNotifications.setConfig(e)};r.default.subscribe(e),e()}}}},84474:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74958),o=i(96486),s=i(67287),a=i(31844),r=i(97792),l=i(26999),c=i(16778),d=i(48540),u=i(97691),g=i(60),h=i(89391),p=i(97571),m=i(94224),S=i(98925),C=i(9520),f=i(2278),y=i(22801),_=i(60021),v=i(76621),b=i(71830),T=i(52262),P=i(76679),A=i(27447),k=i(46096),I=i(97811),w=i(97174),N=i(36237),M=i(18775),E=i(98754),x=i(32806),L=i(16724),R=i(70518),D=i(33754),B=i(9815),O=i(32638),F=i(26385),V=i(78735),U=i(18078),H=(i(4735),i(30124)),W=i(13608),z=i(14138),G=i(13847),K=i(33326),j=i(28355),q=i(9582),Q=i(47922),X=i(88915),J=i(14976),$=i(29034),Y=i(79829),Z=i(77914),ee=i(83181),te=i(66765),ie=i(16568),ne=i(22538),oe=i(99948),se=i(4057),ae=i(40363),re=i(28069),le=i(53374);t.default=new class{constructor(){this._skipIncomingVideoNotificationDict={},this._notificationPromises=[],this._subscriptions=[],this.test_tickCheck=u.Resolved(),this._processIncomingVideoAvailableNotification=(e,t)=>{if(h.default.getS4LCMCFeaturesNoSubscription().enableIncomingVideoNotification){if(!!!this._skipIncomingVideoNotificationDict[e]){const i=le.default.newCauseId(),n=t.id;if(m.default.RemoteStreamHelper.isStreamAvailable(e,n,d.StreamType.Video,void 0,[S.VideoOverrideReason.InBackground])){const t=c.App.getActivationState();t===c.Types.AppActivationState.Background?(N.log(k.LogTraceArea.Calling,`_processIncomingVideoAvailableNotification, causeId: ${i}`),this._skipIncomingVideoNotificationDict[e]=!0,s.default.postIncomingVideoNotification(n,e,i,"",s.IncomingVideoNotificationOrigin.IncomingWhileInBackground,ae.default.getSoundPath("Skype_Incoming_Video_Available.m4a"))):t===c.Types.AppActivationState.Active&&(this._skipIncomingVideoNotificationDict[e]=!0)}}}},this._onCallEndedEvent=e=>{const t=e.callId;this._skipIncomingVideoNotificationDict[t]&&delete this._skipIncomingVideoNotificationDict[t]},ne.RegisterStartupable(this,"LocalNotificationsService",[z.default,te.default,ie.default,q.default,R.default])}setupPreStartupSubscriptions(){this._metasSub&&this._metasSub.unsubscribe(),this._metasSub=v.default.conversationsUpdated.subscribe((e=>{const t=o.filter(e,(e=>!!e.counts));if(t.length>0){const e=r.default.requestMaxTime("Notifications:conv");ne.EnsureStarted(this).then((()=>{o.each(t,(e=>{q.default.cancelNotificationsForConversation(e.conv.id,e.counts.consumptionHorizonTimestamp)}))})).always((()=>{e.then((e=>r.default.release(e,"Notifications:conv"))).catch(o.noop)}))}})),this._messagesSub&&this._messagesSub.unsubscribe(),this._messagesSub=v.default.messagesProcessedWithBundleInfo.subscribe((e=>{const t=u.Defer();let i=!1;const n=t.promise();this._notificationPromises.push(n),n.always((()=>{o.pull(this._notificationPromises,n)})),this.test_tickCheck=u.Resolved().then((()=>{const n=r.default.requestMaxTime("Notifications:msg");return ne.EnsureStarted(this).then((()=>{const t=o.map(e,(e=>{const t=_.getCorrelationIdForMessage(e.message),i=o.some(e.details,(e=>e.origin===k.MessageOrigin.PushNotification));return i&&N.track(new I.FundamentalsMessagePushDebug(e.message.getLatestRelevantClientMessageId()||"",t,"LocalNotifications: started")),i&&e.message.isLastChangeReactionConsumptionHorizonUpdate()&&q.default.cancelNotificationById(e.message.conversationId+e.message.createdTime),this._processMessageInfoForNotifications(e).then((n=>ne.EnsureStartedExclusive([te.default,ie.default,E.default]).then((()=>{const s=te.default.getEndpointInfo();U.default.isMyMri(e.message.creator)&&G.isLastMessageUpdateReaction(e.message)&&N.track(new X.ReactionNotificationProcessed(e.message.conversationId,n)),i&&N.track(new I.FundamentalsMessagePushDebug(e.message.getLatestRelevantClientMessageId()||"",t,"LocalNotifications: done",void 0,k.MessageProcessResult[n]));const a=o.uniq(o.map(e.details,(e=>e.origin))).length;o.each(e.details,(t=>{N.track(new L.KpiMessageDelivered(e.message,t.origin,n,t.clientMessageId,ie.default.EdfRegistrationId.get(),s,e.messageAlreadySeen,ee.default.isInCall(),a,t.correlationVector))}))})).then((()=>({result:n,message:e.message})))))}));return u.all(t).then((e=>{const t=o.groupBy(e,(e=>e.result));N.log(k.LogTraceArea.Notifications,"Processed "+e.length+" Messages: "+o.map(t,((e,t)=>k.MessageProcessResult[Number(t)]+": ("+o.map(e,(e=>"cuid: "+e.message.cuid+" CorrelationId: "+_.getCorrelationIdForMessage(e.message))).join(", ")+")")).join(", "))}))})).always((()=>{i=!0,t.resolve(void 0),n.then((e=>r.default.release(e,"Notifications:msg"))).catch(o.noop)}))})).always((()=>{i||(i=!0,t.resolve(void 0))}))}))}startup(){return this._subscriptions.push(l.LocalNotifications.localNotificationEventReceivedLogMessageEvent.subscribe((e=>{N.log(k.LogTraceArea.Notifications,"LocalNotifications "+e)}))),this._subscriptions.push(m.default.CallingStore.participantUpdatedEvent().subscribe(this._processIncomingVideoAvailableNotification)),this._subscriptions.push(m.default.CallingStore.callEndedEvent().subscribe(this._onCallEndedEvent)),this._applyConfigurationToLocalNotifications(),z.default.event_localNotificationQueueChanged.subscribe((()=>{this._drainLocalNotificationQueue()})),this._drainLocalNotificationQueue(),u.Resolved()}destroy(){const e=this._subscriptions;this._subscriptions=[],o.each(e,(e=>e.unsubscribe()))}flushNotificationProcessingPromises(){const e=this._notificationPromises;return this._notificationPromises=[],u.all(e).then(o.noop)}_applyConfigurationToLocalNotifications(){{const e=()=>{let e;e={Web:{MultiTabNotifications:h.default.getS4LMessagingFeatures().browserMultiTabNotifications}},l.LocalNotifications.setConfig(e)};h.default.subscribe(e),e()}}processDelayedCallNotification(e){this._callDelayedNotificationProcessingId&&l.LocalNotifications.notificationProcessingCompleted(this._callDelayedNotificationProcessingId),this._callDelayedNotificationProcessingId=e}_drainLocalNotificationQueue(){(0,re.isForceUpdateEnabled)()||o.each(z.default.fetchAndDrainLocalNotificationQueue(),(e=>{this._handleLocalNotificationEventReceived(e.notification,e.causeId)}))}_handleLocalNotificationEventReceived(e,t){var i,s;let d;oe.default.startedProcessingLocalNotification(e.category);let u,S=!1,_="Received local notification event: ";_=_+"(category:"+e.category+" identifier: "+e.identifier+")",_=_+" causeId: "+t,N.log(k.LogTraceArea.Notifications,_);h.default.getS4LMessagingFeaturesNoSubscription().enableAndroidExpandedNotifications;if(e.category===K.LocalNotificationIds.CALL_CATEGORY_IDENTIFIER){const i=e.serviceSpecificData,o=i?i.conversationMri:void 0,s=i?i.callId:void 0;if(s&&o){if(this._callDelayedNotificationProcessingId)if(c.App.getActivationState()===c.Types.AppActivationState.Active)l.LocalNotifications.notificationProcessingCompleted(this._callDelayedNotificationProcessingId),this._callDelayedNotificationProcessingId=void 0,N.log(k.LogTraceArea.Notifications,"delayed finish processing completed causeId: "+t);else{let e=g.default.subscribeForChanges("LocalNotificationsService",(i=>{i===c.Types.AppActivationState.Active&&(e.unsubscribe(),this._callDelayedNotificationProcessingId&&l.LocalNotifications.notificationProcessingCompleted(this._callDelayedNotificationProcessingId),this._callDelayedNotificationProcessingId=void 0,N.log(k.LogTraceArea.Notifications,"delayed finish processing completed causeId: "+t))}))}switch(e.identifier){case K.LocalNotificationIds.CALL_ACTION_ACCEPT_IDENTIFIER:d=k.AppEntryPoint.CallNotification,N.log(k.LogTraceArea.Notifications,"Auto-answering call "+s+" for conversation "+J.mriOrId(o)+" from notification causeId: "+t),(0,M.setIntent)(M.Intent.Call),m.default.CallNavigationHelper.answerOrJoinCall({conversationMri:o,callId:s,knownToBeAnswer:!0,origin:k.NavigationCallOrigin.LocalNotificationAction},t);break;case K.LocalNotificationIds.CALL_ACTION_REJECT_IDENTIFIER:m.default.CallingStore.rejectCall(s,t);break;case K.LocalNotificationIds.CALL_ACTION_DEFAULT:e.isKeyguardOn&&m.default.CallingStore.callDidExist(s)&&a.default.reEnableKeyguardIfSet(!0).catch((e=>{N.warn(k.LogTraceArea.Notifications,"reEnableKeyguardIfSet failed: "+se.default.errorAsString(e))}));break;default:N.error(k.LogTraceArea.Notifications,"Unexpected event: "+e.identifier+" causeId: "+t)}}else N.error(k.LogTraceArea.Notifications,"callId not found causeId: "+t+" "+n.pii.Omit(JSON.stringify(e)))}else if(e.category===K.LocalNotificationIds.MISSED_CALL_CATEGORY_IDENTIFIER){const i=e.serviceSpecificData,o=i?i.conversationMri:void 0;if(o)switch(e.identifier){case K.LocalNotificationIds.MISSED_CALL_BACK_IDENTIFIER:d=k.AppEntryPoint.CallNotification,N.log(k.LogTraceArea.Notifications,"Initiating new call in response to missed in conversation "+J.mriOrId(o)+" causeId: "+t),(0,M.setIntent)(M.Intent.Call),m.default.CallNavigationHelper.startCall({conversationMri:o,withVideo:!1,origin:k.NavigationCallOrigin.LocalNotificationAction},t);break;case K.LocalNotificationIds.MISSED_CALL_DEFAULT:N.track(new j.NotificationAppLaunched(k.NotificationTypeAppLaunched.MissedCall,o)),d=k.AppEntryPoint.CallNotification,N.log(k.LogTraceArea.Notifications,"MISSED_CALL_DEFAULT, navigateToConversation "+J.mriOrId(o)+", causeId: "+t),(0,M.setIntent)(M.Intent.Chat),W.default.navigateToConversationOrScheduleNavigationOnLaunch({convId:o,origin:k.NavigationConversationOrigin.SystemNotificationMissedCall,causeId:t});break;default:N.error(k.LogTraceArea.Notifications,"Unexpected event: "+e.identifier+" causeId: "+t)}else N.error(k.LogTraceArea.Notifications,"conversationId not found for MISSED_CALL_CATEGORY_IDENTIFIER causeId: "+t+" "+n.pii.Omit(JSON.stringify(e)))}else if(e.category===K.LocalNotificationIds.MISSED_P2P_CALL_CATEGORY_IDENTIFIER){const i=e.serviceSpecificData,o=i?i.conversationMri:null;o?(d=k.AppEntryPoint.CallNotification,N.log(k.LogTraceArea.Notifications,"MISSED_P2P_CALL_CATEGORY_IDENTIFIER, navigateToConversation "+J.mriOrId(o)+", causeId: "+t),(0,M.setIntent)(M.Intent.Chat),W.default.navigateToConversationOrScheduleNavigationOnLaunch({convId:o,origin:k.NavigationConversationOrigin.SystemNotificationMissedP2PCall,causeId:t})):N.error(k.LogTraceArea.Notifications,"conversationId not found for MISSED_P2P_CALL_CATEGORY_IDENTIFIER causeId: "+t+" "+n.pii.Omit(JSON.stringify(e)))}else if(e.category===K.LocalNotificationIds.GO_LIVE_CATEGORY_IDENTIFIER){const i=e.serviceSpecificData,n=i?i.conversationMri:void 0,o=i?i.callId:void 0;if(n&&o)switch(e.identifier){case K.LocalNotificationIds.GO_LIVE_ACTION_DEFAULT:N.track(new j.NotificationAppLaunched(k.NotificationTypeAppLaunched.GoLive,n)),N.log(k.LogTraceArea.Notifications,"Navigating to conversation from go live notification causeId: "+t),(0,M.setIntent)(M.Intent.Chat),W.default.navigateToConversationOrScheduleNavigationOnLaunch({convId:n,origin:k.NavigationConversationOrigin.GoLiveNotification,causeId:t});break;case K.LocalNotificationIds.GO_LIVE_ACTION_JOIN_IDENTIFIER:N.track(new F.MessagingToastQuickActionEvent(F.MessagingToastQuickAction.JoinCall,n)),(0,M.setIntent)(M.Intent.Call),N.log(k.LogTraceArea.Notifications,"Joining golive from notifications causeId: "+t),m.default.CallPreviewUtils.answerOrJoinCall({conversationMri:n,callId:o,origin:k.NavigationCallOrigin.LocalNotificationAction,isGoLive:!0,optionalLiveState:i.conversationLiveState},t)}else N.warn(k.LogTraceArea.Notifications,"Ignoring go-live notification missing call and/or conversation id"+JSON.stringify(i))}else if(e.category===K.LocalNotificationIds.CALLBACK_REMINDER_CATEGORY_IDENTIFIER){const i=e.serviceSpecificData,n=i?i.calleeMri:void 0;let o=C.CallbackReminderTappedAction.None;if(n)switch(e.identifier){case K.LocalNotificationIds.CALLBACK_REMINDER_ACTION_DEFAULT:N.track(new j.NotificationAppLaunched(k.NotificationTypeAppLaunched.CallbackReminder,n)),N.log(k.LogTraceArea.Notifications,"Navigating to conversation from callback reminder causeId: "+t),(0,M.setIntent)(M.Intent.Chat),o=C.CallbackReminderTappedAction.Navigate,W.default.navigateToConversationOrScheduleNavigationOnLaunch({convId:n,origin:k.NavigationConversationOrigin.GoLiveNotification,causeId:t});break;case K.LocalNotificationIds.CALLBACK_REMINDER_ACTION_CALL_IDENTIFIER:(0,M.setIntent)(M.Intent.Call),N.log(k.LogTraceArea.Notifications,"Callback action from callback reminder causeId: "+t),o=C.CallbackReminderTappedAction.Call,m.default.CallNavigationHelper.startCall({conversationMri:n,withVideo:!1,origin:k.NavigationCallOrigin.LocalNotificationAction},t)}N.track(new C.CallbackReminderTappedEvent(o,i?i.missedCallTime:0,i?i.notificationPresentedTime:0))}else if(e.category===K.LocalNotificationIds.SCHEDULED_CALL_INVITE||e.category===K.LocalNotificationIds.SCHEDULED_CALL_INVITE_RESPONSE){const i=e.serviceSpecificData,n=i?i.scheduledCallId:void 0,o=i?i.conversationId:void 0,s=i?i.messageTimestamp:void 0;let a="";if(o){switch(e.identifier){case K.LocalNotificationIds.SCHEDULED_CALL_INVITE_ACCEPT:n&&ne.EnsureStarted(Z.default).then((()=>{N.track(new F.MessagingToastQuickActionEvent(F.MessagingToastQuickAction.AcceptScheduledCall,o)),Z.default.acceptInvitation(n),N.track(new $.ScheduledCallRSVPEvent(Y.ScheduleCallRSVPEntryPoint.Notification,Y.ScheduledCallInvitationStatus.Accepted,o,n))})),a="SCHEDULED_CALL_INVITE_ACCEPT";break;case K.LocalNotificationIds.SCHEDULED_CALL_INVITE_DECLINE:n&&ne.EnsureStarted(Z.default).then((()=>{N.track(new F.MessagingToastQuickActionEvent(F.MessagingToastQuickAction.DeclineScheduledCall,o)),Z.default.declineInvitation(n),N.track(new $.ScheduledCallRSVPEvent(Y.ScheduleCallRSVPEntryPoint.Notification,Y.ScheduledCallInvitationStatus.Declined,o,n))})),a="SCHEDULED_CALL_INVITE_DECLINE";break;case K.LocalNotificationIds.CHAT_ACTION_REPLY_IDENTIFIER:e.textInputValue&&(u=this._sendRawMessage(o,e.textInputValue)),a="CHAT_ACTION_REPLY_IDENTIFIER";break;case K.LocalNotificationIds.ACTION_DEFAULT:a="ACTION_DEFAULT"}d=k.AppEntryPoint.ChatNotification,N.log(k.LogTraceArea.Notifications,a+", navigateToConversation "+J.mriOrId(o)+", causeId: "+t+", scheduledCallId: "+n),this._navigateToConversation(o,t,k.NavigationConversationOrigin.SystemNotificationScheduledCall,s)}}else if(e.category===K.LocalNotificationIds.CHAT_CATEGORY_IDENTIFIER||e.category===K.LocalNotificationIds.E2EE_CATEGORY_IDENTIFIER){const n=e.serviceSpecificData,o=n?n.conversationId:void 0,a=n?n.messageTimestamp:void 0,r=n?n.consumptionHorizon:void 0;switch(e.identifier){case K.LocalNotificationIds.CHAT_ACTION_THUMBSUP_IDENTIFIER:if(o){const e=new w.UnhandledEntity("(y)");u=O.sendRawMessageFromEntities(o,[e]),N.track(new F.MessagingToastQuickActionEvent(F.MessagingToastQuickAction.ThumbsUp,o))}break;case K.LocalNotificationIds.CHAT_ACTION_REPLY_IDENTIFIER:o&&(e.textInputValue?(u=this._sendRawMessage(o,e.textInputValue),S=!0):(d=k.AppEntryPoint.ChatNotification,N.log(k.LogTraceArea.Notifications,"CHAT_ACTION_REPLY_IDENTIFIER, navigateToConversation "+J.mriOrId(o)+", causeId: "+t),this._navigateToConversation(o,t,k.NavigationConversationOrigin.SystemNotificationChatReply,a)));break;case K.LocalNotificationIds.CHAT_ACTION_MARK_AS_READ_IDENTIFIER:o&&r&&(N.track(new F.MessagingToastQuickActionEvent(F.MessagingToastQuickAction.MarkAsRead,o)),y.default.setConsumptionHorizon(o,r));break;case K.LocalNotificationIds.ACTION_DEFAULT:if(o){d=k.AppEntryPoint.ChatNotification;const s=null!==(i=e.notificationFromBubble)&&void 0!==i&&i;n.eventType&&N.track(new j.NotificationAppLaunched(n.eventType,o,s)),N.log(k.LogTraceArea.Notifications,"CHAT_ACTION_DEFAULT, navigateToConversation "+J.mriOrId(o)+", isFromBubble: "+s+", causeId: "+t),(0,M.setIntent)(M.Intent.Chat),W.default.navigateToConversationOrScheduleNavigationOnLaunch({convId:o,scrollToTimestamp:a,origin:k.NavigationConversationOrigin.SystemNotification,causeId:t,isFromConversationBubble:s})}else(0,M.setIntent)(M.Intent.Recents);break;case K.LocalNotificationIds.DELETE_IDENTIFIER:N.log(k.LogTraceArea.Notifications,"CHAT_ACTION_DELETE, conversationId: "+(o||"")+", causeId "+t);break;default:s=e.clearNotificationBubbleContext;0}0}else if(e.category===K.LocalNotificationIds.INBOUND_VIDEO_CALL_IDENTIFIER){const i=e.serviceSpecificData&&e.serviceSpecificData.callId,n=e.serviceSpecificData&&e.serviceSpecificData.origin;o.isUndefined(i)||ee.default.performAfterUIStarted((()=>{f.default.trackIncomingVideoNotification(!0,i,n),m.default.CallControlsStore.startVideo(i,t,!0)}))}else if(e.category===K.LocalNotificationIds.SCHEDULED_CALL_REMINDER||e.category===K.LocalNotificationIds.SCHEDULED_CALL_PREREMINDER||e.category===K.LocalNotificationIds.POLL_REMINDER||e.category===K.LocalNotificationIds.POLL_PREREMINDER){c.App.getActivationState()!==c.Types.AppActivationState.Background||((0,M.setIntent)(M.Intent.Chat),ee.default.performAfterUIStarted((()=>{const i=e.serviceSpecificData,n=i?i.conversationId:void 0,o=i?i.messageTimestamp:void 0;if(n){const t=e.category===K.LocalNotificationIds.SCHEDULED_CALL_REMINDER||e.category===K.LocalNotificationIds.SCHEDULED_CALL_PREREMINDER?k.NotificationTypeAppLaunched.ScheduledCallInvite:k.NotificationTypeAppLaunched.Poll;N.track(new j.NotificationAppLaunched(t,n))}W.default.navigateToConversationOrScheduleNavigationOnLaunch({convId:n,scrollToTimestamp:o,origin:k.NavigationConversationOrigin.SystemNotification,causeId:t})})))}else if(e.category===K.LocalNotificationIds.AUTH_BACKGROUND_REFRESH_CATEGORY_IDENTIFIER)u=p.default.fireBackgroundRefreshTask();else if(e.category===K.LocalNotificationIds.PRESENCE_CHANGE_IDENTIFIER){const i=e.serviceSpecificData,n=i?i.conversationId:void 0;n&&(d=k.AppEntryPoint.ChatNotification,i.eventType&&N.track(new j.NotificationAppLaunched(i.eventType,n)),N.track(new Q.PresenceChangeNotificationClicked),N.log(k.LogTraceArea.Notifications,"CHAT_ACTION_DEFAULT, navigateToConversation "+J.mriOrId(n)+", causeId: "+t),(0,M.setIntent)(M.Intent.Chat),W.default.navigateToConversationOrScheduleNavigationOnLaunch({convId:n,origin:k.NavigationConversationOrigin.PresenceChangeNotification,causeId:t}))}e.notificationProcessingId&&(N.log(k.LogTraceArea.Notifications,"_handleLocalNotificationEventReceived with a promise: "+!!u),u?u.always((t=>{N.log(k.LogTraceArea.Notifications,"_handleLocalNotificationEventReceived resolved or rejected. CMID: "+t),l.LocalNotifications.notificationProcessingCompleted(e.notificationProcessingId)})):l.LocalNotifications.notificationProcessingCompleted(e.notificationProcessingId)),d&&x.trackEntryPoint(d),S||H.default.isUsingSplitViewNoSubscription()||window.focus(),e.wakeLockId&&r.default.release(e.wakeLockId,"Notifications:quickreply")}_sendRawMessage(e,t){return N.track(new F.MessagingToastQuickActionEvent(F.MessagingToastQuickAction.InlineReply,e)),O.sendRawMessage(e,t)}_navigateToConversation(e,t,i,n){(0,M.setIntent)(M.Intent.Chat),W.default.navigateToConversationOrScheduleNavigationOnLaunch({convId:e,scrollToTimestamp:n,shouldAutoFocusInput:!0,origin:i,causeId:t})}_processMessageInfoForNotifications(e){return this._startMessageNotificationsService().then((()=>B.default.processMessageInfoForNotifications(e)))}_startMessageNotificationsService(){return ne.EnsureStartedOnly(B.default,[q.default,V.default])}_generateMissedCallMessageHelper(e,t,i,n){t&&b.isMri(t)||(t=e);const o=e=>e?T.default.getDisplayableProfilePotentiallyBeforeStartupAsync(e):u.Resolved(void 0);return u.all([o(e),o(t)]).then((([e,n])=>{const o=G.getNotificationIcon(e,n),s=e?e.getDisplayName():D.getString("Notifications.IncomingCallUnknownCaller");let a,r;if(!t||b.isOneOnOneConversation(t)){let e;a=s,e=t&&b.isEncryptedThread(t)?i?"Notifications.MissedCallMessageEncryptedOneOnOnePermissionRejected":"Notifications.MissedCallMessageEncryptedOneOnOne":i?"Notifications.MissedCallMessageOneOnOnePermissionRejected":"Notifications.MissedCallMessageOneOnOne",r=D.getString(e,{caller:s,emoji:P.getEmojiSupport()})}else{const e=n?n.getDisplayName():D.getString("Notifications.UnknownGroupConversation");a=e,r=D.getString(i?"Notifications.MissedCallMessageGroupPermissionRejected":"Notifications.MissedCallMessageGroup",{caller:s,group:e})}return{message:r,title:a,notificationIcon:o}}))}_shouldDisableCallNotification(){return(0,re.isForceUpdateEnabled)()}displayMissedP2PCallNotification(e,t){return this._shouldDisableCallNotification()?u.Resolved():(N.log(k.LogTraceArea.Notifications,"displayMissedP2PCallNotification: Received P2P call for callId: "+e.callId+" callerMri:"+J.mriOrId(e.callerMri||"")+" conversationMri:  "+J.mriOrId(e.conversationMri||"")+" participantId: "+e.participantId+" causeId: "+t),this._generateMissedCallMessageHelper(e.callerMri,e.conversationMri,!1,t).then((t=>{l.LocalNotifications.show({category:K.LocalNotificationIds.MISSED_P2P_CALL_CATEGORY_IDENTIFIER,title:t.title,message:t.message,serviceSpecificData:K.prepareDataForNotification(e),icon:t.notificationIcon,id:e.participantId})})))}displayMissedCallNotification(e,t){return this._shouldDisableCallNotification()?u.Resolved():(N.log(k.LogTraceArea.Notifications,"displayMissedCallNotification: Received stop ring for "+e.callId+" with reason "+e.reason+" causeId: "+t),this.clearCallNotifications(e.callId,e.participantId),G.isCallerAllowed(e.callerMri,!1,t).then((i=>{if(i===k.PersonAllowed.Allowed)return A.isDisabledCallNotification().then((i=>i?(N.log(k.LogTraceArea.Notifications,"displayMissedCallNotification: DoNotDisturb Suppressing notification  callId: "+e.callId+" causeId: "+t),u.Resolved()):"NoAnswer"===e.reason||"NoAnswerCallerCancelled"===e.reason||"RejectedDueToNoMicPermission"===e.reason?this._generateMissedCallMessageHelper(e.callerMri,e.conversationMri,"RejectedDueToNoMicPermission"===e.reason,t).then((t=>{l.LocalNotifications.show({category:K.LocalNotificationIds.MISSED_CALL_CATEGORY_IDENTIFIER,title:t.title,message:t.message,serviceSpecificData:K.prepareDataForNotification(e),icon:t.notificationIcon,id:e.participantId})})):void 0));N.log(k.LogTraceArea.Notifications,"displayMissedCallNotification: Suppressing notification for "+e.callId+" - caller "+J.mriOrId(e.callerMri)+" allowed: "+i+", causeId: "+t)})))}clearCallNotifications(e,t){t&&l.LocalNotifications.cancel({id:t}),l.LocalNotifications.cancel({id:e})}}},99201:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(31844),s=i(97691),a=i(46096),r=i(36237),l=i(4057);i(60305);t.default=new class{constructor(){this._orientationList=[]}addOrUpdateOrientationLock(e,t,i=!1){return s.Resolved(void 0)}addOrUpdateOrientationLockNoTabletCheck(e,t){return s.Resolved(void 0)}removeOrientationLock(e){const t=n.findIndex(this._orientationList,(t=>t.key===e));-1!==t&&(r.log(a.LogTraceArea.GenericUnsafe,"MobileOrientationLockManager: Popping orientation entry for "+e),this._orientationList.splice(t,1),this._updateOrientationLock())}_addOrientationListEntry(e){const t=n.findIndex(this._orientationList,(t=>t.key===e.key));-1!==t?(this._orientationList[t]=e,r.log(a.LogTraceArea.GenericUnsafe,"MobileOrientationLockManager: Modified old orientation entry - "+e.key)):(r.log(a.LogTraceArea.GenericUnsafe,"MobileOrientationLockManager: Pushed new orientation entry - "+e.key),this._orientationList.push(e))}_updateOrientationLock(){const e=n.last(this._orientationList);return e&&e.orientation!==o.DeviceOrientation.Unlocked?(r.log(a.LogTraceArea.GenericUnsafe,"MobileOrientationLockManager: lock orientation "+e.orientation),o.default.lockOrientation(e.orientation).then(n.noop,(e=>{r.warn(a.LogTraceArea.GenericUnsafe,"MobileOrientationLockManager lockOrientation failed: "+l.default.errorAsString(e))}))):(r.log(a.LogTraceArea.GenericUnsafe,"MobileOrientationLockManager: unlocking orientation"),o.default.unlockOrientation().then(n.noop,(e=>{r.warn(a.LogTraceArea.GenericUnsafe,"MobileOrientationLockManager unlockOrientation failed: "+l.default.errorAsString(e))})))}}},88553:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(2604),s=i(26999),a=i(97691),r=i(46096),l=i(36237),c=i(4329),d=i(78735),u=(i(18078),i(14138)),g=i(28355),h=i(81736),p=i(76173),m=i(83181),S=i(16568),C=i(22538),f=(i(4057),i(78262)),y=(i(27795),i(49682)),_=i(53374);t.default=new class{constructor(){this._showNotificationPermissionStatus=o.PermissionStatus.Unknown,C.RegisterStartupable(this,"NotificationPermissionService",[d.default,h.default,S.default,y.default]),c.default.registerForLogout(this,"NotificationPermissionService")}startup(){if(h.default.permissionStatus(f.PermissionType.Notifications)===o.PermissionStatus.Granted||this._wasPromptedForPermissionInSetup()){Date.now();this.initNotificationsAndRequestPermissions().then((()=>{0}),(e=>{0}))}else{l.log(r.LogTraceArea.Push,"Deferring notification init until initial permission prompt");const e=d.default.subscribe((()=>{this._wasPromptedForPermissionInSetup()&&(l.log(r.LogTraceArea.Push,"Notification init continuing - initial permission prompt complete"),this.initNotificationsAndRequestPermissions(),d.default.unsubscribe(e))}))}return a.Resolved()}logout(e,t,i){return u.default.unsubscribeFromAllNotifications()}getShowNotificationPermissionStatus(){return this._showNotificationPermissionStatus}initNotificationsAndRequestPermissions(){if(this._showNotificationPermissionStatus!==o.PermissionStatus.Unknown){const e=this._showNotificationPermissionStatus===o.PermissionStatus.Granted;return l.log(r.LogTraceArea.Push,"Notification init called with known permission state: "+o.PermissionStatus[this._showNotificationPermissionStatus]),a.Resolved(e)}if(this._notificationPermissionPromise)return l.log(r.LogTraceArea.Push,"Notification init called and awaiting permissions"),this._notificationPermissionPromise;const e=_.default.newCauseId();return l.log(r.LogTraceArea.Push,"initializeNotification causeId: "+e),this._notificationPermissionPromise=this._initializePushNotificationsAndRequestPushPermissions().then((t=>u.default.initializeLocalNotifications().then((i=>{l.log(r.LogTraceArea.Push,"Notification permission grant status: PUSH: "+t+" LOCAL: "+i+", causeId: "+e),this._showNotificationPermissionStatus=t&&i?o.PermissionStatus.Granted:o.PermissionStatus.Denied;const n=h.default.subscribe((()=>{h.default.permissionStatus(f.PermissionType.Notifications)===o.PermissionStatus.Granted&&(l.log(r.LogTraceArea.Push,"Notification permission granted due to PermissionsStore update"),this._showNotificationPermissionStatus=o.PermissionStatus.Granted,h.default.unsubscribe(n))}));return t&&i})))),this._notificationPermissionPromise.finally((()=>{this._notificationPermissionPromise=void 0}))}_wasPromptedForPermissionInSetup(){const e=d.default.getUserPreferencesLocal();return!!e.wasPromptedAboutPermissions||!!e.isSetupWizardCompleted}_initializePushNotificationsAndRequestPushPermissions(){const e=m.default.isLoginSession();return(e?s.PushNotifications.clearUnacknowledgedNotifications():s.PushNotifications.getUnacknowledgedNotifications()).then((t=>{const i=_.default.newCauseId();t&&0!==t.length?(l.log(r.LogTraceArea.Push,"Found "+t.length+" unacknowledged notifications causeId: "+i),n.each(t,(t=>{const n=t.serviceSpecificData;if(!n)return void l.error(r.LogTraceArea.Push,"Push notification serviceSpecificData was missing causeId: "+i);const o=n.data||n,a=o&&o.eventType?Number(o.eventType):p.PNHEvents.IncomingUnknown;l.log(r.LogTraceArea.Push,"Logging not processed notification of type "+a+" causeId: "+i),l.track(new g.NotificationNotProcessedEvent(a,!e,t.receivedTimeMs,S.default.CallingNodeId.get())),e||s.PushNotifications.acknowledgeNotificationReceived(t),u.default.addPushNotificationToQueue(t,i)})),u.default.event_pushNotificationQueueChanged.fire()):l.log(r.LogTraceArea.Push,"No unacknowledged notifications found causeId: "+i)})),u.default.initializePushNotifications()}test_reset(){this._showNotificationPermissionStatus=o.PermissionStatus.Unknown,this._notificationPermissionPromise=void 0}}},14138:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(97792),s=i(26999),a=i(74634),r=i(97691),l=i(89391),c=i(46096),d=i(36237),u=i(33754),g=i(33326),h=i(22538),p=i(4057),m=i(40363),S=i(47202),C=i(49682),f=i(47447),y=i(53374);t.default=new class{constructor(){this._pushNotificationQueue=[],this.event_pushNotificationQueueChanged=new a.default,this._localNotificationQueue=[],this.event_localNotificationQueueChanged=new a.default,this._localEngagementNotificationQueue=[],this.event_localEngagementNotificationQueueChanged=new a.default,this._trouterNotificationQueue=[],this.event_trouterNotificationQueueChanged=new a.default,this._subscriptions=[],h.RegisterStartupable(this,"NotificationQueueService")}startup(){this._clearSubscriptions(),this._pushNotificationQueue=[],this._localNotificationQueue=[],this._localEngagementNotificationQueue=[],this._subscriptions.push(s.PushNotifications.notificationReceivedEvent.subscribe((e=>{this._receivedPushNotifications([e])})));const e=s.PushNotifications.drainInitialNotificationQueue();e.length&&this._receivedPushNotifications(e),this._subscriptions.push(s.LocalNotifications.localNotificationEventReceivedEvent.subscribe((e=>{this._receivedLocalNotifications([e])})));const t=s.LocalNotifications.drainInitialNotificationQueue();return t.length&&this._receivedLocalNotifications(t),this._subscriptions.push(C.default.messageReceived.subscribe((e=>{this._receivedTrouterNotifications([e])}))),r.Resolved()}_clearSubscriptions(){const e=this._subscriptions;this._subscriptions=[],n.each(e,(e=>e.unsubscribe()))}unsubscribeFromAllNotifications(){if(this._clearSubscriptions(),this._appConfigStoreSubscription){const e=this._appConfigStoreSubscription;this._appConfigStoreSubscription=void 0,l.default.unsubscribe(e)}return s.LocalNotifications.uninitialize(),s.PushNotifications.uninitialize().always(n.noop)}addPushNotificationToQueue(e,t){this._pushNotificationQueue.push({notification:e,causeId:t})}hasQueuedPushes(){return this._pushNotificationQueue.length>0}getPushNotificationQueue(){return n.clone(this._pushNotificationQueue)}confirmPushNotificationProcessed(e){this._pushNotificationQueue=n.filter(this._pushNotificationQueue,(t=>t.notification!==e)),s.PushNotifications.acknowledgeNotificationReceived(e)}hasQueuedLocalNotifications(){return this._localNotificationQueue.length>0}fetchAndDrainLocalNotificationQueue(){const e=this._localNotificationQueue;return this._localNotificationQueue=[],e}fetchAndDrainLocalEngagementNotificationQueue(){const e=this._localEngagementNotificationQueue;return this._localEngagementNotificationQueue=[],e}hasQueuedTrouterNotifications(){return this._trouterNotificationQueue.length>0}fetchAndDrainTrouterNotificationQueue(){const e=this._trouterNotificationQueue;return this._trouterNotificationQueue=[],e}handleLocalNoticationAction(e){return o.default.requestMaxTime("Notifications:quickreply").then((t=>{const i=Object.assign(Object.assign({},e),{wakeLockId:t});this._receivedLocalNotifications([i])})).catch((e=>{d.error(c.LogTraceArea.Push,"_handleLocalNoticationAction, Failed to get wakelock - "+(e?p.default.errorAsString(e):""))})).always((()=>{}))}initializePushNotifications(){const e={categories:this._getSupportedLocalNotificationCategories(),enableAlertNotifications:f.UICapabilities.alertNotificationEnabled(),dismissNotificationForReadMessages:l.default.getS4LNativePlatformsEcsConfig().dismissNotificationForReadMessages};return s.PushNotifications.initialize(e)}initializeLocalNotifications(){const e={categories:this._getSupportedLocalNotificationCategories()};return s.LocalNotifications.initialize(e)}_receivedPushNotifications(e){const t=y.default.newCauseId();d.log(c.LogTraceArea.Push,"notificationReceivedEvent causeId: "+t),this._pushNotificationQueue.push(...n.map(e,(e=>({notification:e,causeId:t})))),this.event_pushNotificationQueueChanged.fire()}_receivedLocalNotifications(e){const t=y.default.newCauseId();d.log(c.LogTraceArea.Notifications,"localNotificationEventReceivedEvent causeId: "+t);const i=n.partition(e,(e=>e.category===S.TPUM_CATEGORY_IDENTIFIER||e.category===g.LocalNotificationIds.SIGNIN_REMINDER_IDENTIFIER||e.category===g.LocalNotificationIds.SIGNOUT_REMINDER_IDENTIFIER));i[0].length&&(this._localEngagementNotificationQueue.push(...n.map(e,(e=>({notification:e,causeId:t})))),this.event_localEngagementNotificationQueueChanged.fire()),i[1].length&&(this._localNotificationQueue.push(...n.map(e,(e=>({notification:e,causeId:t})))),this.event_localNotificationQueueChanged.fire())}_receivedTrouterNotifications(e){const t=y.default.newCauseId();d.log(c.LogTraceArea.Notifications,"trouterNotificationReceivedEvent causeId: "+t),this._trouterNotificationQueue.push(...n.map(e,(e=>({notification:e,causeId:t})))),this.event_trouterNotificationQueueChanged.fire()}_getSupportedLocalNotificationCategories(){let e=[];const t={title:u.getString("LocalNotificationCallCategory.AcceptEventTitle"),identifier:g.LocalNotificationIds.CALL_ACTION_ACCEPT_IDENTIFIER,activationMode:s.NotificationActionActivationMode.Foreground,icon:g.LocalNotificationIds.CALL_ACTION_ACCEPT_ICON},i={title:u.getString("LocalNotificationCallCategory.RejectEventTitle"),identifier:g.LocalNotificationIds.CALL_ACTION_REJECT_IDENTIFIER,activationMode:s.NotificationActionActivationMode.Background,icon:g.LocalNotificationIds.CALL_ACTION_REJECT_ICON};e.push({identifier:g.LocalNotificationIds.CALL_CATEGORY_IDENTIFIER,context:s.NotificationCategoryContext.Minimal,actions:[t,i]});const n={title:u.getString("LocalNotificationGoLiveCategory.JoinEventTitle"),identifier:g.LocalNotificationIds.GO_LIVE_ACTION_JOIN_IDENTIFIER,activationMode:s.NotificationActionActivationMode.Foreground};e.push({identifier:g.LocalNotificationIds.GO_LIVE_CATEGORY_IDENTIFIER,context:s.NotificationCategoryContext.Minimal,actions:[n]});const o={title:u.getString("LocalNotificationCallCategory.CallBackEventTitle"),identifier:g.LocalNotificationIds.CALLBACK_REMINDER_ACTION_CALL_IDENTIFIER,activationMode:s.NotificationActionActivationMode.Foreground};e.push({identifier:g.LocalNotificationIds.CALLBACK_REMINDER_CATEGORY_IDENTIFIER,context:s.NotificationCategoryContext.Minimal,actions:[o]});const a={title:u.getString("LocalNotificationChatCategory.ThumbsUp"),identifier:g.LocalNotificationIds.CHAT_ACTION_THUMBSUP_IDENTIFIER,activationMode:s.NotificationActionActivationMode.Background,icon:g.LocalNotificationIds.CHAT_ACTION_THUMBSUP_ICON};let r;r=m.default.getPlatformType()===c.PlatformType.Android?m.default.getAndroidOSVersionCode()>=24?{title:u.getString("LocalNotificationChatCategory.Reply"),identifier:g.LocalNotificationIds.CHAT_ACTION_REPLY_IDENTIFIER,activationMode:s.NotificationActionActivationMode.Background,behavior:s.NotificationActionBehavior.TextInput,textInputLabel:u.getString("LocalNotificationChatCategory.SendButton"),icon:g.LocalNotificationIds.CHAT_ACTION_REPLY_ICON}:{title:u.getString("LocalNotificationChatCategory.Reply"),identifier:g.LocalNotificationIds.CHAT_ACTION_REPLY_IDENTIFIER,activationMode:s.NotificationActionActivationMode.Foreground,icon:g.LocalNotificationIds.CHAT_ACTION_REPLY_ICON}:{title:u.getString("LocalNotificationChatCategory.Reply"),identifier:g.LocalNotificationIds.CHAT_ACTION_REPLY_IDENTIFIER,activationMode:s.NotificationActionActivationMode.Background,behavior:s.NotificationActionBehavior.TextInput,textInputLabel:u.getString("LocalNotificationChatCategory.SendButton"),icon:g.LocalNotificationIds.CHAT_ACTION_REPLY_ICON};const d=[a,r],h=l.default.getS4LMessagingFeaturesNoSubscription().enableMarkAsReadNotificationAction;if(h||m.default.getPlatformType()===c.PlatformType.Android){let e={title:u.getString("LocalNotificationChatCategory.MarkAsRead"),identifier:g.LocalNotificationIds.CHAT_ACTION_MARK_AS_READ_IDENTIFIER,activationMode:s.NotificationActionActivationMode.Background,behavior:s.NotificationActionBehavior.Default,isForCarOnly:!h};d.push(e)}e.push({identifier:g.LocalNotificationIds.CHAT_CATEGORY_IDENTIFIER,context:s.NotificationCategoryContext.Minimal,actions:d});const p={title:u.getString("LocalNotificationCallCategory.CallBackEventTitle"),identifier:g.LocalNotificationIds.MISSED_CALL_BACK_IDENTIFIER,activationMode:s.NotificationActionActivationMode.Foreground};e.push({identifier:g.LocalNotificationIds.MISSED_CALL_CATEGORY_IDENTIFIER,context:s.NotificationCategoryContext.Minimal,actions:[p]}),e.push({identifier:g.LocalNotificationIds.MISSED_P2P_CALL_CATEGORY_IDENTIFIER,context:s.NotificationCategoryContext.Minimal,actions:[]}),e.push({identifier:S.TPUM_CATEGORY_IDENTIFIER,context:s.NotificationCategoryContext.Minimal,actions:[]}),e.push({identifier:g.LocalNotificationIds.E2EE_CATEGORY_IDENTIFIER,context:s.NotificationCategoryContext.Minimal,actions:[]}),e.push({identifier:g.LocalNotificationIds.INBOUND_VIDEO_CALL_IDENTIFIER,context:s.NotificationCategoryContext.Minimal,actions:[]}),e.push({identifier:g.LocalNotificationIds.LOGOUT_REMINDER_IDENTIFIER,context:s.NotificationCategoryContext.Minimal,actions:[]});const C={title:u.getString("ScheduledCallCard.AcceptButton"),identifier:g.LocalNotificationIds.SCHEDULED_CALL_INVITE_ACCEPT,activationMode:s.NotificationActionActivationMode.Background},f={title:u.getString("ScheduledCallCard.DeclineButton"),identifier:g.LocalNotificationIds.SCHEDULED_CALL_INVITE_DECLINE,activationMode:s.NotificationActionActivationMode.Background};return e.push({identifier:g.LocalNotificationIds.SCHEDULED_CALL_INVITE,context:s.NotificationCategoryContext.Minimal,actions:[C,f,r]}),e.push({identifier:g.LocalNotificationIds.SCHEDULED_CALL_INVITE_EDIT,context:s.NotificationCategoryContext.Minimal,actions:[]}),e.push({identifier:g.LocalNotificationIds.SCHEDULED_CALL_INVITE_RESPONSE,context:s.NotificationCategoryContext.Minimal,actions:[]}),e.push({identifier:g.LocalNotificationIds.SCHEDULED_CALL_REMINDER,context:s.NotificationCategoryContext.Minimal,actions:[]}),e.push({identifier:g.LocalNotificationIds.SCHEDULED_CALL_PREREMINDER,context:s.NotificationCategoryContext.Minimal,actions:[]}),e.push({identifier:g.LocalNotificationIds.POLL_REMINDER,context:s.NotificationCategoryContext.Minimal,actions:[]}),e.push({identifier:g.LocalNotificationIds.POLL_PREREMINDER,context:s.NotificationCategoryContext.Minimal,actions:[]}),e.push({identifier:g.LocalNotificationIds.SIGNIN_REMINDER_IDENTIFIER,context:s.NotificationCategoryContext.Minimal,actions:[]}),e.push({identifier:g.LocalNotificationIds.SIGNOUT_REMINDER_IDENTIFIER,context:s.NotificationCategoryContext.Minimal,actions:[]}),e}test_reset(){this._pushNotificationQueue=[],this._localNotificationQueue=[],this._localEngagementNotificationQueue=[],this._trouterNotificationQueue=[],this._clearSubscriptions()}}},97503:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(97691),o=i(81697),s=i(75760),a=i(99686),r=i(33754),l=i(27357),c=i(53469),d=i(22538),u=i(12770);t.default=new class{constructor(){this._firstSyncFinished=!1,this._basePageTitle="Skype",this._currentBlinkingActivityItemCount=0,this._blinkingIndicatorIsShowingActivity=!1,d.RegisterStartupable(this,"PageTitleService",[o.default,s.default,l.default])}startup(){return n.Resolved()}_redisplayTitle(){this._firstSyncFinished&&(this._clearBlinkingTimer(),!a.default.isCurrentUserActive()&&this._currentBlinkingActivityItemCount>0&&(this._blinkingActivityInterval=u.default.setInterval((()=>this._toggleBetweenBaseTitleAndActivity()),1200)))}_toggleBetweenBaseTitleAndActivity(){a.default.isCurrentUserActive()?this._clearBlinkingTimer():(this._blinkingIndicatorIsShowingActivity?document.title=this._getActivityTitle():document.title=this._basePageTitle,this._blinkingIndicatorIsShowingActivity=!this._blinkingIndicatorIsShowingActivity)}_clearBlinkingTimer(){this._blinkingActivityInterval&&(u.default.clearInterval(this._blinkingActivityInterval),this._blinkingActivityInterval=void 0),this._blinkingIndicatorIsShowingActivity=!1,document.title=this._basePageTitle}_getActivityTitle(){return r.getString("PageTitleService.ActivityTitle",{activityItemCount:this._currentBlinkingActivityItemCount})}_getPageTitleForNavigationContext(){return[c.default.pageTitle].reverse().join(" | ")}}},70546:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(97691),o=i(98278),s=i(46096),a=i(30124),r=i(27357),l=i(22538),c=i(73714);t.default=new class{constructor(){this._handlingPopState=!1,this._navigatingToNewPlace=!1,l.RegisterStartupable(this,"PageUrlService",[r.default])}startup(){return n.Resolved()}_onNavigationStateStoreChange(){if(!this._handlingPopState){let e;if(a.default.isUsingStackNavigationContext()){const t=r.default.getCurrentNavigationStackRoute();e=c.default.getUrlForNavigationContextStack(null==t?void 0:t.name,null==t?void 0:t.params)}else{const t=r.default.getActiveConversationState(o.MainRootViewId);e=c.default.getUrlForCompositeConversationNavigationContext(t)}this._navigatingToNewPlace=!0,window.history.pushState(null,"",e),this._navigatingToNewPlace=!1}}_onUrlChange(e){if(this._navigatingToNewPlace)return;this._handlingPopState=!0;c.default.getNavigationActionForDeepLink(window.location.href,s.NavigationConversationOrigin.OnUrlChange,o.MainRootViewId).then((e=>{e&&e.action()})).always((()=>{this._handlingPopState=!1}))}}},9582:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(26999),s=(i(16778),i(97691)),a=i(62141),r=i(16402),l=i(46096),c=i(36237),d=(i(32638),i(14976)),u=i(22538);t.default=new class{constructor(){this._pendingNotifications=[],this._conversationSnooze={},u.RegisterStartupable(this,"PersistedNotificationsService")}startup(){const e=this._supportsPersistedLocalNotifications()?a.default.getLocalNotifications().then((e=>{this._pendingNotifications=n.compact(e);const t=e.length-this._pendingNotifications.length;t&&c.warn(l.LogTraceArea.Notifications,"Found "+t+" falsy notifications!"),this.cullOldNotifications()})):s.Resolved(),t=o.LocalNotifications.supportsStackedNotifications().then((e=>this._supportsStackedNotifications=e));return s.all([e,t]).then(n.noop)}_supportsPersistedLocalNotifications(){return!1}supportsStackedNotifications(){return this._supportsStackedNotifications}saveLocalNotification(e,t=!1){if(!this._supportsPersistedLocalNotifications())return s.Resolved();if(t){const t=t=>e.conversationId===t.conversationId&&e.messageTimestamp<=t.messageTimestamp;if(n.some(this._pendingNotifications,t))return s.Resolved()}const i=n.clone(e);i.sound=void 0,i.silent=!0,i.enableVibration=!1,this.cullOldNotifications(!1);const o=a.default.putLocalNotifications([i]);return this._pendingNotifications.push(i),o}cancelNotificationsForConversation(e,t,i=!0,o=!0,s=!1){let r=[],u=[],g=0,h=0;n.each(this._pendingNotifications,(i=>{const n=i.conversationId===e,o=i.serviceSpecificData&&i.serviceSpecificData.eventType===l.NotificationTypeAppLaunched.Reaction;n&&i.messageTimestamp<=t&&!o?r.push(i):n?(o?h++:g++,u.push(i)):u.push(i)})),o&&this._conversationSnooze[e]&&this._conversationSnooze[e].createdAt<=t&&(c.log(l.LogTraceArea.Notifications,"Cancelling snooze for "+d.mriOrId(e)),delete this._conversationSnooze[e]),r.length>0&&(c.log(l.LogTraceArea.Notifications,"Conversation "+d.mriOrId(e)+": cancelling "+r.length+" notifications, cutoff time: "+t+"; "+u.length+" still active ("+g+" from this conversation and "+h+" reactions)"),this._pendingNotifications=u,a.default.removeLocalNotifications(r),this.cancelNotifications(r,i,!1))}snoozeConversation(e,t){this._conversationSnooze[e]=t}getConversationSnooze(e){return this._conversationSnooze[e]}cancelNotificationById(e){const[t,i]=n.partition(this._pendingNotifications,(t=>t.id===e));t.length>0&&(this._pendingNotifications=i,c.log(l.LogTraceArea.Notifications,"Cancelling "+t.length+" notifications, id: "+d.mriOrId(e)+"; "+i.length+" still active"),a.default.removeLocalNotifications(t),this.cancelNotifications(t))}sortAllLocalNotificationsByTimeDesc(){return n.orderBy(this._pendingNotifications,(e=>e.timestamp),"desc")}removeAllLocalNotifications(){this._pendingNotifications.length>0&&(a.default.removeLocalNotifications(this._pendingNotifications),this._pendingNotifications=[],this.cancelNotifications([]))}cullOldNotifications(e=!0){let t=r.default.add(Date.now(),0,-7),i=[],o=[];n.each(this._pendingNotifications,(e=>{e.timestamp<=t?i.push(e):o.push(e)})),i.length>0&&(this._pendingNotifications=o,a.default.removeLocalNotifications(i),this.cancelNotifications(i,e))}cancelNotifications(e,t=!0,i=!1){n.each(e,(e=>{o.LocalNotifications.cancel(e)}))}}},68645:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(97691),s=i(62141),a=i(46096),r=i(36237),l=i(98754),c=i(61253),d=i(22538),u=i(42987),g=i(53374);t.default=new class{constructor(){this._actions={},this._subscribers={},d.RegisterStartupable(this,"PersistentActionsService")}startup(){return s.default.getPersistentActions().then((e=>{const t=n.groupBy(e,(e=>e.actionType));n.each(t,((e,t)=>{n.each(e,(e=>{r.log(a.LogTraceArea.PersistentActionsService,"Startup Tracking: "+e.id+", Type: "+e.actionType),this._actions[e.id]=e}))}))}))}test_reset(){n.isEmpty(this._actions)||r.log(a.LogTraceArea.PersistentActionsService,"Test reset, subscriber count: "+n.size(this._subscribers)+", actions being removed: ["+n.keys(this._actions).join(", ")+"]"),this._actions={},this._subscribers={}}subscribe(e,t){this._subscribers[e]=t;const i=n.filter(this._actions,(t=>t.actionType===e));t(n.map(i,(e=>e.data)),!0)}persistAndStartAction(e,t){let i=t;i.id=g.default.newGuid();const n={id:i.id,actionType:e,data:i};r.log(a.LogTraceArea.PersistentActionsService,"New Action: "+n.id+", Type: "+n.actionType),this._actions[n.id]=n,s.default.openTransaction([s.Stores.PersistentActions,s.Stores.InternalData],!0).then((e=>o.all([e.putPersistentAction(n),this._updateMetadata(e)])));const l=this._subscribers[e];return l&&l([n.data],!1),i}updateAction(e){let t=this._actions[e.id];return t?(t.data=e,s.default.putPersistentAction(t)):o.Rejected()}removeAction(e){r.log(a.LogTraceArea.PersistentActionsService,"Removing Action: "+e),s.default.openTransaction([s.Stores.PersistentActions,s.Stores.InternalData],!0).then((t=>o.all([t.removePersistentAction(e),this._updateMetadata(t)]))),delete this._actions[e]}_updateMetadata(e){const t=(0,u.transferServicesMeta)(n.map(this._actions,(e=>e.actionType))),i=l.default.getData(s.InternalKeys.TransferServicesMeta);if(!(0,c.default)(t,i))return l.default.putData(s.InternalKeys.TransferServicesMeta,t,e)}}},92664:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74958),o=i(96486),s=i(14589),a=i(26999),r=i(16778),l=i(97691),c=i(89391),d=i(94224),u=i(68580),g=i(22801),h=i(60021),p=i(76621),m=i(71830),S=i(984),C=i(75760),f=i(46429),y=i(95742),_=i(46096),v=i(97811),b=i(36237),T=i(70518),P=i(84474),A=i(4329),k=i(78735),I=i(88273),w=i(18078),N=i(14138),M=i(28355),E=i(76173),x=i(14976),L=i(83181),R=i(22538),D=i(99948),B=i(4057),O=i(27795),F=i(47202),V=i(25446),U=i(72758),H=i(53374);t.default=new class{constructor(){this._recentlyHandledMessages=[],this._subscriptions=[],R.RegisterStartupable(this,"PushNotificationsService",[p.default,k.default,N.default]),A.default.registerForLogout(this,"PushNotificationsService")}startup(){return this._startupTime=Date.now(),this._subscriptions.push(g.default.incomingCallMessageReceived.subscribe((e=>{const t=H.default.newCauseId();if(!c.default.getS4LCMCFeatures().enableMsnpFlamingoMessages)return void b.log(_.LogTraceArea.Push,"Ignoring chat-based call notification causeId: "+t);b.log(_.LogTraceArea.Push,"Received new incoming call notification via chat causeId: "+t);const i=u.default.incomingCallNotificationForFlamingo(e),n=o.attempt((()=>Date.parse(e.originalarrivaltime))),s=Date.now(),a=!n||o.isError(n)?n:s;d.default.CallNotificationHelpers.processIncomingCallNotification(i.evt,"msnp",i,a,s,t),d.default.CallNotificationHelpers.maybeDisposePendingWarmCallForNotification(i.evt)}))),this._subscriptions.push(N.default.event_pushNotificationQueueChanged.subscribe((()=>{this._drainPushQueue()}))),this._drainPushQueue(),L.default.performAfterUIStarted((()=>{d.default.CallNotificationHelpers.maybeDisposePendingWarmCall(_.WarmCallNotificationDisposition.FollowedByForegrounding)})),l.Resolved()}_drainPushQueue(){o.each(N.default.getPushNotificationQueue(),(e=>{this._processPushNotification(e.notification,e.causeId)}))}logout(e,t,i){const n=this._subscriptions;return this._subscriptions=[],o.each(n,(e=>e.unsubscribe())),s.default.setCount(0),l.Resolved()}_processPushNotification(e,t){if(!e)return void b.error(_.LogTraceArea.Push,"Push notification payload was missing causeId: "+t);b.log(_.LogTraceArea.Push,"Acknowledging notification with correlation ID "+e.correlationId+" causeId: "+t),N.default.confirmPushNotificationProcessed(e);let i=e.serviceSpecificData;if(!i)return void b.error(_.LogTraceArea.Push,"Push notification serviceSpecificData was missing causeId: "+t);let s=i.data||i,a=E.PNHEvents.IncomingUnknown;s&&s.eventType&&(a=Number(s.eventType));const l=Date.now(),c=o.attempt((()=>new Date(e.receivedTimeMs||0).toISOString()));let h,m="Push notification received (UI: "+L.default.isUIDisplayed()+", Evt: "+a+", Time: "+(o.isError(c)?"unknown":c)+", causeId: "+t+", cv: "+s.cv+")";if(b.log(_.LogTraceArea.Push,m),s&&s.recipientId&&s.recipientId!==w.default.getSkypeId())return b.log(_.LogTraceArea.Push,"Push from "+x.mriOrId(s.recipientId)+" doesnt belong to current user "+x.mriOrId(w.default.getSkypeId())+" causeId: "+t+", cv: "+s.cv),b.track(new M.NotificationForIncorrectRecipientEvent(a,!0,e.receivedTimeMs,s.cv)),void this._notificationProcessingCompleted(e,t);if(d.default.CallNotificationHelpers.maybeDisposePendingWarmCallForNotification(a),D.default.startedProcessingPush(E.PNHEvents[a]),a){if(a===E.PNHEvents.IncomingChatMessage||a===E.PNHEvents.IncomingChatGroupMessage||a===E.PNHEvents.IncomingChatMention||a===E.PNHEvents.IncomingChatHearts||a===E.PNHEvents.IncomingChatAudio||a===E.PNHEvents.IncomingChatVideo||a===E.PNHEvents.IncomingChatVideoCloud||a===E.PNHEvents.IncomingChatPhoto||a===E.PNHEvents.IncomingChatMoji||a===E.PNHEvents.IncomingChatFile||a===E.PNHEvents.ThreadActivity){const i=s;this._consumePresenceFromPush(i.presenceStatus,e.receivedTimeMs),h=this._processChatMessagePushNotification(i,e.receivedTimeMs||0,t)}else if(a===E.PNHEvents.IncomingConsumptionHorizonChange){const i=s,n=i.conversationVersion?Number(i.conversationVersion):0;b.log(_.LogTraceArea.Push,"Processing incoming consumption horizon notification: "+x.mriOrId(i.conversationId)+" CH="+i.consumptionHorizon+", Version="+n+", causeId="+t+", cv: "+s.cv),this._consumePresenceFromPush(i.presenceStatus,e.receivedTimeMs),h=p.default.processPushNotificationConsumptionHorizon(i.conversationId,i.consumptionHorizon,n)}else if(a===E.PNHEvents.IncomingContactListChange)S.default.processContactListChangeNotification();else if(a===E.PNHEvents.IncomingContactRequest||a===E.PNHEvents.IncomingContactAccept||a===E.PNHEvents.IncomingContactInviteListChange)S.default.processContactInviteNotification();else if(a===E.PNHEvents.IncomingContactBlockChange){const e=s;0;const t=o.toLower(e.parameters.context)===E.BlockContext;h=S.default.processContactBlockChangeNotificationPotentiallyBeforeStartup(t,e.parameters.contactMri)}else if(a===E.PNHEvents.IncomingNGCCall||a===E.PNHEvents.IncomingNGCGroupCall||a===E.PNHEvents.IncomingNGCPSTNCall||a===E.PNHEvents.IncomingS4BCall||a===E.PNHEvents.IncomingNGCEncryptedCall){const i=s;0,h=d.default.CallNotificationHelpers.processIncomingCallNotification(a,"pnh",u.default.incomingCallNotificationForPnh(a,i),e.receivedTimeMs||0,l,t)}else if(a===E.PNHEvents.IncomingGoLiveStart){const i=s;h=d.default.CallNotificationHelpers.processIncomingGoLiveNotification(a,"pnh",u.default.incomingGoLivelNotificationForPnh(a,i),e.receivedTimeMs||0,l,t)}else if(a===E.PNHEvents.IncomingGoLiveStop){const i=s;h=d.default.CallNotificationHelpers.processGoLiveStopNotification(a,"pnh",u.default.stopGoLiveNotificationForPnh(a,i),e.receivedTimeMs||0,l,t)}else if(a===E.PNHEvents.IncomingP2PCall){const i=s;h=d.default.CallNotificationHelpers.processP2PCallNotification(a,"pnh",i,e.receivedTimeMs||0,l,t)}else if(a===E.PNHEvents.IncomingNGCStopRinger){const i=s;h=d.default.CallNotificationHelpers.processStopCallNotification("pnh",u.default.stopCallNotificationForPnh(a,i),e.receivedTimeMs||0,l,t)}else if(a===E.PNHEvents.IncomingWarmCall){const e=s,i=r.App.getActivationState()===r.Types.AppActivationState.Background&&Date.now()-this._startupTime<5e3;h=d.default.CallNotificationHelpers.processWarmCallNotification(i,e,t)}else if(a===E.PNHEvents.IncomingProfileChange)U.default.fetchUserPotentiallyBeforeStartup();else if(a===E.PNHEvents.IncomingAvatarChange)U.default.fetchUserAvatarUrlPotentiallyBeforeStartup();else if(a===E.PNHEvents.SceUserServicesChange)s?y.default.processSceUserServicesChangeNotification(s):b.error(_.LogTraceArea.Push,"PNHEvents.SceUserServicesChange missing pushNotificationData");else if(a===E.PNHEvents.IncomingTPUMConciergeMessage){const e=s;h=F.default.processTPUMNotification(e,t)}else if(a===E.PNHEvents.EmergencyRestoreEndpoints){const e=H.default.newCauseId(),t=new f.default(e);t.start(),r.App.getActivationState()===r.Types.AppActivationState.Active?(b.log(_.LogTraceArea.Push,"Push notification arrived while app in foreground. Ignoring payload. causeId: "+e+", cv: "+s.cv),t.ignored("AppActive"),t.finish()):h=R.EnsureStarted(g.default).then((()=>g.default.restoreEndpoints(e,t)))}}else b.error(_.LogTraceArea.Push,"Unknown push event type for payload: "+n.pii.Omit(JSON.stringify(e))+" causeId: "+t+", cv: "+s.cv);this._notificationProcessingCompleted(e,t,h,!1,s.cv)}_consumePresenceFromPush(e,t){if(r.App.getActivationState()===r.Types.AppActivationState.Background&&e&&t&&c.default.getS4LMessagingFeatures().consumePresenceFromPush){let i=m.parseStatus(e);I.default.setStatus(V.UserPresenceChangeOrigin.PushNotification,i,t)}}_notificationProcessingCompleted({notificationProcessingId:e,isBackgroundPush:t},i,n,o=!1,s){(e||t)&&(n||l.Resolved()).always((()=>(b.log(_.LogTraceArea.Push,"pushProcessingPromise complete causeId: "+i+", cv: "+s),l.all([C.default.flushNotificationProcessingPromises(),P.default.flushNotificationProcessingPromises()])))).always((()=>{b.log(_.LogTraceArea.Push,"notificationPromises completed causeId: "+i+", cv: "+s),t?a.LocalNotifications.backgroundPushProcessingCompleted():e&&(o?R.EnsureStarted([P.default,T.default]).then((()=>{P.default.processDelayedCallNotification(e)})):a.LocalNotifications.notificationProcessingCompleted(e)),D.default.pushProcessingComplete()}))}_processChatMessagePushNotification(e,t,i){if(!e||!e.rawPayload)return void b.warn(_.LogTraceArea.Push,"Chat service notification missing rawPayload: "+n.pii.Omit(JSON.stringify(e))+" causeId: "+i+", cv: "+e.cv);const s=e.rawPayload,a=o.isString(s)?B.default.parseJsonErrorToUndefined(s):s;let r;if(a&&"conversationLink"in a?(a.type||(a.type="Message"),r=a):a&&"resource"in a&&(r=a.resource),!r)return b.error(_.LogTraceArea.Push,"Error parsing raw payload from chat service notification: "+B.default.errorAsString(r)+" causeId: "+i+", cv: "+e.cv+", Payload: "+n.pii.Omit(s)),void b.track(new M.NotificationRawContentNotParsed(e.eventType||E.PNHEvents.IncomingUnknown,0!==t?t:void 0,e.cv));{if(e.pnhTime&&!r.conversationLink)return void b.warn(_.LogTraceArea.Push,"Chat service notification missing rawPayload  property values: "+n.pii.Omit(JSON.stringify(e))+" causeId: "+i+", cv: "+e.cv);let t=(e.conversationId||"").replace("Skype:","8:");const s=r.conversationLink,a=o.last(s.split("/"));if(o.isString(r.isactive)&&(r.isactive="true"===r.isactive.toLowerCase()),o.isString(r.properties)&&(r.properties=B.default.parseJsonErrorToUndefined(r.properties)),o.isString(r.amsreferences)&&(r.amsreferences=B.default.parseJsonErrorToUndefined(r.amsreferences)),o.isString(r.encryptedkey)&&(r.encryptedkey=B.default.parseJsonErrorToUndefined(r.encryptedkey)),t!==a){const n=JSON.stringify(e);if(w.default.isMyMri(t))b.track(new O.DevDebug("BadPushV2",n));else{const o=s.substr(0,s.length-a.length)+t;r.conversationLink=o,b.warn(_.LogTraceArea.Push,"Push Notification mismatch between conversationId and conversationLink causeId: "+i+", cv: "+e.cv),b.track(new O.DevDebug("BadPushV1",n))}}}const l=m.getParsedConversationId(r);if(!l)return void b.error(_.LogTraceArea.Push,"Error parsing conversation ID from chat service notification: "+B.default.errorAsString(r)+" causeId: "+i+", cv: "+e.cv+", Payload: "+n.pii.Omit(s));if(w.default.isMyMri(l)){const t=JSON.stringify(e);b.track(new O.DevDebug("BadPush",t)),b.error(_.LogTraceArea.Push,"Processed push as being in our own conversation: "+n.pii.Omit(t)+" causeId: "+i+", cv: "+e.cv)}const c=!r.isactive;if(o.some(this._recentlyHandledMessages,(e=>e.conversationLink===r.conversationLink&&e.id===r.id&&e.version>=r.version&&(!0===e.isactive||e.isactive===r.isactive))))return b.log(_.LogTraceArea.Push,"ignoring duplicate message (_recentlyHandledMessages) causeId: "+i+", cv: "+e.cv),void b.track(new M.NotificationIgnoredAsDuplicate(e.eventType||E.PNHEvents.IncomingUnknown,0!==t?t:void 0,e.cv));for(this._recentlyHandledMessages.push(r);this._recentlyHandledMessages.length>50;)this._recentlyHandledMessages.shift();const d=m.getCreatorMriForMessageFromLink(r.from),u=h.getCorrelationIdFromMessageParts(d,l,r.clientmessageid),S=m.isEncryptedThread(l)&&r.content===E.EncryptedContent;b.track(new v.FundamentalsMessagePushDebug(r.clientmessageid||"",u,"Received")),b.log(_.LogTraceArea.Push,"processing push notification, cv: "+e.cv+" conversationId="+x.mriOrId(l)+" id="+x.mriOrId(r.id)+" version="+r.version+" isOtherEndpointActive="+c+" causeId="+i+" CMID="+r.clientmessageid+" correlationId="+u+" eventType="+(e.eventType||"N/A")+" isEncryptedContentMissing="+S);const C=r;return S?R.EnsureStarted(g.default).then((()=>g.default.serviceGetConversationMessage(l,C.id).then((t=>(o.assign(t,{isactive:C.isactive}),p.default.processPushNotificationMessage(t,l,_.MessageOrigin.PushNotification,e.cv)))))):p.default.processPushNotificationMessage(r,l,_.MessageOrigin.PushNotification,e.cv).done((()=>{b.track(new v.FundamentalsMessagePushDebug(C.clientmessageid||"",u,"Processed"))})).fail((e=>{b.track(new v.FundamentalsMessagePushDebug(C.clientmessageid||"",u,"ProcessingFailed","Error processing bundle: "+B.default.errorAsString(e)))}))}test_clearRecentlyHandledMessages(){this._recentlyHandledMessages=[]}}},23071:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74958),o=i(96486),s=i(52210),a=i(52210),r=i(52400),l=i(97691),c=i(89391),d=i(47447),u=i(57347),g=i(36237),h=i(50737),p=i(22538);t.default=new class{constructor(e=[]){this._SERVICE_NAME="QuickActionsService",p.RegisterStartupable(this,this._SERVICE_NAME,e)}startup(){if(!d.UICapabilities.quickActionsSupported()||!r.default.isSystemSupported)return l.Resolved();this._pinnedShortcutsTelemetry();let e=!1;const t=this._updateQuickActionsMenu();return c.default.subscribe((()=>{e||(e=!0,u.default.queueIdleTask("QuickActions",u.TaskTypeFlags.UsesNetworking,(()=>{s.log(a.LogTraceArea.QuickActionsService,"Received ECS Updates."),e=!1,t.then((()=>{this._updateQuickActionsMenu()}),(e=>{s.warn(a.LogTraceArea.QuickActionsService,"Update Failed."+n.pii.Omit(JSON.stringify(e)))}))})))})),l.Resolved()}getInitialUrl(){return r.default.getAndClearInitialUrl()}_updateQuickActionsMenu(){s.log(a.LogTraceArea.QuickActionsService,"updating.");const e=c.default.getS4LNativePlatformsEcsConfig().quickActions,t=e.enabled;if(!t&&t!==this._lastEnable)return s.log(a.LogTraceArea.QuickActionsService,"Ecs disabled, removing all shortcuts."),this._lastEnable=t,r.default.removeAll();if(!t&&this._lastEnable===t)return l.Rejected("ECS remains disabled, no updates necessary");const i=e.options;if(s.log(a.LogTraceArea.QuickActionsService,"Quick Actions Ecs is enabled, with Options: "+n.pii.Omit(JSON.stringify(i))),this._lastEnable===t&&i){if(this._lastOptions||i===this._lastOptions)return l.Rejected("No change in ECS, update rejected.");this._lastOptions=i}return this._lastEnable=t,i?r.default.updateAll(i):r.default.updateAll([])}_pinnedShortcutsTelemetry(){return r.default.getAllPinnedShortcuts().then((e=>{o.isEmpty(o.xor(e,this._lastPinnedShortcuts))||((0,g.track)(new h.QuickActionsEvent(void 0,e)),this._lastPinnedShortcuts=e)}),(e=>{s.warn(a.LogTraceArea.QuickActionsService,"Fail to send Telemetry."+n.pii.Omit(JSON.stringify(e)))}))}}},16568:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(97691),s=i(89391),a=i(62141),r=i(46096),l=i(36237),c=i(98754),d=i(22538);class u{constructor(){this._set=!1}reset(){this._set=!1,this._value=void 0,this._defer=void 0}internal_set(e){if(this._value=e,this._set=!0,this._defer){const e=this._defer;this._defer=void 0,e.resolve(void 0)}}get(){return this._value}waitUntilSet(){return this._set?o.Resolved():(this._defer||(this._defer=o.Defer()),this._defer.promise())}}t.default=new class{constructor(){this._cache={},this._initialized=!1,this.CallingFingerprintId=new u,this.CallingNodeId=new u,this.InternalCallingRegistrationId=new u,this.ChatServiceSessionInfo=new u,this.EdfRegistrationId=new u,this._saveToDB=e=>(l.log(r.LogTraceArea.GenericUnsafe,this._initialized?"Saving SharedId cache to db.":"SharedId updated, will be saved on startup"),this._initialized?c.default.putData(a.InternalKeys.SharedIdServiceCache,this._cache,e):o.Resolved()),this._saveToDbDebounced=n.debounce(this._saveToDB,100),d.RegisterStartupable(this,"SharedIdService",[c.default])}startup(){let e,t=!1;s.default.getConfigSettingsNoSubscription().calling.disableSharedIdCache||(e=c.default.getDataExclusive(a.InternalKeys.SharedIdServiceCache)||{},l.log(r.LogTraceArea.GenericUnsafe,n.isEmpty(e)?"No SharedId cache found":"Loaded SharedId cache from db."),n.some(this._cache)&&(l.log(r.LogTraceArea.GenericUnsafe,"Merging SharedId cache"),e=n.merge(e,this._cache),t=!0),this._cache=e),this._cache.callingFingerprintId&&this.CallingFingerprintId.internal_set(this._cache.callingFingerprintId.value),this._cache.callingNodeId&&this.CallingNodeId.internal_set(this._cache.callingNodeId.value),this._cache.internalCallingRegistrationId&&this.InternalCallingRegistrationId.internal_set(this._cache.internalCallingRegistrationId.value),this._cache.pnhRegistrationId&&this.EdfRegistrationId.internal_set(this._cache.pnhRegistrationId.value),this._cache.chatServiceSessionInfo&&this.ChatServiceSessionInfo.internal_set(this._cache.chatServiceSessionInfo.value),this._initialized=!0;let i=!1;if(!this._cache.chatServiceSessionInfo){const e=c.default.getDataExclusive(a.InternalKeys.ChatServiceSessionInfo_deprecated);e&&(i=!0,this._cache.chatServiceSessionInfo={value:e},this.ChatServiceSessionInfo.internal_set(e))}return i||t?(this._saveToDbDebounced.cancel(),a.default.openTransaction([a.Stores.InternalData],!0).then((e=>(this._saveToDbDebounced.cancel(),o.all([this._saveToDB(e),i?c.default.deleteKeys([a.InternalKeys.ChatServiceSessionInfo_deprecated],e):void 0]).then((()=>{e.markCompleted()})))))):o.Resolved()}setCallingFingerprintId(e){this._cache.callingFingerprintId&&e===this._cache.callingFingerprintId.value||(this.CallingFingerprintId.internal_set(e),this._cache.callingFingerprintId={value:e},this._saveToDbDebounced())}setCallingNodeId(e){this._cache.callingNodeId&&e===this._cache.callingNodeId.value||(this.CallingNodeId.internal_set(e),this._cache.callingNodeId={value:e},this._saveToDbDebounced())}setInternalCallingRegistrationId(e){this._cache.internalCallingRegistrationId&&e===this._cache.internalCallingRegistrationId.value||(this.InternalCallingRegistrationId.internal_set(e),this._cache.internalCallingRegistrationId={value:e},this._saveToDbDebounced())}setEdfRegistrationId(e){this._cache.pnhRegistrationId&&e===this._cache.pnhRegistrationId.value||(this.EdfRegistrationId.internal_set(e),this._cache.pnhRegistrationId={value:e},this._saveToDbDebounced())}setChatServiceSessionInfo(e){this._cache.chatServiceSessionInfo&&e===this._cache.chatServiceSessionInfo.value||(this.ChatServiceSessionInfo.internal_set(e),this._cache.chatServiceSessionInfo={value:e},this._saveToDbDebounced())}deleteIds(e,t){return e.callingNodeId&&(this.CallingNodeId.reset(),this._cache.callingNodeId=void 0),e.callingFingerprintId&&(this.CallingFingerprintId.reset(),this._cache.callingFingerprintId=void 0),e.internalCallingRegistrationId&&(this.InternalCallingRegistrationId.reset(),this._cache.internalCallingRegistrationId=void 0),e.edfRegistrationId&&(this.EdfRegistrationId.reset(),this._cache.pnhRegistrationId=void 0),e.chatServiceSessionInfo&&(this.ChatServiceSessionInfo.reset(),this._cache.chatServiceSessionInfo=void 0),t?this._saveToDB():o.Resolved(void 0)}test_getIds(){return{callingNodeId:this.CallingNodeId,callingFingerprintId:this.CallingFingerprintId,internalCallingRegistrationId:this.InternalCallingRegistrationId,edfRegistrationId:this.EdfRegistrationId,chatServiceSessionInfo:this.ChatServiceSessionInfo}}test_reset(e=!1){this.deleteIds({callingFingerprintId:!0,callingNodeId:!0,internalCallingRegistrationId:!0,edfRegistrationId:!0,chatServiceSessionInfo:!0},e),this._initialized=!1}}},62232:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SoundPlayer=void 0;const n=i(96486),o=i(36345),s=i(63795),a=i(74634),r=i(97691),l=i(47447),c=i(46096),d=i(36237),u=i(4057),g=i(40363);class h{constructor(e,t,i,o,s){this._soundDescription=e,this._setOutputVolume=t,this._getOutputDevice=i,this._getOutputVolume=o,this._instanceId=++h._nextInstanceId,this._piiFilenames=["Skype_Dtmf_0","Skype_Dtmf_1","Skype_Dtmf_2","Skype_Dtmf_3","Skype_Dtmf_4","Skype_Dtmf_5","Skype_Dtmf_6","Skype_Dtmf_7","Skype_Dtmf_8","Skype_Dtmf_9"],this._nextPlayerToken=0,this._players={},s.subscribe((e=>{n.each(this._players,(t=>{this._updateOutputDevice(t,e),this._updateOutputVolume(t,{},e)}))}))}_description(){const e=n.includes(this._piiFilenames,this.filename)?"<pii:DtmfTone>":this.filename;return`SoundPlayer[${this._instanceId}:${e}]`}_methodLog(e,t){return`${this._description()}.${e} causeId: ${t}`}_audioPlayerEntryLog(e,t,i){return`${this._description()}[${t.token}].${e} causeId: ${i}`}get filename(){return this._soundDescription.name+"."+this._soundDescription.extension}playOnce(e,t){return d.log(c.LogTraceArea.AudioPlayer,this._methodLog("playOnce",e)),this._createPlayer(t,e).then((t=>{const i=r.Defer();let n=t.player.endedEvent.subscribe((()=>{if(!n)return;d.log(c.LogTraceArea.AudioPlayer,this._audioPlayerEntryLog("playOnce",t,e)+" Finished"),this.dispose(t.token,e);const o=n;n=void 0,o.unsubscribe(),i.resolve(void 0)}));return t.player.play(!1,!1),i.promise()}))}playRepeating(e,t){return d.log(c.LogTraceArea.AudioPlayer,this._methodLog("playRepeating",e)),this._createPlayer(t,e).then((e=>(e.player.play(!0,!1),e.token)))}dispose(e,t){const i=this._players[e];i?(d.log(c.LogTraceArea.AudioPlayer,this._audioPlayerEntryLog("dispose",i,t)),i.player.stop(),i.player.release(),delete this._players[e]):d.warn(c.LogTraceArea.AudioPlayer,this._methodLog("dispose",t)+" No player found token: "+e)}_createPlayer(e,t){const i=++this._nextPlayerToken;d.log(c.LogTraceArea.AudioPlayer,this._methodLog("_createPlayer",t)+" token: "+i+" options: "+(e?JSON.stringify(e):"none"));const n={token:i,player:s.Audio.openFile(g.default.getSoundPath(this.filename),this._soundDescription.extension,this._soundDescription.type)};this._players[i]=n;const o=e&&e.unmute;return this._updateOutputVolume(n,{force:!0,unmute:o},t),this._updateOutputMuted(n,{force:!0,unmute:o},t),this._updateOutputDevice(n,t,!0).always((()=>n))}_updateOutputDevice(e,t,i){const n=this._getOutputDevice(!!this._soundDescription.secondary);return!n||n.id===this._deviceId&&!i?r.Resolved():(d.log(c.LogTraceArea.AudioPlayer,this._audioPlayerEntryLog("_updateOutputDevice",e,t)),r.fromThenable(e.player.setOutputDevice(n.id,n.browserId)).then((()=>{d.log(c.LogTraceArea.AudioPlayer,this._audioPlayerEntryLog("_updateOutputDevice",e,t)+" Set device: "+n.id),this._deviceId=n.id}),(i=>d.warn(c.LogTraceArea.AudioPlayer,this._audioPlayerEntryLog("_updateOutputDevice",e,t)+" Failed to set device "+u.default.errorAsString(i)))))}_updateOutputVolume(e,t,i){let n=this._getOutputVolume();(n!==this._volume||t.force)&&(t.unmute&&(this._soundDescription.secondary?n=.5:(n=n>0?n:.5,this._setOutputVolume(n))),d.log(c.LogTraceArea.AudioPlayer,this._audioPlayerEntryLog("_updateOutputVolume",e,i)+" volume: "+n+" unmute: "+!!t.unmute),this._volume=n,e.player.setVolume(n))}_updateOutputMuted(e,t,i){let s=e.player.getMuted();n.isUndefined(t.unmute)||t.unmute&&s&&!t.force||(t.unmute&&(!this._soundDescription.secondary&&l.CallingCapabilities.unmuteDeviceSupported()&&o.default.unmuteSpeaker(),e.player.setMuted(!1)),d.log(c.LogTraceArea.AudioPlayer,this._audioPlayerEntryLog("_updateOutputMuted",e,i)+" unmute: "+!!t.unmute))}}t.SoundPlayer=h,h._nextInstanceId=0;class p{constructor(){this._sounds={},this._outputConfigurationChanged=new a.default,this._setOutputVolume=e=>{if(this._callbacks)return l.CallingCapabilities.speakerVolumeControlSupported()?this._callbacks.setOutputVolume(100*e):1},this._getOutputVolume=()=>this._callbacks&&l.CallingCapabilities.speakerVolumeControlSupported()?this._callbacks.getOutputVolume()/100:1,this._getOutputDevice=e=>{if(this._callbacks)return this._callbacks.getOutputDevice(e)}}setCallbacks(e){this._callbacks&&(this._volumeToken.unsubscribe(),this._deviceToken.unsubscribe(),this._volumeToken=void 0,this._deviceToken=void 0),this._callbacks=e,this._volumeToken=this._callbacks.onVolumeChanged.subscribe((()=>this._outputConfigurationChanged.fire("SoundPlayerCallbacks.Volume"))),this._deviceToken=this._callbacks.onDeviceChanged.subscribe((()=>this._outputConfigurationChanged.fire("SoundPlayerCallbacks.Device")))}static _keyForSoundDescription(e){return e.name+(e.secondary?"_additional":"")}_getOrCreateSound(e){const t=p._keyForSoundDescription(e);let i=this._sounds[t];return i||(i=new h(e,this._setOutputVolume,this._getOutputDevice,this._getOutputVolume,this._outputConfigurationChanged),this._sounds[t]=i),i}get SkypeCallConnecting(){return this._getOrCreateSound({name:"Skype_Call_Connecting",extension:"m4a",type:s.AudioPlayerSoundType.Ringtone,maybeLoud:!0})}get SkypeCallDialing(){return this._getOrCreateSound({name:"Skype_Call_Dialing",extension:"m4a",type:s.AudioPlayerSoundType.Ringtone})}get SkypeCallEnded(){return this._getOrCreateSound({name:"Skype_Call_Ended",extension:"m4a",type:s.AudioPlayerSoundType.Default})}get SkypeCallError(){return this._getOrCreateSound({name:"Skype_Error",extension:"m4a",type:s.AudioPlayerSoundType.Ringtone})}get SkypeCallReconnected(){return this._getOrCreateSound({name:"Skype_Call_Reconnected",extension:"m4a",type:s.AudioPlayerSoundType.Ringtone,maybeLoud:!0})}get SkypeCallRingback(){return this._getOrCreateSound({name:"Skype_Call_Ringback",extension:"m4a",type:s.AudioPlayerSoundType.Ringtone})}get SkypeCallRinging(){return this._getOrCreateSound({name:"Skype_Call_Ringing",extension:"m4a",type:s.AudioPlayerSoundType.Ringtone})}get SkypeCallRingingSecondary(){return this._getOrCreateSound({name:"Skype_Call_Ringing",extension:"m4a",type:s.AudioPlayerSoundType.Ringtone,secondary:!0})}get SkypeCameraCapture(){return this._getOrCreateSound({name:"Skype_Camera_Capture",extension:"m4a",type:s.AudioPlayerSoundType.Default,maybeLoud:!0})}get SkypeConfirmation(){return this._getOrCreateSound({name:"Skype_Confirmation",extension:"m4a",type:s.AudioPlayerSoundType.Default})}get SkypeIncomingVideoAvailable(){return this._getOrCreateSound({name:"Skype_Incoming_Video_Available",extension:"m4a",type:s.AudioPlayerSoundType.System})}get SkypeDtmf0(){return this._getOrCreateSound({name:"Skype_Dtmf_0",extension:"m4a",type:s.AudioPlayerSoundType.System,maybeLoud:!0})}get SkypeDtmf1(){return this._getOrCreateSound({name:"Skype_Dtmf_1",extension:"m4a",type:s.AudioPlayerSoundType.System,maybeLoud:!0})}get SkypeDtmf2(){return this._getOrCreateSound({name:"Skype_Dtmf_2",extension:"m4a",type:s.AudioPlayerSoundType.System,maybeLoud:!0})}get SkypeDtmf3(){return this._getOrCreateSound({name:"Skype_Dtmf_3",extension:"m4a",type:s.AudioPlayerSoundType.System,maybeLoud:!0})}get SkypeDtmf4(){return this._getOrCreateSound({name:"Skype_Dtmf_4",extension:"m4a",type:s.AudioPlayerSoundType.System,maybeLoud:!0})}get SkypeDtmf5(){return this._getOrCreateSound({name:"Skype_Dtmf_5",extension:"m4a",type:s.AudioPlayerSoundType.System,maybeLoud:!0})}get SkypeDtmf6(){return this._getOrCreateSound({name:"Skype_Dtmf_6",extension:"m4a",type:s.AudioPlayerSoundType.System,maybeLoud:!0})}get SkypeDtmf7(){return this._getOrCreateSound({name:"Skype_Dtmf_7",extension:"m4a",type:s.AudioPlayerSoundType.System,maybeLoud:!0})}get SkypeDtmf8(){return this._getOrCreateSound({name:"Skype_Dtmf_8",extension:"m4a",type:s.AudioPlayerSoundType.System,maybeLoud:!0})}get SkypeDtmf9(){return this._getOrCreateSound({name:"Skype_Dtmf_9",extension:"m4a",type:s.AudioPlayerSoundType.System,maybeLoud:!0})}get SkypeDtmfPound(){return this._getOrCreateSound({name:"Skype_Dtmf_pound",extension:"m4a",type:s.AudioPlayerSoundType.System,maybeLoud:!0})}get SkypeDtmfStar(){return this._getOrCreateSound({name:"Skype_Dtmf_star",extension:"m4a",type:s.AudioPlayerSoundType.System,maybeLoud:!0})}get SkypeError(){return this._getOrCreateSound({name:"Skype_Error",extension:"m4a",type:s.AudioPlayerSoundType.Default})}get SkypeFileTransferComplete(){return this._getOrCreateSound({name:"Skype_File_Transfer_Complete",extension:"m4a",type:s.AudioPlayerSoundType.System})}get SkypeFileTransferFailed(){return this._getOrCreateSound({name:"Skype_File_Transfer_Failed",extension:"m4a",type:s.AudioPlayerSoundType.System})}get SkypeFileTransferIncoming(){return this._getOrCreateSound({name:"Skype_File_Transfer_Incoming",extension:"m4a",type:s.AudioPlayerSoundType.System})}get SkypeInAppNotification(){return this._getOrCreateSound({name:"Skype_In_App_Notification",extension:"m4a",type:s.AudioPlayerSoundType.System})}get SkypeLogin(){return this._getOrCreateSound({name:"Skype_Login",extension:"m4a",type:s.AudioPlayerSoundType.Default})}get SkypeMessageSent(){return this._getOrCreateSound({name:"Skype_Message_Sent",extension:"m4a",type:s.AudioPlayerSoundType.System})}get SkypeMiscClickpop(){return this._getOrCreateSound({name:"Skype_Misc_Clickpop",extension:"m4a",type:s.AudioPlayerSoundType.System})}get SkypeMsgReceived(){return this._getOrCreateSound({name:"Skype_Msg_Received",extension:"m4a",type:s.AudioPlayerSoundType.System})}get SkypeNotification(){return this._getOrCreateSound({name:"Skype_Notification",extension:"m4a",type:s.AudioPlayerSoundType.System})}get SkypeShutter(){return this._getOrCreateSound({name:"Skype_Shutter",extension:"m4a",type:s.AudioPlayerSoundType.System})}get SkypeVideoMsgRecord(){return this._getOrCreateSound({name:"Skype_Video_Msg_Record",extension:"m4a",type:s.AudioPlayerSoundType.Default})}get SkypeVideoMsgStop(){return this._getOrCreateSound({name:"Skype_Video_Msg_Stop",extension:"m4a",type:s.AudioPlayerSoundType.Default})}}t.default=new p},50449:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(46096),s=i(36237),a=i(18775),r=i(32806),l=i(69399),c=i(94050);t.default=new class{constructor(){this._startupPhaseTimes={},this._startupPhaseEndTimestamps={},this._startupPhaseStartTimestamps={},this._shouldReportP6=!1,this._intentBased=!1}appColdStartup(e){this._startupScenario=new c.default(c.ScenarioName.AppStartup,void 0,void 0,void 0,!0),this._startupScenario.start(void 0,e)}logStartupPerfDuration(e,t,i,n=!1){s.log(o.LogTraceArea.GenericUnsafe,"Startup Phase "+e+" duration: "+t+"ms"),n&&(this._intentBased=!0),this._startupPhaseTimes[e]=t,this._startupPhaseEndTimestamps[e]=Date.now();const r=this._startupPhaseEndTimestamps[e-1]?this._startupPhaseEndTimestamps[e]-this._startupPhaseEndTimestamps[e-1]:-1;s.track(new l.PerfStartupPhase(e,t,r,i));const c=(0,a.getCurrentIntent)(),d=c?a.Intent[c]:"";e<=5&&this._startupScenario.markStepCompleted("Phase"+e,{currentIntent:d},t),5===e&&(this._startupScenario.finish({intentBased:this._intentBased,currentIntent:d}),this._setupP6())}_setupP6(){const e=r.getMaxEntryPoint();e!==o.AppEntryPoint.Foregrounded&&e!==o.AppEntryPoint.Opened||(this._shouldReportP6=!0)}phase6Start(){this._shouldReportP6&&(this._startupPhaseStartTimestamps[6]=Date.now())}phase6End(){if(!this._shouldReportP6)return;if(this._shouldReportP6=!1,!this._startupPhaseStartTimestamps[6])return;const e=Date.now()-this._startupPhaseStartTimestamps[6];this.logStartupPerfDuration(6,e)}getStartupPhaseEndTimestamp(e){return this._startupPhaseEndTimestamps[e]}getStartupPhaseTimes(){return this._startupPhaseTimes}getStartupPerfSummary(){let e="",t=0,i=1;for(;!n.isUndefined(this._startupPhaseTimes[i]);)e+="Phase "+i+": "+this._startupPhaseTimes[i]+"ms\n",t+=this._startupPhaseTimes[i],i++;return e+="Total: "+t+"ms\n",e}}},99948:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StartupContext=t.AppWakeupReason=void 0;const n=i(96486),o=i(16778),s=i(46096),a=i(36237),r=i(50449),l=i(94050);var c,d;!function(e){e[e.ColdStartup=0]="ColdStartup",e[e.AppStateChange=1]="AppStateChange",e[e.Push=2]="Push",e[e.LocalNotification=3]="LocalNotification",e[e.TrouterMessage=4]="TrouterMessage"}(c=t.AppWakeupReason||(t.AppWakeupReason={})),function(e){e[e.Unknown=1]="Unknown",e[e.Push=2]="Push",e[e.Recents=3]="Recents",e[e.Chat=4]="Chat",e[e.IncomingRing=5]="IncomingRing",e[e.Dialpad=6]="Dialpad"}(d=t.StartupContext||(t.StartupContext={}));t.default=new class{constructor(){this._startupContext=d.Unknown,this._startupPhasesCompleted=[],this._startupScenario=new l.default(l.ScenarioName.AppStartupIntent,void 0,void 0,void 0,!0),this._startupScenario.setDuplicateStepMarkingEnabled(!0)}appColdStartup(e){r.default.appColdStartup(e),this._startupScenario.start(void 0,e),this._setScenarioTimeout(),this._maybeMarkStep("ColdStartup")}startupPhaseEnded(e,t,i){r.default.logStartupPerfDuration(e,t,void 0,i),this._startupPhasesCompleted[e]=!0,this._maybeMarkStep("Phase"+e,this._shouldOverrideDuration(e)?t:void 0,i?{intentBased:i}:void 0)}checkingAppState(e){this._fullStartupCompleted()||(this._shouldResetScenario(e)&&this._reset(),this._maybeRestartScenario(),this._maybeMarkStep("CheckAppState",void 0,{reason:c[e]}))}startedProcessingLocalNotification(e){this._fullStartupCompleted()||(this._maybeRestartScenario(),this._maybeMarkStep("StartedProcessingLocalNotification",void 0,{eventType:e}))}startedProcessingPush(e){this._fullStartupCompleted()||(this._isScenarioValid([d.Unknown])&&o.App.getActivationState()===o.Types.AppActivationState.Background?(this._setStartupContext(d.Push,!1),this._maybeMarkStep("StartedProcessingPush",void 0,{eventType:e})):this._shouldResetScenario(c.Push)&&this._reset())}pushProcessingComplete(){this._isScenarioValid([d.Push])&&(this._maybeMarkStep("PushProcessingComplete"),this._sendStartupTelemetry())}incomingCallPush(){this._setStartupContext(d.IncomingRing),this._maybeRestartScenario(),this._maybeMarkStep("IncomingCallPush")}notifyingCallee(e){this._setStartupContext(d.IncomingRing),this._maybeRestartScenario(),this._maybeMarkStep("NotifyingCallee",void 0,e),this._sendStartupTelemetry()}displayIncomingCallNotification(){this._setStartupContext(d.IncomingRing),this._maybeRestartScenario(),this._maybeMarkStep("DisplayIncomingCallNotification")}presentIncomingRing(){this._setStartupContext(d.IncomingRing),this._maybeRestartScenario(),this._maybeMarkStep("PresentIncomingRing")}callPanelRendered(){this._isScenarioValid([d.IncomingRing])?(this._maybeMarkStep("CallPanelRendered"),this._sendStartupTelemetry()):this._reset()}willNavigateToRecents(){this._setStartupContext(d.Recents),this._maybeRestartScenario(),this._maybeMarkStep("WillNavigateToRecents")}recentsWillMount(){this._maybeMarkStep("RecentsWillMount"),r.default.phase6Start()}conversationListPanelRendered(){this._isScenarioValid([d.Recents,d.Unknown,d.Push])&&(this._setStartupContext(d.Recents),this._maybeMarkStep("ConversationListPanelRendered"))}recentsRendered(){r.default.phase6End(),this._isScenarioValid([d.Recents,d.Unknown,d.Push])?(this._setStartupContext(d.Recents),this._maybeMarkStep("RecentsRendered"),this._sendStartupTelemetry()):this._reset()}willNavigateToChat(){this._setStartupContext(d.Chat),this._maybeRestartScenario(),this._maybeMarkStep("WillNavigateToChat")}messageStreamRendered(){this._isScenarioValid([d.Chat])?(this._maybeMarkStep("MessaggeStreamRendered"),this._sendStartupTelemetry()):this._reset()}willNavigateToDialpad(){this._setStartupContext(d.Dialpad),this._maybeRestartScenario(),this._maybeMarkStep("WillNavigateToDialpad")}dialpadRendered(){this._isScenarioValid([d.Dialpad])?(this._maybeMarkStep("DialpadRendered"),this._sendStartupTelemetry()):this._reset()}_shouldOverrideDuration(e){return e<=3}_maybeMarkStep(e,t,i){this._isScenarioValid()&&(this._startupScenario.markStepCompleted(e,Object.assign(Object.assign({},this._getAttributes()),i),t,!0),a.log(s.LogTraceArea.Startup,l.ScenarioName[l.ScenarioName.AppStartupIntent]+" mark step: "+e+" "+JSON.stringify(i)))}_isScenarioValid(e){return this._startupScenario.hasStarted()&&!this._startupScenario.isResolved()&&(!e||n.includes(e,this._startupContext))}_fullStartupCompleted(){return!!this._startupPhasesCompleted[5]}_setStartupContext(e,t=!0){this._fullStartupCompleted()||(this._startupContext===d.Unknown||t)&&(a.log(s.LogTraceArea.Startup,"Setting startup telemetry context "+d[e]),this._startupContext=e)}_maybeRestartScenario(){this._fullStartupCompleted()||this._startupScenario.hasStarted()||(this._startupScenario.start(),this._setScenarioTimeout())}_shouldResetScenario(e){return(this._startupContext===d.Push||this._startupContext===d.Unknown)&&e!==c.ColdStartup}_reset(){this._startupScenario.reset()}_getAttributes(){return{AppState:o.App.getActivationState(),StartupContext:d[this._startupContext],ColdStartup:this._startupScenario.isStepMarked("ColdStartup")}}_sendStartupTelemetry(){this._isScenarioValid()&&(this._startupScenario.finish(this._getAttributes()),this._startupScenario.reset())}_setScenarioTimeout(){this._startupScenario.setScenarioTimeout((()=>(this._startupScenario.fail("TimedOut",this._getAttributes()),this._reset(),!1)),6e4)}}},69203:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShowHideTransition=void 0;const n=i(96486),o=i(31844),s=i(16778),a=i(74634),r=i(97691),l=i(81169),c=i(98278),d=i(46096),u=i(36237),g=i(61253),h=i(30124),p=i(29130),m=i(22538),S=i(49603),C=i(81760),f=i(18037),y=i(97634);var _;!function(e){e[e.Fade=0]="Fade",e[e.Slide=1]="Slide"}(_=t.ShowHideTransition||(t.ShowHideTransition={}));const v={hidden:{hide:!1,showHideTransition:_.Slide},backgroundColor:{color:C.Color.white,animated:!1},translucent:!1,barStyle:{style:S.BarStyleTheme.Dark,animated:!0},networkActivityIndicatorVisible:!1};t.default=new class{constructor(){this._statusBarStyleList=[],this._statusBarHiddenInLandscape=!1,this._defaultStatusBarStyle=v,this.statusBarUpdated=new a.default,m.RegisterStartupable(this,"StatusBarManager",[p.default])}startup(){return s.StatusBar.isOverlay()&&(this._statusBarHiddenInLandscape=p.default.getDeviceOrientation(c.MainRootViewId)===o.DeviceOrientation.Landscape&&h.default.isUsingStackNavigationContext(),p.default.subscribe((()=>{this._updateStatusBarWithOrientation()}),p.TriggerKeys.Orientation),h.default.subscribe((()=>{this._updateStatusBarWithOrientation()}),h.TriggerKeys.NavContextType)),this._updateStatusBarWithOrientation(),r.Resolved()}statusBarHiddenInLandscape(){return this._statusBarHiddenInLandscape}addOrUpdateStyle(e,t,i=!1){this._addStatusBarStyleListEntry({key:e,style:t}),this._mergeAndUpdateStatusBarStyles(i)}removeStyle(e){const t=n.findIndex(this._statusBarStyleList,(t=>t.key===e));-1!==t&&(u.log(d.LogTraceArea.StatusBarManager,"StatusBarManager: Popping style for "+e),this._statusBarStyleList.splice(t,1),this._mergeAndUpdateStatusBarStyles())}setDefaultStatusBarStyle(e,t){const i=n.clone(this._defaultStatusBarStyle);i.barStyle={style:t,animated:!0},i.backgroundColor={color:e,animated:!0},this._defaultStatusBarStyle=i,this._mergeAndUpdateStatusBarStyles()}_updateStatusBarWithOrientation(){(h.default.isUsingStackNavigationContext()||this._statusBarHiddenInLandscape)&&(this._statusBarHiddenInLandscape=!(!s.StatusBar.isOverlay()||!h.default.isUsingStackNavigationContext())&&p.default.getDeviceOrientation(c.MainRootViewId)===o.DeviceOrientation.Landscape,this._statusBarHiddenInLandscape?(this._currentStatusBarStyle.hidden={hide:!0,showHideTransition:_.Slide},s.StatusBar.setHidden(!0,"slide"),this.statusBarUpdated.fire(!0)):this._mergeAndUpdateStatusBarStyles())}_addStatusBarStyleListEntry(e){const t=n.findIndex(this._statusBarStyleList,(t=>t.key===e.key));if(-1!==t){const i=this._statusBarStyleList[t];n.merge(i.style,e.style),u.log(d.LogTraceArea.StatusBarManager,"StatusBarManager: Modified old style - "+e.key)}else u.log(d.LogTraceArea.StatusBarManager,"StatusBarManager: Pushed new style - "+e.key),this._statusBarStyleList.push(e)}_mergeAndUpdateStatusBarStyles(e=!1){const t=(0,l.chain)(this._statusBarStyleList,(0,l.map)((e=>e.style)),(0,l.reduce)(((e,t)=>n.merge(e,t)),this._defaultStatusBarStyle));this._setStatusBarStyles(t,e)}_setStatusBarStyles(e,t=!1){!t&&this._currentStatusBarStyle&&(0,g.default)(this._currentStatusBarStyle.hidden,e.hidden)||(this._statusBarHiddenInLandscape?e.hidden.hide=!0:(s.StatusBar.setHidden(e.hidden.hide,this._getShowHideTransition(e.hidden.showHideTransition)),this.statusBarUpdated.fire(e.hidden.hide))),!t&&this._currentStatusBarStyle&&(0,g.default)(this._currentStatusBarStyle.backgroundColor,e.backgroundColor)||s.StatusBar.setBackgroundColor(e.backgroundColor.color,e.backgroundColor.animated),!t&&this._currentStatusBarStyle&&(0,g.default)(this._currentStatusBarStyle.translucent,e.translucent)||s.StatusBar.setTranslucent(e.translucent),!t&&this._currentStatusBarStyle&&(0,g.default)(this._currentStatusBarStyle.barStyle,e.barStyle)||s.StatusBar.setBarStyle(this._getBarStyleTheme(e.barStyle.style),e.barStyle.animated),!t&&this._currentStatusBarStyle&&(0,g.default)(this._currentStatusBarStyle.networkActivityIndicatorVisible,e.networkActivityIndicatorVisible)||s.StatusBar.setNetworkActivityIndicatorVisible(e.networkActivityIndicatorVisible),this._currentStatusBarStyle=n.cloneDeep(e)}_getShowHideTransition(e){switch(e){case _.Fade:return"fade";case _.Slide:default:return"slide"}}_getBarStyleTheme(e){switch(e){case S.BarStyleTheme.Default:return this._defaultBarStyle();case S.BarStyleTheme.Light:return"light-content";case S.BarStyleTheme.Dark:return"dark-content";default:return"default"}}_defaultBarStyle(){return"default"}_isDarkTheme(){let e;return e=f.default.colorTheme(),y.isDarkTheme(e)}}},95874:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(2604),s=i(97691),a=i(89391),r=i(94224),l=i(9520),c=i(2278),d=i(71727),u=i(47447),g=i(46096),h=i(36237),p=i(72490),m=i(78735),S=i(30124),C=i(81736),f=i(83181),y=i(22538),_=i(40363),v=i(78262),b=i(53374);t.default=new class{constructor(){this._onAcceptCallHotKey=()=>{c.default.trackSystemHotKey(l.SystemHotKeyCallAction.Accept);const e=b.default.newCauseId(),t=r.default.CallingStore.getIncomingCallIds(),i=n.head(t);if(n.isEmpty(t)||!i)return h.log(g.LogTraceArea.CallingUI,"SystemHotKeyService._onAcceptCallHotKey: No incoming calls found to answer causeId:"+e),!1;if(1!==t.length)return h.log(g.LogTraceArea.CallingUI,"SystemHotKeyService._onAcceptCallHotKey: Have "+r.default.CallingStore.getIncomingCallIds().length+" incoming calls, only 1 supported. Doing nothing"),!1;{const t=r.default.CallingStore.getCallConversationMri(i);if(!t)return h.log(g.LogTraceArea.CallingUI,"SystemHotKeyService._onAcceptCallHotKey: No Mri found callId:"+i+" causeId:"+e),!1;{h.log(g.LogTraceArea.CallingUI,"SystemHotKeyService._onAcceptCallHotKey: Answering call callId:"+i+" causeId:"+e);const n=!_.default.isWindows10Plus();r.default.CallNavigationHelper.answerOrJoinCall({conversationMri:t,callId:i,skipNavigation:!1,autoAnswer:!1,knownToBeAnswer:n,origin:g.NavigationCallOrigin.CallControls},e)}}return!0},this._onRejectCallHotKey=()=>{c.default.trackSystemHotKey(l.SystemHotKeyCallAction.Reject);const e=b.default.newCauseId();let t=!1;if(n.each(r.default.CallingStore.getIncomingCallIds(),(i=>{h.log(g.LogTraceArea.CallingUI,"SystemHotKeyService._onRejectCallHotKey: Rejecting call callId:"+i+" causeId:"+e),r.default.CallingStore.rejectCall(i,e),t=!0})),!t){const i=r.default.CallingStore.getConnectedAndNotOnHoldCallId();i&&(h.log(g.LogTraceArea.CallingUI,"SystemHotKeyService._onRejectCallHotKey: Ending active call callId:"+i+" causeId:"+e),r.default.CallingStore.endCall(i,e),t=!0)}return t},this._onToggleMute=()=>{if(!S.default.isUsingSplitViewNoSubscription()&&p.default.hasRegisteredMultipleHandlers(g.KeyboardShortcut.ToggleMicrophone))return!1;c.default.trackSystemHotKey(l.SystemHotKeyCallAction.Mute);const e=b.default.newCauseId();if(C.default.permissionStatus(v.PermissionType.Microphone)!==o.PermissionStatus.Granted)return h.log(g.LogTraceArea.CallingUI,"SystemHotKeyService._onToggleMute: Toggle mute failed causeId:"+e),!1;{h.log(g.LogTraceArea.CallingUI,"SystemHotKeyService._onToggleMute: Toggle mute causeId:"+e);const t=r.default.CallingStore.getConnectedAndNotOnHoldCallId();if(!t)return h.log(g.LogTraceArea.CallingUI,"SystemHotKeyService._onToggleMute: No active calls found causeId:"+e),!1;c.default.updateCallTelemetry(t,e,(e=>e.muteSystemHotKeyPress())),r.default.CallingStore.isMuted(t)?(r.default.CallingStore.unmute(t,e),d.default.announceMicrophoneState(!1)):(r.default.CallingStore.mute(t,e),d.default.announceMicrophoneState(!0))}return!0},y.RegisterStartupable(this,"SystemHotKeyService"),this._stateStoreSubToken=void 0}startup(){return u.UICapabilities.systemHotKeysSupported()&&(this._initializeSystemHotKeyService(),h.log(g.LogTraceArea.CallingUI,"SystemHotKeyService.startup: System hotkey enabled. Has subscribed to service state store changes")),s.Resolved()}_initializeSystemHotKeyService(){this._stateStoreSubToken=f.default.subscribe((()=>{f.default.isInCallEstablishment()||f.default.isInCall()?this._registerSystemHotKeys():this._unRegisterSystemHotKeys()}),f.TriggerKeys.CallingStatusKey),m.default.subscribe((()=>{if(this._stateStoreSubToken){m.default.getUserPreferencesLocal().enableSystemHotKeys?(h.log(g.LogTraceArea.CallingUI,"SystemHotKeyService: System hotkey enabled from settings"),this._registerSystemHotKeys()):(h.log(g.LogTraceArea.CallingUI,"SystemHotKeyService: System hotkey disabled from settings"),this._unRegisterSystemHotKeys())}}))}_registerSystemHotKeys(){m.default.getUserPreferencesLocal().enableSystemHotKeys&&(this._unRegisterSystemHotKeys(),(r.default.CallingStore.hasConnectedCalls()||f.default.isInCall()&&!f.default.isInCallEstablishment())&&(p.default.addSystemHandler(g.KeyboardShortcut.ToggleMicrophone,this._onToggleMute),p.default.addSystemHandler(g.KeyboardShortcut.HangupOrRejectCall,this._onRejectCallHotKey)),f.default.isInCallEstablishment()&&(a.default.getS4LCMCFeaturesNoSubscription().enableRequestNewAppInitiatedCallAPI&&p.default.addSystemHandler(g.KeyboardShortcut.AcceptIncomingCall,this._onAcceptCallHotKey),p.default.addSystemHandler(g.KeyboardShortcut.HangupOrRejectCall,this._onRejectCallHotKey)))}_unRegisterSystemHotKeys(){p.default.removeSystemHandler(g.KeyboardShortcut.ToggleMicrophone,this._onToggleMute),p.default.removeSystemHandler(g.KeyboardShortcut.AcceptIncomingCall,this._onAcceptCallHotKey),p.default.removeSystemHandler(g.KeyboardShortcut.HangupOrRejectCall,this._onRejectCallHotKey)}}},98762:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextNotificationToastMessage=t.SkypeNotificationToastMessage=t.ScheduledCallToastMessage=void 0;const n=i(96486),o=i(16778),s=i(74634),a=i(60),r=i(98278),l=i(99686),c=i(17093),d=i(30124),u=i(27357),g=i(86045);class h{constructor(e,t,i,n){this.skypeMessage=e,this.scheduledCallInfo={type:t,initiator:i,subject:n}}}t.ScheduledCallToastMessage=h;class p{constructor(e){this.message=e}}t.SkypeNotificationToastMessage=p;class m{constructor(e,t,i){this.textMessage=e,this.conversationId=t,this.onToastDismissed=i}}t.TextNotificationToastMessage=m;t.default=new class{constructor(){this.event_localNotificationReady=new s.default,this._notificationsToPop=[],this._toastCurrentlyShowing=!1,a.default.subscribeForChanges("ToastService",(()=>{this._showToastMessageIfNeeded()}))}scheduleTextMessage(e,t,i){this._notificationsToPop.push(new m(e,t,i)),this._showToastMessageIfNeeded()}scheduleSkypeMessage(e){this._notificationsToPop.push(new p(e)),this._showToastMessageIfNeeded()}scheduleMessageForScheduledCall(e,t,i,n){this._notificationsToPop.push(new h(e,t,i,n)),this._showToastMessageIfNeeded()}hideCurrentToastMessage(){this._toastCurrentlyShowing=!1,this._showToastMessageIfNeeded()}showMessageForScreenReaders(){if(g.default.isMobileScreenReaderEnabled())if(d.default.isUsingStackNavigationContextNoSubscription()){if(u.default.isHubOnTopOfNavStackNoSubscription())return!0}else{const e=u.default.getCompositeMainStageNavViewModeNoSubscription(r.MainRootViewId);if(e!==c.MainStageNavViewMode.Call&&e!==c.MainStageNavViewMode.ForcedUpgradeScreen)return!0}return!1}_shouldShowSkypeConversationMessages(e){if(this.showMessageForScreenReaders())return!0;const t=u.default.getActiveConversationId(r.MainRootViewId);return!(!t||t===e.conversationId&&l.default.isCurrentUserActive())}_showToastMessageIfNeeded(){const e=n.head(this._notificationsToPop);if(o.App.getActivationState()===o.Types.AppActivationState.Active&&!this._toastCurrentlyShowing){if(e&&e instanceof p){if(!this._shouldShowSkypeConversationMessages(e.message))return n.remove(this._notificationsToPop,(e=>e instanceof p)),void this._showToastMessageIfNeeded()}this.event_localNotificationReady.fire(e),e&&(this._notificationsToPop.shift(),this._toastCurrentlyShowing=!0)}}}},61967:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(9682),s=i(74634),a=(i(89391),i(46096),i(22538));i(40363);t.default=new class{constructor(){this._responseQueue={},this.event_response=new s.default,this.event_progress=o.default.onProgress,a.RegisterStartupable(this,"TransferResponseQueueService",[])}startup(){o.default.onResponse.subscribe(((e,t)=>{this._responseQueue[e]={id:e,success:!0,response:t},this.event_response.fire()})),o.default.onClientFailure.subscribe(((e,t)=>{this._responseQueue[e]={id:e,success:!1,response:t},this.event_response.fire()}));return o.default.getKnownRequestIdsAtStartup(!1).then((e=>{this._startupActiveTransferIds=n.keyBy(e)}))}wasTransferIdKnownDuringStartup(e){return!(!this._startupActiveTransferIds||!this._startupActiveTransferIds[e])}hasTransferResponses(){return!n.isEmpty(this._responseQueue)}drainResponseQueue(){const e=this._responseQueue;return this._responseQueue={},e}}},8188:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74958),o=i(97691),s=i(89391),a=i(22538),r=i(27795),l=i(35478);t.default=new class{constructor(){n.RootToolsManager.setDelegate(this),a.RegisterStartupable(this,"UnifiedLoggingService")}startup(){return s.default.subscribe((()=>n.RootToolsManager.OnEcsChange())),n.RootToolsManager.OnEcsChange(),o.Resolved()}fetchEcsConfig(e,t){if("SkypeRootTools"===e&&"ULBaseline"===t){let e=s.default.getSkypeRootToolsConfig();return o.Resolved(e?e[t]:{})}return o.Resolved(s.default.getULLogUploadConfig(e,t))}sendTelemetry(e,t){l.default.addEvent(new r.LogUploadEvent(e,t))}}},67096:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(97691),s=i(46096),a=i(36237),r=i(21328),l=i(22538),c=i(63066);t.default=new class{constructor(){this._scenarioQueue={},this._scenarioTimestamps={},this._firstSuccessfulSearch=!1,l.RegisterStartupable(this,"UserActionsTelemetryService")}startup(){return o.Resolved()}setScenarioTimestamp(e,t){this._scenarioTimestamps[e]=t||Date.now()}resetScenarioTimestamp(e){this._getScenarioTimestamp(e)&&delete this._scenarioTimestamps[e]}onSearchPanelUnmount(e,t){this.resetScenarioTimestamp(e),this._firstSuccessfulSearch||(a.track(new c.UserActionsTelemetryEvent({firstSuccessfulSearch:!1})),t&&(this._scenarioQueue=n.omit(this._scenarioQueue,this._getScenarioUniqueId(t,e)))),this._firstSuccessfulSearch=!1}initiateScenario(e,t,i={}){a.log(s.LogTraceArea.UserActionsTelemetry,"UserActionsTelemetryService initiateScenario"),this._createScenario(e,t,i)}track(e){return this._sendScenarios(e)}sendScenario(e){const t=this._getScenario(e.ref,e.scenarios[0]),i=this._getScenarioDuration(t);let n=!1;i&&t&&(a.log(s.LogTraceArea.UserActionsTelemetry,"UserActionsTelemetryService sendScenario"),e.scenarios[0]===c.Scenarios.SearchToConversation&&(n=r.default.isAbsoluteSuccessSearch(e)),!this._firstSuccessfulSearch&&n?(this._firstSuccessfulSearch=!0,a.track(new c.UserActionsTelemetryEvent({name:e.name,duration:i,scenario:e.scenarios[0],additionalAttributes:t.additionalAttributes,firstSuccessfulSearch:!0}))):a.track(new c.UserActionsTelemetryEvent({name:e.name,duration:i,scenario:e.scenarios[0],additionalAttributes:t.additionalAttributes})),this._deleteScenario(e.ref,e.scenarios[0]))}interruptScenarios(e,t){n.each(t,(t=>this._interruptScenario(e,t)))}clearScenarios(e,t){n.each(t,(t=>this._deleteScenario(e,t)))}_sendScenarios(e){n.each(e.scenarios,(t=>{if(this._getScenario(e.ref,t)){const i=Object.assign(Object.assign({},e),{scenarios:[t]});return this.sendScenario(i)}}))}_getDurationInSeconds(e){return Math.floor((Date.now()-e)/1e3)}_getScenarioDuration(e){return this._getDurationInSeconds(e.timestamp)}_interruptScenario(e,t){this.track({ref:e,scenarios:[t],name:c.Actions.InterruptScenario})}_deleteScenario(e,t){this._scenarioQueue=n.omit(this._scenarioQueue,this._getScenarioUniqueId(e,t))}_getScenario(e,t){return this._scenarioQueue[this._getScenarioUniqueId(e,t)]}_getScenarioUniqueId(e,t){return`${e}_${t}`}_createScenario(e,t,i={}){const n=this._getScenarioUniqueId(e,t);this._scenarioQueue[n]={timestamp:this._getScenarioTimestamp(t)||Date.now(),additionalAttributes:i}}_getScenarioTimestamp(e){return this._scenarioTimestamps[e]}}},89125:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debug_existingCacheFolderInfo=void 0;const n=i(74958),o=i(96486),s=i(43413),a=i(74634),r=i(97691),l=i(62141),c=i(46096),d=i(53559),u=i(36237),g=i(4057),h=i(12770);t.debug_existingCacheFolderInfo={count:0};t.default=class{constructor(e,i=[]){this.cacheUpdated=new a.default,this._infos={},this._totalSize=0,this.CacheName=e,this.BaseUri=s.default.getLocalUriBase(e),t.debug_existingCacheFolderInfo.count++,s.default.isLocalCacheSupported()&&o.each(i,(e=>{const t=h.default.setExpiration(this._timerExpiredCallback(e),e.expiration);this._infos[e.id]={pending:!1,addedPromise:r.Resolved(),meta:e,timer:t},this._totalSize+=e.size||0}))}static isLocalCacheSupported(){return s.default.isLocalCacheSupported()}getAllMeta(){return o.map(this._infos,(e=>e.meta))}getTotalSize(){return this._totalSize}getMeta(e){return this._infos[e]&&this._infos[e].meta}getUri(e){const t=this._infos[e];if(t&&!t.pending)return s.default.getLocalUri(this.CacheName,this._infos[e].meta.filename)}addFile(e,t,i,n,o,s){return this._add(e,t,i,n,o,s,!0)}addMetadata(e,t,i,n,o){return this._add(e,t,i,n,!1,o,!1)}_add(e,t,i,n,o,a,c){if(this._infos[e]){const t='FileCacheMetadataService already knows a file with that id: refusing to "'+(c?o?"copy":"move":"add")+'", cacheName: '+this.CacheName+", id: "+e;return r.Rejected(t)}const d={id:e,cacheName:this.CacheName,filename:i,expiration:n,context:a},u=r.Resolved().then((()=>this._blockFolderChangesPromise)).then((()=>l.default.putFileCacheMetadata(d).then((()=>{if(c)return s.default.save(this.CacheName,t,i,o).then((e=>(d.size=e.size,this._totalSize+=d.size||0,l.default.putFileCacheMetadata(d))))})))),g=h.default.setExpiration(this._timerExpiredCallback(d),d.expiration),p={pending:!0,meta:d,addedPromise:u,timer:g};return this._infos[d.id]=p,u.then((()=>{p.pending=!1,this.cacheUpdated.fire(e)}))}removeFile(e){return this._remove(e,!0)}removeMetadata(e){return this._remove(e,!1)}_remove(e,t){const i=this._infos[e];return i?(i.timer&&(h.default.clearExpiration(i.timer),i.timer=void 0),i.removedPromise||(i.removedPromise=i.addedPromise.always((()=>this._blockFolderChangesPromise)).then((()=>l.default.removeFileCacheMetadata(this.CacheName,e).then((()=>{if(delete this._infos[e],this._totalSize-=i.meta.size||0,t)return this._cacheRemove(this.CacheName,i.meta.filename)}))))),i.removedPromise.finally((()=>this.cacheUpdated.fire(e)))):r.Resolved()}_cacheRemove(e,t){const i=[s.default.remove(e,t)];return d.default.isImageExtension(d.default.extractFileExtension(t))&&i.push(s.default.evictFromImageCache(e,t).catch(o.noop)),r.all(i).then(o.noop)}updateExpiration(e,t){const i=this._infos[e];return i?i.addedPromise.then((()=>{if(!i.removedPromise&&i.meta.expiration!==t)return i.timer&&(h.default.clearExpiration(i.timer),i.timer=void 0),i.meta.expiration=t,i.timer=h.default.setExpiration(this._timerExpiredCallback(i.meta),t),l.default.putFileCacheMetadata(i.meta)})).done((()=>this.cacheUpdated.fire(e))).catch(o.noop):r.Resolved()}cleanupMissingFilesAndMetadata(){if(this._blockFolderChangesPromise)return this._blockFolderChangesPromise;const e=o.flatMap(this._infos,(e=>[e.addedPromise,e.removedPromise])),t=o.map(e,(e=>e&&e.catch(o.noop)));return this._blockFolderChangesPromise=r.all(t).then((()=>s.default.getAllCachedFileNames(this.CacheName))).then((e=>{const t=o.keyBy(e),i=o.keyBy(this._infos,(e=>e.meta.filename));o.each(e,(e=>{i[e]||this._cacheRemove(this.CacheName,e).catch((t=>{u.log(c.LogTraceArea.FileCacheMetadataService,"Ignoring FileCache error during cleanup: cacheName: "+n.pii.Omit(this.CacheName)+", filename: "+n.pii.Omit(e)+", error: "+g.default.errorAsString(t))}))})),o.each(i,((e,i)=>{e.pending||t[i]||this.removeFile(e.meta.id).catch((t=>{u.log(c.LogTraceArea.FileCacheMetadataService,"Ignoring error during cleanup: cacheName: "+n.pii.Omit(this.CacheName)+", id: "+n.pii.Omit(e.meta.id)+", error: "+g.default.errorAsString(t))}))}))})).always((()=>{this._blockFolderChangesPromise=void 0})),this._blockFolderChangesPromise}debug_removeAll(){const e=o.map(this._infos,(e=>this.removeFile(e.meta.id).catch((t=>{u.log(c.LogTraceArea.FileCacheMetadataService,"Ignoring error during debug: cacheName: "+n.pii.Omit(this.CacheName)+", id: "+n.pii.Omit(e.meta.id)+": error: "+g.default.errorAsString(t))}))));return r.all(e).then(o.noop)}_timerExpiredCallback(e){return()=>{u.log(c.LogTraceArea.FileCacheMetadataService,"Removing expired file from cache: "+n.pii.Omit(this.CacheName)+", id: "+n.pii.Omit(e.id)),this._remove(e.id,!0)}}}},79777:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(89125),s=i(62141),a=i(22538);t.default=new class{constructor(){a.RegisterStartupable(this,"FileCacheMetadataService")}startup(){return o.debug_existingCacheFolderInfo.count=0,this._claimedCaches={},s.default.getAllFileCacheMetadata().then((e=>{this._startupCacheMetas=n.groupBy(e,(e=>e.cacheName))}))}isLocalCacheSupported(){return o.default.isLocalCacheSupported()}getCache(e){if(this._claimedCaches[e])return this._claimedCaches[e];const t=new o.default(e,this._startupCacheMetas[e]);return this._claimedCaches[e]=t,delete this._startupCacheMetas[e],t}}},7234:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CacheEvictionKind=void 0;const n=i(96486),o=i(74634),s=i(97691),a=i(46096),r=i(79777),l=i(72685),c=i(36237),d=i(49130),u=i(22538),g=i(4057),h=i(27795),p=i(12770),m="FileCache";!function(e){e[e.Unknown=0]="Unknown",e[e.UserInvolved=100]="UserInvolved",e[e.Preview=200]="Preview",e[e.Image=300]="Image",e[e.Video=400]="Video"}(t.CacheEvictionKind||(t.CacheEvictionKind={}));const S=25e7;t.default=new class{constructor(){this.cacheUpdated=new o.default,this._dontPerformEviction=!1,u.RegisterStartupable(this,"FileCacheService",[r.default,l.default])}startup(){return this._cache=r.default.getCache(m),this._cache.cacheUpdated.subscribe((e=>{this.cacheUpdated.fire(e)})),this.isLocalCacheSupported()&&l.default.setRefreshOptions("FileCacheService",{interval:432e5,callback:()=>{if(this._cache)return this._cache.cleanupMissingFilesAndMetadata()},nextExecution:Date.now(),taskTypeFlags:l.TaskTypeFlags.CpuIntensive}),s.Resolved()}isLocalCacheSupported(){return r.default.isLocalCacheSupported()}isKnown(e){return!!this._cache&&!!this._cache.getMeta(e)}getLocalUri(e){if(this._cache)return this._cache.getUri(e)}save(e,t,i,n,o,a,r){if(!this._cache)return s.Rejected("FileCacheService not started.");const{uniqueFilename:l,baseFilename:c}=this._getUniqueSanitizedFilenameInfo(i),d={originalFilename:i,originalBaseFilename:c,evictionKind:a,evictionRank:r,extension:this._getOriginalExtension(i)};return this._cache.addFile(e,t,l,n,o,d).then((()=>{this._checkFilesFitInCache()}))}remove(e){return this._cache?this._cache.removeFile(e):s.Rejected("FileCacheService not started.")}_checkFilesFitInCache(){if(this._dontPerformEviction)return;if(!this._cache)return;const e=this._cache.getTotalSize();if(e>S){const t=n.filter(this._cache.getAllMeta(),(e=>e.context&&!!e.context.evictionKind)),i=n.groupBy(t,(e=>e.context.evictionKind)),o=n.sortBy(i,((e,t)=>-t));let r=e-2e8;const l=[];n.each(o,(e=>{const t=n.sortBy(e,(e=>e.context.evictionRank));return n.each(t,(e=>{if(e.size)return l.push(e.id),r-=e.size||0,r>0})),r>0})),c.log(a.LogTraceArea.GenericUnsafe,"Evicting ids: "+l.join(", "));const d=n.map(l,(e=>{if(this._cache)return this._cache.removeFile(e).catch((t=>{const i=this._cache?this._cache.CacheName:m;c.log(a.LogTraceArea.GenericUnsafe,"Ignoring error during size cleanup: cacheName: "+i+", id: "+e+", error: "+g.default.errorAsString(t))}))}));this._dontPerformEviction=!0,s.all(d).always((()=>p.default.sleep(3e4).always((()=>{this._dontPerformEviction=!1,this._checkFilesFitInCache()}))))}}_getOriginalExtension(e){const t=e.lastIndexOf(".");return-1===t?"":e.substr(t+1)}_getUniqueSanitizedFilenameInfo(e){const t=d.lossyForUserFile(e),i=t.lastIndexOf("."),o=-1===i?t:t.substring(0,i),s=-1===i?"":t.substr(i),a=o.replace(/(-\d+)+$/,""),r=a.toLowerCase(),l=n.filter(this._cache?this._cache.getAllMeta():[],(e=>e.context.originalBaseFilename.toLowerCase()===r)),u=t.toLowerCase(),g=n.every(l,(e=>e.filename.toLowerCase()!==u));if(!l.length||g)return{uniqueFilename:t,baseFilename:a};const p=n.keyBy(l,(e=>e.filename.toLowerCase())),m=2+l.length;for(let e=1;e<m;e++){const t=o+("-"+e)+s;if(!p[t.toLowerCase()])return{uniqueFilename:t,baseFilename:a}}return c.track(new h.DevAlert("FileCache failed to generate unique filename")),{uniqueFilename:o+"-"+Date.now()+s,baseFilename:a}}}},53700:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(97691),o=i(46096),s=i(79777),a=i(70004),r=i(72685),l=i(36237),c=i(22538),d=i(4057);class u{constructor(e=[]){this._dependencies=e,c.RegisterStartupable(this,"FileUploadCache",this._dependencies)}getDependencies(){return this._dependencies}startup(){return n.Resolved()}isLocalCacheSupported(){return s.default.isLocalCacheSupported()}isKnown(e){return!1}getSize(e){}saveFileIfSupported(e,t){return n.Resolved()}finishedButKeepForRetry(e){return n.Resolved()}finished(e){return n.Resolved()}abandon(e){return n.Resolved()}}const g=s.default.isLocalCacheSupported()?new class extends u{constructor(){super([s.default,r.default])}startup(){return this._cache=s.default.getCache(a.internal_cacheConfig.DefaultCacheName),this.isLocalCacheSupported()&&r.default.setRefreshOptions("FileUploadCache",{interval:864e5,callback:()=>this._cache.cleanupMissingFilesAndMetadata(),nextExecution:Date.now(),taskTypeFlags:r.TaskTypeFlags.CpuIntensive}),n.Resolved()}isKnown(e){return!!this._cache.getMeta(e)}getSize(e){let t=this._cache.getMeta(e);return t&&t.size}saveFileIfSupported(e,t){if(e&&t&&this.isLocalCacheSupported()){const i=e.file.uri;return this._cache.addFile(t.name,i,t.name,Date.now()+7776e6,t.asCopy,{})}return n.Resolved()}finishedButKeepForRetry(e){return this._cache.updateExpiration(e,Date.now()+6048e5)}finished(e){return this._cache.updateExpiration(e,Date.now()+18e4)}abandon(e){return this._cache.removeFile(e).catch((e=>{l.log(o.LogTraceArea.FileUploadCache,"Ignoring abandon failure: "+d.default.errorAsString(e))}))}}:new u;t.default=g},99097:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74958),o=i(96486),s=i(43413),a=i(2604),r=i(97691),l=i(98278),c=i(46096),d=i(36237),u=i(81736),g=i(64956),h=i(22538),p=i(4057),m=i(78262);t.default=new class{constructor(){h.RegisterStartupable(this,"PublicDownloadsFolderService",[u.default])}startup(){return r.Resolved()}copyToDownloadsFolder(e,t){return s.default.copyToDownloadFolder(e,t).then(o.identity,(e=>{d.error(c.LogTraceArea.PublicDownloadsFolderService,"Failed to copy file to public Downloads folder: "+p.default.errorAsString(e))}))}copyToUri(e,t){return s.default.copyToUri(e,t).then(o.identity,(e=>{d.error(c.LogTraceArea.PublicDownloadsFolderService,"Failed to copy file to path ["+n.pii.Omit(t)+" ]: "+p.default.errorAsString(e))}))}androidRemoveFromPublicFolder(e){return s.default.removeFromDownloadFolder(e).catch((t=>(d.error(c.LogTraceArea.PublicDownloadsFolderService,"Failed to remove file "+n.pii.Omit(e)+"from android public folder after timeout: is there anything we can do? "+p.default.errorAsString(t)),!1)))}requestCameraRollPermission(){const e=m.PermissionType.CameraRoll;return u.default.permissionStatus(e)===a.PermissionStatus.Granted?r.Resolved(!0):(d.log(c.LogTraceArea.PublicDownloadsFolderService,"Checking for CameraRoll permission"),u.default.requestPermission(e,m.PermissionPromptOptions.SkipPrePrompt|m.PermissionPromptOptions.PromptAgainIfDenied).then((t=>t===a.PermissionStatus.Granted?(d.log(c.LogTraceArea.PublicDownloadsFolderService,"CameraRoll permission granted"),!0):(g.default.showDeniedPromptWithSettingsOption(e,l.MainRootViewId),d.log(c.LogTraceArea.PublicDownloadsFolderService,"CameraRoll permission declined"),!1))).catch((e=>(d.log(c.LogTraceArea.PublicDownloadsFolderService,"CameraRoll permission error",p.default.errorAsString(e)),!1))))}}},62141:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDatabaseTransaction=t.Indexes=t.Stores=t.InternalKeys=void 0;const n=i(96486),o=i(18081),s=i(97691),a=i(1919),r=i(14602),l=i(95314),c=i(38438),d=i(9001),u=i(85455),g=i(82842),h=i(46096),p=i(36237),m=i(12692),S=i(36402);let C=51;C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C+=2,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,C++,t.InternalKeys={SkypeToken:"skypetoken2",AMSCookieSkypeToken:"priv_amscookieskypetoken2",TeamsCookieSkypeToken:"priv_teamscookieskypetoken",MSARefreshToken:"msarefreshtoken",MsaUserInternalToken:"msaUserInternalToken",CdnToken:"cdntoken",ApsETag:"priv_apsetag_v3",ApsFeaturedAgentsETag:"priv_apsfeaturedagentsetag_v2",ApsIntegrationsETag:"priv_apsintegrationsetag_v2",ContactsDeltaSyncETag:"contactsdeltasyncetag_v17",ContactsNextFullSync:"contacts_next_fullsync",Prefs:"priv_prefs_v2",PrefsLocal:"priv_prefsLocal",ConversationListSyncInfo:"priv_convlistsyncinfov14",ContactMris:"priv_contactusernames_v4",ContactInvites:"priv_contactinvites",AddressBookContactHashes:"priv_addressbookcontacthashes_v2",EcsConfig:"priv_ecscache",EngagementCampaignData:"priv_engagementcampaigndata",PesConfigInfo:"priv_pesconfiginfo",PesTabs:"priv_pestabs",Emoticons:"priv_emoticons",RecentlyUsedEmoticons:"priv_mru_emoticons",CustomReactionsTones:"priv_crt_reactions",LastlyUsedEmoticonTones:"priv_lut_emoticons",LastlyUsedEmoticonGroupItem:"priv_luegi_emoticons",Mojis:"priv_mojis",RecentlyUsedMojis:"priv_mru_mojis",PhoneCountryCache:"priv_phonecountrycache_v4",DeviceId:"priv_deviceid",LastDBCleanupVersion:"lastCleanupVersion",MyUserStoreData:"priv_myuserstore",ChatServiceRegToken:"priv_csregtoken",EntitlementsData:"priv_EntitlementsData",LastOverlayConfigurationETag:"priv_lastOverlayConfigurationETag",ChatServiceSessionInfo_deprecated:"chatservicesessioninfo",InfoRefreshServiceCache:"priv_inforefreshcache",ContactsDirtyBit:"priv_contactsdirtybit_v5",ContactInvitesDirtyBit:"priv_contactinvitesdirtybit",SyncAddressBookEnabled:"priv_syncaddressbookenabled",PhoneRegisteredWithShortCircuitCheckCompleted:"phoneRegisteredWithShortCircuitCheckCompleted",BingSearchConfig:"bingsearchconfigdata",EdfRegistrationInfo:"priv_pnhregistrationinfo",PreferedDevices:"preferedDevices",NdiConfig:"ndiConfig",MyUserColor:"priv_myUserColor",PendingMediaPrefetchV1:"priv_pendingMediaPrefetch",PendingMediaPrefetch:"priv_pendingMediaPrefetch_v2",WebOfferStoreCache:"priv_webofferstorecache",IOSOfferStoreCache:"priv_iosofferstorecache",GPlayCreditOffersCache:"priv_gplaycreditofferscache",GPlaySubscriptionsOffersCache:"priv_gplaysubsofferscache",NativeSNOfferStoreCache:"priv_nativesnofferstorecache",BillingInformationCache:"priv_billinginformation",PersonalizedOfferStoreCache:"priv_personalizedofferstorecache",NativePersonalizedOfferStoreCache:"priv_nativepersonalizedofferstorecache",PurchaseOptionsStoreCache:"priv_purchaseoptionsstorecache",BlockedMriStoreCache:"priv_blockeduserstorecache",PesStickerInCaptureConfigInfo:"priv_pesstickercaptureconfiginfo",PesStickerInChatConfigInfo:"priv_pesstickerchatconfiginfo",PesStickerInCaptureTabs:"priv_pesstickercapturetabs",PesStickerInChatTabs:"priv_pesstickerchattabs",StickersInCapture:"priv_stickerscapture",StickersInChat:"priv_stickerschat",RecentlyUsedStickersInCapture:"priv_mru_stickerscapture",RecentlyUsedStickersInChat:"priv_mru_stickerschat",RecentlyUsedEffectsInCapture:"priv_mru_effectscapture",PesGifConfigInfo:"priv_pesgifconfiginfo",PesGifTabs:"priv_pesgiftabs",AgentMrisToImportantize:"AgentMrisToImportantize",SuggestionFeedbackMessageIds:"priv_suggestionsFeedbackClicked",SuggestionsData:"priv_suggestionsData",DeviceStoreSettings:"DeviceStoreSettings",EndToEndEncryptionData:"e2eeData",SecureDeviceId:"priv_securedeviceid",Integrations:"integrations",MyUserPresence:"priv_myUserPresence",ClockSkew:"priv_clockSkew",EngagementUserTaggingConfig:"engagement_user_tagging_config",ActiveCalls:"priv_activeCalls",PrivateConversations:"privateConversations",TransferServicesMeta:"TransferServicesMeta",IsOnGoGoSSID:"priv_isOnGoGoSSID",EcsParamCache:"priv_ecsParamCache",SharedIdServiceCache:"priv_sharedidcache",CelebrationNotificationLastShownTime:"priv_celebrationNotificationLastShownTime",AppActivity:"priv_appactivity",AuthTokenLastRefreshDate:"authtokenlastrefreshdate",AuthTokenNextRefreshDate:"authtokennextrefreshdate",MyUserProfileV2:"MyUserProfileV2",LocalOverriddenEcsConfig:"priv_localoverrideecscache",CallCaptionsCleanupStartTimestamp:"callcaptionscleanupstarttimestamp",CallCaptionsCleanupEndTimestamp:"callcaptionscleanupendtimestamp",CallerIdCountryCodes:"calleridcountrycodes",CallerIdLastPrimaryNumberId:"priv_calleridlastprimarynumberid",SendCreditOptions:"priv_sendcreditoptions"},t.Stores={Conversations:"conversationsv14",Alerts:"alertsv12",PopCards:"popupcards",InternalData:"internaldata",Messages:"messagesv12",Profiles:"profilecachev8",ProfileMinis:"miniprofilecachev8",Telemetry:"telemetrycachev3",Agents:"agentscachev3",FeaturedAgents:"featuredagentscache",AgentIdUserIdPairs:"priv_agentiduseridpairs",IntegrationConsents:"priv_integrationconsents",PersistentActions:"persistentActionsv2",LocalNotifications:"localnotificationsv2",FileCacheMetadata:"fileCachemetadata",FileTracker:"fileTracker",LocalAddressBookContacts:"localAddressBookContacts",ImagePrefetchInfo:"imagePrefetchInfo",Connectors:"connectors",EngagementPullCampaigns:"engagementpullcampaigns",ConsumedConciergeBotMessages:"consumedconciergebotmsgs",CallLogs:"calllogs",Drafts:"drafts",EngagementMessagesQueueStore:"engagementMessagesQueue",MediaDrafts:"mediadrafts"},t.Indexes={Conversations_IsHighlight_HasUnread:"convHlHasUnread",Conversations_IsHighlight_ForceToRecents_Timestamp:"convHlRecentsTimestamp",Conversations_NeedsSync:"convNeedsSync",Conversations_SearchTerms:"searchTerms",Alerts_Read_Timestamp:"alertsReadTimestamp",Alerts_ConvId:"alertsConvid",Agents_Important:"agentsImportant",Agents_Whitelisted:"agentsWhitelisted",Messages_ConversationId_CreatedTime:"convidcreatedtime",Messages_ConversationId_CountsType_CreatedTime:"convidcountscreatedtime",Messages_ConversationId_IsMyMessage_CreatedTime:"convidmymessagecreatedtime",Profiles_PhoneNumber:"phoneNumbersIndex",Telemetry_Priority_Timestamp:"prioritytimestamp"};class f extends d.ClientDatabaseBase{constructor(){super(...arguments),this._schema={version:89,lastUsableVersion:10,stores:[{name:t.Stores.Messages,estimatedObjBytes:1500,primaryKeyPath:["conversationId","cuid"],indexes:[{name:t.Indexes.Messages_ConversationId_CreatedTime,keyPath:["conversationId","createdTime"],unique:!1},{name:t.Indexes.Messages_ConversationId_CountsType_CreatedTime,keyPath:["conversationId","_countsType","createdTime"],unique:!1},{name:t.Indexes.Messages_ConversationId_IsMyMessage_CreatedTime,keyPath:["conversationId","_isMyMessage","createdTime"],unique:!1}]},{name:t.Stores.Alerts,primaryKeyPath:"guid",estimatedObjBytes:4e3,indexes:[{name:t.Indexes.Alerts_ConvId,keyPath:"message.conversationId",unique:!1},{name:t.Indexes.Alerts_Read_Timestamp,keyPath:["isRead","alertTime"],unique:!1}]},{name:t.Stores.PopCards,primaryKeyPath:"guid",estimatedObjBytes:1e3,indexes:[]},{name:t.Stores.Conversations,primaryKeyPath:"conv.id",estimatedObjBytes:3500,indexes:[{name:t.Indexes.Conversations_IsHighlight_ForceToRecents_Timestamp,keyPath:["_isHighlight","_forceToRecents","conv._timestamp"],unique:!1},{name:t.Indexes.Conversations_IsHighlight_HasUnread,keyPath:["_isHighlight","counts.hasUnread"],unique:!1},{name:t.Indexes.Conversations_NeedsSync,keyPath:"_needsSync",unique:!1},{name:t.Indexes.Conversations_SearchTerms,keyPath:"conv._searchTerms",fullText:!0}]},{name:t.Stores.InternalData,primaryKeyPath:"id",estimatedObjBytes:1e4,indexes:[]},{name:t.Stores.Profiles,primaryKeyPath:"mri",estimatedObjBytes:300,indexes:[{name:t.Indexes.Profiles_PhoneNumber,keyPath:"_phoneNumbersForDbIndex",multiEntry:!0}]},{name:t.Stores.ProfileMinis,primaryKeyPath:"mri",estimatedObjBytes:250,indexes:[]},{name:t.Stores.Telemetry,primaryKeyPath:"id",estimatedObjBytes:3e3,indexes:[{name:t.Indexes.Telemetry_Priority_Timestamp,keyPath:["priority","timestamp"],unique:!1}]},{name:t.Stores.Agents,primaryKeyPath:"agentId",estimatedObjBytes:1500,indexes:[{name:t.Indexes.Agents_Important,keyPath:"isImportant",unique:!1},{name:t.Indexes.Agents_Whitelisted,keyPath:"isWhitelisted",unique:!1}]},{name:t.Stores.FeaturedAgents,primaryKeyPath:"agentId",estimatedObjBytes:1500,indexes:[]},{name:t.Stores.AgentIdUserIdPairs,primaryKeyPath:"agentId",indexes:[]},{name:t.Stores.IntegrationConsents,primaryKeyPath:["integrationId","consentType"],indexes:[]},{name:t.Stores.PersistentActions,primaryKeyPath:"id",indexes:[]},{name:t.Stores.LocalNotifications,primaryKeyPath:"id",indexes:[]},{name:t.Stores.FileCacheMetadata,primaryKeyPath:["cacheName","id"],indexes:[]},{name:t.Stores.FileTracker,primaryKeyPath:"id",indexes:[]},{name:t.Stores.LocalAddressBookContacts,primaryKeyPath:"id",indexes:[]},{name:t.Stores.ImagePrefetchInfo,primaryKeyPath:"url",estimatedObjBytes:200,indexes:[]},{name:t.Stores.Connectors,primaryKeyPath:"mri",indexes:[]},{name:t.Stores.EngagementPullCampaigns,primaryKeyPath:"campaignId",estimatedObjBytes:250,indexes:[]},{name:t.Stores.ConsumedConciergeBotMessages,primaryKeyPath:["conversationId","messageCuid"],estimatedObjBytes:100,indexes:[]},{name:t.Stores.CallLogs,primaryKeyPath:"callId",indexes:[]},{name:t.Stores.Drafts,primaryKeyPath:"conversationId",indexes:[]},{name:t.Stores.EngagementMessagesQueueStore,primaryKeyPath:"id",indexes:[]},{name:t.Stores.MediaDrafts,primaryKeyPath:"conversationId",indexes:[]}]}}open(e,i,o=!1,s=!1){const a="s4l-"+i,r=Date.now();let l=super.open(e,a,!1,s);return o&&(p.log(h.LogTraceArea.GenericUnsafe,"open() with nukeDb called..."),l=l.then((()=>this.openTransaction([t.Stores.InternalData],!1))).then((e=>{const i=e.internal_getInternalData(t.InternalKeys.SkypeToken);return e.markCompleted(),i})).thenAsync((i=>this._close().then((()=>super.open(e,a,!0,s))).then((()=>{if(i)return this.openTransaction([t.Stores.InternalData],!0).then((e=>{const n=e.internal_putInternalData(t.InternalKeys.SkypeToken,i);return e.markCompleted(),n}))})))).thenAsync(n.noop)),l.then((()=>{const e=Date.now()-r;p.log(h.LogTraceArea.GenericUnsafe,`ClientDatabase initialization Completed in ${e}ms`),this._databaseInitalizationDeferred&&(p.log(h.LogTraceArea.GenericUnsafe,"Resolving initialization promise..."),this._databaseInitalizationDeferred.resolve(void 0),this._databaseInitalizationDeferred=void 0)}))}performWhenDatabaseInitialized(){return this.isInitialized()?(p.log(h.LogTraceArea.GenericUnsafe,"Database is already initialized    ..."),s.Resolved()):(this._databaseInitalizationDeferred||(this._databaseInitalizationDeferred=s.Defer()),p.log(h.LogTraceArea.GenericUnsafe,"Awaiting database initialization..."),this._databaseInitalizationDeferred.promise())}getProviderName(){const e=this.getProviderInfo();return e&&e.name}internal_getAllInternalData(){return this.openTransaction([t.Stores.InternalData],!1).then((e=>{const t=e.internal_getAllInternalData();return e.markCompleted(),t}))}internal_getInternalData(e){return this.openTransaction([t.Stores.InternalData],!1).then((t=>{const i=t.internal_getInternalData(e);return t.markCompleted(),i}))}internal_putInternalData(e,i){return this.openTransaction([t.Stores.InternalData],!0).then((t=>{const n=t.internal_putInternalData(e,i);return t.markCompleted(),n}))}internal_deleteInternalData(e){return this.openTransaction([t.Stores.InternalData],!0).then((t=>{const i=t.internal_deleteInternalData(e);return t.markCompleted(),i}))}getUserProfileByMri(e){return this.openTransaction([t.Stores.Profiles],!1).then((t=>{const i=t.getUserProfileByMri(e);return t.markCompleted(),i}))}getUserProfilesByMris(e){return this.openTransaction([t.Stores.Profiles],!1).then((t=>{const i=t.getUserProfilesByMris(e);return t.markCompleted(),i}))}getUserProfilesByPhoneNumber(e){return this.openTransaction([t.Stores.Profiles],!1).then((t=>{const i=t.getUserProfilesByPhoneNumber(e);return t.markCompleted(),i}))}getAllUserProfiles(){return this.openTransaction([t.Stores.Profiles],!1).then((e=>{const t=e.getAllUserProfiles();return e.markCompleted(),t}))}putUserProfiles(e){return this.openTransaction([t.Stores.Profiles],!0).then((t=>{const i=t.putUserProfiles(e);return t.markCompleted(),i}))}getAllDisplayableUsers(){return this.openTransaction([t.Stores.ProfileMinis],!1).then((e=>{const t=e.getAllDisplayableUsers();return e.markCompleted(),t}))}getDisplayableUser(e){return this.openTransaction([t.Stores.ProfileMinis],!1).then((t=>{const i=t.getDisplayableUser(e);return t.markCompleted(),i}))}getTelemetryEvents(e,i){return this.openTransaction([t.Stores.Telemetry],!1).then((t=>{const n=t.getTelemetryEvents(e,i);return t.markCompleted(),n}))}putTelemetryEvents(e){return this.openTransaction([t.Stores.Telemetry],!0).then((t=>{const i=t.putTelemetryEvents(e);return t.markCompleted(),i}))}deleteTelemetryEvents(e){return this.openTransaction([t.Stores.Telemetry],!0).then((t=>{const i=t.deleteTelemetryEvents(e);return t.markCompleted(),i}))}countTelemetryEvents(){return this.openTransaction([t.Stores.Telemetry],!1).then((e=>{const t=e.countTelemetryEvents();return e.markCompleted(),t}))}getAgentDescription(e){return this.openTransaction([t.Stores.Agents],!1).then((t=>{const i=t.getAgentDescription(e);return t.markCompleted(),i}))}getAgentDescriptions(e){return this.openTransaction([t.Stores.Agents],!1).then((t=>{const i=t.getAgentDescriptions(e);return t.markCompleted(),i}))}getImportantAgents(){return this.openTransaction([t.Stores.Agents],!1).then((e=>{const t=e.getImportantAgents();return e.markCompleted(),t}))}getWhitelistedAgents(){return this.openTransaction([t.Stores.Agents],!1).then((e=>{const t=e.getWhitelistedAgents();return e.markCompleted(),t}))}putAgentDescriptions(e){return this.openTransaction([t.Stores.Agents],!0).then((t=>{const i=t.putAgentDescriptions(e);return t.markCompleted(),i}))}getAllFeaturedAgents(){return this.openTransaction([t.Stores.FeaturedAgents],!1).then((e=>{const t=e.getAllFeaturedAgents();return e.markCompleted(),t}))}replaceFeaturedAgents(e){return this.openTransaction([t.Stores.FeaturedAgents],!0).then((t=>t.replaceFeaturedAgents(e)))}getAllAgentIdUserIdPairs(){return this.openTransaction([t.Stores.AgentIdUserIdPairs],!1).then((e=>{const t=e.getAllAgentIdUserIdPairs();return e.markCompleted(),t}))}putAgentIdUserIdPair(e){return this.openTransaction([t.Stores.AgentIdUserIdPairs],!0).then((t=>{const i=t.putAgentIdUserIdPair(e);return t.markCompleted(),i}))}getConnectorMetadata(e){return this.openTransaction([t.Stores.Connectors],!1).then((t=>{const i=t.getConnectorMetadata(e);return t.markCompleted(),i}))}getConnectorsMetadata(e){return this.openTransaction([t.Stores.Connectors],!1).then((t=>{const i=t.getConnectorsMetadata(e);return t.markCompleted(),i}))}getAllConnectorMetadata(){return this.openTransaction([t.Stores.Connectors],!1).then((e=>{const t=e.getAllConnectorMetadata();return e.markCompleted(),t}))}putConnectorMetadata(e){return this.openTransaction([t.Stores.Connectors],!0).then((t=>{const i=t.putConnectorMetadata(e);return t.markCompleted(),i}))}putConnectorsMetadata(e){return this.openTransaction([t.Stores.Connectors],!0).then((t=>{const i=t.putConnectorsMetadata(e);return t.markCompleted(),i}))}getIntegrationConsent(e,i){return this.openTransaction([t.Stores.IntegrationConsents],!1).then((t=>{const n=t.getIntegrationConsent(e,i);return t.markCompleted(),n}))}putIntegrationConsent(e){return this.openTransaction([t.Stores.IntegrationConsents],!0).then((t=>{const i=t.putIntegrationConsent(e);return t.markCompleted(),i}))}getConversationMeta(e){return this.openTransaction([t.Stores.Conversations],!1).then((t=>{const i=t.getConversationMeta(e);return t.markCompleted(),i}))}getConversationMetas(e){return this.openTransaction([t.Stores.Conversations],!1).then((t=>{const i=t.getConversationMetas(e);return t.markCompleted(),i}))}getAllConversationMetas(e,i){return this.openTransaction([t.Stores.Conversations],!1).then((t=>{const n=t.getAllConversationMetas(e,i);return t.markCompleted(),n}))}getCountOfUnreadConversations(e){return this.openTransaction([t.Stores.Conversations],!1).then((t=>{const i=t.getCountOfUnreadConversations(e);return t.markCompleted(),i}))}getRecentNonHighlightConversationMetas(e,i=u.ConversationHistoryTimeSpanImportant){return this.openTransaction([t.Stores.Conversations],!1).then((t=>t.getRecentNonHighlightConversationMetas(e,i)))}getAllNonHighlightConversationMetas(){return this.openTransaction([t.Stores.Conversations],!1).then((e=>e.getAllNonHighlightConversationMetas()))}getConversationMetasBySearchTerm(e,i=!1,n){if(0===e.length)return s.Rejected("Empty search term");const a=i?o.FullTextTermResolution.Or:o.FullTextTermResolution.And;return this.openTransaction([t.Stores.Conversations],!1).then((t=>{const i=t.getConversationMetasBySearchTerm(e,a,n);return t.markCompleted(),i}))}putConversationMetas(e){return this.openTransaction([t.Stores.Conversations],!0).then((t=>{const i=t.putConversationMetas(e);return t.markCompleted(),i}))}getAllMessages(e,i){return this.openTransaction([t.Stores.Messages],!1).then((t=>{const n=t.getAllMessages(e,i);return t.markCompleted(),n}))}getMessagesInConversation(e){return this.openTransaction([t.Stores.Messages],!1).then((t=>{const i=t.getMessagesInConversation(e);return t.markCompleted(),i}))}getMessageByCuid(e,i){return this.openTransaction([t.Stores.Messages],!1).then((t=>{const n=t.getMessageByCuid(e,i);return t.markCompleted(),n}))}getMessagesByCuidForConversations(e){return this.openTransaction([t.Stores.Messages],!1).then((t=>{const i=t.getMessagesByCuidForConversations(e);return t.markCompleted(),i}))}getMessagesForConversationBeforeTime(e,i,n,o){return this.openTransaction([t.Stores.Messages],!1).then((t=>{const s=t.getMessagesForConversationBeforeTime(e,i,n,o);return t.markCompleted(),s}))}getMessagesNotSentByMe(e,i,n,o){return this.openTransaction([t.Stores.Messages],!1).then((t=>{const s=t.getMessagesNotSentByMe(e,i,n,o);return t.markCompleted(),s}))}getMessagesSentByMeSinceTime(e,i,n,o){return this.openTransaction([t.Stores.Messages],!1).then((t=>{const s=t.getMessagesSentByMeSinceTime(e,i,n,o);return t.markCompleted(),s}))}getMessagesForConversationAfterTime(e,i,n,o){return this.openTransaction([t.Stores.Messages],!1).then((t=>{const s=t.getMessagesForConversationAfterTime(e,i,n,o);return t.markCompleted(),s}))}getMessagesForConversationAndTimeRange(e,i,n,s=!1,a){return this.openTransaction([t.Stores.Messages],!1).then((t=>{let r=o.QuerySortOrder.None;s?r=o.QuerySortOrder.Reverse:!s&&a&&(r=o.QuerySortOrder.Forward);const l=t.getMessagesForConversationAndTimeRange(e,i,n,r,a);return t.markCompleted(),l}))}removeMessages(e){this.openTransaction([t.Stores.Messages],!0).then((t=>t.removeMessages(e)))}getMostRecentAlertTime(){return this.openTransaction([t.Stores.Alerts],!1).then((e=>{const t=e.getMostRecentAlertTime();return e.markCompleted(),t}))}countUnreadAlertsSinceTime(e){return this.openTransaction([t.Stores.Alerts],!1).then((t=>{const i=t.countUnreadAlertsSinceTime(e);return t.markCompleted(),i}))}countAlerts(){return this.openTransaction([t.Stores.Alerts],!1).then((e=>{const t=e.countAlerts();return e.markCompleted(),t}))}getAlerts(){return this.openTransaction([t.Stores.Alerts],!1).then((e=>{const t=e.getAlerts();return e.markCompleted(),t}))}putAlerts(e){return this.openTransaction([t.Stores.Alerts],!0).then((t=>{const i=t.putAlerts(e);return t.markCompleted(),i}))}removeAlerts(e){return this.openTransaction([t.Stores.Alerts],!0).then((t=>{const i=t.removeAlerts(e);return t.markCompleted(),i}))}getAllPopCards(){return this.openTransaction([t.Stores.PopCards],!1).then((e=>{const t=e.getAllPopCards();return e.markCompleted(),t}))}putPopCards(e){return this.openTransaction([t.Stores.PopCards],!0).then((t=>{const i=t.putPopCards(e);return t.markCompleted(),i}))}removePopCard(e){return this.openTransaction([t.Stores.PopCards],!0).then((t=>{const i=t.removePopCard(e);return t.markCompleted(),i}))}clearAllPopCards(){return this.openTransaction([t.Stores.PopCards],!0).then((e=>e.clearAllPopCards()))}getAllEngagementMessagesInQueue(){return this.openTransaction([t.Stores.EngagementMessagesQueueStore],!1).then((e=>{const t=e.getAllEngagementMessagesInQueue();return e.markCompleted(),t}))}putEngagementMessagesToQueue(e){return this.openTransaction([t.Stores.EngagementMessagesQueueStore],!0).then((t=>{const i=t.putEngagementMessagesToQueue(e);return t.markCompleted(),i}))}removeEngagementMessageFromQueue(e){return this.openTransaction([t.Stores.EngagementMessagesQueueStore],!0).then((t=>{const i=t.removeEngagementMessageFromQueue(e);return t.markCompleted(),i}))}clearEngagementQueueOfMessages(){return this.openTransaction([t.Stores.EngagementMessagesQueueStore],!0).then((e=>e.clearEngagementQueueOfMessages()))}getAllCampaigns(){return this.openTransaction([t.Stores.EngagementPullCampaigns],!1).then((e=>{const t=e.getAllCampaigns();return e.markCompleted(),t}))}putCampaigns(e){return this.openTransaction([t.Stores.EngagementPullCampaigns],!0).then((t=>{const i=t.putCampaigns(e);return t.markCompleted(),i}))}removeCampaigns(e){return this.openTransaction([t.Stores.EngagementPullCampaigns],!0).then((t=>{const i=t.removeCampaigns(e);return t.markCompleted(),i}))}getAllConsumedBotMessages(){return this.openTransaction([t.Stores.ConsumedConciergeBotMessages],!1).then((e=>{const t=e.getAllConsumedBotMessages();return e.markCompleted(),t}))}putConsumedBotMessages(e){return this.openTransaction([t.Stores.ConsumedConciergeBotMessages],!0).then((t=>{const i=t.putConsumedBotMessages(e);return t.markCompleted(),i}))}getLocalNotifications(){return this.openTransaction([t.Stores.LocalNotifications],!1).then((e=>{const t=e.getLocalNotifications();return e.markCompleted(),t}))}putLocalNotifications(e){return this.openTransaction([t.Stores.LocalNotifications],!0).then((t=>{const i=t.putLocalNotifications(e);return t.markCompleted(),i}))}removeLocalNotifications(e){return this.openTransaction([t.Stores.LocalNotifications],!0).then((t=>{const i=t.removeLocalNotifications(e);return t.markCompleted(),i}))}getPersistentActions(){return this.openTransaction([t.Stores.PersistentActions],!1).then((e=>{const t=e.getPersistentActions();return e.markCompleted(),t}))}putPersistentAction(e){return this.openTransaction([t.Stores.PersistentActions],!0).then((t=>{const i=t.putPersistentAction(e);return t.markCompleted(),i}))}removePersistentAction(e){return this.openTransaction([t.Stores.PersistentActions],!0).then((t=>{const i=t.removePersistentAction(e);return t.markCompleted(),i}))}getAllFileCacheMetadata(){return this.openTransaction([t.Stores.FileCacheMetadata],!1).then((e=>{const t=e.getAllFileCacheMetadata();return e.markCompleted(),t}))}putFileCacheMetadata(e){return this.openTransaction([t.Stores.FileCacheMetadata],!0).then((t=>{const i=t.putFileCacheMetadata(e);return t.markCompleted(),i}))}removeFileCacheMetadata(e,i){return this.openTransaction([t.Stores.FileCacheMetadata],!0).then((t=>{const n=t.removeFileCacheMetadata(e,i);return t.markCompleted(),n}))}getAllFileTrackerMetadata(){return this.openTransaction([t.Stores.FileTracker],!1).then((e=>{const t=e.getAllFileTrackerMetadata();return e.markCompleted(),t}))}putFileTrackerMetadata(e){return this.openTransaction([t.Stores.FileTracker],!0).then((t=>{const i=t.putFileTrackerMetadata(e);return t.markCompleted(),i}))}removeFileTrackerMetadata(e){return this.openTransaction([t.Stores.FileTracker],!0).then((t=>{const i=t.removeFileTrackerMetadata(e);return t.markCompleted(),i}))}getAllLocalAddressBookContacts(){return this.openTransaction([t.Stores.LocalAddressBookContacts],!1).then((e=>{const t=e.getAllLocalAddressBookContacts();return e.markCompleted(),t}))}putLocalAddressBookContacts(e){return this.openTransaction([t.Stores.LocalAddressBookContacts],!0).then((t=>{const i=t.putLocalAddressBookContacts(e);return t.markCompleted(),i}))}replaceAllLocalAddressBookContacts(e){return this.openTransaction([t.Stores.LocalAddressBookContacts],!0).then((t=>t.replaceAllLocalAddressBookContacts(e)))}removeAllLocalAddressBookContacts(){return this.openTransaction([t.Stores.LocalAddressBookContacts],!0).then((e=>{const t=e.removeAllLocalAddressBookContacts();return e.markCompleted(),t}))}getAllImagePrefetchInfo(){return this.openTransaction([t.Stores.ImagePrefetchInfo],!1).then((e=>{const t=e.getAllImagePrefetchInfo();return e.markCompleted(),t.then((e=>n.compact(e)))}))}putImagePrefetchRecords(e){return this.openTransaction([t.Stores.ImagePrefetchInfo],!0).then((t=>{const i=t.putImagePrefetchRecords(e);return t.markCompleted(),i}))}removeImagePrefetchInfo(e){return this.openTransaction([t.Stores.ImagePrefetchInfo],!0).then((t=>{const i=t.removeImagePrefetchInfo(e);return t.markCompleted(),i}))}getCallLogs(e){return this.openTransaction([t.Stores.CallLogs],!1).then((t=>{const i=n.map(e,(e=>t.getCallLog(e)));return t.markCompleted(),s.all(i).then((e=>n.compact(e)))}))}getAllDraftMessages(){return this.openTransaction([t.Stores.Drafts],!1).then((e=>{const t=e.getAllDraftMessages();return e.markCompleted(),t}))}putDraftMessage(e){return this.openTransaction([t.Stores.Drafts],!0).then((t=>{const i=t.putDraftMessage(e);return t.markCompleted(),i}))}deleteDraftMessage(e){return this.openTransaction([t.Stores.Drafts],!0).then((t=>{const i=t.deleteDraftMessage(e);return t.markCompleted(),i}))}getAllMediaDrafts(){return this.openTransaction([t.Stores.MediaDrafts],!1).then((e=>{const t=e.getAllDraftMedia();return e.markCompleted(),t}))}putMediaDrafts(e){return this.openTransaction([t.Stores.MediaDrafts],!0).then((t=>{const i=t.putDraftMedia(e);return t.markCompleted(),i}))}deleteMediaDraft(e){return this.openTransaction([t.Stores.MediaDrafts],!0).then((t=>{const i=t.deleteDraftMedia(e);return t.markCompleted(),i}))}getLastCallCaptionsCleanupTimestamp(){return this.internal_getInternalData(t.InternalKeys.CallCaptionsCleanupEndTimestamp).then((e=>null!=e?e:void 0))}}class y extends d.ClientDatabaseTransactionBase{constructor(){super(...arguments),this._increaseLastCharCode=e=>e.substring(0,e.length-1)+String.fromCharCode(e.charCodeAt(e.length-1)+1)}internal_putInternalData(e,i){return this._getStore(t.Stores.InternalData).put({id:e,value:i}).fail(this._databaseError)}internal_deleteInternalData(e){return this._getStore(t.Stores.InternalData).remove(e).fail(this._databaseError)}internal_getInternalData(e){return this._getStore(t.Stores.InternalData).get(e).then((e=>e?e.value:null)).fail(this._databaseError)}internal_getAllInternalData(){return this._getStore(t.Stores.InternalData).getAll(o.QuerySortOrder.None).fail(this._databaseError)}getUserProfileByMri(e){return this._getStore(t.Stores.Profiles).get(e).then((e=>S.default.fromDatabaseObject(e))).fail(this._databaseError)}getUserProfilesByMris(e){return this._getStore(t.Stores.Profiles).getMultiple(e).then((e=>n.map(e,(e=>S.default.fromDatabaseObject(e))))).fail(this._databaseError)}getUserProfilesByPhoneNumber(e){return this._getStore(t.Stores.Profiles).openIndex(t.Indexes.Profiles_PhoneNumber).getRange(e,this._increaseLastCharCode(e),!1,!0,o.QuerySortOrder.None).then((e=>{let t=n.compact(e);return t=n.uniqWith(t,((e,t)=>e.mri===t.mri)),n.map(t,(e=>S.default.fromDatabaseObject(e)))})).fail(this._databaseError)}getAllUserProfiles(){return this._getStore(t.Stores.Profiles).getAll(o.QuerySortOrder.None).then((e=>n.map(e,(e=>S.default.fromDatabaseObject(e))))).fail(this._databaseError)}putUserProfiles(e){return this._getStore(t.Stores.Profiles).put(e).fail(this._databaseError)}getAllDisplayableUsers(){return this._getStore(t.Stores.ProfileMinis).getAll(o.QuerySortOrder.None).then((e=>n.map(e,(e=>g.default.fromDatabaseObject(e))))).fail(this._databaseError)}getDisplayableUser(e){return this._getStore(t.Stores.ProfileMinis).get(e).then((e=>g.default.fromDatabaseObject(e))).fail(this._databaseError)}putDisplayableUsers(e){return this._getStore(t.Stores.ProfileMinis).put(n.map(e,(e=>e.getDatabaseRepresentation()))).fail(this._databaseError)}getTelemetryEvents(e,i){return this._getStore(t.Stores.Telemetry).openIndex(t.Indexes.Telemetry_Priority_Timestamp).getAll(o.QuerySortOrder.None,e,i).fail(this._databaseError)}putTelemetryEvents(e){return this._getStore(t.Stores.Telemetry).put(e).fail(this._databaseError)}deleteTelemetryEvents(e){return this._getStore(t.Stores.Telemetry).remove(e).fail(this._databaseError)}countTelemetryEvents(){return this._getStore(t.Stores.Telemetry).openPrimaryKey().countAll().fail(this._databaseError)}getAgentDescription(e){return this._getStore(t.Stores.Agents).get(e).then((e=>r.default.fromDatabaseObject(e))).fail(this._databaseError)}getAgentDescriptions(e){return this._getStore(t.Stores.Agents).getMultiple(e).then((e=>n.map(e,(e=>r.default.fromDatabaseObject(e))))).fail(this._databaseError)}getImportantAgents(){return this._getStore(t.Stores.Agents).openIndex(t.Indexes.Agents_Important).getOnly(1,o.QuerySortOrder.None).then((e=>n.map(e,(e=>r.default.fromDatabaseObject(e))))).fail(this._databaseError)}getWhitelistedAgents(){return this._getStore(t.Stores.Agents).openIndex(t.Indexes.Agents_Whitelisted).getOnly(1,o.QuerySortOrder.None).then((e=>n.map(e,(e=>r.default.fromDatabaseObject(e))))).fail(this._databaseError)}putAgentDescriptions(e){return this._getStore(t.Stores.Agents).put(e).fail(this._databaseError)}getAllFeaturedAgents(){return this._getStore(t.Stores.FeaturedAgents).getAll(o.QuerySortOrder.None).then((e=>n.map(e,(e=>r.default.fromDatabaseObject(e))))).fail(this._databaseError)}replaceFeaturedAgents(e){return this._getStore(t.Stores.FeaturedAgents).clearAllData().then((()=>this._getStore(t.Stores.FeaturedAgents).put(e))).fail(this._databaseError)}getAllAgentIdUserIdPairs(){return this._getStore(t.Stores.AgentIdUserIdPairs).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putAgentIdUserIdPair(e){return this._getStore(t.Stores.AgentIdUserIdPairs).put(e).fail(this._databaseError)}getConnectorMetadata(e){return this._getStore(t.Stores.Connectors).get(e).fail(this._databaseError)}getConnectorsMetadata(e){return this._getStore(t.Stores.Connectors).getMultiple(e).fail(this._databaseError)}getAllConnectorMetadata(){return this._getStore(t.Stores.Connectors).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putConnectorMetadata(e){return this._getStore(t.Stores.Connectors).put(e).fail(this._databaseError)}putConnectorsMetadata(e){return this._getStore(t.Stores.Connectors).put(e).fail(this._databaseError)}getIntegrationConsent(e,i){return this._getStore(t.Stores.IntegrationConsents).get([e,i]).fail(this._databaseError)}putIntegrationConsent(e){return this._getStore(t.Stores.IntegrationConsents).put(e).fail(this._databaseError)}getConversationMeta(e){return this._getStore(t.Stores.Conversations).get(e).then((e=>u.default.fromDatabaseObject(e))).fail(this._databaseError)}getConversationMetas(e){return this._getStore(t.Stores.Conversations).getMultiple(e).then((e=>{const t={};return n.each(e,(e=>{const i=u.default.fromDatabaseObject(e);t[i.conv.id]=i})),t})).fail(this._databaseError)}getAllConversationMetas(e,i){return this._getStore(t.Stores.Conversations).openPrimaryKey().getAll(o.QuerySortOrder.Forward,e,i).then((e=>n.map(n.compact(e),(e=>u.default.fromDatabaseObject(e))))).fail(this._databaseError)}getCountOfUnreadConversations(e){return this._getStore(t.Stores.Conversations).openIndex(t.Indexes.Conversations_IsHighlight_HasUnread).countOnly([e?1:0,1]).fail(this._databaseError)}getRecentNonHighlightConversationMetas(e,t=u.ConversationHistoryTimeSpanImportant){return this._getRecentConversationMetas(!1,e,t)}getAllNonHighlightConversationMetas(){return this._getStore(t.Stores.Conversations).openIndex(t.Indexes.Conversations_IsHighlight_ForceToRecents_Timestamp).getRange([0,0,0],[0,1,Number.MAX_VALUE],!1,!1,o.QuerySortOrder.Reverse).then((e=>e)).then((e=>n.map(e,(e=>u.default.fromDatabaseObject(e))))).fail(this._databaseError)}getAllDraftMessages(){return this._getStore(t.Stores.Drafts).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putDraftMessage(e){return this._getStore(t.Stores.Drafts).put(e).fail(this._databaseError)}deleteDraftMessage(e){return this._getStore(t.Stores.Drafts).remove(e).fail(this._databaseError)}getAllDraftMedia(){return this._getStore(t.Stores.MediaDrafts).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putDraftMedia(e){return this._getStore(t.Stores.MediaDrafts).put(e).fail(this._databaseError)}deleteDraftMedia(e){return this._getStore(t.Stores.MediaDrafts).remove(e).fail(this._databaseError)}_getRecentConversationMetas(e,i,s){const a=this._getStore(t.Stores.Conversations).openIndex(t.Indexes.Conversations_IsHighlight_ForceToRecents_Timestamp),r=e?1:0,l=Date.now()-s;return a.getRange([r,0,l],[r,1,Number.MAX_VALUE],!1,!1,o.QuerySortOrder.None).then((e=>{const t=n.filter(e,(e=>e.conv._timestamp>=l)).length;return t>=i?e:a.getRange([r,0,0],[r,0,l],!1,!0,o.QuerySortOrder.Reverse,i-t).then((t=>e.concat(t)))})).then((e=>n.map(e,(e=>u.default.fromDatabaseObject(e))))).fail(this._databaseError)}getNeedsSyncConversations(){return this._getStore(t.Stores.Conversations).openIndex(t.Indexes.Conversations_NeedsSync).getOnly(1,o.QuerySortOrder.None).then((e=>n.map(n.compact(e),(e=>u.default.fromDatabaseObject(e))))).fail(this._databaseError)}getConversationMetasBySearchTerm(e,i,o){return this._getStore(t.Stores.Conversations).openIndex(t.Indexes.Conversations_SearchTerms).fullTextSearch(e,i,o).then((e=>n.map(n.compact(e),(e=>u.default.fromDatabaseObject(e))))).fail(this._databaseError)}putConversationMetas(e){const i=n.isArray(e)?e:[e];return this._getStore(t.Stores.Conversations).put(i).fail(this._databaseError)}removeConversationMetas(e){const i=n.map(e,(e=>e.conv.id));return this._getStore(t.Stores.Conversations).remove(i).fail(this._databaseError)}getMessagesInConversation(e){const i=this._increaseLastCharCode(e);return this._getStore(t.Stores.Messages).getRange([e,""],[i,""],!1,!0,o.QuerySortOrder.None).then((e=>n.map(e,(e=>m.default.fromDatabaseObject(e))))).fail(this._databaseError)}getMessagesForConversationAndTimeRange(e,i,o,s,a){return this._getStoreIndex(t.Stores.Messages,t.Indexes.Messages_ConversationId_CreatedTime).getRange([e,i],[e,o],!1,!1,s,a).then((e=>n.map(e,(e=>m.default.fromDatabaseObject(e))))).fail(this._databaseError)}getMessagesForConversationBeforeTime(e,i,s,a){return this._getStoreIndex(t.Stores.Messages,t.Indexes.Messages_ConversationId_CreatedTime).getRange([e,0],[e,i],!1,a,o.QuerySortOrder.Reverse,s).then((e=>n.map(e,(e=>m.default.fromDatabaseObject(e))))).fail(this._databaseError)}getMessagesForConversationAfterTime(e,i,s,a){return this._getStoreIndex(t.Stores.Messages,t.Indexes.Messages_ConversationId_CreatedTime).getRange([e,i],[e,Number.MAX_VALUE],a,!0,o.QuerySortOrder.Forward,s).then((e=>n.map(e,(e=>m.default.fromDatabaseObject(e))))).fail(this._databaseError)}getMessagesNotSentByMe(e,i,s,a){return this._getStoreIndex(t.Stores.Messages,t.Indexes.Messages_ConversationId_IsMyMessage_CreatedTime).getRange([e,0,0],[e,0,i],!1,a,o.QuerySortOrder.Reverse,s).then((e=>n.map(e,(e=>m.default.fromDatabaseObject(e))))).fail(this._databaseError)}getMessagesSentByMeSinceTime(e,i,s,a){return this._getStoreIndex(t.Stores.Messages,t.Indexes.Messages_ConversationId_IsMyMessage_CreatedTime).getRange([e,1,i],[e,1,Number.MAX_VALUE],!1,a,o.QuerySortOrder.Reverse,s).then((e=>n.map(e,(e=>m.default.fromDatabaseObject(e))))).fail(this._databaseError)}getCountOfMessagesForConversationAfterTimeNormalPri(e,i,s){const a=void 0===s?void 0:2*s;return this._getStoreIndex(t.Stores.Messages,t.Indexes.Messages_ConversationId_CreatedTime).getRange([e,i],[e,Number.MAX_VALUE],!0,!0,o.QuerySortOrder.Forward,a).then((e=>{const t=n.map(e,(e=>m.default.fromDatabaseObject(e))),i=c.default.updateCallEventMessages(t),o=n.filter(i,(e=>1===e.getCountsType())).length;return void 0===s?o:Math.min(s,o)})).fail(this._databaseError)}getCountOfMessagesForConversationAfterTimeHighPri(e,i){return this._getStoreIndex(t.Stores.Messages,t.Indexes.Messages_ConversationId_CountsType_CreatedTime).countRange([e,2,i],[e,2,Number.MAX_VALUE],!0,!0)}getCountOfMessagesForConversationISentSinceTime(e,i){return this._getStoreIndex(t.Stores.Messages,t.Indexes.Messages_ConversationId_IsMyMessage_CreatedTime).countRange([e,1,i],[e,1,Number.MAX_VALUE],!1,!0)}getMessageByCuid(e,i){return this._getStore(t.Stores.Messages).get([e,i]).then((e=>m.default.fromDatabaseObject(e))).fail(this._databaseError)}getMessagesByCuid(e,i){return this._getStore(t.Stores.Messages).getMultiple(n.map(i,(t=>[e,t]))).then((e=>n.map(n.compact(e),(e=>m.default.fromDatabaseObject(e))))).fail(this._databaseError)}getMessagesByCuidForConversations(e){let i=[];return n.each(e,((e,t)=>{n.each(e,(e=>{i.push([t,e])}))})),this._getStore(t.Stores.Messages).getMultiple(i).then((e=>n.map(n.compact(e),(e=>m.default.fromDatabaseObject(e))))).fail(this._databaseError)}putMessages(e){return this._getStore(t.Stores.Messages).put(e).fail(this._databaseError)}removeMessages(e){const i=n.map(e,(e=>[e.conversationId,e.cuid]));return this._getStore(t.Stores.Messages).remove(i).fail(this._databaseError)}getAllMessages(e,i){return this._getStore(t.Stores.Messages).openPrimaryKey().getAll(o.QuerySortOrder.Forward,e,i).then((e=>n.map(e,(e=>m.default.fromDatabaseObject(e))))).fail(this._databaseError)}getMostRecentAlertTime(){const e=this._getStore(t.Stores.Alerts).openIndex(t.Indexes.Alerts_Read_Timestamp),i=e.getRange([0,0],[0,Number.MAX_VALUE],!1,!1,o.QuerySortOrder.Reverse,1).fail(this._databaseError),a=e.getRange([1,0],[1,Number.MAX_VALUE],!1,!1,o.QuerySortOrder.Reverse,1).fail(this._databaseError);return s.all([i,a]).then((([e,t])=>{const i=n.maxBy(n.compact(e.concat(t)),(e=>e.alertTime));return i?i.alertTime:0}))}getAlertsForConversation(e){return this._getStore(t.Stores.Alerts).openIndex(t.Indexes.Alerts_ConvId).getOnly(e,o.QuerySortOrder.None).then((e=>n.map(e,(e=>l.default.fromDatabaseObject(e))))).fail(this._databaseError)}countUnreadAlertsSinceTime(e){return this._getStore(t.Stores.Alerts).openIndex(t.Indexes.Alerts_Read_Timestamp).countRange([0,e],[0,Number.MAX_VALUE],!0,!1).fail(this._databaseError)}getAlertsByIsReadAndTimestampRange(e,i,s){return this._getStore(t.Stores.Alerts).openIndex(t.Indexes.Alerts_Read_Timestamp).getRange([e?1:0,i],[e?1:0,s],!1,!1,o.QuerySortOrder.None).then((e=>n.map(e,(e=>l.default.fromDatabaseObject(e))))).fail(this._databaseError)}countAlerts(){return this._getStore(t.Stores.Alerts).openPrimaryKey().countAll().fail(this._databaseError)}getAlerts(){return this._getStore(t.Stores.Alerts).getAll(o.QuerySortOrder.None).then((e=>n.map(e,(e=>l.default.fromDatabaseObject(e))))).fail(this._databaseError)}putAlerts(e){return this._getStore(t.Stores.Alerts).put(e).fail(this._databaseError)}removeAlerts(e){const i=n.map(e,(e=>e.guid));return this._getStore(t.Stores.Alerts).remove(i).fail(this._databaseError)}getAllPopCards(){return this._getStore(t.Stores.PopCards).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putPopCards(e){return this._getStore(t.Stores.PopCards).put(e).fail(this._databaseError)}removePopCard(e){return this._getStore(t.Stores.PopCards).remove(e).fail(this._databaseError)}clearAllPopCards(){return this._getStore(t.Stores.PopCards).clearAllData().fail(this._databaseError)}getAllEngagementMessagesInQueue(){return this._getStore(t.Stores.EngagementMessagesQueueStore).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putEngagementMessagesToQueue(e){return this._getStore(t.Stores.EngagementMessagesQueueStore).put(e).fail(this._databaseError)}removeEngagementMessageFromQueue(e){return this._getStore(t.Stores.EngagementMessagesQueueStore).remove(e).fail(this._databaseError)}clearEngagementQueueOfMessages(){return this._getStore(t.Stores.EngagementMessagesQueueStore).clearAllData().fail(this._databaseError)}getAllCampaigns(){return this._getStore(t.Stores.EngagementPullCampaigns).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putCampaigns(e){return this._getStore(t.Stores.EngagementPullCampaigns).put(e).fail(this._databaseError)}removeCampaigns(e){const i=n.map(e,(e=>e.campaignId));return this._getStore(t.Stores.EngagementPullCampaigns).remove(i).fail(this._databaseError)}getAllConsumedBotMessages(){return this._getStore(t.Stores.ConsumedConciergeBotMessages).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putConsumedBotMessages(e){return this._getStore(t.Stores.ConsumedConciergeBotMessages).put(e).fail(this._databaseError)}getLocalNotifications(){return this._getStore(t.Stores.LocalNotifications).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putLocalNotifications(e){return this._getStore(t.Stores.LocalNotifications).put(e).fail(this._databaseError)}removeLocalNotifications(e){const i=n.map(e,(e=>e.id));return this._getStore(t.Stores.LocalNotifications).remove(i).fail(this._databaseError)}getPersistentActions(){return this._getStore(t.Stores.PersistentActions).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putPersistentAction(e){return this._getStore(t.Stores.PersistentActions).put(e).fail(this._databaseError)}removePersistentAction(e){return this._getStore(t.Stores.PersistentActions).remove(e).fail(this._databaseError)}getAllFileCacheMetadata(){return this._getStore(t.Stores.FileCacheMetadata).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putFileCacheMetadata(e){return this._getStore(t.Stores.FileCacheMetadata).put(e).fail(this._databaseError)}removeFileCacheMetadata(e,i){const o=n.isArray(i)?i:[i];return this._getStore(t.Stores.FileCacheMetadata).remove(n.map(o,(t=>[e,t]))).fail(this._databaseError)}getAllFileTrackerMetadata(){return this._getStore(t.Stores.FileTracker).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putFileTrackerMetadata(e){return this._getStore(t.Stores.FileTracker).put(e).fail(this._databaseError)}removeFileTrackerMetadata(e){return this._getStore(t.Stores.FileTracker).remove(e).fail(this._databaseError)}getAllLocalAddressBookContacts(){return this._getStore(t.Stores.LocalAddressBookContacts).getAll(o.QuerySortOrder.None).then((e=>n.map(e,(e=>a.AddressBookContact.fromDatabaseObject(e))))).fail(this._databaseError)}putLocalAddressBookContacts(e){return this._getStore(t.Stores.LocalAddressBookContacts).put(e).fail(this._databaseError)}replaceAllLocalAddressBookContacts(e){return this._getStore(t.Stores.LocalAddressBookContacts).clearAllData().then((()=>this._getStore(t.Stores.LocalAddressBookContacts).put(e))).fail(this._databaseError)}removeAllLocalAddressBookContacts(){return this._getStore(t.Stores.LocalAddressBookContacts).clearAllData().fail(this._databaseError)}getAllImagePrefetchInfo(){return this._getStore(t.Stores.ImagePrefetchInfo).getAll(o.QuerySortOrder.None).fail(this._databaseError)}putImagePrefetchRecords(e){return this._getStore(t.Stores.ImagePrefetchInfo).put(e).fail(this._databaseError)}removeImagePrefetchInfo(e){return this._getStore(t.Stores.ImagePrefetchInfo).remove(e).fail(this._databaseError)}getCallLog(e){return this._getStore(t.Stores.CallLogs).get(e).fail(this._databaseError)}putCallLogs(e){return this._getStore(t.Stores.CallLogs).put(e).fail(this._databaseError)}getCallCaptionsCleanupStartTimestamp(){return this.internal_getInternalData(t.InternalKeys.CallCaptionsCleanupStartTimestamp)}setCallCaptionsCleanupStartTimestamp(){return this.internal_putInternalData(t.InternalKeys.CallCaptionsCleanupStartTimestamp,Date.now())}deleteCallCaptionsCleanupStartTimestamp(){return this.internal_deleteInternalData(t.InternalKeys.CallCaptionsCleanupStartTimestamp)}setCallCaptionsCleanupEndTimestamp(){return this.internal_putInternalData(t.InternalKeys.CallCaptionsCleanupEndTimestamp,Date.now())}}t.ClientDatabaseTransaction=y;let _=new f(y);if("undefined"!=typeof window){window.ClientDatabase=_}t.default=_},9001:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDatabaseTransactionBase=t.ClientDatabaseBase=void 0;const n=i(74958),o=i(96486),s=i(644),a=i(74634),r=i(97691),l=i(84792),c=i(46096),d=i(36237),u=i(50325),g=i(4057);function h(e){return e&&(e.name&&("TransactionInactiveError"===e.name||"TimeoutError"===e.name)||e.target&&e.target.transaction&&e.target.transaction.error&&"TimeoutError"===e.target.transaction.error.name)?(u.reloadApp("client-database-db-error"),r.Defer().promise()):r.Rejected(e)}s.ErrorCatcher=h;t.ClientDatabaseBase=class{constructor(e){this._transClass=e,this.event_databaseError=new a.default,this._databaseError=e=>{if(e.target){if(e.target.error){const t=e.target.error;d.error(c.LogTraceArea.SQLiteClient,`IDBRequest: ${t.name}: ${t.message}`)}if(e.target.transaction&&e.target.transaction.error){const t=e.target.transaction.error;d.error(c.LogTraceArea.SQLiteClient,`IDBTransaction: ${t.name}: ${t.message}`)}if(e.target.source){const t=e.target.source;d.error(c.LogTraceArea.SQLiteClient,`IDBStore: ${t.name}, ${t.keyPath}, indexes: ${o.join(t.indexNames)}`)}}if(e instanceof Error){d.error(c.LogTraceArea.SQLiteClient,`DB error: ${e}`);let t=e;e={message:t.message,stack:t.stack}}this.event_databaseError.fire(e)},this._handleDatabaseDeleteSuccess=()=>{d.log(c.LogTraceArea.GenericUnsafe,"Deleted Database "+n.pii.Omit(this._databaseName||""))},this._handleDatabaseDeleteError=e=>(d.log(c.LogTraceArea.GenericUnsafe,"DB delete Failure for "+n.pii.Omit(this._databaseName||"")+" :"+e.toString()),this.clearAllDataInDB())}getProviderInfo(){return this._db}open(e,t,i=!1,n=!1){return this._customOpenListOfProviders(e,t,this._schema,i,n).then((e=>{this._databaseName=t,this._db=e}))}_customOpenListOfProviders(e,t,i,o=!1,s=!1){const a=r.Defer();let l=0,u=[];d.log(c.LogTraceArea.GenericUnsafe,`Opening Database: ${n.pii.Omit(t)} Providers: ${e.length} verbose: ${s}, wipe: ${o}`);const h=()=>{if(l>=e.length)return void a.reject(u.length<=1?u[0]:u);let n=e[l];n.provider.open(t,i,o,s).then((()=>{d.log(c.LogTraceArea.GenericUnsafe,"Provider "+n.name+": Open Success!"),a.resolve(n)}),(e=>{d.error(c.LogTraceArea.GenericUnsafe,"Provider "+n.name+": Open Failure: "+g.default.errorAsString(e)),u.push(e),l++,h()}))};return h(),a.promise()}isInitialized(){return!!this._db}_close(){return d.log(c.LogTraceArea.GenericUnsafe,`Closing database ${n.pii.Omit(this._databaseName||"")}...`),this._db?this._db.provider.close():r.Rejected("No Database to close")}nukeDB(){if(!this._db)return r.Rejected("No Database to delete");try{d.log(c.LogTraceArea.GenericUnsafe,`Deleting Database ${n.pii.Omit(this._databaseName||"")}...`);const e=this._db.provider.deleteDatabase();return r.raceTimer(e,15e3).then((e=>{e.timedOut?this._handleDatabaseDeleteError("Promise timed out in 15000 ms"):this._handleDatabaseDeleteSuccess()}))}catch(e){return d.log(c.LogTraceArea.GenericUnsafe,"DB delete Failure: "+e.toString()),this.clearAllDataInDB()}}clearAllDataInDB(){if(!this._db)return r.Rejected("No Database to clear");try{return d.log(c.LogTraceArea.GenericUnsafe,`Clearing all data in the Database ${n.pii.Omit(this._databaseName||"")}...`),this._db.provider.clearAllData().then((()=>{d.log(c.LogTraceArea.GenericUnsafe,"Cleared all data in the Database "+n.pii.Omit(this._databaseName||""))}),(e=>{d.log(c.LogTraceArea.GenericUnsafe,"Clear all data Failure "+n.pii.Omit(this._databaseName||"")+": "+e.toString())}))}catch(e){return d.log(c.LogTraceArea.GenericUnsafe,"Clear all data Failure: "+e.toString()),r.Rejected(e)}}openTransaction(e,t){const i=Date.now();return this._db?this._db.provider.openTransaction(e,t).then((n=>{const o=Date.now();return n.getCompletionPromise().then((()=>{const n=o-i,s=Date.now()-o;(n>300||s>300)&&d.log(c.LogTraceArea.GenericUnsafe,"Database Transaction Duration Warning: Stores: "+e.join(",")+", Write: "+t+", Lock Time: "+n+"ms, Execute Time: "+s+"ms")})),new this._transClass(n,this._databaseError)})).catch((e=>h(e))):r.Rejected("No Database - Unable to open transaction")}};t.ClientDatabaseTransactionBase=class{constructor(e,t){this._trans=e,this._databaseError=t}markCompleted(){this._trans.markCompleted()}_getStore(e){return(0,l.getStore)(this._trans.getStore(e),e)}_getStoreIndex(e,t){return this._getStore(e).openIndex(t)}}},84792:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getStore=void 0;const n=i(96486),o=i(644),s=i(97691),a=i(89391),r=999;class l extends o.SimpleTransactionStoreHelper{getMultiple(e){return n.isArray(e)&&e.length>r?this._sharded(e,(e=>super.getMultiple(e))).then((e=>n.flatten(e))):super.getMultiple(e)}put(e){return n.isArray(e)&&e.length>r?this._sharded(e,(e=>super.put(e))).then(n.noop):super.put(e)}remove(e){return n.isArray(e)&&e.length>r?this._sharded(e,(e=>super.remove(e))).then(n.noop):super.remove(e)}_sharded(e,t){const i=n.chunk(e,r),o=n.map(i,(e=>t(e)));return s.all(o)}}t.getStore=function(e,t){return a.default.getConfigSettingsNoSubscription().database.splitLargeTransactions?new l(e,t):new o.SimpleTransactionStoreHelper(e,t)}},98754:(e,t,i)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.InternalDataStore=void 0;const o=i(70655),s=i(96486),a=i(88837),r=i(97691),l=i(33951),c=i(62141),d=i(46096),u=i(36237),g=i(61253),h=i(22538),p=i(53374);let m=n=class extends a.StoreBase{constructor(){super(),h.RegisterStartupable(this,"InternalDataStore")}startup(){return c.default.internal_getAllInternalData().then((e=>{this._internalData={},this._exclusiveData={},s.each(e,(e=>{e&&(this._internalData[e.id]=e.value)}))}))}static _deepFreeze(e){if("object"==typeof e){for(let t in e)e[t]&&n._deepFreeze(e[t]);Object.freeze(e)}}getData(e){const t=s.cloneDeep(this._internalData[e]);return this._exclusiveData[e],t}getDataExclusive(e){const t=this._internalData[e];return this._exclusiveData[e],this._exclusiveData[e]=!0,delete this._internalData[e],t}putData(e,t,i,n){if(n=n||p.default.newCauseId(),!h.HasStarted(this)){const t=new l.CalledBeforeStartupError("InternalDataStore","putData",`key=${e}`);return r.Rejected(t)}if(h.HasStarted(this)&&!this._exclusiveData[e]&&(0,g.default)(this._internalData[e],t))return u.log(d.LogTraceArea.SQLiteClient,`no change to data. key ${e} causeId: ${n}`),r.Resolved();return(i?i.internal_putInternalData(e,t):c.default.internal_putInternalData(e,t)).then((()=>{delete this._internalData[e],this._exclusiveData[e]||(this._internalData[e]=t,this.trigger(e))}))}getKeys(){return s.keys(this._internalData)}deleteKeys(e,t){return(t?t.internal_deleteInternalData(e):c.default.internal_deleteInternalData(e)).then((()=>{s.each(e,(e=>{delete this._internalData[e]})),this.trigger(e)}))}};(0,o.__decorate)([a.autoSubscribe,(0,o.__param)(0,a.key)],m.prototype,"getData",null),(0,o.__decorate)([a.autoSubscribe,(0,o.__param)(0,a.key)],m.prototype,"getDataExclusive",null),m=n=(0,o.__decorate)([l.Startupable,a.AutoSubscribeStore],m),t.InternalDataStore=m,t.default=new m},29518:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AETimerDurationInSeconds=t.AETimeoutInSeconds=void 0;const n=i(31844),o=i(16778),s=i(88837),a=i(97691),r=i(60),l=i(89391),c=i(46096),d=i(36237),u=i(22538);t.AETimeoutInSeconds=120,t.AETimerDurationInSeconds=t.AETimeoutInSeconds-20;class g extends s.StoreBase{constructor(){super(),this._isSystemIdle=!1,this._isActive=!1,this._lastUpdatedInfo={},this._onSystemIdleChange=(e,t)=>{d.log(c.LogTraceArea.ActiveEndpointService,"onSystemIdleChange : isIdle: "+t),this._isSystemIdle=t,this._recalculate()},this._subscribeSystemIdle=()=>{l.default.getConfigSettingsNoSubscription().endpointPresence.useSystemIdle?this._systemIdleSubscriptionToken||(this._systemIdleSubscriptionToken=n.default.onSystemIdleChange.subscribe(this._onSystemIdleChange)):this._systemIdleSubscriptionToken&&(this._systemIdleSubscriptionToken.unsubscribe(),this._systemIdleSubscriptionToken=void 0)},u.RegisterStartupable(this,"ActiveEndpointStore")}startup(){return this._isUserPresent=o.UserPresence.isUserPresent(),o.UserPresence.userPresenceChangedEvent.subscribe((e=>{this._isUserPresent=e,this._recalculate()})),this._appState=o.App.getActivationState(),r.default.subscribeForChanges("ActiveEndpointStore",(e=>{this._appState=e,this._recalculate()})),n.default.isSystemIdle().then((e=>{this._isSystemIdle=e})),this._subscribeSystemIdle(),l.default.subscribe(this._subscribeSystemIdle),d.log(c.LogTraceArea.ActiveEndpointService,"Initialized - Native endpoint activity status hookup"),this._recalculate(),a.Resolved()}_recalculate(){const e=this._isActive;this._isActive=l.default.getConfigSettingsNoSubscription().endpointPresence.useSystemIdle?!this._isSystemIdle:this._isUserPresent&&this._appState===o.Types.AppActivationState.Active,this._isActive!==e&&this.trigger()}isActive(){return this._isActive}getLastUpdatedInfo(){return this._lastUpdatedInfo}setLastUpdatedInfo(e){this._lastUpdatedInfo=e}test_teardown(){this._isUserPresent=!1,this._appState=o.Types.AppActivationState.Background,this._isSystemIdle=!0,this._isActive=!1,this._lastUpdatedInfo={},this._systemIdleSubscriptionToken&&(this._systemIdleSubscriptionToken.unsubscribe(),this._systemIdleSubscriptionToken=void 0)}test_trigger(){this.trigger()}}t.default=new g},72105:(e,t,i)=>{var n;Object.defineProperty(t,"__esModule",{value:!0});const o=i(70655),s=i(74958),a=i(96486),r=i(15069),l=i(2604),c=i(88837),d=i(97691),u=i(95314),g=i(42826),h=i(89391),p=i(63413),m=i(81169),S=i(76621),C=i(71830),f=i(62141),y=i(53819),_=i(16402),v=i(21444),b=i(68894),T=i(11251),P=i(46096),A=i(57347),k=i(36237),I=i(78735),w=i(46929),N=i(18078),M=i(81736),E=i(83892),x=i(44824),L=i(14976),R=i(22538),D=i(78262),B=i(72758),O=i(32686);let F=n=class extends c.StoreBase{constructor(){super(),this._recentAlerts=[],this._loadingAlertsFromDb=!1,this._unreadAlertCount=0,this._approximatedUnreadAlertCount=0,this.addMissedCallbackReminderAlert=e=>{k.log(P.LogTraceArea.AlertsStore,`addMissedCallbackReminderAlert, calleeMri: ${s.pii.Omit(e)}`);const t=u.default.fromScratch(g.AlertType.MissedCallbackReminder,Date.now(),!1,void 0,{missedCallbackReminderCalleeMri:e});this._recentAlerts.push(t),this._pruneAndSortRecentAlerts()},R.RegisterStartupable(this,"AlertsStore",[p.default,S.default,w.default,I.default,B.default])}startup(){return this._recentAlerts=[],this._loadingAlertsFromDb=!1,this._loadingAlertsFromDbPromise=void 0,this._unreadAlertCount=0,this._approximatedUnreadAlertCount=0,this._updateUnreadAlertsCount().then((()=>{this._blockedMriStoreSub&&p.default.unsubscribe(this._blockedMriStoreSub),this._blockedMriStoreSub=p.default.subscribe((e=>{this._loadAndPruneRecentAlerts().then((()=>{const e=a.partition(this._recentAlerts,(e=>e.alertType===g.AlertType.HighlightsFollowRequest&&p.default.isMriBlocked(e.highlightsFollowInfo.otherUserMri)));e[0].length>0&&(f.default.removeAlerts(e[0]),this._approximatedUnreadAlertCount-=n._countUnreadAlerts(e[0]),this._recentAlerts=e[1],this._unreadAlertCount=n._countUnreadAlerts(this._recentAlerts),this._checkReferenceCounting(),this.trigger())}))})),this._chatServiceAlertsUpdatedSub&&this._chatServiceAlertsUpdatedSub.unsubscribe(),this._chatServiceAlertsUpdatedSub=S.default.alertsUpdated.subscribe((e=>{this._areAlertsLoadedInMemory().then((t=>{const i=n._countUnreadAlerts(e.adds)-n._countUnreadAlerts(e.deletes)+n._countUnreadAlerts(a.map(e.updates,(e=>e.updated)))-n._countUnreadAlerts(a.map(e.updates,(e=>e.original)));this._approximatedUnreadAlertCount+=i,t?(a.each(e.deletes,(e=>{a.remove(this._recentAlerts,(t=>e.guid===t.guid))})),a.each(e.updates,(e=>{a.remove(this._recentAlerts,(t=>e.updated.guid===t.guid))})),this._recentAlerts.push(...e.adds),this._recentAlerts.push(...a.map(e.updates,(e=>e.updated))),this._pruneAndSortRecentAlerts()):(this._unreadAlertCount=this._approximatedUnreadAlertCount,0!==i&&(k.log(P.LogTraceArea.AlertsStore,"Alerts updated from ChatService, change: "+i+", total: "+this._unreadAlertCount),this.trigger()))}))})),this._myUserPreferencesStoreSub&&w.default.unsubscribe(this._myUserPreferencesStoreSub),this._myUserPreferencesStoreSub=w.default.subscribe((()=>{this._updateUnreadAlertsCount()}),w.TriggerKeys.AlertsLastReadTime),this._myUserPreferencesLocalSub&&I.default.unsubscribe(this._myUserPreferencesLocalSub),this._myUserPreferencesLocalSub=I.default.subscribe((()=>{v.default.isEngagementContentEnabled()||this.trigger()})),A.default.queueIdleTask("AlertsStore Pruning",A.TaskTypeFlags.CpuIntensive,(()=>{this._loadingAlertsFromDbPromise||f.default.countAlerts().then((e=>{e>80&&this._loadAndPruneRecentAlerts()}))})),this._popCardStoreSub&&this._popCardStoreSub.unsubscribe(),this._popCardStoreSub=x.default.updatedCardState.subscribe(((e,t)=>{e!==E.PopCardState.Completed&&e!==E.PopCardState.Dismissed||this._loadAndPruneRecentAlerts().then((()=>{let e=0;a.each(t,((t,i)=>this._addPopCardsAlert(i,t,this._generateUniqueIdFromCorrelationAndArrayPosition(e++,t.messageCorrelationId)))),this._pruneAndSortRecentAlerts()}))})),this._noticeMessageReceivedSub&&this._noticeMessageReceivedSub.unsubscribe(),this._noticeMessageReceivedSub=T.default.noticeMessageReceived.subscribe((e=>{this._loadAndPruneRecentAlerts().then((()=>{let t=0;a.each(e,(e=>this._addNoticeAlert(e,this._generateUniqueIdFromCorrelationAndArrayPosition(t++,e.messageCorrelationId)))),this._pruneAndSortRecentAlerts()}))})),this._noticeMessageOpenedSub&&this._noticeMessageOpenedSub.unsubscribe(),this._noticeMessageOpenedSub=T.default.noticeMessageOpened.subscribe((e=>{a.each(this._recentAlerts,((t,i)=>!t.noticeMessageInfo||t.noticeMessageInfo.guid!==e||(this._recentAlerts[i]=t.applyRead(!0),!1))),this._pruneAndSortRecentAlerts()})),this._appConfigStoreSub&&h.default.unsubscribe(this._appConfigStoreSub),this._permissionsStorePromptSub&&M.default.unsubscribe(this._permissionsStorePromptSub),this._permissionsStorePromptSub=M.default.subscribe((()=>{this.maybeAddOrRemoveNotificationPermissionAlert()}),M.TriggerKeys.NotificationsPrompt),this._permissionsStorePermissionChangedSub&&M.default.unsubscribe(this._permissionsStorePermissionChangedSub),this._permissionsStorePermissionChangedSub=M.default.subscribe((()=>{this.maybeAddOrRemoveNotificationPermissionAlert()}),D.PermissionType.Notifications)}))}_generateUniqueIdFromCorrelationAndArrayPosition(e,t){return e?`${t}_${e}`:t}_addOrUpdateAlert(e,t,i){this._loadAndPruneRecentAlerts().then((()=>{const n=()=>{const t=u.default.fromScratch(e,Date.now(),i);f.default.putAlerts([t]),this._recentAlerts.push(t)};if(t){const t=a.remove(this._recentAlerts,(t=>t.alertType===e));a.isEmpty(t)||f.default.removeAlerts(t),n()}else{let t=!1;a.each(this._recentAlerts,((n,o)=>{if(n.alertType===e){const e=n.applyRead(i);this._recentAlerts[o]=e,f.default.putAlerts([e]),t=!0}})),t||n()}this._pruneAndSortRecentAlerts()}))}_addOrUpdateNotificationPermissionAlert(e,t){this._addOrUpdateAlert(g.AlertType.NotificationPermission,e,t)}_supportsNotifications(){return r.BrowserEnvironment.supportsNotifications()}_isNotificationPermissionGranted(){return M.default.permissionStatus(D.PermissionType.Notifications)===l.PermissionStatus.Granted}_shouldDisplayNotificationPermissionAlert(){return this._supportsNotifications()&&!this._isNotificationPermissionGranted()&&M.default.isNotificationsPromptDismissed()}_addPopCardsAlert(e,t,i){const o=g.AlertType.Engagement,s=y.default.getActiveCampaignById(t.alertCampaignId),r=a.remove(this._recentAlerts,(t=>t.alertType===o&&(!t.popCardInfo||t.popCardInfo.guid===e)));if(a.isEmpty(r)||(f.default.removeAlerts(r),this._approximatedUnreadAlertCount-=n._countUnreadAlerts(r)),o===g.AlertType.Engagement&&!(null==s?void 0:s.triggerManually)){if(!!x.default.getCardCount(E.PopCardTarget.All,void 0,void 0,e)){const n=(0,m.chain)(r,(0,m.filter)((t=>!!t.popCardInfo&&t.popCardInfo.guid===e)),(0,m.first)()),s={guid:e,title:t.alertTitle,subtitle:t.alertSubtitle,iconUrl:t.iconUrl,actionUri:t.alertActionUri,actionTarget:t.alertActionTarget,campaignId:t.alertCampaignId,isQuietCard:t.isQuietCard,userTagging:t.userTagging,placeholders:t.placeholders,messageCorrelationId:t.messageCorrelationId,engagementTelemetryAttributes:t.engagementTelemetryAttributes,persistencyMode:t.persistencyMode||b.EngagementMessagePersistencyMode.None,validUntil:t.validUntil,showOnlyTitle:t.showOnlyTitle},a=u.default.fromScratch(o,n?n.alertTime:Date.now(),!!t.shown,void 0,{popCardInfo:s,guid:i||t.messageCorrelationId});f.default.putAlerts([a]),this._recentAlerts.push(a)}}}_addNoticeAlert(e,t){let i=e.attachments&&e.attachments[0];if(!i||!i.content)return void k.error(P.LogTraceArea.AlertsStore,"Notice content missing, guid:",e.guid);let n=i.content.buttons&&i.content.buttons.length&&i.content.buttons[0],o=i.content.mainActionUri||n&&n.actionUri,s=i.content.mainActionTarget||n&&n.actionTarget;if(!o)return void k.error(P.LogTraceArea.AlertsStore,"Notice URI action missing, guid:",e.guid);const a={guid:e.guid,title:i.content.title,text:i.content.text,iconUrl:i.iconUrl,buttonTitle:n?n.title:void 0,buttonActionUri:n?n.actionUri:void 0,buttonActionTarget:n&&n.actionTarget||b.ActionTarget.Default,modalTitle:i.content.modalTitle,mainActionUri:o,mainActionTarget:s||b.ActionTarget.Default,campaignId:e.campaignId,contentType:i.contentType,skypeId:i.skypeId,showStatusIndicator:!!i.showStatusIndicator,placeholders:e.placeholders,messageCorrelationId:e.messageCorrelationId,engagementTelemetryAttributes:e.telemetry,userTagging:e.userTagging,persistencyMode:e.persistencyMode||b.EngagementMessagePersistencyMode.None,validUntil:v.default.calculateMessageValidUntilProperty(e.validUntilTimestamp,e.validForPeriod),showOnlyTitle:e.showOnlyTitle},r=u.default.fromScratch(g.AlertType.Notice,Date.now(),!1,void 0,{noticeMessageInfo:a,guid:t||e.messageCorrelationId});f.default.putAlerts([r]),this._recentAlerts.push(r)}_checkReferenceCounting(){this._approximatedUnreadAlertCount!==this._unreadAlertCount&&k.warn(P.LogTraceArea.AlertsStore,"Alerts counting off. Expected: "+this._approximatedUnreadAlertCount+", Actual: "+this._unreadAlertCount)}_updateUnreadAlertsCount(){return this._areAlertsLoadedInMemory().then((e=>e?d.Resolved(n._countUnreadAlerts(this._recentAlerts)):f.default.countUnreadAlertsSinceTime(w.default.getAlertsLastReadTime()||0))).then((e=>{this._approximatedUnreadAlertCount=e,this._unreadAlertCount!==e&&(k.log(P.LogTraceArea.AlertsStore,"_updateUnreadAlertsCount, new total: "+this._unreadAlertCount),this._unreadAlertCount=e,this.trigger())}))}getRecentAlerts(e=g.AlertTypeFilter.All){this._loadAndPruneRecentAlerts();let t=[],i=[];a.each(this._recentAlerts,(e=>{n._hideAlert(e)||e.isRemovedHighlightsFollowRequest()||(e.isHighlightsFollowRequest()?t.push(e):i.push(e))}));const o=a.concat(t,i);return e!==g.AlertTypeFilter.All?a.filter(o,(t=>{switch(e){case g.AlertTypeFilter.HighPriorityMessages:return t.alertType===g.AlertType.HighPriorityMessage;case g.AlertTypeFilter.Reactions:return t.alertType===g.AlertType.Reaction||t.alertType===g.AlertType.AdditionalReaction}})):o}isLoadingAlertsFromDb(){return this._loadingAlertsFromDb}getUnreadAlertsCount(){return Math.max(0,this._unreadAlertCount)}hasUnreadAlerts(e=!1){return e?a.some(this.getRecentAlerts(),(e=>!e.isRead)):this.getUnreadAlertsCount()>0}slashCommand_refresh(){this._loadAndPruneRecentAlerts().then((()=>{f.default.removeAlerts(this._recentAlerts),this._recentAlerts=[],this._unreadAlertCount=0,this._approximatedUnreadAlertCount=0,this.trigger()}))}_areAlertsLoadedInMemory(){return this._loadingAlertsFromDbPromise?this._loadingAlertsFromDbPromise.then((()=>!0)):d.Resolved(!1)}_shouldPruneEngagementAlertEntry(e){const t=e.alertType===g.AlertType.Notice?e.noticeMessageInfo:void 0,i=e.alertType===g.AlertType.Engagement?e.popCardInfo:void 0;if(t||i){const e=Date.now();if(t&&t.validUntil&&e>t.validUntil||i&&i.validUntil&&e>i.validUntil){if(i){const e=x.default.getCardsById([i.guid]);a.each(e,(e=>x.default.deletePopCard(e,!1)))}return!0}if(t&&t.persistencyMode===b.EngagementMessagePersistencyMode.Persistent||i&&i.persistencyMode===b.EngagementMessagePersistencyMode.Persistent)return!1}return i&&i.guid?!x.default.getCardCount(void 0,void 0,void 0,i.guid):!!t&&!!e.isRead}_loadAndPruneRecentAlerts(){return this._loadingAlertsFromDbPromise||(this._loadingAlertsFromDb=!0,this._loadingAlertsFromDbPromise=f.default.getAlerts().then((e=>{const t=a.filter(e,(e=>e.alertType===g.AlertType.Engagement||e.alertType===g.AlertType.Notice?this._shouldPruneEngagementAlertEntry(e):e.alertType===g.AlertType.OnboardingX||(e.alertType===g.AlertType.CoachMarks||e.alertType===g.AlertType.NotificationPermission&&!this._shouldDisplayNotificationPermissionAlert())));t.length&&f.default.removeAlerts(t),this._recentAlerts=e;let i=[];a.each(this._recentAlerts,((e,t)=>{if(e.alertType!==g.AlertType.HighlightsFollowRequest||e.highlightsFollowInfo.followState!==g.HighlightsFollowAlertState.Follow)return;const n=C.getHighlightsThreadMriForSkypeId(N.default.getSkypeId());if(!n)return;const o=S.default.getConversationMetaFromMemoryCache(n);if(!o||!o.conv.isUserMember(e.highlightsFollowInfo.otherUserMri))return;k.log(P.LogTraceArea.AlertsStore,"Forcing HL follow alert for "+L.mriOrId(e.highlightsFollowInfo.otherUserMri)+" to AcceptedByMe");const s={otherUserMri:e.highlightsFollowInfo.otherUserMri,followState:g.HighlightsFollowAlertState.AcceptedByMe},a=e.updateHighlightsFollowStatus(e.alertTime,!!e.isRead,e.message,s);this._recentAlerts[t]=a,i.push(a)})),i.length>0&&f.default.putAlerts(i),this._pruneAndSortRecentAlerts()}))),this._loadingAlertsFromDbPromise}_pruneAndSortRecentAlerts(){const e=_.default.add(Date.now(),0,-g.AlertsConstants.DaysOfAlertsToDisplay),t=a.partition(this._recentAlerts,(t=>t.alertType===g.AlertType.Notice||t.alertType===g.AlertType.Engagement?!this._shouldPruneEngagementAlertEntry(t):t.alertType!==g.AlertType.HighlightsSkypeChannel&&t.alertType!==g.AlertType.HighlightsSkypeChannelSecondary&&t.alertType!==g.AlertType.HighlightsFollowRequest&&!t.isHighlightsFollowRequest()&&(!(t.alertType===g.AlertType.NotificationPermission&&!this._shouldDisplayNotificationPermissionAlert())&&t.alertTime>e)));let i=t[1],o=t[0];o.sort(O.compareAlerts);for(let e=40;e<o.length;)o[e].isHighlightsFollowRequest()?e++:(i.push(o[e]),o.splice(e,1));i.length>0&&(k.log(P.LogTraceArea.AlertsStore,"Pruning "+i.length+" stale alerts from database"),f.default.removeAlerts(i),this._approximatedUnreadAlertCount-=n._countUnreadAlerts(i)),this._recentAlerts=o,this._loadingAlertsFromDb=!1,this._unreadAlertCount=n._countUnreadAlerts(this._recentAlerts),S.default.setAlertsTrackedByAlertsStore(this._recentAlerts),k.log(P.LogTraceArea.AlertsStore,"Alerts pruned, new total: "+this._unreadAlertCount+", approx: "+this._approximatedUnreadAlertCount),this._checkReferenceCounting(),this.trigger()}static _countUnreadAlerts(e){const t=w.default.getAlertsLastReadTime()||0;return a.sumBy(e,(e=>!e.isRead&&e.alertTime>t&&!n._hideAlert(e)?1:0))}static _hideAlert(e){return e.alertType===g.AlertType.HighlightComment||e.alertType===g.AlertType.HighlightsFollowRequest||e.alertType===g.AlertType.HighlightsSkypeChannel||e.alertType===g.AlertType.HighlightsSkypeChannelSecondary||(e.alertType!==g.AlertType.Reaction&&e.alertType!==g.AlertType.AdditionalReaction||!e.message?e.alertType===g.AlertType.CoachMarks?!v.default.isEngagementContentEnabled():!(e.alertType!==g.AlertType.ScheduledCall||!e.message)&&p.default.isMriBlocked(e.message.conversationId):C.isHighlightsThread(e.message.conversationId))}clearAlertsPanelCount(){return k.log(P.LogTraceArea.AlertsStore,"Clearing alerts panel count"),this._areAlertsLoadedInMemory().then((e=>{if(e){const e=a.maxBy(this._recentAlerts,(e=>e.alertTime));return d.Resolved(e?e.alertTime:0)}return f.default.getMostRecentAlertTime()})).then((e=>{e!==(w.default.getAlertsLastReadTime()||0)&&(k.log(P.LogTraceArea.AlertsStore,"Setting alerts last read time to "+e),w.default.setAlertsLastReadTime(e))}))}markAsRead(e){k.log(P.LogTraceArea.AlertsStore,`Mark one as read, guid: ${e}`),this._recentAlerts=a.map(this._recentAlerts,(t=>t.guid===e?t.applyRead(!0):t)),this.trigger()}markAllAsRead(){if(k.log(P.LogTraceArea.AlertsStore,"Marking all alerts as read"),a.isEmpty(this._recentAlerts))return;const e=[];a.each(this._recentAlerts,((t,i)=>{if(!t.isRead){const n=t.applyRead(!0);this._recentAlerts[i]=n,e.push(n)}})),a.isEmpty(e)||(this._unreadAlertCount=0,f.default.putAlerts(e),this.trigger())}maybeAddOrRemoveNotificationPermissionAlert(){this._shouldDisplayNotificationPermissionAlert()?this._addOrUpdateNotificationPermissionAlert(!0,!1):this._pruneAndSortRecentAlerts()}test_getApproximatedUnreadAlertsCount(){return this._approximatedUnreadAlertCount}test_getAllRawAlerts(){return this._recentAlerts}test_shouldPruneEngagementAlertEntry(e){return this._shouldPruneEngagementAlertEntry(e)}test_cleanSubscriptions(){this._blockedMriStoreSub=void 0,this._chatServiceAlertsUpdatedSub=void 0,this._myUserPreferencesStoreSub=void 0,this._popCardStoreSub=void 0,this._noticeMessageReceivedSub=void 0,this._noticeMessageOpenedSub=void 0,this._permissionsStorePromptSub=void 0,this._permissionsStorePermissionChangedSub=void 0,this._appConfigStoreSub=void 0,this._myUserPreferencesLocalSub=void 0}};(0,o.__decorate)([c.autoSubscribe],F.prototype,"getRecentAlerts",null),(0,o.__decorate)([c.autoSubscribe],F.prototype,"isLoadingAlertsFromDb",null),(0,o.__decorate)([c.autoSubscribe],F.prototype,"getUnreadAlertsCount",null),(0,o.__decorate)([c.autoSubscribe],F.prototype,"hasUnreadAlerts",null),F=n=(0,o.__decorate)([c.AutoSubscribeStore],F),t.default=new F},32686:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compareAlerts=void 0;const n=i(42826);t.compareAlerts=function(e,t){return e.alertType!==n.AlertType.NotificationPermission&&t.alertType!==n.AlertType.NotificationPermission||e.alertType===t.alertType?e.alertTime<t.alertTime?1:e.alertTime>t.alertTime?-1:e.guid<t.guid?1:e.guid>t.guid?-1:0:e.alertType===n.AlertType.NotificationPermission?-1:1}},78547:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppUpdateStatus=void 0;const n=i(70655),o=i(16778),s=i(88837),a=i(60),r=i(46096);var l;!function(e){e[e.Updated=0]="Updated",e[e.NotUpdated=1]="NotUpdated"}(l=t.AppUpdateStatus||(t.AppUpdateStatus={}));let c=class extends s.StoreBase{constructor(){super(),this._isAppUpdated=!1,a.default.subscribeForChanges("AppStateStore",(()=>this.trigger()))}getAppState(){return o.App.getActivationState()}isAppUpdated(){return this._isAppUpdated}getAppUpdateStatus(){return o.Storage.getItem(r.StorageItemKeys[r.StorageItemKeys.AppUpdateStatus])}setAppUpdateStatus(e){const t=e?l.Updated:l.NotUpdated;return this._setAppUpdatedStatus(e),o.Storage.setItem(r.StorageItemKeys[r.StorageItemKeys.AppUpdateStatus],l[t]).then((()=>{this.trigger()}))}_setAppUpdatedStatus(e=!1){this._isAppUpdated=e}};(0,n.__decorate)([s.autoSubscribe],c.prototype,"getAppState",null),(0,n.__decorate)([s.autoSubscribe],c.prototype,"isAppUpdated",null),c=(0,n.__decorate)([s.AutoSubscribeStore],c),t.default=new c},90247:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RecordingError=t.RecordingState=void 0;const n=i(70655),o=i(96486),s=i(71545),a=i(88837);var r,l;!function(e){e[e.None=0]="None",e[e.StartingMic=1]="StartingMic",e[e.Recording=2]="Recording",e[e.GettingAudio=3]="GettingAudio",e[e.HasAudio=4]="HasAudio"}(r=t.RecordingState||(t.RecordingState={})),function(e){e[e.None=0]="None",e[e.StartFailed=1]="StartFailed",e[e.StopFailed=2]="StopFailed"}(l=t.RecordingError||(t.RecordingError={}));let c=class extends a.StoreBase{constructor(){super(...arguments),this._sessionCounter=0,this._state=r.None,this._error=l.None,this._elapsedTime=0,this._currentSession=this._sessionCounter,this._session=null,this._volumeSamples=null,this._currentAudioResult=null}getRecordingState(){return this._state}getRecordingStateNoSubscription(){return this._state}getRecordingError(){return this._error}getVolumeSamples(){return o.clone(this._volumeSamples)}getElapsedTimeMs(){return this._elapsedTime}getRecordingResult(){return o.clone(this._currentAudioResult)}_isValid(e,t){return e===this._currentSession&&t===this._state}startRecording(e=500){this._state=r.StartingMic,this._currentSession=++this._sessionCounter,this._session=s.default.createRecordingSession(),this._volumeSamples=[],this._currentAudioResult=null;const t=Date.now(),i=this._currentSession;this._session.startRecording((e=>{this._isValid(i,r.Recording)&&(this._volumeSamples.push(e),this._elapsedTime=Date.now()-t,this.trigger())}),e).then((()=>{this._isValid(i,r.StartingMic)&&(this._state=r.Recording,this.trigger())}),(()=>{this._isValid(i,r.StartingMic)&&this._reset(l.StartFailed)})),this.trigger()}stopRecording(){const e=this._session;this._session=null,this._state=r.GettingAudio;const t=this._currentSession;e.stopRecording().then((e=>{this._isValid(t,r.GettingAudio)&&(this._state=r.HasAudio,this._volumeSamples=null,this._currentAudioResult=Object.assign(Object.assign({},e),{durationMs:this._elapsedTime}),this.trigger())}),(()=>{this._isValid(t,r.GettingAudio)&&this._reset(l.StopFailed)}))}reset(){this._reset()}_reset(e=l.None){const t=this._session;this._state=r.None,this._error=e,this._session=null,this._volumeSamples=null,this._elapsedTime=0,this._currentAudioResult=null,t&&t.stopRecording(),this.trigger()}};(0,n.__decorate)([a.autoSubscribe],c.prototype,"getRecordingState",null),(0,n.__decorate)([a.disableWarnings],c.prototype,"getRecordingStateNoSubscription",null),(0,n.__decorate)([a.autoSubscribe],c.prototype,"getRecordingError",null),(0,n.__decorate)([a.autoSubscribe],c.prototype,"getVolumeSamples",null),(0,n.__decorate)([a.autoSubscribe],c.prototype,"getElapsedTimeMs",null),(0,n.__decorate)([a.autoSubscribe],c.prototype,"getRecordingResult",null),c=(0,n.__decorate)([a.AutoSubscribeStore],c),t.default=new c},51267:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerKeys=t.FlashMode=t.CameraMode=void 0;const n=i(70655),o=i(96486),s=i(45961),a=i(88837),r=i(97691),l=i(47447),c=i(25854);Object.defineProperty(t,"CameraMode",{enumerable:!0,get:function(){return c.CameraMode}}),Object.defineProperty(t,"FlashMode",{enumerable:!0,get:function(){return c.FlashMode}});const d=i(46096),u=i(36237),g=i(92210),h=i(29130),p=i(22538);var m;!function(e){e[e.CurrentFlashMode=0]="CurrentFlashMode",e[e.CurrentCameraMode=1]="CurrentCameraMode",e[e.CurrentZoomLevel=2]="CurrentZoomLevel",e[e.SupportedCameras=3]="SupportedCameras",e[e.HasFlash=4]="HasFlash",e[e.HasBackTelephotoCamera=5]="HasBackTelephotoCamera",e[e.MaxZoom=6]="MaxZoom",e[e.AsyncCaptureStatusKey=7]="AsyncCaptureStatusKey",e[e.CameraAvailable=8]="CameraAvailable",e[e.DesktopVIMStatus=9]="DesktopVIMStatus"}(m=t.TriggerKeys||(t.TriggerKeys={}));let S=class extends a.StoreBase{constructor(){super(),this._currentFlashMode="off",this._currentCameraMode="back",this._preferredCameraMode="back",this._currentZoomLevel=1,this._maxZoom=1,this._hasBackTelephotoCamera=!1,this._supportedCameras=0,this._hasFlash=!1,this._isCameraAvailable=!0,this._visibleCapturePanelIDs=[],this._perfScenarios={},p.RegisterStartupable(this,"CaptureSettingsStore",[h.default])}startup(){return this._isCameraAvailable=l.UICapabilities.cameraSupported()&&!h.default.isSplitScreenIPad(),u.log(d.LogTraceArea.Capture,"CaptureSettingsStore startup, isCameraAvailable: "+this._isCameraAvailable),this._splitScreenSubscriptionToken=h.default.subscribe((()=>{const e=l.UICapabilities.cameraSupported()&&!h.default.isSplitScreenIPad();e!==this._isCameraAvailable&&(u.log(d.LogTraceArea.Capture,"CaptureSettingsStore, update isCameraAvailable: "+e),this._isCameraAvailable=e,this.trigger(m.CameraAvailable))}),h.TriggerKeys.SplitScreenIPad),s.DefaultCamera.getDefaultCamera(this._preferredCameraMode).then((e=>{this.setupCamera(e)})),r.Resolved()}destroy(){this._splitScreenSubscriptionToken&&(h.default.unsubscribe(this._splitScreenSubscriptionToken),this._splitScreenSubscriptionToken=void 0)}getCurrentFlashMode(){return this.convertStringToFlashModeEnum(this._currentFlashMode)}getCurrentCameraMode(){return this.convertStringToCameraModeEnum(this._currentCameraMode)}getCurrentZoomLevel(){return this._currentZoomLevel}getSupportedCameras(){return this._supportedCameras}hasFlash(){return this._hasFlash}hasBackTelephotoCamera(){return this._hasBackTelephotoCamera}maxZoom(){return this._maxZoom}isCameraAvailable(){return this._isCameraAvailable}isCameraAvailableNoSubscription(){return this._isCameraAvailable}setSupportedCameras(e){this._supportedCameras=e,this.trigger(m.SupportedCameras)}setIsCameraAvailable(e){this._isCameraAvailable=e,this.trigger(m.CameraAvailable)}setupCamera(e){if("none"===e)this.setIsCameraAvailable(!1);else{let t=this.convertStringToCameraModeEnum(e);this.setCameraMode(t)}}setHasFlash(e){e!==this._hasFlash&&(this._hasFlash=e,this.trigger(m.HasFlash))}setCameraMode(e){e!==this.getCurrentCameraMode()&&(this._currentCameraMode=this.convertCameraModeEnumToString(e),this.trigger(m.CurrentCameraMode))}getDefaultCamera(e){return r.fromThenable(s.DefaultCamera.getDefaultCamera(e))}updateSettings(e){e&&(e.supportedCameras().then((e=>this.setSupportedCameras(e))),e.getDefaultCamera(this._preferredCameraMode).then((e=>this.setupCamera(e))),e.hasBackTelephotoCamera().then((e=>this.setHasBackTelephotoCamera(e))),e.getMaxZoom().then((e=>this.setMaxZoom(e))),e.hasFlash().then((e=>this.setHasFlash(e))))}setHasBackTelephotoCamera(e){this._hasBackTelephotoCamera=e,this.trigger(m.HasBackTelephotoCamera)}setMaxZoom(e){this._maxZoom=e,this.trigger(m.MaxZoom)}setPerfScenario(e,t){this._perfScenarios[g.ScenarioName[e]]=t}getPerfScenario(e){return this._perfScenarios[g.ScenarioName[e]]}maybeGetAndClearPerfScenario(e){const t=this._perfScenarios[g.ScenarioName[e]];return delete this._perfScenarios[g.ScenarioName[e]],t}toggleCamera(){if(this._supportedCameras>1){const e="front"===this._currentCameraMode?"back":"front";this._currentCameraMode=e,this.trigger(m.CurrentCameraMode)}}getCameraToggleMode(){if(this._supportedCameras>1){const e="front"===this._currentCameraMode?"back":"front";return this.convertStringToCameraModeEnum(e)}return c.CameraMode.None}setZoomLevel(e){this._currentZoomLevel=e,this.trigger(m.CurrentZoomLevel)}toggleFlash(){if(this._hasFlash){const e="off"===this._currentFlashMode?"on":"off";this._currentFlashMode=e,this.trigger(m.CurrentFlashMode)}}convertStringToCameraModeEnum(e){return"front"===e?c.CameraMode.Front:c.CameraMode.Back}setAsyncCaptureStatus(e,t){let i=o.findIndex(this._visibleCapturePanelIDs,(t=>t===e));if(-1===i){if(t)return i=this._visibleCapturePanelIDs.push(e)-1,this.trigger(m.AsyncCaptureStatusKey),void u.log(d.LogTraceArea.GenericUnsafe,"CaptureSettingsStore visible capture panel "+e+" added (now "+this._visibleCapturePanelIDs.length+")")}else if(!t)return this._visibleCapturePanelIDs.splice(i,1),this.trigger(m.AsyncCaptureStatusKey),void u.log(d.LogTraceArea.GenericUnsafe,"CaptureSettingsStore visible capture panel "+e+" removed (now "+this._visibleCapturePanelIDs.length+")")}isInAsyncCapture(){return 0!==this._visibleCapturePanelIDs.length}convertStringToFlashModeEnum(e){return"on"===e?c.FlashMode.On:c.FlashMode.Off}convertCameraModeEnumToString(e){switch(e){case c.CameraMode.Front:return"front";case c.CameraMode.Back:default:return"back"}}convertFlashModeEnumToString(e){switch(e){case c.FlashMode.On:return"on";case c.FlashMode.Off:default:return"off"}}test_resetFields(){this._currentFlashMode="off",this._currentCameraMode="back",this._preferredCameraMode="back",this._currentZoomLevel=1,this._supportedCameras=0,this._hasFlash=!1,this._isCameraAvailable=!0,this._visibleCapturePanelIDs=[]}};(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.CurrentFlashMode)],S.prototype,"getCurrentFlashMode",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.CurrentCameraMode)],S.prototype,"getCurrentCameraMode",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.CurrentZoomLevel)],S.prototype,"getCurrentZoomLevel",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.SupportedCameras)],S.prototype,"getSupportedCameras",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.HasFlash)],S.prototype,"hasFlash",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.HasBackTelephotoCamera)],S.prototype,"hasBackTelephotoCamera",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.MaxZoom)],S.prototype,"maxZoom",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.CameraAvailable)],S.prototype,"isCameraAvailable",null),(0,n.__decorate)([a.disableWarnings],S.prototype,"isCameraAvailableNoSubscription",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.AsyncCaptureStatusKey)],S.prototype,"isInAsyncCapture",null),S=(0,n.__decorate)([a.AutoSubscribeStore],S),t.default=new S},53143:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ToastType=void 0;const n=i(70655),o=i(96486),s=i(88837),a=i(89391),r=i(9520),l=i(2278),c=i(98278),d=i(75049),u=i(46096),g=i(36237),h=i(30124),p=i(94224),m=i(93486);var S;!function(e){e[e.IncomingCall=0]="IncomingCall",e[e.Notification=1]="Notification",e[e.CallRecorder=2]="CallRecorder",e[e.LocalCallMediaCapturer=3]="LocalCallMediaCapturer",e[e.RemoteCallMediaCapturer=4]="RemoteCallMediaCapturer",e[e.CallConnectionQuality=5]="CallConnectionQuality",e[e.IncomingVideoDisabled=6]="IncomingVideoDisabled",e[e.NetworkConnection=7]="NetworkConnection",e[e.SpokenLanguageConflictResolution=8]="SpokenLanguageConflictResolution",e[e.CameraDeniedToast=9]="CameraDeniedToast",e[e.WebFeedback=10]="WebFeedback",e[e.Translation=11]="Translation",e[e.TeamsInterop=12]="TeamsInterop",e[e.TogetherModeNotice=13]="TogetherModeNotice",e[e.NewCallScreenRevertNotice=14]="NewCallScreenRevertNotice",e[e.LimitedSupportBrowser=15]="LimitedSupportBrowser",e[e.PstnTranslation=16]="PstnTranslation",e[e.MusicModeEnabled=17]="MusicModeEnabled"}(S=t.ToastType||(t.ToastType={}));let C=class extends s.StoreBase{constructor(){super(...arguments),this._toasts=[],this._toastId=1,this._hasPresentedWebFeedbackToast=!1}addNotificationToast(e,t){return this._addToast(S.Notification,S.Notification,e,t)}addIncomingCallToast(e,t,i){const n=this._addToast(S.IncomingCall,S.IncomingCall,e,i);return n&&l.default.markAnswerCallStep(e.callId,r.AnswerCallStep.NotifyingCallee,e.conversationMri,t,{CalleeNotifiedIn:r.AnswerCallNotificationLocation.InAppBanner}),n}addLimitedSupportBrowserToast(e){return this._addToast(S.LimitedSupportBrowser,S.Notification,e,c.MainRootViewId)}addCameraDeniedToast(e){return this._addToast(S.CameraDeniedToast,S.CameraDeniedToast,e,this._maybeRootViewId(e.conversationMri))}addCallRecorderToast(e){return this._addToast(S.CallRecorder,S.CallRecorder,e,this._maybeRootViewId(e.conversationMri))}addRemoteCallMediaCapturedToast(e){return this._addToast(S.RemoteCallMediaCapturer,S.RemoteCallMediaCapturer,e,this._maybeRootViewId(e.conversationMri))}addLocalCallMediaCapturedToast(e){return this._addToast(S.LocalCallMediaCapturer,S.LocalCallMediaCapturer,e,this._maybeRootViewId(e.conversationMri))}addCallConnectionQualityToast(e){return this._addToast(S.CallConnectionQuality,S.CallConnectionQuality,e,this._maybeRootViewId(e.conversationMri))}addIncomingVideoDisabledToast(e){return this._addToast(S.IncomingVideoDisabled,S.IncomingVideoDisabled,e,this._maybeRootViewId(e.conversationMri))}addNetworkConnectionToast(e){return this._addToast(S.NetworkConnection,S.NetworkConnection,e,c.MainRootViewId)}addSpokenLanguageConflictResolutionToast(e){return this._addToast(S.SpokenLanguageConflictResolution,S.SpokenLanguageConflictResolution,e,this._maybeRootViewId(e.conversationMri))}addGeneralPurposeToast(e){return this._addToast(e.toastType,e.toastType,e,this._maybeRootViewId(e.conversationMri),e.onDismiss)}addTranslationInCallToast(e){return this._addToast(S.Translation,S.Translation,e,this._maybeRootViewId(e.conversationMri))}addWebFeebackToast(e){if(!m.default.isChild()&&a.default.getS4LUiFeaturesNoSubscription().enableWebFeedbackBanner&&-1===o.findIndex(this._toasts,(e=>e.type===S.WebFeedback))&&!this._hasPresentedWebFeedbackToast)return this._hasPresentedWebFeedbackToast=!0,this._addToast(S.WebFeedback,S.WebFeedback,e,c.MainRootViewId)}_addToast(e,t,i,n,s){g.log(u.LogTraceArea.Navigation,"CompositeToastStore._addToast type: "+e);const a=[S.IncomingCall,S.CallRecorder,S.CallConnectionQuality,S.IncomingVideoDisabled,S.SpokenLanguageConflictResolution,S.CameraDeniedToast,S.TeamsInterop,S.Translation,S.TogetherModeNotice,S.NewCallScreenRevertNotice,S.PstnTranslation,S.MusicModeEnabled];if(o.includes(a,e)&&this._hasToastForCallId(e,i))return void g.log(u.LogTraceArea.Navigation,"CompositeToastStore._addToast type: "+e+" callId: "+i.callId+" already exists");const r={type:e,order:t,id:this._toastId++,state:i,rootViewId:n,onDismiss:s},l=o.findIndex(this._toasts,(e=>e.order>t));if(-1===l&&this._toasts.length<3)this._toasts.push(r);else{if(!(-1!==l&&l<3))return void g.log(u.LogTraceArea.Navigation,`Ignoring toast type: ${e} order ${t} as store is full`);this._toasts.splice(l,0,r),this._toasts.splice(3,1)}return this.trigger(),r.id}_hasToastForCallId(e,t){return!!o.find(this._toasts,(i=>i.type===e&&i.state.callId===t.callId))}removeToast(e,t,i){const n=o.find(this._toasts,(t=>t.id===e));if(n&&!o.isUndefined(t)&&n.state){const e=n.state;e.action&&e.action(t,i)}o.remove(this._toasts,(t=>t.id===e)).length&&this.trigger()}removeAll(){this._toasts=[],this.trigger()}updateToast(e,t){const i=o.find(this._toasts,(t=>t.id===e));return!!i&&(i.state=t,this.trigger(e),!0)}_isOnHoldCallRecorderToastMessage(e,t){return e.type===S.CallRecorder&&t!==e.state.callId}getToasts(e){const t=p.default.CallingStore.getConnectedOrOutgoingAndNotOnHoldCallId();return o.filter(this._toasts,(i=>(i.rootViewId===e||i.rootViewId===c.MainRootViewId)&&!this._isOnHoldCallRecorderToastMessage(i,t)))}getToast(e){return o.find(this._toasts,(t=>t.id===e))}_maybeRootViewId(e){return e&&h.default.isUsingSplitViewNoSubscription()?d.default.rootViewIdForConversationMri(e):c.MainRootViewId}};(0,n.__decorate)([s.autoSubscribe],C.prototype,"getToasts",null),(0,n.__decorate)([s.autoSubscribe,(0,n.__param)(0,s.key)],C.prototype,"getToast",null),C=(0,n.__decorate)([s.AutoSubscribeStore],C),t.default=new C},61614:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectivityAlertStore=void 0;const n=i(70655),o=i(88837),s=i(97691),a=i(89391),r=i(53143),l=i(46096),c=i(36237),d=i(78735),u=i(32226),g=i(76192),h=i(17791),p=i(22538);let m=class extends o.StoreBase{constructor(){super(),this._alertDismissed=!1,p.RegisterStartupable(this,"ConnectivityAlertStore",[d.default,u.default])}startup(){return u.default.subscribe((()=>{this._toggleConnectionAlert()})),this._toggleConnectionAlert(),s.Resolved()}getConnectivityAlertType(){return this._reportedAlertType}shouldShowCaptivePortalQuestionnaire(){if(this._reportedAlertType!==l.ConnectivityAlertType.CaptivePortal)return!1;const e=a.default.getS4LMessagingFeatures();if(!e.enableCaptivePortalQuestionnaire)return!1;const t=d.default.getUserPreferencesLocal().captivePortalDismissedAt;return void 0===t||!!e.captivePortalQuestionnaireFrequency&&Date.now()>=t+1e3*e.captivePortalQuestionnaireFrequency}answerCaptivePortalQuestionnaire(e){e===g.CaptivePortalQuestionnaireOption.Invalid&&h.default.forcePassedConnectivityCheck(),c.track(new g.CaptivePortalQuestionnaireEvent(e)),d.default.setUserPreferencesLocal({captivePortalDismissedAt:Date.now()})}dismissConnectivityAlert(){this._alertDismissed=!0,this._removeToast()}_toggleConnectionAlert(){const e=u.default.getConnectionStatus();e===u.ConnectionStatus.PossibleCaptivePortal?this._createOrUpdateToast(l.ConnectivityAlertType.CaptivePortal):e===u.ConnectionStatus.DisconnectedNoNetworkingReported?this._createOrUpdateToast(l.ConnectivityAlertType.NoNetwork):this._removeToast()}_createOrUpdateToast(e){if(this._alertDismissed)return void this._removeToast();if(e===this._reportedAlertType)return;const t=new g.ConnectivityAlertShowEvent(e);if(c.track(t),void 0!==this._toastId)c.log(l.LogTraceArea.ConnectivityStatusBar,"ConnectivityAlertStore: updating toast, reported type "+l.ConnectivityAlertType[e]),r.default.updateToast(this._toastId,{toastType:e});else if(c.log(l.LogTraceArea.ConnectivityStatusBar,"ConnectivityAlertStore: adding toast, reported type "+l.ConnectivityAlertType[e]),this._toastId=r.default.addNetworkConnectionToast({toastType:e}),void 0===this._toastId)return;this._alertDismissed=!1,this._reportedAlertType=e,this.trigger()}_removeToast(){void 0!==this._toastId&&(c.log(l.LogTraceArea.ConnectivityStatusBar,"ConnectivityAlertStore: removing toast, reported type "+(this._reportedAlertType?l.ConnectivityAlertType[this._reportedAlertType]:"undefined")),r.default.removeToast(this._toastId),this._reportedAlertType=void 0,this._toastId=void 0,this.trigger())}};(0,n.__decorate)([o.autoSubscribe],m.prototype,"getConnectivityAlertType",null),(0,n.__decorate)([o.autoSubscribe],m.prototype,"shouldShowCaptivePortalQuestionnaire",null),m=(0,n.__decorate)([o.AutoSubscribeStore],m),t.ConnectivityAlertStore=m,t.default=new m},1656:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(88837),s=i(97691),a=i(22538);let r=class extends o.StoreBase{constructor(){super(),this._startupDeferral=s.Defer(),a.RegisterStartupable(this,"CrashStatusStore")}startup(){return this._startupDeferral.promise()}internal_feedCrashStatus(e){void 0===this._lastLaunchCrashed&&(this._lastLaunchCrashed=e,this._startupDeferral.resolve(void 0))}didLastLaunchCrash(){return this._lastLaunchCrashed}};(0,n.__decorate)([o.disableWarnings],r.prototype,"didLastLaunchCrash",null),r=(0,n.__decorate)([o.AutoSubscribeStore],r),t.default=new r},13560:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(88837),s=i(81211),a=i(46096),r=i(36237),l=i(70665),c=i(30124),d=i(60305);let u=class extends o.StoreBase{show(e,t){this._currentActionMenu=e;const i=this._usePopup(this._currentActionMenu);r.log(a.LogTraceArea.GenericUnsafe,"CustomActionMenuStore.show useDesktopPopup: "+!!e.useDesktopPopup+" usePopup: "+i+" causeId: "+t),this._navDismissalRegistrationHandle&&l.unregister(this._navDismissalRegistrationHandle),this._navDismissalRegistrationHandle=l.register({dismiss:()=>{this._currentActionMenu&&this.close(this._currentActionMenu.rootViewId,t)}}),i?s.default.show(this._currentActionMenu,t):(r.log(a.LogTraceArea.GenericUnsafe,"CustomActionMenuStore.show, trigger, causeId: "+t),this.trigger())}close(e,t){r.log(a.LogTraceArea.GenericUnsafe,"CustomActionMenuStore.close, causeId: "+t);const i=this._currentActionMenu;this._currentActionMenu=void 0,this._navDismissalRegistrationHandle&&(l.unregister(this._navDismissalRegistrationHandle),this._navDismissalRegistrationHandle=void 0),this._usePopup(i)?s.default.close(e):(r.log(a.LogTraceArea.GenericUnsafe,"CustomActionMenuStore.close, trigger"),this.trigger()),i&&i.onMenuClosed&&i.onMenuClosed(t)}getCurrent(){return this._currentActionMenu}isCustomActionMenuShown(){return!!this._currentActionMenu}isCustomActionMenuShownNoSubscription(){return!!this._currentActionMenu}_usePopup(e){return!!e&&!!e.useDesktopPopup||!c.default.isUsingStackNavigationContext()&&!d.default.useTabletUINoSubscription()}};(0,n.__decorate)([o.autoSubscribe],u.prototype,"getCurrent",null),(0,n.__decorate)([o.autoSubscribe],u.prototype,"isCustomActionMenuShown",null),(0,n.__decorate)([o.disableWarnings],u.prototype,"isCustomActionMenuShownNoSubscription",null),u=(0,n.__decorate)([o.AutoSubscribeStore],u),t.default=new u},6217:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(88837),s=i(97691),a=i(16402),r=i(22538),l=i(12770);let c=class extends o.StoreBase{constructor(){super(),this._fire=()=>{this.trigger(),l.default.clearTimeout(this._timer),this._initTimer()},r.RegisterStartupable(this,"DayChangedNotifierStore",[])}startup(){return this._initTimer(),s.Resolved()}_getTomorrowTimestamp(){let e=new Date(Date.now());return e.setDate(e.getDate()+1),e.setHours(0),e.setMinutes(0),e.setSeconds(0)}_initTimer(){const e=this._getTomorrowTimestamp();this._timer=l.default.setExpiration(this._fire,e+3e3)}getDisplayDateString(e){return a.default.getDisplayDateString(e)}};(0,n.__decorate)([o.autoSubscribe],c.prototype,"getDisplayDateString",null),c=(0,n.__decorate)([o.AutoSubscribeStore],c),t.default=new c},33790:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(88837);let s=class extends o.StoreBase{getAnchorPosition(){return this._anchorPosition}setAnchorPosition(e){this._anchorPosition=e,this.trigger()}};(0,n.__decorate)([o.autoSubscribe],s.prototype,"getAnchorPosition",null),s=(0,n.__decorate)([o.AutoSubscribeStore],s);let a=new s;t.default=a},52262:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(96486),s=i(88837),a=i(97691),r=i(1706),l=i(89391),c=i(71830),d=i(76335),u=i(82927),g=i(39549),h=i(82842),p=i(18460),m=i(18078),S=i(22538),C=i(51038),f=i(72758);let y=class extends s.StoreBase{constructor(){super(100),this._conversationsToTrack={},this._handleConversationUpdates=e=>{const t=o.filter(e,(e=>{const t=this._conversationsToTrack[e];if(!t)return!1;const i=(0,g.default)().getConversation(e);return!!i&&t.updateConversationAndCheckIfChanged(i)}));t.length>0&&this.trigger(t)},S.RegisterStartupable(this,"DisplayInfoStore",[g.default,f.default])}startup(){return(0,g.default)().subscribe(this._handleConversationUpdates),f.default.subscribe((e=>{o.each(this._conversationsToTrack,((t,i)=>{const n=(0,g.default)().getConversation(i);o.each(e,(e=>{if(n&&n.isUserMember(e))return this._handleConversationUpdates([i]),!1}))})),this.trigger(e)})),r.default.subscribe((e=>{const t=o.filter(e,(e=>c.isMri(e)));o.isEmpty(t)||this.trigger(t)})),d.default.subscribe((e=>{const t=o.filter(e,(e=>c.isMri(e)));o.isEmpty(t)||this.trigger(t)})),a.Resolved()}_startedTrackingKey(e){if(!c.isThread(e)||this._conversationsToTrack[e])return;const t=(0,g.default)().getConversation(e);this._conversationsToTrack[e]=new u.default(e,t)}_stoppedTrackingKey(e){delete this._conversationsToTrack[e]}getDisplayableProfilePotentiallyBeforeStartupAsync(e){return S.HasStarted(this)?a.Resolved(this.getDisplayableProfile(e)):c.isThread(e)?(0,g.default)().getConversationPotentiallyBeforeStartupAsync(e).then((t=>{const i=t&&c.isOneOnOneConversation(e)?t.getOtherPartyMri():void 0;return i?C.getDisplayableProfilePotentiallyBeforeStartupAsync(i).then((t=>c.isEncryptedThread(e)&&t instanceof h.default?o.clone(t).setConversationId(e):t)):C.populateProfilesToCalculateConvDisplayName(t).then((()=>new u.default(e,t)))})):C.getDisplayableProfilePotentiallyBeforeStartupAsync(e)}getDisplayableNamePotentiallyBeforeStartupAsync(e,t){return this.getDisplayableProfilePotentiallyBeforeStartupAsync(e).then((i=>this._getDisplayName(e,i,t)))}getDisplayableProfile(e){if(c.isThread(e)){const t=(0,g.default)(),i=c.isOneOnOneConversation(e)?t.getConversation(e):void 0,n=i?i.getOtherPartyMri():void 0;if(n){const t=C.getDisplayableProfile(n);return c.isEncryptedThread(e)&&t instanceof h.default?o.clone(t).setConversationId(e):t}if(!this._conversationsToTrack[e]){const i=t.getConversation(e);return new u.default(e,i)}return this._conversationsToTrack[e]}return C.getDisplayableProfile(e)}getDisplayName(e,t){const i=this._possiblyGetMatchingAddressBookContact(e);if(i)return i.getDisplayName();const n=this.getDisplayableProfile(e);return this._getDisplayName(e,n,t)}_getDisplayName(e,t,i){const n=c.isAgent(e)||c.isConnector(e)?void 0:c.stripMriNamespace(e);return t?t.getDisplayName(n,i):n}_possiblyGetMatchingAddressBookContact(e){let t,i;if(c.isPhoneMri(e)&&(i=e),i){const e=c.getPhoneNumberFromMri(i);t=e?p.default.getContactByPhoneNumber(e):void 0}else l.default.getS4LContactsFeatures().overrideWithAddressBookName&&c.isUserMri(e)&&!f.default.getDisplayableUserByMri(e).isManuallyAdded&&(t=p.default.getContactByCorrespondingMri(e));return t}getShortDisplayName(e){const t=this._possiblyGetMatchingAddressBookContact(e);if(t)return t.getShortName();const i=this.getDisplayableProfile(e);return i?i.getShortName():c.stripMriNamespace(e)}getMemberShortNameForConversation(e,t){if(!c.isThread(e)||!this._conversationsToTrack[e])return this.getDisplayableProfile(t).getShortName();return this._conversationsToTrack[e].getMemberShortName(t)}getCurrentUserDisplayNameCensusParams(){const e=this.getDisplayName(m.default.getSkypeMri()),t=e?e.split(" "):[],i=t.length;let n=!1;return 2===i&&t[0]===t[1]&&(n=!0),{displayNamePartsLength:i,firstAndSecondAreMatching:n}}};(0,n.__decorate)([s.disableWarnings],y.prototype,"_startedTrackingKey",null),(0,n.__decorate)([s.disableWarnings],y.prototype,"_stoppedTrackingKey",null),(0,n.__decorate)([s.autoSubscribe,(0,n.__param)(0,s.key)],y.prototype,"getDisplayableProfile",null),(0,n.__decorate)([s.autoSubscribe,(0,n.__param)(0,s.key)],y.prototype,"getDisplayName",null),(0,n.__decorate)([s.autoSubscribe,(0,n.__param)(0,s.key)],y.prototype,"getShortDisplayName",null),(0,n.__decorate)([s.autoSubscribe,(0,n.__param)(0,s.key)],y.prototype,"getMemberShortNameForConversation",null),(0,n.__decorate)([s.autoSubscribe],y.prototype,"getCurrentUserDisplayNameCensusParams",null),y=(0,n.__decorate)([s.AutoSubscribeStore],y),t.default=new y},10167:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(96486),s=i(88837),a=i(74634),r=i(97691),l=i(89391),c=i(84363),d=i(2519),u=i(46096),g=i(36237),h=i(75913),p=i(33754),m=i(78735),S=i(18078),C=i(22538),f=i(12770);let y=class extends s.StoreBase{constructor(){super(),this._updateStatus=d.default.NoUpdates,this._isWindowMaximized=!1,this._shouldShowUpdateBadge=!1,this._shouldShowUpdateReminder=!1,this._isMandatoryUpdate=!1,this._ignoreLocaleChange=!1,this._areConversationNavigationMenuItemsVisible=!1,this._shouldHavePasteAsPlainTextOption=!1,this.onMandatoryUpdate=new a.default,this.onNavigateToAboutPage=new a.default,this.onNavigateToSettings=new a.default,this.onNavigateToAVSettings=new a.default,this.onNavigateToProfile=new a.default,this.onNavigateToMeControl=new a.default,this.onNavigateToSearch=new a.default,this.onNavigateToFeedback=new a.default,this.onNavigateToSkypeURI=new a.default,this.onNavigateToSupport=new a.default,this.onNavigateToStatus=new a.default,this.onNavigateToPreviousConversation=new a.default,this.onNavigateToNextConversation=new a.default,this.onPresenceChange=new a.default,this.onNewConversation=new a.default,this.onNewGroupConversation=new a.default,this.onNewCall=new a.default,this.onSignOut=new a.default,this._onLogin=e=>{e&&this._handleSkypeURI()},this._setMandatoryUpdate=()=>{g.log(u.LogTraceArea.ElectronStateStore,"Setting update as Mandatory."),this._isMandatoryUpdate=!0,this.trigger()},this._setRedBadge=()=>{this._shouldShowUpdateReminder=!0,this.trigger()},this._setShowUpdateBadge=()=>{this._shouldShowUpdateBadge=!0,this.trigger()},this._handleSkypeURI=()=>{if(!this._api)return;const e=this._api.ipcProvider.app.getCurrentSkypeURI.send();e&&this.onNavigateToSkypeURI.fire(e)},C.RegisterStartupable(this,"ElectronStateStore"),S.default.userLoggedInUpdatedEvent.subscribe(this._onLogin)}startup(){return"undefined"!=typeof window&&void 0!==window.electronApi&&(this._api=window.electronApi,this._registerHandlers()),r.Resolved()}checkForUpdates(){this._api&&this._api.ipcProvider.appUpdate.checkForUpdates.send()}getUpdateStatus(){return this._updateStatus}setUpdateStatus(e){this._updateStatus=e,this.trigger()}getIsWindowMaximized(){return this._isWindowMaximized}setIsWindowMaximized(e){this._isWindowMaximized=e,this.trigger()}shouldShowUpdateBadge(){return this._shouldShowUpdateBadge}shouldShowUpdateReminder(){return this._shouldShowUpdateReminder}isMandatoryUpdate(){return this._isMandatoryUpdate}resetLocaleToSystem(){return this._api?(this._ignoreLocaleChange=!0,this._api.ipcProvider.localisation.resetLocale.invoke().then((e=>{p.setSystemLocale(e)}))):Promise.resolve()}acknowledgeAppExit(){this._api&&this._api.ipcProvider.app.exitAckApp.send()}getAppSettings(){if(this._api)return this._api.ipcProvider.app.getSettings.send()}changeAppSettings(e){this._api&&this._api.ipcProvider.app.changeSettings.send(e)}isAutoStartSupported(){return!!this._api&&this._api.ipcProvider.app.isAutoStartSupported.send()}canControlAutoStart(){return!1}_getShouldHavePasteAsPlainTextHelper(){let e=!1,t=!1;return({local:i,ecs:n})=>{e=o.isNil(i)?e:i,t=o.isNil(n)?t:n;const s=e&&t;this._shouldHavePasteAsPlainTextOption!==s&&(this._shouldHavePasteAsPlainTextOption=s,window.electronApi.ipcProvider.clipboard.setPasteAsPlainTextOption.send(this._shouldHavePasteAsPlainTextOption))}}_registerHandlers(){if(!this._api)return;const e=this._getShouldHavePasteAsPlainTextHelper();m.default.subscribe((()=>{const{pasteAsQuotesEnabled:t}=m.default.getUserPreferencesLocalNoSubscription();e({local:t})})),l.default.subscribe((()=>{const{enableKeyboardNavigationBetweenConversations:t,enableMultiMessageQuoteOnKeyboard:i,enableHandlingHyperlinkOnPaste:n}=l.default.getS4LMessagingFeaturesNoSubscription();this._areConversationNavigationMenuItemsVisible!==t&&(this._areConversationNavigationMenuItemsVisible=t,window.electronApi.ipcProvider.applicationMenu.setConversationNavigationMenuItemsVisible.send(this._areConversationNavigationMenuItemsVisible)),e({ecs:n||i})})),p.localeChangedEvent.subscribe((e=>{!this._ignoreLocaleChange&&this._api&&this._api.ipcProvider.localisation.setLocale.invoke(e),this._ignoreLocaleChange=!1})),this._api.ipcProvider.appUpdate.checkingForUpdate.on((()=>{this.setUpdateStatus(d.default.Checking)})),this._api.ipcProvider.appUpdate.updateNotAvailable.on((()=>{this.setUpdateStatus(d.default.NoUpdates)})),this._api.ipcProvider.appUpdate.updateAvailable.on((()=>{this.setUpdateStatus(d.default.UpdateAvailable)})),this._api.ipcProvider.appUpdate.updateDownloaded.on((e=>{if(g.log(u.LogTraceArea.ElectronStateStore,"New update downloaded",e),e&&e.releaseDate&&e.releaseName&&e.releaseNotes&&e.updateURL){if(this._setShowUpdateBadge(),this.setUpdateStatus(d.default.UpdateDownloaded),-1!==e.releaseName.indexOf("mandatory")&&(this._setMandatoryUpdate(),this.onMandatoryUpdate.fire()),!this._expirationId){const t=Date.parse(e.releaseDate)+12096e5;g.log(u.LogTraceArea.ElectronStateStore,"Setting reminder red badge alert for upgrade",new Date(t).toUTCString()),this._expirationId=f.default.setExpiration(this._setRedBadge,t)}}else g.log(u.LogTraceArea.ElectronStateStore,"Empty update object received.")})),this._api.ipcProvider.appUpdate.updateError.on((()=>{this.setUpdateStatus(d.default.Error)})),this._api.ipcProvider.window.onMaximized.on((()=>{this.setIsWindowMaximized(!0)})),this._api.ipcProvider.window.onUnmaximized.on((()=>{this.setIsWindowMaximized(!1)})),this._api.ipcProvider.app.onSkypeURI.on(this._handleSkypeURI),this._api.ipcProvider.applicationMenu.about.on(this.onNavigateToAboutPage.fire),this._api.ipcProvider.applicationMenu.openSettings.on(this.onNavigateToSettings.fire),this._api.ipcProvider.applicationMenu.openAvSettings.on(this.onNavigateToAVSettings.fire),this._api.ipcProvider.applicationMenu.openProfile.on(this.onNavigateToProfile.fire),this._api.ipcProvider.applicationMenu.openMeControl.on(this.onNavigateToMeControl.fire),this._api.ipcProvider.applicationMenu.searchSkype.on(this.onNavigateToSearch.fire),this._api.ipcProvider.applicationMenu.reportProblem.on(this.onNavigateToFeedback.fire),this._api.ipcProvider.applicationMenu.new1on1Chat.on(this.onNewConversation.fire),this._api.ipcProvider.applicationMenu.newGroupChat.on(this.onNewGroupConversation.fire),this._api.ipcProvider.applicationMenu.newCall.on(this.onNewCall.fire),this._api.ipcProvider.applicationMenu.signOut.on(this.onSignOut.fire),this._api.ipcProvider.applicationMenu.privacy.on((()=>h.default.openPrivacy())),this._api.ipcProvider.applicationMenu.terms.on((()=>h.default.openTerms())),this._api.ipcProvider.applicationMenu.skypeSupport.on(this.onNavigateToSupport.fire),this._api.ipcProvider.applicationMenu.skypeStatus.on(this.onNavigateToStatus.fire),this._api.ipcProvider.applicationMenu.previousConversation.on((()=>{g.log(u.LogTraceArea.ElectronStateStore,"menu-previous-conversation triggered"),this.onNavigateToPreviousConversation.fire()})),this._api.ipcProvider.applicationMenu.nextConversation.on((()=>{g.log(u.LogTraceArea.ElectronStateStore,"menu-next-conversation triggered"),this.onNavigateToNextConversation.fire()})),this._api.ipcProvider.applicationMenu.presenceChange.on((e=>{let t=(0,c.mapElectronPresenceToUserStatus)(e);g.log(u.LogTraceArea.ElectronStateStore,`Updating presence to ${e} - ${t}`),this.onPresenceChange.fire(t)})),this._api.ipcProvider.app.settingsChanged.on((()=>{this.trigger()}))}};(0,n.__decorate)([s.autoSubscribe],y.prototype,"getUpdateStatus",null),(0,n.__decorate)([s.autoSubscribe],y.prototype,"getIsWindowMaximized",null),(0,n.__decorate)([s.autoSubscribe],y.prototype,"shouldShowUpdateBadge",null),(0,n.__decorate)([s.autoSubscribe],y.prototype,"shouldShowUpdateReminder",null),(0,n.__decorate)([s.autoSubscribe],y.prototype,"isMandatoryUpdate",null),(0,n.__decorate)([s.autoSubscribe],y.prototype,"getAppSettings",null),(0,n.__decorate)([s.autoSubscribe],y.prototype,"isAutoStartSupported",null),(0,n.__decorate)([s.autoSubscribe],y.prototype,"canControlAutoStart",null),y=(0,n.__decorate)([s.AutoSubscribeStore],y),t.default=new y},73439:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(96486),s=i(88837),a=i(97691),r=i(62141),l=i(75893),c=i(69382),d=i(57347),u=i(22538);let g=class extends s.StoreBase{constructor(){super(),this._fileTrackerMetadata={},this._backgroundEffectFileTrackerMetadata={},this._startupDone=!1,this.getBackgroundEffectPrefix=e=>`${l.BACKGROUND_EFFECT_FILE_PREFIX}${e||""}`,this.removeTrackedFile=(e,t=!1)=>{this._removeFile(e,t)},this._removeFile=(e,t=!1)=>{if(this._fileTrackerMetadata[e]){if(r.default.removeFileTrackerMetadata([e]),t&&c.fileExists({fileUri:this._fileTrackerMetadata[e].localUri})){const t=this._fileTrackerMetadata[e].localUri;c.deleteImageFile(t)}delete this._fileTrackerMetadata[e],e.startsWith(l.BACKGROUND_EFFECT_FILE_PREFIX)&&delete this._backgroundEffectFileTrackerMetadata[e],this.trigger(e)}},u.RegisterStartupable(this,"FileDownloadStore")}startup(){let e=[];return d.default.queueIdleTask("FileDownloadStore",d.TaskTypeFlags.CpuIntensive,(()=>{r.default.getAllFileTrackerMetadata().then((t=>{a.all(o.map(t,(t=>{const i={fileUri:t.localUri,fileSizeInBytes:t.sizeInBytes,lastUpdatedTime:t.lastUpdatedTimestamp};return a.fromThenable(c.fileExists(i).then((i=>{i?(this._addFileInformationEntry(t),e.push(t.id)):r.default.removeFileTrackerMetadata([t.id])})))}))).then((()=>{this._startupDone=!0,this.trigger(e.concat(o.keys(this._fileTrackerMetadata)))}))}))})),a.Resolved()}_addFileInformationEntry(e,t=!1){var i;this._fileTrackerMetadata[e.id]||((null===(i=e.id)||void 0===i?void 0:i.startsWith(l.BACKGROUND_EFFECT_FILE_PREFIX))&&(this._backgroundEffectFileTrackerMetadata[e.id]=e),this._fileTrackerMetadata[e.id]=e,this._startupDone&&this.trigger(e.id),t&&r.default.putFileTrackerMetadata([e]))}canTrackFiles(){return!1}getLocalUri(e){if(this._startupDone&&e){const t=this._fileTrackerMetadata[e];if(t){const i={fileUri:t.localUri,fileSizeInBytes:t.sizeInBytes,lastUpdatedTime:t.lastUpdatedTimestamp};return c.fileExists(i).then((t=>{t||this._removeFile(e)})),t.localUri}}}getAllBackgroundEffectsFiles(){return this._backgroundEffectFileTrackerMetadata}addFileInformationForTracking(e,t,i,n){if(!t)return;const o=e.startsWith(l.BACKGROUND_EFFECT_FILE_PREFIX)?this.getBackgroundEffectPrefix(t):e,s=Object.assign({id:o,localFileName:i,localUri:t},n);this._addFileInformationEntry(s,!0)}};(0,n.__decorate)([s.disableWarnings],g.prototype,"canTrackFiles",null),(0,n.__decorate)([s.autoSubscribe,(0,n.__param)(0,s.key)],g.prototype,"getLocalUri",null),(0,n.__decorate)([s.autoSubscribe],g.prototype,"getAllBackgroundEffectsFiles",null),g=(0,n.__decorate)([s.AutoSubscribeStore],g),t.default=new g},39597:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(74958),s=i(96486),a=i(76975),r=i(88837),l=i(89391),c=i(32183),d=i(46096),u=i(36237),g=i(32226),h=i(26424),p=i(58962),m=i(12770);var S;!function(e){e[e.Cached=0]="Cached",e[e.NotCached=1]="NotCached",e[e.QueryingCache=2]="QueryingCache",e[e.Prefetching=3]="Prefetching",e[e.PrefetchFailed=4]="PrefetchFailed"}(S||(S={}));let C=class extends r.StoreBase{constructor(){super(),this._imageStatus={},this._prefetchIfNotCached={},this._retryPrefetchData={},g.default.subscribe((()=>{g.default.isConnected()&&s.each(s.keys(this._retryPrefetchData),(e=>{const t=this._retryPrefetchData[e].urlsToTrigger,i=this._retryPrefetchData[e].timeoutId;m.default.clearTimeout(i),delete this._retryPrefetchData[e],this._retryPrefetch(e,t,this._getRetryCount())}))}));const e=()=>{const e=l.default.getS4LMessagingFeaturesNoSubscription().imageCaching.queryCacheInFlightLimit;a.default.setQueryCacheInFlightLimit(e)};l.default.subscribe(e),e()}_getCurrentTime(){return Math.floor(Date.now()/1e3)}_getStatus(e){let t=l.default.getS4LMessagingFeaturesNoSubscription().imageCaching.cachedStatusMaxAge;if(this._imageStatus[e]){if(!(this._imageStatus[e].status===S.Cached&&this._imageStatus[e].timeCached+t<this._getCurrentTime()))return this._imageStatus[e].status;delete this._imageStatus[e]}}_setStatus(e,t){u.log(d.LogTraceArea.ImageCachingStore,`Setting status of ${o.pii.Omit(e)} to ${S[t]}`),this._imageStatus[e]={status:t,timeCached:t===S.Cached?this._getCurrentTime():0}}_getChangedSize(e,t){return s.assign({},e,{size:t})}_getSizes(e,t,i,n){let o=[];return s.each((0,p.getEmoticonSizes)(),(s=>{(s<e.size&&t||s===e.size&&i||s>e.size&&n)&&o.push(this._getChangedSize(e,s))})),o}_getSmallerSizes(e){return this._getSizes(e,!0,!1,!1)}_getLargerSizes(e){return this._getSizes(e,!1,!1,!0)}_getAlternateSizes(e){return e.type===h.EmoticonType.Static?this._getSmallerSizes(e).concat(this._getLargerSizes(e)):[]}_getUrlsToTrigger(e){let t=[e];return e.type===h.EmoticonType.Static&&t.push(...this._getLargerSizes(e)),s.filter(s.map(t,(e=>(0,c.getUrl)(e))),(e=>this._isTrackingKey(e)))}_getRequestResult(e,t){return{requestedIcon:e,result:t}}_getPlaceholder(e){return this._getRequestResult(e,void 0)}_getIntermediateResult(e,t){return this._getRequestResult(e,{icon:t,type:h.ResultIconType.Intermediate})}_getFinalResult(e,t){return this._getRequestResult(e,{icon:t,type:h.ResultIconType.Final})}_getBestIcon(e){const t=this._getStatus((0,c.getUrl)(e));if(t===S.Cached)return this._getFinalResult(e,e);let i=s.filter(this._getAlternateSizes(e),(e=>this._getStatus((0,c.getUrl)(e))===S.Cached));if(0===i.length)return t===S.QueryingCache?this._getIntermediateResult(e,e):this._getPlaceholder(e);i=s.orderBy(i,["size"],["desc"]);let n=i[0];return n.size>=e.size?this._getFinalResult(e,n):this._getIntermediateResult(e,n)}_markImageCached(e,t){this._setStatus(e,S.Cached),u.log(d.LogTraceArea.ImageCachingStore,`New image cached: ${o.pii.Omit(e)}, triggering ${t.length} URL(s).`),this.trigger(t)}_getRetryCount(){return g.default.getConnectionStatus()===g.ConnectionStatus.DisconnectedNoNetworkingReported?l.default.getS4LMessagingFeaturesNoSubscription().imageCaching.prefetchRetryCountNoConnection:l.default.getS4LMessagingFeaturesNoSubscription().imageCaching.prefetchRetryCount}_retryPrefetch(e,t,i){this._isTrackingKey(e)?this._prefetch(e,t,i):this._setStatus(e,S.NotCached)}_handlePrefetchFailure(e,t){if(u.log(d.LogTraceArea.ImageCachingStore,`Prefetch failed: ${o.pii.Omit(e)}`),this._isTrackingKey(e)){this._setStatus(e,S.PrefetchFailed),this.trigger(t);let i=l.default.getS4LMessagingFeaturesNoSubscription().imageCaching.prefetchRetryLongDelay,n=m.default.setTimeout((()=>{delete this._retryPrefetchData[e],this._retryPrefetch(e,t,this._getRetryCount())}),i);this._retryPrefetchData[e]={urlsToTrigger:t,timeoutId:n}}else this._setStatus(e,S.NotCached)}_prefetch(e,t,i=1){u.log(d.LogTraceArea.ImageCachingStore,`Prefetching ${o.pii.Omit(e)}, ${i} retries left.`),this._setStatus(e,S.Prefetching);let n=l.default.getS4LMessagingFeaturesNoSubscription().imageCaching.prefetchRetryShortDelay;a.default.prefetch(e).then((()=>{this._markImageCached(e,t)})).catch((()=>{i>1?m.default.setTimeout((()=>{this._retryPrefetch(e,t,i-1)}),n):this._handlePrefetchFailure(e,t)}))}_queryCache(e){s.each(e,(e=>{this._setStatus(e.url,S.QueryingCache)}));const t=s.map(e,(e=>e.url));a.default.queryCache(t).then((t=>{s.each(e,(e=>{const i=e.url;-1!==t.indexOf(i)?(this._prefetchIfNotCached[i]&&delete this._prefetchIfNotCached[i],this._markImageCached(i,e.urlsToTrigger)):this._prefetchIfNotCached[i]?(delete this._prefetchIfNotCached[i],this._prefetch(i,e.urlsToTrigger,this._getRetryCount())):this._setStatus(i,S.NotCached)}))}))}_queryCacheEmoticon(e,t){let i=[e];if(t){const t=s.filter(this._getAlternateSizes(e),(e=>void 0===this._getStatus((0,c.getUrl)(e))));i.push(...t)}const n=s.map(i,(e=>({url:(0,c.getUrl)(e),urlsToTrigger:this._getUrlsToTrigger(e)})));this._queryCache(n)}requestEmoticon(e,t){let i=this._getStatus(e);switch(u.log(d.LogTraceArea.ImageCachingStore,`Requested ${o.pii.Omit(e)}, current status: ${void 0!==i?S[i]:"undefined"}`),i){case S.Cached:return this._getFinalResult(t,t);case S.NotCached:this._prefetch(e,this._getUrlsToTrigger(t),this._getRetryCount());break;case S.QueryingCache:this._prefetchIfNotCached[e]=!0;break;case S.Prefetching:case S.PrefetchFailed:break;case void 0:this._prefetchIfNotCached[e]=!0,this._queryCacheEmoticon(t,!0)}return this._getBestIcon(t)}requestEmoticons(e){return s.map(e,(e=>this.requestEmoticon((0,c.getUrl)(e),e)))}requestImage(e){let t=this._getStatus(e);switch(u.log(d.LogTraceArea.ImageCachingStore,`Requested ${o.pii.Omit(e)}, current status: ${void 0!==t?S[t]:"undefined"}`),t){case S.Cached:return e;case S.NotCached:this._prefetch(e,[e],this._getRetryCount());break;case S.QueryingCache:this._prefetchIfNotCached[e]=!0;break;case S.Prefetching:case S.PrefetchFailed:break;case void 0:this._prefetchIfNotCached[e]=!0,this._queryCache([{url:e,urlsToTrigger:[e]}])}return this._getStatus(e)===S.Cached?e:void 0}};(0,n.__decorate)([r.autoSubscribe,(0,n.__param)(0,r.key)],C.prototype,"requestEmoticon",null),(0,n.__decorate)([r.autoSubscribe,(0,n.__param)(0,r.key)],C.prototype,"requestImage",null),C=(0,n.__decorate)([r.AutoSubscribeStore],C),t.default=new C},66649:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(96486),s=i(72021),a=(i(16778),i(88837)),r=i(97691),l=i(89391),c=i(62141),d=i(26646),u=i(46096),g=i(36237),h=i(98754),p=i(32226),m=i(22538);let S=class extends a.StoreBase{constructor(){super(),this._reportedIsUsingGogoNetwork=!1,m.RegisterStartupable(this,"InFlightConnectionStore",[h.default,p.default])}startup(){return r.Resolved()}isUsingGogoNetwork(){return this._reportedIsUsingGogoNetwork}isUsingGogoNetworkNoSubscription(){return this._reportedIsUsingGogoNetwork}_updateGogoConfig(){return this._gogoSettings=l.default.getConfigSettingsNoSubscription().gogo,this._onGogoNetworkChanged(),this._refreshSSID(!0)}_refreshSSID(e=!1){if(!this._gogoSettings.enabled)return r.Resolved();if(!p.default.isConnected())return r.Resolved();return s.default.getSSID().then((t=>{(t!==this._lastKnownSSID||e)&&(this._lastKnownSSID=t,this._refreshIsOnGoGoSSID(o.includes(this._gogoSettings.ssid,t)))})).catch((()=>{this._lastKnownSSID=void 0,this._refreshIsOnGoGoSSID(!1)}))}_refreshIsOnGoGoSSID(e){this._isOnGoGoSSID!==e&&(this._isOnGoGoSSID=e,g.log(u.LogTraceArea.InFlightConnectionStore,"isOnGoGoSSID = "+this._isOnGoGoSSID),h.default.putData(c.InternalKeys.IsOnGoGoSSID,this._isOnGoGoSSID),this._refreshECSService())}_refreshECSService(){g.log(u.LogTraceArea.InFlightConnectionStore,"Refreshing ECS"),d.default.requestUpdate()}_onGogoNetworkChanged(){const e=this._gogoSettings.enabled&&this._gogoSettings.isOnGogoIpRange;this._reportedIsUsingGogoNetwork!==e&&(g.log(u.LogTraceArea.InFlightConnectionStore,"_onGogoNetworkChanged: isGogoEnabled = "+this._gogoSettings.enabled+" isOnGogoIpRange = "+this._gogoSettings.isOnGogoIpRange),this._reportedIsUsingGogoNetwork=e,this.trigger())}};(0,n.__decorate)([a.autoSubscribe],S.prototype,"isUsingGogoNetwork",null),(0,n.__decorate)([a.disableWarnings],S.prototype,"isUsingGogoNetworkNoSubscription",null),S=(0,n.__decorate)([a.AutoSubscribeStore],S),t.default=new S},10400:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(31844),s=i(88837),a=i(98278),r=i(46096),l=i(36237),c=i(78735),d=i(29130),u=i(22538);var g;!function(e){e[e.Default=0]="Default",e[e.None=1]="None"}(g||(g={}));let h=class extends s.StoreBase{constructor(){super(...arguments),this._resizeMode=g.Default,this._lastUpdateInfo={height:0},this._isCustomKeyboardVisibleAndroid=!1,this._customKeyboardHeightFixAndroid=0,this._customAndroidKeyboardVisible=()=>!1}setResizeMode(e){this._resizeMode!==e&&(this._resizeMode=e,l.log(r.LogTraceArea.Keyboard,"KeyboardAwareStore.setResizeMode: "+e),this.trigger())}setUpdateInfo(e){const t=this._lastUpdateInfo.height!==e.height;this._lastUpdateInfo=e,this._updateNativeKeyboardHeights(e),t&&(l.log(r.LogTraceArea.Keyboard,"KeyboardAwareStore.setUpdateInfo, height changed: "+e.height),this.trigger())}immediatelyResetUpdateInfo(){this.setUpdateInfo({height:0,duration:0,easing:"keyboard"})}setCustomKeyboardVisibilityAndroid(e){this._isCustomKeyboardVisibleAndroid!==e&&(this._isCustomKeyboardVisibleAndroid=e,this.trigger())}setCustomKeyboardFixHeightAndroid(e){l.log(r.LogTraceArea.Keyboard,"KeyboardAwareStore.setCustomKeyboardFixHeightAndroid: "+e),this._customKeyboardHeightFixAndroid=e,this.trigger()}getResizeMode(){return this._resizeMode}getResizeModeNoSubscription(){return this._resizeMode}getUpdateInfo(){return this._lastUpdateInfo}getCustomKeyboardHeightAndroid(){return this._isCustomKeyboardVisibleAndroid?this._customKeyboardHeightFixAndroid:0}isKeyboardSeen(){return this._lastUpdateInfo.height>0||this._customAndroidKeyboardVisible()}usingIPadHardwareKeyboard(){return!1}_updateNativeKeyboardHeights(e){if(0===e.height)return;if(!u.HasStarted(c.default))return;const t=c.default.getNativeKeyboardHeightsNoSubscription(),i=d.default.getDeviceOrientation(a.MainRootViewId);i!==o.DeviceOrientation.Portrait||t&&t.potraitHeight&&e.height===t.potraitHeight||c.default.setNativeKeyboardHeights({potraitHeight:e.height,landscapeHeight:t?t.landscapeHeight:0}),i!==o.DeviceOrientation.Landscape||t&&t.landscapeHeight&&e.height===t.landscapeHeight||c.default.setNativeKeyboardHeights({potraitHeight:t?t.potraitHeight:0,landscapeHeight:e.height})}};(0,n.__decorate)([s.autoSubscribe],h.prototype,"getResizeMode",null),(0,n.__decorate)([s.autoSubscribe],h.prototype,"getUpdateInfo",null),(0,n.__decorate)([s.autoSubscribe],h.prototype,"getCustomKeyboardHeightAndroid",null),(0,n.__decorate)([s.autoSubscribe],h.prototype,"isKeyboardSeen",null),(0,n.__decorate)([s.autoSubscribe],h.prototype,"usingIPadHardwareKeyboard",null),h=(0,n.__decorate)([s.AutoSubscribeStore],h),t.default=new h},48638:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(16778),s=i(88837);let a=class extends s.StoreBase{constructor(){super(),this._isNavigatingWithKeyboard=o.UserInterface.isNavigatingWithKeyboard(),o.UserInterface.keyboardNavigationEvent.subscribe((e=>{this._isNavigatingWithKeyboard=e,this.trigger()}))}isNavigatingWithKeyboard(){return this._isNavigatingWithKeyboard}};(0,n.__decorate)([s.autoSubscribe],a.prototype,"isNavigatingWithKeyboard",null),a=(0,n.__decorate)([s.AutoSubscribeStore],a),t.default=new a},97073:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(88837),s=i(46096),a=i(36237);let r=class extends o.StoreBase{constructor(){super(...arguments),this._shouldSkipMobileHub=!1}shouldSkipMobileHub(){return this._shouldSkipMobileHub}skipMobileHub(e){this._shouldSkipMobileHub||(a.log(s.LogTraceArea.Navigation,"LaunchNavigationStore: skipMobileHub causeId: "+e),this._shouldSkipMobileHub=!0,this.trigger())}stopSkippingMobileHub(e){this._shouldSkipMobileHub&&(a.log(s.LogTraceArea.Navigation,"LaunchNavigationStore: stopSkippingMobileHub causeId: "+e),this._shouldSkipMobileHub=!1,this.trigger())}};(0,n.__decorate)([o.autoSubscribe],r.prototype,"shouldSkipMobileHub",null),r=(0,n.__decorate)([o.AutoSubscribeStore],r);let l=new r;t.default=l},89808:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(16778),s=i(88837),a=i(97691),r=i(89391),l=i(62141),c=i(23606),d=i(10102),u=i(46096),g=i(72146),h=i(72685),p=i(36237),m=i(98754),S=i(46929),C=i(18078),f=i(72816),y=i(22538),_=i(4057),v=i(81760),b=i(18037),T="MyUserColorStore";let P=class extends s.StoreBase{constructor(){super(),this._initializeColors=()=>f.default.getUiColorOption().then((e=>{p.log(u.LogTraceArea.ConversationColorStore,`Getting my color [${e}] from options service`)}),(e=>{p.warn(u.LogTraceArea.ConversationColorStore,"Getting my color from the options service failed: "+_.default.errorAsString(e))})),y.RegisterStartupable(this,"MyUserColorStore",[g.default,m.default,S.default,b.default])}startup(){this._overrideColorInfo=this._overrideColorInfoForTheme();const e=this._getUserColorInfo();return this._colorInfo=e&&this._isValidColor(e)?e:d.getDefaultColorInfo(C.default.getSkypeMri()),this._useSecondaryAccent=c.useSecondaryAccentColor(this._colorInfo),p.log(u.LogTraceArea.ConversationColorStore,`My color from DB [${e&&e.key}], validated color [${this._colorInfo.key}]`),this._updateStyles(),h.default.setRefreshOptions(T,{interval:864e5,taskTypeFlags:h.TaskTypeFlags.UsesNetworking,callback:this._initializeColors}),g.default.isSetupWizardCompleted()||(h.default.fireEarly(T),this._firstRunStoreSubscriptionToken=g.default.subscribe((()=>{g.default.isSetupWizardCompleted()&&(this._evaluateUserColorPreferences(!0),this._firstRunStoreSubscriptionToken&&g.default.unsubscribe(this._firstRunStoreSubscriptionToken))}),g.TriggerKeys.SetupWizard)),S.default.subscribe((()=>this._evaluateUserColorPreferences(!0))),b.default.subscribe((()=>{let e=!1;const t=this._overrideColorInfoForTheme();this._evaluateUserColorPreferences();const i=c.useSecondaryAccentColor(this._colorInfo);t!==this._overrideColorInfo&&(this._overrideColorInfo=t,e=!0),i!==this._useSecondaryAccent&&(this._useSecondaryAccent=i,e=!0),e&&(p.log(u.LogTraceArea.ConversationColorStore,"Triggering color update for theme change"),this._updateStyles(),this.trigger())})),a.Resolved()}_evaluateUserColorPreferences(e=!1){const t=this._getUserColorInfo();t&&t.key!==this._colorInfo.key&&(this._colorInfo=t,e&&this.trigger())}getColorInfo(e=!1){return this._intColorInfo(e)}getGradientColors(e=!1){return this._computeGradientColors(e)}getReversedGradientColors(e=!1){return d.reverseGradientColorsForColorInfo(this._intColorInfo(e))}getHoverGradientColors(e=!1){return d.gradientHoverColorsForColorInfo(this._intColorInfo(e))}getSubtleGradientColors(e=!1){return this._computeSubtleGradientColors(e)}getPrimaryColor(){return this.getPrimaryColorNoSubscription()}getPrimaryBackgroundColorStyle(){return this.getBackgroundColorStyleNoSubscription()}getPrimaryBorderColorStyle(){return this.getBorderColorStyleNoSubscription()}getPrimaryTextColorStyle(){return this.getTextColorStyleNoSubscription()}getCurrentSearchResultBackgroundColor(){return this._currentSearchResultBackgroundColor}getCurrentSearchResultTextColor(){return this._getCurrentSearchResultTextColor()}getSearchResultsBackgroundColor(e=!1){return this._getSearchResultsBackgroundColor(e)}getSearchResultsTextColor(e=!1){return this._getSearchResultsTextColor(e)}getColorInfoNoSubscription(e=!1){return this._intColorInfo(e)}getPrimaryColorNoSubscription(){return this._accentColor()}getBackgroundColorStyleNoSubscription(){return this._primaryBackgroundColorStyle}getBorderColorStyleNoSubscription(){return this._primaryBorderColorStyle}getTextColorStyleNoSubscription(){return this._textColorStyle}getGradientColorsNoSubscription(e=!1){return this._computeGradientColors(e)}getGradientSubtleColorsNoSubscription(e=!1){return this._computeSubtleGradientColors(e)}setUserColor(e,t){if(e===this._colorInfo||!this._isValidColor(e))return;p.log(u.LogTraceArea.ConversationColorStore,`Setting my color to [${e.key}] causeId: ${t}`),this._colorInfo=e,this._updateStyles();const i=d.serializeColorInfo(e);f.default.setUiColorOption(i),m.default.putData(l.InternalKeys.MyUserColor,i),r.default.getS4LNativePlatformsEcsConfig().enableRemoteClientAppearancePreferences&&S.default.setUserAppearancePreferencesForCurrentPlatform({colorInfo:i}),this.trigger()}refreshNow(e){p.log(u.LogTraceArea.ConversationColorStore,`refreshNow causeId: ${e}`),y.EnsureStarted(this).then((()=>{h.default.fireEarly(T)}))}_accentColor(){return c.accentColorForColorInfo(this._intColorInfo(),this._useSecondaryAccent)}_isValidColor(e){return!!e&&!d.isMatchingColorInfo(e,d.SerializedColorByNumber.Rainbow)}_updateStyles(){const e=this.getPrimaryColorNoSubscription(),t=this.getColorInfo();this._primaryBackgroundColorStyle=o.Styles.createViewStyle({backgroundColor:e},!1),this._searchResultsBackgroundColor=b.default.useDarkTheme()?v.Color.gray200:v.Color.gray400,this._currentSearchResultBackgroundColor="yellow"===t.key||"rose"===t.key||b.default.useAccessibleTheme()?v.Color.blue:v.Color.yellow,this._currentSearchResultTextColor="yellow"===t.key||"rose"===t.key?v.Color.white:v.Color.black,this._searchResultsTextColor=b.default.useDarkTheme()?v.Color.black:v.Color.white,this._primaryBorderColorStyle=o.Styles.createViewStyle({borderColor:e},!1),this._textColorStyle=o.Styles.createTextStyle({color:e},!1)}_computeGradientColors(e=!1){return d.gradientColorsForColorInfo(this._intColorInfo(e))}_computeSubtleGradientColors(e=!1){return d.subtleGradientColorsForColorInfo(this._intColorInfo(e))}_overrideColorInfoForTheme(){return b.default.useDelphiTheme()?d.delphiColorInfo:void 0}_intColorInfo(e=!1){return e?this._colorInfo:this._overrideColorInfo||this._colorInfo||d.getDefaultUnknownColorInfo()}_getCurrentSearchResultTextColor(){return b.default.useAccessibleTheme()?v.Color.gray100:this._currentSearchResultTextColor}_getSearchResultsBackgroundColor(e){return b.default.useAccessibleTheme()&&!e?b.default.useDarkTheme()?v.Color.gray400:v.Color.gray100:this._searchResultsBackgroundColor}_getSearchResultsTextColor(e){return b.default.useAccessibleTheme()&&!e?b.default.useDarkTheme()?v.Color.gray100:v.Color.gray400:this._searchResultsTextColor}_getUserColorInfo(){if(!g.default.isSetupWizardCompleted())return;const e=r.default.getS4LNativePlatformsEcsConfig().enableRemoteClientAppearancePreferences?S.default.getUserAppearancePreferencesForCurrentPlatform():{};let t;return t=e&&e.colorInfo?e.colorInfo:m.default.getData(l.InternalKeys.MyUserColor),d.deserializeColorInfo(t)}};(0,n.__decorate)([s.autoSubscribe],P.prototype,"getColorInfo",null),(0,n.__decorate)([s.autoSubscribe],P.prototype,"getGradientColors",null),(0,n.__decorate)([s.autoSubscribe],P.prototype,"getReversedGradientColors",null),(0,n.__decorate)([s.autoSubscribe],P.prototype,"getHoverGradientColors",null),(0,n.__decorate)([s.autoSubscribe],P.prototype,"getSubtleGradientColors",null),(0,n.__decorate)([s.autoSubscribe],P.prototype,"getPrimaryColor",null),(0,n.__decorate)([s.autoSubscribe],P.prototype,"getPrimaryBackgroundColorStyle",null),(0,n.__decorate)([s.autoSubscribe],P.prototype,"getPrimaryBorderColorStyle",null),(0,n.__decorate)([s.autoSubscribe],P.prototype,"getPrimaryTextColorStyle",null),(0,n.__decorate)([s.autoSubscribe],P.prototype,"getCurrentSearchResultBackgroundColor",null),(0,n.__decorate)([s.autoSubscribe],P.prototype,"getCurrentSearchResultTextColor",null),(0,n.__decorate)([s.autoSubscribe],P.prototype,"getSearchResultsBackgroundColor",null),(0,n.__decorate)([s.autoSubscribe],P.prototype,"getSearchResultsTextColor",null),P=(0,n.__decorate)([s.AutoSubscribeStore],P),t.default=new P},41539:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerKeys=void 0;const n=i(70655),o=i(96486),s=i(88837),a=i(70942),r=i(46096),l=i(36237),c=i(72816),d=i(69156);t.TriggerKeys=d.OptionServiceOptions;let u=class extends s.StoreBase{constructor(){super(...arguments),this._preferences={},this._fetchPromises={}}isEmailMissedCallRemindersEnabled(){if(this._getPreference(t.TriggerKeys.EmailMissedCallReminders))return this._getPreference(t.TriggerKeys.EmailMissedCallReminders)===d.EmailMissedRemindersOptionValue.Enabled;this._fetchEmailMissedContentOptionsAndTrigger()}isEmailMissedMessageRemindersEnabled(){if(this._getPreference(t.TriggerKeys.EmailMissedMessageReminders))return this._getPreference(t.TriggerKeys.EmailMissedMessageReminders)===d.EmailMissedRemindersOptionValue.Enabled;this._fetchEmailMissedContentOptionsAndTrigger()}setEmailMissedCallRemindersEnabled(e){const i=e?d.EmailMissedRemindersOptionValue.Enabled:d.EmailMissedRemindersOptionValue.Disabled;return c.default.setEmailMissedContentOption(d.OptionServiceOptions.EmailMissedCallReminders,i).then((()=>{l.log(r.LogTraceArea.PreferencesStores,`Setting ${t.TriggerKeys.EmailMissedCallReminders} to ${i}.`),l.track(new a.EngagementSettingsTelemetryEvent({source:a.EngagementSettingsSource.EmailMissedCallReminders,isToggled:i===d.EmailMissedRemindersOptionValue.Enabled})),this._setPreference(t.TriggerKeys.EmailMissedCallReminders,i),this.trigger(t.TriggerKeys.EmailMissedCallReminders)}))}setEmailMissedMessageRemindersEnabled(e){const i=e?d.EmailMissedRemindersOptionValue.Enabled:d.EmailMissedRemindersOptionValue.Disabled;return c.default.setEmailMissedContentOption(d.OptionServiceOptions.EmailMissedMessageReminders,i).then((()=>{l.log(r.LogTraceArea.PreferencesStores,`Setting ${t.TriggerKeys.EmailMissedMessageReminders} to ${i}.`),l.track(new a.EngagementSettingsTelemetryEvent({source:a.EngagementSettingsSource.EmailMissedMessageReminders,isToggled:i===d.EmailMissedRemindersOptionValue.Enabled})),this._setPreference(t.TriggerKeys.EmailMissedMessageReminders,i),this.trigger(t.TriggerKeys.EmailMissedMessageReminders)}))}_fetchEmailMissedContentOptionsAndTrigger(){if(this._fetchPromises[t.TriggerKeys.EmailMissedCallReminders]||this._fetchPromises[t.TriggerKeys.EmailMissedMessageReminders])return;const e=c.default.getEmailMissedContentOptions();this._fetchPromises[t.TriggerKeys.EmailMissedCallReminders]=this._fetchPromises[t.TriggerKeys.EmailMissedMessageReminders]=e,e.then((e=>{e&&(o.each(e.options,(e=>this._setPreference(e.name,e.value))),this.trigger([t.TriggerKeys.EmailMissedCallReminders,t.TriggerKeys.EmailMissedMessageReminders]))})).always((()=>{delete this._fetchPromises[t.TriggerKeys.EmailMissedCallReminders],delete this._fetchPromises[t.TriggerKeys.EmailMissedMessageReminders]}))}_getPreference(e){return this._preferences[e]}_setPreference(e,t){this._preferences[e]=t}test_reset(){this._preferences={}}};(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.EmailMissedCallReminders)],u.prototype,"isEmailMissedCallRemindersEnabled",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.EmailMissedMessageReminders)],u.prototype,"isEmailMissedMessageRemindersEnabled",null),u=(0,n.__decorate)([s.AutoSubscribeStore],u),t.default=new u},78735:(e,t,i)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LocalPreferencesTriggerKeys=void 0;const o=i(70655),s=i(96486),a=i(31844),r=(i(33010),i(88837)),l=i(97691),c=i(89391),d=i(33951),u=i(81169),g=i(62141),h=i(70942),p=i(46096),m=i(97811),S=i(36237),C=i(98754),f=i(61253),y=i(33754),_=i(6658),v=i(1246),b=i(57175),T=i(69156),P=i(90025),A=(i(83181),i(63823)),k=i(22538),I=i(4057),w=i(40363),N=i(47447),M=i(53374);var E;!function(e){e[e.speechConsentTranslator=0]="speechConsentTranslator",e[e.speechConsentSuggestion=1]="speechConsentSuggestion"}(E=t.LocalPreferencesTriggerKeys||(t.LocalPreferencesTriggerKeys={}));const x="__all";let L=n=class extends r.StoreBase{constructor(){super(),this._preferencesLocal={},k.RegisterStartupable(this,"MyUserPreferencesLocalStore",[C.default])}startup(){const e=C.default.getData(g.InternalKeys.PrefsLocal);this._preferencesLocal=e||{},e&&e.locale?(y.setLocale(e.locale),S.log(p.LogTraceArea.PreferencesStores,`Locale set from user preferences to [${e.locale}]`)):("undefined"!=typeof window&&void 0!==window.electronApi&&window.electronApi.ipcProvider.localisation.resetLocale.invoke(),S.log(p.LogTraceArea.PreferencesStores,"Locale set without user preferences to system default")),e&&e.rtl&&y.forceRTL(!0);e&&(!e.fileDownloadPathDesktop||e.fileDownloadDisplayNameDesktop),c.default.getS4LMessagingFeaturesNoSubscription().enableCustomFileDownloadLocation;return this.trigger(),l.Resolved()}reset(){this._preferencesLocal={},C.default.putData(g.InternalKeys.PrefsLocal,this._preferencesLocal),this.trigger()}getDefaultPreferences(){return n._defaultPrefs}isShakeAndSendDisabled(){var e;const t=null===(e=this.getUserPreferencesLocal().msaProfileKey)||void 0===e?void 0:e.ageGroup;if(b.MsaProfileHelper.isChild(t)||w.default.isChromeOS())return!0;const i=this._preferencesLocal.disableShakeAndSend;if(!s.isUndefined(i))return S.log(p.LogTraceArea.PreferencesStores,`isShakeAndSendDisabled(): ${i}`),i;const n=c.default.getConfigSettings().brb.disableShakeAndSendByDefault;return S.log(p.LogTraceArea.PreferencesStores,`isShakeAndSendDisabled(): ${n} (default)`),n}setDisableShakeAndSend(e){this.setUserPreferencesLocal({disableShakeAndSend:e},!1)}getCommerceCounters(){return this.getUserPreferencesLocal().commerceCounters}setCommerceCounters(e){this.setUserPreferencesLocal({commerceCounters:e},!1)}getContactsPrivacyNoticeBannerMountedCount(){return this.getUserPreferencesLocal().contactsPrivacyNoticeBannerMountedCount}setContactsPrivacyNoticeBannerMountedCount(e){this.setUserPreferencesLocal({contactsPrivacyNoticeBannerMountedCount:e},!1)}getUserPreferencesLocal(){return s.extend({},n._defaultPrefs,this._preferencesLocal)}getUserPreferencesLocalNoSubscription(){return s.extend({},n._defaultPrefs,this._preferencesLocal)}internal_getUserPreferencesLocalDefaults(){return s.extend({},n._defaultPrefs)}getUserPreferencesForConversationLocal(e){return(this.getUserPreferencesLocal().conversationPrefs||{})[e]||{}}setSendOptionalTelemetryData(e){this.setUserPreferencesLocal({sendOptionalTelemetry:e})}shouldSendOptionalTelemetryData(){if(!N.UICapabilities.telemetryConsentOptOutSupported())return!0;const e=this._preferencesLocal.sendOptionalTelemetry;return!s.isUndefined(e)&&(S.log(p.LogTraceArea.PreferencesStores,`shouldSendOptionalTelemetryData(): ${e}`),e)}setIsTelemetryConsentOnboardingCompleted(e){this.setUserPreferencesLocal({isTelemetryConsentOnboardingCompleted:e})}isTelemetryConsentOnboardingCompleted(){if(!N.UICapabilities.telemetryConsentOptOutSupported())return!0;const e=this._preferencesLocal.isTelemetryConsentOnboardingCompleted;return!s.isUndefined(e)&&(S.log(p.LogTraceArea.PreferencesStores,`isTelemetryConsentOnboardingCompleted(): ${e}`),e)}setUserPreferencesLocal(e,t=!0){const i=M.default.deepExtendIgnoringNulls(this._preferencesLocal,e);if(!(0,f.default)(this._preferencesLocal,i))if(this._preferencesLocal.allowHugeEmoticons!==i.allowHugeEmoticons&&S.track(new P.PesSettingsEvent(!!i.allowHugeEmoticons,c.default.getS4LMessagingFeatures().singleEmoticonSize,c.default.getS4LMessagingFeatures().emoticonsOnlyEmoticonSize)),this._preferencesLocal.enableInAppEngagementNotifications!==i.enableInAppEngagementNotifications&&S.track(new h.EngagementSettingsTelemetryEvent({source:h.EngagementSettingsSource.TipsAndTricks,isToggled:!!i.enableInAppEngagementNotifications})),this._preferencesLocal.enablePushEngagementNotifications!==i.enablePushEngagementNotifications&&S.track(new h.EngagementSettingsTelemetryEvent({source:h.EngagementSettingsSource.TipsAndTricksPush,isToggled:!!i.enablePushEngagementNotifications})),this._preferencesLocal.allowCallsFromContactsOnly!==i.allowCallsFromContactsOnly&&S.track(new A.CallingSettingsEvent("AllowCallsFromContactsOnly",!!i.allowCallsFromContactsOnly)),this._preferencesLocal.openUrlInExternalBrowser!==i.openUrlInExternalBrowser&&S.track(new v.OpenLinksInSkype(!i.openUrlInExternalBrowser)),this._preferencesLocal=i,C.default.putData(g.InternalKeys.PrefsLocal,this._preferencesLocal).fail((t=>{t instanceof d.CalledBeforeStartupError&&(S.track(new m.FundamentalsDebugEvent("PutDataBeforeStartup",(0,u.chain)((0,u.keys)(e),(0,u.sortBy)(s.identity),(0,u.join)(",")))),S.log(p.LogTraceArea.PreferencesStores,t.message))})),t)S.log(p.LogTraceArea.PreferencesStores,"setUserPreferencesLocal(): Triggering all keys"),this.trigger(x);else{const t=Object.keys(e);S.log(p.LogTraceArea.PreferencesStores,`setUserPreferencesLocal(): Triggering individual keys: ${t}`),this.trigger(t)}}getCoachMarksSeen(){const e=this.getUserPreferencesLocal().seenCoachMarks,t=e?I.default.parseJsonErrorable(e):void 0;if(!s.isError(t)){if(t&&!s.isArray(t)){let e=[];return s.each(t,(t=>e=s.union(e,t))),e}return t}S.warn(p.LogTraceArea.PreferencesStores,"Failed to parse seenCoachMark local preference.")}setCoachMarksSeen(e){this.setUserPreferencesLocal({seenCoachMarks:e&&JSON.stringify(e)},!1)}getLastOpenedTabForUser(e){return(this.getUserPreferencesLocal().lastOpenedTabs||{})[e]}setLastOpenedTabForUser(e,t){const i=s.cloneDeep(this.getUserPreferencesLocal().lastOpenedTabs||{});i[e]=t,this.setUserPreferencesLocal({lastOpenedTabs:i},!1)}removeLastUsedBackgroundEffects(){return this.setUserPreferencesLocal({lastUsedBackgroundEffects:void 0})}setAllLastUsedBackgroundEffects(e){return this.setUserPreferencesLocal({lastUsedBackgroundEffects:JSON.stringify(e)})}setLastUsedBackgroundEffects(e){const t=this.getUserPreferencesLocal().lastUsedBackgroundEffects,i=I.default.parseJsonWithDefault(t,[]);if(-1!==i.indexOf(e))return;const{numberOfVisibleLastUsedEffects:n}=c.default.getS4LCMCFeaturesNoSubscription();return i.length>=c.default.getS4LCMCFeaturesNoSubscription().numberOfVisibleLastUsedEffects?this.setUserPreferencesLocal({lastUsedBackgroundEffects:JSON.stringify([...i.slice(-(n-1)),e])}):this.setUserPreferencesLocal({lastUsedBackgroundEffects:JSON.stringify([...i,e])})}getLastUsedBackgroundEffects(){return I.default.parseJsonWithDefault(this.getUserPreferencesLocal().lastUsedBackgroundEffects,[])}getLastMessageAuthorAvatarSwitchedOn(){const e=this._preferencesLocal.lastMessageAuthorAvatarEnabled;return s.isUndefined(e)?c.default.getS4LMessagingFeatures().enableLastMessageAuthorAvatarDefaultSettingOn:e}getMessageStreamFontSize(){let e;const t=this.getUserPreferencesLocal().fontSizeMultiplier;if(1!==t){switch(t){case.8:e=_.MessageStreamFontSize.Smaller;break;case.9:e=_.MessageStreamFontSize.Small;break;case 1.1:e=_.MessageStreamFontSize.Large;break;case 1.2:e=_.MessageStreamFontSize.Larger}this.setUserPreferencesLocal({fontSizeMultiplier:1}),this.setUserPreferencesLocal({messageStreamFontSize:e})}else e=this.getUserPreferencesLocal().messageStreamFontSize;return e||_.MessageStreamFontSize.Normal}getNativeKeyboardHeights(){return this.getUserPreferencesLocal().nativeKeyboardHeights}getNativeKeyboardHeightsNoSubscription(){return this.getUserPreferencesLocalNoSubscription().nativeKeyboardHeights}setNativeKeyboardHeights(e){this.setUserPreferencesLocal({nativeKeyboardHeights:e},!1)}getNativeKeyboardHeight(e){const t=this.getNativeKeyboardHeightsNoSubscription();return e===a.DeviceOrientation.Portrait?t?t.potraitHeight:void 0:e===a.DeviceOrientation.Landscape&&t?t.landscapeHeight:void 0}setCallPreviewMicSettings(e){this.setUserPreferencesLocal({callPreviewMicSetting:e})}setCallPreviewCameraSettings(e){this.setUserPreferencesLocal({callPreviewCameraSetting:e})}setCallPreviewSettings(e,t,i){this.setUserPreferencesLocal({callPreviewMicSetting:e,callPreviewCameraSetting:t,callPreviewBlurSetting:i})}setFileDownloadPath(e){this.setUserPreferencesLocal({fileDownloadPathDesktop:e.path,fileDownloadDisplayNameDesktop:"Downloads"})}getValueOfDoNotFormatPreferenceOrFalseIfDisabled(e){if(!c.default.getS4LMessagingFeatures().enableDoNotFormat)return!1;const t=!!this.getUserPreferencesLocal().doNotFormat;if(!e)return t;let i=this.getUserPreferencesForConversationLocal(e).doNotFormat,n=t;return void 0!==i&&(n=i),n}setLocalDoNotFormatPreference(e,t){this.setUserPreferencesLocal({conversationPrefs:{[e]:{doNotFormat:t}}})}removeAllLocalDoNotFormatPreferences(){const e=this.getUserPreferencesLocalNoSubscription().conversationPrefs;if(!e)return;let t={};for(let i in e)e.hasOwnProperty(i)&&(t[i]={doNotFormat:void 0});this.setUserPreferencesLocal({conversationPrefs:t})}setSpeechConsentForTranslator(e){this.setUserPreferencesLocal({speechConsentTranslator:e}),this.trigger([E.speechConsentTranslator,E.speechConsentSuggestion])}getSpeechConsentForTranslator(){return this.getUserPreferencesLocal().speechConsentTranslator}setCallsWithTranslatorCount(e){this.setUserPreferencesLocal({callsWithTranslatorCount:e}),this.trigger(E.speechConsentSuggestion)}getMainWindowLastBoundsBeforeLogout(){return this.getUserPreferencesLocalNoSubscription().mainWindowLastBoundsBeforeLogout}setMainWindowLastBoundsBeforeLogout(e){this.setUserPreferencesLocal({mainWindowLastBoundsBeforeLogout:e})}getNewCallScreenDesignEnabled(){return!!this.getUserPreferencesLocal().isNewCallScreenDesignEnabled}canEnableNewCallScreenDesignByDefaultNoSubscription(){const e=this.getUserPreferencesLocalNoSubscription().isNewCallScreenDesignEnabled,t=c.default.getS4LCMCFeaturesNoSubscription();return s.isUndefined(e)&&t.enableNewCallScreen&&t.newCallScreenEnabledByDefault}getWasNewCallScreenRevertNoticeDismissed(){return!!this.getUserPreferencesLocal().wasNewCallScreenRevertNoticeDismissed}setWasNewCallScreenRevertNoticeDismissed(e){this.setUserPreferencesLocal({wasNewCallScreenRevertNoticeDismissed:e})}setNewCallScreenDesignEnabled(e){this.setUserPreferencesLocal({isNewCallScreenDesignEnabled:e})}getLightThemeCallStageEnabled(){return this.getUserPreferencesLocal().isLightThemeCallStageEnabled}setLightThemeCallStageEnabled(e){this.setUserPreferencesLocal({isLightThemeCallStageEnabled:e})}getTogetherModeNoticePresentedForCallId(){return this.getUserPreferencesLocal().togetherModeNoticePresentedForCallId}setTogetherModeNoticePresentedForCallId(e){this.setUserPreferencesLocal({togetherModeNoticePresentedForCallId:e})}getMusicModeNoticePresentedForCallId(){return this.getUserPreferencesLocal().musicModeNoticePresentedForCallId}setMusicModeNoticePresentedForCallId(e){this.setUserPreferencesLocal({musicModeNoticePresentedForCallId:e})}getMsaTokenKey(){return this.getUserPreferencesLocal().msaTokenKeychainKey}setMsaTokenKey(e){this.setUserPreferencesLocal({msaTokenKeychainKey:e})}isE911LocationConsentGranted(){return this.getUserPreferencesLocal().isE911LocationConsentGranted}setE911LocationConsentGranted(e){this.setUserPreferencesLocal({isE911LocationConsentGranted:e}),S.log(p.LogTraceArea.Phone,"Setting E911 location consent, granted="+e)}isMediaBarNewItemSeen(e){var t;return!!(null===(t=this.getUserPreferencesLocal().mediaBarNewItemsSeen)||void 0===t?void 0:t[e])}setMediaBarNewItemSeen(e,t){S.log(p.LogTraceArea.MediaBarItem,"Setting media bar new item, id="+e+", seen="+t),this.setUserPreferencesLocal({mediaBarNewItemsSeen:{[e]:t}})}};L._defaultPrefs={enableChatNotifications:!0,enableScheduledCallNotifications:!0,enableInAppScheduledCallNotifications:!0,enableInAppPollNotifications:!0,enablePollNotifications:!0,enableInAppNotifications:!0,enableNotificationSounds:!0,enablePushNotificationSounds:!0,enableInAppEngagementNotifications:!0,enablePushEngagementNotifications:!0,useStackNavOnNarrowDesktop:!1,popupCardConsumptionHorizon:0,noticeMessageConsumptionHorizon:0,androidNotificationLight:!0,androidNotificationVibration:!0,mobileKeychainSkypeTokenMigrated:!1,mobileKeychainMSATokenMigrated:!1,disableShakeAndSend:!1,mobileCoachMarkIndex:0,desktopCoachmarkIndex:4,mobileCoachMarkSequenceVersion:void 0,e2eeV1Initialised:!1,includeMeInSearchEnabled:!0,allowHugeEmoticons:!0,avatarPolicy:T.OptionsServiceAvatarPolicyValueType.BUDDIES_OR_AUTHORIZED_CAN_SEE,isUserFromInviteFlow:!1,isUserFromGuestUpsellFlow:!1,migrationLandingScreenSeen:!1,wasTutorialStarted:!1,forceDisplayMigrationLandingScreen:!1,isArchiveConversationDialogRequired:!0,isCameraMigrated:!1,isMicrophoneMigrated:!1,areSpeakersMigrated:!1,migratedToUsingPhysicalDeviceIdSCD:!1,allowCallsFromContactsOnly:!1,callingEcoMode:0,firstMessageReceived:!1,firstCallAnswered:!1,isUserActivityExpected:!1,useSystemTheme:!0,sendMessageWithEnter:!0,pasteAsQuotesEnabled:!1,doNotFormat:!1,lastMessageAuthorAvatarEnabled:!1,contactsPanelSkypeTabShowOnlyActiveNow:!1,contactsPanelABNotSyncedShowOnlyActiveNow:!1,presentDNDSetting:!0,fontSizeMultiplier:1,entitlementsBannerOptions:{visible:!0},autoDownloadFiles:!1,messageStreamFontSize:_.MessageStreamFontSize.Normal,hasSignOutSurveyShown:!1,fileDownloadPathDesktop:void 0,presentDefaultUrlOpenBehaviorPrompt:!0,enableSystemHotKeys:!0,notifiedAboutBookmarks:!1,showComposerPopupMenuIndicator:!0,showMeetNowEducationalModal:!0,showBackgroundBlurAsNewForAndroid:!0,showOnlyVideoOnTheStageAsNew:!0,showNewStageItemAsNew:!0,sendOptionalTelemetry:!1,isTelemetryConsentOnboardingCompleted:!1,speechConsentTranslator:void 0,callsWithTranslatorCount:0,speechSuggestionDismissed:!1,lastUsedBackgroundEffects:void 0,mainWindowLastBoundsBeforeLogout:void 0,isNewCallScreenDesignEnabled:void 0,wasNewCallScreenRevertNoticeDismissed:!1,isLightThemeCallStageEnabled:void 0,togetherModeNoticePresentedForCallId:void 0,enableConversationBubbles:!0,disableElectronIntegratedCalling:!1},(0,o.__decorate)([(0,r.autoSubscribeWithKey)("disableShakeAndSend")],L.prototype,"isShakeAndSendDisabled",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)("commerceCounters")],L.prototype,"getCommerceCounters",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)("contactsPrivacyNoticeBannerMountedCount")],L.prototype,"getContactsPrivacyNoticeBannerMountedCount",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"getUserPreferencesLocal",null),(0,o.__decorate)([r.disableWarnings],L.prototype,"getUserPreferencesLocalNoSubscription",null),(0,o.__decorate)([r.disableWarnings],L.prototype,"internal_getUserPreferencesLocalDefaults",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"getUserPreferencesForConversationLocal",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"shouldSendOptionalTelemetryData",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"isTelemetryConsentOnboardingCompleted",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)("lastOpenedTabs")],L.prototype,"getLastOpenedTabForUser",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"getLastUsedBackgroundEffects",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"getLastMessageAuthorAvatarSwitchedOn",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"getMessageStreamFontSize",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)("nativeKeyboardHeights")],L.prototype,"getNativeKeyboardHeights",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)("nativeKeyboardHeights")],L.prototype,"getNativeKeyboardHeight",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"getValueOfDoNotFormatPreferenceOrFalseIfDisabled",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"getNewCallScreenDesignEnabled",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"getWasNewCallScreenRevertNoticeDismissed",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"getLightThemeCallStageEnabled",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"getTogetherModeNoticePresentedForCallId",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"getMusicModeNoticePresentedForCallId",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"isE911LocationConsentGranted",null),(0,o.__decorate)([(0,r.autoSubscribeWithKey)(x)],L.prototype,"isMediaBarNewItemSeen",null),L=n=(0,o.__decorate)([r.AutoSubscribeStore],L),t.default=new L},46929:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerKeys=void 0;const n=i(70655),o=i(96486),s=i(88837),a=i(97691),r=i(89391),l=i(22801),c=i(76621),d=i(90239),u=i(71830),g=i(46096),h=i(36237),p=i(61253),m=i(33754),S=i(1246),C=i(78735),f=(i(53469),i(35426)),y=i(22538),_=i(4057),v=i(40363);t.TriggerKeys=u.UserProps;let b=class extends s.StoreBase{constructor(){super(100),this._preferencesPersisted={},this._preferencesPendingPersist={},this._preferencesComputed={},this._requiresUWPMigration=!1,this._preferencesSynced=!1,this._onChatServiceReconnect=()=>{this.fetchAndUpdateProperties().then((()=>{this._syncSendOptionalTelemetryToLocalStore()}))},this._setUserRingIfRequired=()=>{const e=c.default.getUserProperty(u.ServerUserProps.UserRing),t=c.default.getUserProperty(u.UserProps.ChatServiceRingChangedManually)===d.UserRingChangedManually,i=r.default.getS4LFeatures().chatFeatures.recommendedRing;i&&i!==e&&!t&&this.setMyUserRing(i,!1)},y.RegisterStartupable(this,"MyUserPreferencesStore",[c.default,C.default])}startup(){return(c.default.hasFetchedUserPropertiesAtLeastOnce()?a.Resolved():this.fetchAndUpdateProperties()).always((()=>{c.default.userPropertiesChanged.subscribe((e=>{this._gotUpdatedProps(e)})),l.default.reconnected.subscribe(this._onChatServiceReconnect),this._preferencesPersisted=c.default.getUserProperties(),this._preferencesSynced=!0,this._preferencesPersisted[t.TriggerKeys.ReadReceiptsEnabled]&&h.log(g.LogTraceArea.ReadReceipts,"Got enabled="+this._preferencesPersisted[t.TriggerKeys.ReadReceiptsEnabled]+" on startup"),this._computePreferences(),this._requiresUWPMigration&&this._migrateUWPToMSIXPlatformPreferences();const e=C.default.getUserPreferencesLocal().splitViewMode;o.isNil(e)||(C.default.setUserPreferencesLocal({splitViewMode:void 0}),this.setUserAppearancePreferencesForCurrentPlatform({splitViewEnabled:!!e}))}))}requestUWPToMSIXMigration(){this._requiresUWPMigration=!0,this._preferencesSynced&&this._migrateUWPToMSIXPlatformPreferences()}_migrateUWPToMSIXPlatformPreferences(){0}fetchAndUpdateProperties(e=!1){return y.EnsureStarted(l.default).then((()=>l.default.fetchAndUpdateMyProperties(e)))}reset(){o.each(t.TriggerKeys,(e=>this._setPreference(e,"")))}setAlertsLastReadTime(e){this._setPreference(t.TriggerKeys.AlertsLastReadTime,e.toString())}getAlertsLastReadTime(){const e=Number(this._getPreference(t.TriggerKeys.AlertsLastReadTime));return isNaN(e)?void 0:e}setCaptureFirstRunLevel(e){this._setPreference(t.TriggerKeys.CaptureFirstRunLevel,e&&e.toString())}getCaptureFirstRunLevel(){const e=Number(this._getPreference(t.TriggerKeys.CaptureFirstRunLevel));return isNaN(e)?void 0:e}setCaptureMarkupTooltipDismissed(e){this._setPreferenceBool(t.TriggerKeys.CaptureMarkupTooltipDismissed,e)}getCaptureMarkupTooltipDismissed(){return this._getPreferenceBool(t.TriggerKeys.CaptureMarkupTooltipDismissed)}setCoachMarksSeen(e){this._setPreference(t.TriggerKeys.CoachMarksSeen,e&&JSON.stringify(e))}getCoachMarksSeen(){const e=this._getPreference(t.TriggerKeys.CoachMarksSeen),i=e?_.default.parseJsonErrorable(e):void 0;if(!o.isError(i)){if(i&&!o.isArray(i)){let e=[];return o.each(i,(t=>e=o.union(e,t))),e}return i}h.error(g.LogTraceArea.PreferencesStores,"Failed to parse coachMarksSeen preference.")}setOptionalTelemetryPreferences(e){void 0!==e.enabled&&C.default.setSendOptionalTelemetryData(e.enabled),void 0!==e.onboardingCompleted&&C.default.setIsTelemetryConsentOnboardingCompleted(e.onboardingCompleted),this._setOptionalTelemetryPreferences(e)}getOptionalTelemetryPreferences(){return this._getOptionalTelemetryPreferences()}_setOptionalTelemetryPreferences(e){const i=this._getOptionalTelemetryPreferences()||{},n=o.defaults({},e,i);this._setPreference(t.TriggerKeys.SendOptionalTelemetry,n)}_getOptionalTelemetryPreferences(){const e=this._getPreference(t.TriggerKeys.SendOptionalTelemetry),i=e?_.default.parseJsonErrorable(e):{};return o.isError(i)?(h.error(g.LogTraceArea.PreferencesStores,"Failed to parse optional telemetry preferences.",i,e),{}):i}setMsaProfilePreferences(e){const i=this._getOptionalTelemetryPreferences()||{},n=o.defaults({},e,i);this._setPreference(t.TriggerKeys.MsaProfile,n)}getMsaProfilePreferences(){const e=this._getPreference(t.TriggerKeys.MsaProfile),i=e?_.default.parseJsonErrorable(e):{};return o.isError(i)?(h.error(g.LogTraceArea.PreferencesStores,"Failed to parse Msa Profile (Age group) preferences.",i,e),{}):i}_syncSendOptionalTelemetryToLocalStore(){const e=this.getOptionalTelemetryPreferences();e.enabled!==C.default.shouldSendOptionalTelemetryData()&&C.default.setSendOptionalTelemetryData(!!e.enabled),e.onboardingCompleted!==C.default.isTelemetryConsentOnboardingCompleted()&&C.default.setIsTelemetryConsentOnboardingCompleted(!!e.onboardingCompleted)}setSuggestionsEnabled(e){let i;return i=o.isUndefined(e)?"undefined":e?"true":"false",this._setPreference(t.TriggerKeys.SuggestionsEnabled,i)}getSuggestionsEnabled(){const e=this._getPreference(t.TriggerKeys.SuggestionsEnabled);return"true"===e||"false"!==e&&void 0}setCelebrationNotificationLastShownTime(e){return this._setPrefOnServer(t.TriggerKeys.CelebrationNotificationLastShownTime,String(e))}getCelebrationNotificationLastShownTime(){const e=this._getPreference(t.TriggerKeys.CelebrationNotificationLastShownTime);if(e)return parseInt(e,10)}setLocale(e){return this._setPrefOnServer(t.TriggerKeys.Locale,e)}getLocale(){return this._getPreference(t.TriggerKeys.Locale)}setMarket(e){return this._setPrefOnServer(t.TriggerKeys.Market,e)}getMarket(){return this._getPreference(t.TriggerKeys.Market)}setTimezone(e){return this._setPrefOnServer(t.TriggerKeys.Timezone,e)}getTimezone(){return this._getPreference(t.TriggerKeys.Timezone)}isE911Acknowledged(){return this._getPreferenceBool(t.TriggerKeys.E911Acknowledged)}setE911Acknowledged(e){h.log(g.LogTraceArea.Phone,"Setting E911 acknowledgement, acknowledged="+e);const i=e?"true":"false";this._setPreference(t.TriggerKeys.E911Acknowledged,i)}setEmergencyCallDefaultCountry(e){h.track(new f.EmergencyCallDefaultCountryChanged(e)),this._setPreference(t.TriggerKeys.EmergencyCallDefaultCountryChanged,e)}getEmergencyCallDefaultCountry(){return this._getPreference(t.TriggerKeys.EmergencyCallDefaultCountryChanged)}setIntegrationConsent(e){this._setPreference(t.TriggerKeys.IntegrationAuthConsent,JSON.stringify(e))}getIntegrationConsent(){const e=this._getPreference(t.TriggerKeys.IntegrationAuthConsent),i=e?_.default.parseJsonErrorable(e):{};return o.isError(i)?(h.error(g.LogTraceArea.PreferencesStores,"Failed to parse integration consent cache.",i,e),{}):i}setIntegrationIdAuthStatePairs(e){this._setPreference(t.TriggerKeys.IntegrationIdAuthStatePairs,JSON.stringify(e))}getIntegrationIdAuthStatePairs(){const e=this._getPreference(t.TriggerKeys.IntegrationIdAuthStatePairs),i=e?_.default.parseJsonErrorable(e):{};return o.isError(i)?(h.error(g.LogTraceArea.PreferencesStores,"Failed to parse integrationIdAuthStatePairs.",i,e),{}):i}setInviteSharingDisabled(e){this._setPreferenceBool(t.TriggerKeys.InviteSharingDisabled,e)}getInviteSharingDisabled(){return this._getPreferenceBool(t.TriggerKeys.InviteSharingDisabled)}setIsSetupWizardCompleted(e){this._setPreferenceBool(t.TriggerKeys.IsSetupWizardCompleted,e)}getOnboardingUserProfileScreenSeen(){return this._getPreferenceBool(t.TriggerKeys.OnboardingUserProfileScreenSeen)}setOnboardingUserProfileScreenSeen(e){this._setPreferenceBool(t.TriggerKeys.OnboardingUserProfileScreenSeen,e)}getIsSetupWizardCompleted(){return this._getPreferenceBool(t.TriggerKeys.IsSetupWizardCompleted)}setScheduleNextCallDisplayedTimes(){const e=Number(this._getPreference(t.TriggerKeys.ScheduleNextCallDisplayedTimes));this._setPreference(t.TriggerKeys.ScheduleNextCallDisplayedTimes,(e+1).toString())}getScheduleNextCallDisplayedTimes(){return Number(this._getPreference(t.TriggerKeys.ScheduleNextCallDisplayedTimes))}setScheduleNextCallCurrentSuccessfulCalls(e){const i=Number(this._getPreference(t.TriggerKeys.ScheduleNextCallCurrentSuccessfulCalls));this._setPreference(t.TriggerKeys.ScheduleNextCallCurrentSuccessfulCalls,o.isNumber(e)?e.toString():(i+1).toString())}getScheduleNextCallCurrentSuccessfulCalls(){return Number(this._getPreference(t.TriggerKeys.ScheduleNextCallCurrentSuccessfulCalls))}setMediaEditorFirstRunLevel(e){this._setPreference(t.TriggerKeys.MediaEditorFirstRunLevel,e&&e.toString())}getMediaEditorFirstRunLevel(){const e=Number(this._getPreference(t.TriggerKeys.MediaEditorFirstRunLevel));return isNaN(e)?void 0:e}setReactionNotificationsEnabled(e){h.track(new S.ReactionPushNotificationsToggleSetting(!!e)),h.log(g.LogTraceArea.Push,"Setting push notifications for reactions setting, enabled="+!!e);const i=e?"true":"false";this._setPreference(t.TriggerKeys.ReactionPushNotificationsEnabled,i)}setLastEngagementProcessedMessageOnWebTimestamp(){const e=(new Date).getTime();h.log(g.LogTraceArea.Engagement,"Setting engagement message already shown on S4L.Web user preference,timestamp="+e),this._setPreference(t.TriggerKeys.LastEngagementProcessedMessageOnWebTimestamp,e.toString())}setReadReceiptsEnabled(e,i){h.track(new S.ReadReceiptsToggleSetting(!!e,i)),h.log(g.LogTraceArea.ReadReceipts,"Setting read receipts user preference, enabled="+e+", origin="+S.ReadReceiptsSettingOrigin[i]);const n=e?"true":"false";this._setPreference(t.TriggerKeys.ReadReceiptsEnabled,n),i===S.ReadReceiptsSettingOrigin.UserAction&&this._setPreference(t.TriggerKeys.ReadReceiptsUserPreference,n)}setDisplayUrlPreviewsEnabled(e){h.track(new S.DisplayUrlPreviewsToggleSetting(e)),h.log(g.LogTraceArea.UrlPreviews,"Setting display URL preview user preference, enabled="+e);const i=e?"true":"false";this._setPreference(t.TriggerKeys.DisplayUrlPreviewsEnabled,i)}setCallNotificationsWhileDNDEnabled(e){h.track(new S.CallNotificationsWhileDNDToggleSetting(!!e)),h.log(g.LogTraceArea.DNDSetting,"Setting call notifications while DND, enabled="+!!e);const i=e?"true":"false";this._setPreference(t.TriggerKeys.CallNotificationsWhileDND,i)}setChatNotificationsWhileDNDEnabled(e){h.track(new S.ChatNotificationsWhileDNDToggleSetting(!!e)),h.log(g.LogTraceArea.DNDSetting,"Setting chat notifications while DND, enabled="+!!e);const i=e?"true":"false";this._setPreference(t.TriggerKeys.ChatNotificationsWhileDND,i)}setNotifyOnPresenceChangeEnabled(e){const i=e?"true":"false";this._setPreference(t.TriggerKeys.NotifyOnPresenceChange,i)}setPresentDNDSetting(){this._setPreference(t.TriggerKeys.PresentDNDSetting,"false")}getReactionNotificationsEnabled(){return"false"!==this._getPreference(t.TriggerKeys.ReactionPushNotificationsEnabled)}getLastEngagementProcessedMessageOnWebTimestamp(){const e=Number(this._getPreference(t.TriggerKeys.LastEngagementProcessedMessageOnWebTimestamp));return isNaN(e)?0:e}getReadReceiptsEnabled(){return"true"===this._getPreference(t.TriggerKeys.ReadReceiptsEnabled)}getDisplayUrlPreviews(){return"false"!==this._getPreference(t.TriggerKeys.DisplayUrlPreviewsEnabled)}getUserPreferenceForReadReceipts(){return"false"!==this._getPreference(t.TriggerKeys.ReadReceiptsUserPreference)}getCallNotificationsWhileDNDEnabled(){return"false"!==this._getPreference(t.TriggerKeys.CallNotificationsWhileDND)}getChatNotificationsWhileDNDEnabled(){return"true"===this._getPreference(t.TriggerKeys.ChatNotificationsWhileDND)}getNotifyOnPresenceChangeEnabled(){return"true"===this._getPreference(t.TriggerKeys.NotifyOnPresenceChange)}getPresentDNDSettingStatus(){return C.default.getUserPreferencesLocal().presentDNDSetting||this.setPresentDNDSetting(),"false"!==this._getPreference(t.TriggerKeys.PresentDNDSetting)}setScheduledCallReminders(e){this._setPreference(t.TriggerKeys.ScheduledCallReminders,e&&JSON.stringify(e))}getScheduledCallReminders(){const e=this._getPreference(t.TriggerKeys.ScheduledCallReminders),i=e?_.default.parseJsonErrorable(e):void 0;if(!o.isError(i))return i;h.error(g.LogTraceArea.PreferencesStores,"Failed to parse scheduledCallReminders preference.")}setScheduledCallBannerDismissState(e,i){const n=this.getScheduledCallsBannerDismissStates()||{};n[e]=i,this._setPreference(t.TriggerKeys.ScheduledCallBannerDismissStates,JSON.stringify(n))}deleteScheduledCallBannerDismissStates(e){const i=this.getScheduledCallsBannerDismissStates();i&&(o.each(e,(e=>{i[e]&&delete i[e]})),this._setPreference(t.TriggerKeys.ScheduledCallBannerDismissStates,JSON.stringify(i)))}getScheduledCallsBannerDismissStates(){const e=this._getPreference(t.TriggerKeys.ScheduledCallBannerDismissStates),i=e?_.default.parseJsonErrorable(e):void 0;if(!o.isError(i))return i;h.error(g.LogTraceArea.PreferencesStores,"Failed to parse scheduledCallBannerDismissStates preference.")}setConversationTranslationBannerDismissState(e,t){const i=this._getTranslationBannerDismissStatesForConversation(e);i.conversationBannerBeenDismissed=t,this._setTranslationBannerDismissedState(e,i)}setInCallTranslationBannerDismissState(e,t){const i=this._getTranslationBannerDismissStatesForConversation(e);i.inCallBannerBeenDismissed=t,this._setTranslationBannerDismissedState(e,i)}getReactions(){const e=this._getPreference(t.TriggerKeys.Reactions),i=e?_.default.parseJsonErrorable(e):void 0;if(!o.isError(i))return i;h.error(g.LogTraceArea.PreferencesStores,"Failed to parse reactions preference.")}setReactions(e){this._setPrefOnServer(t.TriggerKeys.Reactions,e?JSON.stringify(e):"")}getCustomCallReactions(){const e=this._getPreference(t.TriggerKeys.CustomCallReactions),i=e?_.default.parseJsonErrorable(e):void 0;if(!o.isError(i))return i;h.error(g.LogTraceArea.PreferencesStores,"Failed to parse custom call reactions preference.")}setCustomCallReactions(e){this._setPrefOnServer(t.TriggerKeys.CustomCallReactions,e?JSON.stringify(e):"")}_setTranslationBannerDismissedState(e,i){const n=this._getTranslationBannerDismissStates()||{};n[e]=i,this._setPreference(t.TriggerKeys.TranslatedConversationBannerDismissStates,JSON.stringify(n))}_getTranslationBannerDismissStatesForConversation(e){const t=this._getTranslationBannerDismissStates();let i;return i=t&&t[e]?t[e]:{inCallBannerBeenDismissed:!1,conversationBannerBeenDismissed:!1},i}_getTranslationBannerDismissStates(){const e=this._getPreference(t.TriggerKeys.TranslatedConversationBannerDismissStates),i=e?_.default.parseJsonErrorable(e):void 0;if(!o.isError(i))return i||void 0;h.error(g.LogTraceArea.PreferencesStores,"Failed to parse translationBannerDismissStates preference.")}getConversationTranslationBannerDismissState(e){const t=this._getTranslationBannerDismissStates();return!(!t||!t[e])&&t[e].conversationBannerBeenDismissed}getInCallTranslationBannerDismissState(e){const t=this._getTranslationBannerDismissStates();return!(!t||!t[e])&&t[e].inCallBannerBeenDismissed}deleteTranslationBannerDismissStates(e){const i=this._getTranslationBannerDismissStates();i&&!o.isEmpty(i)&&(i[e]&&delete i[e],this._setPreference(t.TriggerKeys.TranslatedConversationBannerDismissStates,JSON.stringify(i)))}setInterstitialForLargeGroupRinglessCallsShown(e){const i=e?"true":"false";this._setPreference(t.TriggerKeys.InterstitialForLargeGroupRinglessCallsShown,i)}getInterstitialForLargeGroupRinglessCallsShown(){return"true"===this._getPreference(t.TriggerKeys.InterstitialForLargeGroupRinglessCallsShown)}setInterstitialForSmallGroupRinglessCallsShown(e){const i=e?"true":"false";this._setPreference(t.TriggerKeys.InterstitialForSmallGroupRinglessCallsShown,i)}getInterstitialForSmallGroupRinglessCallsShown(){return"true"===this._getPreference(t.TriggerKeys.InterstitialForSmallGroupRinglessCallsShown)}setEnableSubtitlesForAllCalls(e){h.track(new S.EnableSubtitlesForAllCallsSetting(!!e)),h.log(g.LogTraceArea.PreferencesStores,"Setting enable subtitles for all calls, enabled="+!!e);const i=e?"true":"false";this._setPreference(t.TriggerKeys.EnableSubtitlesForAllCalls,i)}getEnableSubtitlesForAllCalls(){return"true"===this._getPreference(t.TriggerKeys.EnableSubtitlesForAllCalls)}setOnlyShowSubtitlesForOtherParticipants(e){h.track(new S.OnlyShowSubtitlesForOtherParticipants(!!e)),h.log(g.LogTraceArea.PreferencesStores,"Setting only show subtitles for other participants, enabled="+!!e);const i=e?"true":"false";this._setPreference(t.TriggerKeys.OnlyShowSubtitlesForOtherParticipants,i)}getOnlyShowSubtitlesForOtherParticipants(){return"false"!==this._getPreference(t.TriggerKeys.OnlyShowSubtitlesForOtherParticipants)}setCallTranslatorBotSpokenLanguageLocale(e){h.log(g.LogTraceArea.PreferencesStores,"Setting call translator bot spoken language locale: "+e),this._setPreference(t.TriggerKeys.CallTranslatorBotSpokenLanguageLocale,e),r.default.getS4LCMCFeatures().enableMessageTranslation&&this._setPreference(t.TriggerKeys.CallTranslatorBotSubtitleLanguageLocale,e)}getCallTranslatorBotSpokenLanguageLocale(){const e=r.default.getS4LCMCFeatures().enableMessageTranslation?this.getCallTranslatorBotSubtitleLanguageLocale():this._getPreference(t.TriggerKeys.CallTranslatorBotSpokenLanguageLocale),i=r.default.getS4LCMCFeatures().callTranslatorBotConfig.languageSupport.speech||[],n=!o.isEmpty(e)&&i.some((t=>t===e)),s=i.find((e=>e===m.getLocale()))||"en-US";return n?e:s}setCallTranslatorSpokenLanguage(e){h.log(g.LogTraceArea.PreferencesStores,"Setting call translator bot spoken language locales json."),this._setPreference(t.TriggerKeys.CallTranslatorSpokenLanguage,JSON.stringify(e))}getCallTranslatorSpokenLanguage(){const e=this._getPreference(t.TriggerKeys.CallTranslatorSpokenLanguage),i=e?_.default.parseJsonErrorable(e):void 0;if(!o.isError(i))return i||void 0;h.error(g.LogTraceArea.PreferencesStores,"Failed to parse CallTranslatorSpokenLanguage preference.")}setCallTranslatorAlwaysStart(e){h.log(g.LogTraceArea.PreferencesStores,"Setting call translator always start for conversation json."),this._setPreference(t.TriggerKeys.CallTranslatorAlwaysStart,JSON.stringify(e))}getCallTranslatorAlwaysStart(){const e=this._getPreference(t.TriggerKeys.CallTranslatorAlwaysStart),i=e?_.default.parseJsonErrorable(e):void 0;if(!o.isError(i))return i||void 0;h.error(g.LogTraceArea.PreferencesStores,"Failed to parse CallTranslatorAlwaysStart preference.")}setCallTranslatorCaptionsPositionMode(e){h.log(g.LogTraceArea.PreferencesStores,"Setting call captions position mode json"),this._setPreference(t.TriggerKeys.CallTranslatorCaptionsPositionMode,JSON.stringify(e))}getCallTranslatorCaptionsPositionMode(){const e=this._getPreference(t.TriggerKeys.CallTranslatorCaptionsPositionMode),i=e?_.default.parseJsonErrorable(e):void 0;if(!o.isError(i))return i||void 0;h.error(g.LogTraceArea.PreferencesStores,"Failed to parse CallTranslatorCaptionsPositionMode preference.")}getCallPstnTranslatorBotSpokenLanguageLocales(){const e=this._getPreference(t.TriggerKeys.PstnTranslationSettings),i=e?_.default.parseJsonErrorable(e):void 0;if(!o.isError(i))return i||void 0;h.error(g.LogTraceArea.PreferencesStores,"Failed to parse PstnTranslationSettings preference.")}setCallPstnTranslatorBotSpokenLanguageLocales(e){h.log(g.LogTraceArea.PreferencesStores,"Setting call pstn translator bot spoken language locale settings"),this._setPreference(t.TriggerKeys.PstnTranslationSettings,JSON.stringify(e))}setCallTranslatorBotTranslationVoice(e){h.log(g.LogTraceArea.PreferencesStores,"Setting call translator bot translation voice: "+e),this._setPreference(t.TriggerKeys.CallTranslatorBotTranslationVoice,e)}getCallTranslatorBotTranslationVoice(){const e=this._getPreference(t.TriggerKeys.CallTranslatorBotTranslationVoice),i=r.default.getS4LCMCFeaturesNoSubscription().translationDefaultVoice;return e||i}setCallTranslatorBotSubtitleLanguageLocale(e){h.log(g.LogTraceArea.PreferencesStores,"Setting call translator bot subtitle language locale: "+e),this._setPreference(t.TriggerKeys.CallTranslatorBotSubtitleLanguageLocale,e)}getCallTranslatorBotSubtitleLanguageLocale(){return this._getPreference(t.TriggerKeys.CallTranslatorBotSubtitleLanguageLocale)}setCallTranslatorPrivacyConsent(e){const i=e?"true":"false";h.log(g.LogTraceArea.PreferencesStores,"Setting call privacy consent to: "+e),this._setPreference(t.TriggerKeys.CallTranslatorPrivacyConsent,i)}getCallTranslatorPrivacyConsent(){return"true"===this._getPreference(t.TriggerKeys.CallTranslatorPrivacyConsent)}resetTranslatorBotTranslationSettings(e){let i=this.getCallPstnTranslatorBotSpokenLanguageLocales();i&&i[e]&&(delete i[e],this.setCallPstnTranslatorBotSpokenLanguageLocales(i)),this._setPreference(t.TriggerKeys.CallTranslatorBotTranslationVoice,null)}getBingBackgroundsEffectDismissed(){return this._getPreferenceBool(t.TriggerKeys.BingBackgroundsEffectDismissed)}setBingBackgroundsEffectDismissed(e){const i=e?"true":"false";this._setPreference(t.TriggerKeys.BingBackgroundsEffectDismissed,i)}setUserAppearancePreferencesForCurrentPlatform(e){const i=this._getUserAppearancePreferences()||{},n=v.default.getSkypePlatformId().toString(),s=o.get(i,n)||{},a=o.defaults({},e,s),r=o.defaults({},{[n]:a},i);this._setPreference(t.TriggerKeys.UserAppearancePreferences,r)}_getUserAppearancePreferences(){const e=this._getPreference(t.TriggerKeys.UserAppearancePreferences),i=e?_.default.parseJsonErrorable(e):{};return o.isError(i)?(h.error(g.LogTraceArea.PreferencesStores,"Failed to parse appearance preferences.",i,e),{}):i}getUserAppearancePreferencesForCurrentPlatform(){const e=v.default.getSkypePlatformId().toString();return o.get(this._getUserAppearancePreferences(),e)||{}}getUserAppearancePreferencesForCurrentPlatformNoSubscription(){const e=v.default.getSkypePlatformId().toString();return o.get(this._getUserAppearancePreferences(),e)||{}}_gotUpdatedProps(e){o.each(e,(e=>{this._preferencesPendingPersist.hasOwnProperty(e)&&(e===t.TriggerKeys.ReadReceiptsEnabled&&h.log(g.LogTraceArea.ReadReceipts,"_gotUpdatedProps enabled="+c.default.getUserProperty(e)),delete this._preferencesPendingPersist[e])})),this._preferencesPersisted=o.clone(c.default.getUserProperties()),this._computePreferences(),this._syncSendOptionalTelemetryToLocalStore()}_computePreferences(){const e=o.extend({},this._getDefaultPrefs(),this._preferencesPersisted,this._preferencesPendingPersist),t=o.difference(o.keys(this._preferencesComputed),o.keys(e)),i=o.filter(o.keys(e),(t=>!(0,p.default)(this._preferencesComputed[t],e[t])));this._preferencesComputed=e,i.length>0&&this.trigger(t.concat(i)),this._setUserRingIfRequired()}setMyUserRing(e,t){return l.default.serviceSetMyUserRing(e).then((()=>{if(this.fetchAndUpdateProperties(!0),t)return l.default.serviceSetMyProperty(u.UserProps.ChatServiceRingChangedManually,d.UserRingChangedManually)}))}_getPreference(e){return this._preferencesComputed[e]}_setPreference(e,t){return this._isEqualToPersistedPreferences(e,t)?a.Resolved():(t=o.isObject(t)?JSON.stringify(t):t,this._preferencesPendingPersist[e]=t,this._computePreferences(),this._setPrefOnServer(e,t))}_isEqualToPersistedPreferences(e,t){if(o.isObject(t)){if(!o.isUndefined(this._preferencesPendingPersist[e])){const i=_.default.parseJsonWithDefault(this._preferencesPendingPersist[e],{});return(0,p.default)(i,t)}const i=_.default.parseJsonWithDefault(this._preferencesPersisted[e],{});return(0,p.default)(i,t)}return this._preferencesPersisted[e]===t||this._preferencesPendingPersist[e]===t}_getPreferenceBool(e){return"true"===this._getPreference(e)}_setPreferenceBool(e,t){return this._setPreference(e,t?"true":"")}_setPrefOnServer(e,t){return y.EnsureStarted(l.default).then((()=>{l.default.serviceSetMyProperty(e,t)}))}_getDefaultPrefs(){return{alertsLastReadTime:0,scheduleNextCallDisplayedTimes:0,scheduleNextCallCurrentSuccessfulCalls:0}}};(0,n.__decorate)([s.disableWarnings],b.prototype,"requestUWPToMSIXMigration",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.AlertsLastReadTime)],b.prototype,"getAlertsLastReadTime",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CaptureFirstRunLevel)],b.prototype,"getCaptureFirstRunLevel",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CaptureMarkupTooltipDismissed)],b.prototype,"getCaptureMarkupTooltipDismissed",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CoachMarksSeen)],b.prototype,"getCoachMarksSeen",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.SuggestionsEnabled)],b.prototype,"getSuggestionsEnabled",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CelebrationNotificationLastShownTime)],b.prototype,"getCelebrationNotificationLastShownTime",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.Locale)],b.prototype,"getLocale",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.Market)],b.prototype,"getMarket",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.Timezone)],b.prototype,"getTimezone",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.E911Acknowledged)],b.prototype,"isE911Acknowledged",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.EmergencyCallDefaultCountryChanged)],b.prototype,"getEmergencyCallDefaultCountry",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.IntegrationAuthConsent)],b.prototype,"getIntegrationConsent",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.IntegrationIdAuthStatePairs)],b.prototype,"getIntegrationIdAuthStatePairs",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.InviteSharingDisabled)],b.prototype,"getInviteSharingDisabled",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.IsSetupWizardCompleted)],b.prototype,"getOnboardingUserProfileScreenSeen",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.IsSetupWizardCompleted)],b.prototype,"getIsSetupWizardCompleted",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.ScheduleNextCallDisplayedTimes)],b.prototype,"getScheduleNextCallDisplayedTimes",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.ScheduleNextCallCurrentSuccessfulCalls)],b.prototype,"getScheduleNextCallCurrentSuccessfulCalls",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.MediaEditorFirstRunLevel)],b.prototype,"getMediaEditorFirstRunLevel",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.ReactionPushNotificationsEnabled)],b.prototype,"getReactionNotificationsEnabled",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.LastEngagementProcessedMessageOnWebTimestamp)],b.prototype,"getLastEngagementProcessedMessageOnWebTimestamp",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.ReadReceiptsEnabled)],b.prototype,"getReadReceiptsEnabled",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.DisplayUrlPreviewsEnabled)],b.prototype,"getDisplayUrlPreviews",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.ReadReceiptsUserPreference)],b.prototype,"getUserPreferenceForReadReceipts",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CallNotificationsWhileDND)],b.prototype,"getCallNotificationsWhileDNDEnabled",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.ChatNotificationsWhileDND)],b.prototype,"getChatNotificationsWhileDNDEnabled",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.NotifyOnPresenceChange)],b.prototype,"getNotifyOnPresenceChangeEnabled",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.PresentDNDSetting)],b.prototype,"getPresentDNDSettingStatus",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.ScheduledCallReminders)],b.prototype,"getScheduledCallReminders",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.ScheduledCallBannerDismissStates)],b.prototype,"getScheduledCallsBannerDismissStates",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.Reactions)],b.prototype,"getReactions",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CustomCallReactions)],b.prototype,"getCustomCallReactions",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.TranslatedConversationBannerDismissStates)],b.prototype,"getConversationTranslationBannerDismissState",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.TranslatedConversationBannerDismissStates)],b.prototype,"getInCallTranslationBannerDismissState",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.InterstitialForLargeGroupRinglessCallsShown)],b.prototype,"getInterstitialForLargeGroupRinglessCallsShown",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.InterstitialForSmallGroupRinglessCallsShown)],b.prototype,"getInterstitialForSmallGroupRinglessCallsShown",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.EnableSubtitlesForAllCalls)],b.prototype,"getEnableSubtitlesForAllCalls",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.OnlyShowSubtitlesForOtherParticipants)],b.prototype,"getOnlyShowSubtitlesForOtherParticipants",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CallTranslatorBotSpokenLanguageLocale)],b.prototype,"getCallTranslatorBotSpokenLanguageLocale",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CallTranslatorSpokenLanguage)],b.prototype,"getCallTranslatorSpokenLanguage",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CallTranslatorAlwaysStart)],b.prototype,"getCallTranslatorAlwaysStart",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CallTranslatorCaptionsPositionMode)],b.prototype,"getCallTranslatorCaptionsPositionMode",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.PstnTranslationSettings)],b.prototype,"getCallPstnTranslatorBotSpokenLanguageLocales",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CallTranslatorBotTranslationVoice)],b.prototype,"getCallTranslatorBotTranslationVoice",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CallTranslatorBotSubtitleLanguageLocale)],b.prototype,"getCallTranslatorBotSubtitleLanguageLocale",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.CallTranslatorPrivacyConsent)],b.prototype,"getCallTranslatorPrivacyConsent",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.BingBackgroundsEffectDismissed)],b.prototype,"getBingBackgroundsEffectDismissed",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(t.TriggerKeys.UserAppearancePreferences)],b.prototype,"getUserAppearancePreferencesForCurrentPlatform",null),(0,n.__decorate)([s.disableWarnings],b.prototype,"getUserAppearancePreferencesForCurrentPlatformNoSubscription",null),b=(0,n.__decorate)([s.AutoSubscribeStore],b),t.default=new b},30124:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerKeys=void 0;const n=i(70655),o=i(15069),s=i(88837),a=i(97691),r=i(89391),l=i(46096),c=i(36237),d=i(78735),u=i(46929),g=i(65515),h=i(29130),p=i(63823),m=i(22538),S=i(44330);var C;!function(e){e[e.NavContextType=0]="NavContextType",e[e.SplitViewMode=1]="SplitViewMode"}(C=t.TriggerKeys||(t.TriggerKeys={}));let f=class extends s.StoreBase{constructor(){super(),this._usingStackNavContext=!1,this._maybeUseStackNavigation=()=>{this._shouldUseStackNavigation().then((e=>{this._usingStackNavContext!==e&&(this._usingStackNavContext=e,c.log(l.LogTraceArea.Navigation,"NavigationContextStore: updating use stack navigation: "+this._usingStackNavContext),this.trigger(C.NavContextType))}))},m.RegisterStartupable(this,"NavigationContextStore",[h.default,d.default])}startup(){return c.log(l.LogTraceArea.Navigation,"NavigationContextStore start"),this._shouldUseStackNavigation().then((e=>{const t=this._usingStackNavContext!==e;this._usingStackNavContext=e,c.log(l.LogTraceArea.Navigation,"NavigationContextStore: At startup, use stack navigation: "+this._usingStackNavContext),d.default.subscribe(this._maybeUseStackNavigation),h.default.subscribe(this._maybeUseStackNavigation),t&&this.trigger(C.NavContextType),c.log(l.LogTraceArea.Navigation,"NavigationContextStore: finished startup")}))}isUsingStackNavigationContext(){return this._usingStackNavContext}isUsingStackNavigationContextNoSubscription(){return this._usingStackNavContext}isMobileSplitView(){return!1}isUsingMobileSplitView(){return!1}isUsingSplitView(){return S.default.isSplitViewSupported()&&!!u.default.getUserAppearancePreferencesForCurrentPlatformNoSubscription().splitViewEnabled}isUsingSplitViewNoSubscription(){return S.default.isSplitViewSupported()&&!!u.default.getUserAppearancePreferencesForCurrentPlatformNoSubscription().splitViewEnabled}setSplitViewMode(e){c.track(new p.SplitViewTelemetryEvent(e)),u.default.setUserAppearancePreferencesForCurrentPlatform({splitViewEnabled:e}),this.trigger(C.SplitViewMode)}_shouldUseStackNavigation(){return d.default.getUserPreferencesLocal().useStackNavOnNarrowDesktop||o.default.isMobile()&&r.default.getS4LUiFeatures().enableResponsiveDesign?g.default.shouldUseStackNavigationFromScreenSize():(c.log(l.LogTraceArea.Navigation,"NavigationContextStore._shouldUseStackNavigation: Using non-RN shell, returning false"),a.Resolved(!1))}};(0,n.__decorate)([(0,s.autoSubscribeWithKey)(C.NavContextType)],f.prototype,"isUsingStackNavigationContext",null),(0,n.__decorate)([s.disableWarnings],f.prototype,"isUsingStackNavigationContextNoSubscription",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(C.SplitViewMode)],f.prototype,"isUsingMobileSplitView",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(C.SplitViewMode)],f.prototype,"isUsingSplitView",null),(0,n.__decorate)([s.disableWarnings],f.prototype,"isUsingSplitViewNoSubscription",null),f=(0,n.__decorate)([s.AutoSubscribeStore],f);let y=new f;t.default=y},20506:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationEventStore=void 0;const n=i(70655),o=i(88837),s=i(97691),a=i(984),r=i(46096),l=i(36237),c=i(4735),d=i(83181),u=i(22538),g=i(53374);let h=class extends o.StoreBase{constructor(){super(),this._contactStoreCallback=e=>{if(d.default.isUIDisplayed()){const t=g.default.newCauseId();l.log(r.LogTraceArea.Contacts,"processContactBlockChangeNotificationPotentiallyBeforeStartup causeId: "+t),c.default.navigateAfterBlock(e,t,void 0)}},u.RegisterStartupable(this,"NavigationEventStore",[a.default])}startup(){return a.default.contactBlockedEventReceived.subscribe(this._contactStoreCallback),s.Resolved()}};h=(0,n.__decorate)([o.AutoSubscribeStore],h),t.NavigationEventStore=h,t.default=new h},27357:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(74958),s=i(96486),a=i(81399),r=i(16778),l=i(88837),c=i(97691),d=i(98278),u=i(46096),g=i(57347),h=i(36237),p=i(62807),m=i(78735),S=i(70665),C=i(17093),f=i(30124),y=i(95691),_=i(21090),v=i(54679),b=i(16392),T=i(22538),P=i(53374);let A=class extends l.StoreBase{constructor(){super(),this._usingStackNavContext=!1,this._skipCompositeNavigation=!1,this._numberOfTrackedRejoinCallOperations=0,this._stackNavigationContexts={},this._navigation=void 0,T.RegisterStartupable(this,"NavigationStateStore",[m.default,f.default])}startup(){return h.log(u.LogTraceArea.Navigation,"NavigationStateStore start"),this._usingStackNavContext=f.default.isUsingStackNavigationContext()&&!f.default.isMobileSplitView(),this._stackNavigationContexts[b.StackNavigatorId.Mobile]=new C.SimpleSplitNavigationContext({}),f.default.subscribe((()=>{const e=f.default.isUsingStackNavigationContext()&&!f.default.isMobileSplitView();this._usingStackNavContext!==e&&(this._usingStackNavContext=e,this._convertNavContext())}),f.TriggerKeys.NavContextType),c.Resolved()}performAfterNavigationInitialized(e){if(this._navigation)e();else{const t=this.subscribe((()=>{e(),this.unsubscribe(t)}),y.TriggerKeys.ReactNavigation)}}navigateToView(e,t,i,n=!1){var o;if(h.log(u.LogTraceArea.Navigation,"NavigationStateStore.navigateToView, causeId: "+t),!(e instanceof C.CallNavigationContext)){const e=null===(o=this._navigation)||void 0===o?void 0:o.getRootState().routeNames,i=this.getCurrentNavigationStack();(-1!==s.findIndex(i,(e=>e instanceof C.CallNavigationContext))||(null==e?void 0:e.includes(C.CallNavigationId)))&&(h.log(u.LogTraceArea.Navigation,"NavigationStateStore.navigateToView, StackNavigatorId.Mobile navigating while in a call, causeId: "+t),a.default.onCallScreenClose())}let r=b.StackNavigatorId.Mobile;f.default.isMobileSplitView()&&i&&i!==d.MainRootViewId&&(r=n?_.mainContentNavigatorIdForRootViewId(i):_.modalNavigatorIdForRootViewId(i));const l=f.default.isMobileSplitView()&&i&&i!==d.MainRootViewId?this.getCurrentStackNavigationContext(r,!1).getMasterContext():void 0;this.stackNavigateToView(e,l,r,b.StackNavigationType.Push,!0,t)}compositeCommitNavigationUpdates(e,t=[y.CompositeNavigationType.Default],i,n){if(S.dismissAll(n),this._skipCompositeNavigation)return;i&&(h.log(u.LogTraceArea.Navigation,"NavigationStateStore.compositeCommitNavigationUpdates, navigating while in a call, causeId: "+e),a.default.onCallScreenClose()),this._skipCompositeNavigation=this._shouldSkipNextCompositeNavigation(),g.default.indicateBusyOperation();const o=_.navigationTypesToTriggerKeys(t);h.log(u.LogTraceArea.Navigation,"NavigationStateStore.compositeCommitNavigationUpdates  triggerKeys: "+o+" causeId: "+e),this.trigger(o)}modalNavigateToView(e,t,i,n,s,r,l){const c=this.getCompositeCallVisible(n);h.log(u.LogTraceArea.Navigation,"NavigationStateStore.modalNavigateToView: navigator: "+o.pii.Omit(i)+" isCallVisible: "+c+" causeId: "+l),c&&(h.log(u.LogTraceArea.Navigation,"NavigationStateStore.modalNavigateToView, navigating while in a call, causeId: "+l),a.default.onCallScreenClose()),this.stackNavigateToView(e,t,i,s,!1,l),r&&this.trigger(y.TriggerKeys.ModalNavigation)}desktopSidebarNavigateToView(e,t,i,n,s,a){h.log(u.LogTraceArea.Navigation,"NavigationStateStore.desktopSidebarNavigateToView: navigator: "+o.pii.Omit(i)+" causeId: "+a),this.stackNavigateToView(e,t,i,n,!1,a),s&&this.trigger(y.TriggerKeys.DesktopSidebar)}setStackNavigation(e){this._navigation=e,this.trigger(y.TriggerKeys.ReactNavigation)}stackNavigateToView(e,t,i,n,a,r){if(S.dismissAll(),this._navigation)_.navigateWithReactNavigation(this._navigation,n,e);else{if(e)if(n===b.StackNavigationType.PopToRoot)t===e?this._stackNavContext(i).setNavStack([]):this._stackNavContext(i).setNavStack([e]);else{const t=this.getCurrentNavigationStack(i,!0).slice(0);let o=!1;for(let n=t.length-1;n>=0;n--)if(_.considerNavContextsEqual(e,t[n])){this._stackNavContext(i).setNavStack(t.slice(0,n+1)),o=!0;break}if(!o){const o=s.last(t);n===b.StackNavigationType.Replace||o&&_.shouldNavigationContextPartReplaceExisting(o,e)?(t[t.length-1]=e,this._stackNavContext(i).setNavStack(t)):t.length>=1&&o&&_.shouldResetToHubAndConversation(o,e)?this._stackNavContext(i).setNavStack([t[0],e]):(t.push(e),this._stackNavContext(i).setNavStack(t))}}t&&this._stackNavContext(i).setMasterContext(t),g.default.indicateBusyOperation(),h.log(u.LogTraceArea.Navigation,"NavigationStateStore.stackNavigateToView: navigator: "+o.pii.Omit(i)+" navigationType: "+n+" navContext: "+(e?e.id:"none")+" shouldTrigger: "+a+" causeId: "+r),a&&this.trigger(y.TriggerKeys.NavigationAndTabs)}}stackNavNavigateBack(e,t,i=b.StackNavigatorId.Mobile,n=y.CompositeNavigationType.Default){if(h.log(u.LogTraceArea.Navigation,"NavigationStateStore.stackNavNavigateBack navigator: "+o.pii.Omit(i)+" causeId: "+t),this._navigation)this._navigation.goBack();else{const e=this._stackNavContext(i);if(e.getBackStack().length<=1)return h.log(u.LogTraceArea.Navigation,"NavigationStateStore: returning (stackNavNavigateBack already at the root) causeId: "+t),!1;e.navigateBack()}if(!e){h.log(u.LogTraceArea.Navigation,"NavigationStateStore.stackNavNavigateBack triggering update. causeId: "+t);const e=_.navigationTypesToTriggerKeys([n]);this.trigger(e)}return!0}clearModalNavStack(e=b.StackNavigatorId.DesktopModal,t,i,n){h.log(u.LogTraceArea.Navigation,"NavigationStateStore.clearModalNavStack navigator: "+o.pii.Omit(e)+" shouldTrigger: "+t+" causeId: "+n),this.clearNavStack(e,!1,i,n),t&&this.trigger(y.TriggerKeys.ModalNavigation)}clearDesktopSidebarNavStack(e=b.StackNavigatorId.DesktopSidebar,t,i,n){h.log(u.LogTraceArea.Navigation,"NavigationStateStore.clearDesktopSidebarNavStack navigator: "+o.pii.Omit(e)+" shouldTrigger: "+t+" causeId: "+n),this.clearNavStack(e,!1,i,n),t&&this.trigger(y.TriggerKeys.DesktopSidebar)}clearNavStack(e=b.StackNavigatorId.Mobile,t,i,n){h.log(u.LogTraceArea.Navigation,"NavigationStateStore.clearNavStack navigator: "+o.pii.Omit(e)+" shouldTrigger: "+t+" causeId: "+n),this._stackNavContext(e).clearNavStack(),i&&this._stackNavContext(e).clearMasterContext(),t&&this.trigger(y.TriggerKeys.NavigationAndTabs)}flattenNavStack(e=b.StackNavigatorId.Mobile){if(h.log(u.LogTraceArea.Navigation,"NavigationStateStore.flattenNavStack, navigator: "+o.pii.Omit(e)),this._usingStackNavContext){const t=this.getCurrentNavigationStack(e,!0);t.length>2&&(this._stackNavContext(e).setNavStack([t[0],t[t.length-1]]),h.log(u.LogTraceArea.Navigation,"NavigationStateStore.flattenNavStack"),this.trigger(y.TriggerKeys.NavigationAndTabs))}}reduceNavStack(e,t=b.StackNavigatorId.Mobile,i=!1){h.log(u.LogTraceArea.Navigation,"NavigationStateStore.reduceNavStack, navigator: "+o.pii.Omit(t));let n=!1;const a=this.getCurrentNavigationStack(t,!0),r=a.length,l=s.filter(a,((t,o)=>{let a=!0;return s.each(e,(e=>{if(!i||o!==r-1)switch(e){case C.ConversationMediaViewerPanelNavigationId:t instanceof C.ConversationMediaViewerPanelContext&&(n=!0,a=!1);break;case C.SearchNavigationId:t instanceof C.SearchNavigationContext&&(n=!0,a=!1);break;case C.AlertsHubNavigationId:t instanceof C.AlertsHubNavigationContext&&(n=!0,a=!1);break;case C.PurchaseContinuationId+"credit":case C.PurchaseContinuationId+"calling":t instanceof C.PurchaseContinuationNavigationContext&&(n=!0,a=!1);break;case C.MobileHubNavigationId:t instanceof C.MobileHubNavigationContext&&(n=!0,a=!1);break;case C.JoiningGuestNavigatorId:t instanceof C.JoiningGuestScreenContext&&(n=!0,a=!1);break;case C.AddContactPanelId:t instanceof C.AddContactPanelNavigationContext&&(n=!0,a=!1);break;case C.PromptPermissionsNavigatorId:t instanceof C.PromptPermissionContext&&(n=!0,a=!1);break;case v.PollCreationPanelNavigationId:t instanceof v.PollCreationPanelNavigationContext&&(n=!0,a=!1);break;case v.PollSummaryPanelNavigationId:t instanceof v.PollSummaryPanelNavigationContext&&(n=!0,a=!1);break;case v.PollVotersListPanelNavigationId:t instanceof v.PollVotersListPanelNavigationContext&&(n=!0,a=!1);break;case C.PSTNDialerPanelId:t instanceof C.PSTNDialerNavigationContext&&(n=!0,a=!1);break;case C.CallFailurePromptId:t instanceof C.CallFailurePromptContext&&(n=!0,a=!1);break;case C.SmsFailurePromptId:t instanceof C.SmsFailurePromptContext&&(n=!0,a=!1);break;case C.TasterPostCallPanelId:t instanceof C.TasterPostCallPanelContext&&(n=!0,a=!1);break;case C.SkypeNumberListNavigationId:t instanceof C.SkypeNumberListNavigationContext&&(n=!0,a=!1);break;case C.SkypeNumberPanelPurchaseFlowNavigationId:t instanceof C.SkypeNumberPanelPurchaseFlowNavigationContext&&(n=!0,a=!1);break;case C.CallerIdCallingSettingsPanelNavigationId:t instanceof C.CallerIdCallingSettingsPanelNavigationContext&&(n=!0,a=!1);break;case C.CallerIdNumberCallingSettingsPanelNavigationId:t instanceof C.CallerIdNumberCallingSettingsPanelNavigationContext&&(n=!0,a=!1);break;case C.CallingSettingsPanelNavigationId:t instanceof C.CallingSettingsPanelNavigationContext&&(n=!0,a=!1);break;case C.NewSettingsPanelNavigationId:t instanceof C.NewSettingsPanelNavigationContext&&(n=!0,a=!1);break;case C.E911AcknowledgementPanelId:t instanceof C.E911AcknowledgementPanelNavigationContext&&(n=!0,a=!1);break;case C.CallCaptionsSettingsPanelNavigationId:t instanceof C.CallCaptionsSettingsPanelNavigationContext&&(n=!0,a=!1);break;case p.MeetNowLobbyNavigationId:t instanceof p.MeetNowNavigationContext&&(n=!0,a=!1);break;default:h.warn(u.LogTraceArea.Navigation,"NavigationStateStore: navigationId not handled "+e)}})),a}));h.log(u.LogTraceArea.Navigation,"NavigationStateStore: reduceNavStack: "+n),n&&(this._stackNavContext(t).setNavStack(l),this.trigger(y.TriggerKeys.NavigationAndTabs))}collapseSplitNavContext(e=b.StackNavigatorId.Mobile,t,i){h.log(u.LogTraceArea.Navigation,"NavigationStateStore.collapseSplitNavContext collapsed: "+t+" navigator: "+o.pii.Omit(e)+" causeId: "+i);const n=this._stackNavContext(e);n.isCollapsed()!==t&&(n.collapse(t),this.trigger(y.TriggerKeys.NavigationAndTabs))}isSplitNavStackCollapsed(e=b.StackNavigatorId.Mobile){return this._stackNavContext(e).isCollapsed()}isDesktopSplitNavStackCollapsedForRootViewId(e){const t=_.mainContentNavigatorIdForRootViewId(e);return this.isSplitNavStackCollapsed(t)}isDesktopSplitNavStackCollapsedForRootViewIdNoSubscription(e){const t=_.mainContentNavigatorIdForRootViewId(e);return this.isSplitNavStackCollapsed(t)}getCurrentNavigationStackRoute(e=b.StackNavigatorId.Mobile){if(this._navigation)return this._navigation.getCurrentRoute();{const t=s.last(this.getCurrentNavigationStack(e));if(t){if(t instanceof C.MobileContentPanelNavigationContext||t instanceof C.DesktopContentPanelNavigationContext){const e=t.getConversationContext();if(e)return{key:"old-stack"+e.id,name:t.stateId,params:e.state}}return{key:"old-stack"+(null==t?void 0:t.id),name:t.stateId,params:t.state}}}}getCurrentNavigationStack(e=b.StackNavigatorId.Mobile,t=!1){h.log(u.LogTraceArea.Navigation,"NavigationStateStore.getCurrentNavigationStack navigator: "+o.pii.Omit(e));const i=this._stackNavContext(e).getNavStack();return i.length||e!==b.StackNavigatorId.Mobile||(h.log(u.LogTraceArea.Navigation,"NavigationStateStore: No stack navigation context yet. Returning default."),i.push(new C.MobileHubNavigationContext({hubTab:C.HubTab.Recents})),this._stackNavContext(e).setNavStack(i)),this._stackNavContext(e).getNavStack(t).slice(0)}getNavigationStackSize(e=b.StackNavigatorId.Mobile){var t;return this._navigation?(null===(t=this._navigation.getState())||void 0===t?void 0:t.routes.length)||0:this.getCurrentNavigationStack(e).length}isOnTopOfNavigationStack(e,t=b.StackNavigatorId.Mobile){const i=this.getCurrentNavigationStackRoute(t);return!!i&&i.name===e}getCurrentNavigationBackStack(e=b.StackNavigatorId.Mobile,t=!1){return h.log(u.LogTraceArea.Navigation,"NavigationStateStore.getCurrentNavigationBackStack navigator: "+o.pii.Omit(e)),this._stackNavContext(e).getBackStack(t).slice(0)}getCurrentStackNavigationContext(e=b.StackNavigatorId.Mobile,t=!0){h.log(u.LogTraceArea.Navigation,"NavigationStateStore.getCurrentStackNavigationContext navigator: "+o.pii.Omit(e));const i=this._stackNavContext(e);return t?i.clone(!0):i}getCurrentModalStackNavigationContext(e=b.StackNavigatorId.DesktopModal,t=!0){h.log(u.LogTraceArea.Navigation,"NavigationStateStore.getCurrentModalStackNavigationContext navigator: "+o.pii.Omit(e));const i=this._stackNavContext(e);return t?i.clone(!0):i}getCurrentSidebarStackNavigationContext(e=b.StackNavigatorId.DesktopSidebar,t=!0){h.log(u.LogTraceArea.Navigation,"NavigationStateStore.getCurrentSidebarStackNavigationContext navigator: "+o.pii.Omit(e));const i=this._stackNavContext(e);return t?i.clone(!0):i}_getCurrentStackNavigationContextNoSubscription(e=b.StackNavigatorId.Mobile,t=!0){h.log(u.LogTraceArea.Navigation,"NavigationStateStore.getCurrentStackNavigationContextNoSubscription navigator: "+o.pii.Omit(e));const i=this._stackNavContext(e);return t?i.clone(!0):i}isConversationOnTopOfNavStack(e){if(this._navigation){const t=this._navigation.getCurrentRoute();return(null==t?void 0:t.name)===C.MobileContentPanelId&&(null==t?void 0:t.params).conversationId===e}const t=s.last(this.getCurrentNavigationStack());if(t&&(t instanceof C.MobileContentPanelNavigationContext||t instanceof C.DesktopContentPanelNavigationContext)){const i=t.getConversationContext();return!!i&&e===i.state.conversationId}return!1}isHubOnTopOfNavStackNoSubscription(){if(this._navigation){const e=this._navigation.getCurrentRoute();return!(!e||e.name!==C.MobileHubNavigationId)}const e=s.last(this._stackNavContext(b.StackNavigatorId.Mobile).getNavStack());return!!e&&e instanceof C.MobileHubNavigationContext}getCurrentHubTab(){var e;if(this._navigation){const t=this._navigation.getCurrentRoute();if(t&&t.name===C.MobileHubNavigationId&&t.params){return null!==(e=t.params.hubTab)&&void 0!==e?e:C.HubTab.Recents}return C.HubTab.Recents}const t=s.find(this._stackNavContext(b.StackNavigatorId.Mobile).getNavStack(),(e=>e instanceof C.MobileHubNavigationContext));return t?t.state.hubTab:C.HubTab.Recents}navigateToHubTab(e=C.HubTab.Recents){if(this._usingStackNavContext,this._navigation)this._navigation.navigate(C.MobileHubNavigationId,{hubTab:e});else{let t,i=this._stackNavContext(b.StackNavigatorId.Mobile).getNavStack();const n=s.findLastIndex(i,(e=>e instanceof C.MobileHubNavigationContext));-1!==n?(t=i[n],t.state.hubTab!==e&&(t=t.clone(!1),t.state.hubTab=e),i=i.slice(0,n)):t=new C.MobileHubNavigationContext({hubTab:e}),i.push(t),this._stackNavContext(b.StackNavigatorId.Mobile).setNavStack(i)}h.log(u.LogTraceArea.Navigation,"NavigationStateStore: navigateToHubTab: "+e+"usingStackNavContext: "+this._usingStackNavContext),this.trigger([y.TriggerKeys.NavigationAndTabs,y.TriggerKeys.HubTab])}getCompositeMainStageNavViewMode(e){const t=_.mainContentNavigatorIdForRootViewId(e),i=this.getCurrentStackNavigationContext(t,!1).getNavStack();return _.mainStageViewModeForNavContext(s.last(i))}getCompositeMainStageNavViewModeNoSubscription(e){const t=_.mainContentNavigatorIdForRootViewId(e),i=this._getCurrentStackNavigationContextNoSubscription(t,!1).getNavStack();return _.mainStageViewModeForNavContext(s.last(i))}getCompositeCallVisible(e){return this._getCompositeCallVisible(e)}getCompositeCallVisibleNoSubscription(e){return this._getCompositeCallVisible(e)}shouldDisplayRightNavigation(e){return this._shouldDisplayRightNavigation(e)}shouldDisplayRightNavigationNoSubscription(e){return this._shouldDisplayRightNavigation(e)}isFindPanelShowing(e){const t=this._getRightBarNavigationContext(e);return t instanceof C.FindPanelNavigationContext||t instanceof C.InAppBrowserNavigationContext}isInAppBrowserShowingNoSubscription(e){return this._getRightBarNavigationContext(e)instanceof C.InAppBrowserNavigationContext}isGalleryShowing(e){return this._getRightBarNavigationContext(e)instanceof C.GalleryNavigationContext}isSubtitlesShowing(e){return this._getRightBarNavigationContext(e)instanceof C.SubtitlesNavigationContext}isRightSideBarShowing(e){return this._stackNavContext(_.rightSideBarNavigatorIdForRootViewId(e)).getNavStack().length>0}isSearchShowing(e){return this._leftNavViewMode(e)===C.LeftNavViewMode.Search}isCallChatShowing(e){if(this._leftNavViewMode(e)===C.LeftNavViewMode.ConversationInCall)return!0;const t=this._stackNavContext(_.rightSideBarNavigatorIdForRootViewId(e));return s.last(t.getNavStack())instanceof C.ConversationInCallNavigationContext}isLeftPanelShowing(e){return this._leftNavViewMode(e)!==C.LeftNavViewMode.None}setNewStartingNavigationContext(e,t){const i=P.default.newCauseId();h.log(u.LogTraceArea.Navigation,"NavigationActions.setNewStartingNavigationContext, causeId: "+i);{const n=_.maybeUpdateDesktopNavContext(e(),i),o=_.mainContentNavigatorIdForRootViewId(t);this._stackNavContext(o).setNavStack([n])}}updateMobileHubContextForStackNavContext(e,t){var i;if(this._navigation)return void((null===(i=this._navigation.getCurrentRoute())||void 0===i?void 0:i.name)===C.MobileHubNavigationId&&(this._navigation.setParams({hubTab:e}),t&&this.trigger(y.TriggerKeys.NavigationAndTabs),this.trigger(y.TriggerKeys.HubTab)));const n=this._stackNavContext(b.StackNavigatorId.Mobile).getNavStack();if(n.length){const i=s.findLastIndex(n,(e=>e instanceof C.MobileHubNavigationContext));if(-1!==i){const o=n[i].clone(!0);o.state.hubTab=e,n[i]=o,this._stackNavContext(b.StackNavigatorId.Mobile).setNavStack(n),h.log(u.LogTraceArea.Navigation,"NavigationStateStore: updateMobileHubContextForStackNavContext, hubTab: "+e),t&&this.trigger(y.TriggerKeys.NavigationAndTabs),this.trigger(y.TriggerKeys.HubTab)}}}dangerouslyGetActiveConversationContextOrigin(e){var t;return(null===(t=this.getActiveConversationState(e))||void 0===t?void 0:t.origin)||u.NavigationConversationOrigin.Unknown}getActiveContextConversationIdNoSubsription(e){var t;return null===(t=this.getActiveConversationState(e))||void 0===t?void 0:t.conversationId}getActiveConversationId(e){var t;return null===(t=this.getActiveConversationState(e))||void 0===t?void 0:t.conversationId}getActiveCallConversationId(e){if(this._usingStackNavContext)if(this._navigation){const e=this._navigation.getCurrentRoute();if(e&&e.name===C.CallNavigationId)return e.params.initialConversationMri}else{const e=s.last(this._stackNavContext(b.StackNavigatorId.Mobile).getNavStack());if(e instanceof C.CallNavigationContext)return e.state.initialConversationMri}else{const e=_.mainContentNavigatorIdForRootViewId(d.MainRootViewId),t=this.getCurrentStackNavigationContext(e,!1).getNavStack(),i=s.last(t);if(i instanceof C.CallNavigationContext)return i.state.initialConversationMri}}getActiveConversationState(e){var t,i;if(!this._usingStackNavContext)return null===(i=this._getCompositeConversationContext(e))||void 0===i?void 0:i.state;if(!this._navigation)return null===(t=this._getStackConversationContext(this._stackNavContext(b.StackNavigatorId.Mobile)))||void 0===t?void 0:t.state;{const e=this._navigation.getCurrentRoute();if(e&&e.name===C.MobileContentPanelId)return null==e?void 0:e.params}}wrapWithTrackingForRejoinCallOperation(e){return++this._numberOfTrackedRejoinCallOperations,1===this._numberOfTrackedRejoinCallOperations&&this.trigger(y.TriggerKeys.RejoinCallOperation),e.finally((()=>{--this._numberOfTrackedRejoinCallOperations,0===this._numberOfTrackedRejoinCallOperations&&this.trigger(y.TriggerKeys.RejoinCallOperation)}))}isTrackingRejoinCallOperation(){return this._numberOfTrackedRejoinCallOperations>0}isContactPanelVisible(){const e=this.getCurrentStackNavigationContext(b.StackNavigatorId.DesktopContent,!1);if(e instanceof C.RootCompositeSplitViewContext){const t=e.getLeftNavigationContext();if(t)return t.state.viewMode===C.LeftNavViewMode.Contacts}return!1}_leftNavViewMode(e){const t=_.mainContentNavigatorIdForRootViewId(e);h.log(u.LogTraceArea.Navigation,"NavigationStateStore._leftNavViewMode navigator: "+o.pii.Omit(t));const i=this._stackNavContext(t);if(i instanceof C.RootCompositeSplitViewContext){const e=i.getLeftNavigationContext();return e?e.state.viewMode:void 0}if(i.getMasterContext()instanceof C.ConversationInCallNavigationContext)return C.LeftNavViewMode.ConversationInCall}_shouldSkipNextCompositeNavigation(){const e=this.getCurrentStackNavigationContext(b.StackNavigatorId.DesktopContent,!1).getNavStack();return s.last(e)instanceof C.ForcedUpgradeContext}_convertCompositeNavContextToStackNavContextStack(){return h.log(u.LogTraceArea.Navigation,"NavigationStateStore._convertCompositeNavContextToStackNavContextStack"),r.Modal.dismissAll(),r.Popup.dismissAll(),_.convertCompositeNavContextToStackNavContextStack(this._stackNavContext(b.StackNavigatorId.DesktopContent))}_convertStackNavContextToCompositeSplitNavContext(){return h.log(u.LogTraceArea.Navigation,"NavigationStateStore._convertStackNavContextToCompositeSplitNavContext"),r.Modal.dismissAll(),r.Popup.dismissAll(),_.convertStackNavContextToCompositeSplitNavContext(this._stackNavContext(b.StackNavigatorId.Mobile))}_convertNavContext(){h.log(u.LogTraceArea.Navigation,"NavigationStateStore._convertNavContext, usingStackNavContext: "+this._usingStackNavContext),this._usingStackNavContext?(this._stackNavigationContexts[b.StackNavigatorId.Mobile]=this._convertCompositeNavContextToStackNavContextStack(),delete this._stackNavigationContexts[b.StackNavigatorId.DesktopContent],delete this._stackNavigationContexts[b.StackNavigatorId.DesktopSidebar]):(this._stackNavigationContexts[b.StackNavigatorId.DesktopContent]=this._convertStackNavContextToCompositeSplitNavContext(),this._stackNavigationContexts[b.StackNavigatorId.Mobile]=new C.SimpleSplitNavigationContext({})),this.trigger()}_stackNavContext(e){if(!this._stackNavigationContexts[e]){const t=P.default.newCauseId();h.log(u.LogTraceArea.Navigation,"NavigationActions._stackNavContext, creating new context, causeId: "+t),e===b.StackNavigatorId.DesktopContent?this._stackNavigationContexts[e]=_.createRootCompositeSplitViewContext(t):this._stackNavigationContexts[e]=new C.SimpleSplitNavigationContext({})}return this._stackNavigationContexts[e]}_getCompositeCallVisible(e){const t=_.mainContentNavigatorIdForRootViewId(e);return this._getCompositeCallVisibleWithNavigatorId(t)}_getCompositeCallVisibleWithNavigatorId(e){const t=this.getCurrentStackNavigationContext(e,!1).getNavStack();return s.last(t)instanceof C.CallNavigationContext}_shouldDisplayRightNavigation(e){const t=_.mainContentNavigatorIdForRootViewId(e),i=this.getCurrentStackNavigationContext(t,!1).getNavStack(),n=s.last(i);return n instanceof C.CallNavigationContext||n instanceof C.DesktopContentPanelNavigationContext||n instanceof C.WelcomeScreenContext||n instanceof C.CallingDebugPanelNavigationContext}_getStackConversationContext(e){const t=s.last(e.getNavStack());if(t instanceof C.MobileContentPanelNavigationContext)return t.getConversationContext()}_getCompositeConversationContext(e){const t=_.mainContentNavigatorIdForRootViewId(e),i=this.getCurrentStackNavigationContext(t,!1).getNavStack(),n=s.last(i);if(n instanceof C.DesktopContentPanelNavigationContext)return n.getConversationContext()}_getRightBarNavigationContext(e){const t=this._stackNavContext(_.rightSideBarNavigatorIdForRootViewId(e));return s.last(t.getNavStack())}};(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"isSplitNavStackCollapsed",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"isDesktopSplitNavStackCollapsedForRootViewId",null),(0,n.__decorate)([l.disableWarnings],A.prototype,"isDesktopSplitNavStackCollapsedForRootViewIdNoSubscription",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"getCurrentNavigationStackRoute",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"getCurrentNavigationStack",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"getNavigationStackSize",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"isOnTopOfNavigationStack",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"getCurrentNavigationBackStack",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"getCurrentStackNavigationContext",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)([y.TriggerKeys.ModalNavigation,y.TriggerKeys.NavigationAndTabs])],A.prototype,"getCurrentModalStackNavigationContext",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.DesktopSidebar)],A.prototype,"getCurrentSidebarStackNavigationContext",null),(0,n.__decorate)([l.disableWarnings],A.prototype,"_getCurrentStackNavigationContextNoSubscription",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"isConversationOnTopOfNavStack",null),(0,n.__decorate)([l.disableWarnings],A.prototype,"isHubOnTopOfNavStackNoSubscription",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.HubTab)],A.prototype,"getCurrentHubTab",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"getCompositeMainStageNavViewMode",null),(0,n.__decorate)([l.disableWarnings],A.prototype,"getCompositeMainStageNavViewModeNoSubscription",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"getCompositeCallVisible",null),(0,n.__decorate)([l.disableWarnings],A.prototype,"getCompositeCallVisibleNoSubscription",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"shouldDisplayRightNavigation",null),(0,n.__decorate)([l.disableWarnings],A.prototype,"shouldDisplayRightNavigationNoSubscription",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.DesktopSidebar)],A.prototype,"isFindPanelShowing",null),(0,n.__decorate)([l.disableWarnings],A.prototype,"isInAppBrowserShowingNoSubscription",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.DesktopSidebar)],A.prototype,"isGalleryShowing",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.DesktopSidebar)],A.prototype,"isSubtitlesShowing",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.DesktopSidebar)],A.prototype,"isRightSideBarShowing",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"isSearchShowing",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"isCallChatShowing",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"isLeftPanelShowing",null),(0,n.__decorate)([l.disableWarnings],A.prototype,"dangerouslyGetActiveConversationContextOrigin",null),(0,n.__decorate)([l.disableWarnings],A.prototype,"getActiveContextConversationIdNoSubsription",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"getActiveConversationId",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.NavigationAndTabs)],A.prototype,"getActiveCallConversationId",null),(0,n.__decorate)([(0,l.autoSubscribeWithKey)(y.TriggerKeys.RejoinCallOperation)],A.prototype,"isTrackingRejoinCallOperation",null),A=(0,n.__decorate)([l.AutoSubscribeStore],A);let k=new A;t.default=k},32226:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionStatus=void 0;const n=i(70655),o=(i(16778),i(88837)),s=i(97691),a=(i(60),i(22801)),r=i(90239),l=i(46096),c=i(36237),d=i(17791),u=i(22538),g=i(12770);var h;!function(e){e[e.DisconnectedNoNetworkingReported=1]="DisconnectedNoNetworkingReported",e[e.DisconnectedButNetworkingPossible=2]="DisconnectedButNetworkingPossible",e[e.Connected=3]="Connected",e[e.PossibleCaptivePortal=4]="PossibleCaptivePortal"}(h=t.ConnectionStatus||(t.ConnectionStatus={}));let p=class extends o.StoreBase{constructor(){super(),this._actualStatus=h.DisconnectedButNetworkingPossible,this._reportedStatus=h.Connected,this._appActive=!1,u.RegisterStartupable(this,"NetworkConnectionStore",[d.default])}startup(){return d.default.subscribe((()=>{this._recalc()})),a.default.subscriptionStateChanged.subscribe((()=>{u.HasStarted(this)&&this._recalc()})),this._appActive=!0,this._recalc(),s.Resolved()}getConnectionStatus(){return this._reportedStatus}isConnected(){return this._reportedStatus===h.Connected}_recalc(){let e;const t=a.default.getSubscriptionState(),i=a.default.getLongPollResult();c.log(l.LogTraceArea.NetworkConnectionStore,"Chat Service subscription state: "+r.SubscriptionState[t]+"; Long poll result: "+r.LongPollResult[i]),t===r.SubscriptionState.CreatedActive?(e=h.Connected,d.default.getPassedConnectivityCheck()||d.default.forcePassedConnectivityCheck()):i===r.LongPollResult.FailureErrorCode||d.default.isNetworkConnected()?(e=h.DisconnectedButNetworkingPossible,d.default.getPassedConnectivityCheck()||(e=h.PossibleCaptivePortal)):e=h.DisconnectedNoNetworkingReported,e!==this._actualStatus&&(c.log(l.LogTraceArea.NetworkConnectionStore,"Status changed from: "+h[this._actualStatus]+", to: "+h[e]),this._actualStatus=e,this._cancelDebounceCatchup(),this._appActive?this._checkCatchup():c.log(l.LogTraceArea.NetworkConnectionStore,"The app is not active, we do not need to report the status change"))}_checkCatchup(){this._reportedStatus===h.Connected&&this._actualStatus===h.DisconnectedButNetworkingPossible?this._debounceCatchup(5e3):this._reportedStatus===h.DisconnectedButNetworkingPossible&&this._actualStatus===h.Connected||this._actualStatus===h.DisconnectedNoNetworkingReported?this._debounceCatchup(1e3):this._catchUp()}_cancelDebounceCatchup(){this._disconnectedDebounceTimer&&(g.default.clearTimeout(this._disconnectedDebounceTimer),this._disconnectedDebounceTimer=void 0,c.log(l.LogTraceArea.NetworkConnectionStore,"_cancelDebounceCatchup"))}_debounceCatchup(e){this._cancelDebounceCatchup(),c.log(l.LogTraceArea.NetworkConnectionStore,"_debounceCatchup Scheduled: Last Status = "+h[this._reportedStatus]+", New status = "+h[this._actualStatus]),this._disconnectedDebounceTimer=g.default.setTimeout((()=>{this._disconnectedDebounceTimer=void 0,c.log(l.LogTraceArea.NetworkConnectionStore,"_debounceCatchup Fulfilled: Last Status = "+h[this._reportedStatus]+", New Status = "+h[this._actualStatus]),this._catchUp()}),e)}_catchUp(){this._reportedStatus!==this._actualStatus&&(this._reportedStatus=this._actualStatus,this._actualStatus===h.DisconnectedButNetworkingPossible&&d.default.getPassedConnectivityCheck()&&d.default.runConnectivityCheck(),this.trigger(),c.log(l.LogTraceArea.NetworkConnectionStore,"Catching up and setting state to "+h[this._actualStatus]))}test_reset(){this._cancelDebounceCatchup(),this._actualStatus=h.DisconnectedButNetworkingPossible,this._reportedStatus=h.Connected}};(0,n.__decorate)([o.autoSubscribe],p.prototype,"getConnectionStatus",null),(0,n.__decorate)([o.autoSubscribe],p.prototype,"isConnected",null),p=(0,n.__decorate)([o.AutoSubscribeStore],p),t.default=new p},6819:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(74958),s=i(31844),a=i(88837),r=i(48540),l=i(97691),c=i(89391),d=i(46096),u=i(36237),g=i(17791),h=i(22538),p=i(4057),m=i(40363);let S=class extends a.StoreBase{constructor(){super(),this._isStoreInitialized=!1,h.RegisterStartupable(this,"NetworkOperatorStore",[])}startup(){return g.default.subscribe((()=>{g.default.isNetworkingAvailable()&&(u.log(d.LogTraceArea.NetworkOperator,"ReportedConnectivityStore available, fetching codes"),this._getNetworkOperatorInfo())})),l.Resolved()}_getNetworkOperatorInfo(){return s.default.getMncMccCode().then((e=>{this._networkOperatorInfo=e,u.log(d.LogTraceArea.NetworkOperator,"MCC/MNC code: "+o.pii.Omit(JSON.stringify(e))),this.trigger()})).catch((e=>{u.warn(d.LogTraceArea.NetworkOperator,"MCC/MNC code is not available: "+p.default.errorAsString(e))})).finally((()=>{this._isStoreInitialized=!0}))}_getOperatorCode(){let e=this.getMccCode(),t=this.getMncCode();if(e&&t)return e+"-"+t}getMccCode(){let e=this._networkOperatorInfo;return e?e.mccCode:this._isStoreInitialized?void 0:m.default.getMccCode()}getMncCode(){let e=this._networkOperatorInfo;return e?e.mncCode:this._isStoreInitialized?void 0:m.default.getMncCode()}getCallConnectionType(){const e=c.default.getOEMConfig().zeroRating.mccMncList;if(!e||0===e.length)return u.log(d.LogTraceArea.NetworkOperator,"getCallConnectionType: MCC/MNC list is empty -> AllSupported"),r.ConnectionType.AllSupported;const t=this._getOperatorCode();return u.log(d.LogTraceArea.NetworkOperator,"getCallConnectionType: MCC/MNC code: "+(t?o.pii.Omit(t):"none")),t?e.indexOf(t)>=0?(u.log(d.LogTraceArea.NetworkOperator,"getCallConnectionType: MCC/MNC code: "+o.pii.Omit(t)+" in list -> NoDirectConnection"),r.ConnectionType.NoDirectConnection):(u.log(d.LogTraceArea.NetworkOperator,"getCallConnectionType: No conditions satisfied -> AllSupported"),r.ConnectionType.AllSupported):(u.log(d.LogTraceArea.NetworkOperator,"getCallConnectionType: Cannot fetch MCC/MNC code -> AllSupported"),r.ConnectionType.AllSupported)}};(0,n.__decorate)([a.autoSubscribe],S.prototype,"getMccCode",null),(0,n.__decorate)([a.autoSubscribe],S.prototype,"getMncCode",null),(0,n.__decorate)([a.autoSubscribe],S.prototype,"getCallConnectionType",null),S=(0,n.__decorate)([a.AutoSubscribeStore],S),t.default=new S},33348:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(96486),s=i(88837);let a=class extends s.StoreBase{constructor(){super(...arguments),this._lastPendingAnimationHandle=1,this._pendingAnimations=[]}isAnimationPending(){return this._pendingAnimations.length>0}createPendingAnimation(){const e=this._lastPendingAnimationHandle++,t={handle:e,startTime:Date.now()};this._pendingAnimations.push(t),1===this._pendingAnimations.length&&(s.StoreBase.pushTriggerBlock(),this.trigger());o.head(this._pendingAnimations);return e}clearPendingAnimation(e){this._pendingAnimations=o.filter(this._pendingAnimations,(t=>t.handle!==e)),0===this._pendingAnimations.length&&(s.StoreBase.popTriggerBlock(),this.trigger())}};(0,n.__decorate)([s.autoSubscribe],a.prototype,"isAnimationPending",null),a=(0,n.__decorate)([s.AutoSubscribeStore],a),t.default=new a},81736:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerKeys=void 0;const n=i(70655),o=i(96486),s=i(2604),a=i(16778),r=i(88837),l=i(97691),c=i(60),d=i(89391),u=i(46096),g=i(36237),h=i(33754),p=i(78735),m=i(70812),S=i(22538),C=i(4057),f=i(40363),y=i(78262),_=i(53374);t.TriggerKeys={NotificationsPrompt:"NotificationsPrompt"};let v=class extends r.StoreBase{constructor(){super(),this._shouldShowLimitedPhotosPrompt=!0,this._systemPermissionStatus={},this._prePermissionStatus={},S.RegisterStartupable(this,"PermissionsStore",[p.default])}startup(){const e=p.default.getUserPreferencesLocal();this._updatePrePermissionStatus(e.cameraPrePromptStatus,y.PermissionType.Camera,!1),this._updatePrePermissionStatus(e.cameraRollPrePromptStatus,y.PermissionType.CameraRoll,!1),this._updatePrePermissionStatus(e.writeCameraRollPrePromptStatus,y.PermissionType.WriteCameraRoll,!1),this._updatePrePermissionStatus(e.microphonePrePromptStatus,y.PermissionType.Microphone,!1),this._updatePrePermissionStatus(e.contactsPrePromptStatus,y.PermissionType.Contacts,!1),this._updatePrePermissionStatus(e.notificationsPrePromptStatus,y.PermissionType.Notifications,!1),this._updatePrePermissionStatus(e.locationPrePromptStatus,y.PermissionType.Location,!1),this._updatePrePermissionStatus(e.locationAlwaysPrePromptStatus,y.PermissionType.LocationAlways,!1),this._updatePrePermissionStatus(e.sendSmsPrePromptStatus,y.PermissionType.SendSms,!1),this._updatePrePermissionStatus(e.receiveSmsPrePromptStatus,y.PermissionType.ReceiveSms,!1),this._updatePrePermissionStatus(e.readSmsPrePromptStatus,y.PermissionType.ReadSms,!1),this._updatePrePermissionStatus(e.phoneStatePermissionPrePromptStatus,y.PermissionType.ReadPhoneState,!1),this._updatePrePermissionStatus(e.drawOverPermissionPrePromptStatus,y.PermissionType.DrawOver,!1),this._updatePrePermissionStatus(e.calendarPrePromptPermissionPrePromptStatus,y.PermissionType.Calendar,!1),this._updatePrePermissionStatus(e.screenRecordingPrePromptStatus,y.PermissionType.ScreenRecording,!1);const t=s.default.notificationsPermissionStatus().then((e=>{const t=(s.PermissionStatus.Denied,e);this._updateAndTriggerPermissionStatusForType(y.PermissionType.Notifications,t)})).then(o.noop);if(this._checkSystemPermissionStatus(),this._activationSubToken=c.default.subscribeForChanges("PermissionsStore",(e=>{e===a.Types.AppActivationState.Active&&this._checkSystemPermissionStatus()})),this._shouldShowNotificationsPrompt=true,this._shouldShowNotificationsPrompt){const t=e.promptClosedForVersion;if(t){const e=C.default.parseVersion(t),i=C.default.parseVersion(f.default.getAppVersion());i&&e&&i.major===e.major&&i.minor<=e.minor&&(this._shouldShowNotificationsPrompt=!1)}}return t}destroy(){this._activationSubToken&&(this._activationSubToken.unsubscribe(),this._activationSubToken=void 0)}isNotificationsPromptDismissed(){return!this._shouldShowNotificationsPrompt}shouldShowNotificationsPrompt(){return this._shouldShowNotificationsPrompt&&this.permissionStatus(y.PermissionType.Notifications)!==s.PermissionStatus.Granted}closeNotificationsPrompt(){this._shouldShowNotificationsPrompt=!1,this.trigger(t.TriggerKeys.NotificationsPrompt),p.default.setUserPreferencesLocal({promptClosedForVersion:f.default.getAppVersion()})}closeLimitedPhotoSelectionPrompt(){this._shouldShowLimitedPhotosPrompt=!1}shouldShowLimitedPhotoSelectionPrompt(){return this._shouldShowLimitedPhotosPrompt&&this._systemPermissionStatus[y.PermissionType.CameraRoll]===s.PermissionStatus.Limited}systemPromptHasNotBeenDisplayed(e){return this.permissionStatus(e)===s.PermissionStatus.Unknown}permissionStatus(e){return e===y.PermissionType.CameraRoll&&this._systemPermissionStatus[e]===s.PermissionStatus.Limited?s.PermissionStatus.Granted:this._systemPermissionStatus[e]||s.PermissionStatus.Unknown}getPermissionStatusFetchIfUnavailable(e,t){const i=this._systemPermissionStatus[e];return(o.isUndefined(i)||i===s.PermissionStatus.Unknown||t)&&(e===y.PermissionType.MicrophoneAndCamera?s.default.microphoneAndCameraPermissionStatus().then((t=>(this.setPermissionStatus(e,t),l.Resolved(t)))):e===y.PermissionType.Microphone?s.default.microphonePermissionStatus().then((t=>(this.setPermissionStatus(e,t),l.Resolved(t)))):e===y.PermissionType.Camera&&s.default.cameraPermissionStatus().then((t=>(this.setPermissionStatus(e,t),l.Resolved(t))))),l.Resolved(this.permissionStatus(e))}requestPermission(e,t,i){const n=`requestPermission - ${y.PermissionType[e]}`,o=this._systemPermissionStatus[e]||s.PermissionStatus.Unknown;if(!(t&&!!(t&y.PermissionPromptOptions.DontPrompt))){const a=this._prePermissionStatus[e]||s.PermissionStatus.Unknown;t&&y.PermissionPromptOptions.PromptAgainIfDenied;{const r=!!(t&&t&y.PermissionPromptOptions.SkipAugmentedWebPanel),l=!!(t&&t&y.PermissionPromptOptions.SkipPrePrompt)&&o!==s.PermissionStatus.Denied;return g.log(u.LogTraceArea.Permissions,`${n}: shouldNotPrePrompt: ${l}, preStatus: ${s.PermissionStatus[a]}, systemStatus: ${s.PermissionStatus[o]}`),this._intPromptForPermissionType(e,!l,r).then((t=>(this.setPermissionStatus(e,t.systemPermissionStatus,t.prePermissionStatus,i),t.systemPermissionStatus)))}}return g.log(u.LogTraceArea.Permissions,`${n}: dontPrompt`),l.Resolved(o)}setPermissionStatus(e,t,i,n){let o=!1;const a=[e];if(g.log(u.LogTraceArea.Permissions,`setPermissionStatus - type: ${y.PermissionType[e]}, newStatus: ${s.PermissionStatus[t]}, prevStatus: ${s.PermissionStatus[this._systemPermissionStatus[e]]}, origin: ${n&&s.PermissionOrigin[n]||"undefined"}`),this._systemPermissionStatus[e]!==t){if(this._systemPermissionStatus[e]=t,e===y.PermissionType.MicrophoneAndCamera){let e=s.PermissionStatus.Denied,i=s.PermissionStatus.Denied;t===s.PermissionStatus.Granted?(e=s.PermissionStatus.Granted,i=s.PermissionStatus.Granted):t===s.PermissionStatus.MicGrantedAndCameraDenied?e=s.PermissionStatus.Granted:t===s.PermissionStatus.MicDeniedAndCameraGranted&&(i=s.PermissionStatus.Granted),this._systemPermissionStatus[y.PermissionType.Microphone]=e,this._systemPermissionStatus[y.PermissionType.Camera]=i,a.push(y.PermissionType.Microphone),a.push(y.PermissionType.Camera),g.track(new m.PermissionsStatusChange(y.PermissionType.Microphone,e,n)),g.track(new m.PermissionsStatusChange(y.PermissionType.Camera,i,n))}else g.track(new m.PermissionsStatusChange(e,t,n));o=!0}this._updatePrePermissionStatus(i||t,e)&&(o=!0),o&&this.trigger(a)}setPrePermissionStatus(e,t){this._updatePrePermissionStatus(t,e)}updateDrawOverPrePermissionStatus(e){this._updatePrePermissionStatus(e,y.PermissionType.DrawOver);const t=p.default.getUserPreferencesLocal().drawOverPermissionPromptDisplayCount||0;p.default.setUserPreferencesLocal({drawOverPermissionPromptDisplayCount:t+1,drawOverPermissionPromptLastDisplayDate:Date.now()})}updateScreenRecordingPrePermissionStatus(){return f.default.isElectronOsx()?s.default.requestScreenRecordingPermission().then((e=>(this._updateAndTriggerPermissionStatusForType(y.PermissionType.ScreenRecording,e),e))):l.Resolved(s.PermissionStatus.Granted)}showDrawOverPermissionPrompt(){const e=d.default.getS4LCMCFeatures().androidCallMonitorConfig.permissionPromptMaxDisplayCount,t=d.default.getS4LCMCFeatures().androidCallMonitorConfig.permissionPromptResetIntervalSeconds,i=p.default.getUserPreferencesLocal().drawOverPermissionPromptLastDisplayDate||0;let n=p.default.getUserPreferencesLocal().drawOverPermissionPromptDisplayCount||0;return t>0&&Date.now()>i+1e3*t&&(g.log(u.LogTraceArea.Permissions,"Reseting drawOverPermissionPromptDisplayCount to 0"),n=0,p.default.setUserPreferencesLocal({drawOverPermissionPromptDisplayCount:n})),this._systemPermissionStatus[y.PermissionType.DrawOver]!==s.PermissionStatus.Granted&&n<e}_checkSystemPermissionStatus(){s.default.cameraRollPermissionStatus().then((e=>{this._updateAndTriggerPermissionStatusForType(y.PermissionType.CameraRoll,e)})),s.default.writeCameraRollPermissionStatus().then((e=>{this._updateAndTriggerPermissionStatusForType(y.PermissionType.WriteCameraRoll,e)})),s.default.contactsPermissionStatus().then((e=>{this._updateAndTriggerPermissionStatusForType(y.PermissionType.Contacts,e)})),s.default.locationPermissionStatus().then((e=>{this._updateAndTriggerPermissionStatusForType(y.PermissionType.Location,e)})),s.default.locationAlwaysPermissionStatus().then((e=>{this._updateAndTriggerPermissionStatusForType(y.PermissionType.LocationAlways,e)})),s.default.drawOverPermissionStatus().then((e=>{this._updateAndTriggerPermissionStatusForType(y.PermissionType.DrawOver,e,!1)})),s.default.readPhoneStatePermissionStatus().then((e=>{this._updateAndTriggerPermissionStatusForType(y.PermissionType.ReadPhoneState,e)})),s.default.readSmsPermissionStatus().then((e=>{this._updateAndTriggerPermissionStatusForType(y.PermissionType.ReadSms,e)})),s.default.sendSmsPermissionStatus().then((e=>{this._updateAndTriggerPermissionStatusForType(y.PermissionType.SendSms,e)})),s.default.receiveSmsPermissionStatus().then((e=>{this._updateAndTriggerPermissionStatusForType(y.PermissionType.ReceiveSms,e)})),s.default.backgroundExecutionStatus().then((e=>{this._updateAndTriggerPermissionStatusForType(y.PermissionType.BackgroundExecution,e)})),s.default.calendarPermissionStatus().then((e=>{this._updateAndTriggerPermissionStatusForType(y.PermissionType.Calendar,e)}))}_updateAndTriggerPermissionStatusForType(e,t,i=!0){this._systemPermissionStatus[e]!==t&&(this._systemPermissionStatus[e]=t,t===s.PermissionStatus.Granted&&this._prePermissionStatus[e]!==s.PermissionStatus.Granted&&i&&this._updatePrePermissionStatus(s.PermissionStatus.Granted,e),this.trigger(e))}_intPromptForPermissionType(e,t,i){return(t?this._inducePrePromptForType(e):l.Resolved(s.PermissionStatus.Granted)).then((t=>t===s.PermissionStatus.Denied?{prePermissionStatus:t,systemPermissionStatus:s.PermissionStatus.Unknown}:this._induceSystemPromptForType(e,i).then((e=>({prePermissionStatus:t,systemPermissionStatus:e})))))}_inducePrePromptForType(e){let t,i;switch(g.log(u.LogTraceArea.Permissions,"PermissionsStore._inducePrePromptForType "+e),e){case y.PermissionType.Camera:t=h.getString("CapturePermissions.PermissionCamera"),i=h.getString("CapturePermissions.PermissionCameraPrePrompt");break;case y.PermissionType.CameraRoll:case y.PermissionType.WriteCameraRoll:t=h.getString("CapturePermissions.PermissionCameraRoll"),i=h.getString("CapturePermissions.PermissionCameraRollPrePrompt");break;case y.PermissionType.Microphone:t=h.getString("CapturePermissions.PermissionMicrophone"),i=h.getString("CapturePermissions.PermissionMicrophonePrePrompt");break;case y.PermissionType.Contacts:t=h.getString("CapturePermissions.PermissionContacts"),i=h.getString("CapturePermissions.PermissionContactsPrePrompt");break;case y.PermissionType.Notifications:t=h.getString("CapturePermissions.PermissionNotifications"),i=h.getString("CapturePermissions.PermissionNotificationsPrePrompt");break;case y.PermissionType.Location:case y.PermissionType.LocationAlways:t=h.getString("CapturePermissions.PermissionLocation"),i=h.getString("CapturePermissions.PermissionLocationPrePrompt");break;case y.PermissionType.Calendar:t=h.getString("CapturePermissions.PermissionCalendar"),i=h.getString("CapturePermissions.PermissionCalendarPrePrompt")}return i?s.default.prePromptWithMessageAndTitle(i,t||""):(g.warn(u.LogTraceArea.Permissions,"PermissionsStore._inducePrePromptForType, no message found for "+e),l.Resolved(s.PermissionStatus.Granted))}_induceSystemPromptForType(e,t){let i="";if(e===y.PermissionType.MicrophoneAndCamera){i=`before prompting - Mic: ${s.PermissionStatus[this._systemPermissionStatus[y.PermissionType.Microphone]]||"Unknown"}, Cam: ${s.PermissionStatus[this._systemPermissionStatus[y.PermissionType.Microphone]]||"Unknown"}`}g.log(u.LogTraceArea.Permissions,`_induceSystemPromptForType - ${y.PermissionType[e]}, ${i}`);const n=!!p.default.getUserPreferencesLocal().wasInstructedAboutMicrophoneWebPermissions,o=!!p.default.getUserPreferencesLocal().wasInstructedAboutCameraWebPermissions,a=e=>t?s.SkipAugmentedWebPanelConfig.All:e&&!s.default.supportsGetPermissionState()?s.SkipAugmentedWebPanelConfig.InitialOnly:void 0,r=e=>{g.log(u.LogTraceArea.Permissions,`_induceSystemPromptForType - SkipAugmentedWebPanelConfig: ${void 0!==e?s.SkipAugmentedWebPanelConfig[e]:"undefined"}`)};let c;switch(e){case y.PermissionType.Camera:return c=a(o),r(c),s.default.requestCameraPermission(c);case y.PermissionType.CameraRoll:return s.default.requestCameraRollPermission();case y.PermissionType.WriteCameraRoll:return s.default.requestWriteCameraRollPermission();case y.PermissionType.Microphone:return c=a(n),r(c),s.default.requestMicrophonePermission(c);case y.PermissionType.Contacts:return s.default.requestContactsPermission();case y.PermissionType.Location:return s.default.requestLocationPermission();case y.PermissionType.LocationAlways:return s.default.requestLocationAlwaysPermission();case y.PermissionType.ReadPhoneState:return s.default.requestReadPhoneStatePermission();case y.PermissionType.SendSms:return s.default.requestSendSmsPermission();case y.PermissionType.ReceiveSms:return s.default.requestReceiveSmsPermission();case y.PermissionType.ReadSms:return s.default.requestReadSmsPermission();case y.PermissionType.Calendar:return s.default.requestCalendarPermission();case y.PermissionType.Notifications:return l.Rejected("Notifications prompting is not supported yet.");case y.PermissionType.MicrophoneAndCamera:return c=a(n&&o),r(c),s.default.requestMicrophoneAndCameraPermission(c);case y.PermissionType.DrawOver:return l.Resolved(s.PermissionStatus.Unknown);case y.PermissionType.BackgroundExecution:const t=h.getString("BatterySavePrompt.PromptText");return s.default.requestBackgroundExecutionPermission(t);case y.PermissionType.ScreenRecording:return s.default.requestScreenRecordingPermission();default:return _.default.switchStatementExhaustiveChecking(e),l.Resolved(s.PermissionStatus.Unknown)}}_updatePrePermissionStatus(e,t,i=!0){if(this._prePermissionStatus[t]===e)return!1;if(this._prePermissionStatus[t]=e,i)switch(t){case y.PermissionType.Camera:p.default.setUserPreferencesLocal({cameraPrePromptStatus:e});break;case y.PermissionType.CameraRoll:p.default.setUserPreferencesLocal({cameraRollPrePromptStatus:e});break;case y.PermissionType.WriteCameraRoll:p.default.setUserPreferencesLocal({writeCameraRollPrePromptStatus:e});break;case y.PermissionType.Microphone:p.default.setUserPreferencesLocal({microphonePrePromptStatus:e});break;case y.PermissionType.MicrophoneAndCamera:p.default.setUserPreferencesLocal({microphonePrePromptStatus:e}),p.default.setUserPreferencesLocal({cameraPrePromptStatus:e});break;case y.PermissionType.Contacts:p.default.setUserPreferencesLocal({contactsPrePromptStatus:e});break;case y.PermissionType.Notifications:p.default.setUserPreferencesLocal({notificationsPrePromptStatus:e});break;case y.PermissionType.Location:p.default.setUserPreferencesLocal({locationPrePromptStatus:e});break;case y.PermissionType.LocationAlways:p.default.setUserPreferencesLocal({locationAlwaysPrePromptStatus:e});break;case y.PermissionType.ReadPhoneState:case y.PermissionType.ReadSms:p.default.setUserPreferencesLocal({readSmsPrePromptStatus:e});break;case y.PermissionType.SendSms:p.default.setUserPreferencesLocal({sendSmsPrePromptStatus:e});break;case y.PermissionType.ReceiveSms:p.default.setUserPreferencesLocal({receiveSmsPrePromptStatus:e});break;case y.PermissionType.DrawOver:p.default.setUserPreferencesLocal({drawOverPermissionPrePromptStatus:e});break;case y.PermissionType.BackgroundExecution:p.default.setUserPreferencesLocal({backgroundExecutionPrePromptStatus:e});break;case y.PermissionType.Calendar:p.default.setUserPreferencesLocal({calendarPrePromptPermissionPrePromptStatus:e});break;case y.PermissionType.ScreenRecording:p.default.setUserPreferencesLocal({screenRecordingPrePromptStatus:e});break;default:_.default.switchStatementExhaustiveChecking(t)}return!0}};(0,n.__decorate)([(0,r.autoSubscribeWithKey)(t.TriggerKeys.NotificationsPrompt)],v.prototype,"isNotificationsPromptDismissed",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)([t.TriggerKeys.NotificationsPrompt,y.PermissionType.Notifications])],v.prototype,"shouldShowNotificationsPrompt",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"systemPromptHasNotBeenDisplayed",null),(0,n.__decorate)([r.autoSubscribe,(0,n.__param)(0,r.key)],v.prototype,"permissionStatus",null),(0,n.__decorate)([r.autoSubscribe,(0,n.__param)(0,r.key)],v.prototype,"getPermissionStatusFetchIfUnavailable",null),v=(0,n.__decorate)([r.AutoSubscribeStore],v),t.default=new v},82167:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(96486),s=i(16778),a=i(76975),r=i(88837),l=i(97691),c=i(89391),d=i(41190),u=i(62141),g=i(40276),h=i(75893),p=i(32183),m=i(46096),S=i(57347),C=i(36237),f=i(95527),y=i(14976),_=i(22538),v=i(4057),b=i(12770),T=i(26712),P=864e5,A=30*P;let k=class extends r.StoreBase{constructor(){super(),this._prefetchState={},this._ongoingRequests={},this._attemptedTokenRefresh={},this._dbPersistQueue=[],this._started=!1,this._debouncedFlushDbQueue=o.debounce((()=>{if(!this._started)return;if(this._dbPersistQueue.length<=0)return;const e=this._dbPersistQueue;this._dbPersistQueue=[],u.default.putImagePrefetchRecords(e)}),2e3),_.RegisterStartupable(this,"PrefetchedImagesStore")}startup(){return S.default.queueIdleTask("PrefetchedImagesStore",S.TaskTypeFlags.CpuIntensive,(()=>u.default.getAllImagePrefetchInfo().then((e=>{const t=Date.now(),i=o.partition(e,(e=>e.expiration>t));o.each(i[0],(e=>{e.state===h.ImagePrefetchState.Prefetched&&(this._prefetchState[e.url]=e)})),u.default.removeImagePrefetchInfo(o.map(i[1],(e=>e.url))),this._started=!0,this._debouncedFlushDbQueue()})))),l.Resolved()}isImagePrefetched(e,t=!0,i=!0){return this.getImagePrefetchState(e,t,i)===h.ImagePrefetchState.Prefetched}getImagePrefetchState(e,t=!0,i=!0){const n=this._prefetchState[e],s=n?n.state:h.ImagePrefetchState.None;if(s!==h.ImagePrefetchState.Prefetched){const i=this._stringifyState(s);C.log(m.LogTraceArea.PrefetchedImagesStore,`Image not prefetched, state: ${i}, trigger prefetch: ${t}, url: ${y.dev_unknownOmit(e)}`)}const r=c.default.getS4LMessagingFeaturesNoSubscription().nativeEmoticonCacheLoggingSampleRate,l=c.default.getS4LMessagingFeaturesNoSubscription().nativeEmoticonCacheTelemetrySampleRate,d=g.random(),u=r&&0===Math.floor(d*r),S=i&&l&&0===Math.floor(d*l);if(u||S){const t=s===h.ImagePrefetchState.Prefetched;a.default.isImageCached(e).then((i=>{if(u&&C.log(m.LogTraceArea.PrefetchedImagesStore,`Image present in native cache: ${i}, prefetched: ${t}, url: ${y.dev_unknownOmit(e)}`),S){const t=p.getBaseUrl(),n=t&&o.startsWith(e,t)?new f.QueryPrefetchedEmoticonImage(s,i,e):new f.QueryPrefetchedImage(s,i);C.track(n)}}))}return this._getImagePrefetchStateImpl(e,t)}_getImagePrefetchStateImpl(e,t){if(!this._prefetchState[e])return t&&this.prefetch(e),h.ImagePrefetchState.None;if(t){const t=this._prefetchState[e];if(Date.now()+A-t.expiration>P&&(t.expiration=Date.now()+A,this._dbPut(t)),t.state===h.ImagePrefetchState.Failed&&Date.now()-t.lastUpdate>3e5)return t.retryCount=0,this.prefetch(e),h.ImagePrefetchState.Prefetching}return this._prefetchState[e].state}_dbPut(e){o.remove(this._dbPersistQueue,(t=>t.url===e.url)),this._dbPersistQueue.push(e),this._debouncedFlushDbQueue()}_delayRetry(e){b.default.setTimeout((()=>{this.prefetch(e)}),1e3)}_stringifyState(e){return h.ImagePrefetchState[e]||e.toString()}_setRecordState(e,t){if(t!==e.state){const i=this._stringifyState(e.state),n=this._stringifyState(t);C.log(m.LogTraceArea.PrefetchedImagesStore,`Image prefetch state updated ${i}->${n}, url: ${y.dev_unknownOmit(e.url)}`),e.state=t}}prefetch(e){if(!T.default.isUrlValid(e))return C.warn(m.LogTraceArea.PrefetchedImagesStore,`${y.dev_unknownOmit(e)} is not a valid url`),l.Resolved(!1);if(this._ongoingRequests[e])return this._ongoingRequests[e];let t;return this._prefetchState[e]?(t=Object.assign({},this._prefetchState[e]),this._setRecordState(t,h.ImagePrefetchState.Prefetching),t.expiration=Date.now()+A):(t={url:e,state:h.ImagePrefetchState.None,retryCount:0,expiration:Date.now()+A},this._setRecordState(t,h.ImagePrefetchState.Prefetching),this._prefetchState[e]=t),this._dbPut(t),this._ongoingRequests[e]=s.Image.prefetch(e).then((()=>(this._setRecordState(t,h.ImagePrefetchState.Prefetched),t.lastUpdate=Date.now(),this._prefetchState[e]=t,this._dbPut(t),this.trigger(e),delete this._ongoingRequests[e],!0))).fail((i=>{this._prefetchState[e].retryCount<3?(this._setRecordState(t,h.ImagePrefetchState.Failed),++t.retryCount,t.lastUpdate=Date.now(),this._prefetchState[e]=t,this._dbPut(t),C.log(m.LogTraceArea.PrefetchedImagesStore,`Image failed (err: ${v.default.errorAsString(i)}) to load: ${y.dev_unknownOmit(e)}, nth try: ${this._prefetchState[e].retryCount}`),this._attemptedTokenRefresh[e]?(C.log(m.LogTraceArea.PrefetchedImagesStore,"Image already attempted to refresh the token before this error response.",y.dev_unknownOmit(e)),this._delayRetry(e)):(this._attemptedTokenRefresh[e]=!0,d.attemptTokenRefresh(e).always((()=>{this._delayRetry(e)})))):C.log(m.LogTraceArea.PrefetchedImagesStore,`Image failed to load: ${y.dev_unknownOmit(e)}`),this.trigger(e),delete this._ongoingRequests[e]})),this._ongoingRequests[e]}test_reset(){this._prefetchState={},this._ongoingRequests={},this._attemptedTokenRefresh={},this._dbPersistQueue=[],this._started=!1}};(0,n.__decorate)([r.autoSubscribe,(0,n.__param)(0,r.key)],k.prototype,"isImagePrefetched",null),(0,n.__decorate)([r.autoSubscribe,(0,n.__param)(0,r.key)],k.prototype,"getImagePrefetchState",null),k=(0,n.__decorate)([r.AutoSubscribeStore],k),t.default=new k},28377:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(96486),s=i(2604),a=i(88837),r=i(97691),l=i(62141),c=i(46096),d=i(72685),u=i(36237),g=i(98754),h=i(61253),p=i(78735),m=i(72816),S=i(69156),C=i(81736),f=i(93818),y=i(22538),_=i(78262),v="IncludeInSearch",b="SyncAddressBook",T="AvatarVisibility",P="PrivacyOptionsStore";let A=class extends a.StoreBase{constructor(){super(),this._needToFetchIncludeMeInSearchOption=!0,this._needToFetchAvatarPolicy=!0,this.SyncAddressBookPrivacySettingKey="SyncAddressBook",this._refreshOptions=()=>r.all([this._fetchAvatarPolicy(),this._fetchIncludeMeInSearchPrivacyOption()]).then(o.noop),y.RegisterStartupable(this,"PrivacyOptionsStore",[g.default,p.default,C.default])}startup(){const e=!!g.default.getData(l.InternalKeys.SyncAddressBookEnabled);this._syncAddressBookEnabled=e;const t=p.default.getUserPreferencesLocal();return t.forceAddressBookSyncNextStartup&&C.default.permissionStatus(_.PermissionType.Contacts)!==s.PermissionStatus.Granted&&p.default.setUserPreferencesLocal({forceAddressBookSyncNextStartup:!1}),this._includeMeInSearchEnabled=t.includeMeInSearchEnabled,this._searchPrivacyOptions=t.searchPrivacyOptions||{searchable:!1,recommendable:!1},this._avatarPolicy=t.avatarPolicy,d.default.setRefreshOptions(P,{interval:864e5,taskTypeFlags:d.TaskTypeFlags.UsesNetworking,callback:this._refreshOptions}),r.Resolved()}refreshNow(){y.EnsureStarted(this).then((()=>{d.default.fireEarly(P)}))}_fetchIncludeMeInSearchPrivacyOption(){return this._needToFetchIncludeMeInSearchOption=!1,m.default.getIncludeMeInSearchPrivacyOption().then((e=>{e.searchable===this._includeMeInSearchEnabled&&(0,h.default)(this._searchPrivacyOptions,e)||(p.default.setUserPreferencesLocal({includeMeInSearchEnabled:e.searchable,searchPrivacyOptions:e}),this._searchPrivacyOptions=e,this._includeMeInSearchEnabled=e.searchable,this.trigger(v))})).catch((e=>{this._needToFetchIncludeMeInSearchOption=!0}))}getIncludeMeInSearchPrivacyOption(e){return e||this._needToFetchIncludeMeInSearchOption?(this._fetchIncludeMeInSearchPrivacyOption(),this._searchPrivacyOptions):this._searchPrivacyOptions}setIncludeMeInSearchPrivacyOption(e){if((0,h.default)(this._searchPrivacyOptions,e))return;const{searchable:t,recommendable:i}=e;p.default.setUserPreferencesLocal({includeMeInSearchEnabled:t,searchPrivacyOptions:e}),this._includeMeInSearchEnabled=t,this._searchPrivacyOptions=e,this.trigger(v),m.default.setIncludeMeInSearchPrivacyOption(e).catch((e=>{u.log(c.LogTraceArea.GenericUnsafe,"Failed to set IncludeMeInSearch privacy option",e),this._searchPrivacyOptions={searchable:!t,recommendable:!i},this._includeMeInSearchEnabled=!t,this.trigger(v)}))}getSyncAddressBookPrivacySetting(){return C.default.permissionStatus(_.PermissionType.Contacts)===s.PermissionStatus.Granted&&this._syncAddressBookEnabled}setSyncAddressBookPrivacySetting(e){const t=this._syncAddressBookEnabled;this._syncAddressBookEnabled=e,g.default.putData(l.InternalKeys.SyncAddressBookEnabled,e),t!==e&&this.trigger(b)}_fetchAvatarPolicy(){return this._needToFetchAvatarPolicy=!1,m.default.getAvatarPolicy().then((e=>{this._avatarPolicy!==e&&(p.default.setUserPreferencesLocal({avatarPolicy:e}),this._avatarPolicy=e,this.trigger(T))})).catch((e=>{this._needToFetchAvatarPolicy=!0}))}getAvatarPolicy(e){return e||this._needToFetchAvatarPolicy?(this._fetchAvatarPolicy(),this._avatarPolicy):this._avatarPolicy}setAvatarPolicy(e,t){if(this._avatarPolicy===e)return;const i=this._avatarPolicy;this._avatarPolicy=e,this.trigger(T),m.default.setAvatarPolicy(e).then((i=>{p.default.setUserPreferencesLocal({avatarPolicy:e}),u.track(new f.AvatarPolicyChanged(e,t,!0))})).catch((n=>{u.track(new f.AvatarPolicyChanged(e,t,!1,n.statusCode)),u.log(c.LogTraceArea.GenericUnsafe,"Failed to set AvatarPolicy privacy option",n),this._avatarPolicy=i,this.trigger(T)}))}test_reset(){this._avatarPolicy=S.OptionsServiceAvatarPolicyValueType.BUDDIES_OR_AUTHORIZED_CAN_SEE,this._needToFetchAvatarPolicy=!0,this._includeMeInSearchEnabled=!1,this._needToFetchIncludeMeInSearchOption=!0}};(0,n.__decorate)([(0,a.autoSubscribeWithKey)(v)],A.prototype,"getIncludeMeInSearchPrivacyOption",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(b)],A.prototype,"getSyncAddressBookPrivacySetting",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(T)],A.prototype,"getAvatarPolicy",null),A=(0,n.__decorate)([a.AutoSubscribeStore],A),t.default=new A},19316:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(88837),s=i(97691),a=i(22538);let r=class extends o.StoreBase{constructor(){super(),this._reportProblemStatus={},a.RegisterStartupable(this,"ReportProblemStore")}startup(){return s.Resolved()}getReportProblemStore(){return this._reportProblemStatus}setReportProblemStatus(e,t,i){this._reportProblemStatus={screenshotUri:e,vsoTags:t,reportId:i}}};(0,n.__decorate)([o.autoSubscribe],r.prototype,"getReportProblemStore",null),r=(0,n.__decorate)([o.AutoSubscribeStore],r),t.default=new r},17791:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(74958),s=i(61955),a=i(16778),r=i(88837),l=i(74634),c=i(97691),d=i(89391),u=i(46096),g=i(57347),h=i(36237),p=i(76192),m=i(22538),S=i(349),C=i(27795),f={[a.Types.DeviceNetworkType.Unknown]:!0,[a.Types.DeviceNetworkType.Wifi]:!0};let y=class extends r.StoreBase{constructor(){super(),this.connectivityChangedEvent=new l.default,this._reportedConnected=!0,this._reportedNetworkType=a.Types.DeviceNetworkType.Unknown,this._passedConnectivityCheck=!0,this._connectivityCheckInProgress=!1,this._canBypassNetworkAvailability=!1,m.RegisterStartupable(this,"ReportedConnectivityStore")}startup(){let e=!1;return a.Network.connectivityChangedEvent.subscribe((t=>{e=!0,this._passedConnectivityCheck=!0,this._connectivityCheckInProgress=!1,this._fetchNetworkType(),this._reportedConnectivityChanged(t)})),this._fetchNetworkType(),a.Network.isConnected().then((t=>{e||(e=!0,this._reportedConnectivityChanged(t),t&&this._performConnectivityCheck(),g.default.updateAppState({networkingAvailable:this.isNetworkingAvailable()}))})),this.subscribe((()=>{g.default.updateAppState({networkingAvailable:this.isNetworkingAvailable()})})),c.Resolved()}isNetworkConnected(){return this._reportedConnected||this._canBypassNetworkAvailability}isNetworkingAvailable(){return this.isNetworkConnected()&&this._passedConnectivityCheck}getNetworkType(){return this._reportedNetworkType}getPassedConnectivityCheck(){return this._passedConnectivityCheck}runConnectivityCheck(){this._performConnectivityCheck()}forcePassedConnectivityCheck(){this._connectivityCheckInProgress=!1,this._passedConnectivityCheck||(this._passedConnectivityCheck=!0,this.trigger())}_performConnectivityCheck(){if(this._connectivityCheckInProgress)return void h.log(u.LogTraceArea.ReportedConnectivityStore,"Captive portal check already in progress");if(!s.default.isDetectionSupported())return void h.log(u.LogTraceArea.ReportedConnectivityStore,"Captive portal check not supported");let e;this._connectivityCheckInProgress=!0,void 0!==this._fetchNetworkDefer?(h.log(u.LogTraceArea.ReportedConnectivityStore,"Captive portal waiting for network type"),e=this._fetchNetworkDefer.promise()):e=c.Resolved(this._reportedNetworkType),e.then((e=>{if(!f[e])return h.log(u.LogTraceArea.ReportedConnectivityStore,"Network does not support captive portal"),void this.forcePassedConnectivityCheck();const t=d.default.getConfigSettingsNoSubscription().captivePortalDetection;if(!t.enabled)return void this.forcePassedConnectivityCheck();h.log(u.LogTraceArea.ReportedConnectivityStore,"Performing connectivity/captive portal check with fetch");s.default.getClient(t).checkConnectivity().then((e=>{if(!this._connectivityCheckInProgress)return;h.log(u.LogTraceArea.ReportedConnectivityStore,"Captive portal check finished; connected: "+(e.connected?"Yes":"No")+"; Status code: "+e.statusCode+"; Response length: "+e.responseLength);const t=this._reportedConnected,i=this._passedConnectivityCheck;this._passedConnectivityCheck!==e.connected&&(this._passedConnectivityCheck=e.connected,e.connected&&!this._reportedConnected?this._reportedConnectivityChanged(!0):this.trigger());const n=new p.CaptivePortalCheckEvent(e.connected,t,i);h.track(n)})).catch((e=>{if(!this._connectivityCheckInProgress)return;h.log(u.LogTraceArea.ReportedConnectivityStore,"Captive portal check failed, defaulting to success",o.pii.Omit(e));const t=this._reportedConnected,i=this._passedConnectivityCheck;this.forcePassedConnectivityCheck();const n=new p.CaptivePortalCheckFailureEvent(t,i,e&&e.statusText,!(!e||!e.timedOut));h.track(n);const s=new C.DevDebug("CaptivePortalCheck",e.toString());h.track(s)})).finally((()=>{this._connectivityCheckInProgress=!1}))})).catch((e=>{h.error(u.LogTraceArea.ReportedConnectivityStore,"Captive portal waited for network type, got error"),this._connectivityCheckInProgress=!1}))}_reportedConnectivityChanged(e){this._reportedConnected!==e&&(h.log(u.LogTraceArea.ReportedConnectivityStore,"connectivity has changed: Connected = "+e),e&&this._performConnectivityCheck(),this._reportedConnected=e,this.connectivityChangedEvent.fire(this._reportedConnected),this.trigger())}_fetchNetworkType(){const e=Date.now();this._fetchNetworkLastStartedAt=e,void 0===this._fetchNetworkDefer&&(this._fetchNetworkDefer=c.Defer()),c.all([a.Network.getType(),s.default.canBypassNetworkAvailability()]).then((([e,t])=>{this._reportedNetworkType=e,this._canBypassNetworkAvailability=t,S.setReportedNetworkType(e),h.log(u.LogTraceArea.ReportedConnectivityStore," _fetchNetworkType() type: "+a.Types.DeviceNetworkType[e])})).catch((()=>{h.log(u.LogTraceArea.ReportedConnectivityStore,"Failed to get Network type"),this._reportedNetworkType=a.Types.DeviceNetworkType.Unknown,S.setReportedNetworkType(a.Types.DeviceNetworkType.Unknown)})).finally((()=>{void 0!==this._fetchNetworkDefer&&e>=this._fetchNetworkLastStartedAt&&(this._fetchNetworkDefer.resolve(this._reportedNetworkType),this._fetchNetworkDefer=void 0)}))}test_reset(){this._reportedConnected=!0,this._reportedNetworkType=a.Types.DeviceNetworkType.Unknown,this._passedConnectivityCheck=!0,this._connectivityCheckInProgress=!1}};(0,n.__decorate)([r.autoSubscribe],y.prototype,"isNetworkConnected",null),(0,n.__decorate)([r.autoSubscribe],y.prototype,"isNetworkingAvailable",null),(0,n.__decorate)([r.autoSubscribe],y.prototype,"getNetworkType",null),(0,n.__decorate)([r.autoSubscribe],y.prototype,"getPassedConnectivityCheck",null),y=(0,n.__decorate)([r.AutoSubscribeStore],y),t.default=new y},29130:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceSize=t.TriggerKeys=void 0;const n=i(70655),o=i(96486),s=i(31844),a=i(16778),r=i(88837),l=i(97691),c=i(60),d=i(98278),u=i(46096),g=i(36237),h=(i(46929),i(72997)),p=i(14976),m=i(22538),S=i(4057),C=i(40363),f=i(78262),y=i(53374);i(44330);var _,v;!function(e){e[e.Orientation=0]="Orientation",e[e.ResponsiveWidth=1]="ResponsiveWidth",e[e.Width=2]="Width",e[e.Height=3]="Height",e[e.ContentSizeMultiplier=4]="ContentSizeMultiplier",e[e.SplitScreenIPad=5]="SplitScreenIPad"}(_=t.TriggerKeys||(t.TriggerKeys={})),function(e){e.Small="Small",e.Medium="Medium",e.Large="Large"}(v=t.DeviceSize||(t.DeviceSize={}));const b=320,T="splitScreenSubscriptionKey";let P=class extends r.StoreBase{constructor(){super(),this._rawWidth={[d.MainRootViewId]:0},this._rawHeight={[d.MainRootViewId]:0},this._responsiveWidth={[d.MainRootViewId]:f.ResponsiveWidth.Medium},this._deviceOrientation={[d.MainRootViewId]:s.DeviceOrientation.Landscape},this._contentSizeMultiplier=1,this._isSplitScreenIPad=!1,this._updateSplitScreen=e=>{this._isSplitScreenIPad!==e&&(g.log(u.LogTraceArea.ResponsiveWidthStore,"iPad split screen updated: "+e),this._isSplitScreenIPad=e,this.trigger(_.SplitScreenIPad))},m.RegisterStartupable(this,"ResponsiveWidthStore")}startup(){if(a.UserInterface.getContentSizeMultiplier().then((e=>{e&&(this._contentSizeMultiplier=e)})),a.UserInterface.contentSizeMultiplierChangedEvent.subscribe((e=>{e&&e!==this._contentSizeMultiplier&&(this._contentSizeMultiplier=e,this.trigger(_.ContentSizeMultiplier))})),C.default.getIOSModel()===u.IOSModel.iPad&&(s.default.isSplitScreen().then((e=>{g.log(u.LogTraceArea.ResponsiveWidthStore,"Split screen initial value: "+e),this._updateSplitScreen(e)})),s.default.addSplitScreenEventListener(T,this._updateSplitScreen)),!this._rawWidth[d.MainRootViewId]||!this._rawHeight[d.MainRootViewId]||C.default.getPlatformType()!==u.PlatformType.iOS){const{width:e,height:t}=a.UserInterface.measureWindow();this.putWindowSize(e,t,d.MainRootViewId)}return C.default.getPlatformType()===u.PlatformType.Android&&(this._activationSubToken=c.default.subscribeForChanges("ResponsiveWidthStore",(e=>{if(e===a.Types.AppActivationState.Active){const e=y.default.newCauseId();g.log(u.LogTraceArea.ResponsiveWidthStore,"App state changed, causeId: "+e),this._checkDeviceOrientation(e)}}))),l.Resolved()}putWindowSize(e,t,i){const n=[],o=y.default.newCauseId();let a=this._rawWidth[i]!==e;if(a){this._rawWidth[i]=e,g.log(u.LogTraceArea.ResponsiveWidthStore,"New width: "+e+" rootViewId: "+p.mriOrId(i)+" causeId: "+o),n.push((0,r.formCompoundKey)(i,_.Width));const t=h.default.responsiveWidthForSize(e);this._responsiveWidth[i]!==t&&(this._responsiveWidth[i]=t,g.log(u.LogTraceArea.ResponsiveWidthStore,"New Responsive Width: "+t+" rootViewId: "+p.mriOrId(i)+" causeId: "+o),n.push((0,r.formCompoundKey)(i,_.ResponsiveWidth)))}this._rawHeight[i]!==t&&(this._rawHeight[i]=t,g.log(u.LogTraceArea.ResponsiveWidthStore,"New height: "+t+" rootViewId: "+p.mriOrId(i)+" causeId: "+o),n.push((0,r.formCompoundKey)(i,_.Height)));const l=this.windowDimensionsNoSubscription(i),c=l.width>l.height?s.DeviceOrientation.Landscape:s.DeviceOrientation.Portrait;c!==this._deviceOrientation[i]&&(this._deviceOrientation[i]=c,g.log(u.LogTraceArea.ResponsiveWidthStore,"New orientation from width update: "+c+" window dimensions, w: "+l.width+" h: "+l.height+" rootViewId: "+p.mriOrId(i)+" causeId: "+o),n.push((0,r.formCompoundKey)(i,_.Orientation))),this.trigger(n),a&&C.default.getPlatformType()===u.PlatformType.Android&&this._checkDeviceOrientation(o)}destroy(){this._activationSubToken&&(this._activationSubToken.unsubscribe(),this._activationSubToken=void 0),s.default.removeSplitScreenEventListener(T)}getWidth(e){return this._rawWidth[e]||0}getWidthNoSubscription(e){return this._rawWidth[e]||0}getHeight(e){return this._rawHeight[e]||0}getHeightNoSubscription(e){return this._rawHeight[e]||0}getResponsiveWidth(e){return this._responsiveWidthForRootViewId(e)}isMobileScreenSize(e){return this._responsiveWidthForRootViewId(e)<=f.ResponsiveWidth.Tiny}getDeviceOrientation(e){return this._deviceOrientation[e]}isTinyScreenSizeNoSubscription(e){return this._responsiveWidthForRootViewId(e)<=f.ResponsiveWidth.Tiny}isSmallOrTinyScreenSize(e){return this._responsiveWidthForRootViewId(e)<=f.ResponsiveWidth.Small}isMinDesktopWidth(e){return this._responsiveWidthForRootViewId(e)<=f.ResponsiveWidth.MinDesktop}getContentSizeMultiplier(){return this._contentSizeMultiplier}isSmallDevice(e){return this.isSmallDeviceNoSubscription(e)}deviceSize(e){return this.isSmallDeviceNoSubscription(e)?v.Small:this.isMediumPhoneDeviceNoSubscription(e)?v.Medium:v.Large}isSplitScreenIPad(){return this._isSplitScreenIPad}isSmallDesktopHeightView(e){return this.isHeightSmallerThanThresholdNoSubscription(637,e)}isHeightSmallerThanThreshold(e,t){const i=this.getHeight(t);return i||g.log(u.LogTraceArea.ResponsiveWidthStore,"No window height dimension for rootViewId:"+p.mriOrId(t)),i<=e}isWidthSmallerThanThreshold(e,t){const i=this.getWidth(t);return i||g.log(u.LogTraceArea.ResponsiveWidthStore,"No window width dimension for rootViewId:"+p.mriOrId(t)),i<=e}isSplitScreenIPadNoSubscription(){return this._isSplitScreenIPad}isSmallDeviceNoSubscription(e){return this.isWidthSmallerThanThresholdNoSubscription(b,e)||this.isHeightSmallerThanThresholdNoSubscription(b,e)}isMediumPhoneDeviceNoSubscription(e){const t=this.windowDimensionsNoSubscription(e);return t.width&&t.height||g.log(u.LogTraceArea.ResponsiveWidthStore,"No window width or height dimension for rootViewId:"+p.mriOrId(e)),t.width>b&&t.width<=400||t.height>b&&t.height<=400}isHeightSmallerThanThresholdNoSubscription(e,t){const i=this.windowDimensionsNoSubscription(t);return i.height||g.log(u.LogTraceArea.ResponsiveWidthStore,"No window height dimension for rootViewId:"+p.mriOrId(t)),i.height<=e}isWidthSmallerThanThresholdNoSubscription(e,t){const i=this.windowDimensionsNoSubscription(t);return i.width||g.log(u.LogTraceArea.ResponsiveWidthStore,"No window width dimension for rootViewId:"+p.mriOrId(t)),i.width<=e}windowDimensionsNoSubscription(e){return e===d.MainRootViewId?a.UserInterface.measureWindow():a.UserInterface.measureWindow(e)}_checkDeviceOrientation(e){s.default.currentOrientation().then((t=>{g.log(u.LogTraceArea.ResponsiveWidthStore,"DeviceUtilities.currentOrientation: "+t+" causeId: "+e),t!==this._deviceOrientation[d.MainRootViewId]&&(this._deviceOrientation[d.MainRootViewId]=t,g.log(u.LogTraceArea.ResponsiveWidthStore,"New orientation from DeviceUtilities: "+t+" causeId: "+e),this.trigger(_.Orientation))})).catch((t=>{g.warn(u.LogTraceArea.ResponsiveWidthStore,"DeviceUtilities.currentOrientation failed: "+S.default.errorAsString(t)+" causeId: "+e)}))}_responsiveWidthForRootViewId(e){let t=this._responsiveWidth[e];return o.isUndefined(t)&&(t=f.ResponsiveWidth.Medium),t}};(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.Width),(0,n.__param)(0,r.key)],P.prototype,"getWidth",null),(0,n.__decorate)([r.disableWarnings],P.prototype,"getWidthNoSubscription",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.Height),(0,n.__param)(0,r.key)],P.prototype,"getHeight",null),(0,n.__decorate)([r.disableWarnings],P.prototype,"getHeightNoSubscription",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.ResponsiveWidth),(0,n.__param)(0,r.key)],P.prototype,"getResponsiveWidth",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.ResponsiveWidth),(0,n.__param)(0,r.key)],P.prototype,"isMobileScreenSize",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.Orientation),(0,n.__param)(0,r.key)],P.prototype,"getDeviceOrientation",null),(0,n.__decorate)([r.disableWarnings],P.prototype,"isTinyScreenSizeNoSubscription",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.ResponsiveWidth),(0,n.__param)(0,r.key)],P.prototype,"isSmallOrTinyScreenSize",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.ResponsiveWidth),(0,n.__param)(0,r.key)],P.prototype,"isMinDesktopWidth",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.ContentSizeMultiplier)],P.prototype,"getContentSizeMultiplier",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.Width),(0,n.__param)(0,r.key)],P.prototype,"isSmallDevice",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.Width),(0,n.__param)(0,r.key)],P.prototype,"deviceSize",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.SplitScreenIPad)],P.prototype,"isSplitScreenIPad",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.Height),(0,n.__param)(0,r.key)],P.prototype,"isSmallDesktopHeightView",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.Height),(0,n.__param)(1,r.key)],P.prototype,"isHeightSmallerThanThreshold",null),(0,n.__decorate)([(0,r.autoSubscribeWithKey)(_.Width),(0,n.__param)(1,r.key)],P.prototype,"isWidthSmallerThanThreshold",null),(0,n.__decorate)([r.disableWarnings],P.prototype,"isSplitScreenIPadNoSubscription",null),(0,n.__decorate)([r.disableWarnings],P.prototype,"isSmallDeviceNoSubscription",null),(0,n.__decorate)([r.disableWarnings],P.prototype,"isMediumPhoneDeviceNoSubscription",null),(0,n.__decorate)([r.disableWarnings],P.prototype,"isHeightSmallerThanThresholdNoSubscription",null),(0,n.__decorate)([r.disableWarnings],P.prototype,"isWidthSmallerThanThresholdNoSubscription",null),(0,n.__decorate)([r.disableWarnings],P.prototype,"windowDimensionsNoSubscription",null),P=(0,n.__decorate)([r.AutoSubscribeStore],P);const A=new P;t.default=A},51070:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(31844),s=i(16778),a=i(88837),r=i(97691),l=(i(60),i(98278)),c=i(46096),d=i(36237),u=(i(61253),i(81115)),g=i(22538),h=i(69203),p=i(4057);var m;!function(e){e[e.StatusBarVisibility=0]="StatusBarVisibility",e[e.StatusBarHeight=1]="StatusBarHeight",e[e.SafeAreaInsets=2]="SafeAreaInsets"}(m||(m={}));let S=class extends a.StoreBase{constructor(){super(),g.RegisterStartupable(this,"SafeAreaStore",[h.default])}startup(){return this._leavePaddingForStatusBar=s.StatusBar.isOverlay()&&!h.default.statusBarHiddenInLandscape(),h.default.statusBarUpdated.subscribe((e=>{this._leavePaddingForStatusBar!==!e&&(this._leavePaddingForStatusBar=s.StatusBar.isOverlay()&&!e,this.trigger(m.StatusBarVisibility))})),this._statusBarHeight=0,this._keepStatusBarVisible=this._shouldKeepStatusBarVisible(),r.Resolved()}leavePaddingForStatusBar(){return this._leavePaddingForStatusBar}statusBarHeight(){return this._topInset()}statusBarPadding(){return this._leavePaddingForStatusBar?this._topInset():0}statusBarPaddingNoSubscription(){return this._leavePaddingForStatusBar?this._topInset():0}bottomSafeAreaInset(e){return this._safeAreaInsets?Math.max(0,this._safeAreaInsets.bottom-(e||0)):0}horizontalPaddingStyle(e){const t=this.horizontalInsets(e);if(t!==l.HorizontalInsetZero)return u.default.horizontalPaddingStyle(t)}horizontalInsets(e){if(!this._safeAreaInsets||!this._safeAreaInsets.left&&!this._safeAreaInsets.right)return l.HorizontalInsetZero;if(e){const t=Math.max(0,this._safeAreaInsets.left-e.left),i=Math.max(0,this._safeAreaInsets.right-e.right);return t||i?{left:t,right:i}:l.HorizontalInsetZero}return this._safeAreaInsets}keepStatusBarVisible(){return this._keepStatusBarVisible}keepStatusBarVisibleNoSubscription(){return this._keepStatusBarVisible}hasNonZeroSafeAreaInsets(){return this._hasNonZeroSafeAreaInsets()}hasNonZeroSafeAreaInsetsNoSubscription(){return this._hasNonZeroSafeAreaInsets()}_refreshSafeAreaInsets(){d.log(c.LogTraceArea.GenericUnsafe,"SafeAreaStore _refreshSafeAreaInsets"),o.default.safeAreaInsets().then((e=>{e&&(d.log(c.LogTraceArea.GenericUnsafe,"SafeAreaStore safeAreaInsets: "+p.default.asString(e)),this._safeAreaInsets=e,this._keepStatusBarVisible=this._shouldKeepStatusBarVisible(),this.trigger(m.SafeAreaInsets))})).catch((e=>{d.warn(c.LogTraceArea.GenericUnsafe,"SafeAreaStore safeAreaInsets failed: "+p.default.errorAsString(e))}))}_topInset(){return(this._safeAreaInsets?this._safeAreaInsets.top:0)||this._statusBarHeight}_shouldKeepStatusBarVisible(){return!s.StatusBar.isOverlay()||this._hasNonZeroSafeAreaInsets()&&this._topInset()>this._defaultStatusBarHeight()+10}_hasNonZeroSafeAreaInsets(){return!!this._safeAreaInsets&&!!(this._safeAreaInsets.left||this._safeAreaInsets.top||this._safeAreaInsets.right||this._safeAreaInsets.bottom)}_defaultStatusBarHeight(){return 0}};(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.StatusBarVisibility)],S.prototype,"leavePaddingForStatusBar",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)([m.StatusBarHeight,m.SafeAreaInsets])],S.prototype,"statusBarHeight",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)([m.StatusBarVisibility,m.StatusBarHeight,m.SafeAreaInsets])],S.prototype,"statusBarPadding",null),(0,n.__decorate)([a.disableWarnings],S.prototype,"statusBarPaddingNoSubscription",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.SafeAreaInsets)],S.prototype,"bottomSafeAreaInset",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.SafeAreaInsets)],S.prototype,"horizontalPaddingStyle",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.SafeAreaInsets)],S.prototype,"horizontalInsets",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.StatusBarHeight)],S.prototype,"keepStatusBarVisible",null),(0,n.__decorate)([a.disableWarnings],S.prototype,"keepStatusBarVisibleNoSubscription",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(m.SafeAreaInsets)],S.prototype,"hasNonZeroSafeAreaInsets",null),(0,n.__decorate)([a.disableWarnings],S.prototype,"hasNonZeroSafeAreaInsetsNoSubscription",null),S=(0,n.__decorate)([a.AutoSubscribeStore],S),t.default=new S},36150:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=(i(16778),i(88837)),s=i(97691),a=i(46096),r=i(36237),l=i(22538);let c=class extends o.StoreBase{constructor(){super(),this._screenReaderEnabled=!1,l.RegisterStartupable(this,"ScreenReaderStatusStore")}startup(){return this._screenReaderEnabled=!1,s.Resolved()}isMobileScreenReaderEnabled(){return this._screenReaderEnabled}_reportScreenReaderStatus(e){this._screenReaderEnabled!==e&&(r.log(a.LogTraceArea.GenericUnsafe,"ScreenReaderDetectionStore Change: isEnabled = "+e),this._screenReaderEnabled=e,this.trigger())}};(0,n.__decorate)([o.autoSubscribe],c.prototype,"isMobileScreenReaderEnabled",null),c=(0,n.__decorate)([o.AutoSubscribeStore],c),t.default=new c},83181:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SecondaryWindowLoginType=t.TriggerKeys=t.StartupUIState=void 0;const n=i(70655),o=i(96486),s=i(88837),a=i(97691),r=i(89391),l=i(46096),c=i(17379),d=i(36237),u=i(61253),g=i(22538),h=i(35478);var p,m;!function(e){e[e.SplashDisplayed=0]="SplashDisplayed",e[e.LoginDisplayed=1]="LoginDisplayed",e[e.StartupComplete=2]="StartupComplete"}(p=t.StartupUIState||(t.StartupUIState={})),function(e){e[e.CallingStatusKey=0]="CallingStatusKey",e[e.UIDisplayedKey=1]="UIDisplayedKey",e[e.LoginSessionKey=2]="LoginSessionKey",e[e.StartupUIStateKey=3]="StartupUIStateKey",e[e.SecondaryWindowLoginStateKey=4]="SecondaryWindowLoginStateKey"}(m=t.TriggerKeys||(t.TriggerKeys={})),function(e){e[e.MSALogin=0]="MSALogin",e[e.QuickSignOn=1]="QuickSignOn"}(t.SecondaryWindowLoginType||(t.SecondaryWindowLoginType={}));let S=class extends s.StoreBase{constructor(){super(),this._isUIDisplayed=!1,this._telemetryServiceResumed=!1,this._telemetryServiceDebounce=o.debounce((()=>{this._telemetryServiceResumed=!0,h.default.resume()}),r.default.getS4LFeatures().scheduler.telemetryServiceResumeTimeout),this._inCall=!1,this._inCallEstablishment=!1,this._loggedInThisSession=!1,this._startupUIState=p.SplashDisplayed,this.subscribe((()=>{c.default.updateAppState({uiDisplayed:this._isUIDisplayed})}),m.UIDisplayedKey),this.subscribe((()=>{c.default.updateAppState({inCall:this._inCall,inCallEstablishment:this._inCallEstablishment})}),m.CallingStatusKey)}test_reset(){this._isUIDisplayed=!1,this._inCall=!1,this._inCallEstablishment=!1,this._loggedInThisSession=!1}internal_uiIsDisplayed(){this._isUIDisplayed=!0,this.trigger(m.UIDisplayedKey)}internal_userLoggedIn(){this._loggedInThisSession=!0,this.trigger(m.LoginSessionKey)}internal_getLoginDisplayedParameters(){return this._loginDisplayedParameters}isUIDisplayed(){return this._isUIDisplayed}isLoginSession(){return this._loggedInThisSession}isInCallEstablishment(){return this._isInCallEstablishmentNoSubscription()}_isInCallEstablishmentNoSubscription(){return this._inCallEstablishment}isInCall(){return this._isInCallNoSubscription()}_isInCallNoSubscription(){return this._inCall||this._inCallEstablishment}internal_setCallStatus(e){const t=e!==this._inCall;e!==this._inCall&&(d.log(l.LogTraceArea.Startup,"ServiceStateStore: Setting inCall to "+e),this._inCall=e,this._maybeResolveCallingPromises()),t&&this.trigger(m.CallingStatusKey)}internal_setCallEstablishmentStatus(e,t){e!==this._inCallEstablishment&&(d.log(l.LogTraceArea.Startup,"ServiceStateStore: Set inCallEstablishment to "+e+" reason: "+t),this._inCallEstablishment=e,r.default.getS4LFeatures().scheduler.enableTelemetryServiceThrottling&&(e?(this._telemetryServiceResumed=!1,h.default.pause(),this._telemetryServiceDebounce()):(this._telemetryServiceDebounce.cancel(),this._telemetryServiceResumed||(this._telemetryServiceResumed=!0,h.default.resume()))),this._maybeResolveCallingPromises(),this.trigger(m.CallingStatusKey))}_maybeResolveCallingPromises(){if(this._whenNotInCall&&!this._isInCallNoSubscription()){const e=this._whenNotInCall;this._whenNotInCall=void 0,e.resolve(void 0)}if(this._whenNotInCallEstablishment&&!this._isInCallEstablishmentNoSubscription()){const e=this._whenNotInCallEstablishment;this._whenNotInCallEstablishment=void 0,e.resolve(void 0)}}performWhenNotInCallEstablishment(){return this._isInCallEstablishmentNoSubscription()?(this._whenNotInCallEstablishment||(this._whenNotInCallEstablishment=a.Defer()),this._whenNotInCallEstablishment.promise()):a.Resolved()}performWhenNotInCall(){return this._isInCallNoSubscription()?(this._whenNotInCall||(this._whenNotInCall=a.Defer()),this._whenNotInCall.promise()):a.Resolved()}startupAfterUIStarted(e){this.performAfterUIStarted((()=>{g.EnsureStarted(e)}))}performAfterUIStarted(e){if(this.isUIDisplayed())e();else{const t=this.subscribe((()=>{e(),this.unsubscribe(t)}),m.UIDisplayedKey)}}getStartupUIState(){return this._startupUIState}internal_setStartupUIState(e,t){e===this._startupUIState&&(0,u.default)(t,this._loginDisplayedParameters)||(d.log(l.LogTraceArea.Startup,"ServiceStateStore: Setting statup UI state to "+e),this._startupUIState=e,this._loginDisplayedParameters=t,this.trigger(m.StartupUIStateKey))}getSecondaryWindowLoginState(){return this._secondaryWindowLoginState}internal_setSecondaryWindowLoginState(e,t){d.log(l.LogTraceArea.Startup,"ServiceStateStore: Setting secondary window login by "+e),this._secondaryWindowLoginState={loginType:e,state:t},this.trigger(m.SecondaryWindowLoginStateKey)}internal_resetSecondaryWindowLoginState(){this._secondaryWindowLoginState=void 0}};(0,n.__decorate)([(0,s.autoSubscribeWithKey)(m.UIDisplayedKey)],S.prototype,"isUIDisplayed",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(m.LoginSessionKey)],S.prototype,"isLoginSession",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(m.CallingStatusKey)],S.prototype,"isInCallEstablishment",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(m.CallingStatusKey)],S.prototype,"isInCall",null),(0,n.__decorate)([s.disableWarnings],S.prototype,"internal_setCallStatus",null),(0,n.__decorate)([s.disableWarnings],S.prototype,"internal_setCallEstablishmentStatus",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(m.StartupUIStateKey)],S.prototype,"getStartupUIState",null),(0,n.__decorate)([s.disableWarnings],S.prototype,"internal_setStartupUIState",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(m.SecondaryWindowLoginStateKey)],S.prototype,"getSecondaryWindowLoginState",null),(0,n.__decorate)([s.disableWarnings],S.prototype,"internal_setSecondaryWindowLoginState",null),S=(0,n.__decorate)([s.AutoSubscribeStore],S);let C=new S;if("undefined"!=typeof window){window.ServiceStateStore=C}t.default=C},26978:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SideBar=void 0;const n=i(70655),o=i(88837),s=i(97691),a=i(89391),r=i(98278),l=i(56280),c=i(78735),d=i(22538);var u;!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(u=t.SideBar||(t.SideBar={}));let g=class extends o.StoreBase{constructor(){super(),this._leftSideBarWidth=r.SideBarWidths.base,this._rightSideBarWidth=r.SideBarWidths.base,this._rightSideBarFloating=!1,d.RegisterStartupable(this,"SideBarWidthStore",[c.default])}startup(){return this._leftEnabled=this._resizingEnabled(u.Left),this._leftSideBarWidth=this._currentSideBarWidth(u.Left),this._rightEnabled=this._resizingEnabled(u.Right),this._rightSideBarWidth=this._currentSideBarWidth(u.Right),a.default.subscribe((()=>{const e=this._resizingEnabled(u.Left),t=this._resizingEnabled(u.Right);e===this._leftEnabled&&t===this._rightEnabled||(this._leftEnabled=e,this.putWidth(u.Left,this._currentSideBarWidth(u.Left),!1),this._rightEnabled=t,this.putWidth(u.Right,this._currentSideBarWidth(u.Right),!1),this.trigger())})),s.Resolved()}putWidth(e,t,i=!0){let n=!1;e===u.Left?this._leftSideBarWidth!==t&&(this._leftSideBarWidth=t,n=i,c.default.setUserPreferencesLocal({leftPanelExpandedWidth:t})):e===u.Right&&this._rightSideBarWidth!==t&&(this._rightSideBarWidth=t,n=i,c.default.setUserPreferencesLocal({rightPanelExpandedWidth:t})),n&&this.trigger()}putRightSideBarFloating(e){this._rightSideBarFloating!==e&&(this._rightSideBarFloating=e,this.trigger())}getWidth(e=u.Left,t=!0){return this._intGetWidth(e,t)}getWidthNoSubscription(e=u.Left,t=!0){return this._intGetWidth(e,t)}resizingEnabled(e){return e===u.Left?this._leftEnabled:e===u.Right&&this._rightEnabled}rightSideBarFloating(){return this._rightSideBarFloating}rightSideBarFloatingNoSubscription(){return this._rightSideBarFloating}_intGetWidth(e,t=!0){switch(e){case u.Left:return this._leftSideBarWidth;case u.Right:return t||!this._rightSideBarFloating?this._rightSideBarWidth:0}return r.SideBarWidths.base}_resizingEnabled(e){return e===u.Left?a.default.getS4LUiFeatures().leftSideBarResizeMode>l.SideBarResizeMode.None:!!u.Right}_currentSideBarWidth(e){return e===u.Left?this._leftEnabled&&c.default.getUserPreferencesLocal().leftPanelExpandedWidth||r.SideBarWidths.base:e===u.Right&&this._rightEnabled&&c.default.getUserPreferencesLocal().rightPanelExpandedWidth||r.SideBarWidths.base}};(0,n.__decorate)([o.autoSubscribe],g.prototype,"getWidth",null),(0,n.__decorate)([o.disableWarnings],g.prototype,"getWidthNoSubscription",null),(0,n.__decorate)([o.autoSubscribe],g.prototype,"resizingEnabled",null),(0,n.__decorate)([o.autoSubscribe],g.prototype,"rightSideBarFloating",null),(0,n.__decorate)([o.disableWarnings],g.prototype,"rightSideBarFloatingNoSubscription",null),g=(0,n.__decorate)([o.AutoSubscribeStore],g);let h=new g;t.default=h},55585:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(96486),s=i(88837),a=i(97691),r=i(89391),l=i(5531),c=i(46096),d=i(36237),u=i(78735),g=i(93486),h=i(22538);let p=class extends s.StoreBase{constructor(){super(),this._didUserDismiss=!1,this._updateConfigValueIfRequired=()=>{const e=r.default.getS4LCMCFeaturesNoSubscription().speechConsentFlowConfig;if(!e)return this._maxSuggestionShownCount=void 0,void(this._maxCallsBetweenConsentSuggestion=void 0);this._maxSuggestionShownCount=e.maxSuggestionsShownCount,this._maxCallsBetweenConsentSuggestion=e.callsBetweenConsentSuggestion,d.log(c.LogTraceArea.InCallBotService,"Config value for max suggestion count: "+this._maxSuggestionShownCount+" and for calls between consent suggestion: "+this._maxCallsBetweenConsentSuggestion)},this._updateCallCountWithTranslator=()=>{const e=u.default.getUserPreferencesLocal();this._didUserDismiss=!!e.speechSuggestionDismissed,this._currentConsent=u.default.getSpeechConsentForTranslator()},h.RegisterStartupable(this,"SpeechConsentStatusStore",[u.default])}startup(){return this._currentCallCountWithTranslator=void 0,this._updateConfigValueIfRequired(),this._updateCallCountWithTranslator(),this._appConfigStoreSub||(this._appConfigStoreSub=r.default.subscribe(this._updateConfigValueIfRequired)),this._userPrefStoreSub||(this._userPrefStoreSub=u.default.subscribe(this._updateCallCountWithTranslator,u.LocalPreferencesTriggerKeys.speechConsentSuggestion)),a.Resolved()}showSpeechConsentSuggestingInConversation(){if(!this._speechConsentFlowSuggestionEnabled()||void 0!==this._currentConsent||this._didUserDismiss||o.isUndefined(this._maxSuggestionShownCount)||o.isUndefined(this._maxCallsBetweenConsentSuggestion)||o.isUndefined(this._currentCallCountWithTranslator))return!1;const e=this._maxCallsBetweenConsentSuggestion*this._maxSuggestionShownCount;if(0===this._currentCallCountWithTranslator||this._currentCallCountWithTranslator>e)return!1;if(1===this._currentCallCountWithTranslator)return d.log(c.LogTraceArea.InCallBotService,"Showing speech consent suggestion after first translated call"+this._currentCallCountWithTranslator),!0;const t=this._currentCallCountWithTranslator%this._maxCallsBetweenConsentSuggestion==1;return d.log(c.LogTraceArea.InCallBotService,"Showing speech consent suggestion: "+t+" for translated calls count: "+this._currentCallCountWithTranslator),t}hideSpeechConsentSuggestion(){d.log(c.LogTraceArea.InCallBotService,"Hide speech consent suggestion"),this._didUserDismiss=!0,u.default.setUserPreferencesLocal({speechSuggestionDismissed:!0}),this.trigger()}setSpeechConsentValue(e){d.log(c.LogTraceArea.InCallBotService,"Setting consent for speech for translation to "+e),u.default.setSpeechConsentForTranslator(e),this.hideSpeechConsentSuggestion()}getSpeechConsentValue(){return!!this._currentConsent}incrementCountForTranslatedCalls(){this._speechConsentFlowSuggestionEnabled()&&o.isUndefined(this._currentConsent)&&(this._currentCallCountWithTranslator=u.default.getUserPreferencesLocalNoSubscription().callsWithTranslatorCount||0,this._currentCallCountWithTranslator++,u.default.setUserPreferencesLocal({callsWithTranslatorCount:this._currentCallCountWithTranslator}),d.log(c.LogTraceArea.InCallBotService,"Calls with translator: "+this._currentCallCountWithTranslator),this._enableSpeechSuggestionToBeShown(),this.trigger())}lastTimeShowingSuggestion(){return!o.isUndefined(this._maxCallsBetweenConsentSuggestion)&&!o.isUndefined(this._maxSuggestionShownCount)&&(this._currentCallCountWithTranslator=u.default.getUserPreferencesLocalNoSubscription().callsWithTranslatorCount||0,Math.floor(this._currentCallCountWithTranslator/this._maxCallsBetweenConsentSuggestion)===this._maxSuggestionShownCount-1&&this._currentCallCountWithTranslator%this._maxCallsBetweenConsentSuggestion==1)}_enableSpeechSuggestionToBeShown(){this._didUserDismiss=!1,u.default.setUserPreferencesLocal({speechSuggestionDismissed:!1})}_speechConsentFlowSuggestionEnabled(){return r.default.getS4LCMCFeaturesNoSubscription().enableSpeechConsentFlow&&l.default.call().canProvideSpeechConsent&&!g.default.isChild()}test_resetState(){u.default.setCallsWithTranslatorCount(void 0),u.default.setSpeechConsentForTranslator(void 0),u.default.setUserPreferencesLocal({speechSuggestionDismissed:void 0}),this._userPrefStoreSub&&(u.default.unsubscribe(this._userPrefStoreSub),this._userPrefStoreSub=void 0),this._appConfigStoreSub&&(r.default.unsubscribe(this._appConfigStoreSub),this._appConfigStoreSub=void 0),this.startup(),this.trigger()}test_setCallCountWithTranslatror(e){this._currentCallCountWithTranslator=e}};(0,n.__decorate)([s.autoSubscribe],p.prototype,"showSpeechConsentSuggestingInConversation",null),(0,n.__decorate)([s.autoSubscribe],p.prototype,"getSpeechConsentValue",null),p=(0,n.__decorate)([s.AutoSubscribeStore],p),t.default=new p},44352:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PillStatus=void 0;const n=i(70655),o=i(88837),s=i(71830),a=i(16402),r=i(46096),l=i(36237),c=i(33754),d=i(32226),u=i(17640),g=e=>{l.log(r.LogTraceArea.ConnectivityStatusBar,e)};var h;!function(e){e[e.NO_CONNECTION=0]="NO_CONNECTION",e[e.CONNECTING=1]="CONNECTING",e[e.UPDATING=2]="UPDATING",e[e.INFO=3]="INFO",e[e.CAPTIVE_PORTAL=4]="CAPTIVE_PORTAL"}(h=t.PillStatus||(t.PillStatus={}));let p=class extends o.StoreBase{constructor(){super(),this._isMsgStoreLoading=!1,this._isUnread=!1,this._updateConvSyncStatus=e=>()=>{const t=u.default.isConversationSyncing(e);this._isConversationSyncing!==t&&(this._isConversationSyncing=t,this.trigger())},this._updateLoadingState=()=>{const e=this._isMsgStoreLoading,t=!!this._messageStreamStore&&this._messageStreamStore.isLoadingItemsFromNetwork();this._isMsgStoreLoading=!!t,e!==t&&this.trigger()},this._updateConnectionStatus=()=>{const e=d.default.getConnectionStatus();e!==this._connectionStatus&&(this._connectionStatus=e,this.trigger())},this._updateConvListSyncingStatus=()=>{const e=u.default.isSyncingConversationList();this._isConversationListSyncing!==e&&(this._isConversationListSyncing=e,this.trigger())},this._networkConnectionStoreSubscriptionToken=d.default.subscribe(this._updateConnectionStatus),this._updateConnectionStatus(),this._syncStatusStoreSubscriptionToken=u.default.subscribe(this._updateConvListSyncingStatus,u.TriggerKeys.ConversationList),this._updateConvListSyncingStatus()}destroy(){this._syncStatusStoreSubscriptionToken&&(u.default.unsubscribe(this._syncStatusStoreSubscriptionToken),this._syncStatusStoreSubscriptionToken=void 0),this._networkConnectionStoreSubscriptionToken&&(d.default.unsubscribe(this._networkConnectionStoreSubscriptionToken),this._networkConnectionStoreSubscriptionToken=void 0)}showAsUnread(){return this._isUnread}getContent(e,t){return(()=>{const i=this.getPillStatus();if(e){switch(i){case h.CAPTIVE_PORTAL:case h.NO_CONNECTION:return c.getString("ConnectivityStatusBar.NoInternetConnection");case h.CONNECTING:return c.getString("ConnectivityStatusBar.Connecting");case h.UPDATING:return c.getString("Global.LoadingStatus")}return c.getString("ConnectivityStatusBar.Connected")}switch(i){case h.CAPTIVE_PORTAL:case h.NO_CONNECTION:return c.getString("ConnectivityStatusBar.NoInternetConnection");case h.CONNECTING:return c.getString("ConnectivityStatusBar.Connecting");case h.UPDATING:return c.getString("ConnectivityStatusBar.UpdatingConversation")}return this._getTextForInfo(t)})()}getPillStatus(){return this._connectionStatus===d.ConnectionStatus.PossibleCaptivePortal?h.CAPTIVE_PORTAL:this._isConnected()?this._isMsgStoreLoading||this._isConversationListSyncing||this._isConversationSyncing?h.UPDATING:h.INFO:this._connectionStatus===d.ConnectionStatus.DisconnectedNoNetworkingReported?h.NO_CONNECTION:h.CONNECTING}setMessageStreamStore(e){e!==this._messageStreamStore?(this._msgStoreSubscription&&this._messageStreamStore&&(g("setMessageStreamStore: clearing subscription"),this._messageStreamStore.unsubscribe(this._msgStoreSubscription),this._msgStoreSubscription=void 0),this._messageStreamStore=e,this._messageStreamStore&&(g("setMessageStreamStore: creating new subscription"),this._msgStoreSubscription=this._messageStreamStore.subscribe(this._updateLoadingState)),this._updateLoadingState()):g("setMessageStreamStore: The store instance is the same, returning")}setTopPartiallyVisibleMessage(e){e&&this._topVisibleMessage!==e&&(this._topVisibleMessage=e,void 0===this._isConversationSyncing&&(u.default.subscribe(this._updateConvSyncStatus(e.conversationId)),this._updateConvSyncStatus(e.conversationId)()),this.trigger())}setUnread(e){e!==this._isUnread&&(this._isUnread=e,this.trigger())}_getTextForInfo(e){let t="";return this._topVisibleMessage&&(t=a.default.getDisplayDateString(this._topVisibleMessage.createdTime)),this._isUnread&&(t=e&&s.isPhoneMri(e)?c.getString("MessageStream.UnreadSmsMarkerStickerTemplated",{timestamp:t}):c.getString("MessageStream.UnreadMarkerStickerTemplated",{timestamp:t})),t}_isConnected(){return this._connectionStatus===d.ConnectionStatus.Connected}};(0,n.__decorate)([o.autoSubscribe],p.prototype,"showAsUnread",null),(0,n.__decorate)([o.autoSubscribe],p.prototype,"getContent",null),(0,n.__decorate)([o.autoSubscribe],p.prototype,"getPillStatus",null),p=(0,n.__decorate)([o.AutoSubscribeStore],p),t.default=p},17640:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerKeys=void 0;const n=i(70655),o=i(74958),s=i(88837),a=i(97691),r=i(22801),l=i(81697),c=i(46096),d=i(36237),u=i(22538),g=i(40363),h=i(12770);var p;!function(e){e[e.AnySync=0]="AnySync",e[e.AnyMessages=1]="AnyMessages",e[e.ConversationList=2]="ConversationList"}(p=t.TriggerKeys||(t.TriggerKeys={}));let m=class extends s.StoreBase{constructor(){super(250),this._isSyncingConversationList=!1,this._isSyncingMessages=!1,this._pendingConversationTriggers={},u.RegisterStartupable(this,"SyncStatusStore",[r.default])}startup(){return r.default.disconnected.subscribe((()=>{this.trigger(),this._checkSyncingMessages(),this._checkSyncingConversationList()})),r.default.reconnected.subscribe((()=>{this.trigger(),this._checkSyncingMessages(),this._checkSyncingConversationList()})),l.default.syncStarted.subscribe((()=>{this.trigger(p.AnySync)})),l.default.syncComplete.subscribe((()=>{const e=Date.now().valueOf()-g.default.getAppInitTime();d.log(c.LogTraceArea.LowBandwidth,"<NFR> || Warm_Startup || Latency || "+e),this.trigger(p.AnySync),this._checkSyncingMessages(),this._checkSyncingConversationList()})),l.default.conversationListSyncStarted.subscribe((()=>{this._checkSyncingConversationList()})),l.default.conversationListSyncComplete.subscribe((()=>{this._checkSyncingConversationList()})),l.default.startedSyncingConversation.subscribe((e=>{this._ensureRemovedTimeout(e),d.log(c.LogTraceArea.SyncStatus,"SyncStatusStore startedSyncingConversation Scheduled: conversationId = "+o.pii.Mri(e)),this._pendingConversationTriggers[e]=h.default.setTimeout((()=>{this._ensureRemovedTimeout(e),d.log(c.LogTraceArea.SyncStatus,"SyncStatusStore startedSyncingConversation Fulfilled: conversationId = "+o.pii.Mri(e)),this.trigger(e),this._checkSyncingMessages()}),3e3)})),l.default.finishedSyncingConversation.subscribe((e=>{this._pendingConversationTriggers[e]?d.log(c.LogTraceArea.SyncStatus,"SyncStatusStore finishedSyncingConversation Dropped: conversationId = "+o.pii.Mri(e)):(d.log(c.LogTraceArea.SyncStatus,"SyncStatusStore finishedSyncingConversation Fulfilled: conversationId = "+o.pii.Mri(e)),this.trigger(e),this._checkSyncingMessages())})),a.Resolved()}_ensureRemovedTimeout(e){return!!this._pendingConversationTriggers[e]&&(h.default.clearTimeout(this._pendingConversationTriggers[e]),delete this._pendingConversationTriggers[e],!0)}_checkSyncingConversationList(){const e=this._isSyncingConversationList;this._isSyncingConversationList=r.default.isConnected()&&l.default.isConversationListDirty(),e!==this._isSyncingConversationList&&this.trigger(p.ConversationList)}_checkSyncingMessages(){const e=this._isSyncingMessages;this._isSyncingMessages=r.default.isConnected()&&l.default.isSyncingMessages(),e!==this._isSyncingMessages&&this.trigger(p.AnyMessages)}_isConversationSyncingFromService(e){return r.default.isConnected()&&(l.default.isSyncingMessagesForConversation(e)||l.default.isSyncingThreadDetailsForConversation(e))}isSyncingAnything(){return r.default.isConnected()&&l.default.isCurrentlySyncing()}isSyncingMessages(){return this._isSyncingMessages}isSyncingConversationList(){return this._isSyncingConversationList}isConversationSyncing(e){return!this._pendingConversationTriggers[e]&&this._isConversationSyncingFromService(e)}};(0,n.__decorate)([(0,s.autoSubscribeWithKey)(p.AnySync)],m.prototype,"isSyncingAnything",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(p.AnyMessages)],m.prototype,"isSyncingMessages",null),(0,n.__decorate)([(0,s.autoSubscribeWithKey)(p.ConversationList)],m.prototype,"isSyncingConversationList",null),(0,n.__decorate)([s.autoSubscribe,(0,n.__param)(0,s.key)],m.prototype,"isConversationSyncing",null),m=(0,n.__decorate)([s.AutoSubscribeStore],m),t.default=new m},18037:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(96486),s=i(31844),a=i(16778),r=i(88837),l=i(97691),c=i(60),d=i(89391),u=i(46096),g=i(72146),h=i(36237),p=i(78735),m=i(46929),S=i(18078),C=i(22538),f=i(212),y=i(63841),_=i(97634);let v=class extends r.StoreBase{constructor(){super(),this._colorTheme=y.Theme.Delphi,this._evaluatePreferencesUpdates=()=>{let e=this._getUserPreferredTheme();this.isHighContrastEnabled()&&!_.isAccessibleTheme(e)&&(e=_.matchingAccessibleTheme(e));const t=this._setThemeNoDB(e,!1),i=this._setUseSystemTheme(this._getUseSystemTheme()),n=this._setFlipBubbleColors(this._getUserFlipBubblesColorPreference());(t||i||n)&&this.trigger()},this._handleHighContrastChange=e=>{h.log(u.LogTraceArea.Theme,"ThemeStore._handleHighContrastChange isEnabled: "+e),this._isHighContrastEnabled=e;const t=this._getUserPreferredTheme();_.isAccessibleTheme(t)||(e?this._setThemeNoDB(this._highContrastThemeForCurrentOSTheme()):this._setThemeNoDB(t))},this._osThemeChangeCallback=e=>{h.log(u.LogTraceArea.Theme,"ThemeStore._osThemeChangeCallback osTheme: "+e);const t=this._useSystemTheme?_.convertThemeToDelphiTheme(this._colorTheme):this._colorTheme;if(this._osTheme!==e&&(this._osTheme=e),this.isHighContrastEnabled()&&!_.isAccessibleTheme(t))this._setThemeNoDB(this._highContrastThemeForCurrentOSTheme());else if(this._useSystemTheme){const e=_.convertOSThemeToTheme(t,this._osTheme);e&&this._setUserAppearancePreferences({colorTheme:this.convertThemeEnumToString(e),useSystemTheme:!0})}this.trigger()},C.RegisterStartupable(this,"ThemeStore",[g.default,p.default,m.default])}startup(){this._isHighContrastEnabled=a.Accessibility.isHighContrastEnabled(),this._useSystemTheme=this._getUseSystemTheme(),this._flipBubbleColors=this._getUserFlipBubblesColorPreference();const e=this._getUserPreferencesRemote();this._themeSetFromRemotePrefs=e&&void 0!==e.colorTheme;let t=this._getUserPreferredTheme();if(this.isHighContrastEnabled()&&!_.isAccessibleTheme(t)&&(t=y.Theme.Accessible),this._colorTheme=t,_.isColorfulTheme(this._colorTheme)){const e=_.isDarkTheme(this._colorTheme)?y.Theme.MonoDark:y.Theme.Mono;this._colorTheme=e,o.defer((()=>this.setTheme(e)))}h.log(u.LogTraceArea.Theme,"ThemeStore.startup theme: "+t+" useSystemTheme: "+this._useSystemTheme+" flipBubbleColors: "+this._flipBubbleColors);const i=f.default.themeColorsForTheme(this._colorTheme);this._useCompactLayout=!!i.useCompactLayout,this._useInitialsForConversationIcon=!!i.useInitialsForConversationIcon,m.default.subscribe(this._evaluatePreferencesUpdates),p.default.subscribe(this._evaluatePreferencesUpdates),g.default.isSetupWizardCompleted()||(this._firstRunStoreSubscriptionToken=g.default.subscribe((()=>{g.default.isSetupWizardCompleted()&&(this._evaluatePreferencesUpdates(),this._firstRunStoreSubscriptionToken&&g.default.unsubscribe(this._firstRunStoreSubscriptionToken))}),g.TriggerKeys.SetupWizard)),this._updateAppTheme(this._colorTheme),this._subscribeHighContrastChanged(),o.defer((()=>{this.trigger()}));let n=!1;return s.default.osThemeChanged.subscribe((e=>{n=!0,this._osThemeChangeCallback(e)})),s.default.getOSTheme().then((e=>{n||(n=!0,this._osThemeChangeCallback(e))})),c.default.subscribeForChanges("ThemeStore",(e=>{if(!S.default.isGuestUser()&&e===a.Types.AppActivationState.Background){let e;e=this._useSystemTheme?s.AppThemeType.System:this.useDarkThemeNoSubscription()?s.AppThemeType.Dark:s.AppThemeType.Light,s.default.storeAppThemeInfo(e),a.Storage.setItem(s.IsDarkThemeActiveKey,JSON.stringify(_.isDarkTheme(this._colorTheme)))}})),l.Resolved()}toggleLightOrDarkTheme(){const e=_.matchingLightOrDarkTheme(this._colorTheme);this.setTheme(e,!1)}setTheme(e,t){const i=!!t&&_.systemThemeEnabled();this._setUseSystemTheme(i);this._setUserAppearancePreferences({colorTheme:this.convertThemeEnumToString(e),useSystemTheme:!!this._useSystemTheme}),this._updateAppTheme(e)}setPreviewTheme(e){e!==this._previewTheme&&(this._previewTheme=e,this.trigger())}colorTheme(){return this._colorTheme}previewTheme(){return this._previewTheme}previewThemeNoSubscription(){return this._previewTheme}themeForOSTheme(e){return _.convertOSThemeToTheme(e||this._colorTheme,this._osTheme)}themeForOSThemeNoSubscription(e){return _.convertOSThemeToTheme(e||this._colorTheme,this._osTheme)}colorThemeNoSubscription(){return this._colorTheme}wasThemeChanged(){const e=p.default.getUserPreferencesLocal().colorTheme;return!o.isUndefined(e)&&!o.isEmpty(e)}useAccessibleTheme(){return this.useAccessibleThemeNoSubscription()}useAccessibleThemeNoSubscription(){return _.isAccessibleTheme(this._colorTheme)}useDelphiTheme(){return this.useDelphiThemeNoSubscription()}useDelphiThemeNoSubscription(){return _.isDelphiTheme(this._colorTheme)}shouldOverrideColors(){return this.shouldOverrideColorsNoSubscription()}shouldOverrideColorsNoSubscription(){return this._colorTheme===y.Theme.Mono||this._colorTheme===y.Theme.MonoDark||this._colorTheme===y.Theme.Delphi||this._colorTheme===y.Theme.DelphiDark}useDarkTheme(){return this.useDarkThemeNoSubscription()}useDarkThemeNoSubscription(){return _.isDarkTheme(this._colorTheme)}isHighContrastEnabled(){return this._isHighContrastEnabled}useCompactLayout(){return this._useCompactLayout}useInitialsForConversationIcon(){return this._useInitialsForConversationIcon}themeStyles(){return f.default.themeStylesForTheme(this._colorTheme)}themeStylesNoSubscription(){return f.default.themeStylesForTheme(this._colorTheme)}themeColors(){return f.default.themeColorsForTheme(this._colorTheme)}themeColorsNoSubscription(){return f.default.themeColorsForTheme(this._colorTheme)}useSystemTheme(){return this._useSystemTheme}useSystemThemeNoSubscription(){return this._useSystemTheme}getSystemTheme(){return this._osTheme===s.OSTheme.Dark?y.Theme.DelphiDark:y.Theme.Delphi}getSystemThemeNoSubscription(){return this._osTheme===s.OSTheme.Dark?y.Theme.DelphiDark:y.Theme.Delphi}setFlipBubbleColors(e){e!==this._flipBubbleColors&&(d.default.getS4LNativePlatformsEcsConfig().enableRemoteClientAppearancePreferences&&m.default.setUserAppearancePreferencesForCurrentPlatform({flipBubbleColors:e}),p.default.setUserPreferencesLocal({flipBubbleColors:e}))}flipBubbleColors(){return this._flipBubbleColors}convertStringToThemeEnum(e){switch(e){case"accessible":return y.Theme.Accessible;case"mono":return y.Theme.Mono;case"dark":return y.Theme.AccessibleDark;case"colorfuldark":return y.Theme.ColorfulDark;case"monodark":return y.Theme.MonoDark;case"delphiDark":case"classicDark":return y.Theme.DelphiDark;case"default":return y.Theme.Colorful;default:return y.Theme.Delphi}}convertThemeEnumToString(e){switch(e){case y.Theme.Accessible:return"accessible";case y.Theme.Mono:return"mono";case y.Theme.AccessibleDark:return"dark";case y.Theme.ColorfulDark:return"colorfuldark";case y.Theme.MonoDark:return"monodark";case y.Theme.ClassicDarkDeprecated:case y.Theme.DelphiDark:return"delphiDark";case y.Theme.Colorful:return"default";default:case y.Theme.ClassicDeprecated:case y.Theme.Delphi:return"delphi"}}shouldSetSystemThemeInOnboarding(){const e=!this._themeSetFromRemotePrefs&&_.systemThemeEnabled()&&void 0!==this._osTheme&&this._osTheme!==s.OSTheme.Unknown;return h.log(u.LogTraceArea.Theme,`shouldSetSystemThemeInOnboarding(): ${e}`),e}_updateAppTheme(e){this._useSystemTheme?s.default.setAppTheme("system"):_.isDarkTheme(e)?s.default.setAppTheme("dark"):s.default.setAppTheme("light")}_setUserAppearancePreferences(e){o.isUndefined(e.useSystemTheme)||e.useSystemTheme===this._useSystemTheme||s.default.setUseSystemTheme(e.useSystemTheme),d.default.getS4LNativePlatformsEcsConfig().enableRemoteClientAppearancePreferences&&m.default.setUserAppearancePreferencesForCurrentPlatform(e),p.default.setUserPreferencesLocal(e)}_getUserPreferredTheme(){const e=p.default.getUserPreferencesLocal(),t=this._getUserPreferencesRemote();let i=this.convertStringToThemeEnum(e.colorTheme),n=e.useSystemTheme;return t&&t.colorTheme&&(i=this.convertStringToThemeEnum(t.colorTheme),n=t.useSystemTheme),n&&(i=_.convertOSThemeToTheme(i,this._osTheme)||i),i}_getUserFlipBubblesColorPreference(){const e=p.default.getUserPreferencesLocal(),t=this._getUserPreferencesRemote();return t&&!o.isUndefined(t.flipBubbleColors)?t.flipBubbleColors:!!e.flipBubbleColors}_getUserPreferencesRemote(){return d.default.getS4LNativePlatformsEcsConfig().enableRemoteClientAppearancePreferences?m.default.getUserAppearancePreferencesForCurrentPlatform():{}}_getUseSystemTheme(){if(!_.systemThemeEnabled())return!1;const e=p.default.getUserPreferencesLocal(),t=this._getUserPreferencesRemote();return t&&!o.isUndefined(t.useSystemTheme)?t.useSystemTheme:!!e.useSystemTheme}_setUseSystemTheme(e){return this._useSystemTheme!==e&&(this._useSystemTheme=e,this.trigger(),!0)}_setFlipBubbleColors(e){return this._flipBubbleColors!==e&&(this._flipBubbleColors=e,!0)}_setThemeNoDB(e,t=!0){if(h.log(u.LogTraceArea.Theme,"ThemeStore.setThemeNoDB theme: "+e),this._colorTheme!==e){this._colorTheme=e,this._getUseSystemTheme()&&this._useSystemTheme&&this._previewTheme||(this._previewTheme=void 0);const i=f.default.themeColorsForTheme(e);return this._useCompactLayout=!!i.useCompactLayout,this._useInitialsForConversationIcon=!!i.useInitialsForConversationIcon,t&&this.trigger(),!0}return!1}_subscribeHighContrastChanged(){a.Accessibility.highContrastChangedEvent.subscribe(this._handleHighContrastChange)}_highContrastThemeForCurrentOSTheme(){return this._osTheme===s.OSTheme.Dark?y.Theme.AccessibleDark:y.Theme.Accessible}};(0,n.__decorate)([r.disableWarnings],v.prototype,"setPreviewTheme",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"colorTheme",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"previewTheme",null),(0,n.__decorate)([r.disableWarnings],v.prototype,"previewThemeNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"themeForOSTheme",null),(0,n.__decorate)([r.disableWarnings],v.prototype,"themeForOSThemeNoSubscription",null),(0,n.__decorate)([r.disableWarnings],v.prototype,"colorThemeNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"wasThemeChanged",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"useAccessibleTheme",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"useDelphiTheme",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"shouldOverrideColors",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"useDarkTheme",null),(0,n.__decorate)([r.disableWarnings],v.prototype,"useDarkThemeNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"isHighContrastEnabled",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"useCompactLayout",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"useInitialsForConversationIcon",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"themeStyles",null),(0,n.__decorate)([r.disableWarnings],v.prototype,"themeStylesNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"themeColors",null),(0,n.__decorate)([r.disableWarnings],v.prototype,"themeColorsNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"useSystemTheme",null),(0,n.__decorate)([r.disableWarnings],v.prototype,"useSystemThemeNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"getSystemTheme",null),(0,n.__decorate)([r.disableWarnings],v.prototype,"getSystemThemeNoSubscription",null),(0,n.__decorate)([r.autoSubscribe],v.prototype,"flipBubbleColors",null),v=(0,n.__decorate)([r.AutoSubscribeStore],v),t.default=new v},94214:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Test_MsaTokenKey=t.Test_SkypeTokenKey=t.Test_KeychainKeys=t.Test_TokenStoreKeychain=t.Test_TokenStoreHelpersInstance=t.Test_TokenStoreHelpers=t.isTokenReasonableAsHeader=t.TokenStore=t.TriggerKeys=void 0;const n=i(70655),o=i(96486),s=i(61544),a=i(88837),r=i(16778),l=i(97691),c=i(89391),d=i(62141),u=i(46096),g=i(36237),h=i(98754),p=i(10962),m=i(4329),S=i(19508),C=i(78735),f=i(18078),y=i(81956),_=i(52644),v=i(22538),b=i(4057),T=i(40363);var P;!function(e){e[e.SkypeTokenKey=0]="SkypeTokenKey",e[e.MSARefreshTokenKey=1]="MSARefreshTokenKey",e[e.CdnTokenKey=2]="CdnTokenKey",e[e.AmsTokenKey=3]="AmsTokenKey",e[e.MsaUserInternalKey=4]="MsaUserInternalKey"}(P=t.TriggerKeys||(t.TriggerKeys={}));const A={SkypeToken:"Skype for Desktop",MSAToken:"Skype for Desktop MSA",MSATokenDefault:"Skype for Desktop MSA"};t.Test_KeychainKeys=A;t.Test_SkypeTokenKey="Skype4Life-SkypeToken";t.Test_MsaTokenKey="Skype4Life-MSA";const k=/^[\x20-\xFF]+$/;let I=class extends a.StoreBase{constructor(){super(),this._cdnCookieSet=!1,this._msaUserInternalTokenRequestOngoing=!1,this._canGetMsaUserInternalToken=!0,this._amsCookieSet=!1,this._fetchAuthToken=()=>{const e=this.getMSARefreshToken();e?this._canGetMsaUserInternalToken?this._msaUserInternalTokenRequestOngoing||(this._msaUserInternalTokenRequestOngoing=!0,S.default.fetch(e,f.default.getUserCidHex()).then((e=>{this._msaUserInternalTokenRequestOngoing=!1,this.useMsaUserInternalToken(e)}),(e=>{this._msaUserInternalTokenRequestOngoing=!1,!1===e&&(this._canGetMsaUserInternalToken=!1)}))):g.log(u.LogTraceArea.TokenStore,"Fetching MSA User Internal token for this user is not possible"):g.log(u.LogTraceArea.TokenStore,"MSAToken is not present. Can not fetch MSA User Internal Auth token")},v.RegisterStartupable(this,"TokenStore",[h.default,C.default]),m.default.registerForLogout(this,"TokenStore")}feedStartupInfo(e,t){e&&(this._startupSkypeToken=e),t&&(this._startupMSARefreshToken=t)}startup(){return l.all([this._startupSkypeToken||M.getInitialSkypeToken(),this._startupMSARefreshToken||M.getInitialMSAToken(),M.isLiveLogin()]).then((([e,t,i])=>{const n=h.default.getData(d.InternalKeys.CdnToken),o=h.default.getData(d.InternalKeys.MsaUserInternalToken),s=(C.default.getUserPreferencesLocal(),t&&M.shouldMigrateMsaTokenToNewKey(i),this._startupSkypeToken?M.setSkypeToken(e):l.Resolved());return l.all([undefined,s]).then((()=>{this._msaRefreshToken=t,M.provideSsoToken(this._msaRefreshToken),e&&!e.isTokenExpired()&&n&&(this._cdnToken=n,this._cdnCookieSet=!0),this._msaUserInternalToken=o,this.useSkypeToken(e,!1),g.log(u.LogTraceArea.TokenStore,"TokenStore Started - "+(this.hasUsableSkypeToken()?"Usable Skypetoken":"Non-usable Skypetoken")+" - "+(this._skypeToken?"expiration: "+new Date(this._skypeToken.expiration):"no token"))}))})).fail((e=>g.error(u.LogTraceArea.TokenStore,"Failure during startup: "+b.default.errorAsString(e))))}logout(e,t,i){return M.provideSsoToken(void 0),M.clearTokensFromKeychain()}performWhenValidSkypeTokenArrives(){if(this.hasUsableSkypeToken())return g.log(u.LogTraceArea.TokenStore,"Valid Skype Token available"),l.Resolved();this._waitingForValidSkypeToken||(this._waitingForValidSkypeToken=l.Defer());const e=l.Defer();return this._waitingForValidSkypeToken.promise().then((()=>{e.resolve(void 0)})),g.log(u.LogTraceArea.TokenStore,"Awaiting a valid Skype Token..."),e.promise()}performWhenCdnTokenArrives(){if(this._cdnToken)return l.Resolved();this._waitingForCdnToken||(this._waitingForCdnToken=l.Defer());const e=l.Defer();return this._waitingForCdnToken.promise().then((()=>{e.resolve(void 0)})),e.promise()}useCdnToken(e){if((this._cdnCookieSet!==e.cookie||this._cdnToken!==e.token)&&(this._cdnToken=e.token,this._cdnCookieSet=e.cookie,h.default.putData(d.InternalKeys.CdnToken,e.token),this.trigger(P.CdnTokenKey),this._waitingForCdnToken)){const e=this._waitingForCdnToken;this._waitingForCdnToken=void 0,e.resolve(void 0)}}usingCdnCookie(){return this._cdnCookieSet}getCdnToken(){return this._cdnToken}skypeTokenInvalid(e){this._skypeToken?this._skypeToken.rawToken===e?this.useSkypeToken(void 0):g.log(u.LogTraceArea.TokenStore,"Skypetoken reported invalid, but it doesn't match our stored one -- ignoring!"):g.log(u.LogTraceArea.TokenStore,"Skypetoken reported invalid, but we already knew that -- ignoring!")}useSkypeToken(e,t=!0){var i;if(this._skypeToken&&e&&this._skypeToken.rawToken===e.rawToken)return;this._skypeToken=e,this._skypeToken&&t&&M.setSkypeToken(e);const n=null===(i=this._skypeToken)||void 0===i?void 0:i.getCidFromSkypeToken();if(n){const e=parseInt(n,16).toString();g.log(u.LogTraceArea.TokenStore,`Setting MSACID and MSACIDHEX from Skypetoken - ${e} ${n}`),f.default.internal_feedInfo(void 0,void 0,e,n)}document.cookie="skypeToken="+(this._skypeToken?this._skypeToken.rawToken:"")+";secure",this.trigger(P.SkypeTokenKey),this.hasUsableSkypeToken()&&this._waitingForValidSkypeToken&&(g.log(u.LogTraceArea.TokenStore,"Got a valid Skype Token"),this._waitingForValidSkypeToken.resolve(void 0),this._waitingForValidSkypeToken=void 0)}useMSARefreshToken(e,t){if(this._msaRefreshToken!==e){if(e){const i="TokenStore got a bad MSA Refresh Token";E(e)||(g.log(u.LogTraceArea.TokenStore,i),g.track(new p.TokenIssueEvent(u.KeychainTokenType.MSARefresh,p.TokenIssueType.InvalidToken,t)))}else{const i="Empty MSA refresh token passed to TokenStore.useMSARefreshToken()";M.isValidMSARefreshToken(e)||(g.log(u.LogTraceArea.TokenStore,i),g.track(new p.TokenIssueEvent(u.KeychainTokenType.MSARefresh,p.TokenIssueType.EmptyToken,t)))}this._msaRefreshToken=e,M.setMSAToken(e),M.provideSsoToken(e),this.trigger(P.MSARefreshTokenKey)}}hasUsableSkypeToken(){return!!this._skypeToken&&!this._skypeToken.isTokenExpired()}hasUsableSkypeTokenNoSubscription(){return!!this._skypeToken&&!this._skypeToken.isTokenExpired()}getSkypeToken(){return this._skypeToken?this._skypeToken.clone():void 0}getRawSkypeToken(){return this._skypeToken?this._skypeToken.rawToken:void 0}getMSARefreshToken(){return this._msaRefreshToken}getMsaUserInternalToken(){if(!this._canGetMsaUserInternalToken)return;const e=this._getAuthToken();return e||this._fetchAuthToken(),e}msaUserInternalTokenInvalid(e){this._msaUserInternalToken&&this._msaUserInternalToken.accessToken===e.accessToken&&this.useMsaUserInternalToken(void 0)}useMsaUserInternalToken(e){if(this._msaUserInternalToken&&e&&this._msaUserInternalToken.accessToken===e.accessToken)return;h.default.putData(d.InternalKeys.MsaUserInternalToken,e?{accessToken:e.accessToken,expiryDateTimeMs:e.expiryDateTimeMs,idHash:e.idHash}:void 0),this._msaUserInternalToken=e,this._canGetMsaUserInternalToken=!0;const t=this._waitingForMsaUserInternalToken;t&&(this._waitingForMsaUserInternalToken=void 0,t.resolve(void 0)),this.trigger(P.MsaUserInternalKey)}getCanGetMsaUserInternalToken(){return this._canGetMsaUserInternalToken}_getAuthToken(){if(void 0!==this._msaUserInternalToken)return this._msaUserInternalToken.expiryDateTimeMs>Date.now()+6e5?this._msaUserInternalToken:void 0}performWhenMsaInternalUserTokenArrives(){if(this._getAuthToken())return l.Resolved();let e=this._waitingForMsaUserInternalToken;return e||(e=l.Defer(),this._waitingForMsaUserInternalToken=e),this._fetchAuthToken(),e.promise()}setAMSCookieSet(e){this._amsCookieSet!==e&&(this._amsCookieSet=e,this.trigger(P.AmsTokenKey))}getAmsCookieSet(){return this._amsCookieSet}};(0,n.__decorate)([(0,a.autoSubscribeWithKey)(P.CdnTokenKey)],I.prototype,"usingCdnCookie",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(P.CdnTokenKey)],I.prototype,"getCdnToken",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(P.SkypeTokenKey)],I.prototype,"hasUsableSkypeToken",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(P.SkypeTokenKey)],I.prototype,"getSkypeToken",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(P.SkypeTokenKey)],I.prototype,"getRawSkypeToken",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(P.MSARefreshTokenKey)],I.prototype,"getMSARefreshToken",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(P.MsaUserInternalKey)],I.prototype,"getCanGetMsaUserInternalToken",null),(0,n.__decorate)([(0,a.autoSubscribeWithKey)(P.AmsTokenKey)],I.prototype,"getAmsCookieSet",null),I=(0,n.__decorate)([a.AutoSubscribeStore],I),t.TokenStore=I;class w{clearSkypeTokenFromKeychain(){let e=l.Resolved();let t=l.Resolved();return l.all([t.catch((e=>{g.error(u.LogTraceArea.TokenStore,"Unable to delete Skype Token from KeyChain "+b.default.errorAsString(e))})),e.catch((e=>{g.error(u.LogTraceArea.TokenStore,"Unable to remove extension Skype Token from KeyChain "+b.default.errorAsString(e))}))]).then((()=>!0))}clearMSARefreshTokenFromKeychain(e){let t=l.Resolved();let i=l.Resolved();return l.all([i.catch((e=>{g.error(u.LogTraceArea.TokenStore,"Unable to delete MSAToken from KeyChain "+b.default.errorAsString(e))})),t.catch((e=>{g.error(u.LogTraceArea.TokenStore,"Unable to remove extension MSAToken from KeyChain "+b.default.errorAsString(e))}))]).then((()=>!0))}getPasswordFromKeychain(e){return s.default.getPassword(e,f.default.getSkypeId())}setPasswordIntoKeychain(e,t){return t?s.default.setPassword(e,f.default.getSkypeId(),t):s.default.deletePassword(e,f.default.getSkypeId()).then(o.noop)}getGenericPasswordFromKeychain(e){return s.default.getGenericPassword(e)}setGenericPasswordIntoKeychain(e,t,i){return t?s.default.setGenericPassword(e,t,i):(g.warn(u.LogTraceArea.TokenStore,"_setGenericPasswordIntoKeychain called with empty password, resetting entry"),s.default.resetGenericPassword(i).then(o.noop))}}t.Test_TokenStoreKeychain=w;class N{constructor(){this._keychain=new w}getInitialSkypeToken(){return g.log(u.LogTraceArea.TokenStore,"getInitialSkypeToken - fetching SkypeToken from DataStore"),l.Resolved(y.default.fromDbToken(h.default.getData(d.InternalKeys.SkypeToken)))}setSkypeToken(e){return g.log(u.LogTraceArea.TokenStore,"setSkypeToken - setting SkypeToken to DataStore"),h.default.putData(d.InternalKeys.SkypeToken,e?{rawToken:e.rawToken,expiration:e.expiration}:void 0)}getInitialMSAToken(){if(f.default.isGuestUser())return l.Resolved(void 0);return g.log(u.LogTraceArea.TokenStore,"getInitialMSAToken - getting MSAToken from DataStore"),l.Resolved(h.default.getData(d.InternalKeys.MSARefreshToken))}setMSAToken(e){this.maybeUpdateMsaTokenKey();return g.log(u.LogTraceArea.TokenStore,"setMSAToken - setting MSAToken to DataStore"),h.default.putData(d.InternalKeys.MSARefreshToken,e)}maybeUpdateMsaTokenKey(){}isLiveLogin(){const e=l.Defer();return r.Storage.getItem(u.StorageItemKeys[u.StorageItemKeys.LoginMethod]).then((t=>{void 0===t||t===u.LoginMethods[u.LoginMethods.LiveLogin]?e.resolve(!0):e.resolve(!1)})).catch((t=>{g.error(u.LogTraceArea.TokenStore,"Failed to get login method "+b.default.errorAsString(t)),e.resolve(!1)})),e.promise()}shouldMigrateMsaTokenToNewKey(e){if(!T.default.isWindows10Plus()||!e)return!1;const t=c.default.getS4LSisuFeatures().msaTokenKeyMigration,i=(null==t?void 0:t.enabled)&&!T.default.isWindows11()&&A.MSAToken!==(null==t?void 0:t.keychainKey),n=(!(null==t?void 0:t.enabled)||T.default.isWindows11())&&A.MSAToken!==A.MSATokenDefault;return g.log(u.LogTraceArea.TokenStore,`migrateMsaTokenToNewKey is ${i}, rollbackToDefaultMsaTokenKey is ${n}`),i||n}getMsaRefreshTokenKeysToTry(){const e=[A.MSAToken],t=C.default.getMsaTokenKey(),i=c.default.getS4LSisuFeatures().msaTokenKeyMigration;return g.log(u.LogTraceArea.TokenStore,`getMsaRefreshTokenKeysToTry - MSA token key from prefs: ${t}`),o.isUndefined(t)||t===A.MSAToken?o.isUndefined(t)&&(g.log(u.LogTraceArea.TokenStore,"getMsaRefreshTokenKeysToTry - MSA token key is undefined in preferences"),(null==i?void 0:i.enabled)&&e.indexOf(null==i?void 0:i.keychainKey)<0&&e.unshift(null==i?void 0:i.keychainKey),A.MSAToken!==A.MSATokenDefault&&e.indexOf(A.MSATokenDefault)<0&&e.push(A.MSATokenDefault)):e.unshift(t),g.log(u.LogTraceArea.TokenStore,`getMsaRefreshTokenKeysToTry - going to try these keys: ${e.toString()}`),e}provideSsoToken(e){o.isNil(e)?_.default.removeSkypeSsoAccount():_.default.provideSkypeSsoAccount(e)}clearTokensFromKeychain(){return l.all([this._keychain.clearMSARefreshTokenFromKeychain(),this._keychain.clearSkypeTokenFromKeychain()]).then(o.noop)}setSharedSkypeTokenIntoKeychain(e){0}setSharedMsaTokenIntoKeychain(e){0}getUserSpecificServiceName(e){return f.default.getSkypeId()+e}isValidMSARefreshToken(e){return!0}test_setKeychain(e){this._keychain=e}}t.Test_TokenStoreHelpers=N;const M=new N;function E(e){return k.test(e)}t.Test_TokenStoreHelpersInstance=M,t.isTokenReasonableAsHeader=E,t.default=new I},71499:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(88837),s=i(98278),a=i(61253),r={displayText:"",rect:{x:0,y:0,height:0,width:0},rootViewId:s.MainRootViewId};let l=class extends o.StoreBase{constructor(){super(...arguments),this._toolTipConfig=r}getToolTipConfig(e){return this._toolTipConfig.rootViewId===e?this._toolTipConfig:r}setToolTipConfig(e){(0,a.default)(this._toolTipConfig,e)||(this._toolTipConfig=e,this.trigger())}clearToolTipConfig(){this.setToolTipConfig(r)}};(0,n.__decorate)([o.autoSubscribe],l.prototype,"getToolTipConfig",null),l=(0,n.__decorate)([o.AutoSubscribeStore],l),t.default=new l},6977:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(70655),o=i(78045),s=i(88837),a=i(97691),r=i(71830),l=i(98278),c=i(46096),d=i(36237),u=i(72490),g=i(4329),h=i(78735),p=i(46929),m=i(4735),S=i(30124),C=i(27357),f=i(53374);let y=class extends s.StoreBase{constructor(){super(...arguments),this._initialStartupTriggerHappened=!1,this._closeSplitViewConversation=(e,t)=>t!==l.MainRootViewId&&(o.default.closeSplitView(t),!0)}logout(e,t,i){return this._userPrefsStoreSubscriptionKey&&(p.default.unsubscribe(this._userPrefsStoreSubscriptionKey),this._userPrefsStoreSubscriptionKey=void 0,this._initialStartupTriggerHappened=!1),S.default.isUsingSplitViewNoSubscription()?(d.log(c.LogTraceArea.Navigation,"close all split views causeId: "+e),a.fromThenable(o.default.closeAllSplitViews())):(d.log(c.LogTraceArea.Navigation,"Skipping logout - split view is not enabled causeId: "+e),a.Resolved())}init(){d.log(c.LogTraceArea.Startup,"WindowManagerStore.init is called"),g.default.registerForLogout(this,"WindowManagerStore"),this._isCurrentlyUsingSplitViewMode=S.default.isUsingSplitViewNoSubscription(),this._isCurrentlyUsingSplitViewMode&&u.default.addHandler(c.KeyboardShortcut.CloseSplitViewConversation,this._closeSplitViewConversation),this._userPrefsStoreSubscriptionKey=p.default.subscribe((()=>{if(this._initialStartupTriggerHappened){if(d.log(c.LogTraceArea.Navigation,"WindowManagerStore - user appearance settings updated => checking if SplitView was enabled from another the client"),!this._isCurrentlyUsingSplitViewMode&&S.default.isUsingSplitViewNoSubscription()){const e=f.default.newCauseId();d.log(c.LogTraceArea.Navigation,"WindowManagerStore._turnOnSplitView - SplitView mode has been enabled on another similar client, causeId: "+e),this._turnOnSplitView(e,!1)}this._isCurrentlyUsingSplitViewMode=S.default.isUsingSplitViewNoSubscription()}else this._initialStartupTriggerHappened=!0}),p.TriggerKeys.UserAppearancePreferences)}splitViewInFocus(){return o.default.getFocusedSplitViewId()}toggleSplitView(e){d.log(c.LogTraceArea.Navigation,"WindowManagerStore.toggleSplitView, causeId: "+e),S.default.isUsingSplitViewNoSubscription()?this._turnOffSplitView(e):this._turnOnSplitView(e)}_turnOnSplitView(e,t=!0){d.log(c.LogTraceArea.Navigation,"WindowManagerStore._turnOnSplitView, causeId: "+e);o.default.turnOnSplitView(360).then((i=>{u.default.addHandler(c.KeyboardShortcut.CloseSplitViewConversation,this._closeSplitViewConversation),t&&(this._isCurrentlyUsingSplitViewMode=!0,S.default.setSplitViewMode(!0));const n=C.default.getActiveConversationId(l.MainRootViewId);m.default.navigateToCompositeGroup(e,l.MainRootViewId,((t,i)=>{const o=[];return o.push(m.default.clearMainStageContext(t,i,l.MainRootViewId)),o.push(m.default.clearModalContext(t,i,l.MainRootViewId)),o.push(m.default.clearRightSidebarContext(t,i,l.MainRootViewId)),o.push(m.default.clearSelectedConversationId(i)),o.push(m.default.setMainAreaFullScreen(!1,l.MainRootViewId)),n&&m.default.navigateToConversation({convId:n,causeId:e}),o})),0!==i.width&&0!==i.width&&h.default.setUserPreferencesLocal({lastMainViewWidth:i.width,lastMainViewHeight:i.height})}),(e=>{d.log(c.LogTraceArea.Navigation,"WindowManagerStore._turnOnSplitView() failed. error: "+e)}))}_turnOffSplitView(e){d.log(c.LogTraceArea.Navigation,"WindowManagerStore._turnOffSplitView, causeId: "+e);const t=h.default.getUserPreferencesLocal().lastMainViewWidth||500,i=h.default.getUserPreferencesLocal().lastMainViewHeight||500;o.default.turnOffSplitView(t,i).then((()=>(u.default.removeHandler(c.KeyboardShortcut.CloseSplitViewConversation,this._closeSplitViewConversation),S.default.setSplitViewMode(!1),o.default.getLastActiveSplitView()))).then((e=>o.default.closeAllSplitViews().then((()=>e)))).then((t=>{t.id&&r.isMri(t.id)&&m.default.navigateToConversation({convId:t.id,causeId:e})}),(e=>{d.log(c.LogTraceArea.Navigation,"WindowManagerStore._turnOffSplitView() failed. error: "+e)}))}};(0,n.__decorate)([s.autoSubscribe],y.prototype,"splitViewInFocus",null),y=(0,n.__decorate)([s.AutoSubscribeStore],y),t.default=new y},60:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppActivationStateListener=void 0;const n=i(29860),o=i(16778),s=i(89391),a=i(46096),r=i(36237);class l{constructor(){this._debounceTimeoutIdHashMap={}}subscribeForChanges(e,t){const i=i=>{if(t){let n=`App activation state changed to: ${o.Types.AppActivationState[i.newState]} - notify: ${e}`;i.shouldDebounce&&(n+=`, debounced by ${i.debounceTime} ms`),r.log(a.LogTraceArea.Lifecycle,n),t(i.newState)}};return o.App.activationStateChangedEvent.subscribe((t=>{const o={newState:t,shouldDebounce:s.default.getS4LNativePlatformsEcsConfigNoSubscription().enableAppActivationStateEventsDebouncing,debounceTime:s.default.getS4LNativePlatformsEcsConfigNoSubscription().appActivationStateChangeDebounceTime};if(o.shouldDebounce&&o.debounceTime&&o.debounceTime>0){if(!e||""===e)return void i({newState:t,shouldDebounce:!1});this._debounceTimeoutIdHashMap[e]&&(n.default.clearTimeout(this._debounceTimeoutIdHashMap[e]),delete this._debounceTimeoutIdHashMap[e]),this._debounceTimeoutIdHashMap[e]=n.default.setTimeout((()=>{delete this._debounceTimeoutIdHashMap[e],i(o)}),o.debounceTime)}else i({newState:t,shouldDebounce:!1})}))}}t.AppActivationStateListener=l,t.default=new l},33951:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CalledBeforeStartupError=t.test_setTestOverride=t.beforeStartup=t.makeStartupable=t.Startupable=void 0;const n=i(96486),o=i(16778),s=i(70655),a=i(89391),r=i(22538),l="startup";let c,d=!1,u=!1,g=!0;function h(){return a.default.getS4LFeatures().beforeStartupDecorator.enabled&&!0}function p(e,t){try{return e()}finally{t()}}function m(e){const t=e;return t.__beforeStartupMetadata=t.__beforeStartupMetadata||{},t}function S(e,t){return e.__beforeStartupMetadata[t]||(e.__beforeStartupMetadata[t]={}),e.__beforeStartupMetadata[t]}function C(e){return t=>{const i=m(t.prototype);return i.__beforeStartupMetadata.__decorated=!0,h()&&n.each(Object.getOwnPropertyNames(i),(o=>{if(n.isFunction(t.prototype[o])&&"constructor"!==o&&o!==l){const t=i.__beforeStartupMetadata[o];t&&t.hasbeforeStartupDecorator||(0,s.__decorate)([y(e)],i,o,null)}else if(n.isFunction(t.prototype[o])&&o===l){const e=i.__beforeStartupMetadata[o];e&&e.isStartup||(0,s.__decorate)([f],i,o,null)}})),t}}function f(e,t,i){if(!h())return i;S(m(e),t).isStartup=!0;const n=i.value;return i.value=function(...e){if(!h())return n.apply(this,e);let t=d;d=!0;return p((()=>n.apply(this,e)),(()=>{d=t}))},i}function y(e){return(e,t,i)=>{if(!h())return i;m(e);const n=i.value;return i.value=function(...e){if(h()){r.HasStarted(this),o.App.getActivationState(),o.Types.AppActivationState.Active}return n.apply(this,e)},i}}t.Startupable=C(!0),t.makeStartupable=C;t.beforeStartup=(e,t,i)=>{if(!h())return i;const n=m(e);S(n,t).hasbeforeStartupDecorator=!0;const o=i.value;return i.value=function(...e){if(!h())return o.apply(this,e);const t=u,i=c;u=!0,c=n;return p((()=>o.apply(this,e)),(()=>{u=t,c=i}))},i},t.test_setTestOverride=function(e){g=e};class _ extends Error{constructor(e,t,i){super(`Trying to call ${t} on ${e} before started with ${i||"[no context]"}.`)}}t.CalledBeforeStartupError=_},29951:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedRate=t.getCurrencySymbol=void 0;i(49679);const n=i(33754),o={AED:".",AFN:"",ALL:"L",ANG:"",AOA:"Kz",ARS:"$",AUD:"$",AWG:"",AZN:"",BAM:"KM",BBD:"$",BDT:"",BGN:"",BHD:"..",BIF:"FBu",BMD:"$",BND:"$",BOB:"Bs.",BRL:"R$",BSD:"$",BTC:"",BTN:"Nu.",BWP:"P",BYR:"p.",BZD:"BZ$",CAD:"$",CDF:"FC",CHF:"Fr.",CLP:"$",CNY:"",COP:"$",CRC:"",CUC:"$",CUP:"",CVE:"$",CZK:"K",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"",EEK:"kr",EGP:"",ERN:"Nfk",ETB:"Br",ETH:"",EUR:"",FJD:"$",FKP:"",GBP:"",GEL:"",GGP:"",GHC:"",GHS:"GH",GIP:"",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"",IMP:"",INR:"",IQD:".",IRR:"",ISK:"kr",JEP:"",JMD:"J$",JPY:"",KES:"KSh",KGS:"",KHR:"",KMF:"CF",KPW:"",KRW:"",KYD:"$",KZT:"",LAK:"",LBP:"",LKR:"",LRD:"$",LSL:"M",LTC:"",LTL:"Lt",LVL:"Ls",MAD:"MAD",MDL:"lei",MGA:"Ar",MKD:"",MMK:"K",MNT:"",MOP:"MOP$",MUR:"",MVR:"Rf",MWK:"MK",MXN:"$",MYR:"RM",MZN:"MT",NAD:"$",NGN:"",NIO:"C$",NOK:"kr",NPR:"",NZD:"$",OMR:"",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"",PKR:"",PLN:"z",PYG:"Gs",QAR:"",RMB:"",RON:"lei",RSD:".",RUB:"",RWF:"R",SAR:"",SBD:"$",SCR:"",SDG:"..",SEK:"kr",SGD:"$",SHP:"",SLL:"Le",SOS:"S",SRD:"$",SSP:"",STD:"Db",SVC:"$",SYP:"",SZL:"E",THB:"",TJS:"SM",TMT:"T",TND:".",TOP:"T$",TRL:"",TRY:"",TTD:"TT$",TVD:"$",TWD:"NT$",TZS:"TSh",UAH:"",UGX:"USh",USD:"$",UYU:"$U",UZS:"",VEF:"Bs",VND:"",VUV:"VT",WST:"WS$",XAF:"FCFA",XBT:"",XCD:"$",XOF:"CFA",XPF:"",YER:"",ZAR:"R",ZWD:"Z$"};t.getCurrencySymbol=function(e){return o[e]||e},t.getFormattedRate=function(e,t,i,o=0){const s=Math.max(i,o),a=Math.min(i,o);{let i=n.getLocale();return e.toLocaleString(i,{style:"currency",currency:t,maximumFractionDigits:s,minimumFractionDigits:a})}}},44110:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(97691),s=i(62141),a=i(72685),r=i(98754),l=i(22538),c=i(40363);t.default=new class{constructor(){this._doCleanup=()=>{if(r.default.getData(s.InternalKeys.LastDBCleanupVersion)===c.default.getAppVersion())return;const e=[],t=n.map(s.InternalKeys,(e=>e)),i=r.default.getKeys();let a;return n.each(i,(i=>{n.includes(t,i)||e.push(i)})),a=e.length>0?r.default.deleteKeys(e):o.Resolved(),a.then((()=>r.default.putData(s.InternalKeys.LastDBCleanupVersion,c.default.getAppVersion())))},l.RegisterStartupable(this,"DatabaseCleanupService",[a.default,r.default])}startup(){return a.default.setRefreshOptions("DBCleanup",{interval:6048e5,callback:this._doCleanup,taskTypeFlags:a.TaskTypeFlags.CpuIntensive}),o.Resolved()}}},16402:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(27484),o=i(94712),s=i(10285),a=i(84110),r=i(70660),l=i(96486),c=i(49679),d=i(33754);n.extend(o),n.extend(r),n.extend(a),n.extend(s);class u{static add(e,t=0,i=0,n=0,o=0,s=0){return e+1e3*(t*u._secondsPerYear+i*u._secondsPerDay+n*u._secondsPerHour+o*u._secondsPerMinute+s)}static fromUnixMilliseconds(e){return new Date(e)}static getMidnight(e){const t=u.fromUnixMilliseconds(e);return t.setHours(0,0,0,0),t.getTime()}static isSameDay(e,t){const i=u.fromUnixMilliseconds(e),n=u.fromUnixMilliseconds(t);return i.getDate()===n.getDate()&&i.getMonth()===n.getMonth()&&i.getFullYear()===n.getFullYear()}static getDisplayDateStringShort(e){const t=c.getDateShort(u.fromUnixMilliseconds(e));return n.unix(e/1e3).calendar(null,{sameDay:"["+d.getString("DateTimeRelative.Today")+"]",nextDay:"["+d.getString("DateTimeRelative.Tomorrow")+"]",nextWeek:"["+t+"]",lastDay:"["+d.getString("DateTimeRelative.Yesterday")+"]",lastWeek:"["+t+"]",sameElse:"["+t+"]"})}static getDisplayDateString(e){const t=u.fromUnixMilliseconds(e),i=c.getDayName(t),o=c.getDateLong(t);return n.unix(e/1e3).calendar(null,{sameDay:"["+d.getString("DateTimeRelative.Today")+"]",nextDay:"["+d.getString("DateTimeRelative.Tomorrow")+"]",nextWeek:"["+i+"]",lastDay:"["+d.getString("DateTimeRelative.Yesterday")+"]",lastWeek:"["+i+"]",sameElse:"["+o+"]"})}static getDisplayDateStringFull(e){return c.getDateLong(u.fromUnixMilliseconds(e))}static getDisplayDateStringDayMonthYearFormat(e){return c.getDateShort(u.fromUnixMilliseconds(e))}static getDisplayDateTimeString(e){const t=u.fromUnixMilliseconds(e),i=c.getTimeShort(t),o=c.getDateShort(t),s=c.getDayName(t);return n.unix(e/1e3).calendar(null,{sameDay:"["+d.getString("DateTimeRelative.TodayAt",{time:i})+"]",nextDay:"["+d.getString("DateTimeRelative.TomorrowAt",{time:i})+"]",nextWeek:"["+d.getString("DateTimeRelative.DayAtTime",{day:s,time:i})+"]",lastDay:"["+d.getString("DateTimeRelative.YesterdayAt",{time:i})+"]",lastWeek:"["+d.getString("DateTimeRelative.DayAtTime",{day:s,time:i})+"]",sameElse:"["+o+"]"})}static getAbsoluteDisplayDateTimeString(e){const t=u.fromUnixMilliseconds(e),i=c.getTimeShort(t),n=c.getDateShort(t);return"["+d.getString("DateTimeRelative.DayAtTime",{day:n,time:i})+"]"}static getDisplayDateTimeMixedString(e,t=!1){const i=u.fromUnixMilliseconds(e),o=c.getTimeShort(i),s=c.getDateShort(i),a=c.getDayName(i),r=t?a:c.getDayAbbreviatedName(i);return n.unix(e/1e3).calendar(null,{sameDay:"["+o+"]",nextDay:"["+d.getString("DateTimeRelative.TomorrowAt",{time:o})+"]",nextWeek:"["+d.getString("DateTimeRelative.DayAtTime",{day:a,time:o})+"]",lastDay:"["+r+"]",lastWeek:"["+r+"]",sameElse:"["+s+"]"})}static getDisplayTimeString(e){return c.getTimeShort(u.fromUnixMilliseconds(e))}static getRelativeDisplayDateTimeString(e){return n.updateLocale("en",{relativeTime:{future:d.getString("DateTimeRelative.Future",{time:"%s"}),past:d.getString("DateTimeRelative.Past",{time:"%s"}),s:d.getString("DateTimeRelative.Seconds"),ss:d.getString("DateTimeRelative.Seconds"),m:d.getString("DateTimeRelative.Minute"),mm:d.getString("DateTimeRelative.Minutes",{count:"%d"}),h:d.getString("DateTimeRelative.Hour"),hh:d.getString("DateTimeRelative.Hours",{count:"%d"}),d:d.getString("DateTimeRelative.Day"),dd:d.getString("DateTimeRelative.Days",{count:"%d"}),M:d.getString("DateTimeRelative.Month"),MM:d.getString("DateTimeRelative.Months",{count:"%d"}),y:d.getString("DateTimeRelative.OverAYear"),yy:d.getString("DateTimeRelative.OverAYear")}}),n.unix(e/1e3).fromNow()}static getLongMonthAndYearString(e){return c.getMonthAndYear(u.fromUnixMilliseconds(e))}static getElapsedTimePartsFromS(e){if(!isFinite(e))return{hours:0,minutes:0,seconds:0};const t=e%3600,i=t%60;return{hours:Math.floor(e/3600),minutes:Math.floor(t/60),seconds:Math.floor(i)}}static getElapsedTimeStringFromS(e){const t=this.getElapsedTimePartsFromS(e),i=(t.seconds>9?"":"0")+t.seconds;if(t.hours>0){const e=(t.minutes>9?"":"0")+t.minutes;return t.hours+":"+e+":"+i}return t.minutes+":"+i}static getElapsedTimeStringFromMs(e){const t=Math.round(e/1e3);return this.getElapsedTimeStringFromS(t)}static getElapsedTimeStringInMsFromMs(e){const t=e%1e3,i=Math.floor(e/1e3);return this.getElapsedTimeStringFromS(i)+"."+t}static getUnixMillisecondsTimestamp(e){return new Date(e).getTime()}static getFormattedDuration(e,t=!1){let i="";const n=Math.floor(e/86400),o=86400*n,s=Math.floor((e-o)/3600),a=3600*s,r=Math.floor((e-o-a)/60),l=e-o-a-60*r,c=s>=1,u=r>=1,g=l>=0;return n>=1?i=d.getString(t?"DateTimeDuration.AccessibleDays":"DateTimeDuration.Days",{days:n}):c&&u&&g?i=d.getString(t?"DateTimeDuration.AccessibleHoursMinutesSeconds":"DateTimeDuration.HoursMinutesSeconds",{hours:s,minutes:r,seconds:l}):c&&u?i=d.getString(t?"DateTimeDuration.AccessibleHoursMinutes":"DateTimeDuration.HoursMinutes",{hours:s,minutes:r}):c&&g?i=d.getString(t?"DateTimeDuration.AccessibleHoursSeconds":"DateTimeDuration.HoursSeconds",{hours:s,seconds:l}):u&&g?i=d.getString(t?"DateTimeDuration.AccessibleMinutesSeconds":"DateTimeDuration.MinutesSeconds",{minutes:r,seconds:l}):u?i=d.getString(t?"DateTimeDuration.AccessibleMinutes":"DateTimeDuration.Minutes",{minutes:r}):g?i=d.getString(t?"DateTimeDuration.AccessibleSeconds":"DateTimeDuration.Seconds",{seconds:l}):c&&(i=d.getString(t?"DateTimeDuration.AccessibleHours":"DateTimeDuration.Hours",{hours:s})),i}static isTimestampValid(e){return n(e,["YYYY-MM-DD","YYYY-MM-DDTHH:mm:ssSSSZ"],!1).isValid()}static isTimestampPassed(e,t=!0){const i=l.attempt((()=>this.getUnixMillisecondsTimestamp(e)));if(l.isError(i))return t;return Date.now()>i}static isDateTimePassed(e){return Date.now()>e}static isNowWithinDateTimes(e,t){const i=Date.now();return e<i&&i<t}static getPostedTime(e,t=!1){const i=Math.floor((Date.now()-e)/1e3);if(i<60)return t?d.getString("HighlightsItemView.MediaPostedJustNowLowerCase"):d.getString("HighlightsItemView.MediaPostedJustNow");const n=Math.floor(i/60);if(n<60)return d.getString("HighlightsItemView.MediaPostedMinutes",{count:n});const o=Math.floor(i/3600);if(o<24)return d.getString("HighlightsItemView.MediaPostedHours",{count:o});const s=Math.floor(i/86400);return d.getString("HighlightsItemView.MediaPostedDays",{count:s})}static getDaysDifferenceToNow(e){const t=Math.floor((Date.now()-e)/1e3);return Math.floor(t/86400)}static roundToNextHour(e){const t=u.fromUnixMilliseconds(e);return t.setHours(t.getHours()+1),t.setMinutes(0),t.setSeconds(0),t.getTime()}static convertDateToUTC(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())}static getAbbreviatedDatetimeString(e){const t=u.fromUnixMilliseconds(e);return d.getString("DateTimeRelative.AbbreviatedDateTime",{day:c.getDayAbbreviatedName(t),monthDate:c.getMonthAndDateAbbreviatedName(t),year:c.getYear(t),time:u.getDisplayTimeString(e)})}static getConditionalDateTimeString(e){const t=-1*u.getDaysDifferenceToNow(e);return t<=2&&t>=0?u.getDisplayDateTimeString(e):u.getAbbreviatedDatetimeString(e)}static getLastSyncTime(e){const t=Math.floor((Date.now()-e)/1e3);if(t<60)return d.getString("UserSettingsPanel.SyncedJustNow");const i=Math.floor(t/60);if(i<60)return d.getString("UserSettingsPanel.SyncedMinutesAgo",{count:i});const n=Math.floor(t/3600);if(n<24)return d.getString("UserSettingsPanel.SyncedHoursAgo",{count:n});const o=Math.floor(t/86400);return 1===o?d.getString("UserSettingsPanel.SyncedYesterday"):o<31?d.getString("UserSettingsPanel.SyncedDaysAgo",{count:o}):u.getDisplayDateStringShort(e)}static convertPeriodToMiliseconds(e){if(!e)return;const[t,i]=l.split(e,"."),o=Number(t);return l.includes(this.getSupportedDayJsPeriods(),i)&&l.isInteger(o)?n(0).add(o,i).valueOf():void 0}static getSupportedDayJsPeriods(){return["years","quarters","months","weeks","days","hours","minutes","seconds"]}}t.default=u,u._secondsPerMinute=60,u._secondsPerHour=60*u._secondsPerMinute,u._secondsPerDay=24*u._secondsPerHour,u._secondsPerYear=365*u._secondsPerDay,u.getFullDateTimeString=e=>{const t=u.fromUnixMilliseconds(e);return d.getString("DateTimeRelative.DayAtTime",{day:c.getDateLong(t),time:c.getTimeShort(t)})}},79041:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(86192),o=i(75463),s=(i(97691),i(22538));t.default=new class{constructor(){s.RegisterStartupable(this,"EntropyService")}startup(){return n.Entropy.getCryptoStrongRandomValues(48).then((e=>{o.initPrng(e)}))}}},75235:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExceptionReporter=void 0;const n=i(52210),o=i(36237),s=i(4057);let a;t.ExceptionReporter=class{constructor(){this._handlers=[],window.onerror=(e,t,i,a,...r)=>{let l="",c="";r&&r[0]&&(l=r[0].stack||l,c=r[0].name||c);const d={errorMessage:e.toString(),source:t,fileNumber:i,columnNumber:a,errorName:c,stackTrace:l};let u=!1;if(this._handlers.forEach((e=>{try{null!==e&&e(d)}catch(e){o.error(n.LogTraceArea.ExceptionHandling,"Error handling Exception: "+s.default.errorAsString(e))}})),null!==this._primaryHandler)try{this._primaryHandler(d),u=!0}catch(e){o.error(n.LogTraceArea.ExceptionHandling,"Error handling Exception: "+s.default.errorAsString(e))}return u}}_wrapGlobalHandler(e,t){let i="";e.stack&&(i=e.stack||i);const r={errorMessage:e.message,source:"",fileNumber:-1,columnNumber:-1,errorName:e.name,stackTrace:i};this._handlers.forEach((e=>{try{null!==e&&e(r)}catch(e){o.error(n.LogTraceArea.ExceptionHandling,"Error handling Exception: "+s.default.errorAsString(e))}})),null!==this._primaryHandler&&this._primaryHandler(r).then((()=>{a})).catch((e=>{o.error(n.LogTraceArea.ExceptionHandling,"Error handling Exception: "+s.default.errorAsString(e))}))}setPrimaryHandler(e){null!==e&&(this._primaryHandler=e)}registerAlertView(e){this._handlers.push((t=>{e()&&window.alert("DEBUG ALERT: Uncaught Exception\n"+t.errorMessage+"\n"+t.source+" ("+t.fileNumber+","+t.columnNumber+")")}))}registerConsoleView(){this._handlers.push((e=>{o.error(n.LogTraceArea.ExceptionHandling,"DEBUG ALERT: Uncaught Exception\n"+e.errorMessage+"\n"+e.source+" ("+e.fileNumber+","+e.columnNumber+")\nStack:\n"+e.stackTrace)}))}unregister(){this._handlers=[]}}},49679:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getISO8601Time=t.getISO8601Date=t.toStringWithFormattedDecimalSeparator=t.getDayAndMonthLong=t.getYear=t.getMonthAndDateAbbreviatedName=t.getMonthAndYear=t.getDayAndMonth=t.getDayAbbreviatedName=t.getDayName=t.getTimeShort=t.getTimeLong=t.getDateShort=t.getDateLong=t.setLocale=void 0;const n=i(96486),o=i(26554),s=i(47662),a=i(33754);let r="en-us",l=i(81318),c=new o("en-us"),d={};const u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function h(e,t){return d[t]||(d[t]=c.compile(t)),d[t]({d:e.getDate(),dd:n.padStart(e.getDate().toString(),2,"0"),ddd:a.getStringUnsafe("DayAbbreviatedName."+u[e.getDay()]),dddd:a.getStringUnsafe("DayLongName."+u[e.getDay()]),h:p(e),hh:n.padStart(p(e).toString(),2,"0"),H:e.getHours(),HH:n.padStart(e.getHours().toString(),2,"0"),m:e.getMinutes(),mm:n.padStart(e.getMinutes().toString(),2,"0"),M:e.getMonth()+1,MM:n.padStart((e.getMonth()+1).toString(),2,"0"),MMM:a.getStringUnsafe("MonthAbbreviatedName."+g[e.getMonth()]),MMMM:a.getStringUnsafe("MonthLongName."+g[e.getMonth()]),s:e.getSeconds(),ss:n.padStart(e.getSeconds().toString(),2,"0"),tt:e.getHours()/12>=1?l.Time.PMFormat:l.Time.AMFormat,yy:n.padStart(e.getFullYear().toString(),4,"0").substr(2),yyyy:n.padStart(e.getFullYear().toString(),4,"0")})}function p(e){const t=e.getHours()%12;return 0===t?12:t}t.setLocale=function(e){let t=s.normalizeLocale(e);if(t===r)return;let n=function(e){let t;switch(e){case"ar-ae":t=i(14779);break;case"ar-eg":t=i(24922);break;case"ar-iq":t=i(41602);break;case"ar-kw":t=i(78449);break;case"ar-sa":t=i(17019);break;case"ar-us":t=i(4245);break;case"az-az":t=i(23584);break;case"bg-bg":t=i(98038);break;case"ca-es":t=i(56521);break;case"cs-cz":t=i(7504);break;case"da-dk":t=i(25005);break;case"de-at":t=i(17160);break;case"de-ch":t=i(96947);break;case"de-de":t=i(63254);break;case"el-gr":t=i(17110);break;case"en-ae":t=i(70754);break;case"en-af":t=i(39954);break;case"en-al":t=i(48675);break;case"en-at":t=i(42089);break;case"en-au":t=i(59720);break;case"en-bd":t=i(9612);break;case"en-be":t=i(1721);break;case"en-bg":t=i(78933);break;case"en-bh":t=i(84306);break;case"en-br":t=i(9327);break;case"en-ca":t=i(24269);break;case"en-ch":t=i(96608);break;case"en-cn":t=i(41475);break;case"en-co":t=i(56942);break;case"en-de":t=i(41544);break;case"en-dk":t=i(34126);break;case"en-ee":t=i(48730);break;case"en-eg":t=i(75131);break;case"en-es":t=i(25709);break;case"en-fi":t=i(1943);break;case"en-fr":t=i(83708);break;case"en-gb":t=i(20711);break;case"en-ge":t=i(19537);break;case"en-gr":t=i(33982);break;case"en-hk":t=i(82722);break;case"en-id":t=i(62248);break;case"en-ie":t=i(10174);break;case"en-il":t=i(50425);break;case"en-in":t=i(48496);break;case"en-iq":t=i(70295);break;case"en-it":t=i(13839);break;case"en-jo":t=i(48229);break;case"en-jp":t=i(80509);break;case"en-kh":t=i(36922);break;case"en-kr":t=i(72709);break;case"en-kw":t=i(53766);break;case"en-lb":t=i(79053);break;case"en-lk":t=i(1004);break;case"en-lt":t=i(15520);break;case"en-lv":t=i(17695);break;case"en-mx":t=i(90403);break;case"en-my":t=i(23916);break;case"en-ng":t=i(11809);break;case"en-nl":t=i(26016);break;case"en-no":t=i(94708);break;case"en-nz":t=i(8281);break;case"en-ph":t=i(83434);break;case"en-pk":t=i(80733);break;case"en-pl":t=i(2623);break;case"en-pt":t=i(29284);break;case"en-qa":t=i(31351);break;case"en-ro":t=i(27472);break;case"en-rs":t=i(28716);break;case"en-ru":t=i(422);break;case"en-sa":t=i(87535);break;case"en-se":t=i(68771);break;case"en-sg":t=i(98184);break;case"en-si":t=i(29508);break;case"en-th":t=i(62256);break;case"en-u":t=i(55741);break;case"en-vn":t=i(61906);break;case"en-za":t=i(96759);break;case"es-ar":t=i(35724);break;case"es-cl":t=i(70179);break;case"es-co":t=i(54367);break;case"es-cr":t=i(41692);break;case"es-ec":t=i(46008);break;case"es-es":t=i(12927);break;case"es-gt":t=i(44636);break;case"es-mx":t=i(77827);break;case"es-pe":t=i(84234);break;case"es-us":t=i(77918);break;case"es-uy":t=i(48345);break;case"es-ve":t=i(10552);break;case"et-ee":t=i(4152);break;case"fa-ir":t=i(12090);break;case"fi-fi":t=i(37537);break;case"fr-be":t=i(41234);break;case"fr-ca":t=i(1376);break;case"fr-ch":t=i(54735);break;case"fr-dz":t=i(67156);break;case"fr-fr":t=i(74027);break;case"fr-us":t=i(68249);break;case"he-il":t=i(14136);break;case"hi-in":t=i(96802);break;case"hr-hr":t=i(19569);break;case"hu-hu":t=i(34381);break;case"id-id":t=i(49745);break;case"it-ch":t=i(70161);break;case"it-it":t=i(80927);break;case"ja-jp":t=i(71133);break;case"ja-us":t=i(92282);break;case"ka-ge":t=i(46617);break;case"ko-kr":t=i(4089);break;case"lt-lt":t=i(35581);break;case"lv-lv":t=i(67193);break;case"mk-mk":t=i(66884);break;case"ms-my":t=i(39893);break;case"nb-no":t=i(46718);break;case"nl-be":t=i(35184);break;case"nl-nl":t=i(36094);break;case"pl-gb":t=i(11400);break;case"pl-pl":t=i(39964);break;case"pt-br":t=i(68558);break;case"pt-pt":t=i(3263);break;case"ro-md":t=i(74916);break;case"ro-ro":t=i(36670);break;case"ru-am":t=i(98277);break;case"ru-az":t=i(77934);break;case"ru-by":t=i(37462);break;case"ru-gb":t=i(66924);break;case"ru-ge":t=i(6389);break;case"ru-il":t=i(58761);break;case"ru-kz":t=i(8595);break;case"ru-lv":t=i(36200);break;case"ru-md":t=i(65821);break;case"ru-ru":t=i(14001);break;case"ru-ua":t=i(17519);break;case"ru-us":t=i(21450);break;case"sk-sk":t=i(17743);break;case"sl-si":t=i(5947);break;case"sr-latn-rs":t=i(63076);break;case"sv-se":t=i(89893);break;case"th-th":t=i(98585);break;case"tr-az":t=i(76858);break;case"tr-tr":t=i(20844);break;case"uk-ua":t=i(36501);break;case"uk-us":t=i(93091);break;case"vi-jp":t=i(77970);break;case"vi-us":t=i(84169);break;case"vi-vn":t=i(60831);break;case"zh-cn":t=i(73883);break;case"zh-hk":t=i(21832);break;case"zh-tw":t=i(56163)}return t}(t);n||("zh-hant"===t.substr(0,7)?n=i(56163):(n=function(e){switch(e){case"sa":return i(17019);case"de":return i(63254);case"us":return i(81318);case"es":return i(12927);case"ee":return i(4152);case"fr":return i(74027);case"il":return i(14136);case"in":return i(96802);case"it":return i(80927);case"jp":return i(71133);case"nl":return i(36094);case"br":return i(68558);case"tr":return i(20844);case"ru":return i(14001);case"cn":return i(73883);case"bg":return i(98038);case"hr":return i(19569);case"cz":return i(7504);case"dk":return i(25005);case"fi":return i(37537);case"gr":return i(17110);case"hu":return i(34381);case"id":return i(49745);case"kr":return i(4089);case"lv":return i(67193);case"lt":return i(35581);case"my":return i(39893);case"no":return i(46718);case"pl":return i(39964);case"ro":return i(36670);case"rs":return i(63076);case"sk":return i(17743);case"si":return i(5947);case"se":return i(89893);case"th":return i(98585);case"ua":return i(36501);case"vn":return i(60831)}return}(t.substr(3,2)),n||(n=function(e){let t;switch(e){case"ar":t=i(17019);break;case"de":t=i(63254);break;case"en":t=i(81318);break;case"es":case"gl":case"eu":t=i(12927);break;case"et":t=i(4152);break;case"fr":t=i(74027);break;case"he":case"iw":t=i(14136);break;case"hi":t=i(96802);break;case"it":t=i(80927);break;case"ja":t=i(71133);break;case"nl":t=i(36094);break;case"pt":t=i(68558);break;case"tr":t=i(20844);break;case"ru":t=i(14001);break;case"zh":t=i(73883);break;case"bg":t=i(98038);break;case"ca":t=i(56521);break;case"hr":t=i(19569);break;case"cs":t=i(7504);break;case"da":t=i(25005);break;case"fi":t=i(37537);break;case"el":t=i(17110);break;case"hu":t=i(34381);break;case"id":t=i(49745);break;case"ko":t=i(4089);break;case"lv":t=i(67193);break;case"lt":t=i(35581);break;case"ms":t=i(39893);break;case"nb":t=i(46718);break;case"pl":t=i(39964);break;case"ro":t=i(36670);break;case"sr":t=i(63076);break;case"sk":t=i(17743);break;case"sl":t=i(5947);break;case"sv":t=i(89893);break;case"th":t=i(98585);break;case"uk":t=i(36501);break;case"vi":t=i(60831)}return t}(t.substr(0,2))))),n?l=n:(t="en-us",l=i(81318)),d={},c=new o(t),r=t},t.getDateLong=function(e){return h(e,l.Date.LongDateFormat)},t.getDateShort=function(e){return h(e,l.Date.ShortDateFormat)},t.getTimeLong=function(e){return h(e,l.Time.LongTimeFormat)},t.getTimeShort=function(e){return h(e,l.Time.ShortTimeFormat)},t.getDayName=function(e){return h(e,"{dddd}")},t.getDayAbbreviatedName=function(e){return h(e,"{ddd}")},t.getDayAndMonth=function(e){return h(e,l.Date.DayAndMonthFormat)},t.getMonthAndYear=function(e){return h(e,"{MMMM} {yyyy}")},t.getMonthAndDateAbbreviatedName=function(e){return h(e,"{MMM} {d}")},t.getYear=function(e){return h(e,"{yyyy}")},t.getDayAndMonthLong=function(e){return h(e,"{MMMM} {d}")},t.toStringWithFormattedDecimalSeparator=function(e,t,i){let o=e.toString();if(i&&(o=n.round(e,i).toString()),t){let e=o.split(".");e[1]=function(e,t){let i=e;for(let n=e.length;n<t;n+=1)i+="0";return i}(e[1]||"",t),o=e.join(".")}return o.replace(".",l.Number.DecimalSeparator)},t.getISO8601Date=function(e){return h(e,"{yyyy}{MM}{dd}")},t.getISO8601Time=function(e){return h(e,"{HH}{mm}{ss}")}},17379:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Priority=t.TaskTypeFlags=void 0;const n=i(96486),o=i(52210),s=i(52210),a=i(97691),r=i(22538),l=i(12770);var c,d;!function(e){e[e.CpuIntensive=1]="CpuIntensive",e[e.UsesNetworking=2]="UsesNetworking"}(c=t.TaskTypeFlags||(t.TaskTypeFlags={})),function(e){e[e.Low=1]="Low",e[e.Normal=2]="Normal",e[e.High=3]="High",e[e.Critical=4]="Critical"}(d=t.Priority||(t.Priority={}));const u={uiDisplayed:!1,inCall:!1,inCallEstablishment:!1,networkingAvailable:!1,busyTaskDelay:250,afterUiShownDelay:2500};t.default=new class{constructor(){this._tasks=[],this._issState=u,this._nextTaskExecutionTime=Number.MAX_VALUE,this._checkState=()=>{if(this.test_isInExternalUnitTest()){const e=this._tasks;return this._tasks=[],void n.each(e,(e=>e.callback()))}this._idleScheduler&&(l.default.clearTimeout(this._idleScheduler),this._idleScheduler=void 0),this._issState.uiDisplayed&&0!==this._tasks.length&&(this._checkStateTimer&&(l.default.clearExpiration(this._checkStateTimer),this._checkStateTimer=void 0),this._idleScheduler=l.default.setTimeout((()=>{const e=Date.now();let t=!1,i=!1;n.each(this._tasks,(a=>{if(e<this._nextTaskExecutionTime&&a.flags&c.CpuIntensive)return i=!0,!0;const r=a.flags&(c.UsesNetworking|c.CpuIntensive);return!!(this._issState.inCallEstablishment&&a.priority<d.Critical)||(!!(this._issState.inCall&&r&&a.priority<d.High)||(!(this._issState.networkingAvailable||!(a.flags&c.UsesNetworking))||(n.pull(this._tasks,a),o.log(s.LogTraceArea.IdleSchedulingService,"Executing Idle Task: "+a.name+", was queued for: "+(Date.now()-a.queuedAt)+"ms priority: "+d[a.priority]),a.callback(),t=!0,a.flags&c.CpuIntensive&&this._bumpBusyTimer(),!1)))})),this._idleScheduler=void 0,t?n.defer(this._checkState):i&&(this._checkStateTimer=l.default.setExpiration(this._checkState,this._nextTaskExecutionTime))}),0))},r.RegisterStartupable(this,"IdleSchedulingService")}test_resetParams(){this._tasks=[],this._nextTaskExecutionTime=Number.MAX_VALUE,this._issState=u}startup(){return this._checkState(),a.Resolved()}updateAppState(e){return!!this._update(e)}updateOptions(e){return!!this._update(e)}test_update(e){const t=this._update(e),i=n.fromPairs(n.intersectionWith(n.toPairs(e),n.toPairs(t),n.isEqual));return n.isEmpty(i)?void 0:i}_update(e){const t=n.fromPairs(n.differenceWith(n.toPairs(e),n.toPairs(this._issState),n.isEqual)),i=n.extend({},this._issState,e);if(o.log(s.LogTraceArea.IdleSchedulingService,`oldState: ${JSON.stringify(this._issState)} partialState: ${JSON.stringify(e)} diffState: ${JSON.stringify(t)}`),!n.isEmpty(t))return this._issState=i,n.each(t,((e,t)=>{if("uiDisplayed"===t)this._nextTaskExecutionTime=Date.now()+this._issState.afterUiShownDelay})),this._checkState(),t}indicateBusyOperation(){this._bumpBusyTimer(),this._checkState()}_bumpBusyTimer(){this._nextTaskExecutionTime=Math.max(this._nextTaskExecutionTime,Date.now()+this._issState.busyTaskDelay)}queueIdleTask(e,t,i,o=d.Normal){let s={name:e,flags:t,callback:i,queuedAt:Date.now(),priority:o};const a=n.sortedLastIndexBy(this._tasks,s,(e=>-e.priority));this._tasks.splice(a,0,s),this._checkState()}test_isInExternalUnitTest(){return!1}}},36237:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTraceEnabled=t.piiTrustMeThisIsSafe=t.setShouldFindPotentialPii=t.setEcsOptions=t.setLocalTracingMasks=t.throttleTrack=t.flush=t.track=t.warn=t.log=t.error=t.debug=t.getLogHistory=t.output=t.devWarningEvent=t.devErrorEvent=void 0;i(74958);const n=i(96486),o=i(52210),s=i(97691),a=i(40363),r=i(35478);var l=i(52210);function c(e){r.default.addEvent(e)}Object.defineProperty(t,"devErrorEvent",{enumerable:!0,get:function(){return l.devErrorEvent}}),Object.defineProperty(t,"devWarningEvent",{enumerable:!0,get:function(){return l.devWarningEvent}}),Object.defineProperty(t,"output",{enumerable:!0,get:function(){return l.output}}),t.getLogHistory=function(){return(0,o.getLogHistory)()},t.debug=o.debug,t.error=o.error,t.log=o.log,t.warn=o.warn,t.track=c,t.flush=function(){let e=s.Resolved();return r.default.isInitialized()&&(e=r.default.flush()),e};const d=e=>{c(e)};t.throttleTrack=function(e){return n.throttle(d,e)},t.setLocalTracingMasks=function(e){(0,o.setLocalTracingMasks)(e)},t.setEcsOptions=function(e,t){(0,o.setEcsOptions)(e,t)},t.setShouldFindPotentialPii=function(e){(0,o.setShouldFindPotentialPii)(e)},t.piiTrustMeThisIsSafe=function(e){return(0,o.piiTrustMeThisIsSafe)(e)},t.isTraceEnabled=function(e){return(0,o.isTraceEnabled)(e)},(0,o.setEnableDebug)((()=>a.default.isDebug()));console.log=function(...e){(0,o.log)(o.LogTraceArea.GenericUnsafe,...e)},console.warn=function(...e){(0,o.warn)(o.LogTraceArea.GenericUnsafe,...e)},console.debug=function(...e){(0,o.debug)((()=>e))},console.error=function(...e){(0,o.error)(o.LogTraceArea.GenericUnsafe,...e)},(0,o.updateLogLevels)()},47662:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeLocale=t.getLocalizeParamForGender=void 0;i(96486);const n=i(78262);t.getLocalizeParamForGender=function(e){return e===n.eGender.Male?"male":e===n.eGender.Female?"female":"other"},t.normalizeLocale=function(e){return e.toLowerCase()}},33754:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forceRTL=t.isRTLLanguage=t.isEnglishLanguage=t.isLocaleSupported=t.getParts=t.getString=t.getStringUnsafe=t.setLocale=t.resetLocaleToSystem=t.setSystemLocale=t.tests_getRawString=t.localeChangedEvent=t.languageChangedEvent=t.getLocale=t.getLanguageFromLocale=t.clearStringCache=t.getResetLanguageOptionString=t.cacheLanguage=void 0;const n=i(16778),o=i(77590),s=i(96486),a=i(27302),r=i(97691),l=i(74634),c=i(47261),d=i(47662),u=i(4057),g=i(40363),h=i(96588),p=new o.default({normalizeLocale:d.normalizeLocale,getLocaleInfoFromLocale:function(e){let t=o.default.fallbackLocale(e,Object.keys(m),"en-US");if("en-US"===t)return r.Resolved({newLocale:t,localizedStringTable:h});if(t in S)return r.Resolved({newLocale:t,localizedStringTable:S[t]});const i=m[t],n="resources/strings/";return a.default.readAssetFile(n+i).catch((()=>a.default.readAssetFile("strings/"+i))).then((e=>{const i=u.default.parseJsonErrorable(e);return s.isError(i)?r.Rejected(i):(C(t,i),{newLocale:t,localizedStringTable:i})}))},defaultStringTable:h}),m={"ar-SA":"LocalizedStrings_ar.json","bg-BG":"LocalizedStrings_bg.json","ca-ES":"LocalizedStrings_ca.json","cs-CZ":"LocalizedStrings_cs.json","da-DK":"LocalizedStrings_da.json","de-DE":"LocalizedStrings_de.json","el-GR":"LocalizedStrings_el.json","en-GB":"LocalizedStrings_en-GB.json","en-US":"LocalizedStrings_en.json","es-ES":"LocalizedStrings_es.json","es-MX":"LocalizedStrings_es-MX.json","et-EE":"LocalizedStrings_et.json","fi-FI":"LocalizedStrings_fi.json","fr-CA":"LocalizedStrings_fr-CA.json","fr-FR":"LocalizedStrings_fr.json","he-IL":"LocalizedStrings_he.json","hi-IN":"LocalizedStrings_hi.json","hr-HR":"LocalizedStrings_hr.json","hu-HU":"LocalizedStrings_hu.json","id-ID":"LocalizedStrings_id.json","it-IT":"LocalizedStrings_it.json","ja-JP":"LocalizedStrings_ja.json","ko-KR":"LocalizedStrings_ko.json","lt-LT":"LocalizedStrings_lt.json","lv-LV":"LocalizedStrings_lv.json","ms-MY":"LocalizedStrings_ms.json","nb-NO":"LocalizedStrings_nb.json","nl-NL":"LocalizedStrings_nl.json","pl-PL":"LocalizedStrings_pl.json","pt-BR":"LocalizedStrings_pt-BR.json","pt-PT":"LocalizedStrings_pt.json","qps-ploc":"LocalizedStrings_qps-ploc.json","qps-ploca":"LocalizedStrings_qps-ploca.json","qps-plocm":"LocalizedStrings_qps-plocm.json","ro-RO":"LocalizedStrings_ro.json","ru-RU":"LocalizedStrings_ru.json","sk-SK":"LocalizedStrings_sk.json","sl-SI":"LocalizedStrings_sl.json","sr-Latn-RS":"LocalizedStrings_sr-Latn.json","sv-SE":"LocalizedStrings_sv.json","th-TH":"LocalizedStrings_th.json","tr-TR":"LocalizedStrings_tr.json","uk-UA":"LocalizedStrings_uk.json","vi-VN":"LocalizedStrings_vi.json","zh-CN":"LocalizedStrings_zh-CN.json","zh-TW":"LocalizedStrings_zh-TW.json"};let S={en:h,"en-US":h};function C(e,t){S[e]=t}function f(e){const t=e.substr(0,2);switch(t){case"es":case"gl":case"eu":return"es";case"he":case"iw":return"he";case"ar":case"bg":case"ca":case"cs":case"da":case"de":case"el":case"en":case"et":case"fi":case"fr":case"hi":case"hr":case"hu":case"id":case"it":case"ja":case"ko":case"lt":case"lv":case"ms":case"nb":case"nl":case"pl":case"pt":case"qp":case"ro":case"ru":case"sk":case"sl":case"sr":case"sv":case"th":case"tr":case"uk":case"vi":return t;default:return""}}function y(e,t){return"auto-auto"===p.getLocale()?e+"^"+JSON.stringify(t):p.getString(e,t)}function _(e){let t;return e?(t=e.toLowerCase().trim(),0===t.indexOf("he")||0===t.indexOf("ar")):(t=p.getLanguageFromLocale().toLowerCase().trim(),"he"===t||"ar"===t)}t.cacheLanguage=C,t.getResetLanguageOptionString=function(){const e=f(p.getLocale()),t=f(g.default.getSystemLanguage()),i=p.getString("SettingsLanguages.ResetLanguageOption");return t&&t===e||!t&&"en"===e?i:t?`${i} - ${p.getString("ResetLanguageOption."+t)}`:`${i} - ${h.SettingsLanguages.ResetLanguageOption}`},t.clearStringCache=p.clearStringCache,t.getLanguageFromLocale=p.getLanguageFromLocale,t.getLocale=p.getLocale,t.languageChangedEvent=new l.default,t.localeChangedEvent=new l.default,t.tests_getRawString=p.tests_getRawString,t.setSystemLocale=function(e){return p.setSystemLocale(e).then((()=>v()))},t.resetLocaleToSystem=function(){return p.resetLocaleToSystem().then((()=>v()))},t.setLocale=function(e){return p.setLocale(e,_(e)).then((()=>v()))},t.getStringUnsafe=y,t.getString=function(e,t){return y(e,t)},t.getParts=function(e,t,i){return"auto-auto"===p.getLocale()?[e+"^"+JSON.stringify(t)]:p.getParts(e,t,i)},t.isLocaleSupported=function(e){return-1!==s.indexOf(Object.keys(m),e)},t.isEnglishLanguage=function(){return"en"===p.getLanguageFromLocale().toLowerCase().trim()},t.isRTLLanguage=_;function v(){{const e=_();c.I18nManager.allowRTL(e),c.I18nManager.forceRTL(e),n.International.allowRTL(e),n.International.forceRTL(e)}t.languageChangedEvent.fire(p.getLanguageFromLocale()),t.localeChangedEvent.fire(p.getLocale())}t.forceRTL=function(e){n.International.forceRTL(e),n.International.allowRTL(e),c.I18nManager.forceRTL(e),c.I18nManager.allowRTL(e)}},10909:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MiniToastMessage=void 0;const n=i(96486),o=i(52210),s=i(16778),a=i(74634),r=i(36237);class l{constructor(e){this.params=e}}t.MiniToastMessage=l;t.default=new class{constructor(){this._bottomMarginEntries=[],this.showToastEvent=new a.default,this._currentMessages=[],this._keyCount=0,this._bottomMargin=0,this._defaultBottomMargin=0,this._baseBottomMargin=0}scheduleMessage(e){this._currentMessages.push(new l(e)),this._showToastMessage()}scheduleTextMessage(e,t,i){const n=t||"key"+this._keyCount++;this.scheduleMessage({key:n,textMessage:e,rootViewId:i})}removeToastMessage(e){this._displayedMessage&&this._displayedMessage.params.key===e?this.toastDismissed(e,!0):n.remove(this._currentMessages,(t=>t.params.key===e))}toastDismissed(e,t=!1){(!e||this._displayedMessage&&this._displayedMessage.params.key===e)&&(this._displayedMessage=void 0),this._showToastMessage(t)}setBottomMarginDefault(e){r.log(o.LogTraceArea.GenericUnsafe,"MiniToastService:setBottomMarginDefault - "+e),this._defaultBottomMargin=e,this._updateBottomMargin()}addOrUpdateBottomMargin(e,t){r.log(o.LogTraceArea.GenericUnsafe,"MiniToastService:addOrUpdateBottomMargin - "+e),this._addMarginListEntry({key:e,bottomMargin:t}),this._updateBottomMargin()}removeBottomMargin(e){const t=n.findIndex(this._bottomMarginEntries,(t=>t.key===e));-1!==t&&(r.log(o.LogTraceArea.GenericUnsafe,"MiniToastService:removeBottomMargin - "+e),this._bottomMarginEntries.splice(t,1),this._updateBottomMargin())}setBottomMarginBase(e){this._baseBottomMargin=e}_addMarginListEntry(e){const t=n.findIndex(this._bottomMarginEntries,(t=>t.key===e.key));-1!==t?(r.log(o.LogTraceArea.GenericUnsafe,"MiniToastService: Modified old entry - "+e.key),this._bottomMarginEntries[t]=e):(r.log(o.LogTraceArea.GenericUnsafe,"MiniToastService: Pushed new entry - "+e.key),this._bottomMarginEntries.push(e))}_updateBottomMargin(){const e=n.last(this._bottomMarginEntries),t=e?e.bottomMargin:this._defaultBottomMargin;this._bottomMargin!==t&&(r.log(o.LogTraceArea.GenericUnsafe,"MiniToastService: updating bottom margin "+t),this._bottomMargin=t,this._displayedMessage&&this.showToastEvent.fire(this._displayedMessage,this._totalBottomInset()))}_showToastMessage(e=!1){const t=n.head(this._currentMessages),i=s.App.getActivationState()===s.Types.AppActivationState.Active;(this._displayedMessage||t||e)&&i&&!this._displayedMessage&&(this.showToastEvent.fire(t,this._totalBottomInset()),this._currentMessages.shift(),this._displayedMessage=t)}_totalBottomInset(){return this._baseBottomMargin+this._bottomMargin}}},67024:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setSampledScenarios=t.SampledScenarios=void 0;const n=i(52210),o=i(96486),s=(i(89391),i(36237)),a=i(15963),r=i(56796);t.SampledScenarios={},t.setSampledScenarios=function(e){t.SampledScenarios=e};t.default=new class{constructor(){this._perfTrackerList=new Map}createTracker(e,t,i,o=!1,l=!1){if(!this._isScenarioTrackingEnabled(t))return;let c=new r.PerfTracker(t,i,e,o);if(l&&this._perfTrackerList.size>0){let i=!1;if(this._perfTrackerList.forEach((e=>{e.getScenarioName()!==t||(i=!0)})),i)return void s.warn(n.LogTraceArea.Responsiveness,"createTracker "+a.ScenarioName[t]+" | Tracker ["+e+"]  for tracking "+a.ScenarioName+" already exists.")}this._perfTrackerList.set(e,c),s.log(n.LogTraceArea.Responsiveness,"createTracker "+a.ScenarioName[t]+" | Tracker ["+e+"] created.")}removeTracker(e){if(!this._isGlobalTrackingEnabled())return;let t=this._perfTrackerList.get(e);t?t.cancelTimeout():s.log(n.LogTraceArea.Responsiveness,"removeTracker | Tracker ["+e+"] not found.");let i=this._perfTrackerList.delete(e);s.log(n.LogTraceArea.Responsiveness,"removeTracker | Tracker ["+e+"] was "+(i?"deleted":"not deleted"))}markPress(e,t,i=!1){if(!this._isGlobalTrackingEnabled())return;let o=this._perfTrackerList.get(e);o?o.markPress(t,i).then((t=>{s.log(n.LogTraceArea.Responsiveness,"markPress | Tracker ["+e+"]  - last press delay : "+t)})):s.log(n.LogTraceArea.Responsiveness,"markPress | Tracker ["+e+"] not found.")}markActionDone(e){if(!this._isGlobalTrackingEnabled())return;let t=this._perfTrackerList.get(e);t?t.markActionDone():s.log(n.LogTraceArea.Responsiveness,"markActionDone | Tracker ["+e+"] not found.")}cancelTimeout(e){if(!this._isGlobalTrackingEnabled())return;let t=this._perfTrackerList.get(e);t?t.cancelTimeout():s.log(n.LogTraceArea.Responsiveness,"cancelTimeout | Tracker ["+e+"] not found.")}createTrackerAndMarkPressTime(e,t,i,o,a=!1){this.createTracker(e,t,o,a),s.log(n.LogTraceArea.Responsiveness,"createTracker <-> markPress"),this.markPress(e,i)}markActionDoneAndRemoveTracker(e){this.markActionDone(e),this.removeTracker(e)}createOneShotTrackerAndMarkPressTime(e,t,i,n,o=!1){this.createTracker(e,t,n,o),this.markPress(e,i,!0),this.removeTracker(e)}_isSampleRatePositive(e){if(o.isEmpty(t.SampledScenarios))return s.debug((()=>"SampledScenarios not populated. Disable now.")),!1;const i=a.ScenarioName[e],r=t.SampledScenarios[i];return s.debug((()=>"Scenario "+i+" sample rate : "+r)),!!(o.isNumber(r)&&r>0)&&(s.log(n.LogTraceArea.Responsiveness,"Scenario sample rate available and enabled for some percentage. Enable now"),!0)}_isGlobalTrackingEnabled(){return!1}_isScenarioTrackingEnabled(e){return this._isGlobalTrackingEnabled()&&this._isSampleRatePositive(e)}}},56796:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PerfTracker=void 0;const n=i(97691),o=i(15963),s=i(12324),a=i(53374),r=(i(89391),i(36237)),l=i(66355);t.PerfTracker=class{constructor(e,t,i=a.default.newCauseId(),n=!1){this._pressTimeMarked=!1,this._scenarioName=e,this._trackerId=i,this._telemetryScenario=new s.ResponsivenessTelemetryScenario(e,t,n)}markPress(e,t=!1){if(!this._isScenarioTrackingEnabled())return n.Rejected();r.debug((()=>"markPress "+o.ScenarioName[this._scenarioName]+" ["+this._trackerId+"]")),this._pressTimeMarked=!0;const i=Math.floor(e.nativeEvent.timestamp);this._telemetryScenario.startResponsivenessScenario();const a=Date.now();if(this._pressTimestamp=a,a<i)return this._closeScenarioWithError(s.ResponsivenessScenarioStep.DelayComputationError),n.Rejected();const c=a-i;return r.log(l.LogTraceArea.Responsiveness,o.ScenarioName[this._scenarioName]+" ["+this._trackerId+"] Native Press: "+i+" | JS Press: "+a+" | PressDelay: "+c),this._telemetryScenario.markStep(s.ResponsivenessScenarioStep.OnJsPress,c),t&&this._closeScenario(),n.fromThenable(Promise.resolve(c))}markActionDone(){if(!this._isScenarioTrackingEnabled())return;r.debug((()=>"markActionDone "+o.ScenarioName[this._scenarioName]+" ["+this._trackerId+"]"));const e=Date.now();if(e<this._pressTimestamp)return void this._closeScenarioWithError(s.ResponsivenessScenarioStep.DelayComputationError);const t=e-this._pressTimestamp;r.log(l.LogTraceArea.Responsiveness,o.ScenarioName[this._scenarioName]+" ["+this._trackerId+"] ActionDoneDelay: "+t),this._telemetryScenario.markStep(s.ResponsivenessScenarioStep.ActionDone,t),this._closeScenario()}setTraceOnly(e){this._telemetryScenario.traceOnly(e)}getScenarioName(){return this._scenarioName}cancelTimeout(){this._telemetryScenario.cancelTimeoutTimer()}_closeScenario(){this._isScenarioTrackingEnabled()&&(r.debug((()=>"close scenario "+o.ScenarioName[this._scenarioName]+" ["+this._trackerId+"]")),this._telemetryScenario.markStep(s.ResponsivenessScenarioStep.ActionClosed),this._telemetryScenario.cancelTimeoutTimer())}_closeScenarioWithError(e){this._isScenarioTrackingEnabled()&&(r.debug((()=>"close scenario with error"+o.ScenarioName[this._scenarioName]+" ["+this._trackerId+"]")),this._telemetryScenario.markStep(e),this._telemetryScenario.cancelTimeoutTimer())}_isScenarioTrackingEnabled(){return!1}}},50325:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reloadApp=void 0;const n=i(54431),o=i(52210),s=i(52210);t.reloadApp=function(e){s.log(o.LogTraceArea.Startup,`Reloading app (causeId ${e})`),n.default.reload()}},14976:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dev_unknownOmit=t.trustMeThisJsonIsSafe=t.mriOrId=void 0;const n=i(74958),o=i(52210);t.mriOrId=function(e){return e&&n.pii.Mri(e)},t.trustMeThisJsonIsSafe=function(e){return(0,o.piiTrustMeThisIsSafe)(JSON.stringify(e))},t.dev_unknownOmit=function(e){return e?n.pii.Omit(e):""}},73055:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupEnvironment=void 0;const n=i(96486),o=(i(29860),i(99331)),s=i(52210),a=(i(75463),i(16778),i(88837)),r=i(62783),l=i(97691),c=i(63060),d=i(75235),u=i(36237),g=i(4057),h=i(12770);t.setupEnvironment=function(e){h.default.initialize(),a.Options.development=!1,a.Options.preventTryCatchInRender=!0,l.config.catchExceptions=!1,l.config.exceptionHandler=e=>{if(e)throw u.error(s.LogTraceArea.ExceptionHandling,g.default.errorAsString(e)),e},l.config.unhandledErrorHandler=e=>{u.warn(s.LogTraceArea.ExceptionHandling,"Unhandled rejected SyncTask. Error: ",g.default.errorAsString(e))},h.default.debugLog=u.debug;const t=new d.ExceptionReporter;t.registerAlertView(e),t.registerConsoleView(),t.setPrimaryHandler(o.default.handleException);const i=h.default;a.Options.setTimeout=n.bind(i.setTimeout,i),a.Options.clearTimeout=n.bind(i.clearTimeout,i),a.Options.shouldComponentUpdateComparator=n.bind(c.default.comparator,c.default),r.SimpleWebRequestOptions.MaxSimultaneousRequests=5,r.SimpleWebRequestOptions.setTimeout=n.bind(h.default.setTimeout,h.default),r.SimpleWebRequestOptions.clearTimeout=n.bind(h.default.clearTimeout,h.default)}},22538:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.test_reset=t.EnsureStarted=t.EnsureStartedOnly=t.EnsureStartedExclusive=t.HasStarted=t.RegisterStartupable=t.setDetailedInstrumentationSink=t.setNormalInstrumentationSink=t.DetailedInstrumentationSink=t.NormalInstrumentationSink=void 0;const n=i(96486),o=i(88837),s=i(97691),a=i(4057);function r(e){return"function"==typeof e?e():e}let l=[],c=[];function d(e){return e=r(e),n.find(l,(t=>t.startupable===e)).isComplete}function u(e,t){if(n.isArrayLike(e)&&"function"!=typeof e){const i=e.map(r);return s.all(n.map(i,(e=>h(e,t)))).then(n.noop)}return h(r(e),t)}function g(e){const t=n.find(l,(t=>t.startupable===e));return t}function h(e,i){const r=g(e);if(!r)return s.Rejected("Object not registered for startup: "+S(e));if(r.isComplete)return s.Resolved();if(r.startupPromise)return r.startupPromise;const d=s.Defer();r.startupPromise=d.promise();const h=Date.now();let C;return function(){0===m&&(p=setInterval((()=>{const e=n.map(n.filter(l,(e=>!e.isComplete&&!!e.startupPromise)),(e=>e.name));t.NormalInstrumentationSink&&e.length>0&&(0,t.NormalInstrumentationSink)("Still Starting Up: "+e.join(", "))}),2e3));m++}(),u(r.dependencies,i).then((()=>{t.DetailedInstrumentationSink&&(C=Date.now(),(0,t.DetailedInstrumentationSink)("Starting: "+r.name+(r.dependencies.length>0?", Deps Finish: "+(C-h)+"ms":"")));const i=n.attempt((()=>e.startup()));return n.isError(i)?s.Rejected(i):i})).finally((()=>{m--,0===m&&(clearInterval(p),p=void 0)})).then((()=>{if(r.isComplete=!0,r.startupPromise=void 0,t.DetailedInstrumentationSink){const e=Date.now()-C;(0,t.DetailedInstrumentationSink)("Finish: "+r.name+": "+e+"ms")}i&&e instanceof o.StoreBase&&c.push(e),function(){if(0===m&&c.length>0){o.StoreBase.pushTriggerBlock();const e=c;c=[],n.each(e,(e=>{const t=e;n.isFunction(t.trigger)&&t.trigger()})),o.StoreBase.popTriggerBlock()}}(),d.resolve(void 0)}),(e=>{t.DetailedInstrumentationSink&&(0,t.DetailedInstrumentationSink)("Startup Error: "+r.name+": "+a.default.errorAsString(e)),d.reject(e)})),d.promise()}t.setNormalInstrumentationSink=function(e){t.NormalInstrumentationSink=e},t.setDetailedInstrumentationSink=function(e){t.DetailedInstrumentationSink=e},t.RegisterStartupable=function(e,t,i=[]){if(n.find(l,(t=>t.startupable===e)))return;const o={startupable:e,name:t,dependencies:i.map(r),startupPromise:void 0,isComplete:!1};l.push(o)},t.HasStarted=d,t.EnsureStartedExclusive=function(e,t=!1){const i=n.map(e,(i=>{const o=g(i);if(!o)return s.Rejected("Object not registered for startup: "+S(i));const a=n.find(o.dependencies,(t=>!n.includes(e,t)));return a?s.Rejected("Missing startup dependency: "+S(a)):h(i,t)}));return s.all(i).then(n.noop)},t.EnsureStartedOnly=function(e,t,i=!1){const o=g(e=r(e));if(!o)return s.Rejected("Object not registered for startup: "+S(e));const a=n.find(o.dependencies,(e=>!n.includes(t,e)||!d(e)));return a?s.Rejected("Missing startup dependency: "+S(a)):h(e,i)},t.EnsureStarted=function(e){return u(e,!1)};let p,m=0;function S(e){const t=n.find(l,(t=>t.startupable===e));if(t)return t.name;const i=/function (.{1,})\(/.exec(e.constructor.toString());return i&&i.length>1?i[1]:""}t.test_reset=function(){n.each(l,(e=>{e.isComplete=!1,e.startupPromise=void 0}))}},4057:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(74958),o=i(96486),s=i(52210),a=i(36237),r=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,l=/[A-Za-z\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,c=RegExp("(?:[-]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[]?(?:[---]|\ud83c[\udffb-\udfff])?(?:(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[]?(?:[---]|\ud83c[\udffb-\udfff])?)*");class d{static deburrLocaleUpperCase(e){return e?d.deburr(e.toLocaleUpperCase()).toLocaleUpperCase():e}static deburrUpperCase(e){return e?d.toUpper(d.deburr(d.toUpper(e))):e}static deburrLocaleLowerCase(e){return e?d.deburr(e.toLocaleLowerCase()):e}static deburrLowerCase(e,t=!1){return e?d.deburr(e.toLowerCase(),t):e}static deburr(e,t=!1){return e?t?d.normalizeGreekFast(o.deburr(e)):d.normalizeGreek(o.deburr(e)):e}static normalizeGreek(e){return e=e.replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(//g,"").replace(/||/g,"").replace(/|/g,"").replace(//g,"").replace(//g,"").replace(/||/g,"").replace(/|/g,"").replace(//g,"").replace(//g,"").replace(//g,"")}static normalizeGreekFast(e){let t=[];for(let i=0;i<e.length;i++){let n=e[i];switch(n){case"":n="";break;case"":n="";break;case"":n="";break;case"":n="";break;case"":n="";break;case"":n="";break;case"":case"":case"":n="";break;case"":case"":n="";break;case"":n="";break;case"":n="";break;case"":case"":case"":n="";break;case"":case"":n="";break;case"":n="";break;case"":n="";break;case"":n=""}t.push(n)}return t.join("")}static escapeReservedRegexCharacters(e){return e.replace(r,"\\$&")}static formatV(e,t,i){return i=i||this.asString,e=this._formatInternal(e,t,i),1===t.length&&"object"==typeof t[0]&&(e=this._formatInternal(e,t[0],i)),e}static format(e,...t){return this.formatV(e,t)}static formatUri(e,...t){return this.formatV(e,t,(e=>encodeURIComponent(this.asString(e))))}static _isSurogate(e){return e>=55296&&e<=57343}static _assertMissingPairSurrogate(e,t){}static _symbolsOffset(e,t,i){const n=e.length;let o=0,s=t;for(;!(o===i||s>n);){let t=e.charCodeAt(s);d._isSurogate(t)&&(++s>=n||!d._isSurogate(e.charCodeAt(s)))&&d._assertMissingPairSurrogate(e,s-1),s++,o++}return s}static countSymbols(e){let t=e.length;const i=e.length;for(let n=0;n<i;n++)d._isSurogate(e.charCodeAt(n))&&(++n>=i&&!d._isSurogate(e.charCodeAt(n))&&d._assertMissingPairSurrogate(e,n-1),t--);return t}static getFirstEmoji(e){const t=e.match(c);return t?t[0]:null}static substr(e,t,i){let n=d._symbolsOffset(e,0,t);const o=d._symbolsOffset(e,n,i);return e.substring(n,o)}static _formatInternal(e,t,i){for(let n in t)t.hasOwnProperty(n)&&(e=e.replace("{"+n+"}",i(t[n])));return e}static asString(e){if(null===e)return"null";if(void 0===e)return"undefined";let t=typeof e;return"string"===t?e:"number"===t||"boolean"===t?String(e):"function"===t?"":JSON.stringify(e)}static errorAsString(e,t=!1){let i;return i=e&&e.code&&e.message?e.code+":"+e.message:e instanceof Error?e.toString():e&&e.errorMessage?e.errorMessage:d.asString(e),t?i:n.pii.Omit(i)}static shorten(e,t=0){if(!e||0===t)return e;let i=e;return i.length>t&&(i=d.substr(i,0,t-3)+""),i}static parseVersion(e){if(!e)return;const t=e.split(".");return{major:parseInt(t[0],10)||0,minor:parseInt(t[1],10)||0,build:parseInt(t[2],10)||0,revision:parseInt(t[3],10)||0}}static compareVersions(e,t){if(e===t)return 0;if(!e)return-1;if(!t)return 1;const i=d.parseVersion(e),n=d.parseVersion(t);return i.major>n.major?1:i.major<n.major?-1:i.minor>n.minor?1:i.minor<n.minor?-1:i.build>n.build?1:i.build<n.build?-1:i.revision>n.revision?1:i.revision<n.revision?-1:0}static startsWithUnicodeLetter(e){return!!e&&l.test(e[0])}static getFirstCharFromDeburredString(e){if(!this.startsWithUnicodeLetter(e))return;const t=this.deburrLocaleUpperCase(e[0]);return t?t[0]:void 0}static parseJsonErrorable(e){return o.attempt((()=>JSON.parse(e)))}static parseJsonWithDefault(e,t){if(!e)return t;const i=this.parseJsonErrorable(e);return o.isError(i)?(a.error(s.LogTraceArea.GenericUnsafe,"Error parsing JSON: "+this.errorAsString(i)+" , Content: "+n.pii.Omit(e)),t):i}static parseJsonErrorToUndefined(e){return this.parseJsonWithDefault(e,void 0)}static toUpper(e){return o.toUpper(e)}static _replacePlaceholder(e,t,i){let n=[];return o.each(e,(e=>{if("string"==typeof e){const o=e.split("{"+t+"}");2===o.length?(n.push(o[0]),n.push(i),n.push(o[1])):n.push(e)}else n.push(e)})),n}static getParts(e,t){let i=[e];return o.each(t,((e,t)=>{i=this._replacePlaceholder(i,t,e)})),i}static safeDecodeURIComponent(e){const t=o.attempt((()=>decodeURIComponent(e)));if(!o.isError(t))return t;a.error(s.LogTraceArea.GenericUnsafe,`${t.message}: ${e}`)}static parseArguments(e){let t,i,n=[],s=!1;for(let a=0;a<e.length;a++){const r=e.charAt(a);o.isUndefined(t)?r===r.trim()&&("'"===r||'"'===r?(i=r,t=a+1):t=a):s||"\\"!==r?!s&&(r!==r.trim()&&o.isUndefined(i)||r===i)?(n.push(e.substring(t,a)),t=void 0,i=void 0):s=!1:s=!0}return!o.isUndefined(t)&&o.isUndefined(i)&&n.push(e.substring(t)),o.map(n,(e=>e.replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\(.)/g,"$1")))}static stringToBuffer(e){const t=new ArrayBuffer(e.length),i=new Uint8Array(t);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return i}static bufferToString(e){return String.fromCharCode.apply(null,e)}}t.default=d},19358:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(97691),s=i(62141),a=i(98754),r=i(22538);t.default=new class{constructor(){this._currentSkewMs=0,r.RegisterStartupable(this,"TimeService",[a.default])}startup(){if(0===this._currentSkewMs){const e=a.default.getDataExclusive(s.InternalKeys.ClockSkew);e&&(this._currentSkewMs=e)}return o.Resolved()}getRawClientTimeMs(){return Date.now()}getServerTimeMs(){return Date.now()+this._currentSkewMs}putCurrentServiceTime(e,t){if(n.isNaN(e)||n.isUndefined(e))return;const i=Math.round(e-t/2-Date.now());Math.abs(i-this._currentSkewMs)>6e4&&(this._currentSkewMs=i,a.default.putData(s.InternalKeys.ClockSkew,this._currentSkewMs))}}},13319:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NativeTelemetryEvent=void 0;const n=i(349);class o extends n.TelemetryEventBase{constructor(e){super(),this._event=e}getEventName(){return this._event.name}getAttributes(){let e=super.getAttributes();for(let t in this._event.actions)if(this._event.actions.hasOwnProperty(t)){let i=this._event.actions[t];e[t]=i}return e}}t.NativeTelemetryEvent=o},349:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryEventBase=t.TelemetryEventLoggedOutPolicy=t.TelemetryTraceMode=t.setEngagementUserTaggingConfig=t.EngagementUserTaggingConfig=t.setReportedNetworkType=t.ReportedNetworkType=t.setExperimentMappings=t.ExperimentMappings=t.setTelemetryFilteringEnabled=t.TelemetryFilteringEnabled=t.setShouldSendOptionalData=t.ShouldSendOptionalData=t.setSampledPerfEvents=t.SampledPerfEvents=t.setSampledEvents=t.SampledEvents=t.setTelemetryIsAnonymous=t.TelemetryIsAnonymous=t.setTelemetryConfigExpiration=t.TelemetryConfigExpiration=t.setTelemetryETag=t.TelemetryETag=t.setTelemetryConfig=t.TelemetryConfig=void 0;const n=i(36076),o=i(96486),s=i(15069),a=i(16778),r=i(18078),l=i(40363),c=i(53374);var d,u,g;t.TelemetryConfig={},t.setTelemetryConfig=function(e){t.TelemetryConfig=e},t.TelemetryETag="",t.setTelemetryETag=function(e){t.TelemetryETag=e},t.TelemetryConfigExpiration=0,t.setTelemetryConfigExpiration=function(e){t.TelemetryConfigExpiration=e},t.TelemetryIsAnonymous=!1,t.setTelemetryIsAnonymous=function(e){t.TelemetryIsAnonymous=e},t.SampledEvents={},t.setSampledEvents=function(e){t.SampledEvents=e},t.SampledPerfEvents={},t.setSampledPerfEvents=function(e){t.SampledPerfEvents=e},t.ShouldSendOptionalData=!1,t.setShouldSendOptionalData=function(e){t.ShouldSendOptionalData=e},t.TelemetryFilteringEnabled=!1,t.setTelemetryFilteringEnabled=function(e){t.TelemetryFilteringEnabled=e},t.setExperimentMappings=function(e){t.ExperimentMappings=e},t.ReportedNetworkType=a.Types.DeviceNetworkType.Unknown,t.setReportedNetworkType=function(e){t.ReportedNetworkType=e},t.setEngagementUserTaggingConfig=function(e){t.EngagementUserTaggingConfig=e},function(e){e[e.None=0]="None",e[e.EventName=1]="EventName",e[e.Full=2]="Full"}(d=t.TelemetryTraceMode||(t.TelemetryTraceMode={})),function(e){e[e.SendNow=0]="SendNow",e[e.WaitForUserId=1]="WaitForUserId"}(u=t.TelemetryEventLoggedOutPolicy||(t.TelemetryEventLoggedOutPolicy={})),function(e){e[e.MSA=0]="MSA",e[e.Unknown=1]="Unknown"}(g||(g={}));t.TelemetryEventBase=class{constructor(e){this._experimentConfigIds=e,this._eventCreationTime=Date.now(),this._activationState=a.App.getActivationState()}getAriaTenantTokenOverride(){}shouldSend(){const e=t.SampledEvents[this.getEventName()];return!o.isNumber(e)||c.default.sampleForPercentage(e)}getCorrelationAttributes(){return{}}getAttributes(){return this._getBaseAttributes()}_getBaseAttributes(){const e=a.Types.DeviceNetworkType[t.ReportedNetworkType];let i;void 0!==t.ExperimentMappings&&(i=t.ExperimentMappings.getExperimentIdsForEventName(this.getEventName().toLowerCase()));let n={Skype_InitiatingUser_IsGuest:r.default.isGuestUser(),Skype_InitiatingUser_Username:t.TelemetryIsAnonymous?"":r.default.getSkypeId(),ShellType:l.default.getAppShellTypeName(),PlatformType:s.PlatformType[l.default.getPlatformType()],Version:l.default.getAppVersion(),Platform_Uiversion:l.default.getUIVersionWithPartnerID(),Platform_Id:l.default.getSkypePlatformId(),"DeviceInfo.Make":l.default.getSystemManufacturer()||"","DeviceInfo.Model":l.default.getSystemModel(),ecs_etag:t.TelemetryETag,NetworkType:e,session_id:l.default.getSessionId(),"AppInfo.ExperimentIds":i||"",ActivationState:a.Types.AppActivationState[this._activationState],UserType:this._getUserType(),ChatEndpointId:l.default.getChatEndpointId()||""};return this._experimentConfigIds&&(n.ExperimentConfigIds=this._experimentConfigIds),void 0!==t.TelemetryConfigExpiration&&(n.ecs_expiration=t.TelemetryConfigExpiration),this.shouldExcludeUserIdentificationInfo()&&(n.Skype_InitiatingUser_Username=""),t.TelemetryFilteringEnabled&&t.ShouldSendOptionalData&&(n.Telemetry_Consent=!0),t.EngagementUserTaggingConfig&&(this._eventCreationTime<=t.EngagementUserTaggingConfig.durationAbsoluteTimestamp?n.EngagementTag=t.EngagementUserTaggingConfig.engagementTag:t.EngagementUserTaggingConfig=void 0),l.default.isCorporateInstallation()&&(n.CorpInstallTag=l.default.getCorporateInstallationTag()),n}shouldExcludeUserIdentificationInfo(){return!1}shouldExcludeDeviceIdentificationInfo(){return!1}getPiiAttributes(){return{}}getEventPriority(){return n.AWTEventPriority.Normal}getEventTraceMode(){return d.None}getLoggedOutSendingPolicy(){return u.WaitForUserId}_getUserType(){return r.default.hasSkypeId()?g[g.MSA]:g[g.Unknown]}}},99679:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryFilteringService=void 0;const n=i(96486),o=i(36237),s=i(127),a=i(349);class r{constructor(){this._initialized=!1}initialize(){this._initialized||(this._initTelemetryMetadata(),this._initialized=!0)}filterOptionalTelemetry(e){var t;if(a.ShouldSendOptionalData)return e;const i=this._telemetryMetadata.get(e.getEventName().toLowerCase());if(!i)return o.debug((()=>`[TelemetryFilteringService] Filtered out event '${e.getEventName()}' because it does not have metadata`)),null;const s=n.clone(e),r=s.getAttributes();let l;if(i.variation){const e=r[i.variation.key];e&&(l=i.variation.variants.get(String(e)))}if(!(l?l.required:i.required))return o.debug((()=>{let e=`[TelemetryFilteringService] Filtered out event '${s.getEventName()}' because it is not required;`;if(i.variation){e+=` variant=${r[i.variation.key]}`}return e})),null;const c=this._createOptionalAttributeFilter(i,l,null===(t=i.variation)||void 0===t?void 0:t.variants),d=c(r),u=c(s.getPiiAttributes()),g=c(s.getCorrelationAttributes());return s.getAttributes=()=>d,s.getPiiAttributes=()=>u,s.getCorrelationAttributes=()=>g,s}_createOptionalAttributeFilter(e,t,i){return n=>(Object.keys(n).forEach((o=>{t&&i&&this._isAttributeRequired(o,t,i,!0)||this._isAttributeRequired(o,e,this._telemetryMetadata,!1)||delete n[o]})),n)}_isAttributeRequired(e,t,i,n){if(null==t?void 0:t.requiredFields.has(e))return!0;if(null==t?void 0:t.optionalFields.has(e))return!1;const o=!!(null==t?void 0:t.extends)&&i.get(n?t.extends:t.extends.toLowerCase());return!!o&&this._isAttributeRequired(e,o,i,n)}_initTelemetryMetadata(e=s){this._telemetryMetadata=new Map,e.forEach((e=>{var t,i,n;const o={requiredFields:new Set(null!==(t=e.fields)&&void 0!==t?t:[]),optionalFields:new Set(null!==(i=e.optionalFields)&&void 0!==i?i:[]),required:e.required,extends:e.extends};if(e.variation){o.variation={key:e.variation.key,variants:new Map};(null!==(n=e.variation.variants)&&void 0!==n?n:[]).forEach((e=>{var t,i,n;const s={requiredFields:new Set(null!==(t=e.fields)&&void 0!==t?t:[]),optionalFields:new Set(null!==(i=e.optionalFields)&&void 0!==i?i:[]),extends:e.extends,required:e.required};null===(n=o.variation)||void 0===n||n.variants.set(e.name,s)}))}this._telemetryMetadata.set(e.name.toLowerCase(),o)}))}}t.TelemetryFilteringService=r,t.default=new r},35478:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(77601),s=i(97691),a=i(75776),r=i(13319),l=i(349),c=i(99679);t.default=new class{constructor(){this._initialized=!1,this._initializeDeferral=s.Defer(),this._preStartupEventQueue=[],this._userIdPopulatedDefer=s.Defer()}isInitialized(){return this._initialized}initialize(e,t){this._sinks=e,s.all(n.map(this._sinks,(e=>e.initializeAndPause(t)))).always((()=>{if(this._initialized=!0,this._initializeDeferral.resolve(void 0),l.TelemetryConfig){const e=this._preStartupEventQueue;this._preStartupEventQueue=[],n.each(e,(e=>this.addEvent(e)))}})),o.default.onTelemetryEvent((e=>{this.addEvent(new r.NativeTelemetryEvent(e))}))}startUsingUserId(){if(this.isInitialized()){if(n.each(this._sinks,(e=>e.startUsingUserId())),this._userIdPopulatedDefer){let e=this._userIdPopulatedDefer;this._userIdPopulatedDefer=void 0,e.resolve(void 0)}}else this._initializeDeferral.promise().then((()=>{this.startUsingUserId()}))}waitUntilUserIdPopulated(){return this._userIdPopulatedDefer?this._userIdPopulatedDefer.promise():s.Resolved()}performWhenServiceInitialized(){return this.isInitialized()?s.Resolved():this._initializeDeferral.promise()}flush(){return this.isInitialized()?s.all(n.map(this._sinks,(e=>e.flush()))).then(n.noop):this._initializeDeferral.promise().then((()=>this.flush()))}pause(){this.isInitialized()?n.each(this._sinks,(e=>e.pause())):this._initializeDeferral.promise().then((()=>{this.pause()}))}resume(){this.isInitialized()?n.each(this._sinks,(e=>e.resume())):this._initializeDeferral.promise().then((()=>{this.resume()}))}setTelemetryConfig(e,t,i,o,s,r,c){if(l.setTelemetryConfig(e),l.setTelemetryETag(t),l.setTelemetryConfigExpiration(e.sendEcsExpirationTime?i:void 0),l.setTelemetryIsAnonymous(o),l.setSampledEvents(s),l.setSampledPerfEvents(r),l.setExperimentMappings(new a.default(c)),this.isInitialized()){const e=this._preStartupEventQueue;this._preStartupEventQueue=[],n.each(e,(e=>this.addEvent(e)))}}addEvent(e){if(!l.TelemetryConfig||!this.isInitialized())return void this._preStartupEventQueue.push(e);const t=e.shouldSend(),i=c.default.filterOptionalTelemetry(e);n.each(this._sinks,((n,o)=>{if(n.supportsEventSampling()&&!t)return;const s=n.supportsTelemetryFiltering()?i:e;s&&n.respondsTo(s)&&n.consumeEvent(s)}))}test_getInitializeDeferral(){return this._initializeDeferral}test_reset(){this._sinks=[],this._preStartupEventQueue=[],this._initialized=!1,this._initializeDeferral=s.Defer()}test_preStartupEventQueue(){return this._preStartupEventQueue}}},48104:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(97691),o=i(64376);i(16402),i(12770);t.default=class{constructor(){this._combinedEventDescription="",this._updateAppCenterTimerActive=!1,this._eventDate=Date.now()}initializeAndPause(e){return n.Resolved()}startUsingUserId(){return n.Resolved()}respondsTo(e){return!0}supportsEventSampling(){return!1}supportsTelemetryFiltering(){return!0}consumeEvent(e){this._addAppCenterMetaData(e)}flush(){return this._writeToAppCenterMetadata(),n.Resolved()}pause(){}resume(){}_addAppCenterMetaData(e){0}_writeToAppCenterMetadata(){""!==this._combinedEventDescription&&(o.default.addCrashMetaData({applicationTrace:this._combinedEventDescription}),this._combinedEventDescription=""),this._updateAppCenterTimerActive=!1}}},20009:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(91262),o=i(36076),s=i(96486),a=i(52210),r=i(16778),l=i(97691),c=i(60),d=i(89391),u=i(88391),g=i(62141),h=i(96526),p=i(97811),m=i(33754),S=i(18078),C=i(4057),f=i(40363),y=i(349),_=i(27795),v=i(59910),b=i(12770),T=i(53374);t.default=class{constructor(){this._ariaLoggers={},this._ready=!1,this._pendingEvents=[],this._wasInitializedAnonymously=!1,this._isAnonymous=void 0,this._anonymousEventQueue=[],this._dbPutEventQueue=[],this._deviceIdContext={},this._userIdContext={},this._sendPost=(e,t,i,n,o,s)=>{this._ariaRestClient.sendTelemetryEvents(e,t,i,n,o)},this.consumeEvent=e=>{if(!this._ready)return void this._pendingEvents.push(e);if(this._isAnonymous&&e.getLoggedOutSendingPolicy()===y.TelemetryEventLoggedOutPolicy.WaitForUserId)return void this._pendingEvents.push(e);const t=this._ariaEventPropertiesForEvent(e);t&&this._logAriaEvent(t,e.getAriaTenantTokenOverride())},this._delayedDbPut=e=>{if(v.default.handleEvents(e),this._wasInitializedAnonymously){e=s.clone(e);const t=s.remove(e,(e=>this._isAnonymousEvent(e)));this._anonymousEventQueue.push(...t)}if(0===e.length)return l.Resolved();let t=!1;!t&&s.some(e,(e=>"awt_stats"!==e.name&&e.priority===o.AWTEventPriority.High))&&(t=!0),this._dbPutEventQueue.push(...e),this._dbPutDeferral||(this._dbPutDeferral=l.Defer(),t||b.default.setTimeout((()=>{this._writeToDb()}),500));const i=this._dbPutDeferral;return t&&this._writeToDb(),i.promise()},this._getTelemetryEvents=()=>{if(!g.default.isInitialized())return l.Resolved(this._anonymousEventQueue);const e=d.default.getS4LTelemetryFeaturesNoSubscription().ariaMaxEvents;return g.default.countTelemetryEvents().then((t=>{const i=t-(e||t);return g.default.getTelemetryEvents(e||void 0,i>0?i:void 0).then((e=>{a.log(a.LogTraceArea.GenericUnsafe,`Fetched ${e.length} events from DB`);const i=d.default.getS4LTelemetryFeaturesNoSubscription().ariaEventsReportIfGreater;if(i&&e.length>=i){const i=s.first(e);a.log(a.LogTraceArea.GenericUnsafe,`There's ${t} events in the DB!`),this.consumeEvent(new p.AriaGetEventsLimitReached(t,i?i.timestamp:0))}let n=[];return n.push(...this._anonymousEventQueue),n.push(...e),n}))}))},this._removeFromDb=e=>{const t=[];return s.each(e,(e=>{const i=s.remove(this._anonymousEventQueue,(t=>t.id===e.id));0===s.remove(this._dbPutEventQueue,(t=>t.id===e.id)).length&&0===i.length&&t.push(e.id)})),0===t.length?l.Resolved():g.default.isInitialized()?g.default.deleteTelemetryEvents(t):l.Resolved()},this._ariaRestClient=new u.default}initializeAndPause(e){const t=f.default.getAriaTenantToken(),i={httpXHROverride:{sendPOST:this._sendPost},canSendStatEvent:this._canSendStatEvent,clockSkewRefreshDurationInMins:d.default.getS4LTelemetryFeatures().clockSkewRefreshDurationInMins};o.AWTLogManager.initialize(t,i),o.AWTLogManager.setTransmitProfile(o.AWT_BEST_EFFORT),o.AWTLogManager.pauseTransmission();const s={getEvents:this._getTelemetryEvents,putEvents:this._delayedDbPut,deleteEvents:this._removeFromDb};n.AWTCustomStorage.initialize(s);const a=o.AWTLogManager.getLogger(t);return this._ariaLoggers[t]=a,this._defaultAriaLogger=a,m.localeChangedEvent.subscribe((e=>{o.AWTLogManager.getSemanticContext().setAppLanguage(e)})),c.default.subscribeForChanges("AriaSink",(e=>{e===r.Types.AppActivationState.Background&&this._writeToDb()})),this._wasInitializedAnonymously=e,this._setAnonymousMode(e)}_canSendStatEvent(e){const t=y.SampledEvents[e];return!s.isNumber(t)||T.default.sampleForPercentage(t)}startUsingUserId(){return this._setAnonymousMode(!1)}respondsTo(e){return!0}supportsEventSampling(){return!0}supportsTelemetryFiltering(){return!0}_logAriaEvent(e,t){if(t){let i=this._ariaLoggers[t];i||(i=o.AWTLogManager.getLogger(t),this._ariaLoggers[t]=i),i.logEvent(e)}else this._defaultAriaLogger.logEvent(e)}_ariaEventPropertiesForEvent(e){let t=!1;const i=new o.AWTEventProperties;if(i.setName(e.getEventName()),i.setEventPriority(e.getEventPriority()),t=t||this._addTelemetryAttributes(i,e.getAttributes()),t=t||this._addTelemetryAttributes(i,e.getCorrelationAttributes()),t=t||this._addTelemetryPiiAttributes(i,e.getPiiAttributes()),e.shouldExcludeDeviceIdentificationInfo()||(t=t||this._addTelemetryPiiAttributes(i,this._deviceIdContext)),e.shouldExcludeUserIdentificationInfo()||(t=t||this._addTelemetryPiiAttributes(i,this._userIdContext)),!t)return i;this.consumeEvent(new _.DevDebug("BrokenTelemetry","Event Name: "+e.getEventName()+", Data: "+JSON.stringify(e)))}flush(){const e=l.Defer();return o.AWTLogManager.flush((()=>e.resolve(void 0))),e.promise()}pause(){o.AWTLogManager.pauseTransmission()}resume(){o.AWTLogManager.resumeTransmision()}_addTelemetryAttributes(e,t){let i=!1;return s.each(t,((t,n)=>{const o=this._convertTelemetryValueToString(t);h.isSerializable(o)||(i=!0),e.setProperty(n,o)})),i}_addTelemetryPiiAttributes(e,t){let i=!1;return s.each(t,((t,n)=>{const o=this._convertTelemetryValueToString(t.value);h.isSerializable({value:o,piiKind:t.piiKind})||(i=!0),e.setPropertyWithPii(n,o,t.piiKind)})),i}_convertTelemetryValueToString(e){return!0===e?"Y":!1===e?"N":s.isNumber(e)?e.toString():e}_isAnonymousEvent(e){const t=e.properties["UserInfo.Id"];return!t||(s.isNumber(t)||s.isBoolean(t)||s.isString(t)?!t:!t.value)}_writeToDb(){if(!this._dbPutDeferral)return;if(!g.default.isInitialized())return;const e=this._dbPutDeferral,t=this._dbPutEventQueue;this._dbPutDeferral=void 0,0!==this._dbPutEventQueue.length?(this._dbPutEventQueue=[],g.default.putTelemetryEvents(t).then((()=>{e.resolve(void 0)}),(()=>{e.reject()}))):e.resolve(void 0)}_setContextData(e){const t=o.AWTLogManager.getSemanticContext(),i=S.default.isGuestUser();return t.setAppVersion(f.default.getAppVersion()),t.setAppLanguage(m.getLocale()),t.setUserLanguage(f.default.getSystemLocale()),t.setDeviceOsName(f.default.getPlatformTypeName()),t.setDeviceOsVersion(f.default.getOSVersion()),this._deviceIdContext["DeviceInfo.Id"]={value:f.default.getDeviceId(),piiKind:o.AWTPiiKind.NotSet},this._userIdContext["UserInfo.Id"]={value:e?"":S.default.getSkypeId(),piiKind:i?o.AWTPiiKind.NotSet:o.AWTPiiKind.Identity},e||i?(this._userIdContext.MSACID={value:"",piiKind:o.AWTPiiKind.NotSet},this._userIdContext.MSACIDHEX={value:"",piiKind:o.AWTPiiKind.NotSet},l.Resolved()):l.all([S.default.getUserCidAsync().then((e=>{this._userIdContext.MSACID={value:e,piiKind:o.AWTPiiKind.NotSet}})),S.default.getUserCidHexAsync().then((e=>{this._userIdContext.MSACIDHEX={value:C.default.toUpper(e),piiKind:o.AWTPiiKind.NotSet}}))]).then(s.noop)}_setAnonymousMode(e){return this._setContextPromise?this._setContextPromise.then((()=>{this._setAnonymousMode(e)})):e===this._isAnonymous?l.Resolved():(this._isAnonymous=e,this._ready=!1,this._setContextPromise=this._setContextData(this._isAnonymous).thenAsync((()=>{this._ready=!0,this._setContextPromise=void 0;const e=this._pendingEvents;this._pendingEvents=[],s.each(e,this.consumeEvent)})),this._setContextPromise)}}},50627:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(97691),o=i(89391),s=i(53819);t.default=class{constructor(){this._enabled=!1,this._appConfigStoreSubscribeCallback=()=>{this._enabled=o.default.getEngagementFeatures().clientTriggeredEngagement.enabled}}initializeAndPause(e){return o.default.subscribe(this._appConfigStoreSubscribeCallback),this._appConfigStoreSubscribeCallback(),n.Resolved(void 0)}respondsTo(e){if(!this._enabled)return!1;const t=e.getEventName();return s.default.isSubscribedToEventName(t)}supportsEventSampling(){return!1}supportsTelemetryFiltering(){return!1}consumeEvent(e){this._enabled&&s.default.processEvent({eventName:e.getEventName(),attributes:e.getAttributes()})}startUsingUserId(){return n.Resolved(void 0)}flush(){return n.Resolved(void 0)}pause(){}resume(){}}},53445:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.test_overrideEventTraceMode=void 0;const n=i(74958),o=i(52210),s=i(97691),a=i(36237),r=i(349);let l;t.default=class{initializeAndPause(e){return a.log(o.LogTraceArea.ConsoleSink,"initialized and paused"),s.Resolved()}startUsingUserId(){return a.log(o.LogTraceArea.ConsoleSink,"start using user id"),s.Resolved()}respondsTo(e){return!0}supportsEventSampling(){return!1}supportsTelemetryFiltering(){return!1}consumeEvent(e){let t="";switch(l||e.getEventTraceMode()){case r.TelemetryTraceMode.None:break;case r.TelemetryTraceMode.EventName:t="consuming event "+e.getEventName();break;case r.TelemetryTraceMode.Full:t="consuming event "+e.getEventName()+"\nattributes "+n.pii.Omit(JSON.stringify(e.getAttributes()))+"\npiiAttributes "+n.pii.Omit(JSON.stringify(e.getPiiAttributes()))+"\ncorrelationAttributes "+n.pii.Omit(JSON.stringify(e.getCorrelationAttributes()));break;default:t="error: unsupported trace mode "+r.TelemetryTraceMode[e.getEventTraceMode()]}0!==t.length&&a.log(o.LogTraceArea.ConsoleSink,t)}flush(){return a.log(o.LogTraceArea.ConsoleSink,"flush"),s.Resolved()}pause(){a.log(o.LogTraceArea.ConsoleSink,"paused")}resume(){a.log(o.LogTraceArea.ConsoleSink,"resumed")}},t.test_overrideEventTraceMode=function(e){const t=e?r.TelemetryTraceMode.Full:r.TelemetryTraceMode.None;l=t}},35440:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleDialogButtonAlignment=void 0,function(e){e[e.VerticalStack=0]="VerticalStack",e[e.HorizontalStack=1]="HorizontalStack"}(t.SimpleDialogButtonAlignment||(t.SimpleDialogButtonAlignment={}))},42826:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AlertTypeFilter=t.HighlightsFollowAlertState=t.AlertType=t.AlertMenuItemCommand=t.AlertsConstants=void 0,t.AlertsConstants={DaysOfAlertsToDisplay:7},t.AlertMenuItemCommand={all:"all",highPriority:"highpriority",reactions:"reactions",markAllRead:"markallread",settings:"settings"},function(e){e[e.HighPriorityMessage=1]="HighPriorityMessage",e[e.Reaction=2]="Reaction",e[e.AdditionalReaction=3]="AdditionalReaction",e[e.HighlightsFollowRequest=4]="HighlightsFollowRequest",e[e.HighlightComment=5]="HighlightComment",e[e.OnboardingX=6]="OnboardingX",e[e.Engagement=7]="Engagement",e[e.CoachMarks=8]="CoachMarks",e[e.Notice=9]="Notice",e[e.HighlightsSkypeChannel=10]="HighlightsSkypeChannel",e[e.HighlightsSkypeChannelSecondary=11]="HighlightsSkypeChannelSecondary",e[e.NotificationPermission=12]="NotificationPermission",e[e.ScheduledCall=13]="ScheduledCall",e[e.MissedCallbackReminder=14]="MissedCallbackReminder"}(t.AlertType||(t.AlertType={})),function(e){e[e.Follow=1]="Follow",e[e.AcceptedByOther=2]="AcceptedByOther",e[e.Removed=3]="Removed",e[e.AcceptedByMe=4]="AcceptedByMe"}(t.HighlightsFollowAlertState||(t.HighlightsFollowAlertState={})),function(e){e[e.All=0]="All",e[e.HighPriorityMessages=1]="HighPriorityMessages",e[e.Reactions=2]="Reactions"}(t.AlertTypeFilter||(t.AlertTypeFilter={}))},98278:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeNotificationToastInfo=t.CustomActionSheetBorderRadius=t.BlueGradient=t.ListItemAccessibilityTrait=t.BottomInsetDefault=t.HorizontalInsetDefaultModernize=t.HorizontalInsetDefault=t.HorizontalInsetZero=t.InsetZero=t.SXMenuNavigationDirection=t.SXMenuItemSelectableType=t.SXMenuIcon=t.ListItem=t.SXActivityIndicatorSize=t.ImageResizeModeEnum=t.SXButtonStyle=t.SXButtonIconPosition=t.SXButtonSize=t.SXModalAnimationType=t.TabBarHeight=t.OverflowItemSizes=t.NewChatMenuItemSizes=t.RowPaddingModernize=t.RowPaddingClassic=t.SideBarWidths=t.FontWeight=t.HeaderSize=t.TextThemeColor=t.TextEditTextStyle=t.LinkTextStyle=t.BodyTextSize=t.CallDebugRootViewId=t.CallMonitorViewId=t.CallNotificationViewId=t.ShareFileViewId=t.SettingsWindowRootViewId=t.ScreenShareViewId=t.MainRootViewId=t.RootViewType=t.MaxContentSizeMultiplier=void 0;const n=i(16778),o=i(15877),s=i(81760);t.MaxContentSizeMultiplier=1.353,function(e){e[e.Unknown=0]="Unknown",e[e.MainWindow=1]="MainWindow",e[e.SplitViewContent=2]="SplitViewContent",e[e.CallMonitor=3]="CallMonitor",e[e.ShareWith=4]="ShareWith",e[e.NativeWindow=5]="NativeWindow",e[e.ScreenSharingToolbar=6]="ScreenSharingToolbar",e[e.EmbeddedModal=7]="EmbeddedModal"}(t.RootViewType||(t.RootViewType={})),t.MainRootViewId="__MAIN_ROOT_VIEW_ID__",t.ScreenShareViewId="__SCREEN_SHARE_VIEW_ID__",t.SettingsWindowRootViewId="__SETTINGS_WINDOW_ROOT_VIEW_ID__",t.ShareFileViewId="__SHARE_FILE_VIEW_ID__",t.CallNotificationViewId="__CALL_NOTIFICATION_VIEW_ID__",t.CallMonitorViewId="__CALL_MONITOR_VIEW_ID__",t.CallDebugRootViewId="__CALL_DEBUG_VIEW_ID__",function(e){e[e.Default=0]="Default",e[e.BigDeprecated=1]="BigDeprecated",e[e.SmallDeprecated=2]="SmallDeprecated"}(t.BodyTextSize||(t.BodyTextSize={})),function(e){e[e.BodyText=0]="BodyText",e[e.BodyTextSmall=1]="BodyTextSmall",e[e.BodyTextBold=2]="BodyTextBold",e[e.Caption=3]="Caption"}(t.LinkTextStyle||(t.LinkTextStyle={})),function(e){e[e.Caption=0]="Caption",e[e.BodyText=1]="BodyText",e[e.BodyTextBold=2]="BodyTextBold",e[e.MessagingHeader=3]="MessagingHeader",e[e.MessagingHeaderSmall=4]="MessagingHeaderSmall"}(t.TextEditTextStyle||(t.TextEditTextStyle={})),function(e){e[e.Default=0]="Default",e[e.Primary=1]="Primary",e[e.Secondary=2]="Secondary",e[e.Disabled=3]="Disabled",e[e.Destructive=4]="Destructive"}(t.TextThemeColor||(t.TextThemeColor={})),function(e){e[e.h0=0]="h0",e[e.h1=1]="h1",e[e.h2=2]="h2",e[e.h3=3]="h3",e[e.h4=4]="h4",e[e.h5=5]="h5"}(t.HeaderSize||(t.HeaderSize={})),function(e){e.thin="100",e.extraLight="200",e.light="300",e.regular="400",e.medium="500",e.semiBold="600",e.bold="700",e.heavy="800",e.black="900"}(t.FontWeight||(t.FontWeight={})),t.SideBarWidths={compact:300,base:322,max:380,maxRight:425,min:290,miniCanvasRight:440},t.RowPaddingClassic={left:10,leftDesktop:8,leftDesktopSearch:12,right:10,rightDesktop:15,rightSearch:10,rightDesktopSearch:10},t.RowPaddingModernize={left:16,leftDesktop:8,leftDesktopSearch:12,right:16,rightDesktop:8,rightSearch:10,rightDesktopSearch:10},t.NewChatMenuItemSizes={defaultWidth:105,height:52,paddingVertical:16},t.OverflowItemSizes={minHeight:110,iconSize:60,captionLineHeight:16,verticalPadding:10,numberOfLines:3},function(e){e[e.Default=0]="Default",e[e.Android=1]="Android",e[e.Tablet=2]="Tablet",e[e.iosLandscape=3]="iosLandscape",e[e.CompactDesktop=4]="CompactDesktop"}(t.TabBarHeight||(t.TabBarHeight={})),function(e){e[e.Default=0]="Default",e[e.Bottom=1]="Bottom",e[e.None=2]="None"}(t.SXModalAnimationType||(t.SXModalAnimationType={})),function(e){e[e.Large=0]="Large",e[e.Medium=1]="Medium",e[e.Small=2]="Small"}(t.SXButtonSize||(t.SXButtonSize={})),function(e){e[e.Start=0]="Start",e[e.End=1]="End"}(t.SXButtonIconPosition||(t.SXButtonIconPosition={})),function(e){e[e.ColorFill=0]="ColorFill",e[e.ColorStroke=1]="ColorStroke",e[e.LightFill=2]="LightFill",e[e.DarkFill=3]="DarkFill",e[e.LightStroke=4]="LightStroke",e[e.DarkStroke=5]="DarkStroke",e[e.LightNoBackground=6]="LightNoBackground",e[e.DarkNoBackground=7]="DarkNoBackground",e[e.ThemeFill=8]="ThemeFill",e[e.ThemeStroke=9]="ThemeStroke",e[e.ThemeNoBackground=10]="ThemeNoBackground",e[e.GradientFill=11]="GradientFill",e[e.BlueFill=12]="BlueFill",e[e.Custom=13]="Custom",e[e.AgnosticGradientFill=14]="AgnosticGradientFill"}(t.SXButtonStyle||(t.SXButtonStyle={})),function(e){e.auto="auto",e.cover="cover",e.contain="contain",e.repeat="repeat",e.stretch="stretch"}(t.ImageResizeModeEnum||(t.ImageResizeModeEnum={})),function(e){e[e.ExtraSmall=0]="ExtraSmall",e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Large=3]="Large"}(t.SXActivityIndicatorSize||(t.SXActivityIndicatorSize={})),t.ListItem=(0,o.lazyProperties)({small:()=>({shortHeight:50,shortHeightStyle:n.Styles.createViewStyle({minHeight:50}),regularHeight:60,regularHeightStyle:n.Styles.createViewStyle({minHeight:60})})}),function(e){e.CopyLink="CopyLink",e.AddSkypeContacts="SkypeContacts",e.Outlook="Outlook",e.Gmail="Gmail",e.NewGmail="NewGmail",e.SMS="SMS",e.BlurBackground="BlurBackground",e.ScreenshareOff="ScreenshareOff",e.Screenshare="Screenshare",e.ScreenSharingRequestControl="ScreenSharingRequestControl",e.ScreenSharingStopControl="ScreenSharingStopControl",e.ViewSwitch="ViewSwitch",e.Snapshot="Snapshot",e.React="React",e.CustomReact="CustomReact",e.SkypeContacts="SkypeContacts",e.ContactGroupPair="ContactGroupPair",e.Settings="Settings",e.HoldCall="HoldCall",e.ResumeCall="ResumeCall",e.Record="Record",e.Subtitles="Subtitles",e.SubtitlesOff="SubtitlesOff",e.SubtitlesSettings="SubtitlesSettings",e.VideoEnable="VideoEnable",e.VideoOff="VideoOff",e.MicrophoneOff="MicrophoneOff",e.Facebook="Facebook",e.Mail="Mail",e.RaiseHand="RaiseHand",e.LowerHand="LowerHand",e.Skype="Skype",e.Picture="Picture",e.Bing="Bing",e.TwinCam="TwinCam",e.StopTwinCam="StopTwinCam",e.Block="Block",e.Bookmark="Bookmark",e.Calendar="Calendar",e.Checkmark="Checkmark",e.Clear="Clear",e.Copy="Copy",e.Delete="Delete",e.Dismiss="Dismiss",e.Edit="Edit",e.Favorite="Favorite",e.Forward="Forward",e.HideMark="HideMark",e.Leave="Leave",e.Open="Open",e.OpenFolder="OpenFolder",e.Profile="Profile",e.ReadMark="ReadMark",e.Reply="Reply",e.ReplySelection="ReplySelection",e.Save="Save",e.SaveTo="SaveTo",e.UnhideMark="UnhideMark",e.UnreadMark="UnreadMark",e.Quote="Quote",e.Warning="Warning"}(t.SXMenuIcon||(t.SXMenuIcon={})),function(e){e[e.Checkbox=1]="Checkbox",e[e.Toggle=2]="Toggle"}(t.SXMenuItemSelectableType||(t.SXMenuItemSelectableType={})),function(e){e[e.None=0]="None",e[e.Up=1]="Up",e[e.Down=2]="Down"}(t.SXMenuNavigationDirection||(t.SXMenuNavigationDirection={})),t.InsetZero={left:0,right:0,top:0,bottom:0},t.HorizontalInsetZero={left:0,right:0},t.HorizontalInsetDefault={left:t.RowPaddingClassic.left,right:t.RowPaddingClassic.right},t.HorizontalInsetDefaultModernize={left:t.RowPaddingModernize.left,right:t.RowPaddingModernize.right},t.BottomInsetDefault=10,t.ListItemAccessibilityTrait=n.Types.AccessibilityTrait.Group,t.BlueGradient=[s.Color.blueLight,s.Color.blueMedium,s.Color.blueDark,s.Color.blueDark],t.CustomActionSheetBorderRadius=3,t.CompositeNotificationToastInfo={horizontal:10,vertical:5,color:s.Color.gray400}},24490:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderType=t.PopupWidth=void 0,t.PopupWidth=350,function(e){e[e.Default=0]="Default",e[e.Slim=1]="Slim"}(t.HeaderType||(t.HeaderType={}))},75893:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ImagePrefetchState=t.BACKGROUND_EFFECT_FILE_PREFIX=void 0,t.BACKGROUND_EFFECT_FILE_PREFIX="BACKGROUND_EFFECT_",function(e){e[e.Prefetching=0]="Prefetching",e[e.Prefetched=1]="Prefetched",e[e.Failed=2]="Failed",e[e.None=3]="None"}(t.ImagePrefetchState||(t.ImagePrefetchState={}))},4336:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultHeightForInviteShare=t.CompactHeight=t.CompactWidth=t.DefaultSplitViewWidthForNewProfile=t.DefaultSplitViewWidth=t.DefaultSplitSettingsWidth=t.DefaultSplitMasterWidth=t.DefaultWidthForNewProfile=t.DefaultHeightForNewProfile=t.DefaultWidth=t.DefaultHeight=void 0,t.DefaultHeight=660,t.DefaultWidth=480,t.DefaultHeightForNewProfile=724,t.DefaultWidthForNewProfile=450,t.DefaultSplitMasterWidth=250,t.DefaultSplitSettingsWidth=455,t.DefaultSplitViewWidth=700,t.DefaultSplitViewWidthForNewProfile=t.DefaultSplitMasterWidth+t.DefaultSplitSettingsWidth,t.CompactWidth=400,t.CompactHeight=500,t.DefaultHeightForInviteShare=751},66957:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DetailsPanelHeaderSizes=t.DetailsPanelOrigin=t.DetailsPanelViewMode=void 0,function(e){e[e.None=0]="None",e[e.User=1]="User",e[e.Group=2]="Group",e[e.Bot=3]="Bot",e[e.Connector=4]="Connector"}(t.DetailsPanelViewMode||(t.DetailsPanelViewMode={})),function(e){e[e.Unknown=0]="Unknown",e[e.AddToContact=1]="AddToContact"}(t.DetailsPanelOrigin||(t.DetailsPanelOrigin={})),t.DetailsPanelHeaderSizes={scrollOffsetMobile:100,scrollOffsetDesktop:148,avatarOffsetPixels:20,headerReplacementPadding:65,headerReplacementPaddingModal:24,headerPadding:20}},72822:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DialogNavExit=t.DialogNavOrigin=void 0,function(e){e[e.Unknown=0]="Unknown",e[e.Settings=1]="Settings",e[e.KeyboardShortcut=2]="KeyboardShortcut",e[e.Onboarding=3]="Onboarding",e[e.PopCard=4]="PopCard",e[e.GroupConvSettings=5]="GroupConvSettings",e[e.ThemeDialogPage=6]="ThemeDialogPage",e[e.NoCallsItem=7]="NoCallsItem",e[e.SyncAddressBookSearchItem=8]="SyncAddressBookSearchItem",e[e.LocalContactsTab=9]="LocalContactsTab",e[e.ChatsEmptyState=10]="ChatsEmptyState",e[e.DeepLink=11]="DeepLink",e[e.ChatsFinishSetupPrompt=12]="ChatsFinishSetupPrompt",e[e.DesktopActionPicker=13]="DesktopActionPicker",e[e.UserProfilePage=14]="UserProfilePage",e[e.RecentChatsBanner=15]="RecentChatsBanner"}(t.DialogNavOrigin||(t.DialogNavOrigin={})),function(e){e[e.Unknown=0]="Unknown",e[e.CancelOrBack=1]="CancelOrBack",e[e.Submit=2]="Submit",e[e.Skip=3]="Skip",e[e.AllowAccessNextButton=4]="AllowAccessNextButton",e[e.Close=5]="Close"}(t.DialogNavExit||(t.DialogNavExit={}))},2519:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Checking=0]="Checking",e[e.Error=1]="Error",e[e.UpdateAvailable=2]="UpdateAvailable",e[e.NoUpdates=3]="NoUpdates",e[e.UpdateDownloaded=4]="UpdateDownloaded"}(i||(i={})),t.default=i},46096:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarChangeType=t.AvatarDataSource=t.StorageItemKeys=t.InteractiveWAMLoginKeys=t.LoginMethods=t.CoachMarkOrigin=t.KeyboardShortcut=t.PresenceChangeNotificationResult=t.MessageProcessResult=t.KeychainTokenType=t.KeychainFailureType=t.LogoutReason=t.RedirectToLoginReason=t.SkypeCdnTokenFailureOrigin=t.BrowserOrigin=t.ChatServiceConnectionType=t.WarmCallNotificationDisposition=t.ProfileType=t.AlertTypeForTelemetry=t.CaptureMode=t.ConversationStatus=t.NavigationConversationTelemetryMetric=t.NavigationConversationOrigin=t.CaptureNavFrom=t.SearchResultsListGroup=t.BotsOriginatingPanel=t.BotsInteraction=t.SearchResultsListOrigin=t.SearchPanelInitiator=t.ContactsLevel=t.SearchType=t.SuggestionsAuthStep=t.BingPermissionsEntryPoint=t.BingEntryPoint=t.BrowserShareAction=t.ChatEventOrigin=t.MessageOrigin=t.DownloadTransferSource=t.PostingTransferSource=t.MessagingFailureReason=t.PostSource=t.ContactInviteOrigin=t.UnarchiveConversationOrigin=t.ArchiveConversationOrigin=t.ContactInviteType=t.AppEntryPoint=t.BackgroundCategories=t.BackgroundEffect=t.IOSModel=t.AppShellType=void 0,t.ReportContextListOptions=t.ReportCategory=t.MyProfileFetchOrigin=t.LocationUpdateReason=t.TranslationAction=t.AudioPlayerOrigin=t.BalanceStatePanelSection=t.PaymentFlowStep=t.ConnectivityAlertType=t.MediaDownloadIntent=t.PersonAllowed=t.NotificationTypeAppLaunched=t.SharePanelEntryOrigin=t.ReencodeState=t.PlatformType=t.LogTraceArea=t.RSVersion=t.ConversationFakedOrigin=t.SettingsOrigin=t.AvatarChangeError=t.AvatarPolicyChangeOrigin=t.ProfileOpenOrigin=t.AvatarPickerOrigin=t.NavigationAddToCallOrigin=t.VSOTag=t.DialerNavigationSource=t.ContactNickNameUpdateOrigin=t.MoodMessageUpdateOrigin=t.NameUpdateLocation=t.AvatarUpdateLocation=t.NavigationMediaViewerOrigin=t.NavigationCallOrigin=t.E2EERejectionReason=t.E2EEAcceptOrigin=t.E2EEInviteOrigin=t.FxSceneDeviceSupported=t.AvatarMenuButtons=void 0,function(e){e[e.Browser=1]="Browser",e[e.ReactNative=2]="ReactNative",e[e.Electron=3]="Electron",e[e.Arc=4]="Arc",e[e.FireOS=5]="FireOS",e[e.IpadOnly=6]="IpadOnly"}(t.AppShellType||(t.AppShellType={})),function(e){e[e.None=0]="None",e[e.iPad=1]="iPad",e[e.iPhone=2]="iPhone",e[e.iPodTouch=3]="iPodTouch"}(t.IOSModel||(t.IOSModel={})),function(e){e.Off="Off",e.Blur="Blur",e.BackgroundImage="BackgroundImage"}(t.BackgroundEffect||(t.BackgroundEffect={})),t.BackgroundCategories=["myBackgrounds","featured","new","holidays","fun","professional","colors","textures","nature","movies","cultural","pride","animated","bing","skypebackgroundimage"],function(e){e[e.Opened=1]="Opened",e[e.Foregrounded=2]="Foregrounded",e[e.QuickAction=3]="QuickAction",e[e.URI=4]="URI",e[e.PushNotification=5]="PushNotification",e[e.ChatNotification=6]="ChatNotification",e[e.CallNotification=7]="CallNotification"}(t.AppEntryPoint||(t.AppEntryPoint={})),function(e){e[e.SMS=0]="SMS",e[e.Email=1]="Email",e[e.ShareUrl=2]="ShareUrl",e[e.SearchPublicDirectory=3]="SearchPublicDirectory",e[e.Cancelled=4]="Cancelled"}(t.ContactInviteType||(t.ContactInviteType={})),function(e){e[e.ContextMenu=0]="ContextMenu",e[e.KeyboardShortcut=1]="KeyboardShortcut",e[e.ProfilePanel=2]="ProfilePanel",e[e.NotificationSettings=3]="NotificationSettings",e[e.ConversationHeader=4]="ConversationHeader"}(t.ArchiveConversationOrigin||(t.ArchiveConversationOrigin={})),function(e){e[e.ConversationUpdate=0]="ConversationUpdate",e[e.ContextMenu=1]="ContextMenu",e[e.NavigateToConversationFromProfile=2]="NavigateToConversationFromProfile",e[e.NavigateToConversationFromSearch=3]="NavigateToConversationFromSearch",e[e.ProfilePanel=4]="ProfilePanel",e[e.UndoPill=5]="UndoPill",e[e.Unknown=6]="Unknown",e[e.NotificationSettings=7]="NotificationSettings",e[e.ConversationHeader=8]="ConversationHeader"}(t.UnarchiveConversationOrigin||(t.UnarchiveConversationOrigin={})),function(e){e[e.Unknown=0]="Unknown",e[e.RecentsPlusButton=1]="RecentsPlusButton",e[e.AddressBookSearchResult=2]="AddressBookSearchResult",e[e.NoSearchResults=3]="NoSearchResults",e[e.ShareProfile=4]="ShareProfile",e[e.CallPanelSearch=5]="CallPanelSearch",e[e.CallCard=6]="CallCard",e[e.PeoplePanelLink=7]="PeoplePanelLink",e[e.InviteSharePanel=8]="InviteSharePanel",e[e.SearchItem=9]="SearchItem",e[e.ConversationHeader=10]="ConversationHeader",e[e.PublicDirectory=11]="PublicDirectory",e[e.ConnectWithPeople=12]="ConnectWithPeople",e[e.PstnChatWindow=13]="PstnChatWindow",e[e.CallFailurePrompt=14]="CallFailurePrompt",e[e.SmsFailurePrompt=15]="SmsFailurePrompt"}(t.ContactInviteOrigin||(t.ContactInviteOrigin={})),function(e){e[e.Capture=1]="Capture",e[e.DragDrop=2]="DragDrop",e[e.DragDropFromConversationToRecentLists=3]="DragDropFromConversationToRecentLists",e[e.FilePicker=4]="FilePicker",e[e.MediaPicker=5]="MediaPicker",e[e.QuickCapture=6]="QuickCapture",e[e.ShareWith=7]="ShareWith",e[e.MessageComposer=8]="MessageComposer",e[e.AudioMessageComposer=9]="AudioMessageComposer",e[e.Screenshot=10]="Screenshot",e[e.Logs=11]="Logs",e[e.Gallery=12]="Gallery",e[e.ShareToSkype=13]="ShareToSkype",e[e.FeedbackString=14]="FeedbackString",e[e.CancelFailedPost=15]="CancelFailedPost",e[e.SlashCommand=16]="SlashCommand",e[e.MessagePanel=17]="MessagePanel",e[e.CallReactionPressed=18]="CallReactionPressed",e[e.CallStage=19]="CallStage",e[e.ReactionsMessageComposer=20]="ReactionsMessageComposer",e[e.MessageOptionsDelete=21]="MessageOptionsDelete",e[e.SwiftReply=22]="SwiftReply",e[e.SharePreview=23]="SharePreview",e[e.LocationPicker=24]="LocationPicker",e[e.MojiSearch=25]="MojiSearch",e[e.SwiftCardPicker=26]="SwiftCardPicker",e[e.PartListMessage=27]="PartListMessage",e[e.CallEmoticonReaction=28]="CallEmoticonReaction",e[e.P2PCallNotification=29]="P2PCallNotification",e[e.ReplyFromNotification=30]="ReplyFromNotification",e[e.InviteFakeMessage=31]="InviteFakeMessage",e[e.EphemeralMessage=32]="EphemeralMessage",e[e.ShareSwiftMessage=33]="ShareSwiftMessage",e[e.ForwardSwift=34]="ForwardSwift",e[e.ShareUrl=35]="ShareUrl",e[e.SwiftImBack=36]="SwiftImBack",e[e.UnansweredCallPanel=37]="UnansweredCallPanel",e[e.DeepLink=38]="DeepLink",e[e.CallMoments=39]="CallMoments",e[e.StartChattingCard=40]="StartChattingCard",e[e.CapturePreview=41]="CapturePreview",e[e.CallRecording=42]="CallRecording",e[e.StickerSearch=43]="StickerSearch",e[e.GifSearch=44]="GifSearch",e[e.SnapshotNotification=45]="SnapshotNotification",e[e.ScheduledCall=46]="ScheduledCall",e[e.CellularSmsMessageFromNative=47]="CellularSmsMessageFromNative",e[e.CellularSmsMessageFromMessagePanel=48]="CellularSmsMessageFromMessagePanel",e[e.CellularSmsMessageFromNativeDelete=49]="CellularSmsMessageFromNativeDelete",e[e.EngagementShareableContent=50]="EngagementShareableContent",e[e.Poll=51]="Poll",e[e.ScheduledCallFakeMessage=52]="ScheduledCallFakeMessage",e[e.MediaPreview=53]="MediaPreview",e[e.DeclineAndMessageMenu=54]="DeclineAndMessageMenu",e[e.Bookmarks=55]="Bookmarks",e[e.ForwardAlbum=56]="ForwardAlbum",e[e.DirectShare=57]="DirectShare",e[e.StreamItemCommand=58]="StreamItemCommand",e[e.Clipboard=59]="Clipboard",e[e.TooltipExpressionPicker=60]="TooltipExpressionPicker",e[e.TooltipReactionsCallBar=61]="TooltipReactionsCallBar",e[e.GuestNameUpdate=62]="GuestNameUpdate",e[e.SendCredit=63]="SendCredit"}(t.PostSource||(t.PostSource={})),function(e){e[e.None=0]="None",e[e.AMSFailure=1]="AMSFailure",e[e.ChatServiceFailure=2]="ChatServiceFailure",e[e.Offline=3]="Offline",e[e.CacheFailure=4]="CacheFailure"}(t.MessagingFailureReason||(t.MessagingFailureReason={})),function(e){e[e.AMSCreate=0]="AMSCreate",e[e.AMSUploadThumbnail=1]="AMSUploadThumbnail",e[e.AMSUploadContent=2]="AMSUploadContent",e[e.AMSForward=3]="AMSForward",e[e.AMSGetStatus=4]="AMSGetStatus",e[e.ChatService=5]="ChatService",e[e.Azure=6]="Azure",e[e.URLPreview=7]="URLPreview",e[e.CreateConversation=8]="CreateConversation",e[e.ChatServiceUpdateProperties=9]="ChatServiceUpdateProperties"}(t.PostingTransferSource||(t.PostingTransferSource={})),function(e){e[e.AmsDownload=0]="AmsDownload",e[e.AMSGetStatus=1]="AMSGetStatus"}(t.DownloadTransferSource||(t.DownloadTransferSource={})),function(e){e[e.LongPoll=0]="LongPoll",e[e.ChatSync=1]="ChatSync",e[e.PushNotification=2]="PushNotification",e[e.LocalChange=3]="LocalChange",e[e.Trouter=4]="Trouter"}(t.MessageOrigin||(t.MessageOrigin={})),function(e){e[e.LongPoll=0]="LongPoll"}(t.ChatEventOrigin||(t.ChatEventOrigin={})),function(e){e[e.ShareCardFromPage=0]="ShareCardFromPage",e[e.ShareUrlFromPage=1]="ShareUrlFromPage",e[e.ShareCardFromBrowser=2]="ShareCardFromBrowser",e[e.ShareUrlFromBrowser=3]="ShareUrlFromBrowser",e[e.ShareCurrentUrlFromBrowser=4]="ShareCurrentUrlFromBrowser",e[e.ShareCardFromAddin=5]="ShareCardFromAddin",e[e.ShareUrlFromAddin=6]="ShareUrlFromAddin"}(t.BrowserShareAction||(t.BrowserShareAction={})),function(e){e[e.FindPanelCategory=0]="FindPanelCategory",e[e.FindPanelSearch=1]="FindPanelSearch",e[e.Url=2]="Url"}(t.BingEntryPoint||(t.BingEntryPoint={})),function(e){e[e.BingConsentDialog=0]="BingConsentDialog",e[e.BingSettings=1]="BingSettings"}(t.BingPermissionsEntryPoint||(t.BingPermissionsEntryPoint={})),function(e){e[e.ConsentDeferred=0]="ConsentDeferred",e[e.ConsentGranted=1]="ConsentGranted"}(t.SuggestionsAuthStep||(t.SuggestionsAuthStep={})),function(e){e[e.ZeroInput=0]="ZeroInput",e[e.ShortQuery=1]="ShortQuery",e[e.LongQuery=2]="LongQuery"}(t.SearchType||(t.SearchType={})),function(e){e[e.Default=0]="Default",e[e.Few=1]="Few"}(t.ContactsLevel||(t.ContactsLevel={})),function(e){e[e.Unknown=0]="Unknown",e[e.RecentsListSearchButton=1]="RecentsListSearchButton",e[e.ContactsPanel=2]="ContactsPanel",e[e.ElectronMenu=3]="ElectronMenu",e[e.QuickCallPanel=4]="QuickCallPanel",e[e.KeyboardShortcut=5]="KeyboardShortcut",e[e.SuperComposer=6]="SuperComposer",e[e.LandingScreen=7]="LandingScreen"}(t.SearchPanelInitiator||(t.SearchPanelInitiator={})),function(e){e[e.AddContact=0]="AddContact",e[e.AddingParticipantsToGroup=1]="AddingParticipantsToGroup",e[e.ActiveNowPanel=2]="ActiveNowPanel",e[e.ContactsPanel=3]="ContactsPanel",e[e.ContactsPanelV2=4]="ContactsPanelV2",e[e.DiscoverPanel=5]="DiscoverPanel",e[e.FindBots=6]="FindBots",e[e.MoreContactsPanel=7]="MoreContactsPanel",e[e.NewChat=8]="NewChat",e[e.NewGroup=9]="NewGroup",e[e.NewPrivateChat=10]="NewPrivateChat",e[e.QuickCallPanel=11]="QuickCallPanel",e[e.SearchPanel=12]="SearchPanel",e[e.ShareWithPanel=13]="ShareWithPanel",e[e.SuperComposer=14]="SuperComposer",e[e.NewCellularSmsConversation=15]="NewCellularSmsConversation",e[e.QuickCallPanelModal=16]="QuickCallPanelModal"}(t.SearchResultsListOrigin||(t.SearchResultsListOrigin={})),function(e){e[e.ClickPlusMenu=0]="ClickPlusMenu",e[e.NavigateToBotStore=1]="NavigateToBotStore",e[e.CloseBotStore=2]="CloseBotStore",e[e.ViewBotProfile=3]="ViewBotProfile",e[e.CloseBotProfile=4]="CloseBotProfile",e[e.ClickChatWithBot=5]="ClickChatWithBot",e[e.ClickShareBot=6]="ClickShareBot",e[e.SearchBotInRecents=7]="SearchBotInRecents",e[e.ClickMoreForCategory=8]="ClickMoreForCategory",e[e.MessageBot=9]="MessageBot",e[e.BlockBot=10]="BlockBot",e[e.DeleteBot=11]="DeleteBot",e[e.AutoAddBot=12]="AutoAddBot"}(t.BotsInteraction||(t.BotsInteraction={})),function(e){e[e.BotsDetailsPanel=0]="BotsDetailsPanel",e[e.GetStarted=1]="GetStarted",e[e.AddBotToContacts=2]="AddBotToContacts",e[e.SendMessage=3]="SendMessage"}(t.BotsOriginatingPanel||(t.BotsOriginatingPanel={})),function(e){e[e.AddressBook=0]="AddressBook",e[e.AddressBookWithAlphaHeaders=1]="AddressBookWithAlphaHeaders",e[e.AllPeople=2]="AllPeople",e[e.AllPeopleWithoutAddressBook=3]="AllPeopleWithoutAddressBook",e[e.Bots=4]="Bots",e[e.ContactsPrivacyNoticeBanner=5]="ContactsPrivacyNoticeBanner",e[e.FavoriteContacts=6]="FavoriteContacts",e[e.GroupChats=7]="GroupChats",e[e.InviteLink=8]="InviteLink",e[e.SyncAddressBookBanner=9]="SyncAddressBookBanner",e[e.SyncAddressBookLink=10]="SyncAddressBookLink",e[e.Messages=11]="Messages",e[e.PublicDirectory=12]="PublicDirectory",e[e.UpcomingCalls=13]="UpcomingCalls",e[e.RecentCalls=14]="RecentCalls",e[e.RecentCallsExtended=15]="RecentCallsExtended",e[e.SuggestedFrequentConversations=16]="SuggestedFrequentConversations",e[e.SuggestedRecentConversations=17]="SuggestedRecentConversations",e[e.SuggestedRecentConversationsWithEstablishedPrivateConversations=18]="SuggestedRecentConversationsWithEstablishedPrivateConversations",e[e.CombinedContacts=19]="CombinedContacts",e[e.CombinedContactsWithoutAlphaHeaders=20]="CombinedContactsWithoutAlphaHeaders",e[e.CombinedContactsWithoutAddressBookOrAlphaHeaders=21]="CombinedContactsWithoutAddressBookOrAlphaHeaders",e[e.CombinedContactsWithoutAddressBook=22]="CombinedContactsWithoutAddressBook",e[e.SkypeContacts=23]="SkypeContacts",e[e.PstnDialpad=24]="PstnDialpad",e[e.PhoneNumberVerificationLink=25]="PhoneNumberVerificationLink",e[e.ActiveNow=26]="ActiveNow",e[e.ShareGroup=27]="ShareGroup",e[e.AddContactLink=28]="AddContactLink",e[e.SearchFeedbackLink=29]="SearchFeedbackLink",e[e.AllPeopleWithPhoneNumbers=30]="AllPeopleWithPhoneNumbers",e[e.GroupMember=31]="GroupMember",e[e.ConnectWithPeople=32]="ConnectWithPeople"}(t.SearchResultsListGroup||(t.SearchResultsListGroup={})),function(e){e[e.Home=0]="Home",e[e.Conversation=1]="Conversation"}(t.CaptureNavFrom||(t.CaptureNavFrom={})),function(e){e[e.Unknown=0]="Unknown",e[e.PlusButton=1]="PlusButton",e[e.Recents=2]="Recents",e[e.Search=3]="Search",e[e.PeoplePanel=4]="PeoplePanel",e[e.AppStart=5]="AppStart",e[e.BotDetails=6]="BotDetails",e[e.Call=7]="Call",e[e.CallComplete=8]="CallComplete",e[e.Gallery=9]="Gallery",e[e.GroupProfile=10]="GroupProfile",e[e.UserProfile=11]="UserProfile",e[e.AlertsPanel=12]="AlertsPanel",e[e.InAppNotification=13]="InAppNotification",e[e.SystemNotification=14]="SystemNotification",e[e.DeepLink=15]="DeepLink",e[e.ShareToSkype=16]="ShareToSkype",e[e.CompositeNavRedirectToRecentConv=17]="CompositeNavRedirectToRecentConv",e[e.CompositeNavCloseShareWithPanel=18]="CompositeNavCloseShareWithPanel",e[e.CompositeNavCloseLocationPicker=19]="CompositeNavCloseLocationPicker",e[e.CompositeNavCloseLocationViewer=20]="CompositeNavCloseLocationViewer",e[e.NavToDefaultConv=21]="NavToDefaultConv",e[e.CapturePanel=22]="CapturePanel",e[e.DesktopCloseCapturePanel=23]="DesktopCloseCapturePanel",e[e.DesktopCloseCapturePreviewPanel=24]="DesktopCloseCapturePreviewPanel",e[e.LinkForNewGroupWithBot=25]="LinkForNewGroupWithBot",e[e.LinkForNewGroupWithUser=26]="LinkForNewGroupWithUser",e[e.LinkForNewGroupWithUserAndBot=27]="LinkForNewGroupWithUserAndBot",e[e.Announcement=28]="Announcement",e[e.MediaPicker=29]="MediaPicker",e[e.QuoteLink=30]="QuoteLink",e[e.SwiftCardLink=31]="SwiftCardLink",e[e.FeedbackMechanism=32]="FeedbackMechanism",e[e.SlashCommand=33]="SlashCommand",e[e.HeaderButtonNewGroupWithUser=34]="HeaderButtonNewGroupWithUser",e[e.KeyboardShortcutNewGroupWithUser=35]="KeyboardShortcutNewGroupWithUser",e[e.PopCards=36]="PopCards",e[e.AppMenu=37]="AppMenu",e[e.EngagementNotice=38]="EngagementNotice",e[e.PSTNDialer=39]="PSTNDialer",e[e.SmsControl=40]="SmsControl",e[e.SMSNumberSwitch=41]="SMSNumberSwitch",e[e.CallOrInvitePrompt=42]="CallOrInvitePrompt",e[e.NewPrivateConversation=43]="NewPrivateConversation",e[e.SwiftForwardComplete=44]="SwiftForwardComplete",e[e.Campaign=45]="Campaign",e[e.InviteLink=46]="InviteLink",e[e.ElectronUri=47]="ElectronUri",e[e.OnUrlChange=48]="OnUrlChange",e[e.LinkerUtil=49]="LinkerUtil",e[e.InitialUrl=50]="InitialUrl",e[e.NewChat=51]="NewChat",e[e.NewGroup=52]="NewGroup",e[e.NewModeratedGroup=53]="NewModeratedGroup",e[e.UserProfileNewGroupWithUser=54]="UserProfileNewGroupWithUser",e[e.BotProfileNewGroupWithBot=55]="BotProfileNewGroupWithBot",e[e.NewGroupWithUserAndBot=56]="NewGroupWithUserAndBot",e[e.KeyboardShortcutAddPeopleToGroup=57]="KeyboardShortcutAddPeopleToGroup",e[e.HeaderButtonAddUserToGroup=58]="HeaderButtonAddUserToGroup",e[e.NewPrivateChat=59]="NewPrivateChat",e[e.SuperComposer=60]="SuperComposer",e[e.InviteMorePeopleAfterJoinButton=61]="InviteMorePeopleAfterJoinButton",e[e.MediaBar=62]="MediaBar",e[e.MessageComposer=63]="MessageComposer",e[e.HomeScreen=64]="HomeScreen",e[e.TabSwitcher=65]="TabSwitcher",e[e.KeyboardShortcut=66]="KeyboardShortcut",e[e.SystemNotificationMissedCall=67]="SystemNotificationMissedCall",e[e.SystemNotificationMissedP2PCall=68]="SystemNotificationMissedP2PCall",e[e.SystemNotificationChatReply=69]="SystemNotificationChatReply",e[e.SystemNotificationScheduledCall=70]="SystemNotificationScheduledCall",e[e.GoLiveNotification=71]="GoLiveNotification",e[e.NativeContactIntent=72]="NativeContactIntent",e[e.SharedContactCard=73]="SharedContactCard",e[e.NewSms=74]="NewSms",e[e.ArchivedConversations=75]="ArchivedConversations",e[e.UpcomingCallsPanel=76]="UpcomingCallsPanel",e[e.PeopleRecommendationsDiscoverPanel=77]="PeopleRecommendationsDiscoverPanel",e[e.PeopleRecommendationsUserCard=78]="PeopleRecommendationsUserCard",e[e.CallParticipantActionMenu=79]="CallParticipantActionMenu",e[e.KeyboardShortcutRecents=80]="KeyboardShortcutRecents",e[e.PresenceChangeNotification=81]="PresenceChangeNotification",e[e.BookmarkMessage=82]="BookmarkMessage",e[e.DragDropFromConversationToRecentLists=83]="DragDropFromConversationToRecentLists",e[e.CreateMeetNowConversation=84]="CreateMeetNowConversation",e[e.MeetNowChat=85]="MeetNowChat",e[e.MeetNowCall=86]="MeetNowCall",e[e.MeetNowJoinFlow=87]="MeetNowJoinFlow",e[e.OverflowMenu=88]="OverflowMenu",e[e.MeetNowJoinLobby=89]="MeetNowJoinLobby",e[e.MeetNowCreatorPanel=90]="MeetNowCreatorPanel",e[e.GuestUpsellPanel=91]="GuestUpsellPanel",e[e.MeetNowCreatorPopup=92]="MeetNowCreatorPopup"}(t.NavigationConversationOrigin||(t.NavigationConversationOrigin={})),function(e){e[e.PreAnimation=0]="PreAnimation",e[e.Animation=1]="Animation",e[e.Rendered=2]="Rendered"}(t.NavigationConversationTelemetryMetric||(t.NavigationConversationTelemetryMetric={})),function(e){e[e.Invalid=0]="Invalid",e[e.Accepted=1]="Accepted",e[e.AcceptPendingSender=2]="AcceptPendingSender",e[e.AcceptPendingRecipient=3]="AcceptPendingRecipient"}(t.ConversationStatus||(t.ConversationStatus={})),function(e){e[e.Default=0]="Default",e[e.PhotoOnly=1]="PhotoOnly",e[e.VideoOnly=2]="VideoOnly",e[e.QR=3]="QR"}(t.CaptureMode||(t.CaptureMode={})),function(e){e[e.Quote=0]="Quote",e[e.Mention=1]="Mention",e[e.Reaction=2]="Reaction",e[e.Onboarding=3]="Onboarding",e[e.Engagement=4]="Engagement",e[e.CoachMarks=5]="CoachMarks",e[e.Notice=6]="Notice",e[e.Unknown=7]="Unknown",e[e.ScheduledCall=8]="ScheduledCall"}(t.AlertTypeForTelemetry||(t.AlertTypeForTelemetry={})),function(e){e[e.My=0]="My",e[e.User=1]="User",e[e.Bot=2]="Bot",e[e.Group=3]="Group"}(t.ProfileType||(t.ProfileType={})),function(e){e[e.Wasted=-1]="Wasted",e[e.AlreadyRunning=0]="AlreadyRunning",e[e.FollowedByNonWarmPush=1]="FollowedByNonWarmPush",e[e.FollowedByForegrounding=10]="FollowedByForegrounding",e[e.FollowedByCall=100]="FollowedByCall"}(t.WarmCallNotificationDisposition||(t.WarmCallNotificationDisposition={})),function(e){e[e.Unknown=0]="Unknown",e[e.ChatServiceV1=1]="ChatServiceV1",e[e.MessagingApi=2]="MessagingApi"}(t.ChatServiceConnectionType||(t.ChatServiceConnectionType={})),function(e){e[e.AuthActionLink=0]="AuthActionLink",e[e.AudioVideoSettings=1]="AudioVideoSettings",e[e.EngagementNotice=2]="EngagementNotice",e[e.LinkNode=3]="LinkNode",e[e.BotSettings=4]="BotSettings",e[e.ConsentModal=5]="ConsentModal",e[e.FindPanel=6]="FindPanel",e[e.SuggestionsLearnMore=7]="SuggestionsLearnMore",e[e.NotebookLink=8]="NotebookLink",e[e.DeepLinkRequest=9]="DeepLinkRequest",e[e.SyncAddressBookDialogPrivacyStatement=10]="SyncAddressBookDialogPrivacyStatement",e[e.PopCard=11]="PopCard",e[e.SwiftActionView=12]="SwiftActionView",e[e.SwiftQuickReplyView=13]="SwiftQuickReplyView",e[e.Moji=14]="Moji",e[e.LinkerUtil=15]="LinkerUtil",e[e.TPUMRequest=16]="TPUMRequest",e[e.CloseAccount=17]="CloseAccount",e[e.LocationNode=18]="LocationNode",e[e.AdaptiveCard=19]="AdaptiveCard",e[e.ConnectorProfile=20]="ConnectorProfile",e[e.CreditExpiration=21]="CreditExpiration",e[e.SuggestionsConsentLearnMore=22]="SuggestionsConsentLearnMore",e[e.JoinLink=23]="JoinLink",e[e.ReadReceiptsSettingsDescription=24]="ReadReceiptsSettingsDescription",e[e.SearchSuggestionsSettings=25]="SearchSuggestionsSettings",e[e.AddinMenu=26]="AddinMenu",e[e.Plugins=27]="Plugins",e[e.NetworkConnectionAlert=28]="NetworkConnectionAlert",e[e.FileSharingLimits=29]="FileSharingLimits",e[e.PrivacyProfile=30]="PrivacyProfile",e[e.PeopleYouMayKnowNoticeDialog=31]="PeopleYouMayKnowNoticeDialog",e[e.TelemetryConsentDialog=32]="TelemetryConsentDialog",e[e.SubscriptionDataSection=33]="SubscriptionDataSection",e[e.MeControl=34]="MeControl",e[e.WebLauncher=35]="WebLauncher",e[e.MeProfile=36]="MeProfile",e[e.HotkeysSettingsDescription=37]="HotkeysSettingsDescription",e[e.UserProfileOnboarding=38]="UserProfileOnboarding",e[e.GuestUpsellPanel=39]="GuestUpsellPanel",e[e.TelemetryConsentSettingsDescription=40]="TelemetryConsentSettingsDescription",e[e.CallPanel=41]="CallPanel",e[e.PurchaseRedirect=42]="PurchaseRedirect",e[e.EmptyStateCTA=43]="EmptyStateCTA",e[e.AgeGroupRestrictions=44]="AgeGroupRestrictions",e[e.BingBackgroundReplaceImage=45]="BingBackgroundReplaceImage"}(t.BrowserOrigin||(t.BrowserOrigin={})),function(e){e[e.CdnTokenFetching=0]="CdnTokenFetching",e[e.CdnCookieSetting=1]="CdnCookieSetting"}(t.SkypeCdnTokenFailureOrigin||(t.SkypeCdnTokenFailureOrigin={})),function(e){e[e.Unknown=0]="Unknown",e[e.SplashScreen=1]="SplashScreen",e[e.NoSkypeIdFound=2]="NoSkypeIdFound",e[e.SkypeIdDbError=3]="SkypeIdDbError",e[e.NoMSARefreshTokenFound=4]="NoMSARefreshTokenFound",e[e.NoMSAAccessTokenFound=5]="NoMSAAccessTokenFound",e[e.MSARefreshInvalidGrant=6]="MSARefreshInvalidGrant",e[e.SkypeTokenSilentLoginInvalidGrant=7]="SkypeTokenSilentLoginInvalidGrant",e[e.SkypeTokenSilentLoginFailed=8]="SkypeTokenSilentLoginFailed",e[e.QuickSignOnActive=9]="QuickSignOnActive",e[e.SingleSignOnActive=10]="SingleSignOnActive",e[e.GuestJoinUnavailable=11]="GuestJoinUnavailable",e[e.BackgroundSignIn=12]="BackgroundSignIn",e[e.NewMeetNowFlow=13]="NewMeetNowFlow",e[e.GuestUpsellSignIn=14]="GuestUpsellSignIn",e[e.AgeGroupRestrictions=15]="AgeGroupRestrictions"}(t.RedirectToLoginReason||(t.RedirectToLoginReason={})),function(e){e[e.Unknown=0]="Unknown",e[e.DatabaseError=1]="DatabaseError",e[e.UrlRequested=2]="UrlRequested",e[e.CommandLineRequested=3]="CommandLineRequested",e[e.UnauthorizedMurphyUser=4]="UnauthorizedMurphyUser",e[e.LoginRestarted=5]="LoginRestarted",e[e.SkypeIdMismatch=6]="SkypeIdMismatch",e[e.DesktopMenu=7]="DesktopMenu",e[e.Settings=8]="Settings",e[e.CloseAccount=9]="CloseAccount",e[e.LandingPageSwitchAccount=10]="LandingPageSwitchAccount",e[e.GuestSessionEnded=11]="GuestSessionEnded",e[e.MeControl=12]="MeControl",e[e.CompositeNavigationFooter=13]="CompositeNavigationFooter",e[e.Onboarding=14]="Onboarding",e[e.AgeGroupRestrictions=15]="AgeGroupRestrictions"}(t.LogoutReason||(t.LogoutReason={})),function(e){e[e.FailedToSave=0]="FailedToSave",e[e.FailedToRead=1]="FailedToRead"}(t.KeychainFailureType||(t.KeychainFailureType={})),function(e){e[e.MSARefresh=0]="MSARefresh",e[e.Skype=1]="Skype"}(t.KeychainTokenType||(t.KeychainTokenType={})),function(e){e[e.DeletedMessage=0]="DeletedMessage",e[e.EditedMessage=1]="EditedMessage",e[e.MutatedMessage=2]="MutatedMessage",e[e.CallMessage=3]="CallMessage",e[e.MyMessage=4]="MyMessage",e[e.ChatNotificationsDisabled=5]="ChatNotificationsDisabled",e[e.InAppNotificationsDisabled=6]="InAppNotificationsDisabled",e[e.CameFromSyncOrLocal=7]="CameFromSyncOrLocal",e[e.RecentlyNotified=8]="RecentlyNotified",e[e.Filtered=9]="Filtered",e[e.FromBlockedUser=10]="FromBlockedUser",e[e.MandatoryElectronUpdate=11]="MandatoryElectronUpdate",e[e.EngagementNotificationSuppressed=12]="EngagementNotificationSuppressed",e[e.IsForegroundedInConversation=13]="IsForegroundedInConversation",e[e.SystemMessagePermissionsUnknown=14]="SystemMessagePermissionsUnknown",e[e.SystemMessagePermissionsDenied=15]="SystemMessagePermissionsDenied",e[e.SystemMessageFailure=16]="SystemMessageFailure",e[e.NotifiedInApp=17]="NotifiedInApp",e[e.NotifiedSystemMessage=18]="NotifiedSystemMessage",e[e.ThreadActivitySuppressed=19]="ThreadActivitySuppressed",e[e.DoNotDisturbEnabled=20]="DoNotDisturbEnabled",e[e.SiblingConversationInTabActive=21]="SiblingConversationInTabActive",e[e.LastReactionUserNotFound=22]="LastReactionUserNotFound",e[e.ChatNotificationsDisabledTemporarily=23]="ChatNotificationsDisabledTemporarily",e[e.ScheduledCallInvitationUnknown=24]="ScheduledCallInvitationUnknown",e[e.DoNotDisturbCallNotificationEnabled=25]="DoNotDisturbCallNotificationEnabled",e[e.ScheduleCallNotificationsDisabled=26]="ScheduleCallNotificationsDisabled",e[e.InAppScheduleCallNotificationsDisabled=27]="InAppScheduleCallNotificationsDisabled",e[e.UnknownConversation=28]="UnknownConversation",e[e.TranslationSettingsSuppressed=29]="TranslationSettingsSuppressed",e[e.OriginalForTranslatedConversationSuppressed=30]="OriginalForTranslatedConversationSuppressed"}(t.MessageProcessResult||(t.MessageProcessResult={})),function(e){e[e.DoNotDisturbEnabled=0]="DoNotDisturbEnabled",e[e.FromBlockedUser=1]="FromBlockedUser",e[e.IsForegroundedInConversation=2]="IsForegroundedInConversation",e[e.MandatoryElectronUpdate=3]="MandatoryElectronUpdate",e[e.NotifiedSystemMessage=4]="NotifiedSystemMessage",e[e.NotifyOnPresenceDisabled=5]="NotifyOnPresenceDisabled",e[e.SiblingConversationInTabActive=6]="SiblingConversationInTabActive",e[e.SystemMessageFailure=7]="SystemMessageFailure",e[e.SystemMessagePermissionsDenied=8]="SystemMessagePermissionsDenied",e[e.SystemMessagePermissionsUnknown=9]="SystemMessagePermissionsUnknown",e[e.UnknownConversation=10]="UnknownConversation"}(t.PresenceChangeNotificationResult||(t.PresenceChangeNotificationResult={})),function(e){e[e.OpenNotificationPanel=0]="OpenNotificationPanel",e[e.OpenAppSettings=1]="OpenAppSettings",e[e.OpenHelpInABrowser=2]="OpenHelpInABrowser",e[e.OpenDialpad=3]="OpenDialpad",e[e.StartNewConversation=4]="StartNewConversation",e[e.NewGroup=5]="NewGroup",e[e.OpenContactsPanel=6]="OpenContactsPanel",e[e.SendFeedback=7]="SendFeedback",e[e.OpenThemePicker=8]="OpenThemePicker",e[e.NavigateToRecents=9]="NavigateToRecents",e[e.NavigateToHistory=10]="NavigateToHistory",e[e.ShowConversationProfile=11]="ShowConversationProfile",e[e.AddPeopleToConversation=12]="AddPeopleToConversation",e[e.SendFile=13]="SendFile",e[e.StartVideoCall=14]="StartVideoCall",e[e.StartAudioCall=15]="StartAudioCall",e[e.ToggleGallery=16]="ToggleGallery",e[e.MarkAsUnread=17]="MarkAsUnread",e[e.ToggleLeftPanel=18]="ToggleLeftPanel",e[e.HangupOrRejectCall=19]="HangupOrRejectCall",e[e.ToggleMicrophone=20]="ToggleMicrophone",e[e.ToggleCamera=21]="ToggleCamera",e[e.AcceptIncomingCall=22]="AcceptIncomingCall",e[e.AddPeopleToCall=23]="AddPeopleToCall",e[e.Search=24]="Search",e[e.SearchInConversation=25]="SearchInConversation",e[e.ToggleTheme=26]="ToggleTheme",e[e.EditMessage=27]="EditMessage",e[e.EnableMultipleSelectMessages=28]="EnableMultipleSelectMessages",e[e.TakeCallSnapshot=29]="TakeCallSnapshot",e[e.ArchiveConversation=30]="ArchiveConversation",e[e.OpenMainWindow=31]="OpenMainWindow",e[e.Refresh=32]="Refresh",e[e.ZoomIn=33]="ZoomIn",e[e.ZoomOut=34]="ZoomOut",e[e.ResetZoom=35]="ResetZoom",e[e.OpenKeyboardShortcuts=36]="OpenKeyboardShortcuts",e[e.FocusMessageComposer=37]="FocusMessageComposer",e[e.AnnounceMuteStatus=38]="AnnounceMuteStatus",e[e.AnnounceSelfVideoOnOffStatus=39]="AnnounceSelfVideoOnOffStatus",e[e.NavigateToPreviousConversation=40]="NavigateToPreviousConversation",e[e.NavigateToNextConversation=41]="NavigateToNextConversation",e[e.ResizeVideoPreview=42]="ResizeVideoPreview",e[e.FocusScreenSharingToolbar=43]="FocusScreenSharingToolbar",e[e.CloseSplitViewConversation=44]="CloseSplitViewConversation",e[e.Quit=45]="Quit",e[e.CallDebugPanel=46]="CallDebugPanel"}(t.KeyboardShortcut||(t.KeyboardShortcut={})),function(e){e[e.Unknown=1]="Unknown",e[e.LandingPage=2]="LandingPage",e[e.NotificationsPanel=3]="NotificationsPanel",e[e.TabletOnboardingWizard=4]="TabletOnboardingWizard",e[e.TabletInviteLink=5]="TabletInviteLink"}(t.CoachMarkOrigin||(t.CoachMarkOrigin={})),function(e){e[e.LiveLogin=0]="LiveLogin",e[e.WAM=1]="WAM",e[e.Guest=3]="Guest"}(t.LoginMethods||(t.LoginMethods={})),function(e){e[e.MSA=0]="MSA"}(t.InteractiveWAMLoginKeys||(t.InteractiveWAMLoginKeys={})),function(e){e[e.SigninName=0]="SigninName",e[e.LogoutToken=1]="LogoutToken",e[e.FirstTimeSignIn=2]="FirstTimeSignIn",e[e.ForgottenAccounts=3]="ForgottenAccounts",e[e.LoginMethod=4]="LoginMethod",e[e.VerboseDBFlag=5]="VerboseDBFlag",e[e.NukeSdkDbFlag=6]="NukeSdkDbFlag",e[e.GuestLogoutInformation=7]="GuestLogoutInformation",e[e.CampaignReferrer=8]="CampaignReferrer",e[e.UserCacheEnabled=9]="UserCacheEnabled",e[e.SignInReminderLastShownTimeKey=10]="SignInReminderLastShownTimeKey",e[e.SignOutReminderLastShownTimeKey=11]="SignOutReminderLastShownTimeKey",e[e.AppUpdateStatus=12]="AppUpdateStatus",e[e.StartupUrl=13]="StartupUrl",e[e.EngagementBannerLastShownTimeKey=14]="EngagementBannerLastShownTimeKey",e[e.GuestSessionInformation=15]="GuestSessionInformation"}(t.StorageItemKeys||(t.StorageItemKeys={})),function(e){e[e.Unknown=0]="Unknown",e[e.FileUpload=1]="FileUpload",e[e.Camera=2]="Camera",e[e.CameraRoll=3]="CameraRoll",e[e.DragAndDrop=4]="DragAndDrop"}(t.AvatarDataSource||(t.AvatarDataSource={})),function(e){e[e.AddOrUpdate=0]="AddOrUpdate",e[e.Remove=1]="Remove"}(t.AvatarChangeType||(t.AvatarChangeType={})),function(e){e[e.TakePhoto=0]="TakePhoto",e[e.UploadPhoto=1]="UploadPhoto",e[e.ViewPhoto=2]="ViewPhoto",e[e.RemovePhoto=3]="RemovePhoto",e[e.Cancel=4]="Cancel"}(t.AvatarMenuButtons||(t.AvatarMenuButtons={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.YES=1]="YES",e[e.NO=2]="NO"}(t.FxSceneDeviceSupported||(t.FxSceneDeviceSupported={})),function(e){e[e.UserProfile=0]="UserProfile",e[e.NewActionButton=1]="NewActionButton",e[e.ConversationEnd=2]="ConversationEnd",e[e.InvitationExpire=3]="InvitationExpire",e[e.DeviceSwitch=4]="DeviceSwitch"}(t.E2EEInviteOrigin||(t.E2EEInviteOrigin={})),function(e){e[e.Invitation=0]="Invitation",e[e.DeviceSwitch=1]="DeviceSwitch"}(t.E2EEAcceptOrigin||(t.E2EEAcceptOrigin={})),function(e){e[e.DecryptionFailed=0]="DecryptionFailed",e[e.ConversationEnding=1]="ConversationEnding",e[e.DeviceSwitchDeclining=2]="DeviceSwitchDeclining",e[e.InvitationDeclining=3]="InvitationDeclining",e[e.IdentityLost=4]="IdentityLost",e[e.EncryptionFailed=5]="EncryptionFailed"}(t.E2EERejectionReason||(t.E2EERejectionReason={})),function(e){e[e.Unknown=0]="Unknown",e[e.AddressBookContactListItem=1]="AddressBookContactListItem",e[e.AddressBookHelper=2]="AddressBookHelper",e[e.BotProfileContent=3]="BotProfileContent",e[e.CallCard=4]="CallCard",e[e.CallControls=5]="CallControls",e[e.CallingOptionsHelper=6]="CallingOptionsHelper",e[e.CallManager=7]="CallManager",e[e.CallOrInvitePrompt=8]="CallOrInvitePrompt",e[e.CallsTabCallIcon=9]="CallsTabCallIcon",e[e.CallsTabQuickCallPanel=10]="CallsTabQuickCallPanel",e[e.CommandInvokerService=11]="CommandInvokerService",e[e.ContactsPanel=12]="ContactsPanel",e[e.ConversationHeader=13]="ConversationHeader",e[e.DeepLink=14]="DeepLink",e[e.DesktopCallNotification=15]="DesktopCallNotification",e[e.DesktopContentPanel=16]="DesktopContentPanel",e[e.GoLive=17]="GoLive",e[e.GroupProfile=18]="GroupProfile",e[e.IncomingRing=19]="IncomingRing",e[e.JoinCall=20]="JoinCall",e[e.InviteLink=21]="InviteLink",e[e.LocalNotificationAction=22]="LocalNotificationAction",e[e.PhoneInviteListItem=23]="PhoneInviteListItem",e[e.Profile=24]="Profile",e[e.PstnDialpad=25]="PstnDialpad",e[e.PstnDialpadSearchResult=26]="PstnDialpadSearchResult",e[e.PstnDialpadPasted=27]="PstnDialpadPasted",e[e.PstnDialpadTyped=28]="PstnDialpadTyped",e[e.PstnDialpadPrefilled=29]="PstnDialpadPrefilled",e[e.PstnDialpadSaveContact=30]="PstnDialpadSaveContact",e[e.QuickCallPanelCall=31]="QuickCallPanelCall",e[e.QuickCallPanelNewCall=32]="QuickCallPanelNewCall",e[e.SearchItem=33]="SearchItem",e[e.SearchPanel=34]="SearchPanel",e[e.SettingsTestCall=35]="SettingsTestCall",e[e.SkypeUserListItem=36]="SkypeUserListItem",e[e.StartEmergencyCall=37]="StartEmergencyCall",e[e.StartNewGroupCallAndConv=38]="StartNewGroupCallAndConv",e[e.UserProfileContent=39]="UserProfileContent",e[e.ConversationListItem=40]="ConversationListItem",e[e.GoLiveSlashCommand=41]="GoLiveSlashCommand",e[e.CallMonitor=42]="CallMonitor",e[e.PipView=43]="PipView",e[e.NativeContactIntent=44]="NativeContactIntent",e[e.UnansweredCallPanel=45]="UnansweredCallPanel",e[e.UpcomingCallsPanel=46]="UpcomingCallsPanel",e[e.UWPSplitedViewEscalation=47]="UWPSplitedViewEscalation",e[e.MeetNow=48]="MeetNow"}(t.NavigationCallOrigin||(t.NavigationCallOrigin={})),function(e){e[e.Unknown=0]="Unknown",e[e.CallSharedPhoto=1]="CallSharedPhoto",e[e.CallCard=2]="CallCard",e[e.Gallery=3]="Gallery",e[e.MessageStream=4]="MessageStream"}(t.NavigationMediaViewerOrigin||(t.NavigationMediaViewerOrigin={})),function(e){e[e.UserCard=0]="UserCard",e[e.LandingScreen=1]="LandingScreen",e[e.UserProfileOnboarding=2]="UserProfileOnboarding"}(t.AvatarUpdateLocation||(t.AvatarUpdateLocation={})),function(e){e[e.UserCard=0]="UserCard",e[e.LandingScreen=1]="LandingScreen",e[e.UserProfileOnboarding=2]="UserProfileOnboarding"}(t.NameUpdateLocation||(t.NameUpdateLocation={})),function(e){e[e.UserCard=0]="UserCard",e[e.LandingScreen=1]="LandingScreen",e[e.MeControl=2]="MeControl",e[e.NavigationHeader=3]="NavigationHeader"}(t.MoodMessageUpdateOrigin||(t.MoodMessageUpdateOrigin={})),function(e){e[e.UserCard=0]="UserCard",e[e.LocalAddressBook=1]="LocalAddressBook",e[e.AddPSTNContact=2]="AddPSTNContact"}(t.ContactNickNameUpdateOrigin||(t.ContactNickNameUpdateOrigin={})),function(e){e[e.QuickCallPanel=0]="QuickCallPanel",e[e.QuickCallPanelAddToCall=1]="QuickCallPanelAddToCall",e[e.QuickCallPanelNewCall=2]="QuickCallPanelNewCall",e[e.QuickCallPanelFab=3]="QuickCallPanelFab",e[e.CallFailedInvalidNumber=4]="CallFailedInvalidNumber",e[e.DesktopNavigation=5]="DesktopNavigation",e[e.DesktopNavigationSearchBox=6]="DesktopNavigationSearchBox",e[e.RootCompositeNavigationView=7]="RootCompositeNavigationView",e[e.CreditExpiration=8]="CreditExpiration",e[e.DeepLink=9]="DeepLink",e[e.BrowseIntent=10]="BrowseIntent",e[e.CallIntent=11]="CallIntent",e[e.MobileHubHeader=12]="MobileHubHeader",e[e.NativeContactIntent=13]="NativeContactIntent",e[e.SavePhoneNumber=14]="SavePhoneNumber",e[e.LandingPage=15]="LandingPage",e[e.CallOrInviteMenu=16]="CallOrInviteMenu"}(t.DialerNavigationSource||(t.DialerNavigationSource={})),function(e){e.S4LSearch="S4LSearch",e.S4LPainList="S4LPainList"}(t.VSOTag||(t.VSOTag={})),function(e){e[e.Unknown=0]="Unknown",e[e.KeyboardShortcut=1]="KeyboardShortcut",e[e.OverflowMenu=2]="OverflowMenu",e[e.Ribbon=3]="Ribbon",e[e.RosterView=4]="RosterView",e[e.GoLiveInformationView=5]="GoLiveInformationView",e[e.CallControls=6]="CallControls"}(t.NavigationAddToCallOrigin||(t.NavigationAddToCallOrigin={})),function(e){e[e.UserCard=0]="UserCard",e[e.ShareProfile=1]="ShareProfile",e[e.ProfilePicturePanel=2]="ProfilePicturePanel",e[e.LandingScreen=3]="LandingScreen",e[e.ConversationInfoPanel=4]="ConversationInfoPanel",e[e.GroupProfileHeader=5]="GroupProfileHeader",e[e.MeControl=6]="MeControl",e[e.Onboarding=7]="Onboarding",e[e.MeProfile=8]="MeProfile",e[e.UserProfileOnboarding=9]="UserProfileOnboarding"}(t.AvatarPickerOrigin||(t.AvatarPickerOrigin={})),function(e){e[e.AddToContact=0]="AddToContact",e[e.AppSettings=1]="AppSettings",e[e.AvatarClick=2]="AvatarClick",e[e.BotChatSettingsPanel=3]="BotChatSettingsPanel",e[e.DeepLink=4]="DeepLink",e[e.GroupChatSettingsPanel=5]="GroupChatSettingsPanel",e[e.MeControl=6]="MeControl",e[e.Menu=7]="Menu",e[e.Unknown=8]="Unknown"}(t.ProfileOpenOrigin||(t.ProfileOpenOrigin={})),function(e){e[e.AvatarPicker=0]="AvatarPicker",e[e.ProfilePicturePanel=1]="ProfilePicturePanel"}(t.AvatarPolicyChangeOrigin||(t.AvatarPolicyChangeOrigin={})),function(e){e[e.NetworkError=0]="NetworkError",e[e.NoError=1]="NoError",e[e.SizeLimitReached=2]="SizeLimitReached",e[e.UnsupportedImageType=3]="UnsupportedImageType",e[e.ResizeReencodeError=4]="ResizeReencodeError",e[e.HttpError=5]="HttpError"}(t.AvatarChangeError||(t.AvatarChangeError={})),function(e){e[e.Profile=0]="Profile",e[e.DesktopOverflowMenu=1]="DesktopOverflowMenu",e[e.Mobile=2]="Mobile",e[e.Shortcut=3]="Shortcut",e[e.MeControl=4]="MeControl"}(t.SettingsOrigin||(t.SettingsOrigin={})),function(e){e[e.ActiveNowPanel=0]="ActiveNowPanel",e[e.AddContactSearch=1]="AddContactSearch",e[e.BotChatSettings=2]="BotChatSettings",e[e.BotChatUtils=3]="BotChatUtils",e[e.BotProfile=4]="BotProfile",e[e.CallNavigation=5]="CallNavigation",e[e.ChatSync=6]="ChatSync",e[e.ContactsPanelSearch=7]="ContactsPanelSearch",e[e.ContactsPanelV2Search=8]="ContactsPanelV2Search",e[e.ContactsStore=9]="ContactsStore",e[e.ContactSwiftCard=10]="ContactSwiftCard",e[e.ConvListItem=11]="ConvListItem",e[e.CreateChatScenario=12]="CreateChatScenario",e[e.DiscoverPeopleSearch=13]="DiscoverPeopleSearch",e[e.FeedbackBot=14]="FeedbackBot",e[e.GroupProfile=15]="GroupProfile",e[e.InviteSuggestion=16]="InviteSuggestion",e[e.InviteSuggestionBot=17]="InviteSuggestionBot",e[e.Navigation=18]="Navigation",e[e.NotContactSwiftCard=19]="NotContactSwiftCard",e[e.OutgoingCall=20]="OutgoingCall",e[e.SearchPanel=21]="SearchPanel",e[e.SlashCommand=22]="SlashCommand",e[e.SmsMessageButton=23]="SmsMessageButton",e[e.TranslatedChat=24]="TranslatedChat",e[e.UrlConverter=25]="UrlConverter",e[e.UserProfile=26]="UserProfile",e[e.UserProfileSms=27]="UserProfileSms",e[e.UserRecommendation=28]="UserRecommendation",e[e.UserProfileTranslated=29]="UserProfileTranslated",e[e.SmsButton=30]="SmsButton",e[e.CallParticipantActionMenu=31]="CallParticipantActionMenu"}(t.ConversationFakedOrigin||(t.ConversationFakedOrigin={})),function(e){e[e.Redstone1=14393]="Redstone1",e[e.Redstone2=15063]="Redstone2",e[e.Redstone3=16299]="Redstone3",e[e.Redstone4=17134]="Redstone4",e[e.Redstone5WithCameraPermissionFix=17677]="Redstone5WithCameraPermissionFix",e[e.Redstone5=17763]="Redstone5",e[e.NineteenH1=18362]="NineteenH1",e[e.NineteenH2=18363]="NineteenH2",e[e.TwentyH1=19041]="TwentyH1",e[e.TwentyH2=19042]="TwentyH2",e[e.TwentyOneH1=19043]="TwentyOneH1",e[e.TwentyOneH2=22e3]="TwentyOneH2"}(t.RSVersion||(t.RSVersion={}));var n=i(52210);Object.defineProperty(t,"LogTraceArea",{enumerable:!0,get:function(){return n.LogTraceArea}});var o=i(15069);Object.defineProperty(t,"PlatformType",{enumerable:!0,get:function(){return o.PlatformType}}),function(e){e[e.Success=0]="Success",e[e.Fail=1]="Fail",e[e.Cancel=2]="Cancel"}(t.ReencodeState||(t.ReencodeState={})),function(e){e[e.MessageActionMenu=0]="MessageActionMenu",e[e.InAppBrowserActionMenu=1]="InAppBrowserActionMenu",e[e.LocationActionMenu=2]="LocationActionMenu",e[e.DocumentActionMenu=3]="DocumentActionMenu",e[e.CapturePhotoOrVideo=4]="CapturePhotoOrVideo",e[e.BotActionMenu=5]="BotActionMenu",e[e.AddInMenu=6]="AddInMenu",e[e.MultiSelect=7]="MultiSelect",e[e.External=8]="External",e[e.UserProfile=9]="UserProfile",e[e.MessageComposer=10]="MessageComposer"}(t.SharePanelEntryOrigin||(t.SharePanelEntryOrigin={})),function(e){e[e.MissedCall=0]="MissedCall",e[e.GoLive=1]="GoLive",e[e.Photo=2]="Photo",e[e.Video=3]="Video",e[e.File=4]="File",e[e.Text=5]="Text",e[e.Mention=6]="Mention",e[e.Quote=7]="Quote",e[e.Reaction=8]="Reaction",e[e.Sticker=9]="Sticker",e[e.Moji=10]="Moji",e[e.Location=11]="Location",e[e.ScheduledCallInvite=12]="ScheduledCallInvite",e[e.Poll=13]="Poll",e[e.CallbackReminder=14]="CallbackReminder",e[e.PresenceChangeNotification=15]="PresenceChangeNotification",e[e.MediaAlbum=16]="MediaAlbum"}(t.NotificationTypeAppLaunched||(t.NotificationTypeAppLaunched={})),function(e){e[e.Allowed=1]="Allowed",e[e.Blocked=2]="Blocked",e[e.NotContact=3]="NotContact"}(t.PersonAllowed||(t.PersonAllowed={})),function(e){e[e.PictureViewer=1]="PictureViewer",e[e.VideoViewer=2]="VideoViewer",e[e.Prefetch=3]="Prefetch",e[e.AutoDownload=4]="AutoDownload"}(t.MediaDownloadIntent||(t.MediaDownloadIntent={})),function(e){e[e.NoNetwork=1]="NoNetwork",e[e.CaptivePortal=2]="CaptivePortal"}(t.ConnectivityAlertType||(t.ConnectivityAlertType={})),function(e){e.TransactionStarted="transaction_started",e.CreateOrder="create_order",e.PaymentStatusChanged="payment_status_changed",e.PaymentApplicationUsernameMismatch="payment_application_username_mismatch",e.FailureProductDetailsEmpty="failure_product_details_empty",e.IosOrderCreateFailed="ios_order_create_failed",e.IosTransactionProcessingFailure="IOS_transaction_processing_failure",e.ProcessingIosOrderCompleted="processing_ios_order_completed",e.ProcessingIosOrderFailed="processing_ios_order_failed",e.CancellingIosOrderCompleted="cancelling_ios_order_completed",e.CancellingIosOrderFailed="cancelling_ios_order_failed",e.LegacyIosOrderNotHandled="legacy_ios_order_not_handled",e.TransactionFinished="transaction_finished",e.IosOrderCreated="ios_order_created",e.FinishTransactionFailed="finish_transaction_failed",e.StratusIosOrderAlreadyCreated="ios_order_already_created",e.StratusIosOrderRenewed="ios_order_renewed",e.StratusIosOrderAlreadyRenewed="ios_order_already_renewed",e.StratusIosOrderRefunded="ios_order_refunded",e.StratusIosOrderAlreadyRefunded="ios_order_already_refunded",e.StratusIosOrderCancelled="ios_order_cancelled",e.StratusIosReceiptProcessed="ios_receipt_processed",e.StratusIosInvalidSkypeNumberService="ios_invalid_skype_number_service",e.PurchaseIntentionGetEmpty="purchase_intention_get_empty",e.PurchaseIntentionPostFailed="purchase_intention_post_failed",e.PurchaseIntentionDeleteFailed="purchase_intention_delete_failed",e.SkypeOrderCreated="skype_order_created",e.SkypeOrderCreateFailed="skype_order_create_failed",e.SkypeOrderCreateLimitReachedRetry="skype_order_create_limit_reached_retry",e.SkypeOrderCreateLimitReachedError="skype_order_create_limit_reached_error",e.MisconfiguredProduct="misconfigured_product",e.ProductFetchFailed="product_fetch_failed",e.CreditOfferFetchFailed="offers_credit_fetch_failed",e.SubscriptionsOfferFetchFailed="offers_subscriptions_fetch_failed",e.BillingInformationFetchFailed="offers_billing_information_fetch_failed",e.OffersProcessingFailed="offers_processing_failed",e.RecommendationApiSuccess="recommendation_api_success",e.PromotionFetchFailed="promotions_fetch_failed",e.ProductFetchCountMismatch="product_fetch_count_mismatch",e.CurrencyConversionFailed="currency_conversion_failed",e.CallingDestinationsFailed="calling_destinations_failed",e.BillingPeriodsFetchFailed="billing_periods_fetch_failed",e.BillingInformationsFetchFailed="billing_informations_fetch_failed",e.OfferHrefNotFound="offer_href_not_found",e.ProductCheckFailed="product_check_failed",e.PurchaseOptionFetchFailed="purchase_option_fetch_failed",e.ProductMapCountMismatch="product_map_count_mismatch",e.ProductMapCount="product_map_count",e.ProductNotMapped="product_not_mapped",e.ProductFetchTimedOut="product_fetch_timed_out",e.WebflowRedirect="webflow_redirect",e.BuyClick="buy_click",e.BillingPeriodRendered="billing_period_block_rendered",e.BillingPeriodSelected="billing_period_selected",e.DialogPopup="dialog_popup",e.DialogPopupContinue="dialog_popup_continue",e.DialogPopupCancelClick="dialog_popup_cancel_click",e.OrderStatus="order_status",e.PaymentInstrumentFailed="payment_instrument_failed",e.PaymentInstrumentFixClick="payment_instrument_fix_click",e.Payment3dsNeeded="payment_3ds_needed",e.Payment3dsAuthOpening="payment_3ds_auth_opening",e.Payment3dsAuthOpened="payment_3ds_auth_opened",e.Payment3dsAuthClosed="payment_3ds_auth_closed",e.Payment3dsAuthError="payment_3ds_auth_error",e.Payment3dsAuthComplete="payment_3ds_auth_complete",e.Payment3dsAuthResultSuccess="payment_3ds_auth_result_success",e.Payment3dsAuthResultFail="payment_3ds_auth_result_fail",e.Payment3dsNoSkypetoken="payment_3ds_no_skypetoken",e.InitConnectionFailed="initialize_connection_failed",e.TransactionStartFailed="transaction_started_failed",e.GPlayBillingError="gplay_billing_error",e.GPlayOrderCreateFailed="gplay_order_create_failed",e.GPlayOrderCreated="gplay_order_created",e.StratusGPlayOrderAlreadyCreated="gplay_order_already_created",e.StratusGPlayOrderRenewed="gplay_order_renewed",e.StratusGPlayOrderAlreadyRenewed="gplay_order_already_renewed",e.StratusGPlayOrderRefunded="gplay_order_refunded",e.StratusGPlayOrderAlreadyRefunded="gplay_order_already_refunded",e.StratusGPlayOrderCancelled="gplay_order_cancelled",e.StratusGPlayReceiptProcessed="gplay_receipt_processed",e.StratusGPlayInvalidSkypeNumberService="gplay_invalid_skype_number_service",e.StratusGPlayTransactionProcessingFailure="gplay_transaction_processing_failure"}(t.PaymentFlowStep||(t.PaymentFlowStep={})),function(e){e[e.Subscriptions=0]="Subscriptions"}(t.BalanceStatePanelSection||(t.BalanceStatePanelSection={})),function(e){e.SwiftCard="SwiftCard",e.AudioNode="AudioNode"}(t.AudioPlayerOrigin||(t.AudioPlayerOrigin={})),function(e){e[e.Requested=0]="Requested",e[e.Accepted=1]="Accepted",e[e.Declined=2]="Declined",e[e.Cancelled=3]="Cancelled",e[e.Disabled=4]="Disabled"}(t.TranslationAction||(t.TranslationAction={})),function(e){e[e.PermissionUpdate=0]="PermissionUpdate",e[e.BingConsentUpdate=1]="BingConsentUpdate",e[e.Bing=2]="Bing",e[e.LocationPicker=3]="LocationPicker",e[e.SlashCommand=4]="SlashCommand",e[e.E911Startup=5]="E911Startup",e[e.E911NetworkChange=6]="E911NetworkChange",e[e.E911ConsentUpdate=7]="E911ConsentUpdate"}(t.LocationUpdateReason||(t.LocationUpdateReason={})),function(e){e[e.UsersStore=0]="UsersStore",e[e.ABCHStore=1]="ABCHStore"}(t.MyProfileFetchOrigin||(t.MyProfileFetchOrigin={})),function(e){e[e.Spam=0]="Spam",e[e.Fraud=1]="Fraud",e[e.ChildExploitation=2]="ChildExploitation",e[e.Pornography=3]="Pornography",e[e.Terrorism=4]="Terrorism",e[e.HateSpeech=5]="HateSpeech",e[e.Harm=6]="Harm",e[e.SelfHarm=7]="SelfHarm",e[e.Harassment=8]="Harassment",e[e.FalseInfo=9]="FalseInfo",e[e.Infringement=10]="Infringement",e[e.MalwareOrVirus=11]="MalwareOrVirus",e[e.NonConsensualIntimateImagery=12]="NonConsensualIntimateImagery",e[e.SexuallyInappropriate=13]="SexuallyInappropriate"}(t.ReportCategory||(t.ReportCategory={})),function(e){e[e.ContactRequest=0]="ContactRequest",e[e.DeleteContact=1]="DeleteContact",e[e.BlockContact=2]="BlockContact",e[e.Message=3]="Message",e[e.PictureMessage=4]="PictureMessage",e[e.VideoMessage=5]="VideoMessage",e[e.AudioMessage=6]="AudioMessage",e[e.FileMessage=7]="FileMessage",e[e.Profile=8]="Profile",e[e.SearchReportContextListOptions=9]="SearchReportContextListOptions",e[e.ProfilePicture=10]="ProfilePicture"}(t.ReportContextListOptions||(t.ReportContextListOptions={}))},81722:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentLocation=void 0,function(e){e[e.CallsPanel=0]="CallsPanel",e[e.CallsPanelBanner=1]="CallsPanelBanner",e[e.DialerPanel=2]="DialerPanel",e[e.CallsPanelTop=3]="CallsPanelTop"}(t.ExperimentLocation||(t.ExperimentLocation={}))},46195:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderButtonType=void 0,function(e){e[e.Action=0]="Action",e[e.Notifications=1]="Notifications",e[e.NotificationsSettings=2]="NotificationsSettings",e[e.RecentsFilter=3]="RecentsFilter",e[e.Feedback=4]="Feedback",e[e.Contacts=5]="Contacts",e[e.Call=6]="Call",e[e.Search=7]="Search",e[e.Profile=8]="Profile",e[e.Title=9]="Title",e[e.Settings=10]="Settings",e[e.ContactsFilter=11]="ContactsFilter",e[e.MeetNow=12]="MeetNow",e[e.NameAndMoodText=13]="NameAndMoodText"}(t.HeaderButtonType||(t.HeaderButtonType={}))},72731:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultLocale=void 0;const i={am:"et",ar:"sa",bg:"bg",bn:"in",ca:"es",cs:"cz",cy:"gb",da:"dk",de:"de",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",fi:"fl",fil:"ph",fr:"fr",gl:"es",gu:"in",he:"il",hi:"in",hr:"hr",hu:"hu",id:"id",is:"is",it:"it",ja:"jp",kk:"kz",kn:"in",ko:"kr",ku:"arab-iq",lt:"lt",lv:"lv",ml:"in",mr:"in",ms:"my",nb:"no",nl:"nl",nn:"no",or:"in",pl:"pl",pt:"PT","pt-pt":"pt","pt-br":"br",ro:"ro",ru:"ru",sk:"sk",sl:"si",sr:"cyrl-rs","sr-cyrl":"cyrl-rs","sr-latn":"latn-rs",sv:"se",sw:"ke",ta:"in",te:"in",th:"th",tr:"tr",uk:"ua",ur:"pk",vi:"vn",zh:"cn","zh-hant":"tw","zh-cht":"tw","zh-hk":"tw","zh-mo":"tw"};t.getDefaultLocale=function(e){return i[e]||""}},76173:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptedContent=t.UnblockContext=t.BlockContext=t.PNHEvents=void 0,function(e){e[e.IncomingUnknown=0]="IncomingUnknown",e[e.IncomingContactListChange=6]="IncomingContactListChange",e[e.IncomingProfileChange=20]="IncomingProfileChange",e[e.IncomingAvatarChange=21]="IncomingAvatarChange",e[e.IncomingS4BCall=105]="IncomingS4BCall",e[e.IncomingNGCCall=107]="IncomingNGCCall",e[e.IncomingP2PCall=108]="IncomingP2PCall",e[e.IncomingNGCGroupCall=109]="IncomingNGCGroupCall",e[e.IncomingNGCStopRinger=110]="IncomingNGCStopRinger",e[e.IncomingNGCPSTNCall=111]="IncomingNGCPSTNCall",e[e.IncomingGoLiveStart=112]="IncomingGoLiveStart",e[e.IncomingGoLiveStop=113]="IncomingGoLiveStop",e[e.IncomingWarmCall=117]="IncomingWarmCall",e[e.IncomingNGCEncryptedCall=118]="IncomingNGCEncryptedCall",e[e.IncomingChatMessage=200]="IncomingChatMessage",e[e.IncomingChatGroupMessage=201]="IncomingChatGroupMessage",e[e.IncomingChatMention=203]="IncomingChatMention",e[e.IncomingChatHearts=204]="IncomingChatHearts",e[e.ThreadActivity=222]="ThreadActivity",e[e.Ued=299]="Ued",e[e.IncomingChatVideo=301]="IncomingChatVideo",e[e.IncomingChatPhoto=302]="IncomingChatPhoto",e[e.IncomingChatAudio=303]="IncomingChatAudio",e[e.IncomingChatMoji=304]="IncomingChatMoji",e[e.IncomingChatVideoCloud=305]="IncomingChatVideoCloud",e[e.IncomingChatFile=306]="IncomingChatFile",e[e.IncomingConsumptionHorizonChange=308]="IncomingConsumptionHorizonChange",e[e.IncomingTPUMConciergeMessage=404]="IncomingTPUMConciergeMessage",e[e.EmergencyRestoreEndpoints=405]="EmergencyRestoreEndpoints",e[e.SceUserServicesChange=601]="SceUserServicesChange",e[e.IncomingContactRequest=801]="IncomingContactRequest",e[e.IncomingContactAccept=802]="IncomingContactAccept",e[e.IncomingContactInviteListChange=803]="IncomingContactInviteListChange",e[e.IncomingContactBlockChange=804]="IncomingContactBlockChange",e[e.IncomingUpsPresence=1200]="IncomingUpsPresence"}(t.PNHEvents||(t.PNHEvents={})),t.BlockContext="block",t.UnblockContext="unblock",t.EncryptedContent="(encrypted content)"},93003:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RowSize=t.RecentsSortBy=void 0,function(e){e[e.Time=0]="Time",e[e.Unread=1]="Unread",e[e.Active=2]="Active"}(t.RecentsSortBy||(t.RecentsSortBy={})),function(e){e[e.Default=0]="Default",e[e.Compact=1]="Compact",e[e.ExtraCompact=2]="ExtraCompact"}(t.RowSize||(t.RowSize={}))},81760:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonAgnosticGradientFillColorsMappings=t.AgnosticGradientFillButtonColors=t.GradientStopColorsByMainColor=t.Color=void 0,function(e){e.transparent="rgba(0, 0, 0, 0)",e.whiteOverlay20="rgba(255, 255, 255, 0.2)",e.whiteOverlay30="rgba(255, 255, 255, 0.3)",e.whiteOverlay40="rgba(255, 255, 255, 0.4)",e.whiteOverlay50="rgba(255, 255, 255, 0.5)",e.whiteOverlay70="rgba(255, 255, 255, 0.7)",e.whiteOverlay80="rgba(255, 255, 255, 0.8)",e.whiteOverlay90="rgba(255, 255, 255, 0.9)",e.white="#FFFFFF",e.gray50Overlay50="rgba(241, 241, 244, 0.5)",e.gray50overlay95="rgba(241, 241, 244, 0.95)",e.gray50="#F1F1F4",e.gray550="#3B3A39",e.gray100Overlay30="rgba(229, 228, 232, 0.3)",e.gray100Overlay80="rgba(229, 228, 232, 0.8)",e.gray100="#E5E4E8",e.gray200Overlay10="rgba(213, 217, 222, 0.1)",e.gray200Overlay20="rgba(213, 217, 222, 0.2)",e.gray200Overlay60="rgba(213, 217, 222, 0.6)",e.gray200Overlay80="rgba(213, 217, 222, 0.8)",e.gray200="#D5D9DE",e.gray300Overlay10="rgba(138, 141, 145, 0.1)",e.gray300Overlay70="rgba(138, 141, 145, 0.7)",e.gray300Overlay80="rgba(138, 141, 145, 0.8)",e.gray300="#8A8D91",e.gray400Overlay10="rgba(43, 44, 51, 0.1)",e.gray400Overlay20="rgba(43, 44, 51, 0.2)",e.gray400Overlay40="rgba(43, 44, 51, 0.4)",e.gray400Overlay50="rgba(43, 44, 51, 0.5)",e.gray400Overlay70="rgba(43, 44, 51, 0.7)",e.gray400Overlay80="rgba(43, 44, 51, 0.8)",e.gray400overlay95="rgba(43, 44, 51, 0.95)",e.gray400="#2B2C33",e.gray500="#6E6E6E",e.blackOverlay10="rgba(0, 0, 0, 0.1)",e.blackOverlay20="rgba(0, 0, 0, 0.2)",e.blackOverlay35="rgba(0, 0, 0, 0.35)",e.blackOverlay40="rgba(0, 0, 0, 0.4)",e.blackOverlay50="rgba(0, 0, 0, 0.5)",e.blackOverlay60="rgba(0, 0, 0, 0.6)",e.blackOverlay65="rgba(0, 0, 0, 0.65)",e.blackOverlay70="rgba(0, 0, 0, 0.7)",e.blackOverlay80="rgba(0, 0, 0, 0.8)",e.black="#000000",e.blueOverlay10="rgba(22, 134, 217, 0.1)",e.blueOverlay30="rgba(22, 134, 217, 0.3)",e.blueOverlay50="rgba(22, 134, 217, 0.5)",e.blueOverlay70="rgba(22, 134, 217, 0.7)",e.blue="#1686D9",e.shadow="rgba(69, 72, 82, 0.2)",e.yellow="#F0C01E",e.orange="#EC7758",e.orangeAccessible="#CA5010",e.orangeGradient="#FF8C00",e.rose="#F7B7A6",e.fuschia="#E362A6",e.mint="#8FD3C5",e.pink="#E262A6",e.red="#F44336",e.redIOS="#ff3b30",e.greenIOS="#4cd964",e.greenOverlay10="rgba(76, 175, 80, 0.1)",e.green="#4CAF50",e.greenLight="#4DD965",e.raiseHandOrange="#FFAA44",e.swiftCardsImageOverlay="rgba(1, 1, 24, 0.05)",e.dialPadHoverDark="#3E3F45",e.markupRed="#D10000",e.markupRedOrange="#F00A00",e.markupOrange="#FB5D00",e.markupYellowOrange="#FFC200",e.markupYellow="#FFEC00",e.markupYellowGreen="#A0D200",e.markupGreen="#1B8014",e.markupBlueGreen="#00706A",e.markupBlue="#0000D8",e.markupBlueViolet="#4D2279",e.markupViolet="#3C0058",e.markupRedViolet="#A00054",e.callStageDark="#1F1F1F",e.callStageLight="#2B2B2B",e.sxStatusBarDefault="#1F1F1F",e.sxBlue="#00aff0",e.desktopUpgradeNotificationGreen="#F5F9EC",e.desktopUpgradeNotificationGreenHover="#DFE8CC",e.desktopMandatoryUpgradeNotificationRed="#FAD7D6",e.desktopMandatoryUpgradeNotificationRedHover="#F5B9B8",e.leftNavRowSelectionColor="#FFFFFF",e.leftNavRowHoverColor="#EAEAEA",e.rightCloseSeparator="#484644",e.darkThemeBackground="#19191B",e.darkThemeBackgroundOverlay85="rgba(25, 25, 27, 0.85)",e.darkThemeSecondaryTextColor="#ACACAC",e.darkThemeSecondaryBackground="#202023",e.classicDarkBubbleOther="#1E2224",e.classicDarkBubbleTextOther="#CCCCCC",e.classicDarkBubbleSelf="#2B333B",e.classicDarkBubbleTextSelf="#CCCCCC",e.classicDarkPrimaryBackground="#1F1F1F",e.classicDarkSecondaryBackground="#1F1F1F",e.classicDarkMessageStreamBackground="#000000",e.darkMessageComposerContentBackground="rgba(90, 92, 115, 0.3)",e.darkThemeSisuTextColor="#E5E4E8",e.defaultThemeSisuTextColor="#2B2C33",e.accessibleBackground="#606060",e.available="#4DD965",e.away="#FFBA00",e.coachMarkBackground="#1479c7",e.adaptiveCardDarkThemeBorder="#404040",e.adaptiveCardSubtleAccent="rgba(22, 134, 217, 0.5)",e.adaptiveCardSubtleGood="rgba(76, 175, 80, 0.8)",e.adaptiveCardSubtleWarning="rgba(240, 192, 30, 0.8)",e.adaptiveCardSubtleAttention="rgba(244, 67, 54, 0.8)",e.searchResultBackgroundColor="#0000FF",e.pesPickerBackgroundLight="#FBFBFB",e.pesPickerBackgroundDark="#242424",e.delphiBubbleColorOther="#F2F6F9",e.delphiBubbleColorSelf="#DBF4FD",e.delphiBubbleColorSelfModernize="#DBF1FF",e.delphiBubbleColorBot="#F2F6F9",e.delphiBubbleText="#252423",e.delphiSecondaryBackgroundColor="#F0F4F8",e.delphiSecondaryRowHighlightColor="#C7EDFC",e.delphiSecondaryRowHoverColor="rgba(199, 237, 252, 0.5)",e.delphiMessageComposerBackgroundColor="#F1F1F4",e.delphiPrimaryTextColor="#252423",e.delphiDarkBubbleColorOther="#1E2224",e.delphiDarkBubbleColorSelf="#2B333B",e.delphiDarkBubbleColorBot="#1E2224",e.delphiDarkBubbleText="#D5D9DE",e.delphiDarkPrimaryTextColor="#D5D9DE",e.delphiDarkSecondaryTextColor="#8A8D91",e.blueLight="#00BCF2",e.blueMedium="#009AE3",e.blueDark="#0078d4",e.blueDarkOverlay50="rgba(0, 120, 212, 0.5)",e.purpleLight="#C182D1",e.purpleDark="#C239B3",e.purpleDarkOverlay50="rgba(194, 57, 179, 0.5)",e.blurpleLight="#8378DE",e.blurpleDark="#49409A",e.blurpleDarkOverlay50="rgba(73, 64, 154, 0.5)",e.pinkLight="#EE9889",e.pinkDark="#FF6767",e.pinkDarkOverlay50="rgba(255, 103, 103, 0.5)",e.orangeLight="#FFAA44",e.orangeDark="#F7894A",e.orangeDarkOverlay50="rgba(247, 137, 74, 0.5)",e.todoTaskFolderIconColor="#465EFC",e.todoSharedFolderIconColor="rgb(138,141,145)",e.syncAddressBookHeader="#0284DC",e.docFile="#2b579a",e.xlsFile="#217346",e.pptFile="#d24726",e.oneNoteFile="#80397b",e.powerSavingCallingBG1="#05091C",e.powerSavingCallingBG2="#051B2D",e.teamsBackground="#5357AE",e.avatarRed="#CC0700",e.avatarRedLight="#FFBBB7",e.avatarRedLighter="#FFEBE6",e.avatarOrange="#D4380D",e.avatarOrangeLight="#FFC8A3",e.avatarOrangeLighter="#FFF7F0",e.avatarBrown="#BD6100",e.avatarBrownLight="#FFBF73",e.avatarBrownLighter="#FFFBF0",e.avatarOlive="#618C03",e.avatarOliveLight="#D3F261",e.avatarOliveLighter="#FEFFF0",e.avatarGreen="#00853E",e.avatarGreenLight="#C2F29D",e.avatarGreenLighter="#F8FFF0",e.avatarTeal="#157E82",e.avatarTealLight="#B5F5EC",e.avatarTealLighter="#F0FFFB",e.avatarCyan="#0090B8",e.avatarCyanLight="#C7EEFF",e.avatarCyanLighter="#F0FCFF",e.avatarBlue="#185ABD",e.avatarBlueLight="#B9D6F0",e.avatarBlueLighter="#F0F9FF",e.avatarBlueviolet="#585DC1",e.avatarBluevioletLight="#C3CAFA",e.avatarBluevioletLighter="#F0F3FF",e.avatarPurple="#7719AA",e.avatarPurpleLight="#E6D1F2",e.avatarPurpleLighter="#FBF0FF",e.avatarFuchsia="#C239B3",e.avatarFuchsiaLight="#EDCEE5",e.avatarFuchsiaLighter="#FFF0FA",e.avatarViolet="#C41D7F",e.avatarVioletLight="#FFDBEA",e.avatarVioletLighter="#FFF0F5"}(i=t.Color||(t.Color={}));const n={gradientcolor1:i.blueLight,gradientcolor2:i.blueDark},o={gradientcolor1:i.purpleLight,gradientcolor2:i.purpleDark},s={gradientcolor1:i.orangeLight,gradientcolor2:i.orangeDark},a={gradientcolor1:i.blurpleLight,gradientcolor2:i.blurpleDark},r={gradientcolor1:i.pinkLight,gradientcolor2:i.pinkDark},l={gradientcolor1:i.greenLight,gradientcolor2:i.green};var c;t.GradientStopColorsByMainColor={[i.blue]:n,[i.blueDark]:n,[i.mint]:n,[i.orange]:s,[i.orangeDark]:s,[i.yellow]:s,[i.fuschia]:o,[i.purpleLight]:o,[i.purpleDark]:o,[i.pink]:r,[i.pinkDark]:r,[i.rose]:r,[i.blurpleLight]:a,[i.blurpleDark]:a,[i.green]:l},function(e){e[e.blue=1]="blue",e[e.orange=2]="orange",e[e.green=3]="green"}(c=t.AgnosticGradientFillButtonColors||(t.AgnosticGradientFillButtonColors={})),t.ButtonAgnosticGradientFillColorsMappings={[c.blue]:[i.blueDark,i.blueLight],[c.orange]:[i.orangeDark,i.orangeLight],[c.green]:[i.greenLight,i.green]}},11828:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIcon=t.IconSize=t.SkypeIcon=t.IconCollection=void 0;const n=i(81760);var o;!function(e){e[e.Skype=1]="Skype"}(t.IconCollection||(t.IconCollection={})),function(e){e[e.Blank=0]="Blank",e[e.SkypeIcon=1]="SkypeIcon",e[e.MSOutlook=2]="MSOutlook",e[e.MSXbox=3]="MSXbox",e[e.MSOneDrive=4]="MSOneDrive",e[e.MSOffice=5]="MSOffice",e[e.Bing=6]="Bing",e[e.MSTeams=7]="MSTeams",e[e.CallStart=8]="CallStart",e[e.CallEnd=9]="CallEnd",e[e.Video=10]="Video",e[e.VideoFilled=11]="VideoFilled",e[e.VideoOff=12]="VideoOff",e[e.Dialpad=13]="Dialpad",e[e.Microphone=14]="Microphone",e[e.MicrophoneOff=15]="MicrophoneOff",e[e.More=16]="More",e[e.ScreenShare=17]="ScreenShare",e[e.ScreenShareGradient=18]="ScreenShareGradient",e[e.ScreenShareOff=19]="ScreenShareOff",e[e.ScreenShareStopGradient=20]="ScreenShareStopGradient",e[e.CallMissed=21]="CallMissed",e[e.CallIn=22]="CallIn",e[e.CallOut=23]="CallOut",e[e.CallError=24]="CallError",e[e.Favourite=25]="Favourite",e[e.FavouriteFilled=26]="FavouriteFilled",e[e.CallDisabled=27]="CallDisabled",e[e.Landline=28]="Landline",e[e.ShareiOS=29]="ShareiOS",e[e.Clippy=30]="Clippy",e[e.Mention=31]="Mention",e[e.CallAdd=32]="CallAdd",e[e.CallQualityIndicator=33]="CallQualityIndicator",e[e.Contact=34]="Contact",e[e.ContactAdd=35]="ContactAdd",e[e.PersonAddGradient=36]="PersonAddGradient",e[e.SkypeAddressbook=37]="SkypeAddressbook",e[e.ContactCard=38]="ContactCard",e[e.ContactGroupAdd=39]="ContactGroupAdd",e[e.ContactGroup=40]="ContactGroup",e[e.BlockNotification=41]="BlockNotification",e[e.ContactGroupCall=42]="ContactGroupCall",e[e.ContactGroupTwoPersonas=43]="ContactGroupTwoPersonas",e[e.ContactGroupTwoPersonasGradient=44]="ContactGroupTwoPersonasGradient",e[e.Bot=45]="Bot",e[e.BotAdd=46]="BotAdd",e[e.Message=47]="Message",e[e.MessageGradient=48]="MessageGradient",e[e.Videomail=49]="Videomail",e[e.File=50]="File",e[e.FileAudio=51]="FileAudio",e[e.Menu=52]="Menu",e[e.MenuList=53]="MenuList",e[e.Location=54]="Location",e[e.MyLocation=55]="MyLocation",e[e.EmoticonStroke=56]="EmoticonStroke",e[e.EmoticonNotPresent=57]="EmoticonNotPresent",e[e.ForwardItem=58]="ForwardItem",e[e.SwitchCamera=59]="SwitchCamera",e[e.NewSwitchCamera=60]="NewSwitchCamera",e[e.Badge=61]="Badge",e[e.MSWord=62]="MSWord",e[e.MSExcel=63]="MSExcel",e[e.MSPowerPoint=64]="MSPowerPoint",e[e.MSVisio=65]="MSVisio",e[e.MSOneNote=66]="MSOneNote",e[e.FileMultiple=67]="FileMultiple",e[e.QuoteClose=68]="QuoteClose",e[e.Media=69]="Media",e[e.Send=70]="Send",e[e.Share=71]="Share",e[e.MoreVertical=72]="MoreVertical",e[e.QuickLook=73]="QuickLook",e[e.Undo=74]="Undo",e[e.SkypeTranslator=75]="SkypeTranslator",e[e.ShareAndroid=76]="ShareAndroid",e[e.QuoteOpen=77]="QuoteOpen",e[e.VolumeMax=78]="VolumeMax",e[e.VolumeMid=79]="VolumeMid",e[e.VolumeMin=80]="VolumeMin",e[e.VolumeOff=81]="VolumeOff",e[e.Search=82]="Search",e[e.Headset=83]="Headset",e[e.Bluetooth=84]="Bluetooth",e[e.Camera=85]="Camera",e[e.Topic=86]="Topic",e[e.Play=87]="Play",e[e.PauseOffCircle=88]="PauseOffCircle",e[e.Pause=89]="Pause",e[e.PauseCircle=90]="PauseCircle",e[e.Mail=91]="Mail",e[e.MailOff=92]="MailOff",e[e.Ok=93]="Ok",e[e.Cancel=94]="Cancel",e[e.Plus=95]="Plus",e[e.Down=96]="Down",e[e.Up=97]="Up",e[e.DownChevron=98]="DownChevron",e[e.UpChevron=99]="UpChevron",e[e.LeftChevron=100]="LeftChevron",e[e.RightChevron=101]="RightChevron",e[e.Picture=102]="Picture",e[e.Backspace=103]="Backspace",e[e.NavigationBack=104]="NavigationBack",e[e.AddText=105]="AddText",e[e.NavigationForward=106]="NavigationForward",e[e.Move=107]="Move",e[e.HeartOutline=108]="HeartOutline",e[e.ScreenCapture=109]="ScreenCapture",e[e.FlashOn=110]="FlashOn",e[e.FlashOff=111]="FlashOff",e[e.SkypeCredit=112]="SkypeCredit",e[e.QR=113]="QR",e[e.Globe=114]="Globe",e[e.SubscriptionRegion=115]="SubscriptionRegion",e[e.SubscriptionWorld=116]="SubscriptionWorld",e[e.GlobeCredit=117]="GlobeCredit",e[e.CreditGlobe=118]="CreditGlobe",e[e.Error=119]="Error",e[e.Warning=120]="Warning",e[e.Info=121]="Info",e[e.Question=122]="Question",e[e.Refresh=123]="Refresh",e[e.Privacy=124]="Privacy",e[e.Settings=125]="Settings",e[e.SkypeMobile=126]="SkypeMobile",e[e.Notification=127]="Notification",e[e.NotificationOff=128]="NotificationOff",e[e.InfoStroke=129]="InfoStroke",e[e.Link=130]="Link",e[e.LinkDismiss=131]="LinkDismiss",e[e.LocationPin=132]="LocationPin",e[e.Pinning=133]="Pinning",e[e.Pin=134]="Pin",e[e.PinOff=135]="PinOff",e[e.Reload=136]="Reload",e[e.MagicWand=137]="MagicWand",e[e.Alert=138]="Alert",e[e.CallAnimSmall1=139]="CallAnimSmall1",e[e.CallAnimSmall4=140]="CallAnimSmall4",e[e.PresenceOnline=141]="PresenceOnline",e[e.PresenceOnlineGradient=142]="PresenceOnlineGradient",e[e.PresenceBlocked=143]="PresenceBlocked",e[e.Moji=144]="Moji",e[e.MojiDeleted=145]="MojiDeleted",e[e.MojiMaskInverted=146]="MojiMaskInverted",e[e.Download=147]="Download",e[e.Card=148]="Card",e[e.Lightbulb=149]="Lightbulb",e[e.Filter=150]="Filter",e[e.FilterMenu=151]="FilterMenu",e[e.Clear=152]="Clear",e[e.Connecting=153]="Connecting",e[e.Sticker=154]="Sticker",e[e.StickerDeleted=155]="StickerDeleted",e[e.ClosePanel=156]="ClosePanel",e[e.Calendar=157]="Calendar",e[e.Bookmark=158]="Bookmark",e[e.Bookmarked=159]="Bookmarked",e[e.CallList=160]="CallList",e[e.PresenceDND=161]="PresenceDND",e[e.PresenceInvisible=162]="PresenceInvisible",e[e.PresenceAway=163]="PresenceAway",e[e.PresenceBusy=164]="PresenceBusy",e[e.Compose=165]="Compose",e[e.CallRecord=166]="CallRecord",e[e.CallRecordGradient=167]="CallRecordGradient",e[e.CallRecordStroke=168]="CallRecordStroke",e[e.CallRecordDot=169]="CallRecordDot",e[e.MobileOk=170]="MobileOk",e[e.MobileSending=171]="MobileSending",e[e.MobileSms=172]="MobileSms",e[e.MobileError=173]="MobileError",e[e.Gallery1=174]="Gallery1",e[e.SwitchVideoCamera=175]="SwitchVideoCamera",e[e.PrivateCallFill=176]="PrivateCallFill",e[e.PrivateSessionKey=177]="PrivateSessionKey",e[e.PrivateChatFill=178]="PrivateChatFill",e[e.Lock=179]="Lock",e[e.Delete=180]="Delete",e[e.SettingsAudio=181]="SettingsAudio",e[e.Birthday=182]="Birthday",e[e.Stop=183]="Stop",e[e.ContactsGroup=184]="ContactsGroup",e[e.PeopleAdd=185]="PeopleAdd",e[e.People=186]="People",e[e.PersonCircle=187]="PersonCircle",e[e.PersonVoice=188]="PersonVoice",e[e.Copy=189]="Copy",e[e.Gif=190]="Gif",e[e.MobileSmsNew=191]="MobileSmsNew",e[e.MessageUnread=192]="MessageUnread",e[e.MessageRead=193]="MessageRead",e[e.SkypeInvite=194]="SkypeInvite",e[e.RotateOrientation=195]="RotateOrientation",e[e.CallInFilled=196]="CallInFilled",e[e.TV=197]="TV",e[e.CallOutFilled=198]="CallOutFilled",e[e.CallMissedFilled=199]="CallMissedFilled",e[e.CallBlockedFilled=200]="CallBlockedFilled",e[e.CallErrorFilled=201]="CallErrorFilled",e[e.Reply=202]="Reply",e[e.QuestionCircle=203]="QuestionCircle",e[e.SkypeNumber=204]="SkypeNumber",e[e.CameraTest=205]="CameraTest",e[e.ClosedCaption=206]="ClosedCaption",e[e.ClosedCaptionOff=207]="ClosedCaptionOff",e[e.ClosedCaptionFilled=208]="ClosedCaptionFilled",e[e.SwitchAccount=209]="SwitchAccount",e[e.SelectAll=210]="SelectAll",e[e.SkypeOut=211]="SkypeOut",e[e.CallOptions=212]="CallOptions",e[e.Expand=213]="Expand",e[e.Contract=214]="Contract",e[e.Office=215]="Office",e[e.Snapshot=216]="Snapshot",e[e.Recent=217]="Recent",e[e.Hide=218]="Hide",e[e.MissingPreview=219]="MissingPreview",e[e.Paste=220]="Paste",e[e.MeetNow=221]="MeetNow",e[e.ModeratedChat=222]="ModeratedChat",e[e.SoundWave=223]="SoundWave",e[e.GPS=224]="GPS",e[e.LiveLocation=225]="LiveLocation",e[e.PanelBottomFilled=226]="PanelBottomFilled",e[e.PanelLeftFilled=227]="PanelLeftFilled",e[e.PanelFloatingFilled=228]="PanelFloatingFilled",e[e.Repeat=229]="Repeat",e[e.CallsInverted=230]="CallsInverted",e[e.CallsInvertedGradient=231]="CallsInvertedGradient",e[e.ChatsInverted=232]="ChatsInverted",e[e.ChatsInvertedGradient=233]="ChatsInvertedGradient",e[e.CameraInverted=234]="CameraInverted",e[e.ContactsGroupInverted=235]="ContactsGroupInverted",e[e.AlertFillNewFont=236]="AlertFillNewFont",e[e.AlertFillNewFontGradient=237]="AlertFillNewFontGradient",e[e.PeopleFill=238]="PeopleFill",e[e.PeopleFillGradient=239]="PeopleFillGradient",e[e.StickersCamera=240]="StickersCamera",e[e.ReactionAdd=241]="ReactionAdd",e[e.AdMaskNeg=242]="AdMaskNeg",e[e.GuestAccountExpired=243]="GuestAccountExpired",e[e.GuestAccount=244]="GuestAccount",e[e.GridView=245]="GridView",e[e.FocusedView3=246]="FocusedView3",e[e.ContentView=247]="ContentView",e[e.Schedule=248]="Schedule",e[e.CircleBigNeg=249]="CircleBigNeg",e[e.PreviousNext=250]="PreviousNext",e[e.CallerID=251]="CallerID",e[e.Poll=252]="Poll",e[e.CategoryTrending=253]="CategoryTrending",e[e.CategoryHappy=254]="CategoryHappy",e[e.CategorySad=255]="CategorySad",e[e.CategoryYes=256]="CategoryYes",e[e.CategoryNo=257]="CategoryNo",e[e.CategoryCute=258]="CategoryCute",e[e.MessageVideo=259]="MessageVideo",e[e.ClosedCaptionSettings=260]="ClosedCaptionSettings",e[e.OpenOutside=261]="OpenOutside",e[e.Exclaimation=262]="Exclaimation",e[e.CallMerge=263]="CallMerge",e[e.ViewSwitcher=264]="ViewSwitcher",e[e.Presenter=265]="Presenter",e[e.Audience=266]="Audience",e[e.GalleryLarge=267]="GalleryLarge",e[e.Gallery=268]="Gallery",e[e.FitToWindow=269]="FitToWindow",e[e.OriginalSize=270]="OriginalSize",e[e.StartIncomingVideo=271]="StartIncomingVideo",e[e.Left=272]="Left",e[e.Right=273]="Right",e[e.NavigationBackCentered=274]="NavigationBackCentered",e[e.NavigationForwardCentered=275]="NavigationForwardCentered",e[e.Nub=276]="Nub",e[e.ScreenSharingRequestControl=277]="ScreenSharingRequestControl",e[e.ScreenSharingStopControl=278]="ScreenSharingStopControl",e[e.GifPlay=279]="GifPlay",e[e.BackgroundReplacement=280]="BackgroundReplacement",e[e.RaiseHand=281]="RaiseHand",e[e.LowerHand=282]="LowerHand",e[e.LowerHandGradient=283]="LowerHandGradient",e[e.RaiseHandCrossed=284]="RaiseHandCrossed",e[e.Format=285]="Format",e[e.Bold=286]="Bold",e[e.Italic=287]="Italic",e[e.Strikethrough=288]="Strikethrough",e[e.CodeSnippet=289]="CodeSnippet",e[e.Cut=290]="Cut",e[e.EmojiAdd=291]="EmojiAdd",e[e.EmojiAddGradient=292]="EmojiAddGradient",e[e.TwinCamMid=293]="TwinCamMid",e[e.TwinCamMidGradient=294]="TwinCamMidGradient",e[e.TwinCamMidOff=295]="TwinCamMidOff",e[e.TwinCamMidOffGradient=296]="TwinCamMidOffGradient",e[e.TopPanelExpand=297]="TopPanelExpand",e[e.TopPanelCollapse=298]="TopPanelCollapse",e[e.CallTransfer=299]="CallTransfer",e[e.CallRemoteNdiRecord=300]="CallRemoteNdiRecord",e[e.AddImage=301]="AddImage"}(o=t.SkypeIcon||(t.SkypeIcon={})),function(e){e[e.size8=8]="size8",e[e.size10=10]="size10",e[e.size12=12]="size12",e[e.size14=14]="size14",e[e.size15=15]="size15",e[e.size16=16]="size16",e[e.size18=18]="size18",e[e.size20=20]="size20",e[e.size24=24]="size24",e[e.size28=28]="size28",e[e.size30=30]="size30",e[e.size32=32]="size32",e[e.size36=36]="size36",e[e.size40=40]="size40",e[e.default=44]="default",e[e.size48=48]="size48",e[e.size58=58]="size58",e[e.size60=60]="size60",e[e.size64=64]="size64",e[e.size67=67]="size67",e[e.size80=80]="size80",e[e.size96=96]="size96",e[e.size100=100]="size100",e[e.size120=120]="size120",e[e.size128=128]="size128"}(t.IconSize||(t.IconSize={})),t.getIcon=function(e,t,s,a={}){let{gradientcolor1:r=s,gradientcolor2:l=s}=Object.assign(Object.assign({},n.GradientStopColorsByMainColor[s]),a);const{viewBox:c="0 0 24 24",width:d=t,height:u=t}=a,g={viewBox:c,width:d,height:u,fill:s,gradientcolor1:r,gradientcolor2:l},h=function(e){switch(e){case o.Blank:return i(31953);case o.SkypeIcon:return i(73139);case o.MSOutlook:return i(23017);case o.MSXbox:return i(31247);case o.MSOneDrive:return i(12050);case o.MSOffice:return i(43921);case o.Bing:return i(18904);case o.MSTeams:return i(44914);case o.CallStart:return i(37076);case o.CallEnd:return i(99046);case o.Video:return i(31954);case o.VideoFilled:return i(11678);case o.VideoOff:return i(86774);case o.Dialpad:return i(16741);case o.Microphone:return i(16933);case o.MicrophoneOff:return i(12608);case o.More:return i(37335);case o.ScreenShare:return i(62133);case o.ScreenShareGradient:return i(46869);case o.ScreenShareOff:return i(72951);case o.ScreenShareStopGradient:return i(2425);case o.CallMissed:return i(35016);case o.CallIn:return i(45436);case o.CallOut:return i(61256);case o.CallError:return i(74578);case o.Favourite:return i(7027);case o.FavouriteFilled:return i(53429);case o.CallDisabled:return i(37418);case o.Landline:return i(57179);case o.ShareiOS:return i(53733);case o.Clippy:return i(80423);case o.Mention:return i(87878);case o.CallAdd:return i(49549);case o.CallQualityIndicator:return i(7323);case o.Contact:return i(40677);case o.ContactAdd:return i(71304);case o.PersonAddGradient:return i(85054);case o.SkypeAddressbook:return i(34202);case o.ContactCard:return i(63369);case o.ContactGroupAdd:return i(28880);case o.ContactGroup:return i(32354);case o.BlockNotification:return i(46731);case o.ContactGroupCall:return i(38290);case o.ContactGroupTwoPersonas:return i(5514);case o.ContactGroupTwoPersonasGradient:return i(17918);case o.Bot:return i(43624);case o.BotAdd:return i(76295);case o.Message:return i(73610);case o.MessageGradient:return i(83280);case o.Videomail:return i(38151);case o.File:return i(73040);case o.FileAudio:return i(18103);case o.Menu:return i(23271);case o.MenuList:return i(74492);case o.Location:return i(14075);case o.MyLocation:return i(62041);case o.EmoticonStroke:return i(39795);case o.EmoticonNotPresent:return i(83292);case o.ForwardItem:return i(94773);case o.SwitchCamera:return i(28751);case o.NewSwitchCamera:return i(20463);case o.Badge:return i(74244);case o.MSWord:return i(96657);case o.MSExcel:return i(82264);case o.MSPowerPoint:return i(49694);case o.MSVisio:return i(21454);case o.MSOneNote:return i(8686);case o.FileMultiple:return i(99927);case o.QuoteClose:return i(82737);case o.Media:return i(40630);case o.Send:return i(41387);case o.Share:return i(7539);case o.MoreVertical:return i(50064);case o.QuickLook:return i(64390);case o.Undo:return i(40869);case o.SkypeTranslator:return i(84588);case o.ShareAndroid:return i(92319);case o.QuoteOpen:return i(26933);case o.VolumeMax:return i(18018);case o.VolumeMid:return i(98122);case o.VolumeMin:return i(72254);case o.VolumeOff:return i(38580);case o.Search:return i(43510);case o.Headset:return i(2726);case o.Bluetooth:return i(41088);case o.Camera:return i(8496);case o.Topic:return i(99349);case o.Play:return i(80198);case o.PauseOffCircle:return i(49270);case o.Pause:return i(36165);case o.PauseCircle:return i(91057);case o.Mail:return i(25292);case o.MailOff:return i(58251);case o.Ok:return i(72571);case o.Cancel:return i(68571);case o.Plus:return i(67406);case o.Down:return i(57442);case o.Up:return i(19844);case o.DownChevron:return i(63554);case o.UpChevron:return i(99868);case o.NavigationBackCentered:case o.LeftChevron:return i(99634);case o.NavigationForwardCentered:case o.Nub:return i(2057);case o.RightChevron:return i(15948);case o.Picture:return i(31128);case o.Backspace:return i(39139);case o.NavigationBack:return i(350);case o.AddText:return i(65663);case o.NavigationForward:return i(18580);case o.Move:return i(55403);case o.HeartOutline:return i(83870);case o.ScreenCapture:return i(48783);case o.FlashOn:return i(14999);case o.FlashOff:return i(6402);case o.SkypeCredit:return i(77657);case o.QR:return i(95611);case o.Globe:return i(51487);case o.SubscriptionRegion:return i(66638);case o.SubscriptionWorld:return i(36246);case o.GlobeCredit:return i(94960);case o.CreditGlobe:return i(95193);case o.Error:return i(46546);case o.Warning:return i(55582);case o.Info:return i(96908);case o.Question:return i(59411);case o.Refresh:return i(43211);case o.Privacy:return i(54619);case o.Settings:return i(79009);case o.SkypeMobile:return i(16871);case o.Notification:return i(57452);case o.NotificationOff:return i(79298);case o.InfoStroke:return i(94069);case o.Link:return i(19020);case o.LinkDismiss:return i(23219);case o.LocationPin:return i(84012);case o.Pinning:case o.Pin:return i(829);case o.PinOff:return i(6367);case o.Reload:return i(59206);case o.MagicWand:return i(23187);case o.Alert:return i(3373);case o.CallAnimSmall1:return i(68588);case o.CallAnimSmall4:return i(60651);case o.PresenceOnline:return i(56851);case o.PresenceOnlineGradient:return i(2176);case o.PresenceBlocked:return i(8932);case o.Moji:return i(85666);case o.MojiDeleted:return i(36530);case o.MojiMaskInverted:return i(74979);case o.Download:return i(38691);case o.Card:return i(11081);case o.Lightbulb:return i(35021);case o.Filter:return i(37502);case o.FilterMenu:return i(20784);case o.Clear:return i(74013);case o.Connecting:return i(31621);case o.Sticker:return i(22261);case o.StickerDeleted:return i(96270);case o.ClosePanel:return i(28217);case o.Calendar:return i(40473);case o.Bookmark:return i(48349);case o.Bookmarked:return i(38842);case o.CallList:return i(90322);case o.PresenceDND:return i(13357);case o.PresenceInvisible:return i(46500);case o.PresenceAway:return i(74798);case o.PresenceBusy:return i(86033);case o.Compose:return i(97874);case o.CallRecord:return i(71744);case o.CallRecordGradient:return i(64205);case o.CallRecordStroke:return i(26806);case o.CallRecordDot:return i(37996);case o.MobileOk:return i(48111);case o.MobileSending:return i(30862);case o.MobileSms:return i(43930);case o.MobileError:return i(68333);case o.Gallery1:return i(94512);case o.SwitchVideoCamera:return i(52557);case o.PrivateCallFill:return i(26981);case o.PrivateSessionKey:return i(55224);case o.PrivateChatFill:return i(34867);case o.Lock:return i(40543);case o.Delete:return i(91742);case o.SettingsAudio:return i(80397);case o.Birthday:return i(19948);case o.Stop:return i(36992);case o.ContactsGroup:return i(72421);case o.PeopleAdd:return i(7870);case o.People:return i(72033);case o.PersonCircle:return i(36624);case o.PersonVoice:return i(97548);case o.Copy:return i(23971);case o.Gif:return i(87070);case o.MobileSmsNew:return i(85842);case o.MessageUnread:return i(40624);case o.MessageRead:return i(1871);case o.SkypeInvite:return i(82310);case o.RotateOrientation:return i(5968);case o.CallInFilled:return i(79692);case o.TV:return i(40704);case o.CallOutFilled:return i(45072);case o.CallMissedFilled:return i(73721);case o.CallBlockedFilled:return i(34377);case o.CallErrorFilled:return i(14117);case o.Reply:return i(98167);case o.QuestionCircle:return i(80442);case o.SkypeNumber:return i(17869);case o.CameraTest:return i(65878);case o.ClosedCaption:return i(13706);case o.ClosedCaptionOff:return i(60896);case o.ClosedCaptionFilled:return i(61396);case o.SwitchAccount:return i(9349);case o.SelectAll:return i(91281);case o.SkypeOut:return i(97037);case o.CallOptions:return i(53098);case o.Expand:return i(86411);case o.Contract:return i(49303);case o.Office:return i(74010);case o.Snapshot:return i(54775);case o.Recent:return i(43893);case o.Hide:return i(5691);case o.MissingPreview:return i(3543);case o.Paste:return i(28612);case o.MeetNow:return i(61231);case o.ModeratedChat:return i(72624);case o.SoundWave:return i(69598);case o.GPS:return i(7274);case o.LiveLocation:return i(41963);case o.PanelBottomFilled:return i(94895);case o.PanelLeftFilled:return i(71011);case o.PanelFloatingFilled:return i(2182);case o.Repeat:return i(88756);case o.CallsInverted:return i(69317);case o.CallsInvertedGradient:return i(35014);case o.ChatsInverted:return i(20585);case o.ChatsInvertedGradient:return i(96756);case o.CameraInverted:return i(13499);case o.ContactsGroupInverted:return i(91283);case o.AlertFillNewFont:return i(27225);case o.AlertFillNewFontGradient:return i(31107);case o.PeopleFill:return i(42234);case o.PeopleFillGradient:return i(34434);case o.StickersCamera:return i(57267);case o.ReactionAdd:return i(33379);case o.AdMaskNeg:return i(84037);case o.GuestAccountExpired:return i(68515);case o.GuestAccount:return i(25400);case o.GridView:return i(99973);case o.FocusedView3:return i(21663);case o.ContentView:return i(80029);case o.Schedule:return i(40577);case o.CircleBigNeg:return i(71453);case o.PreviousNext:return i(45057);case o.CallerID:return i(70850);case o.Poll:return i(67474);case o.CategoryTrending:return i(13824);case o.CategoryHappy:return i(25799);case o.CategorySad:return i(11191);case o.CategoryYes:return i(79603);case o.CategoryNo:return i(39287);case o.CategoryCute:return i(71023);case o.MessageVideo:return i(85937);case o.ClosedCaptionSettings:return i(98771);case o.OpenOutside:return i(7276);case o.Exclaimation:return i(80304);case o.CallMerge:return i(37734);case o.OriginalSize:case o.ViewSwitcher:return i(27607);case o.Presenter:return i(40569);case o.Audience:return i(72526);case o.GalleryLarge:return i(67880);case o.Gallery:return i(8317);case o.FitToWindow:return i(29030);case o.StartIncomingVideo:return i(90849);case o.Left:return i(11798);case o.Right:return i(98603);case o.ScreenSharingRequestControl:return i(28115);case o.ScreenSharingStopControl:return i(81363);case o.GifPlay:return i(85968);case o.BackgroundReplacement:return i(43872);case o.RaiseHand:return i(35336);case o.LowerHand:return i(72506);case o.LowerHandGradient:return i(67368);case o.RaiseHandCrossed:return i(71861);case o.Format:return i(64497);case o.Bold:return i(12810);case o.Italic:return i(21525);case o.Strikethrough:return i(90874);case o.CodeSnippet:return i(7217);case o.Cut:return i(39173);case o.EmojiAdd:return i(10162);case o.EmojiAddGradient:return i(83387);case o.TwinCamMid:return i(78238);case o.TwinCamMidGradient:return i(79675);case o.TwinCamMidOff:return i(96502);case o.TwinCamMidOffGradient:return i(34810);case o.TopPanelExpand:return i(30863);case o.TopPanelCollapse:return i(77382);case o.CallTransfer:return i(57256);case o.CallRemoteNdiRecord:return i(72523);case o.AddImage:return i(79004)}}(e);return h.default(g)}},33714:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduleCallAlertTypes=void 0,function(e){e[e.Received=1]="Received",e[e.InvitationAccepted=2]="InvitationAccepted",e[e.InvitationDeclined=3]="InvitationDeclined",e[e.Canceled=4]="Canceled",e[e.Edited=5]="Edited"}(t.ScheduleCallAlertTypes||(t.ScheduleCallAlertTypes={}))},16392:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StackNavigationType=t.StackNavigationDirection=t.StackNavigatorId=t.DesktopNavigationType=void 0,function(e){e[e.Stack=0]="Stack",e[e.StackCollapsible=1]="StackCollapsible"}(t.DesktopNavigationType||(t.DesktopNavigationType={})),t.StackNavigatorId={Mobile:"mobile",DesktopContent:"desktopcontent",DesktopModal:"desktopmodal",DesktopSidebar:"desktopsidebar"},function(e){e[e.Push=1]="Push",e[e.Present=2]="Present"}(t.StackNavigationDirection||(t.StackNavigationDirection={})),function(e){e[e.Push=1]="Push",e[e.PopToRoot=2]="PopToRoot",e[e.Replace=3]="Replace"}(t.StackNavigationType||(t.StackNavigationType={}))},49603:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BarStyleTheme=void 0,function(e){e[e.Default=0]="Default",e[e.Light=1]="Light",e[e.Dark=2]="Dark"}(t.BarStyleTheme||(t.BarStyleTheme={}))},11698:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Rate=t.ComponentName=t.SelectedMessagesActionType=t.QuotesTriggerType=void 0,function(e){e[e.ActionMenu=0]="ActionMenu",e[e.Selection=1]="Selection",e[e.Swipe=2]="Swipe",e[e.KeyboardCopyPaste=3]="KeyboardCopyPaste"}(t.QuotesTriggerType||(t.QuotesTriggerType={})),function(e){e[e.Forward=0]="Forward",e[e.Remove=1]="Remove",e[e.Copy=2]="Copy",e[e.Cancel=3]="Cancel"}(t.SelectedMessagesActionType||(t.SelectedMessagesActionType={})),function(e){e.Calling="Calling",e.Views="Splitview",e.Hotkeys="Hotkey",e.Unknown="Unknown"}(t.ComponentName||(t.ComponentName={}));class i{constructor(){this._total=0,this._count=0,this._max=0,this._min=0,this._sample=1}getCount(){return this._count}average(){return this._total&&this._count?Math.round(this._total/this._count*100)/100:0}max(){return this._max}min(){return this._min}push(e){e&&(this._total>i.maxValue&&(this._total/=2,this._count/=2,this._sample*=2),this._count%this._sample==0&&(this._total+=e,this._count++,this._max<=e&&(this._max=e),(this._min>=e||0===this._min)&&(this._min=e)))}isEmpty(){return 0===this._count}}t.Rate=i,i.maxValue=Number.MAX_VALUE/2},63841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextStyleCategories=t.Theme=void 0,function(e){e[e.Colorful=1]="Colorful",e[e.Accessible=2]="Accessible",e[e.Mono=3]="Mono",e[e.AccessibleDark=4]="AccessibleDark",e[e.ColorfulDark=7]="ColorfulDark",e[e.MonoDark=8]="MonoDark",e[e.ClassicDeprecated=9]="ClassicDeprecated",e[e.ClassicDarkDeprecated=10]="ClassicDarkDeprecated",e[e.Delphi=11]="Delphi",e[e.DelphiDark=12]="DelphiDark"}(t.Theme||(t.Theme={})),function(e){e[e.Subtitle=0]="Subtitle",e[e.Caption=1]="Caption",e[e.SelectedCaption=2]="SelectedCaption",e[e.CaptionSmall=3]="CaptionSmall",e[e.SelectedCaptionSmall=4]="SelectedCaptionSmall",e[e.RowTitle=5]="RowTitle",e[e.Body=6]="Body",e[e.BodyBold=7]="BodyBold",e[e.CardTitle=8]="CardTitle",e[e.CardTitleSmall=9]="CardTitleSmall",e[e.PanelHeader=10]="PanelHeader",e[e.PanelHeaderLandscape=11]="PanelHeaderLandscape",e[e.CallHeaderSubtitleV2=12]="CallHeaderSubtitleV2",e[e.MessagingHeader=13]="MessagingHeader",e[e.MessagingHeaderSmall=14]="MessagingHeaderSmall",e[e.BodyBig=15]="BodyBig",e[e.BodyBigBold=16]="BodyBigBold",e[e.BodySmall=17]="BodySmall",e[e.BodySmallBold=18]="BodySmallBold",e[e.ModernizeChatSmallHeaderTitle=19]="ModernizeChatSmallHeaderTitle",e[e.ModernizeChatSmallHeaderTitleMobile=20]="ModernizeChatSmallHeaderTitleMobile"}(t.TextStyleCategories||(t.TextStyleCategories={}))},61694:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UrlType=void 0,function(e){e[e.Unknown=0]="Unknown",e[e.Web=1]="Web",e[e.Email=2]="Email",e[e.Skype=3]="Skype",e[e.Tel=4]="Tel",e[e.CallTo=5]="CallTo",e[e.VoipAudio=6]="VoipAudio",e[e.VoipVideo=7]="VoipVideo",e[e.Messaging=8]="Messaging",e[e.SkypeWin=9]="SkypeWin",e[e.Winshell=10]="Winshell",e[e.OneNote=11]="OneNote"}(t.UrlType||(t.UrlType={}))},98180:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UrlNavigationAction=void 0,function(e){e.CreateWebPartnerFlow="createmeetnow",e.JoinWebPartnerFlow="joinmeetnow"}(t.UrlNavigationAction||(t.UrlNavigationAction={}))},56280:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdsListGroupType=t.AdsType=t.AdsProvider=t.SideBarResizeMode=void 0,function(e){e[e.None=0]="None",e[e.Resize=1]="Resize",e[e.ResizeOnCommit=2]="ResizeOnCommit"}(t.SideBarResizeMode||(t.SideBarResizeMode={})),function(e){e.Msn="msn",e.MeetNow="meetnow"}(t.AdsProvider||(t.AdsProvider={})),function(e){e.ListItem="listItem",e.ListItemNarrow="listItemNarrow",e.PanelBanner="panelBanner"}(t.AdsType||(t.AdsType={})),function(e){e.Favourites="favourites",e.Recents="recents",e.None="none"}(t.AdsListGroupType||(t.AdsListGroupType={}))},78262:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MediaViewSize=t.MediaBarCustomAction=t.TextToHighlightType=t.CallDirectionType=t.PermissionPromptOptions=t.PermissionType=t.AudioState=t.UploadFileType=t.ThreadMemberAccessType=t.LocationType=t.ResponsiveWidth=t.ReactionsTextType=t.ReactionsTextStyle=t.PhoneNumberTypes=t.AvatarSize=t.eGender=t.MessageNotificationClass=t.NumberShim=void 0,function(e){e[e.MAX_SAFE_INTEGER=9007199254740991]="MAX_SAFE_INTEGER"}(t.NumberShim||(t.NumberShim={})),function(e){e[e.SystemInformational=0]="SystemInformational",e[e.Normal=1]="Normal",e[e.OneOnOne=2]="OneOnOne",e[e.MentionedOrQuoted=3]="MentionedOrQuoted"}(t.MessageNotificationClass||(t.MessageNotificationClass={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.Male=1]="Male",e[e.Female=2]="Female"}(t.eGender||(t.eGender={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(t.AvatarSize||(t.AvatarSize={})),function(e){e[e.Home=0]="Home",e[e.Office=1]="Office",e[e.Mobile=2]="Mobile",e[e.Other=3]="Other"}(t.PhoneNumberTypes||(t.PhoneNumberTypes={})),function(e){e[e.Default=0]="Default",e[e.Sticker=1]="Sticker",e[e.Snapshot=2]="Snapshot",e[e.Animation=3]="Animation",e[e.CallEvent=4]="CallEvent"}(t.ReactionsTextStyle||(t.ReactionsTextStyle={})),function(e){e[e.Default=0]="Default",e[e.CallEventMuted=1]="CallEventMuted",e[e.CallEventKickedOut=2]="CallEventKickedOut",e[e.CallEventTransfer=3]="CallEventTransfer",e[e.CallEventKickedOutOwn=4]="CallEventKickedOutOwn"}(t.ReactionsTextType||(t.ReactionsTextType={})),function(e){e[e.MinDesktop=0]="MinDesktop",e[e.Tiny=1]="Tiny",e[e.Small=2]="Small",e[e.Medium=3]="Medium",e[e.Large=4]="Large"}(t.ResponsiveWidth||(t.ResponsiveWidth={})),function(e){e[e.None=1]="None",e[e.Current=2]="Current",e[e.Custom=3]="Custom",e[e.Search=4]="Search",e[e.NearBy=5]="NearBy"}(t.LocationType||(t.LocationType={})),function(e){e[e.Admin=0]="Admin",e[e.User=1]="User"}(t.ThreadMemberAccessType||(t.ThreadMemberAccessType={})),function(e){e[e.File=1]="File",e[e.Picture=2]="Picture",e[e.Thumbnail=3]="Thumbnail",e[e.Video=4]="Video",e[e.VideoMessage=5]="VideoMessage",e[e.Audio=6]="Audio",e[e.AudioMessage=7]="AudioMessage",e[e.GroupAvatar=8]="GroupAvatar",e[e.Excel=9]="Excel",e[e.OneNote=10]="OneNote",e[e.Powerpoint=11]="Powerpoint",e[e.Word=12]="Word"}(t.UploadFileType||(t.UploadFileType={})),function(e){e[e.None=0]="None",e[e.IncomingRing=1]="IncomingRing",e[e.Call=2]="Call"}(t.AudioState||(t.AudioState={})),function(e){e[e.Camera=0]="Camera",e[e.CameraRoll=1]="CameraRoll",e[e.WriteCameraRoll=2]="WriteCameraRoll",e[e.Microphone=3]="Microphone",e[e.Contacts=4]="Contacts",e[e.Notifications=5]="Notifications",e[e.Location=6]="Location",e[e.LocationAlways=7]="LocationAlways",e[e.SendSms=8]="SendSms",e[e.ReadSms=9]="ReadSms",e[e.ReceiveSms=10]="ReceiveSms",e[e.ReadPhoneState=11]="ReadPhoneState",e[e.DrawOver=12]="DrawOver",e[e.MicrophoneAndCamera=13]="MicrophoneAndCamera",e[e.BackgroundExecution=14]="BackgroundExecution",e[e.Calendar=15]="Calendar",e[e.ScreenRecording=16]="ScreenRecording"}(t.PermissionType||(t.PermissionType={})),function(e){e[e.PromptAgainIfDenied=1]="PromptAgainIfDenied",e[e.SkipPrePrompt=2]="SkipPrePrompt",e[e.DontPrompt=4]="DontPrompt",e[e.SkipAugmentedWebPanel=8]="SkipAugmentedWebPanel"}(t.PermissionPromptOptions||(t.PermissionPromptOptions={})),function(e){e[e.Outgoing=0]="Outgoing",e[e.Incoming=1]="Incoming",e[e.Missed=2]="Missed"}(t.CallDirectionType||(t.CallDirectionType={})),function(e){e[e.DisplayName=0]="DisplayName",e[e.Participant=1]="Participant",e[e.PhoneNumber=2]="PhoneNumber",e[e.SkypeId=3]="SkypeId"}(t.TextToHighlightType||(t.TextToHighlightType={})),function(e){e[e.LaunchCamera=0]="LaunchCamera",e[e.LaunchSearch=1]="LaunchSearch",e[e.LaunchEmoticon=2]="LaunchEmoticon",e[e.LaunchMoji=3]="LaunchMoji",e[e.LaunchKeyboard=4]="LaunchKeyboard",e[e.CloseKeyboard=5]="CloseKeyboard",e[e.LaunchSticker=6]="LaunchSticker",e[e.LaunchGif=7]="LaunchGif"}(t.MediaBarCustomAction||(t.MediaBarCustomAction={})),function(e){e[e.Thumbnail=0]="Thumbnail",e[e.ThumbnailUncropped=1]="ThumbnailUncropped",e[e.ThumbnailBlurred=2]="ThumbnailBlurred",e[e.MobilePreview=3]="MobilePreview",e[e.Full=4]="Full"}(t.MediaViewSize||(t.MediaViewSize={}))},17756:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(67930),s=i(98278),a=i(61614),r=i(46096),l=i(36237),c=i(15877),d=i(33754),u=i(76192),g=i(54976),h=i(22222),p=i(11010),m=i(19675),S=i(53374),C=i(97634),f=(0,c.lazyProperties)({container:()=>n.Styles.createViewStyle({padding:20,marginTop:10,flex:1}),description:()=>n.Styles.createTextStyle({paddingTop:20}),radioSet:()=>n.Styles.createViewStyle({marginVertical:20}),textStyle:()=>n.Styles.createTextStyle({marginRight:40})});class y extends o.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._submitted=!1,this._onChangeSelection=e=>{const t=parseInt(e,10);this.setState({selectedOption:t})},this._onConfirm=()=>{const e=S.default.newCauseId();l.log(r.LogTraceArea.GenericUnsafe,"CaptivePortalQuestionnaire._onConfirm, causeId: "+e),this._submitted=!0,this._goBack(e)}}static getHeaderText(){return d.getString("ConnectivityStatusBar.CaptivePortalDismissHeader")}_getHeaderText(e){return y.getHeaderText()}componentWillUnmount(){super.componentWillUnmount();const e=this._submitted&&this.state.selectedOption||u.CaptivePortalQuestionnaireOption.NoAnswer;a.default.answerCaptivePortalQuestionnaire(e)}render(){const e=[{key:u.CaptivePortalQuestionnaireOption.Invalid.toString(),text:d.getString("ConnectivityStatusBar.CaptivePortalDismissOptionInvalid")},{key:u.CaptivePortalQuestionnaireOption.Useless.toString(),text:d.getString("ConnectivityStatusBar.CaptivePortalDismissOptionUseless")},{key:u.CaptivePortalQuestionnaireOption.DontUnderstand.toString(),text:d.getString("ConnectivityStatusBar.CaptivePortalDismissOptionNotUnderstand")},{key:u.CaptivePortalQuestionnaireOption.Other.toString(),text:d.getString("ConnectivityStatusBar.CaptivePortalDismissOptionOther")}],t=C.currentTheme(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:f.container},n.createElement(m.Header,{size:s.HeaderSize.h2},d.getString("ConnectivityStatusBar.CaptivePortalDismissHeader")),n.createElement(m.BodyText,{style:f.description},d.getString("ConnectivityStatusBar.CaptivePortalDismissQuestion")),n.createElement(g.default,{style:f.radioSet,radioButtons:e,selectedKey:this.state.selectedOption?this.state.selectedOption.toString():void 0,textStyle:[p.default.bodyFontStyle(t),f.textStyle],dividerType:g.DividerType.None,onSelected:this._onChangeSelection,fullWidth:!0}),n.createElement(h.default,{buttonSize:s.SXButtonSize.Medium,buttonStyle:s.SXButtonStyle.ColorFill,title:d.getString("Global.OkLabel"),allowTextWrap:!0,onPress:this._onConfirm}))}}t.default=y},57231:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DetailsPanel=void 0;const n=i(16778),o=i(67930),s=i(6562),a=i(81697),r=i(71830),l=i(54457),c=i(39549),d=i(66957),u=i(46096),g=i(62057),h=i(36237),p=i(33754),m=i(4735),S=i(30124),C=i(29130),f=i(51070),y=i(81115),_=i(36150),v=i(90631),b=i(12187),T=i(81760),P=i(80837),A=i(79195),k=i(53374),I=i(97634);class w extends o.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._scrollOffset=0,this._scrollTop=0,this._setScrollViewRef=e=>{this._scrollView=e||void 0},this._onCloseButtonFocus=()=>{this._scrollToTop()},this._onScrollToOffsetRequested=e=>!!(this._scrollView&&e>0&&this._scrollTop<e)&&(this._scrollView.setScrollTop(e-this._scrollTop),this._onScroll(e,0),!0),this._onChatSettingsClicked=()=>{m.default.showChatSettingsPanel(this.state.otherPartyMri,this.props.route.params.mri,this._getRootViewId())},this._onScroll=(e,t)=>{this._scrollOffset||(this._scrollOffset=this._getContext().isPresentedInDesktopSubview?d.DetailsPanelHeaderSizes.scrollOffsetDesktop:d.DetailsPanelHeaderSizes.scrollOffsetMobile),this._scrollTop=e;const i=e>this._scrollOffset;this.state.showHeader!==i&&this.setState({showHeader:i})},this._onCloseButtonPress=e=>{e&&e.stopPropagation();const t=k.default.newCauseId();h.log(u.LogTraceArea.Navigation,"DetailsPanel._onCloseButtonPress,  causeId: "+t),this._goBack(t)}}_buildState(e,t){let i,n={};const o=this._getRootViewId();let s=d.DetailsPanelViewMode.None;if(r.isThread(e.route.params.mri)){const t=(0,c.default)().getConversation(e.route.params.mri);n.otherPartyMri=t&&t.isOneOnOne()?t.getOtherPartyMri():void 0,n.otherPartyMri||(i=t?t.isOneOnOne()?"Conversation getOtherPartyMri returned undefined, viewmode: ":"Conversation is not OneOnOne, viewmode: ":"Conversation is undefined, viewmode: ")}else n.otherPartyMri=e.route.params.mri,n.otherPartyMri||(i="Non thread mri props is undefined, viewmode: ");if(e.route.params.mri&&(s=r.isGroupConversation(e.route.params.mri)?d.DetailsPanelViewMode.Group:r.isAgent(e.route.params.mri)?d.DetailsPanelViewMode.Bot:r.isConnector(e.route.params.mri)?d.DetailsPanelViewMode.Connector:d.DetailsPanelViewMode.User),i){const e=i+s;h.log(u.LogTraceArea.Profile,e)}return n.deviceOrientation=C.default.getDeviceOrientation(o),n.viewMode=s,n.isUsingStackNavigationContext=S.default.isUsingStackNavigationContext(),n.showScreenReaderHeader=_.default.isMobileScreenReaderEnabled(),n.statusBarHeight=this._getContext().isPresentedInDesktopSubview?0:f.default.statusBarPadding(),t&&(n.showHeader=!1),n}componentDidMount(){super.componentDidMount(),this._updateStatusBar(),a.default.forceThreadDetailsFetchIfNeeded(this.props.route.params.mri)}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.state.isUsingStackNavigationContext||this.props.route.params.mri===e.route.params.mri||this._scrollToTop(),this.state.showHeader!==t.showHeader&&this._updateStatusBar(),this.state.statusBarHeight!==t.statusBarHeight&&!this.state.showHeader&&this._scrollView&&this._scrollView.setScrollTop(0)}render(){const e=this._isHeaderOpaqueStyle(),t=e,i=this._getCloseButtonTitle(),{headerIconColor:o,iconHoverColor:s}=I.themeColors(this._getContext(),this.props.route.params.colorThemeOverride),a=this.state.isUsingStackNavigationContext?{closeButtonType:v.CloseButtonType.Close,color:t?o:T.Color.white,title:i}:{closeButtonType:this.props.route.params.isAloneInNavStack?v.CloseButtonType.Close:v.CloseButtonType.Back,color:t?o:T.Color.white,hoverColor:t?s:T.Color.whiteOverlay80,onPress:this._onCloseButtonPress,onFocus:this._onCloseButtonFocus,title:this.props.route.params.isAloneInNavStack?i:p.getString("Global.BackButtonTitle")},r=n.createElement(v.SimplePanelHeader,{floating:!this.state.showScreenReaderHeader,panelName:e?this._getHeaderText(this.state):void 0,useTransparentBackground:!e,hideBottomBorder:!e,leftButton:a,ignorePointerEvents:!e,delayHeaderFocus:!1}),{primaryBackgroundColorStyle:l}=I.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride),c=[P.default.flexOne,l];let d;this.state.statusBarHeight&&!this.state.showScreenReaderHeader&&(c.push(y.default.marginTopStyle(this.state.statusBarHeight),P.default.overflowVisible),d=y.default.marginTopStyle(-1*this.state.statusBarHeight));let u=this._renderPanelContent();return d&&(u=n.createElement(n.View,{style:d},u)),n.createElement(n.View,{style:[P.default.flexOne,l]},r,n.createElement(n.ScrollView,{ref:this._setScrollViewRef,style:c,onScroll:this._onScroll,keyboardShouldPersistTaps:!0},u))}_getCloseButtonTitle(){switch(this.state.viewMode){case d.DetailsPanelViewMode.User:return p.getString("DetailsPanelHeader.CloseUserProfileButtonTitle");case d.DetailsPanelViewMode.Bot:case d.DetailsPanelViewMode.Connector:return p.getString("DetailsPanelHeader.CloseBotProfileButtonTitle");case d.DetailsPanelViewMode.Group:return p.getString("DetailsPanelHeader.CloseGroupProfileButtonTitle");default:return p.getString("Global.CloseButtonTitle")}}_scrollToTop(){this._scrollView&&(this._scrollView.setScrollTop(0,!1),this._onScroll(0,0))}_renderPanelContent(){switch(this.state.viewMode){case d.DetailsPanelViewMode.Bot:return n.createElement(s.default,{botMri:this.props.route.params.mri,showConversationSettings:this.props.route.params.showConversationSettings,origin:this.props.route.params.origin,onBotAdded:this.props.route.params.onBotAdded});case d.DetailsPanelViewMode.Group:return n.createElement(g.default,{conversationId:this.props.route.params.mri,onScrollInParentRequested:this._onScrollToOffsetRequested});case d.DetailsPanelViewMode.User:return n.createElement(A.default,{userMri:this.state.otherPartyMri,conversationMri:this.props.route.params.mri,origin:this.props.route.params.origin,showSettings:this.props.route.params.showConversationSettings,onChatSettingsClicked:this._onChatSettingsClicked});case d.DetailsPanelViewMode.Connector:return n.createElement(l.default,{mri:this.props.route.params.mri,conversationId:this.props.route.params.conversationId,onCloseProfile:this._onCloseButtonPress});default:return}}_getHeaderText(e){return e.viewMode===d.DetailsPanelViewMode.User||e.viewMode===d.DetailsPanelViewMode.Bot||e.viewMode===d.DetailsPanelViewMode.Group?p.getString("DetailsPanelHeader.UserProfileTitle"):void 0}_isHeaderOpaqueStyle(){return!!this.state.showScreenReaderHeader||!!this.state.showHeader}_updateStatusBar(){const{defaultStatusBarTheme:e}=I.themeColors(this._getContext(),this.props.route.params.colorThemeOverride);this._updateStatusBarStyle(b.default.createBarStyle(e,!0))}}t.DetailsPanel=w,t.default=w},10706:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(31844),s=i(15069),a=i(46809),r=i(98356),l=i(16778),c=i(4736),d=i(24521),u=i(72105),g=i(60),h=i(89391),p=i(78547),m=i(96074),S=i(82773),C=i(94894),f=i(98447),y=i(14980),_=i(51267),v=i(11009),b=i(3056),T=i(84994),P=i(98278),A=i(91e3),k=i(75760),I=i(28805),w=i(37490),N=i(80843),M=i(68894),E=i(46096),x=i(81722),L=i(11375),R=i(7213),D=i(90070),B=i(66649),O=i(36237),F=i(61253),V=i(97073),U=i(2830),H=i(15877),W=i(33754),z=i(66127),G=i(89951),K=(i(34537),i(10909)),j=i(4735),q=i(17093),Q=i(95691),X=i(27357),J=i(24148),$=i(48199),Y=i(3415),Z=i(70170),ee=i(82052),te=i(29130),ie=i(51070),ne=(i(86045),i(90631)),oe=i(16392),se=i(12187),ae=i(44352),re=i(80760),le=i(93194),ce=i(81760),de=i(40363),ue=i(11828),ge=(i(80837),i(60305)),he=i(63841),pe=i(53374),me=i(78440),Se=i(56129),Ce=(i(73877),i(91066)),fe=i(67024),ye=i(15963),_e=i(97634);var ve;!function(e){e[e.Primary=0]="Primary",e[e.Secondary=1]="Secondary",e[e.Experimental=2]="Experimental"}(ve||(ve={}));const be=[q.HubTab.Recents,q.HubTab.Calls,q.HubTab.People,q.HubTab.Notifications],Te=[q.HubTab.Recents,q.HubTab.Calls,q.HubTab.People,q.HubTab.Notifications],Pe=(0,H.lazyProperties)({hub:()=>l.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),headerStyle:()=>l.Styles.createViewStyle({height:70}),headerStyleSmall:()=>l.Styles.createViewStyle({height:60}),headerLandscapeStyle:()=>l.Styles.createViewStyle({height:44}),tabShadow:()=>l.Styles.createViewStyle({left:0,right:0,height:1}),contentContainer:()=>l.Styles.createViewStyle({flex:1,flexDirection:"column-reverse"}),contentInnerContainer:()=>l.Styles.createViewStyle({flex:1,alignItems:"stretch"}),tabWrapper:()=>l.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),headerWrapper:()=>l.Styles.createViewStyle({flex:0,overflow:"visible"}),fab:()=>l.Styles.createViewStyle({position:"absolute",bottom:15,right:15}),stackedFab:()=>l.Styles.createViewStyle({marginTop:10})});class Ae extends m.BaseNavigationView{constructor(e){super(e),this._shadowOpacityValue=new l.Animated.Value(1),this._shadowOpacityStyle=l.Styles.createAnimatedViewStyle({opacity:this._shadowOpacityValue}),this._statusPillInstance=new ae.default,this._miniToastKey=n.uniqueId("MobileHub"),this._conversationsScrolledToTop=!0,this._callsScrolledToTop=!0,this._skipUpdatingHeaderTab=!1,this._skypeToPhoneCardExperimentSettings={location:x.ExperimentLocation.CallsPanel,name:"DialpadFab",layoutOption:"default"},this._resetTransitionTransformValue=new l.Animated.Value(0),this._resetTransitionOpacityValue=new l.Animated.Value(1),this._resetSearchTransitionStyle=l.Styles.createAnimatedViewStyle({opacity:this._resetTransitionOpacityValue,transform:[{translateY:this._resetTransitionTransformValue}]}),this._contentTransformValue=new l.Animated.Value(0),this._contentOpacityValue=new l.Animated.Value(1),this._contentAnimatedStyle=l.Styles.createAnimatedViewStyle({opacity:this._contentOpacityValue,transform:[{translateX:this._contentTransformValue}]}),this._fabOpacityValue=new l.Animated.Value(1),this._fabOpacityStyle=l.Styles.createAnimatedViewStyle({opacity:this._fabOpacityValue}),this._coachMarkContext={coachMarkArea:v.CoachMarkAreaType.MobileHub},this._hubHeaderPanelRef=()=>this._hubHeaderPanel,this._onWhatsNewTooltipPress=e=>{e.stopPropagation(),e.preventDefault();const t=pe.default.newCauseId();j.default.navigateToMeControl(this._getRootViewId(),t,oe.StackNavigationDirection.Present)},this._onTabLongPress=e=>{switch(e){case q.HubTab.Recents:case q.HubTab.Notifications:ee.default.showOptionsMenu(e,(()=>this._tabRef(e)),this._getRootViewId(),void 0)}},this._onConversationListPanel=e=>{this._conversationsListPanel=e||void 0},this._onHubHeaderPanel=e=>{this._hubHeaderPanel=e||void 0},this._onAppStateChange=e=>{this._handleAppStateChange(e)},this._tabConfig=e=>{switch(e){case q.HubTab.Recents:return this._getWrappedRecentsTabConfig();case q.HubTab.Calls:return this._getCallsTabConfig();case q.HubTab.People:return this._getContactsTabConfig();case q.HubTab.Notifications:return this._getNotificationsTabConfig();case q.HubTab.CaptureHub:case q.HubTab.MeetNowChats:case q.HubTab.MeetNowCalls:return}},this._goToRecent=()=>{this._onBottomTabPress(q.HubTab.Recents,void 0)},this._onBottomTabPress=(e,t,i)=>{if(this._getContext().isPresentedInDesktopLeftNav&&w.dismissAll(),i){this._tabChangeTrackerId&&fe.default.cancelTimeout(this._tabChangeTrackerId),this._tabChangeTrackerId=pe.default.newCauseId();const t={tab:q.HubTab[e]};fe.default.createTrackerAndMarkPressTime(this._tabChangeTrackerId,ye.ScenarioName.ResponsivenessSelectHubTab,i,t)}if(N.default.disableTooltip(M.EngagementTooltipType.Profile),e!==q.HubTab.CaptureHub)if(this.state.currentTab!==e){const t=this._convertTabEnumToIndex(e),i=this._convertTabEnumToIndex(this.state.currentTab),o=20*(t>i?1:-1),s=n.clone(this.state.tabRenderFlags);s[e]=!0;const a=!(0,F.default)(s,this.state.tabRenderFlags);if(this._skipUpdatingHeaderTab=a,this.isComponentMounted()){const n=()=>{if(this._swipableTabView&&i!==t){const e=r.Common.Duration.Tiny,i=()=>{this._skipUpdatingHeaderTab=!1,this._updateHeaderTab(this.state.currentTab,!0),this._contentTransformValue.setValue(o),this._contentOpacityValue.setValue(.4),this._fabOpacityValue.setValue(1),this._swipableTabView&&this._swipableTabView.goToTab(t,!1),r.parallel([r.timing.shotgun({value:this._contentTransformValue,toValue:0,duration:e,useNativeDriver:!0}),r.timing.shotgun({value:this._contentOpacityValue,toValue:1,duration:e,useNativeDriver:!0})]).start()};if(a){this._fabOpacityValue.setValue(0);const t=!0;r.parallel([r.timing.easeOut({value:this._contentTransformValue,toValue:-o,duration:e,useNativeDriver:t}),r.timing.easeOut({value:this._contentOpacityValue,toValue:0,duration:e,useNativeDriver:t})]).start((e=>{e.finished&&i()}))}else this._contentOpacityValue.setValue(0),i()}};a?this.setState({tabRenderFlags:s,currentTab:e},n):this.setState({currentTab:e},n)}0}else switch(e){case q.HubTab.Recents:this._conversationsListPanel&&this._conversationsListPanel.scrollToTop();break;case q.HubTab.Calls:this._quickCallPanel&&this._quickCallPanel.scrollToTop();break;case q.HubTab.People:this._contactsPanel&&this._contactsPanel.scrollToTop();break;case q.HubTab.Notifications:this._notificationsPanel&&this._notificationsPanel.scrollToTop()}else y.navigateToCaptureComboWithParams({capturedContentHandler:new f.CapturedContentHandlerForSharing(this._getContext()),allowVideo:!0,willDismissOnSend:!0,mediaPickerShouldCollapseFully:!0,pressTime:t},this._getContext())},this._onTabChangeEnd=(e,t)=>{if(this.isComponentMounted()){this._tabChangeTrackerId&&(fe.default.markActionDoneAndRemoveTracker(this._tabChangeTrackerId),this._tabChangeTrackerId=void 0);const t=this._convertIndexToTabEnum(e),i=q.HubTab[t];O.track(new J.NavigationTab(i));const o=de.default.isUsingExperimentalNav();o&&this.isComponentMounted()&&this.state.currentTab!==t&&(O.log(E.LogTraceArea.MobileHub,"MobileHub: setting currentTab to "+t),this.setState({currentTab:t})),n.defer((()=>{j.default.updateHubNavigationContext(t,!o)}))}N.default.disableTooltip(M.EngagementTooltipType.Profile)},this.handleFocusEvent=e=>(O.log(E.LogTraceArea.GenericUnsafe,"MobileHub.handleFocusEvent"),e===L.FocusEvent.OpenCallSideBar&&(this._focusCenterControl(),!0)),this._renderCallsTabContent=()=>l.createElement(Z.default,{ref:this._onQuickCallPanelRef,hideHeader:!0,hideSearchBar:this.state.mobileHubFABEnabled&&!this.state.modernizeMobileTabHeader,bottomPadding:160,onScroll:this.state.mobileHubFABEnabled?void 0:this._onCallsScroll,isMobileTab:!0}),this._onContactsTabCountUpdated=e=>{if(!this.isComponentMounted())return;const t=1===e;t!==this.state.showShadowForPeopleTab&&this.setState({showShadowForPeopleTab:t})},this._onSwipableTabViewRef=e=>{this._swipableTabView=e},this._onHandleTabLongPress=e=>{this._onTabLongPress(e)},this._onPrimaryFABPress=e=>{const t=D.default.actionButtonForHubTab(this.state.currentTab,this.state.disableHighBandwidthOperations,this.state.modernizeMobileHubFabs);t&&this._isCTAExperiment()&&U.default.registerCallButtonClickAction(this._skypeToPhoneCardExperimentSettings),this._intFABPress(e,t,(()=>this._fabIcon),this._getRootViewId())},this._onSecondaryFABPress=e=>{const t=D.default.secondaryActionButtonForHubTab(this.state.currentTab,this.state.disableHighBandwidthOperations,this.state.modernizeMobileHubFabs);t&&this._isCTAExperiment()&&U.default.registerDialerButtonClickAction(this._skypeToPhoneCardExperimentSettings),this._intFABPress(e,t,(()=>this._secondaryFabIcon),this._getRootViewId())},this._onQuickCallPanelRef=e=>{this._quickCallPanel=e||void 0},this._onContactsPanelV2Ref=e=>{this._contactsPanel=e||void 0},this._onNotificationsPanelRef=e=>{this._notificationsPanel=e||void 0},this._onContentWrapperRef=e=>{this._wrappedContentTransitionView=e||void 0},this._onFabIconRef=e=>{this._fabIcon=e||void 0},this._onSecondaryFabIconRef=e=>{this._secondaryFabIcon=e||void 0},this._onTabBarRef=e=>{this._tabBar=e||void 0},this._onCallsScroll=(e,t)=>{const i=e<=0;this._callsScrolledToTop!==i&&(this.state.currentTab===q.HubTab.Calls&&this._shadowOpacityValue.setValue(i?0:1),this._callsScrolledToTop=i)},this._onConversationsListScroll=(e,t)=>{if(this.state.mobileHubFABEnabled)return;const i=e<=0;this._conversationsScrolledToTop!==i&&(this.state.currentTab===q.HubTab.Recents&&this._shadowOpacityValue.setValue(i?0:1),this._conversationsScrolledToTop=i)},this._goBack=e=>(O.log(E.LogTraceArea.MobileHub,"MobileHub._goBack: causeId: "+e),this.state.onTopOfNavStack,!1),this._initialTab=e.route.params.hubTab,$.default.transitionInfoEvent().subscribe((e=>{$.default.isHubSearchTransition()&&e.progress?this._setAnimatedValues(e.progress,0):e.fromRoute&&e.fromRoute.type===$.RouteType.Hub&&this._clearAnimatedValues()})),this._navigationStateStoreToken=X.default.subscribe((()=>this._onNavigationStateStoreHubTabChange()),Q.TriggerKeys.HubTab)}_buildState(e,t){const i={};i.shouldSkipRendering=V.default.shouldSkipMobileHub(),t&&(i.unreadAlertsCount=0,i.activeConversationsCount=0);h.default.getS4LUiFeatures();i.disableHighBandwidthOperations=B.default.isUsingGogoNetwork(),i.isCameraAvailable=!i.disableHighBandwidthOperations&&_.default.isCameraAvailable(),i.enableIOSCallsFABExperiment=!1;const a=this._getRootViewId();i.onTopOfNavStack=X.default.isOnTopOfNavigationStack(q.MobileHubNavigationId),i.deviceOrientation=te.default.getDeviceOrientation(a),i.leavePaddingForStatusBar=l.StatusBar.isOverlay()&&i.deviceOrientation===o.DeviceOrientation.Portrait,i.statusBarHeight=ie.default.statusBarHeight(),i.bottomSafeAreaInset=ie.default.bottomSafeAreaInset(),i.useCompactLayout=te.default.isSmallDevice(a);const r=h.default.getEngagementFeatures().whatsNewSetting;return i.isWhatsNewTooltipEnabled=r.enabled&&r.coachmarkEnabled,i.showWhatsNewTooltip=me.default.showTooltip()&&p.default.isAppUpdated(),i.onTopOfNavStack&&(i.unreadAlertsCount=u.default.getUnreadAlertsCount(),i.activeConversationsCount=k.default.getActiveRecentsConversationCount()),!t&&de.default.isUsingExperimentalNav()||(i.currentTab=e.route.params.hubTab),i.isTablet=ge.default.isTablet(),i.windowHeight=te.default.getHeight(a),i.unreadConversationIds=n.keys(k.default.getConversationsWithUnreadCounts()),t?(i.tabRenderFlags={[e.route.params.hubTab]:!0},i.showShadowForPeopleTab=!1):i.deviceOrientation!==this.state.deviceOrientation&&(i.tabRenderFlags=this._resetTabRenderFlags(i)),i.modernizeConversationList=z.default.canModernizeConversationList(),i.modernizeMobileHubFabs=z.default.canModernizeMobileHubFabs(),i.mobileHubFABEnabled=(i.modernizeMobileHubFabs||h.default.getS4LUiFeatures().enableResponsiveDesign)&&s.default.isMobile(),i.modernizeMobileTabHeader=z.default.canModernizeMobileTabHeader()||z.default.canModernizeMobileTabHeaderTablets(),i}_renderHeaderWithOptions(e){const t=this.state.deviceOrientation===o.DeviceOrientation.Landscape;let i;return i=e.heightOverride?l.Styles.createViewStyle({height:e.heightOverride},!1):t?Pe.headerLandscapeStyle:this.state.useCompactLayout?Pe.headerStyleSmall:Pe.headerStyle,l.createElement(G.default,{ref:this._onHubHeaderPanel,style:i,initialHubTab:n.isUndefined(this._initialTab)?q.HubTab.Recents:this._initialTab,unreadAlertsCount:e.hideAlertsButton?void 0:this.state.unreadAlertsCount,deviceOrientation:this.state.deviceOrientation,isVisible:this.state.currentTab!==q.HubTab.CaptureHub,mobileHubFABEnabled:e.mobileHubFABEnabled,animatedTransitionStyle:e.contentTransitionStyle,suppressFocus:e.suppressFocus,hideAlertsButton:e.hideAlertsButton,disableHighBandwidthOperations:this.state.disableHighBandwidthOperations,shouldTrackUnreadAlerts:e.shouldTrackUnreadAlerts,showCallsActionButton:e.showCallsActionButton,modernizeMobileHubFabs:this.state.modernizeMobileHubFabs})}_getBookmarkTooltip(){return this.state.showBookmarkTooltip?l.createElement(C.default,{title:W.getString("BookmarksTooltips.BookmarksCanBeFoundHere"),accessibilityLabel:W.getString("BookmarksTooltips.BookmarksCanBeFoundHere"),anchor:this._hubHeaderPanelRef}):void 0}_getWhatsNewTooltip(){return this.state.isWhatsNewTooltipEnabled&&this.state.showWhatsNewTooltip?l.createElement(Se.default,{title:W.getString("Onboarding.LandingScreenWithCardsCardTitle1"),accessibilityLabel:W.getString("Onboarding.LandingScreenWithCardsCardTitle1"),anchor:this._hubHeaderPanelRef,onPress:this._onWhatsNewTooltipPress}):void 0}_renderHeaderShadow(){const{headerShadowColorStyle:e}=_e.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return l.createElement(l.Animated.View,{style:[Pe.tabShadow,e,this._shadowOpacityStyle]})}_renderConnectivityStatus(){return l.createElement(re.StatusPillView,{disableAbsolutePosition:!0,statusPillInstance:this._statusPillInstance,connectionStatusOnly:!0})}_getRecentsTabConfig(e){return Object.assign(Object.assign({},e.params),{accessibilityLabel:this._tabAccessibilityLabel(q.HubTab.Recents),renderContent:()=>{if(e.hideContent)return;const t=e.wrapperStyle,i=this.state.currentTab===q.HubTab.Recents,n=l.createElement(I.default,{ref:this._onConversationListPanel,selectedConversationId:this.state.selectedConversationId,useMobileView:!0,showFilterIcon:!0,isScrollToTopTarget:i&&this._scrollsToTop(),isActiveTab:i,topInset:this._topScrollInset(),bottomPadding:e.bottomPadding,hideSearchBar:e.hideSearchBar,onScroll:this._onConversationsListScroll});return e.contentWrapper?e.contentWrapper(n):l.createElement(l.View,{key:"conversation-list",style:t},n)}})}_placeholderTabConfig(){return{renderContent:()=>{}}}_tabAccessibilityLabel(e){let t="";const i=this._convertTabEnumToIndex(e)+1;switch(e){case q.HubTab.Recents:t+=W.getString("Hub.RecentsTabScreenReaderLabel",{count:this.state.activeConversationsCount});break;case q.HubTab.CaptureHub:t=this._tabTitle(q.HubTab.CaptureHub)}return t+=" "+W.getString("AccessibilityLabel.TabControlLabel")+" "+W.getString("AccessibilityLabel.TabCountLabel",{currentTab:i,totalTabs:this._totalTabs()}),t}_tabTitle(e){switch(e){case q.HubTab.Recents:return W.getString("Hub.RecentsTabTitle");case q.HubTab.CaptureHub:return W.getString("Hub.CaptureTabTitle")}return""}render(){if(this.state.shouldSkipRendering)return null;const{primaryBackgroundColorStyle:e}=_e.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride),t=(_e.isUsingDarkTheme(this._getContext(),this.props.route.params.colorThemeOverride),_e.isUsingAccessibleTheme(this._getContext(),this.props.route.params.colorThemeOverride),_e.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride),[Pe.hub,e]);const i=this._additionalContainerStyles();return i&&t.push(i),l.createElement(b.default,{goBack:this._goBack},l.createElement(l.Animated.View,{style:t,key:"panel"},l.createElement(v.CoachMarkContext.Provider,{value:this._coachMarkContext},this._renderContent())))}_renderContent(){const e=this._getTabs(this.state,!this.state.isCameraAvailable);let t=n.compact(n.map(e,this._tabConfig));de.default.isRTL()&&n.reverse(t);const i=this._isPresentedInTabletLeftNav(),o=n.includes(e,q.HubTab.Notifications),s=this.props.route.params.hideHeader?void 0:this._renderHeaderWithOptions({mobileHubFABEnabled:this.state.mobileHubFABEnabled,heightOverride:ne.HeaderHeight,contentTransitionStyle:this._contentAnimatedStyle,suppressFocus:!0,hideAlertsButton:i||this.state.isTablet||o,shouldTrackUnreadAlerts:o,showCallsActionButton:this.state.enableIOSCallsFABExperiment});let r;if(s){const e=this.state.currentTab===q.HubTab.People&&!this.state.showShadowForPeopleTab||this.state.modernizeMobileTabHeader?void 0:this._renderHeaderShadow(),t=this.state.currentTab===q.HubTab.People||this._getContext().isPresentedInDesktopLeftNav?void 0:l.createElement(Y.default,{key:"networkConnectionAlert"});let n;if(!i||this.state.currentTab===q.HubTab.Recents){const e=l.Styles.createViewStyle({position:"absolute",top:ne.HeaderHeight,alignSelf:"center"},!1);n=l.createElement(l.View,{key:"connectionStatusWrapper",style:e},this._renderConnectivityStatus())}r=[l.createElement(l.View,{key:"headerWrapper",style:Pe.headerWrapper},s,this._getBookmarkTooltip(),this._getWhatsNewTooltip(),e,t),n]}const c=[Pe.contentContainer],d=[Pe.contentInnerContainer];return l.createElement(Ce.default,{ref:this._onContentWrapperRef,style:c,shouldGroupAccessibilityChildren:this._getContext().isPresentedInDesktopLeftNav},l.createElement(l.View,{style:d},l.createElement(l.Animated.View,{style:[Pe.contentInnerContainer,this._contentAnimatedStyle]},l.createElement(a.default,{ref:this._onSwipableTabViewRef,startingTabIndex:this._convertTabEnumToIndex(this._initialTab),tabConfigs:t,tabHeight:0,swipeDisabled:!0,tabsHidden:!0,hideTabUnderline:!0,isRTL:this._getContext().isRTL,contentOnly:!0,onTabChangeEnd:this._onTabChangeEnd,initialTabCountToRender:e.length}),this._renderFABContent()),l.createElement(R.default,{ref:this._onTabBarRef,tabs:e,currentHubTab:this.state.currentTab,disableCamera:!this.state.isCameraAvailable,showSpinnerWhenSyncing:!0,activeConversationsCount:n.includes(e,q.HubTab.Recents)?this.state.activeConversationsCount:void 0,unreadAlertsCount:n.includes(e,q.HubTab.Notifications)?this.state.unreadAlertsCount:void 0,onTabPress:this._onBottomTabPress,onTabLongPress:this._onHandleTabLongPress})),r)}_tabRef(e){return this._tabBar?this._tabBar.tabRef(e):void 0}_getTabs(e,t=!0){let i;return i=this._getContext().isPresentedInDesktopSubview||e.isTablet?Te:be,t?n.without(i,q.HubTab.CaptureHub):i}componentDidMount(){super.componentDidMount(),this._activationSubToken=g.default.subscribeForChanges("MobileHub",this._onAppStateChange),this._indexToTabEnumMap=this._generateIndexToTabEnumMap(),this._tabEnumToIndexMap=this._generateTabEnumToIndexMap(),this.props.route.params.getSelectedConversationIdEvent&&(this._selectedConversationIdToken=this.props.route.params.getSelectedConversationIdEvent().subscribe((e=>{this.isComponentMounted()&&this.state.selectedConversationId!==e&&this.setState({selectedConversationId:e})}))),this._focusCenterControl(!1),this._updateStatusBarForTab(this.state.currentTab),this._updateHeaderTab(this.state.currentTab),this._addBottomMargin(),this._isPresentedInTabletLeftNav()&&L.register(L.FocusEvent.OpenCallSideBar,this),me.default.maybeSetTooltipVisibility(!0),me.default.maybeSetRedDotVisibility(!0),r.NativeUtils.markAnimatedValue(this._contentTransformValue,0),r.NativeUtils.markAnimatedValue(this._contentOpacityValue,1)}_shouldComponentUpdate(e,t,i,n,o,s){return e?i.deviceOrientation!==o.deviceOrientation||i.useCompactLayout!==o.useCompactLayout||i.leavePaddingForStatusBar!==o.leavePaddingForStatusBar||i.statusBarHeight!==o.statusBarHeight||i.windowHeight!==o.windowHeight||i.shouldSkipRendering!==o.shouldSkipRendering||i.onTopOfNavStack!==o.onTopOfNavStack:super._shouldComponentUpdate(e,t,i,n,o,s)}_componentWillUpdate(e,t,i,o,s){super._componentWillUpdate(e,t,i,o,s),this._updateStatusBarForTab(t.currentTab);const a=this._getTabs(t,!t.isCameraAvailable);if(n.includes(a,q.HubTab.Recents)){const e=n.includes(o.unreadConversationIds,o.selectedConversationId)||n.includes(t.unreadConversationIds,t.selectedConversationId);if(t.activeConversationsCount!==o.activeConversationsCount&&!e){const e=W.getString("Hub.RecentsTabScreenReaderLabel",{count:t.activeConversationsCount||0});l.Accessibility.announceForAccessibility(e)}}if(t.unreadAlertsCount!==o.unreadAlertsCount&&n.includes(a,q.HubTab.Notifications)){const e=W.getString("Hub.UnreadCounterScreenReaderLabel",{count:t.unreadAlertsCount||0});l.Accessibility.announceForAccessibility(e)}t.shouldSkipRendering!==o.shouldSkipRendering&&O.log(E.LogTraceArea.MobileHub,"MobileHub.UNSAFE_componentWillUpdate: shouldSkipRendering "+t.shouldSkipRendering)}_componentDidUpdate(e,t,i){super._componentDidUpdate(e,t,i),t.currentTab!==this.state.currentTab&&this._updateHeaderTab(this.state.currentTab,!0),this.state.onTopOfNavStack!==t.onTopOfNavStack&&(this.state.onTopOfNavStack?this._addBottomMargin():K.default.removeBottomMargin(this._miniToastKey)),this.state.onTopOfNavStack&&!t.onTopOfNavStack&&this._hubHeaderPanel&&this._hubHeaderPanel.focusCenterControl(),n.delay((()=>{this.isComponentMounted()&&this.setState({showBookmarkTooltip:S.default.shouldDisplayTooltipOnMobile(this.state.onTopOfNavStack)})}),1e3)}componentWillUnmount(){super.componentWillUnmount(),this._activationSubToken&&(this._activationSubToken.unsubscribe(),this._activationSubToken=void 0),this._statusPillInstance&&this._statusPillInstance.destroy(),this._navigationStateStoreToken&&(X.default.unsubscribe(this._navigationStateStoreToken),this._navigationStateStoreToken=void 0),this._selectedConversationIdToken&&(this._selectedConversationIdToken.unsubscribe(),this._selectedConversationIdToken=void 0),K.default.removeBottomMargin(this._miniToastKey),L.unregister(L.FocusEvent.OpenCallSideBar,this),N.default.disableTooltip(M.EngagementTooltipType.Profile)}_addBottomMargin(){K.default.addOrUpdateBottomMargin(this._miniToastKey,T.default.tabBarHeight(P.TabBarHeight.Default)+Math.max(10,this.state.bottomSafeAreaInset+10))}_focusCenterControl(e=!0){const t=()=>{this.isComponentMounted()&&this._hubHeaderPanel&&this._hubHeaderPanel.focusCenterControl()};e?n.delay(t,100):t()}_resetTabRenderFlags(e){const t={};return t[n.isUndefined(e.currentTab)?this.state.currentTab:e.currentTab]=!0,t[q.HubTab.Recents]=!0,t}_onNavigationStateStoreHubTabChange(){if(this.isComponentMounted()){const e=X.default.getCurrentHubTab();O.log(E.LogTraceArea.MobileHub,"MobileHub._onNavigationStateStoreHubTabChange "+e),this._swipableTabView&&e!==this.state.currentTab&&this._swipableTabView.goToTab(this._convertTabEnumToIndex(e),!1)}N.default.disableTooltip(M.EngagementTooltipType.Profile)}_updateHeaderTab(e,t=!1){if(this._skipUpdatingHeaderTab)return;const i=!!this._hubHeaderPanel&&this._hubHeaderPanel.updateHubTab(e);let n=1;this.state.mobileHubFABEnabled||(e===q.HubTab.Recents?n=this._conversationsScrolledToTop?0:1:e===q.HubTab.Calls&&(n=this._callsScrolledToTop?0:1)),this._shadowOpacityValue.setValue(n),t&&i&&this._isPresentedInTabletLeftNav()&&this._focusCenterControl()}_getContactsTabConfig(){return this.state.tabRenderFlags[q.HubTab.People]?{renderContent:()=>l.createElement(A.default,{ref:this._onContactsPanelV2Ref,hideHeader:!0,hideSearchBar:this.state.mobileHubFABEnabled&&!this.state.modernizeMobileTabHeader,bottomPadding:80,isHidden:this.state.currentTab!==q.HubTab.People||!this.state.onTopOfNavStack,onTabCountUpdated:this._onContactsTabCountUpdated})}:this._placeholderTabConfig()}_getCallsTabConfig(){return this.state.tabRenderFlags[q.HubTab.Calls]?{renderContent:this._renderCallsTabContent}:this._placeholderTabConfig()}_getNotificationsTabConfig(){return this.state.tabRenderFlags[q.HubTab.Notifications]?{renderContent:()=>l.createElement(d.default,{ref:this._onNotificationsPanelRef,hideHeader:!0,onClose:this._goToRecent})}:this._placeholderTabConfig()}_getWrappedRecentsTabConfig(){if(!this.state.tabRenderFlags[q.HubTab.Recents])return this._placeholderTabConfig();const e={wrapperStyle:this._wrapperStyle(),bottomPadding:80,hideSearchBar:this.state.mobileHubFABEnabled&&!this.state.modernizeMobileTabHeader,params:{}};return this._getRecentsTabConfig(e)}_updateStatusBarForTab(e,t=!0){const{defaultStatusBarTheme:i,defaultStatusBarBackgroundColor:n}=_e.themeColors(this._getContext(),this.props.route.params.colorThemeOverride),o=this._getStatusBarStyle(i,n,t);this._updateStatusBarStyle(o)}_getStatusBarStyle(e,t,i=!0){return se.default.mergeStyles([se.default.createHiddenStyle(!1),se.default.createBarStyle(e),se.default.createBackgroundColorStyle(t,i)])}_renderFABContent(){if(this.state.currentTab===q.HubTab.Notifications)return;const e=D.default.actionButtonForHubTab(this.state.currentTab,this.state.disableHighBandwidthOperations,this.state.modernizeMobileHubFabs,this.state.enableIOSCallsFABExperiment),t=D.default.secondaryActionButtonForHubTab(this.state.currentTab,this.state.disableHighBandwidthOperations,this.state.modernizeMobileHubFabs),i=Pe.stackedFab,n=e&&e.ctaExperimentalUI,o=e?this._renderFAB({type:n?ve.Experimental:ve.Primary,icon:e.icon,title:e.title,disabled:e.disabled,onPress:this._onPrimaryFABPress},i):void 0,s=t?this._renderFAB({type:ve.Secondary,icon:t.icon,title:t.title,disabled:t.disabled,onPress:this._onSecondaryFABPress},i):void 0;return l.createElement(l.Animated.View,{style:[Pe.fab,this._fabOpacityStyle],ignorePointerEvents:!0},s,o)}_renderFAB(e,t){this._isCTAExperiment()&&e.type===ve.Secondary&&U.default.registerOpenAction(this._skypeToPhoneCardExperimentSettings);const i=_e.currentTheme(this._getContext(),this.props.route.params.colorThemeOverride);return l.createElement(c.default,{ref:e.type===ve.Primary?this._onFabIconRef:this._onSecondaryFabIconRef,style:t,size:c.ActionButtonSize.FAB,icon:e.icon,iconSize:ue.IconSize.size24,iconColor:i!==he.Theme.AccessibleDark?ce.Color.white:void 0,accessibilityLabel:e.title,reverseGradientColor:this.state.modernizeMobileHubFabs,disabled:e.disabled,disabledOpacity:e.disabled?1:void 0,onPress:e.onPress})}_intFABPress(e,t,i,n){if(t&&t.onPressCallback){const o={show:(t,i)=>{le.default.showWithActionMenuConfig({options:t,callback:i,maintainAnchor:!0,rootViewId:this._getRootViewId(),invokingEvent:e})}};t.onPressCallback(n,e,o,i)}}_wrapperStyle(){return[Pe.tabWrapper]}_setAnimatedValues(e,t){if(this._wrappedContentTransitionView){const i=l.Styles.createAnimatedViewStyle({opacity:e.interpolate({inputRange:[t-1,t,t+.5,t+1],outputRange:[1,1,0,0]}),transform:[{translateY:e.interpolate({inputRange:[t-1,t,t+1],outputRange:[0,0,-100]})}]});this._wrappedContentTransitionView.setAnimatedStyle(i)}}_clearAnimatedValues(){this._wrappedContentTransitionView&&this._wrappedContentTransitionView.setAnimatedStyle(this._resetSearchTransitionStyle)}_scrollsToTop(){return!!this.state.onTopOfNavStack&&!1}_topScrollInset(){return 0}_totalTabs(){return 4}_additionalContainerStyles(){0}_handleAppStateChange(e){if(!this.isComponentMounted())return;O.log(E.LogTraceArea.MobileHub,"MobileHub._handleAppStateChange, reset tab render flags");const t=this._resetTabRenderFlags(this.state);(0,F.default)(this.state.tabRenderFlags,t)||this.setState({tabRenderFlags:t})}_generateIndexToTabEnumMap(){let e=n.clone(this._getTabs(this.state));return e=this._getContext().isRTL?n.reverse(e):e,T.default.generateIndexToTabEnumMap(e)}_generateTabEnumToIndexMap(){let e=n.clone(this._getTabs(this.state));return e=this._getContext().isRTL?n.reverse(e):e,T.default.generateTabEnumToIndexMap(e)}_convertIndexToTabEnum(e){return this._indexToTabEnumMap||(this._indexToTabEnumMap=this._generateIndexToTabEnumMap()),this._indexToTabEnumMap[e]}_convertTabEnumToIndex(e){this._tabEnumToIndexMap||(this._tabEnumToIndexMap=this._generateTabEnumToIndexMap());const t=n.isUndefined(e)?q.HubTab.Recents:e;return this._tabEnumToIndexMap[t]}_isCTAExperiment(){return this.state.currentTab===q.HubTab.Calls}_pauseWhenNotVisible(){return!0}_componentId(){return"MobileHub"}}t.default=Ae},58144:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(96074),s=i(3056),a=i(46096),r=i(36237),l=i(97073),c=i(10706);class d extends o.BaseNavigationView{constructor(){super(...arguments),this._goBack=e=>(r.log(a.LogTraceArea.MobileHub,"MobileHubWrapper._goBack: causeId: "+e),!1)}_buildState(e,t){return{shouldSkipRendering:l.default.shouldSkipMobileHub()}}render(){return this.state.shouldSkipRendering?null:n.createElement(s.default,{goBack:this._goBack},n.createElement(c.default,Object.assign({},this.props)))}_componentId(){return"MobileHubWrapper"}}t.default=d},78087:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96074),o=i(56879);t.default=(0,n.forNavigation)(o.default)},17267:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderTemplateId=void 0;const n=i(96486),o=i(46809),s=i(34828),a=i(16778),r=i(96074),l=i(52754),c=i(41444),d=i(15877),u=i(74606),g=i(33754),h=i(4735),p=i(30124),m=i(90631),S=i(11828),C=i(80837),f=i(68747),y=i(19675),_=i(53374),v=i(97634),b=(0,d.lazyProperties)({container:()=>C.default.flexOne,title:()=>a.Styles.createTextStyle({paddingTop:30,paddingBottom:10,marginHorizontal:20}),row:()=>a.Styles.createViewStyle({flexDirection:"row",alignItems:"center",alignSelf:"stretch",justifyContent:"flex-end",paddingHorizontal:20,paddingVertical:10}),searchButtonContainer:()=>C.default.flexOne,inputContainer:()=>a.Styles.createViewStyle({alignSelf:"stretch"}),resetButton:()=>a.Styles.createViewStyle({alignSelf:"center",borderWidth:1,borderRadius:5,paddingHorizontal:5,marginRight:15}),featureName:()=>a.Styles.createTextStyle({flex:1}),resetAllButtonStyle:()=>a.Styles.createTextStyle({width:60}),backgroundStyleResetTextStyles:()=>a.Styles.createTextStyle({}),backgroundStyleResetButtonStyles:()=>a.Styles.createButtonStyle({})});t.HeaderTemplateId="header";const T="boolean";class P extends r.BaseNavigationView{constructor(){super(...arguments),this._allowReset=!0,this._includeNumbers=!1,this._renderItem=e=>{if(e.template===t.HeaderTemplateId)return this._renderSectionTitle(e.categoryName);const{secondaryTextColorStyle:i,primaryTextColorStyle:n,rowHoverViewStyle:o}=v.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride),s=[v.isUsingDarkTheme(this._getContext(),this.props.route.params.colorThemeOverride)?i:n],r=o,l=e.onReset?a.createElement(a.Button,{style:[b.resetButton,b.backgroundStyleResetButtonStyles],onPress:e.onReset,title:"Reset"},a.createElement(a.Text,{style:b.backgroundStyleResetTextStyles},"Reset")):void 0,c=e.template===T?a.createElement(u.default,{disable:!e.onPress,falseLabel:g.getString("ToggleSwitch.SelectionToggleOff"),trueLabel:g.getString("ToggleSwitch.SelectionToggleOn"),isOn:!!e.featureValue}):a.createElement(a.Text,null,e.featureValue);return a.createElement(a.View,{style:[b.row,e.key===this.state.itemKeyHovering?r:void 0],onPress:e.onPress,onMouseEnter:e.onHoverStart,onMouseLeave:e.onHoverEnd},a.createElement(a.View,{style:b.featureName},a.createElement(a.Text,{style:s},e.featureName)),l,c)},this._searchInputRefCallback=e=>{this._searchInputRef=e||void 0},this._onInputChange=e=>{this.setState({inputText:e})},this._onPressClose=()=>{const e=_.default.newCauseId();h.default.navigateBack(e,this._getContext())}}_buildState(e,t){const i=this._getSubscribedState(),n={listItems:this._generateConfigItems(i),overridenListItems:this._generateOverrideItems(i),isUsingStackNavigationContext:p.default.isUsingStackNavigationContext()};return t&&(n.inputText=""),n}_generateListOfItemsRecursive(e,t,i,o,s){const a=i.join("|"),r="boolean"==typeof o,l="number"==typeof o,c=this._allowReset&&(void 0===s||void 0!==n.get(s,[t,a]));if(n.isObject(o))n.each(o,((n,o)=>{const a=i.concat(o);this._generateListOfItemsRecursive(e,t,a,n,s)}));else if(r||this._includeNumbers&&l||c){const n=t+"|"+a,s=i.join(".");e.push({height:50,key:n,featureName:s,featureValue:o,categoryName:t,template:r?T:"number",onPress:r?this._onListItemClickBuilder(t,i,!o):void 0,onHoverStart:()=>this._onHover(n),onHoverEnd:()=>this._onHover(void 0),onReset:c?this._onResetPressBuilder(t,i):void 0})}}_createHeaderItem(e){return{key:e,height:60,categoryName:e,template:t.HeaderTemplateId,featureName:""}}_onHover(e){this.setState({itemKeyHovering:e})}_renderSectionTitle(e){return a.createElement(y.Subtitle,{style:b.title},e)}_renderSearchHeader(){let e;return e=this.state.isUsingStackNavigationContext?a.createElement(l.default,{ref:this._searchInputRefCallback,initialValue:1,showButtonWhenInactive:!0,placeholderText:g.getString("SearchInputControl.PlaceHolderTextShort"),rawSearchQuery:this.state.inputText,onInputTextChange:this._onInputChange}):a.createElement(a.View,{style:b.searchButtonContainer},a.createElement(c.default,{ref:this._searchInputRefCallback,showButtonWhenInactive:!0,placeholderText:g.getString("SearchInputControl.PlaceHolderTextShort"),rawSearchQuery:this.state.inputText,autoFocus:!0,forceInputValueUpdate:!0,onInputTextChange:this._onInputChange})),e}focus(){this.isComponentMounted()&&this._searchInputRef&&this._searchInputRef.focusInput()}_renderHeader(){const e={icon:S.SkypeIcon.NavigationBack,title:g.getString("Global.CloseButtonTitle"),onPress:this._onPressClose},t={title:"Reset all",onPress:()=>this._onResetAll(),text:"Reset all",buttonStyle:b.resetAllButtonStyle};return a.createElement(m.SimplePanelHeader,{panelName:this._getPanelName(),leftButton:e,rightButtons:this.state.overridenListItems.length?t:void 0})}_getFilteredListItems(e){let i=this.state.inputText.toLowerCase();if(!i)return e;let o=n.filter(e,(e=>n.includes(e.featureName.toLowerCase(),i)||e.template===t.HeaderTemplateId||n.includes(e.categoryName.toLowerCase(),i)));return n.filter(o,(e=>e.template!==t.HeaderTemplateId||n.some(o,(i=>i.categoryName===e.categoryName&&i.template!==t.HeaderTemplateId))))}_getAllTabConfig(){return{renderTabTitle:()=>a.createElement(f.default,{title:g.getString("DesktopSearchResultsFilter.All")}),renderContent:()=>a.createElement(s.VirtualListView,{itemList:this._getFilteredListItems(this.state.listItems),renderItem:this._renderItem})}}_getOverridenTabConfig(){return{renderTabTitle:()=>a.createElement(f.default,{title:"Overridden"}),renderContent:()=>a.createElement(a.View,{style:b.container},a.createElement(s.VirtualListView,{itemList:this._getFilteredListItems(this.state.overridenListItems),renderItem:this._renderItem}))}}render(){let e=this._getAllTabConfig(),t=[e,this._getOverridenTabConfig()];const{primaryBackgroundColorStyle:i}=v.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return a.createElement(a.View,{style:[b.container,i]},this._renderHeader(),a.createElement(a.View,{style:b.container},a.createElement(a.View,{style:b.inputContainer},this._renderSearchHeader()),this.state.overridenListItems.length?a.createElement(o.default,{tabConfigs:t,tabHeight:40,isRTL:a.International.isRTL()}):e.renderContent()))}}t.default=P},73709:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(31844),o=i(96486),s=i(34828),a=i(16778),r=i(87720),l=i(89391),c=i(67930),d=i(94224),u=i(7095),g=i(47447),h=(i(11930),i(47204)),p=i(98278),m=i(87134),S=i(10167),C=i(46096),f=i(39285),y=i(10117),_=i(33754),v=i(15877),b=i(51072),T=i(46929),P=i(4735),A=i(21936),k=i(72136),I=i(51070),w=i(83181),N=i(85683),M=i(90631),E=i(81760),x=i(40363),L=i(11828),R=i(59433),D=i(79669),B=i(80837),O=i(19675),F=i(61596),V=i(24576),U=i(97634),H=(0,v.lazyProperties)({panel:()=>a.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),settingsBlockContainer:()=>a.Styles.createViewStyle({alignSelf:"stretch",paddingHorizontal:10,overflow:"visible",flexGrow:1}),settingsBlockContainerDesktop:()=>a.Styles.createViewStyle({paddingHorizontal:20}),controlRowNoDivider:()=>a.Styles.createViewStyle({marginVertical:4,flexDirection:"row",alignItems:"center",justifyContent:"space-between",minHeight:60}),label:()=>a.Styles.createTextStyle({flex:1,paddingRight:10}),caption:()=>a.Styles.createTextStyle({marginTop:4,marginBottom:12}),title:()=>a.Styles.createTextStyle({paddingTop:30,paddingBottom:10}),settingsContainer:()=>a.Styles.createViewStyle({paddingBottom:10,paddingTop:2,flex:1}),countryPickerButton:()=>a.Styles.createButtonStyle({flexDirection:"row",alignItems:"stretch",marginLeft:10}),pickerText:()=>a.Styles.createTextStyle({maxWidth:250}),pickerChevron:()=>a.Styles.createViewStyle({marginLeft:4,marginTop:2}),countrySelectorPickerContainer:()=>a.Styles.createViewStyle({flexDirection:"row",minHeight:30,alignItems:"center",alignSelf:"stretch"}),link:()=>a.Styles.createTextStyle({color:E.Color.blue,textDecorationLine:"underline"}),warningLabel:()=>a.Styles.createTextStyle({paddingBottom:10}),emergencyCallingSection:()=>a.Styles.createViewStyle({paddingTop:4,flex:1}),countrySelectorPopupContainer:()=>a.Styles.createViewStyle({height:350,width:300}),menuItemContainer:()=>a.Styles.createButtonStyle({minHeight:40,alignItems:"center",justifyContent:"space-between",flexDirection:"row",borderLeftWidth:2,borderStyle:"solid",borderColor:E.Color.transparent,height:40}),countryListItemName:()=>a.Styles.createTextStyle({flexDirection:"row",flex:1}),countryListItemCode:()=>a.Styles.createTextStyle({flex:0,textAlign:"right"}),menuItemText:()=>a.Styles.createTextStyle({marginHorizontal:20})}),W=e=>({key:e.country,height:40,template:G.COUNTRY}),z="countrySelectorPopup",G={COUNTRY:"dcs_country"},K=[{x:0,y:0,label:_.getString("AdvancedCallingSettingsPanel.NdiWatermarkLocationTopLeft")},{x:.5,y:0,label:_.getString("AdvancedCallingSettingsPanel.NdiWatermarkLocationTopMiddle")},{x:1,y:0,label:_.getString("AdvancedCallingSettingsPanel.NdiWatermarkLocationTopRight")},{x:0,y:1,label:_.getString("AdvancedCallingSettingsPanel.NdiWatermarkLocationBottomLeft")},{x:.5,y:1,label:_.getString("AdvancedCallingSettingsPanel.NdiWatermarkLocationBottomMiddle")},{x:1,y:1,label:_.getString("AdvancedCallingSettingsPanel.NdiWatermarkLocationBottomRight")}];class j extends c.BaseNavigationViewPresentedInModal{constructor(e){super(e),this._onWatermarkLocationSelected=e=>{A.default.setWatermarkLocation(e)},this._onLeanMoreNdiPress=()=>{a.Linking.openUrl(this.state.learnMoreNdiLink)},this._onToggleIsNdiEnabled=(e,t)=>{A.default.setNdiEnabled(t),this.setState({isNdiEnabled:t})},this._onCountryPickerButtonRef=e=>{this._countryPickerButton=e||void 0},this._onPressTermsOfServiceHandler=()=>{P.default.navigateToSsoWebFlow(this.state.termsOfServiceGoLink,"userInfo.emergencyCalling",_.getString("TermsOfServiceWebFlow.Title"),this._getRootViewId())},this._onCountryPickerClick=()=>{const e={getAnchor:()=>this._countryPickerButton,renderPopup:(e,t,i,n)=>{const{popoverBackgroundColor:o,popupBorderColor:r}=U.themeColors(this._getContext(),this.props.route.params.colorThemeOverride);return a.createElement(D.default,{anchorPosition:e,anchorOffset:t,popupWidth:i,popupHeight:n,fillColor:o,strokeColor:U.isUsingDarkTheme(this._getContext(),this.props.route.params.colorThemeOverride)?r:void 0,skipPopupAutoFocus:!0},a.createElement(a.View,{style:H.countrySelectorPopupContainer},a.createElement(a.View,{style:B.default.flexOne},a.createElement(s.VirtualListView,{itemList:this._getCountriesListItems(),renderItem:this._renderCountryListItem,animateChanges:!1,keyboardShouldPersistTaps:!0,accessibilityLabel:_.getString("PSTNCountryList.CountryList")}))))},positionPriorities:["bottom","top"],dismissIfShown:!0,rootViewId:this._getRootViewId()};h.default.showPopup(e,z)},this._onCountrySelected=e=>{T.default.setEmergencyCallDefaultCountry(e),this.setState({emergencyCallDefaultCountry:e}),this.setState({isEmergencyCallEligibleCountry:this._isEmergencyCallEligibleCountry(e)}),h.default.dismissPopup(z,this._getRootViewId()),this._countryPickerButton&&this._countryPickerButton.requestFocus()},this._renderCountryListItem=e=>e.template===G.COUNTRY?this._renderCountryItem(e):[],this._renderCountryItem=e=>{const t=this.state.countries[e.key];return a.createElement(q,{onSelect:this._onCountrySelected,country:t})},this._isEmergencyCallEligibleCountry=e=>{const t=l.default.getS4LEntitlementFeatures().SCE.Dialpad.EmergencyCall.allowedCountries;return!!e&&t.indexOf(e)>-1},this._onTogglePluginlessCallingStackEnabled=(e,t)=>{S.default.changeAppSettings({usePluginlessCallingStack:t})};const t=x.default.isRTL()?"desc":"asc";this._watermarkLocationList=o.orderBy(K,["y","x"],["asc",t]).map((e=>({value:e.x.toString()+","+e.y.toString(),label:e.label})))}static getHeaderText(){return _.getString("AdvancedCallingSettingsPanel.HeaderText")}_buildState(e,t){var i;const n=l.default.getS4LCMCFeatures(),o=T.default.getEmergencyCallDefaultCountry(),s=S.default.getAppSettings(),a={showNdiSettings:n.enableNDISetting&&d.default.NdiHookupService.isSupported(),isNdiEnabled:A.default.isNdiEnabled(),watermarkLocation:A.default.getWatermarkLocation(),isInACall:w.default.isInCall(),learnMoreNdiLink:l.default.getS4LCMCFeaturesNoSubscription().learnMoreNDILink,broadcastTermsOfServiceUrl:l.default.getS4LCMCFeaturesNoSubscription().broadcastTermsOfServiceUrl,safeAreaHorizontalPaddingStyle:this._getContext().isPresentedInDesktopSubview?void 0:I.default.horizontalPaddingStyle(p.HorizontalInsetZero),countries:k.default.getCountries(),emergencyCallDefaultCountry:o,termsOfServiceGoLink:l.default.getConfigSettings().mySettings.termsOfServiceGoLink,isEmergencyCallEligibleCountry:this._isEmergencyCallEligibleCountry(o),showPluginlessCallingStackOption:l.default.getS4LNativePlatformsEcsConfig().showPluginlessCallingStackOption,isPluginlessCallingStackEnabled:null!==(i=null==s?void 0:s.usePluginlessCallingStack)&&void 0!==i&&i};return t&&(a.isEmergencyCallSettingSupported=!1),a}componentDidMount(){super.componentDidMount(),n.default.supportsNativeEmergencyCalling().catch((()=>!1)).then((e=>{this.setState({isEmergencyCallSettingSupported:!e})}))}render(){const e=[H.settingsBlockContainer];this._getContext().isPresentedInGenericDesktopModal&&e.push(H.settingsBlockContainerDesktop),this.state.safeAreaHorizontalPaddingStyle&&e.push(this.state.safeAreaHorizontalPaddingStyle);const t=this.props.route.params.isAloneInNavStack&&this._getContext().isPresentedInSplitView?void 0:{closeButtonType:this.props.route.params.isAloneInNavStack?M.CloseButtonType.Close:M.CloseButtonType.Back},i=a.createElement(M.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:t}),n=_.getString("AdvancedCallingSettingsPanel.ContentCreatorsSectionTitleUpperLabel"),o=_.getString("AdvancedCallingSettingsPanel.EmergencyCallWarningTitleUpperLabel"),s=this.state.showNdiSettings?a.createElement(N.SectionTitle,{title:n,titleStyles:H.title}):void 0,r=x.default.getPlatformType()!==C.PlatformType.iOS&&x.default.getPlatformType()!==C.PlatformType.Android?a.createElement(N.SectionTitle,{title:o,titleStyles:H.title}):void 0,{primaryBackgroundColorStyle:l}=U.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return a.createElement(a.View,{style:[H.panel,l]},i,a.createElement(a.ScrollView,{style:B.default.flexOne},a.createElement(a.View,{style:e},this._getAutoAnswerSetting(),s,this._getNdiSetting(),r,this._getEmergencyCallSettings(),this._getPluginlessCallingStackSetting())))}_getHeaderText(e){return j.getHeaderText()}_wrapLinkWithAccessibilityView(e,t){return e}_getAutoAnswerSetting(){if(g.CallingCapabilities.autoAnswerSupported())return a.createElement(a.View,null,a.createElement(N.SectionTitle,{title:_.getString("AdvancedCallingSettingsPanel.AutomaticCallAnswerSectionTitleUpperLabel"),titleStyles:H.title}),(0,u.getAutoAnswerSettings)(this.props))}_getNdiSwitch(){const e=_.getString("AdvancedCallingSettingsPanel.EnableNdiButtonLabel"),t=(0,u.renderLabels)(e,void 0,!1);return a.createElement(r.default,{key:"ndiEnabled",style:H.controlRowNoDivider,isOn:this.state.isNdiEnabled,accessibilityLabel:e,onChange:this._onToggleIsNdiEnabled},t)}_getNdiExplanation(){return a.createElement(O.BodyText,{key:"ndiExplanation",style:H.label},_.getString("AdvancedCallingSettingsPanel.EnableNdiExplanation"))}_getNdiLink(){const e=this.state.learnMoreNdiLink,t=_.getString("AdvancedCallingSettingsPanel.EnableNdiLinkTitle"),i=a.createElement(O.BodyText,{key:"ndiLink",style:H.label},a.createElement(R.default,{url:"#",title:e,style:B.default.pointerCursor,blue:!0,onPress:this._onLeanMoreNdiPress},t));return this._wrapLinkWithAccessibilityView(i,t)}_getRegisteredTrademarkExplanation(){return a.createElement(O.Caption,{key:"ndiRegisteredTrademarkExplanation",style:[H.label,H.caption]},_.getString("AdvancedCallingSettingsPanel.NdiRegisteredTrademarkExplanation"))}_getNdiSetting(){if(this.state.showNdiSettings)return a.createElement(a.View,null,this._getNdiSwitch(),this._getNdiExplanation(),this._getNdiLink(),this._getRegisteredTrademarkExplanation(),this._getWatermarkLocationPicker(),a.createElement(m.default,{marginTop:8}))}_getWatermarkLocationPicker(){if(this.state.isNdiEnabled)return a.createElement(F.default,{title:_.getString("AdvancedCallingSettingsPanel.NdiSkypeWatermarkLocationLabel"),disabled:!this.state.isNdiEnabled,items:this._watermarkLocationList,onValueChange:this._onWatermarkLocationSelected,selectedValue:this.state.watermarkLocation.toString()})}_getEmergencyCallSettings(){if(!this.state.isEmergencyCallSettingSupported)return;const e=this.state.emergencyCallDefaultCountry?a.createElement(O.RowTitle,{accessibilityHidden:!0},_.getString("UserSettingsPanel.EmergencyCallDefaultLocationLabel")):void 0,t=a.createElement(a.View,{style:H.countrySelectorPickerContainer},e,a.createElement(a.Button,{ref:this._onCountryPickerButtonRef,style:[H.countryPickerButton,B.default.noncollapsibleView],accessibilityLabel:this._getSelectedCountryAccessibilityLabel(),accessibilityTraits:[a.Types.AccessibilityTrait.Button,a.Types.AccessibilityTrait.HasPopup],onPress:this._onCountryPickerClick},a.createElement(f.default,{style:H.countrySelectorPickerContainer},a.createElement(O.BodyText,{bold:!0,style:H.pickerText},this._getSelectedItemLabel()),a.createElement(y.default,{icon:L.SkypeIcon.DownChevron,size:L.IconSize.size15,color:E.Color.gray300,style:H.pickerChevron}))));let i;return i=this.state.emergencyCallDefaultCountry?this.state.isEmergencyCallEligibleCountry?a.createElement(a.View,{style:B.default.flexOne},a.createElement(O.RowTitle,{key:"EmergencyCallingLimitedLabel",style:H.warningLabel,textThemeColor:O.TextThemeColor.Destructive},_.getString("PSTNDialerPanel.EmergencyCallingLimitedLabel")),a.createElement(O.BodyText,{key:"EmergencyCallWarning",style:H.label},_.getString("PstnUtils.EmergencyCallWarning"),"",_.getParts("UserSettingsPanel.TermsOfServiceWarning",{termsOfServiceLink:a.createElement(a.Text,{key:"fairUsagePolicyLinkId",style:H.link,onPress:this._onPressTermsOfServiceHandler},_.getString("IntegrationConsentModal.TermsOfServiceLabel"))})),a.createElement(O.BodyText,{key:"AlternativeAccessWarning",style:H.label},_.getString("UserSettingsPanel.AlternativeAccessWarning")),t):a.createElement(a.View,{style:B.default.flexOne},a.createElement(O.RowTitle,{key:"EmergencyCallingNoCallingLabel",style:H.warningLabel,textThemeColor:O.TextThemeColor.Destructive},_.getString("PSTNDialerPanel.EmergencyCallingNoCallingLabel")),a.createElement(O.BodyText,{key:"EmergencyCallingLabel",style:H.label},_.getString("UserSettingsPanel.EmergencyCallingLabel")),t):a.createElement(a.View,{style:B.default.flexOne},a.createElement(O.BodyText,{key:"EmergencyCallCheckDefaultLocationLabel",style:H.label},_.getString("UserSettingsPanel.EmergencyCallCheckDefaultLocationLabel")),t),a.createElement(a.View,{style:H.emergencyCallingSection},a.createElement(a.View,{style:H.settingsContainer},a.createElement(a.View,{accessibilityTraits:a.Types.AccessibilityTrait.Text,importantForAccessibility:a.Types.ImportantForAccessibility.Yes},i)),a.createElement(m.default,{key:"emergencyCallSettingsDivider"}))}_getSelectedCountryAccessibilityLabel(){if(this.state.emergencyCallDefaultCountry){const e=o.find(this.state.countries,(e=>e.country===this.state.emergencyCallDefaultCountry));return e&&_.getString("UserSettingsPanel.DefaultCountryAccessibilityLabel",{countryTitle:e.countryName})}return _.getString("UserSettingsPanel.SetDefaultCountryAccessibilityLabel")}_getSelectedItemLabel(){if(this.state.emergencyCallDefaultCountry){const e=o.find(this.state.countries,(e=>e.country===this.state.emergencyCallDefaultCountry));return e&&e.countryName}return _.getString("UserSettingsPanel.SetEmergencyCallDefaultLocationLabel")}_getCountriesListItems(){return o.map(this.state.countries,W)}_getPluginlessCallingStackSetting(){if(!this.state.showPluginlessCallingStackOption)return;const e=_.getString("AdvancedCallingSettingsPanel.EnablePluginlessCallingStackLabel"),t=_.getString("AdvancedCallingSettingsPanel.EnablePluginlessCallingStackExplanation"),i=(0,u.renderLabels)(e,t,!1);return a.createElement(a.View,null,a.createElement(N.SectionTitle,{title:_.getString("AdvancedCallingSettingsPanel.PluginlessCallingStackSectionTitleUpperLabel"),titleStyles:H.title}),a.createElement(r.default,{key:"pluginlessCallingStackEnabled",style:H.controlRowNoDivider,isOn:this.state.isPluginlessCallingStackEnabled,accessibilityLabel:e,onChange:this._onTogglePluginlessCallingStackEnabled},i),a.createElement(m.default,{marginTop:8}))}}t.default=j;class q extends V.default{constructor(){super(...arguments),this._onPress=()=>{this.props.onSelect(this.props.country.country)}}render(){const e=[H.menuItemText,this._themeStyles.secondaryTextColorStyle];return a.createElement(b.default.Button,{style:H.menuItemContainer,onPress:this._onPress,accessibilityTraits:a.Types.AccessibilityTrait.Button,accessibilityLabel:`${this.props.country.countryName} +${this.props.country.countryCode}`,importantForAccessibility:a.Types.ImportantForAccessibility.Yes},a.createElement(O.BodyText,{style:[e,H.countryListItemName],numberOfLines:1},this.props.country.countryName),a.createElement(O.BodyText,{style:[e,H.countryListItemCode]},"+",this.props.country.countryCode))}}},65427:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96074),o=i(24521);t.default=(0,n.forNavigation)(o.default)},51013:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(1706),a=i(18161),r=i(71830),l=i(98278),c=i(62602),d=i(984),u=i(77381),g=i(52262),h=i(46096),p=i(36237),m=i(33754),S=i(15854),C=i(4735),f=i(4057),y=i(22222),_=i(81760),v=i(53374);class b extends u.default{constructor(){super(...arguments),this._onKeyPress=e=>c.default.maybeHandleKeyPress(e,(()=>this._onPressUnblockButton(e))),this._onPressUnblockButton=e=>{e.stopPropagation(),this.setState({isUnblocking:!0}),d.default.unblockContact(this.props.userMri).fail((()=>{this.isComponentMounted()&&this.setState({isUnblocking:!1})})).finally((()=>{let e=m.getString("SkypeUserListItem.DisplayNameLabel",{displayName:this.state.displayName});e+=m.getString("UserSettingsPanel.UnblockButtonTitle"),o.Accessibility.announceForAccessibility(e)})),this.props.onPress&&this.props.onPress(e)}}_buildState(e,t){const i=g.default.getDisplayableProfile(e.userMri);let n={displayName:i&&i.getDisplayName()};return t&&(n.isUnblocking=!1),n}render(){const e={backgroundColor:_.Color.gray100,textColor:_.Color.gray400,indicatorColor:_.Color.gray400};return o.createElement(y.default,{buttonStyle:l.SXButtonStyle.Custom,buttonSize:l.SXButtonSize.Small,title:m.getString("UserSettingsPanel.UnblockButtonTitle"),showActivityIndicator:this.state.isUnblocking,allowTextWrap:!0,onPress:this._onPressUnblockButton,buttonConfig:e,onKeyPress:this._onKeyPress})}}class T extends S.default{constructor(){super(...arguments),this._onPressRightButton=()=>{this._headerBackButtonRef&&this._headerBackButtonRef.requestFocus()}}_getUsersMris(){const e=a.getBlockedUsersOrConvOwners();return n.sortBy(e,(e=>{const t=g.default.getDisplayName(e);return t&&f.default.deburrLocaleLowerCase(t)}))}_onItemPress(e,t){const i=v.default.newCauseId();if(p.log(h.LogTraceArea.Navigation,"BlockedUsersListPanel._onItemPress, causeId: "+i),r.isAgent(t)){const e=s.default.getAgentDescriptionForMri(t);if(e&&e.isUnknown)return}C.default.showDetailsPanelWithParams({mri:t,rootViewId:this._getRootViewId(),causeId:i})}_getRightControlButton(e){return o.createElement(b,{userMri:e,onPress:this._onPressRightButton})}_getHeaderText(e){return T.getHeaderText()}static getHeaderText(){return m.getString("UserSettingsPanel.BlockedContactsTitle")}}t.default=T},92626:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(67930),a=i(10683),r=i(16625),l=i(72416),c=i(98278),d=i(37490),u=i(87134),g=i(46096),h=i(10117),p=i(36237),m=i(15877),S=i(33754),C=i(4735),f=i(30124),y=i(72136),_=i(22222),v=i(51070),b=i(90631),T=i(81760),P=i(11010),A=i(11828),k=i(59433),I=i(80837),w=i(19675),N=i(97634),M=i(53374),E=i(77524),x=(0,m.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),scrollViewContainer:()=>n.Styles.createViewStyle({flex:1}),innerContainer:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch",paddingBottom:15,paddingHorizontal:10,overflow:"visible",flexGrow:1}),innerContainerDesktop:()=>n.Styles.createViewStyle({paddingBottom:20,paddingHorizontal:20}),explanationText:()=>n.Styles.createTextStyle({marginTop:15,marginBottom:18,fontSize:15}),navigationButtonContainer:()=>n.Styles.createViewStyle({marginBottom:20}),navigationButton:()=>n.Styles.createButtonStyle({paddingTop:10,paddingBottom:14}),input:()=>n.Styles.createTextInputStyle({flex:1,paddingVertical:19,lineHeight:22,backgroundColor:T.Color.transparent}),inputRTL:()=>n.Styles.createTextInputStyle({textAlign:"right"}),inputNotice:()=>n.Styles.createViewStyle({marginTop:8}),errorText:()=>n.Styles.createTextStyle({marginTop:4,color:T.Color.red}),errorLabelText:()=>n.Styles.createTextStyle({color:T.Color.red}),errorDivider:()=>n.Styles.createViewStyle({backgroundColor:T.Color.red}),submitButton:()=>n.Styles.createButtonStyle({marginTop:30}),notice:()=>n.Styles.createViewStyle({flexDirection:"row",alignItems:"flex-start",marginTop:15}),noticeIcon:()=>n.Styles.createViewStyle({flex:0,marginTop:3,marginRight:10}),noticeText:()=>n.Styles.createTextStyle({flex:1,fontSize:14})});class L extends s.BaseNavigationViewPresentedInModal{constructor(e){super(e),this._preventPendingNumberReset=!1,this._onLeftButtonPress=()=>{this._close()},this._onCountryPressed=()=>{this.state.isUsingStackNavigationContext||(this._preventPendingNumberReset=!0);const e=this._getRootViewId(),t=r.default.getCallerIdCountryCodes();C.default.navigateToCountrySelectorWithFilter(e,this._onCountrySelected,t,!0,!0)},this._onCountrySelected=e=>{const{number:t}=this.state.callerIdPendingNumber;r.default.setCallerIdPendingNumberValues(e,t)},this._onChangeNumberText=e=>{const{countryCode:t}=this.state.callerIdPendingNumber;r.default.setCallerIdPendingNumberValues(t,e)},this._onChangeCodeText=e=>{const{countryCode:t,number:i}=this.state.callerIdPendingNumber;r.default.setCallerIdPendingNumberValues(t,i,e)},this._getNotice=e=>{const{secondaryTextColor:t}=N.themeColors(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:x.notice},n.createElement(h.default,{icon:A.SkypeIcon.Info,size:A.IconSize.size14,color:t,style:x.noticeIcon}),n.createElement(w.Caption,{style:x.noticeText},e))},this._getSkypeNumberButton=()=>{const e=S.getString("CallerIdSettingsPanel.AddSkypeNumberLabel"),t=S.getString("CallerIdSettingsPanel.SkypeNumberNoticeText");return n.createElement(n.View,null,n.createElement(_.default,{style:x.submitButton,buttonSize:c.SXButtonSize.Large,buttonStyle:c.SXButtonStyle.ColorStroke,title:e,allowTextWrap:!0,onPress:this._onSkypeNumberPress}),this._getNotice(t))},this._onAddPhoneNumberPress=()=>{r.default.addCallerIdPendingNumber(),p.track(new l.CallerIdSettingsEvent(l.CallerIdSettingsAction.AddNumberEnter,"mobile"))},this._onSkypeNumberPress=()=>{p.track(new l.CallerIdSettingsEvent(l.CallerIdSettingsAction.AddSkypeNumber,"skypein")),C.default.navigateToSkypeNumberNativePurchaseFlow(!1,this._getRootViewId())},this._onContinuePress=()=>{r.default.verifyCallerIdPendingNumber(),p.track(new l.CallerIdSettingsEvent(l.CallerIdSettingsAction.AddNumberVerify,"mobile"))},this._onResendPress=()=>{r.default.addCallerIdPendingNumber();const{codeAttempt:e}=this.state.callerIdPendingNumber;p.track(new l.CallerIdSettingsEvent(l.CallerIdSettingsAction.ResendCode,"mobile",e))},r.default.setCallerIdPendingNumberDefaultCountry()}static getHeaderText(){return S.getString("CallingSettingsPanel.CallerID")}_getHeaderText(e){return L.getHeaderText()}_buildState(e,t){const i=r.default.getCallerIdPendingNumber(),n=i.countryCode?y.default.getCountryByCode(i.countryCode):void 0,s=r.default.isAddingCallerIdPendingNumber()||r.default.isVerifyingCallerIdPendingNumber(),a=o.default.getS4LCommerceFeatures().callingSettingsPanel.callerId.upsellSkypeNumber,l=o.default.getS4LCommerceFeatures().skypeNumber.nativeBuyExperience.enabled;return{callerIdPendingNumber:i,selectedCountry:n,showActivityIndicator:s,isUsingStackNavigationContext:f.default.isUsingStackNavigationContext(),safeAreaHorizontalPaddingStyle:this._getContext().isPresentedInDesktopSubview?void 0:v.default.horizontalPaddingStyle(c.HorizontalInsetZero),upsellSkypeNumber:a,isNativeBuyExperienceEnabled:l}}componentDidMount(){super.componentDidMount(),p.track(new l.CallerIdSettingsEvent(l.CallerIdSettingsAction.AddNumberOpen))}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i);const{status:n}=t.callerIdPendingNumber,{status:o}=this.state.callerIdPendingNumber;n!==a.CallerIdPendingNumberStatus.Verified&&o===a.CallerIdPendingNumberStatus.Verified&&(this._close(),p.track(new l.CallerIdSettingsEvent(l.CallerIdSettingsAction.AddNumberSuccess)),p.track(new l.CallerIdSettingsEvent(l.CallerIdSettingsAction.SetPrimaryNumber,"mobile")))}componentWillUnmount(){super.componentWillUnmount(),this._preventPendingNumberReset||r.default.resetCallerIdPendingNumberNoTrigger()}render(){const e=this.props.route.params.isAloneInNavStack&&this._getContext().isPresentedInSplitView?void 0:{closeButtonType:this.props.route.params.isAloneInNavStack?b.CloseButtonType.Close:b.CloseButtonType.Back,onPress:this._onLeftButtonPress},t=n.createElement(b.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:e}),i=[x.innerContainer];this._getContext().isPresentedInGenericDesktopModal&&i.push(x.innerContainerDesktop),this.state.safeAreaHorizontalPaddingStyle&&i.push(this.state.safeAreaHorizontalPaddingStyle);const{primaryBackgroundColorStyle:o}=N.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:[x.panel,o]},t,n.createElement(n.View,{style:x.scrollViewContainer},n.createElement(n.ScrollView,{style:I.default.flexOne,keyboardShouldPersistTaps:!0},n.createElement(n.View,{style:i},this._getExplanationSection(),this._getCountrySection(),this._getNumberSection(),this._getCodeSection(),this._getSubmitButtonSection()))))}_close(){const e=M.default.newCauseId();p.log(g.LogTraceArea.Navigation,"CallerIdNumberPanel._close, causeId: "+e),d.dismissAll(),C.default.goBack(e,this._getContext())}_getExplanationSection(){const e=this._getExplanationText();return n.createElement(w.Caption,{style:x.explanationText,textThemeColor:w.TextThemeColor.Primary},e)}_getExplanationText(){if(this.state.callerIdPendingNumber.status===a.CallerIdPendingNumberStatus.New)return S.getString("CallerIdSettingsPanel.AddNumberExplanation");const{numberFull:e,codeAttempt:t=0}=this.state.callerIdPendingNumber,i={number:"+"+e};return t>1?S.getString("CallerIdSettingsPanel.EnterAnotherCodeExplanation",i):S.getString("CallerIdSettingsPanel.EnterCodeExplanation",i)}_getCountrySection(){if(this.state.callerIdPendingNumber.status!==a.CallerIdPendingNumberStatus.New)return;const e=this.state.selectedCountry,t=e?e.countryName+" (+"+e.countryCode+")":void 0,i=S.getString("CallerIdSettingsPanel.CountryLabel"),o=S.getString("CallerIdSettingsPanel.CountryPlaceholder");let s;const{searchPlaceholderTextColor:r}=N.themeColors(this._getContext(),this.props.route.params.colorThemeOverride);t||(s=n.Styles.createTextInputStyle({color:r},!1));let l=o;return t&&(l=t+", "+l),n.createElement(n.View,{style:x.navigationButtonContainer},n.createElement(w.Subtitle,{numberOfLines:1},i),n.createElement(E.WideButton,{label:t||o,labelStyle:s,accessibilityLabel:l,buttonStyles:x.navigationButton,onPressed:this._onCountryPressed}))}_getNumberSection(){if(this.state.callerIdPendingNumber.status!==a.CallerIdPendingNumberStatus.New)return;const{number:e="",error:t}=this.state.callerIdPendingNumber,i=S.getString("CallerIdSettingsPanel.PhoneNumberLabel"),n=S.getString("CallerIdSettingsPanel.PhoneNumberPlaceholder"),o=t===a.CallerIdPendingNumberError.InvalidNumber?S.getString("CallerIdSettingsPanel.InvalidPhoneNumberError"):void 0,s=S.getString("CallerIdSettingsPanel.ServiceNotificationsNotice");return this._getTextInput(e,i,n,!0,this._onChangeNumberText,o,s)}_getCodeSection(){if(this.state.callerIdPendingNumber.status===a.CallerIdPendingNumberStatus.New)return;const{code:e="",error:t}=this.state.callerIdPendingNumber,i=S.getString("CallerIdSettingsPanel.CodeLabel"),n=S.getString("CallerIdSettingsPanel.CodePlaceholder"),o=t===a.CallerIdPendingNumberError.InvalidCode?S.getString("CallerIdSettingsPanel.InvalidCodeError"):void 0;return this._getTextInput(e,i,n,!1,this._onChangeCodeText,o)}_getTextInput(e,t,i,o,s,a,r){const l=a?x.errorLabelText:void 0,c=a?x.errorDivider:void 0,{primaryTextColorStyle:d}=N.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride),g=[x.input,d,P.default.fontStyle.bodyBold];let h,p;this._getContext().isRTL&&g.push(x.inputRTL),a&&(h=n.createElement(w.Caption,{style:x.errorText},a)),r&&(p=n.createElement(w.Caption,{style:x.inputNotice,textThemeColor:w.TextThemeColor.Primary},r));const{searchPlaceholderTextColor:m}=N.themeColors(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,null,n.createElement(w.Subtitle,{style:l,numberOfLines:1},t),n.createElement(n.TextInput,{style:g,value:e,onChangeText:s,placeholder:i,placeholderTextColor:m,accessibilityLabel:i,keyboardType:o?"number-pad":"default",returnKeyType:"done",autoFocus:!0,blurOnSubmit:!0}),n.createElement(u.default,{style:c}),h,p)}_getSubmitButtonSection(){const{status:e,countryCode:t,number:i,code:o}=this.state.callerIdPendingNumber,s=e===a.CallerIdPendingNumberStatus.New?S.getString("CallerIdSettingsPanel.AddPhoneNumberLabel"):S.getString("CallerIdSettingsPanel.ContinueLabel"),r=this.state.showActivityIndicator||(e===a.CallerIdPendingNumberStatus.New?!t||!i:!o),l=e===a.CallerIdPendingNumberStatus.New?this._onAddPhoneNumberPress:this._onContinuePress;let d;if(e!==a.CallerIdPendingNumberStatus.New){const e=n.createElement(k.default,{key:"resendLink",url:"#",blue:!0,onPress:this._onResendPress},S.getString("CallerIdSettingsPanel.ResendLink")),t=S.getParts("CallerIdSettingsPanel.ResendCodeExplanation",{link:e});d=this._getNotice(t)}return n.createElement(n.View,null,n.createElement(_.default,{style:x.submitButton,buttonSize:c.SXButtonSize.Large,buttonStyle:c.SXButtonStyle.ColorFill,title:s,disabled:r,showActivityIndicator:this.state.showActivityIndicator,allowTextWrap:!0,onPress:l}),d,this.state.isNativeBuyExperienceEnabled&&this.state.upsellSkypeNumber&&e===a.CallerIdPendingNumberStatus.New&&this._getSkypeNumberButton())}}t.default=L},72619:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(67930),a=i(10683),r=i(35169),l=i(16625),c=i(72416),d=i(98278),u=i(87134),g=i(46096),h=i(36237),p=i(15877),m=i(33754),S=i(4735),C=i(7095),f=i(51070),y=i(90631),_=i(15415),v=i(81760),b=i(80837),T=i(19675),P=i(53374),A=i(77524),k=i(97634),I=(0,p.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),innerContainer:()=>n.Styles.createViewStyle({alignSelf:"stretch",paddingBottom:15,paddingHorizontal:10,overflow:"visible",flexGrow:1}),innerContainerDesktop:()=>n.Styles.createViewStyle({paddingBottom:20,paddingHorizontal:20}),activityIndicator:()=>n.Styles.createViewStyle({flex:1,alignItems:"center",justifyContent:"center"}),divider:()=>n.Styles.createViewStyle({marginTop:10}),toggle:()=>n.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:6}),explanationText:()=>n.Styles.createTextStyle({marginTop:18,marginBottom:12,fontSize:15}),navigationButton:()=>n.Styles.createButtonStyle({paddingTop:10,paddingBottom:14})});class w extends s.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._onCallerIdToggle=()=>{if(this.state.isCallerIdEnabled||0!==this.state.callerIdNumbersCount){l.default.toggleCallerId();const e=this.state.isCallerIdEnabled?c.CallerIdSettingsAction.Disable:c.CallerIdSettingsAction.Enable;h.track(new c.CallerIdSettingsEvent(e))}else this._navigateToCallerIdNumberPanel()},this._onAutoSelectToggle=()=>{l.default.toggleCallerIdAutoSelect();const e=this.state.isCallerIdAutoSelectEnabled?c.CallerIdSettingsAction.DisableAutoSelect:c.CallerIdSettingsAction.EnableAutoSelect;h.track(new c.CallerIdSettingsEvent(e))},this._onAddNumberPressed=()=>{this._navigateToCallerIdNumberPanel()}}static getHeaderText(){return m.getString("CallingSettingsPanel.CallerID")}_getHeaderText(e){return w.getHeaderText()}_buildState(e,t){return{callerIdDataStatus:l.default.getCallerIdDataStatus(),isCallerIdEnabled:l.default.isCallerIdEnabled(),isCallerIdAutoSelectEnabled:l.default.isCallerIdAutoSelectEnabled(),canEnableCallerIdAutoSelect:l.default.canEnableCallerIdAutoSelect(),callerIdNumbersCount:l.default.getCallerIdCapableNumbersCount(),safeAreaHorizontalPaddingStyle:this._getContext().isPresentedInDesktopSubview?void 0:f.default.horizontalPaddingStyle(d.HorizontalInsetZero)}}componentDidMount(){super.componentDidMount(),l.default.maybeRefreshCallerIdData(),l.default.maybeRefreshCallerIdCountryCodes(),h.track(new c.CallerIdSettingsEvent(c.CallerIdSettingsAction.Open))}render(){const e=this.props.route.params.isAloneInNavStack&&this._getContext().isPresentedInSplitView?void 0:{closeButtonType:this.props.route.params.isAloneInNavStack?y.CloseButtonType.Close:y.CloseButtonType.Back},t=n.createElement(y.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:e}),i=this._getActivityIndicator(),o=this._getContent(),{primaryBackgroundColorStyle:s}=k.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:[I.panel,s]},t,i||o)}_getActivityIndicator(){if(this.state.callerIdDataStatus===a.CallerIdDataStatus.Pending)return n.createElement(n.View,{style:I.activityIndicator},n.createElement(_.default,{size:d.SXActivityIndicatorSize.Medium,tintColor:v.Color.blue}))}_getContent(){if(this.state.callerIdDataStatus===a.CallerIdDataStatus.Pending)return;const e=[I.innerContainer];return this._getContext().isPresentedInGenericDesktopModal&&e.push(I.innerContainerDesktop),this.state.safeAreaHorizontalPaddingStyle&&e.push(this.state.safeAreaHorizontalPaddingStyle),n.createElement(n.ScrollView,{style:b.default.flexOne},n.createElement(n.View,{style:e},this._getCallerIdToggleSection(),this._getAutoSelectToggleSection(),this._getNumbersSection(),this._getAddNumberSection()))}_getCallerIdToggleSection(){const e=m.getString("CallerIdSettingsPanel.EnableCallerIdLabel"),t=this.state.isCallerIdEnabled?m.getString("CallerIdSettingsPanel.ChooseCallerIdNumberExplanation"):m.getString("CallerIdSettingsPanel.CallerIdExplanation");return n.createElement(n.View,null,n.createElement(o.default,{style:I.toggle,isOn:this.state.isCallerIdEnabled,accessibilityLabel:e,onChange:this._onCallerIdToggle},(0,C.renderLabels)(e)),n.createElement(u.default,{style:I.divider}),n.createElement(T.Caption,{style:I.explanationText,textThemeColor:T.TextThemeColor.Primary},t))}_getAutoSelectToggleSection(){if(!this.state.isCallerIdEnabled)return;const e=m.getString("CallerIdSettingsPanel.AutoSelectLabel"),t=m.getString("CallerIdSettingsPanel.AutoSelectExplanation");return n.createElement(n.View,null,n.createElement(o.default,{style:I.toggle,isOn:this.state.isCallerIdAutoSelectEnabled,disable:!this.state.canEnableCallerIdAutoSelect,accessibilityLabel:e,onChange:this._onAutoSelectToggle},(0,C.renderLabels)(e,t,!this.state.canEnableCallerIdAutoSelect)),n.createElement(u.default,{style:I.divider}))}_getNumbersSection(){if(this.state.isCallerIdEnabled)return n.createElement(r.default,null)}_getAddNumberSection(){if(!this.state.isCallerIdEnabled)return;const e=m.getString("CallerIdSettingsPanel.AddNumberLinkLabel"),t=m.getString("CallerIdSettingsPanel.AddNumberLinkExplanation");return n.createElement(A.WideButton,{label:e,labelBottom:t,accessibilityLabel:t,buttonStyles:I.navigationButton,onPressed:this._onAddNumberPressed})}_navigateToCallerIdNumberPanel(){const e=P.default.newCauseId();h.log(g.LogTraceArea.Navigation,"CallerIdSettingsPanel._navigateToCallerIdNumberPanel, causeId: "+e),S.default.navigateToCallerIdNumberPanel(this._getRootViewId(),e)}}t.default=w},7095:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAutoAnswerSettings=t.AutoAnswerSettings=t.renderLabels=void 0;const n=i(31844),o=i(16778),s=i(75352),a=i(98925),r=i(63823),l=i(87720),c=i(89391),d=i(67930),u=i(10683),g=i(16625),h=i(94224),p=i(10190),m=i(47447),S=i(11930),C=i(98278),f=i(87134),y=i(46096),_=i(36237),v=i(15877),b=i(33754),T=i(78735),P=i(4735),A=i(27357),k=i(32226),I=i(51070),w=i(36150),N=i(85683),M=i(90631),E=i(12187),x=(i(4057),i(40363)),L=i(80837),R=i(19675),D=i(24576),B=i(53374),O=i(77524),F=i(32182),V=i(97634),U=(0,v.lazyProperties)({panel:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),settingsBlockContainer:()=>o.Styles.createViewStyle({alignSelf:"stretch",paddingHorizontal:10,overflow:"visible",flexGrow:1}),settingsBlockContainerDesktop:()=>o.Styles.createViewStyle({paddingHorizontal:20}),controlRowNoDivider:()=>o.Styles.createViewStyle({marginVertical:4,flexDirection:"row",alignItems:"center",justifyContent:"space-between",minHeight:60}),titleMediumSemiLarge:()=>o.Styles.createTextStyle({flex:1,marginRight:12,marginTop:4,marginBottom:2}),subtitleMediumSemiLarge:()=>o.Styles.createTextStyle({flex:1,marginRight:12,marginTop:2,marginBottom:4})});function H(e,t,i){const n=o.createElement(R.RowTitle,{style:U.titleMediumSemiLarge,numberOfLines:2,disabled:i},e),s=t?o.createElement(R.Caption,{style:U.subtitleMediumSemiLarge},t):void 0;return o.createElement(o.View,{style:L.default.flexOne},n,s)}t.renderLabels=H;class W extends D.default{constructor(){super(...arguments),this._onToggleAutoAnswerCalls=(e,t)=>{T.default.setUserPreferencesLocal({autoAnswerCalls:t})},this._onToggleAutoAnswerCallsWithVideo=(e,t)=>{T.default.setUserPreferencesLocal({autoAnswerCallsWithVideo:t})}}_buildState(e,t){const i=T.default.getUserPreferencesLocal();return{autoAnswerCalls:!!i.autoAnswerCalls,autoAnswerCallsWithVideo:!!i.autoAnswerCallsWithVideo}}render(){return o.createElement(o.View,null,this._getAutoAnswerSetting(),this._getAutoAnswerWithVideoSetting())}_getAutoAnswerSetting(){const e=this._renderLabels(b.getString("UserSettingsPanel.AutoAnswerCalls"));return o.createElement(o.View,null,o.createElement(l.default,{key:"autoAnswerCalls",style:[U.controlRowNoDivider],isOn:this.state.autoAnswerCalls,accessibilityLabel:b.getString("UserSettingsPanel.AutoAnswerCalls"),onChange:this._onToggleAutoAnswerCalls},e),o.createElement(f.default,{marginTop:2}))}_getAutoAnswerWithVideoSetting(){const e=!this.state.autoAnswerCalls;if(e)return;const t=this._renderLabels(b.getString("UserSettingsPanel.AutoAnswerCallsWithVideo"),void 0,e);return o.createElement(o.View,null,o.createElement(l.default,{key:"autoAnswerCallsWithVideo",style:[U.controlRowNoDivider],isOn:this.state.autoAnswerCallsWithVideo,disable:e,accessibilityLabel:b.getString("UserSettingsPanel.AutoAnswerCallsWithVideo"),onChange:this._onToggleAutoAnswerCallsWithVideo},t),o.createElement(f.default,{marginTop:2}))}_renderLabels(e,t,i){return H(e,t,i)}}function z(e){if(m.CallingCapabilities.autoAnswerSupported())return o.createElement(W,Object.assign({},e))}t.AutoAnswerSettings=W,t.getAutoAnswerSettings=z;class G extends d.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._ecoModeItems=[{label:b.getString("CallingSettingsPanel.EcoModeOff"),value:a.EcoMode[a.EcoMode.Off]},{label:b.getString("CallingSettingsPanel.EcoModeMobileNetwork"),value:a.EcoMode[a.EcoMode.MobileNetwork]},{label:b.getString("CallingSettingsPanel.EcoModeAllNetworks"),value:a.EcoMode[a.EcoMode.AllNetworks]}],this._fetchSettings=()=>{p.default.fetch(),g.default.maybeRefreshCallerIdData()},this._onAdvancedCallingSettingsButtonPressed=()=>{h.default.CallNavigationHelper.navigateToAdvancedCallingSettingsPanel(!1,this._getRootViewId())},this._onSubtitlesCallingSettingsButtonPressed=()=>{h.default.CallNavigationHelper.navigateToSubtitlesCallingSettingsPanel(!1,this._getRootViewId())},this._onEcoModeChange=e=>{let t;switch(e){case a.EcoMode[a.EcoMode.AllNetworks]:t=a.EcoMode.AllNetworks;break;case a.EcoMode[a.EcoMode.MobileNetwork]:t=a.EcoMode.MobileNetwork;break;default:t=a.EcoMode.Off}T.default.setUserPreferencesLocal({callingEcoMode:t}),h.default.CallingStore.setupIntKey(a.SlimcoreSetupKeys.EnableEcoMode,t),_.track(new r.EcoModeSettingsEvent(this.state.isInCall,this.state.callingEcoMode,t,s.MicrophoneSettingsOrigin.AVSettings))},this._onEcoModeSelected=e=>e===a.EcoMode[this.state.callingEcoMode],this._toggleIntegratedCalling=(e,t)=>{T.default.setUserPreferencesLocal({disableElectronIntegratedCalling:!t})},this._toggleCallMonitor=(e,t)=>{T.default.setUserPreferencesLocal({disableCallMonitor:!t})},this._onCallerIdPressed=()=>{const e=B.default.newCauseId();_.log(y.LogTraceArea.Navigation,"CallingSettingsPanel._onCallerIdPressed,  causeId: "+e),P.default.navigateToCallerIdSettingsPanel(this._getRootViewId(),e)},this._onCallForwardingPressed=()=>{const e=B.default.newCauseId();_.log(y.LogTraceArea.Navigation,"CallingSettingsPanel._onCallForwardingPressed,  causeId: "+e),this.state.callForwardingFeature&&P.default.navigateToSsoWebFlow(this.state.callForwardingFeature.goTarget,"userInfo.calling-settings",b.getString("CallingSettingsPanel.CallForwardingLabel"),this._getRootViewId())}}static getHeaderText(){return b.getString("UserSettingsPanel.CallSettingsTitle")}_buildState(e,t){const i=T.default.getUserPreferencesLocal(),n=c.default.getS4LCMCFeatures(),o=c.default.getS4LCommerceFeatures(),s={isOnline:k.default.isConnected(),isInCall:h.default.CallingStore.hasConnectedCalls(),isNDISettingSupported:n.enableNDISetting&&h.default.NdiHookupService.isSupported(),callForwardingFeature:p.default.callForwardingFeature(),isCallerIdFeatureEnabled:o.callingSettingsPanel.callerId.enabled,callerIdDataStatus:g.default.getCallerIdDataStatus(),isCallerIdEnabled:g.default.isCallerIdEnabled(),callerIdPrimaryNumber:g.default.getCallerIdPrimaryNumber(),enableIOSIntegratedCalling:!i.disableIOSIntegratedCalling,enableElectronIntegratedCalling:!i.disableElectronIntegratedCalling,provideIOSIntegratedCallingSetting:!n.enableCallKitOnlyBehavior,enableCallMonitor:!i.disableCallMonitor,safeAreaHorizontalPaddingStyle:this._getContext().isPresentedInDesktopSubview?void 0:I.default.horizontalPaddingStyle(C.HorizontalInsetZero),isMobileScreenReaderEnabled:w.default.isMobileScreenReaderEnabled(),enableEcoMode:n.enableEcoMode,callingEcoMode:i.callingEcoMode,isCallSubtitlesSettingEnabled:n.callCaptionsEnableForAllCallsOption};return t&&(s.isEmergencyCallSettingSupported=!1),s}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i),t.isOnline&&!this.state.isOnline&&this._fetchSettings()}UNSAFE_componentWillMount(){super.UNSAFE_componentWillMount(),this._navigationStateStoreToken=A.default.subscribe(this._fetchSettings),this._fetchSettings()}componentDidMount(){super.componentDidMount();const{defaultStatusBarTheme:e}=V.themeColors(this._getContext(),this.props.route.params.colorThemeOverride),t=E.default.mergeStyles([E.default.createBarStyle(e),E.default.createHiddenStyle(!1)]);this._updateStatusBarStyle(t),n.default.supportsNativeEmergencyCalling().catch((()=>!1)).then((e=>{this.setState({isEmergencyCallSettingSupported:!e})}))}componentWillUnmount(){super.componentWillUnmount(),this._navigationStateStoreToken&&(A.default.unsubscribe(this._navigationStateStoreToken),this._navigationStateStoreToken=void 0)}_getCallerIdStatusLabel(){return this.state.callerIdDataStatus===u.CallerIdDataStatus.Pending?"":this.state.isCallerIdEnabled&&this.state.callerIdPrimaryNumber?"+"+this.state.callerIdPrimaryNumber.number:b.getString("CallingSettingsPanel.Disabled")}_getCallForwardingStatusLabel(){return this.state.callForwardingFeature&&this.state.callForwardingFeature.fetched?this.state.callForwardingFeature.active?b.getString("CallingSettingsPanel.Enabled"):b.getString("CallingSettingsPanel.Disabled"):""}_useAdvancedCallingPanel(){return this.state.isNDISettingSupported||this.state.isEmergencyCallSettingSupported}render(){const e=[U.settingsBlockContainer];this._getContext().isPresentedInGenericDesktopModal&&e.push(U.settingsBlockContainerDesktop),this.state.safeAreaHorizontalPaddingStyle&&e.push(this.state.safeAreaHorizontalPaddingStyle);const t=this.props.route.params.isAloneInNavStack&&this._getContext().isPresentedInSplitView?void 0:{closeButtonType:this.props.route.params.isAloneInNavStack?M.CloseButtonType.Close:M.CloseButtonType.Back},i=this.props.route.params.isAloneInNavStack&&!this.state.isMobileScreenReaderEnabled&&this._getContext().isPresentedInSplitView?void 0:o.createElement(M.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:t,delayHeaderFocus:!1}),{primaryBackgroundColorStyle:n}=V.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return o.createElement(o.View,{style:[U.panel,n]},i,o.createElement(o.ScrollView,{style:L.default.flexOne},o.createElement(o.View,{style:e},o.createElement(N.SectionTitle,{title:b.getString("UserSettingsPanel.CallSettingsTitleUpper")}),this._renderCallerID(),this._renderCallForwarding(),this.state.provideIOSIntegratedCallingSetting?this._getIOSIntegratedCallingSettings():void 0,this._getAutoAnswerSettings(),this._getCallMonitorSettings(),this._getSubtitleCallingSettings(),this.state.enableEcoMode&&this._getEcoModeSettings(),this._getAdvancedCallingSettings())))}_getHeaderText(e){return G.getHeaderText()}_renderCallForwarding(){if(!this.state.callForwardingFeature||!this.state.callForwardingFeature.clientEnabled)return;const e=this._getCallForwardingStatusLabel(),t=S.default.combinedAccessibilityLabel(b.getString("CallingSettingsPanel.CallForwardingLabel"),e);return o.createElement(O.WideButton,{label:b.getString("CallingSettingsPanel.CallForwardingLabel"),accessibilityLabel:t,labelRight:e,onPressed:this._onCallForwardingPressed,labelNumberOfLines:3})}_renderCallerID(){if(!this.state.isCallerIdFeatureEnabled)return;const e=this._getCallerIdStatusLabel(),t=S.default.combinedAccessibilityLabel(b.getString("CallingSettingsPanel.CallerID"),e);return o.createElement(O.WideButton,{label:b.getString("CallingSettingsPanel.CallerID"),accessibilityLabel:t,labelRight:e,showSpinner:this.state.callerIdDataStatus===u.CallerIdDataStatus.Pending,onPressed:this._onCallerIdPressed})}_getIOSIntegratedCallingSettings(){if(!x.default.isWindows10Plus())return;const e=b.getString("UserSettingsPanel.EnableIntegratedCalling"),t=b.getString("CallingSettingsPanel.IntegratedElectronCallingDescription"),i=this._renderLabels(e,t);return o.createElement(o.View,null,o.createElement(l.default,{style:[U.controlRowNoDivider],isOn:this.state.enableElectronIntegratedCalling,accessibilityLabel:S.default.combinedAccessibilityLabel(e,t),onChange:this._toggleIntegratedCalling},i),o.createElement(f.default,{marginTop:2}))}_getAutoAnswerSettings(){if(!this._useAdvancedCallingPanel())return z(this.props)}_getAdvancedCallingSettings(){if(this._useAdvancedCallingPanel())return this._getWideButton({label:b.getString("CallingSettingsPanel.AdvancedSettingsButtonLabel"),accessibilityLabel:b.getString("CallingSettingsPanel.AdvancedSettingsButtonLabel"),key:"advancedCallingSettings",onPressed:this._onAdvancedCallingSettingsButtonPressed})}_getSubtitleCallingSettings(){if(this.state.isCallSubtitlesSettingEnabled)return this._getWideButton({label:b.getString("CallingSettingsPanel.SubtitlesButtonLabel"),accessibilityLabel:b.getString("CallingSettingsPanel.SubtitlesButtonLabel"),key:"subtitlesCallingSettings",onPressed:this._onSubtitlesCallingSettingsButtonPressed})}_getWideButton(e){return o.createElement(O.WideButton,Object.assign({},e,{buttonStyles:C.ListItem.small.shortHeightStyle}))}_getCallMonitorSettings(){if(!m.CallingCapabilities.callMonitorSupported())return;const e=this._renderLabels(b.getString("UserSettingsPanel.EnableCallMonitor"));return o.createElement(o.View,null,o.createElement(l.default,{style:[U.controlRowNoDivider],isOn:this.state.enableCallMonitor,accessibilityLabel:b.getString("UserSettingsPanel.EnableCallMonitor"),onChange:this._toggleCallMonitor},e),o.createElement(f.default,{marginTop:2}))}_getEcoModeSettings(){return o.createElement(F.default,{id:"callingEcoMode",items:this._ecoModeItems,rowTitle:b.getString("CallingSettingsPanel.EcoModeTitle"),caption:b.getString("CallingSettingsPanel.EcoModeCaption"),isItemSelected:this._onEcoModeSelected,onHandleItemSelection:this._onEcoModeChange,selectedItemLabel:this._getEcoModeSelectedItemLabel(),style:this.props.route.params.style})}_getEcoModeSelectedItemLabel(){const e=this._ecoModeItems.find((e=>e.value===a.EcoMode[this.state.callingEcoMode]));return e?e.label:""}_renderLabels(e,t,i){return H(e,t,i)}}t.default=G},79624:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(81169),a=i(984),r=i(81627),l=i(52262),c=i(46096),d=i(13944),u=i(10117),g=i(36237),h=i(15877),p=i(33754),m=i(15854),S=i(4735),C=i(36150),f=i(4057),y=i(93194),_=i(40363),v=i(11828),b=i(34528),T=i(53374),P=i(97634),A=(0,h.lazyProperties)({moreButton:()=>o.Styles.createViewStyle({paddingRight:5,height:20})}),k="deleteContact",I="viewProfile";class w extends m.default{constructor(){super(...arguments),this._getConnectedUserMenuItems=()=>{let e=[];return e.push({text:p.getString("UserProfilePanel.DeleteContactLabel"),command:k},{text:p.getString("UserProfilePanel.ViewProfileLabel"),command:I}),e},this._onHandleConnectedUserMenuOptions=(e,t)=>{const i=T.default.newCauseId();switch(g.log(c.LogTraceArea.Navigation,"ConnectedUsersListPanel._onHandleConnectedUserMenuOptions, causeId: "+i),e){case k:a.default.removeContact(t,r.DeleteContactOrigin.ManageConnectedPeople).then((()=>{const e=l.default.getDisplayableProfile(t),i=e&&e.getDisplayName();o.Accessibility.announceForAccessibility(p.getString("UserSettingsPanel.ContactRemovedAccessibilityLabel",{displayName:i}))}));break;case I:S.default.showDetailsPanelWithParams({mri:t,causeId:i,rootViewId:this._getRootViewId()});case y.SXActionMenuCancel:}}}static getHeaderText(){return p.getString("UserSettingsPanel.ProfileVisiblityTitle")}_buildState(e,t){return Object.assign(Object.assign({},super._buildState(e,t)),{isMobileScreenReaderEnabled:C.default.isMobileScreenReaderEnabled()})}_getUsersMris(){return(0,s.chain)(n.values(a.default.getFilteredAllContactProfiles("",{excludeBots:!0})),(0,s.sortBy)((e=>f.default.deburrLowerCase(e.getDisplayName()))),(0,s.map)((e=>e.getMri())),(0,s.compact)())}_onItemPress(e,t,i){const n={anchor:()=>i,buttons:this._getConnectedUserMenuItems(),positionPriorities:["bottom"],destructiveButtonIndex:0};y.default.showWithActionMenuConfig({options:n,callback:e=>this._onHandleConnectedUserMenuOptions(e,t),rootViewId:this._getRootViewId(),invokingEvent:e})}_getRightControlButton(e){if(this.state.isMobileScreenReaderEnabled)return;const{primaryIconColor:t,secondaryTextColor:i,primaryTextColor:n}=P.themeColors(this._getContext(),this.props.route.params.colorThemeOverride);if(_.default.isElectronWindows())return o.createElement(u.default,{icon:v.SkypeIcon.More,size:v.IconSize.size24,color:t});const s=l.default.getDisplayableProfile(e),a=s&&s.getDisplayName(),r=[o.Types.AccessibilityTrait.Button,o.Types.AccessibilityTrait.MenuItem],c=p.getString("Global.ContactMoreButtonAccessibilityLabel",{displayName:a});return o.createElement(d.default,{key:"moreButton",title:p.getString("Global.MoreButtonTitle"),onPress:t=>this._onItemPress(t,e),size:v.IconSize.size24,color:i,hoverColor:n,style:A.moreButton,icon:b.moreIcon(),accessibilityTraits:r,accessibilityLabel:c})}_getHeaderText(e){return w.getHeaderText()}}t.default=w},49899:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(78931),s=i(15877),a=i(33754),r=i(4735),l=i(77524),c=(0,s.lazyProperties)({titleMediumSemiLarge:()=>n.Styles.createTextStyle({flex:1,marginRight:12})});class d extends o.default{constructor(){super(...arguments),this._onPress=()=>{r.default.navigateToSendDiagnosticLogs(this._getRootViewId())}}static getHeaderText(){return a.getString("UserSettingsPanel.DiagnosticToolsTitle")}_getHeaderText(e){return d.getHeaderText()}_renderContent(){return n.createElement(l.WideButton,{key:"diagnosticTools",label:a.getString("SendDiagnosticLogsDialog.SendDiagnosticLogs"),labelStyle:c.titleMediumSemiLarge,onPressed:this._onPress})}}t.default=d},50035:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(17267),s=i(89391),a=i(84469);class r extends o.default{_getPanelName(){return"Manage feature flags"}_getSubscribedState(){return{ecsConfig:s.default.getMergedEcsConfig(),overrides:a.default.getOverrides()}}_generateConfigItems(e){return this._generateListOfItems(e.ecsConfig,e.overrides)}_generateOverrideItems(e){return this._generateListOfItems(e.overrides)}_onResetAll(){a.default.resetAllOverrides()}_generateListOfItems(e,t){const i=[];return n.each(e,((e,o)=>{i.push(this._createHeaderItem(o));const s=i.length;n.each(e,((e,n)=>{this._generateListOfItemsRecursive(i,o,[n],e,t)})),i.length===s&&i.pop()})),i}_onListItemClickBuilder(e,t,i){return()=>{a.default.setOverride(e,t,i)}}_onResetPressBuilder(e,t){return i=>{a.default.clearOverride(e,t),i.stopPropagation()}}}t.default=r},50876:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(34828),s=i(16778),a=i(67930),r=i(98278),l=i(46096),c=i(10117),d=i(36237),u=i(58666),g=i(14532),h=i(15877),p=i(33754),m=i(51072),S=i(78735),C=i(29130),f=i(51070),y=i(36150),_=i(86045),v=i(90631),b=i(11828),T=i(80837),P=i(19675),A=i(53374),k=i(97634),I=(0,h.lazyProperties)({panel:()=>s.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),languageOption:()=>(0,h.lazyProperties)({row:()=>s.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"flex-start",marginHorizontal:10,borderBottomWidth:1,height:60}),compositeRow:()=>s.Styles.createViewStyle({marginHorizontal:20}),selectedIcon:()=>s.Styles.createViewStyle({margin:5,minWidth:b.IconSize.size15})})});class w extends a.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._renderItem=e=>{const{dividerBorderColorStyle:t}=k.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride),{primaryTextColor:i}=k.themeColors(this._getContext(),this.props.route.params.colorThemeOverride),n=[I.languageOption.row,T.default.pointerCursor,T.default.noncollapsibleView,t,this._getContext().isPresentedInDesktopSubview?I.languageOption.compositeRow:void 0,this.state.isMobileScreenSize?r.ListItem.small.regularHeightStyle:r.ListItem.small.shortHeightStyle],o=s.createElement(c.default,{icon:b.SkypeIcon.Ok,size:b.IconSize.size15,color:i,style:I.languageOption.selectedIcon});let a=!1;switch(e.template){case"reset-language-row":a=!this.state.currentLocale;const t=p.getResetLanguageOptionString(),i=t+(a?", "+p.getString("Global.SelectedAccessibilityLabel"):"");return s.createElement(m.default.Button,{key:"language_reset",style:n,onPress:this._onResetLanguagePress,accessibilityLabel:i},a?o:void 0,s.createElement(P.BodyText,{bold:a,style:T.default.flexNegativeOne},t));case"language-row":a=e.key===this.state.currentLocale;const r=u.getLanguageTitle(e.key),l=r+(a?", "+p.getString("Global.SelectedAccessibilityLabel"):""),c=[T.default.flexNegativeOne];return"ar-SA"===e.key&&c.push(T.default.noWrap),s.createElement(m.default.Button,{key:"language"+e.key,style:n,onPress:()=>{this._onLanguagePress(e.key)},accessibilityLabel:l},a?o:void 0,s.createElement(P.BodyText,{bold:a,style:c},r));default:return A.default.switchStatementExhaustiveChecking(e.template)}},this._onDoneButtonRef=e=>{this._doneButtonRef=e||void 0},this._onDoneButtonPress=()=>{const e=A.default.newCauseId();d.log(l.LogTraceArea.Navigation,"LanguagePickerPanel._onDoneButtonPress,  causeId: "+e),this._getContext().isPresentedInDesktopSubview?this._setAppLanguage():(this._setAppLanguage(),this._goBack(e))},this._setAppLanguage=()=>{d.track(new g.LanguageUIChangedEvent(p.getLocale(),this.state.currentLocale)),this.state.currentLocale?u.setLocale(this.state.currentLocale):u.resetLocaleToSystem()},this._onResetLanguagePress=e=>{e.preventDefault();const t=p.getString("SettingsLanguages.ResetLanguageOption");_.default.maybeAnnounceForAccessibility(p.getString("SettingsLanguages.LanguageSelectedAnnouncement",{language:t}),1e3),this.setState({currentLocale:""})},this._onLanguagePress=e=>{const t=u.getLanguageTitle(e);_.default.maybeAnnounceForAccessibility(p.getString("SettingsLanguages.LanguageSelectedAnnouncement",{language:t}),1e3),this.setState({currentLocale:e})}}static getHeaderText(){return p.getString("SettingsLanguages.LanguageLabel")}_buildState(e,t){const i=[{key:"reset-language-row",template:"reset-language-row",height:60,accessibilityTrait:s.Types.AccessibilityTrait.Button}];n.each(u.sortedLanguageInfo,(e=>{i.push({key:e.code,template:"language-row",height:60,accessibilityTrait:s.Types.AccessibilityTrait.Button})}));const o=this._getRootViewId(),a={isMobileScreenSize:C.default.isMobileScreenSize(o),safeAreaHorizontalInsets:f.default.horizontalInsets(r.HorizontalInsetDefault),isMobileScreenReaderEnabled:y.default.isMobileScreenReaderEnabled(),items:i};if(t){const e=S.default.getUserPreferencesLocal();a.currentLocale=e.locale?p.getLocale():"",a.initialLocale=a.currentLocale||""}return a}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this._doneButtonRef&&this._doneButtonRef.requestFocus&&this.state.currentLocale!==t.currentLocale&&this._doneButtonRef.requestFocus()}render(){const e=this.props.route.params.isAloneInNavStack&&this._getContext().isPresentedInSplitView?void 0:{closeButtonType:this.props.route.params.isAloneInNavStack?v.CloseButtonType.Close:v.CloseButtonType.Back};let t;if(!(this.props.route.params.isAloneInNavStack&&!this.state.isMobileScreenReaderEnabled&&this._getContext().isPresentedInSplitView)){const i=this.state.currentLocale!==this.state.initialLocale?{text:p.getString("Global.ApplyButtonTitle"),onPress:this._onDoneButtonPress,setButtonRef:this._onDoneButtonRef}:void 0;t=s.createElement(v.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:e,rightButtons:i,delayHeaderFocus:!1})}const{primaryBackgroundColorStyle:i}=k.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return s.createElement(s.View,{style:[I.panel,i]},t,s.createElement(o.VirtualListView,{itemList:this.state.items,renderItem:this._renderItem,animateChanges:!0,horizontalPadding:this.state.safeAreaHorizontalInsets,accessibilityLabel:this._getHeaderText(this.state)}))}_getHeaderText(e){return w.getHeaderText()}}t.default=w},51424:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(71502),a=i(87720),r=i(89391),l=i(67930),c=(i(11930),i(98278)),d=i(62602),u=i(87134),g=i(46096),h=i(10117),p=i(36237),m=i(15877),S=i(40522),C=i(33754),f=i(10909),y=i(18078),_=i(4735),v=i(25313),b=i(97822),T=i(27683),P=i(28377),A=i(49140),k=i(29130),I=i(51070),w=i(81115),N=i(85683),M=i(90602),E=i(90631),x=i(4057),L=i(93194),R=i(15415),D=i(81760),B=i(11828),O=i(59433),F=i(80837),V=i(19675),U=i(24576),H=i(97634),W=i(26712),z=i(72758),G=i(53374),K=i(77524),j=(0,m.lazyProperties)({panel:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),entry:()=>(0,m.lazyProperties)({container:()=>o.Styles.createViewStyle({paddingVertical:10,flexDirection:"row",alignItems:"center",justifyContent:"space-between",flex:1}),status:()=>o.Styles.createTextStyle({marginLeft:10,flex:1,textAlign:"right"})}),includeInSearch:()=>(0,m.lazyProperties)({row:()=>o.Styles.createViewStyle({marginVertical:4,flexDirection:"row",alignItems:"center",justifyContent:"space-between",flex:1})}),listItemContainer:()=>(0,m.lazyProperties)({row:()=>o.Styles.createViewStyle({flex:1,paddingHorizontal:20})}),searchExplanationRow:()=>o.Styles.createViewStyle({flexDirection:"row",marginTop:15,marginBottom:25,flex:1}),explanationNoMargins:()=>o.Styles.createViewStyle({marginTop:0,marginBottom:10}),iconFont:()=>o.Styles.createViewStyle({paddingHorizontal:15}),searchTextExplanationColumn:()=>o.Styles.createViewStyle({flex:1,paddingRight:15}),manageAccountBanner:()=>o.Styles.createTextStyle({flex:1,paddingHorizontal:15,paddingVertical:10,borderBottomWidth:1,borderTopWidth:1,color:D.Color.gray500,borderStyle:"solid",fontSize:14}),bannerNoBackground:()=>o.Styles.createTextStyle({backgroundColor:D.Color.transparent}),bannerBackground:()=>o.Styles.createTextStyle({backgroundColor:D.Color.blueOverlay10})});class q extends U.default{constructor(){super(...arguments),this._renderVerificationStatus=()=>{let e,t=[j.entry.status];return this.props.entry.VerifiedState===s.VerificationState.Verified&&this.props.entry.Searchable?e=C.getString("ManageSearchInfoPanel.SearchVisibilityStateEnabled"):this.props.entry.VerifiedState===s.VerificationState.Verified?e=C.getString("ManageSearchInfoPanel.SearchVisibilityStateDisabled"):(e=C.getString("ManageSearchInfoPanel.SearchVisibilityStateUnverified"),t.push(this._themeStyles.destructiveTextColorStyle)),o.createElement(V.BodyText,{style:t,numberOfLines:2,ref:this._onVerificationStatusTextRef},e)},this._onVerificationStatusTextRef=e=>{this._verificationStatusText=e||void 0}}_buildState(e,t){const i={};return t&&(i.isLoading=!1),i}render(){let e,t;this.state.isLoading?e=o.createElement(R.default,{size:c.SXActivityIndicatorSize.ExtraSmall,tintColor:this._themeColors.primaryIconColor}):this.props.isEditable&&(e=this._renderVerificationStatus());const i={style:F.default.flexOne,numberOfLines:2},n=this.getLabel();return t=this.props.isEditable?o.createElement(V.BodyText,Object.assign({bold:!0},i),n):o.createElement(V.Subtitle,Object.assign({},i),n),this.onPress?o.createElement(o.Button,{accessibilityLabel:n,style:j.entry.container,onPress:this.onPress,disabled:!this.props.isEditable},t,e):o.createElement(o.View,{style:j.entry.container},t,e)}}class Q extends q{constructor(){super(...arguments),this.onPress=e=>{e.stopPropagation();const t={anchor:()=>this._verificationStatusText,useTheme:!0,positionPriorities:["bottom","top"],popupOffset:{x:60,y:5},hideDivider:!0};L.default.showWithOptions({id:Q._menuId,config:t,getMenuItems:this._getMenuItems,handleMenuCommand:this._onHandleMenuCommand,destructiveButtonIndex:1,rootViewId:this._getRootViewId(),invokingEvent:e})},this._getMenuItems=()=>{const e=[];return this.props.entry.VerifiedState!==s.VerificationState.Verified&&this.props.canVerifyPhone?e.push({text:C.getString("ManageSearchInfoPanel.PhoneVerificationActionVerify"),command:"verify"}):this.props.entry.VerifiedState===s.VerificationState.Verified&&(this.props.entry.Searchable?e.push({text:C.getString("ManageSearchInfoPanel.PhoneVerificationActionDisable"),command:"disable"}):e.push({text:C.getString("ManageSearchInfoPanel.PhoneVerificationActionEnable"),command:"enable"})),e},this._onHandleMenuCommand=e=>{switch(e){case"disable":this.setState({isLoading:!0});const t=this.props.entry.Phone;s.default.hidePhoneNumberInSearch(t).then((()=>{v.default.isUserPhoneVerified().then((()=>v.default.removePhoneFromProfile(t.Number,t.CountryIsoCode,t.CountryCallingCode).then(n.noop)))}),(t=>{this._logServiceError(e,t)})).finally((()=>{p.track(new A.PhoneNumberDiscoverabilityPrivacyEvent(!1,A.PhoneDiscoverabilityOrigin.ApplicationSettings)),this._updateVerificationState(C.getString("ManageSearchInfoPanel.SearchVisibilityStateDisabled"))}));break;case"enable":this.setState({isLoading:!0}),s.default.showPhoneNumberInSearch(this.props.entry.Phone,this.props.entry.Source).then(n.noop,(t=>{this._logServiceError(e,t)})).finally((()=>{p.track(new A.PhoneNumberDiscoverabilityPrivacyEvent(!0,A.PhoneDiscoverabilityOrigin.ApplicationSettings)),this._updateVerificationState(C.getString("ManageSearchInfoPanel.SearchVisibilityStateEnabled"))}));break;case"verify":b.default.startPhoneNumberVerificationFromManageSearchPanel(this._getRootViewId(),this.props.entry.Phone.Number);break;case"cancel":case L.SXActionMenuCancel:break;default:G.default.switchStatementExhaustiveChecking(e)}},this._updateVerificationState=e=>{this.isComponentMounted()&&(this.setState({isLoading:!1}),f.default.scheduleMessage({key:"phoneSearchableText",textMessage:e,color:D.Color.gray300,rootViewId:this._getRootViewId()}))}}getLabel(){const e=this.props.entry.Phone,t=T.default.parse(e.Number,e.CountryCallingCode);return t?T.default.format(t,T.PhoneNumberFormat.NATIONAL):e.Number}_logServiceError(e,t){p.log(g.LogTraceArea.ManageSearchInfo,"Service error while trying to "+e+" phone number. Error: "+x.default.errorAsString(t))}}Q._menuId=L.default.menuId();class X extends q{getLabel(){return this.props.entry.EmailAddress}}class J extends l.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._onPressProfileVisiblityButton=()=>{_.default.navigateToConnectedUsersList(this._getRootViewId())},this._onChangeIncludeMeInSearch=(e,t)=>{this.state.includeMeInSearchEnabled!==t&&(P.default.setIncludeMeInSearchPrivacyOption({searchable:t,recommendable:!1}),p.track(new A.AppearInSearchEvent(t,this.props.route.params.origin)),t&&v.default.isUserPhoneVerified().then((e=>{if(e){const e=s.default.getEntries();n.each(e,((e,t)=>{e instanceof s.PhoneABCHEntry&&(e.VerifiedState!==s.VerificationState.Verified||e.Searchable||"Msa"!==e.Source||s.default.showPhoneNumberInSearch(e.Phone,e.Source).then(n.noop,(e=>{p.log(g.LogTraceArea.ManageSearchInfo,"Service error while trying to make phone number searchable. Error: "+x.default.errorAsString(e))})))}))}})))},this._onAddPhoneNumberPress=()=>{b.default.startPhoneNumberVerificationFromManageSearchPanel(this._getRootViewId())},this.getExplanationStyles=()=>[j.searchExplanationRow,j.explanationNoMargins],this._renderAppearInSearchResultsExplanation=()=>{const e=C.getString("ManageSearchInfoPanel.SearchResultsSecondaryExplanationSplitPolicySettings"),t=W.default.appendLanguageUrlParameter(r.default.getConfigSettingsNoSubscription().privacyUrl.splitSearchSuggestionsSettingsUrl);return this._renderSuggestionsAndSearchExplanationWithLearnMoreLink(e,t)},this._renderSuggestionsAndSearchExplanationWithLearnMoreLink=(e,t)=>{let i;return o.createElement(o.View,null,o.createElement(o.View,{style:this.getExplanationStyles()},o.createElement(o.View,{style:j.searchTextExplanationColumn,accessibilityLabel:i?i.label:void 0,accessibilityTraits:i?i.traits:void 0,importantForAccessibility:void 0,tabIndex:void 0,onPress:void 0,onKeyPress:void 0},o.createElement(V.Caption,{accessibilityHidden:!1},e,this._renderLearnMoreLink(t)))),o.createElement(u.default,null))},this._onLearnMorePressed=(e,t)=>{S.openUrlWithParams({origin:g.BrowserOrigin.SearchSuggestionsSettings,url:t,rootViewId:this._getRootViewId()})},this._onLearnMoreKeyPressed=(e,t)=>d.default.maybeHandleKeyPress(e,this._onLearnMorePressed.bind(t)),this._onLearnMorePressedForProfile=()=>{const e=W.default.appendLanguageUrlParameter(r.default.getConfigSettingsNoSubscription().privacyUrl.profileLearnMoreUrl);S.openUrlWithParams({origin:g.BrowserOrigin.PrivacyProfile,url:e,rootViewId:this._getRootViewId()})},this._onLearnMoreKeyPressedForProfile=e=>d.default.maybeHandleKeyPress(e,this._onLearnMorePressedForProfile),this._onMicrosoftAccountLinkPress=()=>{const e=W.default.appendLanguageUrlParameter(this.state.microsoftAccountLink);S.openUrlWithParams({origin:g.BrowserOrigin.PrivacyProfile,url:e,options:{openInExternalBrowser:!0},rootViewId:this._getRootViewId()})}}_buildState(e,t){const i=s.default.getEntries(),n=y.default.getMsaIdFromSignIn(),o=r.default.getConfigSettings().msAccountContactInfoUrl.url,{searchable:a}=P.default.getIncludeMeInSearchPrivacyOption(t);return{entries:i,includeMeInSearchEnabled:a,isUserAMinor:z.default.isUserAMinor(y.default.getSkypeMri()),safeAreaHorizontalInsets:I.default.horizontalInsets(c.HorizontalInsetDefault),isFullScreenModal:k.default.isMobileScreenSize(this._getRootViewId()),microsoftAccountLink:n?o+"?username="+encodeURIComponent(n):o}}_getHeaderText(e){return C.getString("ManageSearchInfoPanel.PanelTitleContactsPrivacy")}render(){const e=[j.listItemContainer.row];w.default.hasHorizontalSafeAreas(this.state.safeAreaHorizontalInsets)&&e.push(w.default.horizontalPaddingStyle(this.state.safeAreaHorizontalInsets));const t=[this._getPhoneAndMailSection(),this._getSearchTogglesSection(),this._getProfileSection()],{primaryBackgroundColorStyle:i}=H.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return o.createElement(o.View,{style:[j.panel,i]},this._getHeader(),this._getManageAccountBanner(),o.createElement(o.ScrollView,{style:F.default.flexOne},o.createElement(o.View,{style:e},t)))}_getProfileSection(){return o.createElement(o.View,{key:"profile"},this._getProfileHeader(),this._renderProfileVisibilityExplanation(),this._getProfileVisiblityButton())}_getPhoneAndMailSection(){return o.createElement(o.View,{key:"phoneMail"},this._getPhoneSection(),this._getEmailSection())}_getPhoneSection(){const e=this._getPhoneNumbers();if(n.size(e)>0)return o.createElement(o.View,{key:"phone"},this._getPhoneHeader(),e)}_getEmailSection(){const e=this._getEmails();return 0===n.size(e)?void 0:o.createElement(o.View,{key:"email"},this._getMailHeader(),e)}_getManageAccountBanner(){const e=!1;let t;const i=C.getString("ManageSearchInfoPanel.MicrosoftAccountLinkTitle"),n=this._getMicrosoftAccountLink(i);let s=H.isUsingAccessibleTheme(this._getContext(),this.props.route.params.colorThemeOverride)?j.bannerNoBackground:j.bannerBackground;const{headerShadowBorderColorStyle:a}=H.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return o.createElement(o.View,null,o.createElement(o.View,{style:[j.manageAccountBanner,a,s],accessibilityLabel:null==t?void 0:t.label,accessibilityTraits:null==t?void 0:t.traits,importantForAccessibility:void 0},o.createElement(V.Caption,{accessibilityHidden:!1,numberOfLines:3},C.getParts("ManageSearchInfoPanel.PhoneNumberSectionEditLink",{microsoftAccountLink:n}))))}_getMicrosoftAccountLink(e){return o.createElement(O.default,{url:this.state.microsoftAccountLink,blue:!0,onPress:this._onMicrosoftAccountLinkPress,key:"microsoftAccountLink"},e)}_getPhoneHeader(){return o.createElement(o.View,{style:F.default.flexOne},o.createElement(N.SectionTitle,{title:C.getString("ManageSearchInfoPanel.PhoneNumberSectionSubtitleCaps")}),o.createElement(V.Caption,{numberOfLines:3},C.getString("ManageSearchInfoPanel.PhoneNumberSectionExplanation")))}_getPhoneNumbers(){let e=[];return n.each(this.state.entries,(t=>{t instanceof s.PhoneABCHEntry&&e.push(o.createElement(o.View,{key:"phone"+t.Phone},o.createElement(Q,{entry:t,canVerifyPhone:this.state.includeMeInSearchEnabled,isEditable:!0}),o.createElement(u.default,null)))})),e}_getAddPhoneNumber(){const{primaryIconColor:e}=H.themeColors(this._getContext(),this.props.route.params.colorThemeOverride);return o.createElement(o.View,null,o.createElement(o.Button,{onPress:this._onAddPhoneNumberPress,style:j.entry.container,accessibilityLabel:C.getString("ManageSearchInfoPanel.AddMobileNumberLabel")},o.createElement(V.BodyText,{bold:!0,accessibilityHidden:!0},C.getString("ManageSearchInfoPanel.AddMobileNumberLabel")),o.createElement(h.default,{icon:B.SkypeIcon.Plus,size:B.IconSize.size24,color:e,style:j.iconFont})),o.createElement(u.default,null))}_getEmails(){let e=[];return n.each(this.state.entries,(t=>{t instanceof s.EmailABCHEntry&&"Msa"!==t.Source&&e.push(o.createElement(o.View,{key:"email"+t.EmailAddress},o.createElement(X,{entry:t,isEditable:!1}),o.createElement(u.default,null)))})),e}_getMailHeader(){return o.createElement(o.View,{style:F.default.flexOne},o.createElement(N.SectionTitle,{title:C.getString("ManageSearchInfoPanel.EmailSectionSubtitleCaps")}),o.createElement(V.Caption,{numberOfLines:3},C.getString("ManageSearchInfoPanel.EmailSectionExplanation")))}_getSearchTogglesHeader(){return o.createElement(N.SectionTitle,{key:"searchHeader",title:C.getString("ManageSearchInfoPanel.SearchResultsHeaderTitleCapsSplitPolicySettings")})}_getProfileHeader(){return o.createElement(N.SectionTitle,{key:"profileHeader",title:C.getString("ManageSearchInfoPanel.ProfileSectionHeaderCaps")})}_getSearchTogglesSection(){let e;return e=o.createElement(o.View,null,this._getAppearInSearchResultsToggle(),this._renderAppearInSearchResultsExplanation()),o.createElement(o.View,{key:"toggles"},this._getSearchTogglesHeader(),e)}_renderProfileVisibilityExplanation(){let e;const t=C.getString("AudioVideoSettings.LearnMore"),i=o.createElement(O.default,{url:W.default.appendLanguageUrlParameter(r.default.getConfigSettingsNoSubscription().privacyUrl.profileLearnMoreUrl),onPress:this._onLearnMorePressedForProfile,blue:!0,key:"profileLearnMoreLink "},t);return o.createElement(o.View,null,o.createElement(o.View,{style:this.getExplanationStyles()},o.createElement(o.View,{style:j.searchTextExplanationColumn,accessibilityLabel:e?e.label:void 0,accessibilityTraits:e?e.traits:void 0,importantForAccessibility:void 0,tabIndex:void 0,onPress:void 0,onKeyPress:void 0},o.createElement(V.Caption,{accessibilityHidden:!1,numberOfLines:3},C.getParts("ManageSearchInfoPanel.ProfileSectionExplanation",{learnMoreLink:i})))))}_getProfileVisiblityButton(){return o.createElement(K.WideButton,{key:"profileVisibility",label:C.getString("ManageSearchInfoPanel.ProfileVisiblityButton"),labelStyle:M.default.titleMediumSemiLarge,onPressed:this._onPressProfileVisiblityButton})}_getHeader(){const e={closeButtonType:this.props.route.params.isAloneInNavStack?E.CloseButtonType.Close:E.CloseButtonType.Back},t=C.getString("ManageSearchInfoPanel.PanelTitleContactsPrivacy");return o.createElement(E.SimplePanelHeader,{panelName:t,leftButton:e,allowTextWrap:!0})}_getAppearInSearchResultsToggle(){return o.createElement(a.default,{key:"includeMeInSearchAndSuggestions",style:j.includeInSearch.row,isOn:!this.state.isUserAMinor&&this.state.includeMeInSearchEnabled,accessibilityLabel:C.getString("UserSettingsPanel.IncludeMeInSearchAndSuggestions"),onChange:this._onChangeIncludeMeInSearch,showSpinner:n.isUndefined(this.state.includeMeInSearchEnabled),disable:this.state.isUserAMinor},o.createElement(N.SwitchLabel,{title:C.getString("UserSettingsPanel.IncludeMeInSearchAndSuggestionsSplitPolicySettings"),subtitle:this.state.isUserAMinor?C.getString("UserSettingsPanel.DontIncludeMinorsInSearchAndSuggestions"):void 0}))}_renderLearnMoreLink(e){return o.createElement(O.default,{url:e,onPress:this._onLearnMorePressed,blue:!0,key:"suggestionsLearnMoreLink"}," ",C.getString("AudioVideoSettings.LearnMore"))}}t.default=J},15854:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(34828),o=i(16778),s=i(67930),a=i(98278),r=i(15877),l=i(29130),c=i(51070),d=i(90631),u=i(27177),g=i(80837),h=i(97634),p=(0,r.lazyProperties)({panel:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),listItem:()=>(0,r.lazyProperties)({itemDivider:()=>o.Styles.createViewStyle({height:1,marginRight:30,marginLeft:60}),itemDividerSmallScreen:()=>o.Styles.createViewStyle({marginRight:10}),rowItems:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch",flexDirection:"row",alignItems:"center"})})});class m extends s.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._onBackButtonRef=e=>{this._headerBackButtonRef=e||void 0},this._onHandleItemPress=(e,t,i)=>{this._onItemPress(e,i,t)},this._renderItem=e=>{const{dividerColorStyle:t}=h.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);let i=[p.listItem.itemDivider,t];this.state.isMobileScreenSize&&i.push(p.listItem.itemDividerSmallScreen);const n=e.key;return o.createElement(o.View,{key:"mri"+n,style:g.default.flexOne},o.createElement(o.View,{style:p.listItem.rowItems},o.createElement(u.default,{userMri:n,itemHeight:55,hideBlockedOverlay:!0,renderAsListItem:!0,customRightButtonControl:this._getRightControlButton(n),onItemPress:this._onHandleItemPress})),o.createElement(o.View,{key:"itemDivider",style:i}))}}_buildState(e,t){const i=this._getUsersMris(),n=[];i.forEach((e=>{n.push({key:e,height:56,template:"userListItem"})}));const o=this._getRootViewId();return{isMobileScreenSize:l.default.isMobileScreenSize(o),safeAreaHorizontalInsets:c.default.horizontalInsets(a.HorizontalInsetDefault),userItems:n}}render(){const e={closeButtonType:this.props.route.params.isAloneInNavStack?d.CloseButtonType.Close:d.CloseButtonType.Back,setButtonRef:this._onBackButtonRef},t=this._getHeaderText(this.state),i=o.createElement(d.SimplePanelHeader,{panelName:t,leftButton:e}),{primaryBackgroundColorStyle:s}=h.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return o.createElement(o.View,{style:[p.panel,s]},i,o.createElement(n.VirtualListView,{itemList:this.state.userItems,renderItem:this._renderItem,animateChanges:!0,horizontalPadding:this.state.safeAreaHorizontalInsets,accessibilityLabel:t}))}_getRightControlButton(e){}}t.default=m},34887:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(67930),s=i(98278),a=i(15877),r=i(33754),l=i(14951),c=i(30124),d=i(90631),u=i(80837),g=i(97634),h=(0,a.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),containerDesktop:()=>n.Styles.createViewStyle({marginHorizontal:20}),containerMobile:()=>n.Styles.createViewStyle({marginHorizontal:10})});class p extends o.BaseNavigationViewPresentedInModal{constructor(e){super(e),this._leftButton={closeButtonType:d.CloseButtonType.Back}}static getHeaderText(){return r.getString("UserSettingsPanel.ManageContactsTitle")}_buildState(e,t){return{isUsingStackNavigationContext:c.default.isUsingStackNavigationContext()}}render(){const e=this.state.isUsingStackNavigationContext?h.containerMobile:h.containerDesktop,{primaryBackgroundColorStyle:t}=g.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:[h.panel,t]},n.createElement(d.SimplePanelHeader,{panelName:r.getString("UserSettingsPanel.ManageContactsTitle"),delayHeaderFocus:this._getContext().isPresentedByMobileStackNavigator,leftButton:this._leftButton}),n.createElement(n.ScrollView,{style:u.default.flexOne},n.createElement(n.View,{style:e},n.createElement(l.default,{buttonStyles:this.state.isUsingStackNavigationContext?void 0:s.ListItem.small.shortHeightStyle}))))}_getHeaderText(e){return p.getHeaderText()}}t.default=p},72660:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(96074),s=i(98278),a=i(15877),r=i(33754),l=i(51070),c=i(34170),d=i(90631),u=i(16392),g=i(12187),h=i(80837),p=i(97634),m=(0,a.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),settingsBlockContainer:()=>n.Styles.createViewStyle({alignSelf:"stretch",paddingHorizontal:10,overflow:"visible"})});class S extends o.BaseNavigationView{_buildState(e,t){return{safeAreaHorizontalPaddingStyle:l.default.horizontalPaddingStyle(s.HorizontalInsetZero)}}UNSAFE_componentWillUpdate(e,t,i){super.UNSAFE_componentWillUpdate(e,t,i);const{defaultStatusBarTheme:n}=p.themeColors(this._getContext(),this.props.route.params.colorThemeOverride);this._updateStatusBarStyle(g.default.createBarStyle(n))}render(){const e=[m.settingsBlockContainer];this.state.safeAreaHorizontalPaddingStyle&&e.push(this.state.safeAreaHorizontalPaddingStyle);const t={closeButtonType:this.props.route.params.navigationDirection===u.StackNavigationDirection.Present?d.CloseButtonType.Close:d.CloseButtonType.Back},{primaryBackgroundColorStyle:i}=p.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:[m.panel,i]},n.createElement(d.SimplePanelHeader,{panelName:r.getString("UserSettingsPanel.SettingsTitle"),leftButton:t,delayHeaderFocus:this._getContext().isPresentedByMobileStackNavigator}),n.createElement(n.ScrollView,{style:h.default.flexOne},n.createElement(n.View,{style:e},n.createElement(c.default,null))))}}t.default=S},51464:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(31844),o=i(16778),s=i(89391),a=i(96074),r=i(46096),l=i(98278),c=i(36237),d=i(15877),u=i(33754),g=i(88273),h=i(18078),p=i(4735),m=i(17093),S=i(95691),C=i(24148),f=i(26424),y=i(49140),_=i(29130),v=i(51070),b=i(81115),T=i(36150),P=i(85683),A=i(90631),k=i(12187),I=i(81760),w=i(11828),N=i(78262),M=i(80837),E=i(75793),x=i(45200),L=i(72758),R=i(13565),D=i(77524),B=i(96242),O=i(97634),F=(0,d.lazyProperties)({panel:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),container:()=>o.Styles.createScrollViewStyle({marginTop:10,marginHorizontal:10}),sectionHeader:()=>o.Styles.createTextStyle({paddingTop:30,paddingBottom:10})});class V extends a.BaseNavigationView{constructor(){super(...arguments),this._onScrollViewRef=e=>{this._scrollView=e||void 0},this._onUserCardRef=e=>{this._userCardRef=e||void 0},this._onScroll=(e,t)=>{const i=e>100;this.state.showHeader!==i&&this.setState({showHeader:i})},this._navigateToGroup=e=>{p.default.navigateToSettingsGroup(e,this._getRootViewId())},this._onHelpAndFeedbackButtonPressed=()=>{c.track(new C.NavigationHelpAndFeedback(S.NavigationSettingsItem.HelpAndFeedback,S.NavigationSettingsOrigin.MySettingsPanel)),p.default.navigateToSettingsGroup(m.SettingsGroup.HelpAndFeedback,this._getRootViewId())},this._goToPrivacy=()=>{p.default.navigateToManageSearchInfoPanel(y.ManageSearchOrigin.ApplicationSettings,this._getRootViewId())},this._debugSettingsPress=()=>{this._navigateToGroup(m.SettingsGroup.Debug)}}_buildState(e,t){const i=L.default.getFullUserProfileByMri(h.default.getSkypeMri()),a=this._getRootViewId(),r=o.StatusBar.isOverlay()&&this._getContext().isPresentedByMobileStackNavigator&&_.default.getDeviceOrientation(a)===n.DeviceOrientation.Portrait,c={displayName:i.getDisplayName(),showScreenReaderHeader:T.default.isMobileScreenReaderEnabled(),gender:i&&i.gender||N.eGender.Unspecified,safeAreaHorizontalInsets:this._getContext().isPresentedInDesktopSubview?l.HorizontalInsetZero:v.default.horizontalInsets(l.HorizontalInsetDefault),leavePaddingForStatusBar:r,hugeEmoticonsFeatureEnabled:s.default.getS4LMessagingFeatures().singleEmoticonSize>=f.EmoticonSize.ExtraLarge,myUserStatus:g.default.getStatus(),statusBarHeight:r?v.default.statusBarHeight():0};return t&&(c.showHeader=!1),c}componentDidMount(){super.componentDidMount(),this._userCardRef&&this._userCardRef.requestFocus(),this._updateStatusBar(),s.default.getS4LCommerceFeatures().offerStore.prefetch&&R.default.requestUpdate()}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.state.showHeader!==t.showHeader&&this._updateStatusBar(),this.state.statusBarHeight!==t.statusBarHeight&&!this.state.showHeader&&this._scrollView&&this._scrollView.setScrollTop(0)}render(){const{headerIconColor:e,iconHoverColor:t}=O.themeColors(this._getContext(),this.props.route.params.colorThemeOverride),i=O.currentTheme(this._getContext(),this.props.route.params.colorThemeOverride);this._statusBarTheme!==i&&(this._updateStatusBar(),this._statusBarTheme=i);const n=F.sectionHeader,s=this._isHeaderOpaqueStyle(),a=s?e:I.Color.white,r=s?t:I.Color.whiteOverlay80,l={closeButtonType:this.props.route.params.useCloseIcon?A.CloseButtonType.Close:A.CloseButtonType.Back,color:a,hoverColor:r},c=u.getString("UserSettingsPanel.MyProfileTitle"),d=o.createElement(A.SimplePanelHeader,{floating:!this.state.showScreenReaderHeader,panelName:s?c:void 0,useTransparentBackground:!s,hideBottomBorder:!s,leftButton:l,leavePaddingForStatusBar:this.state.leavePaddingForStatusBar,ignorePointerEvents:!s}),g=[M.default.flexOne,b.default.horizontalPaddingStyle(this.state.safeAreaHorizontalInsets)];let p=[];this.state.statusBarHeight&&!this.state.showScreenReaderHeader&&(g.push(b.default.marginTopStyle(this.state.statusBarHeight),M.default.overflowVisible),p.push(b.default.marginTopStyle(-1*this.state.statusBarHeight))),b.default.hasHorizontalSafeAreas(this.state.safeAreaHorizontalInsets)&&p.push(o.Styles.createViewStyle({marginLeft:-1*this.state.safeAreaHorizontalInsets.left,marginRight:-1*this.state.safeAreaHorizontalInsets.right},!1));const{primaryBackgroundColorStyle:m}=O.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return o.createElement(o.View,{style:[F.panel,m]},d,o.createElement(o.ScrollView,{ref:this._onScrollViewRef,style:g,onScroll:this._onScroll,scrollEventThrottle:32,keyboardShouldPersistTaps:!0},o.createElement(o.View,{style:p},o.createElement(E.default,{ref:this._onUserCardRef,allowEditAvatar:!0,allowOpenAvatarInMediaViewer:!1,replaceHeader:!0,userMri:h.default.getSkypeMri()})),o.createElement(o.View,{style:F.container},this._renderShareProfileOption(),this._getSectionTitle(u.getString("UserSettingsPanel.MyProfileTitleUpper"),"profile",n),o.createElement(x.default,{userMri:h.default.getSkypeMri()}),this._getHelpAndAbout())))}_getHelpAndAbout(){return o.createElement(o.View,null,this._getSectionTitle(u.getString("UserSettingsPanel.OtherUpperTitle"),"other",F.sectionHeader),this._getDebugSettings(),o.createElement(D.WideButton,{icon:w.SkypeIcon.ContactGroup,label:u.getString("MyUserInfo.ManagePrivacyTitle"),onPressed:this._goToPrivacy}),o.createElement(D.WideButton,{icon:w.SkypeIcon.Info,label:u.getString("UserSettingsPanel.HelpAndAboutTitle"),onPressed:this._onHelpAndFeedbackButtonPressed}))}_getSectionTitle(e,t,i){return o.createElement(P.SectionTitle,{key:t,title:e,titleStyles:i})}_renderShareProfileOption(){return o.createElement(B.default,{origin:r.ContactInviteOrigin.ShareProfile,desktop:!1})}_getDebugSettings(){}_updateStatusBar(){const{defaultStatusBarTheme:e}=O.themeColors(this._getContext(),this.props.route.params.colorThemeOverride);this._updateStatusBarStyle(k.default.createBarStyle(e,!0))}_isHeaderOpaqueStyle(){return this.state.showScreenReaderHeader||this.state.showHeader}}t.default=V},34898:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(75672),s=i(67930),a=i(52262),r=i(87134),l=i(46096),c=i(15877),d=i(33754),u=i(18078),g=i(69156),h=i(28377),p=i(54976),m=i(85683),S=i(90631),C=i(11010),f=i(80837),y=i(19675),_=i(67977),v=i(97634),b=(0,c.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),content:()=>n.Styles.createViewStyle({flex:1,paddingHorizontal:20}),contentSection:()=>n.Styles.createViewStyle({paddingVertical:10}),visibilityTitle:()=>n.Styles.createViewStyle({paddingBottom:15}),visibilitySubtitle:()=>n.Styles.createViewStyle({paddingBottom:10}),avatarContainer:()=>n.Styles.createViewStyle({alignItems:"center",alignSelf:"center",padding:10}),radioButton:()=>n.Styles.createTextStyle({paddingVertical:10})});class T extends s.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._changeProfilePictureVisibility=e=>{e!==this.state.avatarPolicy&&h.default.setAvatarPolicy(e,l.AvatarPolicyChangeOrigin.ProfilePicturePanel)}}static getHeaderText(){return d.getString("UserSettingsPanel.ProfilePictureTitle")}_buildState(e,t){return{avatarPolicy:h.default.getAvatarPolicy(t),hasPhoto:!!a.default.getDisplayableProfile(u.default.getSkypeMri()).getAvatarUrl()}}render(){const e=this.state.hasPhoto?d.getString("UserSettingsPanel.ProfilePictureCaptionWithPhoto"):d.getString("UserSettingsPanel.ProfilePictureCaptionNoPhoto"),t=n.createElement(n.View,{style:b.contentSection},n.createElement(n.View,null,n.createElement(m.SectionTitle,{title:e,titleStyles:f.default.flexOne,numberOfLines:2})),n.createElement(o.default,{mri:u.default.getSkypeMri(),iconSize:_.UserIconSize.Size160,style:b.avatarContainer,accessibilityLabel:d.getString("MyProfilePanel.SelectAvatarAccessibilityLabel"),origin:l.AvatarPickerOrigin.ProfilePicturePanel,showUploadPictureButton:!0,showAltViewAsMediaIcon:!0})),i=[{key:g.OptionsServiceAvatarPolicyValueType.EVERYONE_CAN_SEE,text:d.getString("UserSettingsPanel.ProfilePicturePublicLabel"),secondaryText:d.getString("UserSettingsPanel.ProfilePicturePublicDescription"),disabled:!this.state.hasPhoto},{key:g.OptionsServiceAvatarPolicyValueType.BUDDIES_OR_AUTHORIZED_CAN_SEE,text:d.getString("UserSettingsPanel.ProfilePictureContactsOnlyLabel"),secondaryText:d.getString("UserSettingsPanel.ProfilePictureContactsOnlyDescription"),disabled:!this.state.hasPhoto}],s=v.currentTheme(this._getContext(),this.props.route.params.colorThemeOverride),{disabledTextColorStyle:a,primaryBackgroundColorStyle:c}=v.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride),h=[C.default.bodyFontStyle(s)],T=[C.default.captionFontStyle(s)];this.state.hasPhoto||(h.push(a),T.push(a));const P=n.createElement(n.View,{style:[b.contentSection]},n.createElement(m.SectionTitle,{title:d.getString("UserSettingsPanel.ProfilePictureVisibilitySubtitle"),titleStyles:b.visibilitySubtitle,numberOfLines:2}),n.createElement(p.default,{radioButtons:i,selectedKey:this.state.hasPhoto?this.state.avatarPolicy:void 0,rowStyle:b.radioButton,textStyle:h,secondaryTextStyle:T,dividerType:p.DividerType.None,onSelected:this._changeProfilePictureVisibility}));return n.createElement(n.View,{style:[b.panel,c]},n.createElement(S.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:{closeButtonType:S.CloseButtonType.Back}}),n.createElement(n.ScrollView,{style:f.default.flexOne},n.createElement(n.View,{style:b.content},t,n.createElement(y.BodyText,{style:b.visibilityTitle},d.getString("UserSettingsPanel.ProfilePictureVisibilityTitle")),n.createElement(r.default,null),P)))}_getHeaderText(e){return T.getHeaderText()}}t.default=T},10250:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(17267),s=i(19784),a=i(61253),r=i(33754),l=i(78735);class c extends o.default{constructor(){super(...arguments),this._allowReset=!1,this._includeNumbers=!0}_getPanelName(){return"Raw app preferences"}_getSubscribedState(){const e=l.default.getUserPreferencesLocal(),t=l.default.internal_getUserPreferencesLocalDefaults();return{preferences:e,overrides:this._calculateOverrides(e,t)}}_calculateOverrides(e,t){const i={};return n.each(e,((e,o)=>{if(void 0===t[o])void 0!==e&&(i[o]=e);else if(n.isObject(e)){const s=this._calculateOverrides(e,t[o]);n.isEmpty(s)||(i[o]=s)}else(0,a.default)(e,t[o])||(i[o]=e)})),{MyUserPreferencesLocalStore:i}}_generateConfigItems(e){const t=[];n.each(e.preferences,((i,n)=>{this._generateListOfItemsRecursive(t,"MyUserPreferencesLocalStore",[n],i,e.overrides)}));const i=n.sortBy(t,"featureName");return i.unshift(this._createHeaderItem("MyUserPreferencesLocalStore")),i}_generateOverrideItems(e){const t=[];return n.each(e.overrides,((e,i)=>{t.push(this._createHeaderItem(i)),n.each(e,((e,n)=>{this._generateListOfItemsRecursive(t,i,[n],e)}))})),t}_onResetAll(){const e=[{text:r.getString("Global.CancelLabel"),isCancel:!0},{text:r.getString("Global.DeleteLabel"),onPress:()=>{l.default.reset()},style:"destructive",isSubmit:!0}],t="Are you sure you want to reset all local preferences?";s.default.showWithOptions({title:"Reset all preferences",dialogAccessibilityTitle:t,message:t,buttons:e,rootViewId:this._getRootViewId()})}_onListItemClickBuilder(e,t,i){return()=>{const e={};n.set(e,t,i),l.default.setUserPreferencesLocal(e)}}_onResetPressBuilder(e,t){return e=>{e.stopPropagation()}}}t.default=c},46999:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(67930),s=i(98278),a=i(48642),r=i(15877),l=i(75913),c=i(33754),d=i(90631),u=i(22222),g=i(81760),h=i(11010),p=i(19675),m=i(97634),S=20,C=(0,r.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),scrollContainer:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch",marginLeft:S,marginRight:S}),textHeader:()=>n.Styles.createTextStyle({paddingTop:S,paddingBottom:S}),textInputContainer:()=>n.Styles.createViewStyle({borderRadius:10,marginTop:10}),textInput:()=>n.Styles.createTextInputStyle({padding:6,borderRadius:10,font:h.default.font.uiDisplayRegular,fontSize:h.default.controlFontSize.body,wordBreak:"break-word",backgroundColor:g.Color.transparent,height:180,textAlignVertical:"top"}),buttonContainer:()=>n.Styles.createViewStyle({alignItems:"stretch",marginTop:S}),linksContainer:()=>n.Styles.createViewStyle({flex:1,alignItems:"flex-end",justifyContent:"center",flexDirection:"row",marginBottom:S,marginTop:50}),linkDivider:()=>n.Styles.createTextStyle({marginLeft:8,marginRight:8})});class f extends o.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._openTerms=()=>{l.default.openTerms()},this._openPrivacy=()=>{l.default.openPrivacy()},this._onChangeText=e=>{this.setState({userInput:e})},this._onSendButtonPressed=()=>{a.default.handleSubmitFeedbackIntent(void 0,!0,!1,this._getRootViewId(),this.state.userInput)}}static getHeaderText(){return c.getString("SendDiagnosticLogsDialog.SendDiagnosticLogs")}_buildState(e,t){let i={};return t&&(i.userInput=""),i}render(){const e=n.createElement(d.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:{closeButtonType:d.CloseButtonType.Back}}),{primaryBackgroundColorStyle:t,rowHighlightViewStyle:i,primaryTextColorStyle:o}=m.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride),{secondaryTextColor:a}=m.themeColors(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:[C.panel,t]},e,n.createElement(n.ScrollView,null,n.createElement(n.View,{style:C.scrollContainer},n.createElement(p.Header,{size:4,style:C.textHeader},c.getString("SendDiagnosticLogsDialog.TextTitle")),n.createElement(p.BodyText,null,c.getString("SendDiagnosticLogsDialog.TextBody")),n.createElement(n.View,{style:[C.textInputContainer,i]},n.createElement(n.TextInput,{style:[C.textInput,o],value:this.state.userInput,onChangeText:this._onChangeText,autoCorrect:!0,multiline:!0,autoCapitalize:"sentences",placeholder:c.getString("SendDiagnosticLogsDialog.TextInputPlaceholder"),placeholderTextColor:a,maxLength:1e3,clearButtonMode:"never"})),n.createElement(n.View,{style:C.buttonContainer},n.createElement(u.default,{buttonStyle:s.SXButtonStyle.ThemeFill,onPress:this._onSendButtonPressed,title:c.getString("SendDiagnosticLogsDialog.SendDiagnosticLogs"),disabled:0===this.state.userInput.length,allowTextWrap:!0})),n.createElement(n.View,{style:C.linksContainer},n.createElement(n.Button,{onPress:this._openTerms},n.createElement(p.Subtitle,null,c.getString("ReportAProblemDialog.TermsOfUseButton"))),n.createElement(p.Subtitle,{style:C.linkDivider},"|"),n.createElement(n.Button,{onPress:this._openPrivacy},n.createElement(p.Subtitle,null,c.getString("ReportAProblemDialog.PrivacyAndCookiePolicyButton")))))))}_getHeaderText(e){return f.getHeaderText()}}t.default=f},63201:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(84122),s=i(19436),a=i(75352),r=i(96074),l=i(72514),c=i(98278),d=i(73175),u=i(96623),g=i(72822),h=i(70635),p=i(54365),m=i(34452),S=i(12150),C=i(15877),f=i(33754),y=i(79430),_=i(17093),v=i(20941),b=i(6476),T=i(51070),P=i(90631),A=i(16392),k=i(12187),I=i(80837),w=i(18956),N=i(97634),M=(0,C.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),settingsBlockContainer:()=>n.Styles.createViewStyle({alignSelf:"stretch",paddingHorizontal:10,overflow:"visible"})});class E extends r.BaseNavigationView{constructor(e){super(e),this._setRightButton=e=>{this.setState({rightButton:e})}}_buildState(e,t){return{safeAreaHorizontalPaddingStyle:T.default.horizontalPaddingStyle(c.HorizontalInsetZero)}}componentDidMount(){super.componentDidMount();const{defaultStatusBarTheme:e}=N.themeColors(this._getContext(),this.props.route.params.colorThemeOverride);this._updateStatusBarStyle(k.default.createBarStyle(e))}render(){let e,t;switch(this.props.route.params.group){case _.SettingsGroup.Notifications:e=f.getString("UserSettingsPanel.NotificationsTitle"),t=n.createElement(v.default,null);break;case _.SettingsGroup.Contacts:e=f.getString("UserSettingsPanel.ContactsTitle"),t=n.createElement(d.default,null);break;case _.SettingsGroup.Privacy:e=f.getString("UserSettingsPanel.PrivacyHeader"),t=n.createElement(b.default,null);break;case _.SettingsGroup.Chat:e=f.getString("UserSettingsPanel.MessagingAndChatsTitle"),t=n.createElement(l.default,null);break;case _.SettingsGroup.HelpAndFeedback:e=f.getString("MyProfilePanel.HelpAndFeedbackButtonTitle"),t=n.createElement(m.default,null);break;case _.SettingsGroup.MyAccountAndProfile:e=f.getString("UserSettingsPanel.MyAccountAndProfileTitle"),t=n.createElement(y.default,null);break;case _.SettingsGroup.AccountAndProfile:e=f.getString("UserSettingsPanel.MyAccountAndProfileTitle"),t=n.createElement(o.default,null);break;case _.SettingsGroup.AudioVideoSettings:e=f.getString("UserSettingsPanel.AudioVideoSettingsTitle"),t=n.createElement(s.default,{settingsMode:a.SettingsMode.All});break;case _.SettingsGroup.General:e=f.getString("UserSettingsPanel.GeneralTitle"),t=n.createElement(p.default,null);break;case _.SettingsGroup.Debug:e="[Debug]",t=n.createElement(u.default,null);break;case _.SettingsGroup.HotKeys:e=f.getString("KeyboardShortcuts.Title2"),t=n.createElement(S.default,null);break;case _.SettingsGroup.ReportProblem:e=f.getString("FeedbackMechanism.ReportAProblemDialogTitle"),t=n.createElement(h.default,null);break;case _.SettingsGroup.ThemeSettings:e=f.getString("UserSettingsPanel.AppearanceButton"),t=n.createElement(w.default,{origin:g.DialogNavOrigin.Settings,setRightButton:this._setRightButton})}const i=[M.settingsBlockContainer];this.state.safeAreaHorizontalPaddingStyle&&i.push(this.state.safeAreaHorizontalPaddingStyle);const r={closeButtonType:this.props.route.params.navigationDirection===A.StackNavigationDirection.Present?P.CloseButtonType.Close:P.CloseButtonType.Back},{primaryBackgroundColorStyle:c}=N.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:[M.panel,c]},n.createElement(P.SimplePanelHeader,{panelName:e,leftButton:r,rightButtons:this.state.rightButton,delayHeaderFocus:this._getContext().isPresentedByMobileStackNavigator}),n.createElement(n.ScrollView,{style:I.default.flexOne,scrollIndicatorInsets:{top:0,left:0,right:1,bottom:0}},n.createElement(n.View,{style:i},t)))}}t.default=E},67164:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(97691),s=i(87720),a=i(67930),r=i(94224),l=i(98925),c=i(98278),d=i(15877),u=i(32182),g=i(51070),h=i(90631),p=i(11828),m=i(80837),S=i(97634),C=(0,d.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),settingsBlockContainer:()=>n.Styles.createViewStyle({alignSelf:"stretch",paddingHorizontal:10,overflow:"visible",flexGrow:1}),settingsBlockContainerDesktop:()=>n.Styles.createViewStyle({paddingHorizontal:20}),toggle:()=>n.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:6})}),f=[{label:"Production",value:l.ConversationServiceUrlType.Prod},{label:"Dev",value:l.ConversationServiceUrlType.Dev}],y=[{label:"Production",value:l.UdpTransportUrlType.Prod},{label:"Dev",value:l.UdpTransportUrlType.Dev}],_=[{label:"Production",value:l.KeyDistributionUrlType.Prod},{label:"Dev",value:l.KeyDistributionUrlType.Dev}],v=[{label:"4",value:"4"},{label:"10",value:"10"},{label:"12",value:"12"},{label:"51",value:"51"}];class b extends a.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._onHeaderResetButtonClick=e=>{this._updateSlimcoreProperty(l.SlimcoreSetupKeys.ConversationServiceUrl,e?l.ConversationServiceUrlType.Prod:l.ConversationServiceUrlType.Dev,!1),this._updateSlimcoreProperty(l.SlimcoreSetupKeys.UdpTransportUrl,e?l.UdpTransportUrlType.Prod:l.UdpTransportUrlType.Dev,!1),this._updateSlimcoreProperty(l.SlimcoreSetupKeys.KeyDistributionUrl,e?l.KeyDistributionUrlType.Prod:l.KeyDistributionUrlType.Dev,!1),this._updateSlimcoreProperty(l.SlimcoreSetupKeys.EnableUdpCanary,e,!1),this._updateSlimcoreProperty(l.SlimcoreSetupKeys.UdpEnabled,e,!1),this.forceUpdate()},this._updateSlimcoreProperty=(e,t,i=!0)=>{const n="boolean"==typeof t?t?"1":"0":t;r.default.CallingStore.setupKey(e,n),i&&this.forceUpdate()}}_buildState(e,t){return{safeAreaHorizontalPaddingStyle:this._getContext().isPresentedInDesktopSubview?void 0:g.default.horizontalPaddingStyle(c.HorizontalInsetZero)}}componentDidMount(){super.componentDidMount(),this._updateState()}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this._updateState()}_updateState(){const e=[r.default.CallingStore.getIntKey(l.SlimcoreSetupKeys.UdpEnabled),r.default.CallingStore.getIntKey(l.SlimcoreSetupKeys.MaxNrOfVideosVisibleInUI),r.default.CallingStore.getIntKey(l.SlimcoreSetupKeys.EnableDnsCache),r.default.CallingStore.getIntKey(l.SlimcoreSetupKeys.AdditionalVideoLinesForGroupCalls),r.default.CallingStore.getIntKey(l.SlimcoreSetupKeys.EnableEncryptedHttp),r.default.CallingStore.getIntKey(l.SlimcoreSetupKeys.EnableEncryptedHttpForBroker),r.default.CallingStore.getIntKey(l.SlimcoreSetupKeys.EnableUdpCanary),r.default.CallingStore.getIntKey(l.SlimcoreSetupKeys.AutoJoinOnConflict),r.default.CallingStore.getIntKey(l.SlimcoreSetupKeys.EnableEcoMode)];o.all(e).then((e=>{const[t,i,n,o,s,a,r,l,c]=e;this.setState({udpEnabled:1===t,maxNrOfVideosVisibleInUI:i,enableDnsCache:1===n,additionalVideoLinesForGroupCalls:1===o,enableEncryptedHttp:1===s,enableEncryptedHttpForBroker:1===a,enableUdpCanary:1===r,autoJoinOnConflict:1===l,enableEcoMode:1===c})}));const t=[r.default.CallingStore.getKey(l.SlimcoreSetupKeys.ConversationServiceUrl),r.default.CallingStore.getKey(l.SlimcoreSetupKeys.UdpTransportUrl),r.default.CallingStore.getKey(l.SlimcoreSetupKeys.KeyDistributionUrl)];o.all(t).then((e=>{const[t,i,n]=e;this.setState({conversationServiceUrl:t,udpTransportUrl:i,keyDistributionUrl:n})}))}render(){const e=[C.settingsBlockContainer];this._getContext().isPresentedInGenericDesktopModal&&e.push(C.settingsBlockContainerDesktop),this.state.safeAreaHorizontalPaddingStyle&&e.push(this.state.safeAreaHorizontalPaddingStyle);const t=this.props.route.params.isAloneInNavStack&&this._getContext().isPresentedInSplitView?void 0:{closeButtonType:this.props.route.params.isAloneInNavStack?h.CloseButtonType.Close:h.CloseButtonType.Back},i=[{onPress:()=>this._onHeaderResetButtonClick(!1),icon:p.SkypeIcon.Bot,title:"Reset to Dev"},{onPress:()=>this._onHeaderResetButtonClick(!0),icon:p.SkypeIcon.TV,title:"Reset to Prod"}],o=n.createElement(h.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:t,rightButtons:i}),{primaryBackgroundColorStyle:s}=S.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:[C.panel,s]},o,n.createElement(n.ScrollView,{style:m.default.flexOne},n.createElement(n.View,{style:e},this._renderListPicker(l.SlimcoreSetupKeys.ConversationServiceUrl,f),this._renderListPicker(l.SlimcoreSetupKeys.UdpTransportUrl,y),this._renderListPicker(l.SlimcoreSetupKeys.KeyDistributionUrl,_),this._renderListPicker(l.SlimcoreSetupKeys.MaxNrOfVideosVisibleInUI,v),this._renderToggle(l.SlimcoreSetupKeys.UdpEnabled,this.state.udpEnabled),this._renderToggle(l.SlimcoreSetupKeys.EnableEcoMode,this.state.enableEcoMode),this._renderToggle(l.SlimcoreSetupKeys.EnableDnsCache,this.state.enableDnsCache),this._renderToggle(l.SlimcoreSetupKeys.AdditionalVideoLinesForGroupCalls,this.state.additionalVideoLinesForGroupCalls),this._renderToggle(l.SlimcoreSetupKeys.EnableEncryptedHttp,this.state.enableEncryptedHttp),this._renderToggle(l.SlimcoreSetupKeys.EnableEncryptedHttpForBroker,this.state.enableEncryptedHttpForBroker),this._renderToggle(l.SlimcoreSetupKeys.EnableUdpCanary,this.state.enableUdpCanary),this._renderToggle(l.SlimcoreSetupKeys.AutoJoinOnConflict,this.state.autoJoinOnConflict))))}_renderToggle(e,t){return n.createElement(s.default,{id:e,style:C.toggle,isOn:t,accessibilityLabel:e,onChange:(t,i)=>this._updateSlimcoreProperty(e,i)},n.createElement(n.Text,null,this._getTitle(e)))}_renderListPicker(e,t){return n.createElement(u.default,{id:e,items:t,rowTitle:this._getTitle(e),isItemSelected:t=>this._isItemSelected(e,t),onHandleItemSelection:t=>this._updateSlimcoreProperty(e,t),selectedItemLabel:this._getSelectedItemLabel(e)})}_isItemSelected(e,t){switch(e){case l.SlimcoreSetupKeys.ConversationServiceUrl:return t===this.state.conversationServiceUrl;case l.SlimcoreSetupKeys.UdpTransportUrl:return t===this.state.udpTransportUrl;case l.SlimcoreSetupKeys.KeyDistributionUrl:return t===this.state.keyDistributionUrl;case l.SlimcoreSetupKeys.MaxNrOfVideosVisibleInUI:return t===this.state.maxNrOfVideosVisibleInUI;default:return!1}}_getSelectedItemLabel(e){switch(e){case l.SlimcoreSetupKeys.ConversationServiceUrl:return this.state.conversationServiceUrl===l.ConversationServiceUrlType.Dev?"Dev":"Production";case l.SlimcoreSetupKeys.UdpTransportUrl:return this.state.udpTransportUrl===l.UdpTransportUrlType.Dev?"Dev":"Production";case l.SlimcoreSetupKeys.KeyDistributionUrl:return this.state.keyDistributionUrl===l.KeyDistributionUrlType.Dev?"Dev":"Production";case l.SlimcoreSetupKeys.MaxNrOfVideosVisibleInUI:return this.state.maxNrOfVideosVisibleInUI+" participants";default:return""}}_getTitle(e){return Object.getOwnPropertyNames(l.SlimcoreSetupKeys).find((t=>l.SlimcoreSetupKeys[t]===e))}_getHeaderText(e){return"Manage Slimcore Flags"}}t.default=b},98155:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConsentPanel=void 0;const n=i(16778),o=i(89391),s=i(67930),a=i(46096),r=i(36237),l=i(33754),c=i(30124),d=i(90631),u=i(55585),g=i(80837),h=i(4775),p=i(53374),m=i(92798),S=i(97634);class C extends s.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._onCloseButtonPress=e=>{e&&e.stopPropagation();const t=p.default.newCauseId();r.log(a.LogTraceArea.Navigation,"SpeechConsent panel close, causeId: "+t),this._goBack(t)},this._onContribute=()=>{u.default.setSpeechConsentValue(!0),this.setState({showReceipt:!0})},this._onDoNotContribute=()=>{u.default.setSpeechConsentValue(!1),this._onCloseButtonPress()}}_buildState(e,t){let i={isUsingStackNavigationContext:c.default.isUsingStackNavigationContext(),privacyStatementUrl:o.default.getConfigSettings().translator.privacyStatementUrl};return t&&(i.showReceipt=!1),i}_getHeaderText(e){return l.getString("SpeechConsentPanel.PanelTitle")}_getCloseButtonTitle(){return l.getString("Global.CloseButtonTitle")}render(){const{headerIconColor:e,iconHoverColor:t}=S.themeColors(this._getContext(),this.props.route.params.colorThemeOverride),i=this._getCloseButtonTitle(),o=this.state.isUsingStackNavigationContext?{closeButtonType:d.CloseButtonType.Close,color:e,title:i}:{closeButtonType:this.props.route.params.isAloneInNavStack?d.CloseButtonType.Close:d.CloseButtonType.Back,color:e,hoverColor:t,onPress:this._onCloseButtonPress,title:this.props.route.params.isAloneInNavStack?i:l.getString("Global.BackButtonTitle")},s=n.createElement(d.SimplePanelHeader,{useTransparentBackground:!0,hideBottomBorder:!0,leftButton:o});let a;a=this.state.showReceipt?n.createElement(h.default,{onDone:this._onCloseButtonPress}):n.createElement(m.default,{onContribute:this._onContribute,onDoNotContribute:this._onDoNotContribute});const{primaryBackgroundColorStyle:r}=S.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:[g.default.flexOne,r]},s,a)}}t.SpeechConsentPanel=C,t.default=C},82994:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(89391),a=i(67930),r=i(7095),l=i(11930),c=i(98278),d=i(87134),u=i(5581),g=i(15877),h=i(33754),p=i(46929),m=i(51070),S=i(90631),C=i(70102),f=i(16874),y=i(80837),_=i(97634),v=(0,g.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),container:()=>n.Styles.createViewStyle({alignSelf:"stretch",paddingHorizontal:10,overflow:"visible",flexGrow:1}),containerDesktop:()=>n.Styles.createViewStyle({paddingHorizontal:20}),toggle:()=>n.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:6})});class b extends a.BaseNavigationViewPresentedInModal{static getHeaderText(){return h.getString("CallingSettingsPanel.SubtitlesButtonLabel")}_buildState(e,t){const i=s.default.getS4LCMCFeatures();return{enableSubtitlesForAllCalls:p.default.getEnableSubtitlesForAllCalls(),enableOnlyShowSubtitlesForOtherParticipants:p.default.getOnlyShowSubtitlesForOtherParticipants(),enableMessageTranslation:i.enableMessageTranslation,callCaptionsEnableForAllCallsOption:i.callCaptionsEnableForAllCallsOption,safeAreaHorizontalPaddingStyle:this._getContext().isPresentedInDesktopSubview?void 0:m.default.horizontalPaddingStyle(c.HorizontalInsetZero),isSpokenLanguageSupported:u.default.isDeviceLanguageSupportedForTranslation()}}render(){const e=[v.container];this._getContext().isPresentedInGenericDesktopModal&&e.push(v.containerDesktop),this.state.safeAreaHorizontalPaddingStyle&&e.push(this.state.safeAreaHorizontalPaddingStyle);const t=this.props.route.params.isAloneInNavStack&&this._getContext().isPresentedInSplitView?void 0:{closeButtonType:this.props.route.params.isAloneInNavStack?S.CloseButtonType.Close:S.CloseButtonType.Back},i=n.createElement(S.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:t}),{primaryBackgroundColorStyle:o}=_.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:[v.panel,o]},i,n.createElement(n.ScrollView,{style:y.default.flexOne},n.createElement(n.View,{style:e},this._getSpokenLanguageSetting(),this._getSubtitleForAllCallsToggle(),this._getSubtitlesForOtherOnlyToggle(),this._getSubtitleSettingsMessage())))}_getHeaderText(e){return b.getHeaderText()}_getSpokenLanguageSetting(){if(this.state.enableMessageTranslation)return this._wrapElementWithDivider(n.createElement(C.default,{rowTitle:!0,caption:!0,onHandleMenuCommand:e=>{p.default.setCallTranslatorBotSpokenLanguageLocale(e)}}))}_getSubtitleForAllCallsToggle(){if(!this.state.callCaptionsEnableForAllCallsOption)return;const e=h.getString("SubtitlesSettingsPanel.EnableSubtitlesForAllCallsLabel"),t=h.getString("SubtitlesSettingsPanel.EnableSubtitlesForAllCallsExplanation");return this._wrapElementWithDivider(n.createElement(o.default,{style:v.toggle,isOn:this.state.enableSubtitlesForAllCalls&&this.state.isSpokenLanguageSupported,disable:!this.state.isSpokenLanguageSupported,accessibilityLabel:l.default.combinedAccessibilityLabel(e,t),onChange:(e,t)=>{p.default.setEnableSubtitlesForAllCalls(t)}},(0,r.renderLabels)(e,t,!this.state.isSpokenLanguageSupported)))}_getSubtitlesForOtherOnlyToggle(){const e=h.getString("SubtitlesSettingsPanel.OnlyShowSubtitlesForOtherParticipantsLabel"),t=h.getString("SubtitlesSettingsPanel.OnlyShowSubtitlesForOtherParticipantsExplanation");return this._wrapElementWithDivider(n.createElement(o.default,{style:v.toggle,isOn:this.state.enableOnlyShowSubtitlesForOtherParticipants&&this.state.isSpokenLanguageSupported,disable:!this.state.isSpokenLanguageSupported,accessibilityLabel:l.default.combinedAccessibilityLabel(e,t),onChange:(e,t)=>{p.default.setOnlyShowSubtitlesForOtherParticipants(t)}},(0,r.renderLabels)(e,t,!this.state.isSpokenLanguageSupported)))}_getSubtitleSettingsMessage(){if(!this.state.enableMessageTranslation)return n.createElement(f.default,null)}_wrapElementWithDivider(e){return n.createElement(n.View,null,e,n.createElement(d.default,{marginTop:10}))}}t.default=b},44699:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(34828),s=i(52571),a=i(16778),r=i(67930),l=i(15877),c=i(33754),d=i(90631),u=i(81760),g=i(11010),h=g.default.fontSize.size13Deprecated,p=(0,l.lazyProperties)({rootPanel:()=>a.Styles.createViewStyle({flex:1,alignSelf:"stretch",backgroundColor:u.Color.white}),thirdPartyNoticesText:()=>a.Styles.createTextInputStyle({paddingHorizontal:15,font:g.default.font.uiDisplayRegular,fontSize:h,color:u.Color.black})});class m extends r.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._renderItem=(e,t)=>{const i=Number(e.key),n=this.state.legalParagraphs[i];return a.createElement(a.Text,{style:p.thirdPartyNoticesText},n)}}static getHeaderText(){return c.getString("ThirdPartyNoticesPanel.ThirdPartyNoticesTitle")}_buildState(e,t){let i={};return t&&(i.legalParagraphs=[],i.itemList=[]),i}componentDidMount(){super.componentDidMount(),s.default.getNotices().then((e=>{if(!this.isComponentMounted())return;const t=n.compact(e.split("\n")),i=n.map(t,((e,t)=>({key:t.toString(),measureHeight:!0,height:Math.max(Math.round(e.length*h/77),h),template:"legal"})));this.setState({legalParagraphs:t,itemList:i})}))}_getHeaderText(e){return m.getHeaderText()}render(){return a.createElement(a.View,{style:p.rootPanel},a.createElement(d.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:{closeButtonType:this.props.route.params.isAloneInNavStack?d.CloseButtonType.Close:d.CloseButtonType.Back}}),a.createElement(o.VirtualListView,{itemList:this.state.itemList,renderItem:this._renderItem}))}}t.default=m},59161:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(89391),s=i(67930),a=i(98278),r=i(87134),l=i(15877),c=i(33754),d=i(46929),u=i(51070),g=i(90631),h=i(70102),p=i(59452),m=i(80837),S=i(33574),C=i(97634),f=(0,l.lazyProperties)({panel:()=>n.Styles.createViewStyle({flex:1,alignSelf:"stretch"}),settingsBlockContainer:()=>n.Styles.createViewStyle({alignSelf:"stretch",paddingHorizontal:10,overflow:"visible",flexGrow:1}),settingsBlockContainerDesktop:()=>n.Styles.createViewStyle({paddingHorizontal:20})});class y extends s.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._onSpokenLanguagePickerHandleMenuCommand=e=>{d.default.setCallTranslatorBotSpokenLanguageLocale(e)},this._onSubtitleLanguagePickerHandleMenuCommand=e=>{d.default.setCallTranslatorBotSubtitleLanguageLocale(e)}}static getHeaderText(){return c.getString("UserSettingsPanel.TranslationSettingsTitle")}_buildState(e,t){return{enableSubtitlesForAllCalls:d.default.getEnableSubtitlesForAllCalls(),enableOnlyShowSubtitlesForOtherParticipants:d.default.getOnlyShowSubtitlesForOtherParticipants(),safeAreaHorizontalPaddingStyle:this._getContext().isPresentedInDesktopSubview?void 0:u.default.horizontalPaddingStyle(a.HorizontalInsetZero),enableMessageTranslation:o.default.getS4LCMCFeatures().enableMessageTranslation,enableSpeechConsentFlow:o.default.getS4LCMCFeatures().enableSpeechConsentFlow}}render(){const e=[f.settingsBlockContainer];this._getContext().isPresentedInGenericDesktopModal&&e.push(f.settingsBlockContainerDesktop),this.state.safeAreaHorizontalPaddingStyle&&e.push(this.state.safeAreaHorizontalPaddingStyle);const t=this.props.route.params.isAloneInNavStack&&this._getContext().isPresentedInSplitView?void 0:{closeButtonType:this.props.route.params.isAloneInNavStack?g.CloseButtonType.Close:g.CloseButtonType.Back},i=n.createElement(g.SimplePanelHeader,{panelName:this._getHeaderText(this.state),leftButton:t}),{primaryBackgroundColorStyle:o}=C.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:[f.panel,o]},i,n.createElement(n.ScrollView,{style:m.default.flexOne},n.createElement(n.View,{style:e},this._getSpokenLanguagePicker(),this._getSubtitleLanguagePicker(),this._getTranslationVoicePicker())))}_getHeaderText(e){return y.getHeaderText()}_getSpokenLanguagePicker(){return this._wrapElementWithDivider(n.createElement(h.default,{rowTitle:!0,caption:!0,onHandleMenuCommand:this._onSpokenLanguagePickerHandleMenuCommand}))}_getTranslationVoicePicker(){return this._wrapElementWithDivider(n.createElement(S.default,null))}_getSubtitleLanguagePicker(){if(!this.state.enableMessageTranslation)return this._wrapElementWithDivider(n.createElement(p.default,{rowTitle:!0,caption:!0,onHandleMenuCommand:this._onSubtitleLanguagePickerHandleMenuCommand}))}_wrapElementWithDivider(e){return n.createElement(n.View,null,e,n.createElement(r.default,{marginTop:10}))}}t.default=y},22573:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96074),o=i(46880);t.default=(0,n.forNavigation)(o.default)},92024:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96074),o=i(69197);t.default=(0,n.forNavigation)(o.default)},87634:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96074),o=i(41736);t.default=(0,n.forNavigation)(o.default)},15308:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(31844),s=i(2604),a=i(16778),r=i(44770),l=i(97691),c=i(3056),d=i(98278),u=i(72822),g=i(46096),h=i(72146),p=i(39285),m=i(36237),S=i(15877),C=i(33754),f=i(99201),y=i(4735),_=i(88553),v=i(28159),b=i(53154),T=i(38980),P=i(83643),A=i(33348),k=i(81736),I=i(29130),w=i(63823),N=i(15415),M=i(81760),E=i(11010),x=i(11828),L=i(34528),R=i(78262),D=i(53374),B=i(97634),O=i(96074),F=(0,S.lazyProperties)({fillFlex:()=>a.Styles.createViewStyle({flex:1,alignSelf:"stretch",alignItems:"center",justifyContent:"center",backgroundColor:M.Color.black}),panel:()=>a.Styles.createViewStyle({flex:1,alignSelf:"stretch",alignItems:"center",justifyContent:"center"}),imageContainer:()=>a.Styles.createViewStyle({flex:1,alignSelf:"stretch",justifyContent:"flex-end"}),imageContainerCompact:()=>a.Styles.createViewStyle({justifyContent:"flex-start"}),imageContainerV2:()=>a.Styles.createViewStyle({justifyContent:"flex-start"}),image:()=>a.Styles.createViewStyle({borderTopLeftRadius:20,borderTopRightRadius:20,width:300,height:356,backgroundColor:M.Color.transparent,alignSelf:"center",justifyContent:"center",borderColor:M.Color.transparent,borderWidth:0,paddingTop:20}),imageSmall:()=>a.Styles.createViewStyle({width:280,height:320,alignSelf:"center",justifyContent:"flex-start"}),permissionRow:()=>a.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"center",alignSelf:"stretch",paddingLeft:10,paddingRight:20,marginVertical:10}),fakeText:()=>a.Styles.createViewStyle({height:6,borderRadius:3,flex:1,backgroundColor:M.Color.gray200,marginHorizontal:10}),fakeTextDark:()=>a.Styles.createViewStyle({backgroundColor:M.Color.gray300}),descriptionText:()=>a.Styles.createTextStyle({marginHorizontal:50,textAlign:"center",lineHeight:21,color:M.Color.black}),darkThemeDescription:()=>a.Styles.createTextStyle({color:M.Color.white}),imageNew:()=>a.Styles.createImageStyle({alignSelf:"center",borderColor:M.Color.transparent,borderWidth:0,width:200,height:198}),imageContainerCentered:()=>a.Styles.createViewStyle({justifyContent:"center",flexGrow:0,marginVertical:64}),imageContainerCenteredSmall:()=>a.Styles.createViewStyle({justifyContent:"center",flexGrow:0,marginTop:30,marginBottom:38}),textLarge:()=>a.Styles.createTextStyle({fontSize:E.default.fontSize.size18})});class V extends O.BaseNavigationView{constructor(){super(...arguments),this._orientationLockKey=n.uniqueId("PromptPermissionDialog"),this._onContentLayout=e=>{this.state.availableHeight!==e.height&&this.setState({availableHeight:e.height})},this._navigateToNext=()=>{if(this._sendTelemetryEvent(u.DialogNavExit.Submit),this.props.route.params.scenarioNavigator)return m.log(g.LogTraceArea.Onboarding,"PromptPermissionDialog navigateToNext - with scenario navigator"),void this.props.route.params.scenarioNavigator.goNext();m.log(g.LogTraceArea.Onboarding,"PromptPermissionDialog navigateToNext - no scenario navigator"),y.default.navigateToRecentsTab()},this._goBack=e=>(this._sendTelemetryEvent(u.DialogNavExit.Close),this.props.route.params.scenarioNavigator?(m.log(g.LogTraceArea.Onboarding,"PromptPermissionDialog goBack - with scenario navigator, causeId: "+e),this.props.route.params.scenarioNavigator.goBack(),!0):(m.log(g.LogTraceArea.Onboarding,"PromptPermissionDialog goBack - no scenario navigator, causeId: "+e),super._goBack(e))),this._onCloseButtonClicked=()=>{const e=D.default.newCauseId();m.log(g.LogTraceArea.Onboarding,"PromptPermissionDialog._onCloseButtonClicked,  causeId: "+e),this._goBack(e)},this._promptForPermissions=()=>{const e=k.default.systemPromptHasNotBeenDisplayed(R.PermissionType.Notifications),t=k.default.systemPromptHasNotBeenDisplayed(R.PermissionType.Microphone),i=k.default.systemPromptHasNotBeenDisplayed(R.PermissionType.Camera);l.Resolved().then((()=>{if(t)return this._requestPermission(R.PermissionType.Microphone).then(n.noop)})).then((()=>{if(i&&!this.state.enableInContextCameraPermission)return this._requestPermission(R.PermissionType.Camera).then(n.noop)})).then((()=>{if(e||!h.default.isSetupWizardCompleted(!1))return this._telemetryEvent&&this._telemetryEvent.markPermissionRequested(R.PermissionType.Notifications),_.default.initNotificationsAndRequestPermissions().then((e=>{this._telemetryEvent&&this._telemetryEvent.markPermissionGranted(R.PermissionType.Notifications,e);let t=e?s.PermissionStatus.Granted:s.PermissionStatus.Denied;m.log(g.LogTraceArea.Onboarding,"PromptPermissionDialog notification permission: "+e),k.default.setPermissionStatus(R.PermissionType.Notifications,t,t,s.PermissionOrigin.OnboardingPromptDialog)}))}),(()=>{this._telemetryEvent&&this._telemetryEvent.markNotificationPermissionRequestFailed(),m.log(g.LogTraceArea.Onboarding,"Notification permission request failed")})).finally((()=>{this._navigateToNext()}))}}_buildState(e,t){const i=this._getRootViewId(),n={animationIsPending:A.default.isAnimationPending(),deviceSize:I.default.deviceSize(i)};if(t){const t=(0,P.getOnboardingFeatures)(e.route.params.scenarioNavigator);n.themeAwareOnboardingEnabled=t.themeAwareOnboardingEnabled,n.enableInContextCameraPermission=t.enableInContextCameraPermission,n.learnMoreLink=t.features.userProfileScreen.learnMoreLink;const i=k.default.systemPromptHasNotBeenDisplayed(R.PermissionType.Notifications),o=k.default.systemPromptHasNotBeenDisplayed(R.PermissionType.Microphone);let s=!1;n.enableInContextCameraPermission||(s=k.default.systemPromptHasNotBeenDisplayed(R.PermissionType.Camera)),n.showUIPrompts=e.route.params.showUIPrompts&&(i||o||s),n.availableHeight=0,this._setupTelemetryEvent(e,i,o,s)}return n}componentDidMount(){super.componentDidMount(),f.default.addOrUpdateOrientationLock(this._orientationLockKey,o.DeviceOrientation.Portrait),this.state.animationIsPending||this.state.showUIPrompts||this._promptForPermissions()}componentDidUpdate(e,t,i){super.componentDidUpdate(e,t,i),this.state.animationIsPending||!t.animationIsPending||this.state.showUIPrompts||this._promptForPermissions()}componentWillUnmount(){super.componentWillUnmount(),f.default.removeOrientationLock(this._orientationLockKey),this._sendTelemetryEvent(u.DialogNavExit.CancelOrBack)}render(){if(this.state.showUIPrompts){const e=this.state.deviceSize===I.DeviceSize.Small,t=this.state.deviceSize===I.DeviceSize.Large,i=e?320:356,n=[F.imageContainer,this.state.availableHeight<i?F.imageContainerCompact:void 0,F.imageContainerV2],o={imageSource:r.Collection.ONBOARDING_PERMISSIONS_VARIANT_DESKTOP,imageStyle:[F.imageNew]},s=[F.imageContainer,F.imageContainerCentered,F.imageContainerV2,e?F.imageContainerCenteredSmall:void 0],l=a.createElement(p.default,{style:s},a.createElement(a.Image,{key:"imageHeaderAndDesc",style:o.imageStyle,resizeMode:"contain",source:o.imageSource})),g=[F.descriptionText,t?F.textLarge:void 0];B.isUsingDarkTheme(this._getContext(),this.props.route.params.colorThemeOverride)&&g.push(F.darkThemeDescription);const h=a.createElement(a.View,{style:n},l,a.createElement(a.Text,{style:g},C.getString("PromptPermissionPanel.DescriptionText2"))),m=this.props.route.params.origin===u.DialogNavOrigin.Onboarding?b.OnboardingDialogWizardNextButtonVariant.TextAndIcon:b.OnboardingDialogWizardNextButtonVariant.IconOnly;let S=this.props.route.params.origin===u.DialogNavOrigin.Onboarding?C.getString("Onboarding.WizardGenericStepContinueButton"):void 0;return this._isLastStepInSequence()&&(S=C.getString("PromptPermissionPanel.FinishButton")),a.createElement(c.default,{goBack:this._goBack},a.createElement(v.default,{headerText:this._getHeaderText(this.state),hideCloseButton:this.props.route.params.hideCloseButton,hideSkipButton:!0,onNextButtonClicked:this._promptForPermissions,onSkipButtonClicked:this._navigateToNext,closeButtonIcon:L.backIcon(),nextButtonVariant:m,nextButtonTitle:S,disablePresentationAnimation:!0,onCloseButtonClicked:this._onCloseButtonClicked,showTopButtonsRowEvenIfEmpty:!0,nextButtonSize:d.SXButtonSize.Small,nextButtonIcon:x.SkypeIcon.Blank,isLargeDevice:t,enableDesignV2:!0},a.createElement(a.View,{style:F.panel,onLayout:this._onContentLayout},h)))}return a.createElement(c.default,{goBack:this._goBack},a.createElement(a.View,{style:F.fillFlex},a.createElement(N.default,{size:d.SXActivityIndicatorSize.Large,tintColor:M.Color.white})))}_setupTelemetryEvent(e,t,i,n){let o,s,a=(0,P.getTypedScenarioNavigator)(e.route.params.scenarioNavigator);a&&(o=a.getCurrentStep(),s=a.getTotalNumberOfSteps()),this._telemetryEvent=new w.PromptPermissionDialogEvent(e.route.params.origin,w.PromptPermissionDialogVersion.V1,o,s),this._telemetryEvent.markWhetherSystemPromptsHaveAlreadyBeenDisplayed(t,i,n)}_isLastStepInSequence(){const e=(0,P.getTypedScenarioNavigator)(this.props.route.params.scenarioNavigator);return!!e&&e.getCurrentStep()===e.getTotalNumberOfSteps()}_componentId(){return"PromptPermissionsDialog"}_requestPermission(e){return this._telemetryEvent&&this._telemetryEvent.markPermissionRequested(e),k.default.requestPermission(e,R.PermissionPromptOptions.SkipPrePrompt|R.PermissionPromptOptions.PromptAgainIfDenied,s.PermissionOrigin.OnboardingPromptDialog).then((t=>(this._telemetryEvent&&this._telemetryEvent.markPermissionGranted(e,t===s.PermissionStatus.Granted),l.Resolved(t===s.PermissionStatus.Granted))))}_sendTelemetryEvent(e){this._telemetryEvent&&(this._telemetryEvent.setExit(e),T.default.track(this._telemetryEvent),this._telemetryEvent=void 0)}_getHeaderText(e){return C.getString("PromptPermissionPanel.HeaderText2")}}t.default=V},47473:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(16778),o=i(87720),s=i(1706),a=i(89391),r=i(67930),l=i(49758),c=i(46096),d=i(51077),u=i(71908),g=i(71830),h=i(984),p=i(90631),m=i(39549),S=i(98278),C=i(36237),f=i(15877),y=i(33754),_=i(98278),v=i(4735),b=i(30124),T=i(11010),P=i(59433),A=i(64822),k=i(51070),I=i(86045),w=i(90631),N=i(80837),M=i(77524),E=i(98762),x=i(72758),L=i(53374),R=i(81115),D=i(97634),B=c.ReportCategory.Spam,O=(0,f.lazyProperties)({buttonStyle:()=>n.Styles.createTextStyle({borderTopWidth:1}),buttonTextStyle:()=>n.Styles.createTextStyle({paddingVertical:16,textAlign:"center"}),container:()=>n.Styles.createViewStyle({flex:1,flexDirection:"column"}),footerContainer:()=>n.Styles.createViewStyle({position:"absolute",bottom:0,left:0,right:0}),innerContainer:()=>n.Styles.createViewStyle({paddingHorizontal:30,paddingVertical:10}),reportReasonText:()=>n.Styles.createTextStyle({flex:-1,paddingRight:10}),selectReasonText:()=>n.Styles.createTextStyle({alignSelf:"center",marginVertical:16,font:T.default.font.uiDisplayBold}),scrollContainer:()=>n.Styles.createViewStyle({marginBottom:130}),toggleContainer:()=>n.Styles.createViewStyle({flexDirection:"row",alignItems:"center",justifyContent:"space-between",alignSelf:"stretch",paddingTop:20,paddingBottom:20})});class F extends r.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._getActionLabel=()=>this.state.selectedReason===c.ReportCategory.Infringement||this.state.selectedReason===c.ReportCategory.NonConsensualIntimateImagery?this.state.blockContact?y.getString("ConfirmationDialog.BlockAndReportExternallyLabel"):y.getString("ConfirmationDialog.ReportExternallyLabel"):this.state.reportConcern&&this.state.blockContact?y.getString("ConfirmationDialog.BlockAndReportLabel"):this.props.route.params.reportInfo.isBlockingDialog?y.getString("ConfirmationDialog.BlockLabel"):y.getString("ConfirmationDialog.ReportLabel"),this._performAction=()=>{this.state.blockContact?this._blockIfNeeded():this._report()},this._cancelReport=()=>{this.props.route.params.afterReportActions&&this.props.route.params.afterReportActions.onCancelPress&&this.props.route.params.afterReportActions.onCancelPress(),this._closeModal()},this._closeModal=()=>{v.default.closeReportConcernModal(_.MainRootViewId,this._getContext())},this._onCloseButtonRef=e=>{this._closeButtonRef=e||void 0},this._updateReportReason=e=>{this.setState({selectedReason:e})},this._updateReportDetails=e=>{this.setState({reportDetails:e})},this._report=()=>{switch(this.state.reportContext){case c.ReportContextListOptions.Message:case c.ReportContextListOptions.PictureMessage:case c.ReportContextListOptions.AudioMessage:case c.ReportContextListOptions.FileMessage:case c.ReportContextListOptions.VideoMessage:this._reportMessage();break;case c.ReportContextListOptions.ProfilePicture:this._reportAbuse()}},this._reportExternallyWithBrowser=()=>{n.Linking.openUrl(this._getLinkToReportExternally()).then((()=>{this._showConfirmationAfterSendingReport(),this._hideReportedMessage(this.props.route.params.reportInfo.content)})).catch((()=>{this._showInfoAboutFailWithSendingTheReport()}))},this._getLinkToReportExternally=e=>{switch(e||this.state.selectedReason){case c.ReportCategory.NonConsensualIntimateImagery:return this.state.linkToReportRevengePorn;case c.ReportCategory.Infringement:default:return this.state.linkToReportInfringement}},this._blockIfNeeded=()=>{this.state.blockContact&&(this.props.route.params.reportInfo.groupConversationId?this._blockGroupConversation():this._blockContact())},this._blockContact=()=>{C.log(c.LogTraceArea.Navigation,"BlockUnblockDialog._blockContact, causeId: "+this.state.causeId),this.state.isAgent&&C.track(new l.BotContactInteraction(c.BotsInteraction.BlockBot,g.stripMriNamespace(this.props.route.params.reportInfo.mriToBlock),this.state.agentDisplayName)),this.state.userDisplayName&&I.default.maybeAnnounceForAccessibility(y.getString("ConversationsListItem.BlockContactAccessibilityAnnouncement",{displayName:this.state.userDisplayName}),2500),h.default.blockContact(this.props.route.params.reportInfo.mriToBlock,this.state.contextName,this.state.reportConcern?this.state.selectedReason:void 0,this.props.route.params.afterReportActions?this.props.route.params.afterReportActions.declineInvite:void 0,this.state.reportDetails),this.props.route.params.afterReportActions&&this.props.route.params.afterReportActions.onBlocked&&this.props.route.params.afterReportActions.onBlocked(),this.props.route.params.afterReportActions&&this.props.route.params.afterReportActions.navigateAway&&(this.props.route.params.afterReportActions.declineInvite?this._navigateAfterDecline():v.default.navigateAfterBlock(this.props.route.params.reportInfo.mriToBlock,this.state.causeId,this._getContext())),this._closeModal()},this._blockGroupConversation=()=>{this.props.route.params.reportInfo.groupConversationId&&(h.default.blockGroupConversation(this.props.route.params.reportInfo.groupConversationId,this.props.route.params.reportInfo.mriToBlock,this.state.contextName,this.state.selectedReason),this._navigateAfterDecline()),this._closeModal()},this._onToggleBlockReport=(e,t)=>{this.props.route.params.reportInfo.isBlockingDialog?this.setState({reportConcern:t}):this.setState({blockContact:t})}}_buildState(e,t){const{reportInfo:i}=e.route.params,n=i.groupConversationId?void 0:x.default.getDisplayableUserByMri(i.mriToBlock),o=i.reportContext?i.reportContext:i.content?this._getReportContextForMessage(i.content):void 0,r=g.isAgent(i.mriToBlock),l=r?s.default.getAgentDescriptionForMri(i.mriToBlock):void 0;let c={linkToServicesAgreement:a.default.getConfigSettings().skypeGoLinks.servicesAgreement,linkToReportInfringement:a.default.getConfigSettings().externalReportingUrl.infringement,linkToReportRevengePorn:a.default.getConfigSettings().externalReportingUrl.revengePorn,reportContext:o,contextName:this._getReportContextOptionValue(o),isAgent:r,agentDisplayName:l?l.displayName:"",userDisplayName:n?n.getDisplayName():void 0,isUsingStackNavigationContext:b.default.isUsingStackNavigationContext(),isNewCategoriesEnabled:a.default.getS4LMessagingFeatures().enableNewReportingCategories,isAbleToHideMessage:a.default.getS4LMessagingFeatures().hideReportedMessages,safeAreaHorizontalInsets:k.default.horizontalInsets(S.HorizontalInsetDefault)};return t&&(c.causeId=L.default.newCauseId(),c.blockContact=!!i.isBlockingDialog,c.reportConcern=!i.isBlockingDialog,c.selectedReason=B,c.reportDetails=""),c}_getHeaderText(e){return F.getHeaderText()}static getHeaderText(){return y.getString("BlockUnblockDialog.BlockBotConfirmationContent")}render(){const e=this._getReportDialogConfirmationTitle();let t;const i=[N.default.flexOne,O.innerContainer];R.default.hasHorizontalSafeAreas(this.state.safeAreaHorizontalInsets)&&(t=R.default.horizontalPaddingStyle(this.state.safeAreaHorizontalInsets),i.push(t));const{dividerColor:o}=D.themeColors(this._getContext(),this.props.route.params.colorThemeOverride),s=n.createElement(M.WideButton,{label:y.getString("Global.CancelLabel"),hideArrow:!0,onPressed:this._cancelReport,labelStyle:O.buttonTextStyle,style:[O.buttonStyle,{borderColor:o}]}),a=n.createElement(M.WideButton,{label:this._getActionLabel(),hideArrow:!0,onPressed:this._performAction,labelStyle:O.buttonTextStyle}),{primaryBackgroundColorStyle:r}=D.themeStyles(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.View,{style:[O.container,r]},n.createElement(w.SimplePanelHeader,{panelName:e,leftButton:{closeButtonType:p.CloseButtonType.Close,setButtonRef:this._onCloseButtonRef},useCenteredControls:!0}),n.createElement(n.ScrollView,{style:[N.default.flexOne,O.scrollContainer],keyboardShouldPersistTaps:!0},n.createElement(n.View,{style:i},this._getSecondActionToggle(),this._getLearnMoreLink(),this._getBlockReasons())),n.createElement(n.View,{style:O.footerContainer},s,a))}componentDidMount(){super.componentDidMount(),this._closeButtonRef&&this._closeButtonRef.requestFocus()}_getReportContextForMessage(e){switch(d.getMessageTypeGroup(e)){case d.MessageTypeGroups.UriFile:return c.ReportContextListOptions.FileMessage;case d.MessageTypeGroups.Picture:return c.ReportContextListOptions.PictureMessage;case d.MessageTypeGroups.Audio:return c.ReportContextListOptions.AudioMessage;case d.MessageTypeGroups.Video:return c.ReportContextListOptions.VideoMessage;default:return c.ReportContextListOptions.Message}}_getReportContextOptionValue(e){switch(e){case c.ReportContextListOptions.Message:case c.ReportContextListOptions.PictureMessage:case c.ReportContextListOptions.AudioMessage:case c.ReportContextListOptions.VideoMessage:case c.ReportContextListOptions.FileMessage:return"message";case c.ReportContextListOptions.ProfilePicture:return"profile_image";case c.ReportContextListOptions.ContactRequest:return"contact_request";case c.ReportContextListOptions.DeleteContact:return"delete_contact";case c.ReportContextListOptions.BlockContact:return"block_contact";case c.ReportContextListOptions.Profile:return"profile";case c.ReportContextListOptions.SearchReportContextListOptions:return"search";default:return""}}_getReportDialogConfirmationTitle(){if(this.props.route.params.reportInfo.isBlockingDialog)return this.state.isAgent?y.getString("BlockUnblockDialog.BlockBotConfirmationContent"):y.getString("UserProfilePanel.BlockContactConfirmationContent");if(this.state.isAgent)return y.getString("BlockUnblockDialog.BlockBotConfirmationContent");switch(this.state.reportContext){case c.ReportContextListOptions.Message:return y.getString("BlockUnblockDialog.ReportMessageDialogTitle");case c.ReportContextListOptions.ProfilePicture:case c.ReportContextListOptions.PictureMessage:return y.getString("BlockUnblockDialog.ReportPictureDialogTitle");case c.ReportContextListOptions.AudioMessage:return y.getString("BlockUnblockDialog.ReportAudioDialogTitle");case c.ReportContextListOptions.VideoMessage:return y.getString("BlockUnblockDialog.ReportVideoDialogTitle");case c.ReportContextListOptions.FileMessage:return y.getString("BlockUnblockDialog.ReportFileDialogTitle");default:return y.getString("UserProfilePanel.BlockContactConfirmationContent")}}_getSecondActionToggle(){const{primaryTextColor:e}=D.themeColors(this._getContext(),this.props.route.params.colorThemeOverride),t=n.Styles.createTextStyle({color:e},!1);return n.createElement(o.default,{style:O.toggleContainer,isOn:this.props.route.params.reportInfo.isBlockingDialog?this.state.reportConcern:this.state.blockContact,accessibilityLabel:this._getToggleQuestion(),onChange:this._onToggleBlockReport},n.createElement(n.Text,{style:[O.reportReasonText,t]},this._getToggleQuestion()))}_getBlockReasons(){return this.props.route.params.reportInfo.isBlockingDialog&&this.state.reportConcern||this.state.reportConcern?n.createElement(A.default,{reasonSelected:this._updateReportReason,onChangeDetails:this._updateReportDetails,modalHorizontalPadding:30}):void 0}_getLearnMoreLink(){if(!this.state.isNewCategoriesEnabled)return;const e=`${y.getString("BlockUnblockDialog.TellUsYourConcernInfo")}.`,{primaryTextColor:t}=D.themeColors(this._getContext(),this.props.route.params.colorThemeOverride);return n.createElement(n.Text,{style:[O.reportReasonText,{color:t}]},e," ",n.createElement(P.default,{linkTextStyle:S.LinkTextStyle.BodyText,url:this.state.linkToServicesAgreement,key:"learnMore",blue:!0},y.getString("Global.LearnMore")))}_reportAbuse(){C.log(c.LogTraceArea.Navigation,"ReportDialog._reportAbuse, causeId: "+this.state.causeId),this._isReportedExternally()?(this._reportExternallyWithBrowser(),this._blockIfNeeded()):this._reportAbuseToPCS(),this._closeModal()}_reportMessage(){C.log(c.LogTraceArea.Navigation,"ReportDialog._reportMessage, causeId: "+this.state.causeId),this.props.route.params.reportInfo.content&&(this._isReportedExternally()?(this._reportExternallyWithBrowser(),this._blockIfNeeded()):this._reportMessageToPCS(),this._closeModal())}_reportMessageToPCS(){if(!this.props.route.params.reportInfo.content)return;const e=this.props.route.params.reportInfo.content;h.default.reportMessage(this.props.route.params.reportInfo.mriToBlock,this.state.selectedReason,!!this.state.blockContact,this.props.route.params.reportInfo.content,this.state.contextName,this.state.reportDetails).then((()=>{this._hideReportedMessage(e),this._showConfirmationAfterSendingReport(),this.state.blockContact&&v.default.navigateAfterBlock(this.props.route.params.reportInfo.mriToBlock,this.state.causeId,void 0)})).catch((()=>{this._showInfoAboutFailWithSendingTheReport()}))}_reportAbuseToPCS(){h.default.reportAbuse(this.props.route.params.reportInfo.mriToBlock,this.state.selectedReason,!!this.state.blockContact,this.state.contextName,this.state.reportDetails).then((()=>{this._showConfirmationAfterSendingReport(),this.state.blockContact&&v.default.navigateAfterBlock(this.props.route.params.reportInfo.mriToBlock,this.state.causeId,void 0)})).catch((()=>{this._showInfoAboutFailWithSendingTheReport()}))}_isReportedExternally(){return this.state.selectedReason===c.ReportCategory.Infringement||this.state.selectedReason===c.ReportCategory.NonConsensualIntimateImagery}_showConfirmationAfterSendingReport(){this._isReportedExternally()?E.default.scheduleTextMessage(y.getString("ConfirmationDialog.ReportExternallyMessage")):E.default.scheduleTextMessage(y.getString("ConfirmationDialog.ReportSuccessMessage"))}_showInfoAboutFailWithSendingTheReport(){E.default.scheduleTextMessage(y.getString("ConfirmationDialog.ReportFailMessage"))}_hideReportedMessage(e){e&&this.state.isAbleToHideMessage&&u.markMessageReported(e,!0)}_navigateAfterDecline(){const e=L.default.newCauseId();C.log(c.LogTraceArea.Navigation,"ReportConcernModal._navigateAfterDecline, causeId: "+e),this.state.isUsingStackNavigationContext?v.default.navigateAfterDecliningContactRequest(e,this._getContext()):v.default.navigateToConversation({convId:(0,m.default)().getMostRecentJoinedConversationId(this.props.route.params.reportInfo.mriToBlock),origin:c.NavigationConversationOrigin.CompositeNavRedirectToRecentConv,causeId:e})}_getToggleQuestion(){return this.props.route.params.reportInfo.isBlockingDialog?this.state.isAgent?y.getString("BlockUnblockDialog.ReportAbuseTitleForBot"):y.getString("BlockUnblockDialog.ReportAbuseTitleForUser"):this.state.isAgent?y.getString("BlockUnblockDialog.BlockBotConfirmationContent"):y.getString("UserProfilePanel.BlockContactConfirmationContent")}}t.default=F},95182:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96074),o=i(11411);t.default=(0,n.forNavigation)(o.default)},21485:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(96074),a=i(46096),r=i(52115),l=i(36237),c=i(15877),d=i(33754),u=i(30124),g=i(90631),h=i(81760),p=i(34528),m=i(59910),S=i(19675),C=i(53374),f=(0,c.lazyProperties)({panel:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch",backgroundColor:h.Color.white}),panelContainer:()=>o.Styles.createViewStyle({flex:1,flexDirection:"column"}),rowContainer:()=>o.Styles.createTextStyle({flex:1,backgroundColor:h.Color.white,alignItems:"center",flexDirection:"row",margin:8,alignSelf:"stretch",justifyContent:"space-between"}),labelsContainer:()=>o.Styles.createTextStyle({flex:1,flexDirection:"column"}),bandwidthContainer:()=>o.Styles.createTextStyle({textAlign:"right",color:h.Color.gray400}),rowTitle:()=>o.Styles.createTextStyle({color:h.Color.black}),rowDescription:()=>o.Styles.createTextStyle({color:h.Color.gray400,marginTop:3}),delimeter:()=>o.Styles.createTextStyle({height:1,alignSelf:"stretch",backgroundColor:h.Color.gray100,marginHorizontal:8})});class y extends s.BaseNavigationView{constructor(){super(...arguments),this._closeModal=()=>{const e=C.default.newCauseId();l.log(a.LogTraceArea.Navigation,"TelemetryPerfPanel._closeModal,  causeId: "+e),this._goBack(e)}}_buildState(e,t){return{monitorEnabled:!0,isUsingStackNavigationContext:u.default.isUsingStackNavigationContext(),items:m.default.getSortedEventsStatistics()}}componentDidMount(){super.componentDidMount(),this._statisticsUpdatedSubscriptionToken=m.default.statisticsUpdated.subscribe((()=>{this.isComponentMounted()&&this.setState({items:m.default.getSortedEventsStatistics()})}))}componentWillUnmount(){super.componentWillUnmount(),this._statisticsUpdatedSubscriptionToken&&(this._statisticsUpdatedSubscriptionToken.unsubscribe(),this._statisticsUpdatedSubscriptionToken=void 0)}render(){let e;if(this.props.route.params.showHeader){const t=this.state.isUsingStackNavigationContext?{closeButtonType:g.CloseButtonType.Back}:{icon:p.backIcon(),title:d.getString("Global.BackButtonTitle"),onPress:this._closeModal};e=o.createElement(g.SimplePanelHeader,{panelName:"Telemetry Monitor",leftButton:t})}return o.createElement(o.View,{style:f.panel},e,o.createElement(o.ScrollView,{style:f.panelContainer},this._renderEventsRows()))}_renderEventsRows(){let e=[];return this.state.items?(e.push(...this._renderTotalRow()),n.each(this.state.items,(t=>{const[i,n]=t;let o=n.numberOfEvents+" event";n.numberOfEvents>1&&(o+="s");const s=o+"    sampling "+n.sampling,a=r.default.formatFileSize(n.numberOfBytes,1).formattedString;e.push(...this._renderEventRow(i,s,a))})),e):[]}_renderTotalRow(){let e=0,t=0;n.each(this.state.items,(i=>{const n=i[1];e+=n.numberOfBytes,t+=n.numberOfEvents}));const i=r.default.formatFileSize(e,1).formattedString;return this._renderEventRow("[ TOTAL ]",t+" events sent",i)}_renderEventRow(e,t,i){return[o.createElement(o.View,{style:f.rowContainer,key:e},o.createElement(o.View,{style:f.labelsContainer},o.createElement(S.BodyText,{bold:!0,size:S.BodyTextSize.BigDeprecated,style:f.rowTitle},e),o.createElement(S.BodyText,{size:S.BodyTextSize.SmallDeprecated,style:f.rowDescription},t)),o.createElement(S.BodyText,{bold:!0,size:S.BodyTextSize.SmallDeprecated,style:f.bandwidthContainer},i)),o.createElement(o.View,{style:f.delimeter,key:"line"+e})]}}t.default=y},47358:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(31844),s=i(16778),a=i(67930),r=i(3056),l=i(10102),c=i(72822),d=i(46096),u=i(36237),g=i(15877),h=i(33754),p=i(99201),m=i(89808),S=i(28159),C=i(53154),f=i(38980),y=i(83643),_=i(29130),v=i(36150),b=i(63823),T=i(81760),P=i(11828),A=i(80837),k=i(19675),I=i(63841),w=i(18037),N=i(64867),M=i(97634),E=i(87331),x=i(53374),L=(0,g.lazyProperties)({panel:()=>s.Styles.createViewStyle({flex:1,alignSelf:"stretch",alignItems:"center",justifyContent:"center",overflow:"visible",marginTop:50}),panelSmall:()=>s.Styles.createViewStyle({marginTop:20}),newToggleButtonContainer:()=>s.Styles.createViewStyle({alignSelf:"center",alignItems:"center",width:320}),newToggleButtonContainerCompact:()=>s.Styles.createViewStyle({width:280}),newToggleButtonInnerContainer:()=>s.Styles.createViewStyle({flexDirection:"row",justifyContent:"space-between",alignItems:"center",alignSelf:"stretch",padding:12}),highContrastToggle:()=>s.Styles.createViewStyle({alignSelf:"stretch",marginTop:20,flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:12}),highContrastToggleText:()=>s.Styles.createTextStyle({color:T.Color.gray400})});class R extends a.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._orientationLockKey=n.uniqueId("ColorThemeDialog"),this._goBack=e=>(u.log(d.LogTraceArea.ConversationColorStore,"ThemeDialog._goBack causeId: "+e),this._sendTelemetryEvent(c.DialogNavExit.Close),this.props.route.params.scenarioNavigator?(this.props.route.params.scenarioNavigator.goBack(),!0):super._goBack(e)),this._onCloseButtonClicked=()=>{const e=x.default.newCauseId();u.log(d.LogTraceArea.ConversationColorStore,"ThemeDialog._onCloseButtonClicked causeId: "+e),this._goBack(e)},this._onNextButtonClicked=()=>{const e=x.default.newCauseId();u.log(d.LogTraceArea.ConversationColorStore,"ThemeDialog._onNextButtonClicked causeId: "+e),w.default.setTheme(this.state.currentTheme);const t=this._adjustedUserColor(this.state.currentTheme);t!==this.state.userColor&&m.default.setUserColor(t,e),this._sendTelemetryEvent(c.DialogNavExit.Submit),this._performNavigation()},this._onSkipButtonPressed=()=>{this._sendTelemetryEvent(c.DialogNavExit.Skip),this._performNavigation()},this._onLightTogglePressed=()=>this._onLightDarkTogglePressed(!1),this._onDarkTogglePressed=()=>this._onLightDarkTogglePressed(!0),this._onHighContrastTogglePress=()=>{const e=!this.state.useHighContrastTheme,t=h.getString(e?"ColorThemeDialog.SelectedHighContrastTitleAccessible":"ColorThemeDialog.DeselectedHighContrastTitleAccessible");this._updateThemeForSimpleLayout(this.state.isDarkTheme,e,(()=>{s.Accessibility.announceForAccessibility(t)}))}}static getHeaderText(){return h.getString("ColorThemeDialog.HeaderText")}_buildState(e,t){const i={userColor:m.default.getColorInfo(),selectedTheme:w.default.colorTheme()},n=this._getRootViewId();if(t){let t=(0,y.getOnboardingFeatures)(e.route.params.scenarioNavigator);i.themeAwareOnboardingEnabled=t.themeAwareOnboardingEnabled,i.useHighContrastTheme=w.default.useAccessibleTheme(),i.isMobileScreenReaderEnabled=v.default.isMobileScreenReaderEnabled(),i.originalTheme=i.selectedTheme,i.isSmallDevice=_.default.isSmallDevice(n),i.currentTheme=w.default.colorTheme(),i.isDarkTheme=w.default.useDarkTheme(),this._setupTelemetryEvent(e)}return i}componentDidMount(){super.componentDidMount(),this._getContext().isPresentedInDesktopSubview||p.default.addOrUpdateOrientationLock(this._orientationLockKey,o.DeviceOrientation.Portrait)}componentWillUnmount(){super.componentWillUnmount(),p.default.removeOrientationLock(this._orientationLockKey),this._sendTelemetryEvent(c.DialogNavExit.CancelOrBack)}_componentId(){return"ThemeDialog"}_setupTelemetryEvent(e){let t,i,n=(0,y.getTypedScenarioNavigator)(e.route.params.scenarioNavigator);n&&(t=n.getCurrentStep(),i=n.getTotalNumberOfSteps()),this._telemetryEvent=new b.ThemeDialogEvent(e.route.params.origin,t,i)}_onLightDarkTogglePressed(e){if(this.state.isDarkTheme===e)return;this._telemetryEvent&&this._telemetryEvent.markDidToggleLightDarkTab();this._updateThemeForSimpleLayout(e,this.state.useHighContrastTheme,(()=>{const t=this._getAccessibleTitleForLightOrDarkTheme(e,!0);t&&s.Accessibility.announceForAccessibility(t)}))}_updateThemeForSimpleLayout(e,t,i){const n=t?e?I.Theme.AccessibleDark:I.Theme.Accessible:e?I.Theme.DelphiDark:I.Theme.Delphi;this.setState({currentTheme:n,isDarkTheme:e,useHighContrastTheme:t},i)}_performNavigation(){const e=x.default.newCauseId();u.log(d.LogTraceArea.ConversationColorStore,"ThemeDialog._performNavigation causeId: "+e),this.props.route.params.scenarioNavigator?this.props.route.params.scenarioNavigator.goNext():this.props.route.params.onNextButtonPressed?this.props.route.params.onNextButtonPressed():this._getContext().isPresentedByMobileStackNavigator?this._isComponentVisible()&&this._goBack(e):this._goBack(e)}_getAccessibleTitleForLightOrDarkTheme(e,t){return t?h.getString(e?"ColorThemeDialog.SelectedDarkToggleTitleAccessible":"ColorThemeDialog.SelectedLightToggleTitleAccessible"):h.getString(e?"ColorThemeDialog.DarkToggleTitleAccessible":"ColorThemeDialog.LightToggleTitleAccessible")}_renderToggleButton(e,t){const i=this._getAccessibleTitleForLightOrDarkTheme(e,t&&!1),n=[s.Types.AccessibilityTrait.Button];t&&n.push(s.Types.AccessibilityTrait.Selected);const o=this.state.themeAwareOnboardingEnabled?this.state.currentTheme:void 0;return s.createElement(N.default,{key:"thumb"+e,size:N.ThumbnailSize.Small,dark:e,selected:t,compact:this.state.isSmallDevice,highContrast:this.state.useHighContrastTheme,accessibilityTraits:n,accessibilityLabel:i,colorThemeOverride:o,onPress:e?this._onDarkTogglePressed:this._onLightTogglePressed})}_adjustedUserColor(e){const t=M.isMonoTheme(e),i=M.isClassicTheme(e);return(t||i)&&(t&&!M.isMonoTheme(this.state.selectedTheme)||i&&!M.isClassicTheme(this.state.selectedTheme))?l.getColorInfoForSerializedColor(l.SerializedColorByNumber.Mint):this.state.userColor}_sendTelemetryEvent(e){this._telemetryEvent&&(this._telemetryEvent.setExit(e),this.state.originalTheme!==this.state.currentTheme&&e===c.DialogNavExit.Submit&&this._telemetryEvent.markDidSelectNewTheme(),this._telemetryEvent.setFinalTheme(e===c.DialogNavExit.Submit?this.state.currentTheme:this.state.originalTheme),f.default.track(this._telemetryEvent),this._telemetryEvent=void 0)}_getHeaderText(e){return R.getHeaderText()}render(){const e=[L.panel];let t;this.state.isSmallDevice,e.push(L.panelSmall);const i=[this._renderToggleButton(!1,!this.state.isDarkTheme),this._renderToggleButton(!0,this.state.isDarkTheme)],n=h.getString("ColorThemeDialog.HighContrastThemeTitle"),o=this.state.useHighContrastTheme?h.getString("Global.ItemSelectedAccessibilityLabel",{text:n}):n,a=[A.default.overflowVisible,L.newToggleButtonContainer];this.state.isSmallDevice&&a.push(L.newToggleButtonContainerCompact);const l=this.state.themeAwareOnboardingEnabled?this.state.currentTheme:void 0;t=s.createElement(s.View,{style:a},s.createElement(s.View,{style:[A.default.overflowVisible,L.newToggleButtonInnerContainer]},i),s.createElement(s.Button,{style:L.highContrastToggle,accessibilityLabel:o,activeOpacity:.8,onPress:this._onHighContrastTogglePress},s.createElement(k.BodyText,{style:this.state.themeAwareOnboardingEnabled?void 0:L.highContrastToggleText,numberOfLines:2,colorThemeOverride:l},n),s.createElement(E.default,{isOn:this.state.useHighContrastTheme,colorThemeOverride:l})));const d=this.props.route.params.origin===c.DialogNavOrigin.Onboarding?C.OnboardingDialogWizardNextButtonVariant.TextAndIcon:C.OnboardingDialogWizardNextButtonVariant.IconOnly,u=this.props.route.params.origin===c.DialogNavOrigin.Onboarding?h.getString("Onboarding.WizardGenericStepContinueButton"):void 0;return s.createElement(r.default,{goBack:this._goBack},s.createElement(S.default,{headerText:this.props.route.params.hideHeader?void 0:this._getHeaderText(this.state),descriptionElement:h.getString("ColorThemeDialog.DescriptionText"),onNextButtonClicked:this._onNextButtonClicked,onCloseButtonClicked:this._onCloseButtonClicked,onSkipButtonClicked:this.props.route.params.hideSkipButton?void 0:this._onSkipButtonPressed,showTopButtonsRowEvenIfEmpty:!0,hideSkipButton:this.props.route.params.hideSkipButton,hideCloseButton:this.props.route.params.hideCloseButton,hideNextButton:!1,closeButtonIcon:this.props.route.params.closeButtonIcon,nextButtonIcon:this.props.route.params.nextButtonIcon||P.SkypeIcon.Ok,nextButtonTheme:this.state.currentTheme,nextButtonUserColor:this._adjustedUserColor(this.state.currentTheme),nextButtonVariant:d,nextButtonTitle:u,disablePresentationAnimation:!0,disableContentFocusOnMount:this.props.route.params.hideHeader,scenarioNavigator:this.props.route.params.scenarioNavigator,isContentScrollable:!0,colorThemeOverride:this.state.themeAwareOnboardingEnabled?this.state.currentTheme:I.Theme.Colorful},s.createElement(s.View,{style:e},t)))}}t.default=R},4335:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(16778),s=i(71502),a=i(67930),r=i(3056),l=i(98278),c=i(72822),d=i(46096),u=i(36237),g=i(15877),h=i(40522),p=i(33754),m=i(69108),S=i(46929),C=i(18078),f=i(28159),y=i(53154),_=i(94021),v=i(38980),b=i(83643),T=i(49140),P=i(29130),A=i(63823),k=i(4057),I=i(22222),w=i(81760),N=i(11010),M=i(11828),E=i(34528),x=i(19675),L=i(12770),R=i(75793),D=i(67977),B=i(72758),O=i(53374),F=(0,g.lazyProperties)({container:()=>o.Styles.createViewStyle({flex:1,alignSelf:"stretch",alignItems:"center",justifyContent:"flex-start",overflow:"visible",paddingTop:40}),containerSmall:()=>o.Styles.createViewStyle({paddingTop:0}),userCardContainer:()=>o.Styles.createViewStyle({alignSelf:"stretch",marginHorizontal:20}),privacyContainer:()=>o.Styles.createViewStyle({marginTop:30,marginHorizontal:50,flex:1,justifyContent:"flex-start"}),privacyContainerSmall:()=>o.Styles.createViewStyle({marginTop:15}),phoneEmailButtonsContainer:()=>o.Styles.createViewStyle({margin:30}),centeredText:()=>o.Styles.createTextStyle({textAlign:"center",lineHeight:21}),textLarge:()=>o.Styles.createTextStyle({fontSize:N.default.fontSize.size18}),actionButton:()=>o.Styles.createButtonStyle({marginBottom:15}),learnMoreContainer:()=>o.Styles.createTextStyle({textAlign:"center"}),learnMoreLink:()=>o.Styles.createTextStyle({color:w.Color.blue})});class V extends a.BaseNavigationViewPresentedInModal{constructor(){super(...arguments),this._exitEditingModeTime=100,this._onProfileFocus=()=>{u.log(d.LogTraceArea.Onboarding,"_onProfileFocus"),this.setState({isEditing:!0})},this._onProfileBlur=()=>{u.log(d.LogTraceArea.Onboarding,"_onProfileBlur"),L.default.setTimeout((()=>{this.setState({isEditing:!1})}),this._exitEditingModeTime)},this._onPressLearnMore=()=>{h.openUrlWithParams({origin:d.BrowserOrigin.UserProfileOnboarding,url:this.state.userProfileScreen.learnMoreLink,rootViewId:this._getRootViewId()})},this._onUserCardRef=e=>{this._userCardRef=e||void 0},this._onNextButtonClicked=()=>{var e;const t=null===(e=this.state.userContacts)||void 0===e?void 0:e.phoneNumbersAndParts[0];t&&t.phoneParts&&t.source&&(this._showPhoneNumberInSearch(t.phoneParts,t.source),S.default.setOnboardingUserProfileScreenSeen(!0)),this._performNavigation()},this._onBackButtonClicked=()=>{const e=O.default.newCauseId();u.log(d.LogTraceArea.Onboarding,"UserProfileDialog._onBackButtonClicked causeId: "+e),this._sendTelemetryEvent(c.DialogNavExit.Close),m.default.redirectToLogout(d.LogoutReason.Onboarding)},this._goBack=e=>(u.log(d.LogTraceArea.Onboarding,"UserProfileDialog._goBack causeId: "+e),this._sendTelemetryEvent(c.DialogNavExit.CancelOrBack),this.props.route.params.scenarioNavigator?(this.props.route.params.scenarioNavigator.goBack(),!0):super._goBack(e))}_buildState(e,t){const i=(0,b.getOnboardingFeatures)(e.route.params.scenarioNavigator),n=B.default.getFullUserProfileByMri(C.default.getSkypeMri()),o=s.default.getParsedProfile(),a=this._getRootViewId(),r={userProfile:n,userProfileScreen:i.features.userProfileScreen,userContacts:o,isEditing:!1,deviceSize:P.default.deviceSize(a)};return t&&this._setupTelemetryEvent(e),r}componentDidMount(){super.componentDidMount(),this._userCardRef&&this._userCardRef.requestFocus()}componentWillUnmount(){super.componentWillUnmount(),this._sendTelemetryEvent(c.DialogNavExit.CancelOrBack)}_getHeaderText(){return V.getHeaderText()}static getHeaderText(){return p.getString("UserProfileDialog.HeaderText")}_setupTelemetryEvent(e){const t=(0,b.getTypedScenarioNavigator)(e.route.params.scenarioNavigator),i=null==t?void 0:t.getCurrentStep(),n=null==t?void 0:t.getTotalNumberOfSteps();this._telemetryEvent=new A.UserProfileDialogEvent(e.route.params.origin,i,n)}render(){let e=[];const t=this.state.deviceSize===P.DeviceSize.Small,i=this.state.deviceSize===P.DeviceSize.Large;if(this.state.userContacts&&this.state.userContacts.phoneNumbersAndParts){e=[...this.state.userContacts.phoneNumbersAndParts.map((e=>e.phoneNumber)),...this.state.userContacts.emails]}const s=p.getString("UserProfileDialog.PrivacyStatement",{source:e.join(", ")}),a=o.createElement(o.Link,{key:"learnMore",url:this.state.userProfileScreen.learnMoreLink,onPress:this._onPressLearnMore,style:F.learnMoreLink},p.getString("UserSettingsPanel.HotkeysLearnMoreLink")),c=this._isHiddenContent(),u=C.default.getSkypeMri(),g=this.state.userProfileScreen.closeBackIconEnabled?E.closeIcon():E.backIcon(),h=[F.container,t?F.containerSmall:void 0],m=[F.privacyContainer,t?F.privacyContainerSmall:void 0],S=[F.centeredText,i?F.textLarge:void 0],_=[F.learnMoreContainer,i?F.textLarge:void 0];return o.createElement(r.default,{goBack:this._goBack},!n.isEmpty(this.state.userContacts)&&o.createElement(f.default,{headerText:this._getHeaderText(),onNextButtonClicked:this._onNextButtonClicked,onCloseButtonClicked:this._onBackButtonClicked,hideSkipButton:!0,closeButtonIcon:g,nextButtonVariant:y.OnboardingDialogWizardNextButtonVariant.TextAndIcon,nextButtonTitle:p.getString("Onboarding.WizardGenericStepContinueButton"),disablePresentationAnimation:!0,hideNextButton:c,nextButtonIcon:M.SkypeIcon.Blank,nextButtonSize:l.SXButtonSize.Small,isLargeDevice:i,enableDesignV2:!0},o.createElement(o.View,{style:h},o.createElement(o.View,{style:F.userCardContainer},o.createElement(R.default,{ref:this._onUserCardRef,origin:d.AvatarUpdateLocation.UserProfileOnboarding,userMri:u,allowOpenAvatarInMediaViewer:!1,allowEditAvatar:!0,replaceHeader:!0,hideGradientBackground:!0,hideUserStatus:!0,onProfileFocus:this._onProfileFocus,onProfileBlur:this._onProfileBlur,userIconSize:D.UserIconSize.Size120,enableDesignV2:!0})),!c&&o.createElement(o.View,{style:m},o.createElement(x.BodyText,{style:S},s),o.createElement(x.BodyText,{style:_},a),this._getPhoneEmailButtons()))))}_isHiddenContent(){return!1}_getPhoneEmailButtons(){const e={style:F.actionButton,buttonStyle:l.SXButtonStyle.BlueFill,title:p.getString("UserProfileDialog.AddPhoneNumber"),buttonSize:l.SXButtonSize.Medium,onPress:this._onAddPhoneButtonClicked},t={style:F.actionButton,buttonStyle:l.SXButtonStyle.BlueFill,title:p.getString("UserProfileDialog.AddEmail"),buttonSize:l.SXButtonSize.Medium,onPress:this._onAddEmailButtonClicked},{enableAddPhone:i,enableAddEmail:s}=this.state.userProfileScreen||{};return this.state.userContacts?o.createElement(o.View,{style:F.phoneEmailButtonsContainer},i&&n.isEmpty(this.state.userContacts.phoneNumbersAndParts)&&o.createElement(I.default,Object.assign({},e)),s&&n.isEmpty(this.state.userContacts.emails)&&o.createElement(I.default,Object.assign({},t))):null}_onAddPhoneButtonClicked(){u.track(new _.UserProfileChange({origin:c.DialogNavOrigin.UserProfilePage,addPhoneNumber:!0}))}_onAddEmailButtonClicked(){u.track(new _.UserProfileChange({origin:c.DialogNavOrigin.UserProfilePage,addEmail:!0}))}_performNavigation(){const e=O.default.newCauseId();u.log(d.LogTraceArea.Onboarding,"UserProfileDialog._performNavigation causeId: "+e),this._sendTelemetryEvent(c.DialogNavExit.Submit),this.props.route.params.scenarioNavigator&&this.props.route.params.scenarioNavigator.goNext()}_showPhoneNumberInSearch(e,t){s.default.showPhoneNumberInSearch(e,t).then((()=>{u.track(new T.PhoneNumberDiscoverabilityPrivacyEvent(!0,T.PhoneDiscoverabilityOrigin.UserProfile))})).catch((e=>{u.track(new T.PhoneNumberDiscoverabilityPrivacyEvent(void 0,T.PhoneDiscoverabilityOrigin.UserProfile,{errorStatusCode:null==e?void 0:e.code,errorMessage:k.default.errorAsString(e)})),u.log(d.LogTraceArea.ManageSearchInfo,"Service error while trying to enable phone number for discoverability. Error: "+k.default.errorAsString(e))}))}_sendTelemetryEvent(e){this._telemetryEvent&&(this._telemetryEvent.setExit(e),v.default.track(this._telemetryEvent),this._telemetryEvent=void 0)}test_showPhoneNumberInSearch(e,t){return this._showPhoneNumberInSearch(e,t)}}t.default=V},37799:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserProfileDialog=t.TranslationSettingsPanel=t.ThirdPartyNoticesPanel=t.ThemeDialog=t.TelemetryPerfPanel=t.SubtitlesCallingSettingsPanel=t.SpeechConsentPanel=t.SplashScreenNavigation=t.SlimcoreFlagsPanel=t.SettingsGroupPanel=t.SendDiagnosticLogsPanel=t.ReportConcernModal=t.RawPreferences=t.PromptPermissionDialog=t.ProfilePicturePanel=t.PnvDebugNavigation=t.PnvEnterNumberNavigation=t.PnvEnterCodeNavigation=t.MySettingsPanel=t.MobileHubWrapper=t.MobileHub=t.MobileSettingsPanel=t.ManageUsersSettingsPanel=t.ManageUsersListPanel=t.ManageSearchInfoPanel=t.LanguagePickerPanel=t.FeatureFlags=t.DiagnosticToolsPanel=t.DetailsPanel=t.ConnectedUsersListPanel=t.CaptivePortalQuestionnaire=t.CallingSettingsPanel=t.CallerIdSettingsPanel=t.CallerIdNumberPanel=t.BlockedUsersListPanel=t.AlertsHubPanelNavigation=t.AdvancedCallingSettingsPanel=t.AbstractConfigList=t.AboutPanelNavigation=void 0;var n=i(78087);Object.defineProperty(t,"AboutPanelNavigation",{enumerable:!0,get:function(){return n.default}});var o=i(17267);Object.defineProperty(t,"AbstractConfigList",{enumerable:!0,get:function(){return o.default}});var s=i(73709);Object.defineProperty(t,"AdvancedCallingSettingsPanel",{enumerable:!0,get:function(){return s.default}});var a=i(65427);Object.defineProperty(t,"AlertsHubPanelNavigation",{enumerable:!0,get:function(){return a.default}});var r=i(51013);Object.defineProperty(t,"BlockedUsersListPanel",{enumerable:!0,get:function(){return r.default}});var l=i(92626);Object.defineProperty(t,"CallerIdNumberPanel",{enumerable:!0,get:function(){return l.default}});var c=i(72619);Object.defineProperty(t,"CallerIdSettingsPanel",{enumerable:!0,get:function(){return c.default}});var d=i(7095);Object.defineProperty(t,"CallingSettingsPanel",{enumerable:!0,get:function(){return d.default}});var u=i(17756);Object.defineProperty(t,"CaptivePortalQuestionnaire",{enumerable:!0,get:function(){return u.default}});var g=i(79624);Object.defineProperty(t,"ConnectedUsersListPanel",{enumerable:!0,get:function(){return g.default}});var h=i(57231);Object.defineProperty(t,"DetailsPanel",{enumerable:!0,get:function(){return h.default}});var p=i(49899);Object.defineProperty(t,"DiagnosticToolsPanel",{enumerable:!0,get:function(){return p.default}});var m=i(50035);Object.defineProperty(t,"FeatureFlags",{enumerable:!0,get:function(){return m.default}});var S=i(50876);Object.defineProperty(t,"LanguagePickerPanel",{enumerable:!0,get:function(){return S.default}});var C=i(51424);Object.defineProperty(t,"ManageSearchInfoPanel",{enumerable:!0,get:function(){return C.default}});var f=i(15854);Object.defineProperty(t,"ManageUsersListPanel",{enumerable:!0,get:function(){return f.default}});var y=i(34887);Object.defineProperty(t,"ManageUsersSettingsPanel",{enumerable:!0,get:function(){return y.default}});var _=i(72660);Object.defineProperty(t,"MobileSettingsPanel",{enumerable:!0,get:function(){return _.default}});var v=i(10706);Object.defineProperty(t,"MobileHub",{enumerable:!0,get:function(){return v.default}});var b=i(58144);Object.defineProperty(t,"MobileHubWrapper",{enumerable:!0,get:function(){return b.default}});var T=i(51464);Object.defineProperty(t,"MySettingsPanel",{enumerable:!0,get:function(){return T.default}});var P=i(92024);Object.defineProperty(t,"PnvEnterCodeNavigation",{enumerable:!0,get:function(){return P.default}});var A=i(87634);Object.defineProperty(t,"PnvEnterNumberNavigation",{enumerable:!0,get:function(){return A.default}});var k=i(22573);Object.defineProperty(t,"PnvDebugNavigation",{enumerable:!0,get:function(){return k.default}});var I=i(34898);Object.defineProperty(t,"ProfilePicturePanel",{enumerable:!0,get:function(){return I.default}});var w=i(15308);Object.defineProperty(t,"PromptPermissionDialog",{enumerable:!0,get:function(){return w.default}});var N=i(10250);Object.defineProperty(t,"RawPreferences",{enumerable:!0,get:function(){return N.default}});var M=i(47473);Object.defineProperty(t,"ReportConcernModal",{enumerable:!0,get:function(){return M.default}});var E=i(46999);Object.defineProperty(t,"SendDiagnosticLogsPanel",{enumerable:!0,get:function(){return E.default}});var x=i(63201);Object.defineProperty(t,"SettingsGroupPanel",{enumerable:!0,get:function(){return x.default}});var L=i(67164);Object.defineProperty(t,"SlimcoreFlagsPanel",{enumerable:!0,get:function(){return L.default}});var R=i(95182);Object.defineProperty(t,"SplashScreenNavigation",{enumerable:!0,get:function(){return R.default}});var D=i(98155);Object.defineProperty(t,"SpeechConsentPanel",{enumerable:!0,get:function(){return D.default}});var B=i(82994);Object.defineProperty(t,"SubtitlesCallingSettingsPanel",{enumerable:!0,get:function(){return B.default}});var O=i(21485);Object.defineProperty(t,"TelemetryPerfPanel",{enumerable:!0,get:function(){return O.default}});var F=i(47358);Object.defineProperty(t,"ThemeDialog",{enumerable:!0,get:function(){return F.default}});var V=i(44699);Object.defineProperty(t,"ThirdPartyNoticesPanel",{enumerable:!0,get:function(){return V.default}});var U=i(59161);Object.defineProperty(t,"TranslationSettingsPanel",{enumerable:!0,get:function(){return U.default}});var H=i(4335);Object.defineProperty(t,"UserProfileDialog",{enumerable:!0,get:function(){return H.default}})},88391:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(96486),o=i(62783);class s extends o.GenericRestClient{constructor(){super(""),this._defaultOptions.priority=o.WebRequestPriority.DontCare,this._defaultOptions.acceptType="*/*",this._defaultOptions.contentType="application/bond-compact-binary"}sendTelemetryEvents(e,t,i,o,s){let a={headers:{"Client-Id":"NO_AUTH","SDK-Version":"AWT-Web-JS"}};return n.isString(t)&&(a.headers["Content-Encoding"]="base64"),a.excludeEndpointUrl=!0,this.performApiPostDetailed(e,t,a).then((e=>{s(e.statusCode,e.headers)}),(e=>{!0===e.timedOut?i(e.statusCode,e.headers):o(e.statusCode,e.headers)}))}}t.default=s},72816:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getValueBySearchAndRecommendationPair=void 0;const n=i(96486),o=i(97691),s=i(89391),a=i(69156),r=i(69156),l=i(13159),c=i(40363),d=i(94214),u=i(53374),g="service-settings.skypegraph-search-policy";t.getValueBySearchAndRecommendationPair=({searchable:e,recommendable:t})=>e?t?a.SkypeGraphSearchPolicy.SEARCHABLE:a.SkypeGraphSearchPolicy.SEARCHABLE_NOT_RECOMMENDABLE:t?a.SkypeGraphSearchPolicy.NOT_SEARCHABLE_RECOMMENDABLE:a.SkypeGraphSearchPolicy.NOT_SEARCHABLE;class h extends l.SkypeRestClient{constructor(){super(s.default.getConfigSettingsNoSubscription().optionsService.productionHost),this._defaultOptions.mustHaveValidSkypeToken=!0,this._defaultOptions.acceptType="json"}_getHeaders(e){let t=super._getHeaders(e);return t["X-Skypetoken"]=d.default.getRawSkypeToken(),t["X-Skype-Version-ID"]=c.default.getUIVersion(),t["X-Microsoft-Skype-Chain-ID"]=u.default.newGuid(),t["X-Microsoft-Skype-Message-ID"]=u.default.newGuid(),t}getIncludeMeInSearchPrivacyOption(){return this.performApiGet(`v1/users/self/options/${g}`).then((e=>(e=>{switch(e){case a.SkypeGraphSearchPolicy.SEARCHABLE:return{searchable:!0,recommendable:!0};case a.SkypeGraphSearchPolicy.NOT_SEARCHABLE_RECOMMENDABLE:return{searchable:!1,recommendable:!0};case a.SkypeGraphSearchPolicy.SEARCHABLE_NOT_RECOMMENDABLE:return{searchable:!0,recommendable:!1};case a.SkypeGraphSearchPolicy.NOT_SEARCHABLE_NOT_RECOMMENDABLE:default:return{searchable:!1,recommendable:!1}}})(e?e.value:a.SkypeGraphSearchPolicy.NOT_SEARCHABLE_RECOMMENDABLE)))}setIncludeMeInSearchPrivacyOption({searchable:e,recommendable:i}){const n={value:(0,t.getValueBySearchAndRecommendationPair)({searchable:e,recommendable:i})};return this.performApiPut(`v1/users/self/options/${g}`,n)}getUiColorOption(){return this.performApiGet(`v1/users/self/options/${a.UiColorOptionName}`).then((e=>e&&e.value?e.value.color:void 0))}setUiColorOption(e){const t={value:{color:e}};return this.performApiPut(`v1/users/self/options/${a.UiColorOptionName}`,t)}getIsCallForwardingEnabledOption(){const e=this.performApiGet(`v1/users/self/options/${r.CallForwardingOptionName}`).then((e=>!(!e||!e.value)&&e.value.state===r.CallingOptionValues.Enabled)),t=this.performApiGet(`v1/users/self/options/${r.VoicemailOptionName}`).then((e=>!(!e||!e.value)&&e.value.state===r.CallingOptionValues.Enabled));return o.all([e,t]).then((e=>e[0]||e[1]))}getAvatarPolicy(){return this.performApiGet(`v1/users/self/options/${r.AvatarPolicyOptionName}`).then((e=>e?e.value:a.OptionsServiceAvatarPolicyValueType.BUDDIES_OR_AUTHORIZED_CAN_SEE))}setAvatarPolicy(e){const t={value:e};return this.performApiPutDetailed(`v1/users/self/options/${r.AvatarPolicyOptionName}`,t)}getProfileInformedUserData(){return this.performApiGet(`v1/users/self/options/${r.ProfileInformedUserOptionName}`)}setProfileInformedUserData(e){const t={value:e};return this.performApiPutDetailed(`v1/users/self/options/${r.ProfileInformedUserOptionName}`,t)}getEmailMissedContentOptions(){return this._getUserOptionsBatch(a.OptionServiceOptions.EmailMissedCallReminders,a.OptionServiceOptions.EmailMissedMessageReminders)}setEmailMissedContentOption(e,t){return this._setUserOption(e,t)}_getUserOptionsBatch(...e){const t=n.join(e,",");return this.performApiGet(`v1/users/self/options?names=${t}`)}_setUserOption(e,t){const i={value:t};return this.performApiPutDetailed(`v1/users/self/options/${e}`,i)}}t.default=new h},61369:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(62783),o=i(97691),s=i(89391),a=i(97811),r=i(36237),l=i(92210),c=i(35704),d=i(13159),u=i(81956),g=i(40363),h=i(53374),p="X-Skype-Request-Id";class m extends d.SkypeRestClient{constructor(){super(s.default.getConfigSettingsNoSubscription().rps.host),this._customErrorHandler=(e,t)=>{const i=t.requestOptions,o={statusCode:t.statusCode,statusText:t.statusText||"",date:t.headers.date||""};return 400===t.statusCode||401===t.statusCode||403===t.statusCode?(i.authTelemetry.failed("Request Failed",o),n.ErrorHandlingType.DoNotRetry):(i.authTelemetry.retry("Request Failed, will retry",o),n.ErrorHandlingType.RetryCountedWithBackoff)},this._defaultOptions.customErrorHandler=this._customErrorHandler,this._defaultOptions.priority=n.WebRequestPriority.Critical,this._defaultOptions.timeout=3e5,this._defaultOptions.retries=5}_getHeaders(e){let t=super._getHeaders(e);return t["X-Skype-Caller"]=g.default.getClientId(),t[p]=h.default.newGuid(),t}getSkypeAuthInfoFromRPSAccessToken(e){let t={scopes:"client",clientVersion:g.default.getUIVersion(),access_token:e,site_name:"lw"};const i={retries:5,timeout:3e5,priority:n.WebRequestPriority.Critical,authTelemetry:new c.default("RpsClient",l.ScenarioName.LoginAuth,{scenario:"skypeAuth",service:"RpsClient"})};return i.authTelemetry.begin(),this.performApiPostDetailed("rps/v1/rps/skypetoken",t,i).then((e=>{const t=e.body;if(!t){r.track(new a.FundamentalsDebugEmptyBodyEvent("RPS","getSkypeAuthInfoFromRPSAccessToken",e.requestHeaders[p],e.statusCode,e.statusText));const t={statusCode:e.statusCode||"",statusText:e.statusText||""};return i.authTelemetry.failed("Undefined response",t),o.Rejected(e)}return i.authTelemetry.succeeded(),{skypeId:t.skypeid,skypeToken:new u.default(t.skypetoken,Date.now()+1e3*t.expiresIn),signinName:t.signinname,anid:t.anid}}))}}t.default=new m},13159:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SkypeRestClient=void 0;const n=i(96486),o=i(16778),s=i(62783),a=i(97691),r=i(89391),l=i(44135),c=i(46096),d=i(36237),u=i(17791),g=i(94214);class h extends s.GenericRestClient{_blockRequestUntil(e){const t=r.default.getConfigSettingsNoSubscription().chat.maxSimultaneousRESTRequests;if(t){const e=u.default.getNetworkType(),i=t.maxRequestsByNetworkType&&t.maxRequestsByNetworkType[e]||t.defaultMaxRequests;i&&i!==s.SimpleWebRequestOptions.MaxSimultaneousRequests&&(s.SimpleWebRequestOptions.MaxSimultaneousRequests=i,d.log(c.LogTraceArea.GenericUnsafe,"Updated max simultaneous REST requests to "+i+" because current network type is "+o.Types.DeviceNetworkType[e]))}if(e.mustHaveValidSkypeToken&&!g.default.hasUsableSkypeToken())return d.log(c.LogTraceArea.GenericUnsafe,"Blocking GenericRestClient call until valid SkypeToken arrives..."),g.default.performWhenValidSkypeTokenArrives()}performRequest(e,t){const i={timeout:e.timeout,priority:e.priority,retries:e.retries};return this._performApiCall(e.path,e.method,e.passedData,n.extend(i,t))}_performApiCall(e,t,i,o){return super._performApiCall(e,t,i,o).then((e=>{if(null!==e.body)return e;const{checkCorruptNullBody:t}=r.default.getConfigSettingsNoSubscription().restClient;if(!t)return e;const i=e.headers["content-length"],o=Number(i);if(n.isNaN(o)||0===o||4===o)return e;if(24===o&&"gzip"===e.headers["content-encoding"])return e;let s=this.constructor.name;if(!s){const e=/function (.{1,})\(/.exec(this.constructor.toString());s=e&&e.length>1?e[1]:""}const l=Object.assign(Object.assign({},e),{timedOut:!1,canceled:!1,invalidNullBody:!0});return a.Rejected(l)}))}performRequestBackground(e,t,i,o){const s={timeout:i.timeout,priority:i.priority,retries:i.retries};return this._performApiCallBackground({backgroundType:e,backgroundContext:t,apiPath:i.path,action:i.method,postData:i.passedData,requestOptions:n.extend(s,o)})}_performApiCallBackground(e){let t=n.defaults({},e.requestOptions,this._defaultOptions);t.mustHaveValidSkypeToken&&(g.default.hasUsableSkypeToken()||d.error(c.LogTraceArea.GenericUnsafe,"API is supposed to have a valid skypetoken but does not"));const i=!t.overrideGetHeaders&&!t.headers,o=n.extend({},i?this._getHeaders(t):void 0,t.overrideGetHeaders,t.headers,t.augmentHeaders);t.contentType||(t.contentType=n.isString(e.postData)?"form":"json");const a=t.excludeEndpointUrl?e.apiPath:this._endpointUrl+e.apiPath,r={subscriberType:e.backgroundType,context:e.backgroundContext,action:e.action,url:a,headers:o,acceptType:s.SimpleWebRequest.mapContentType(t.acceptType||"json"),contentType:s.SimpleWebRequest.mapContentType(t.contentType),downloadToUri:e.downloadGetToUri,downloadToPublicFolder:!!e.downloadToPublicFolder,downloadPublicFolderUseSkypeFolder:!!e.downloadPublicFolderUseSkypeFolder,filename:e.filename,priority:t.priority,withCredentials:t.withCredentials,timeout:t.timeout,progressTimeout:t.progressTimeout,resumable:t.resumable,resumableUploadStatusUrl:t.resumableUploadStatusUrl,resumableAttemptsSoFar:t.resumableAttemptsSoFar};if(e.postData){const t=e.postData.uri;n.isObject(e.postData)&&t?r.postFileUri=t:r.postData=e.postData}return l.default.startTransfer(r)}}t.SkypeRestClient=h},127:e=>{e.exports=JSON.parse('[{"name":"callbase","fields":["CallId","CallDurationSeconds","ParticipantId","ConversationId","ToggleCameraCount","LocalMuteCount","LocalUnmuteCount","Origin","CallConversationMriNamespace","CallConnectionDurationMilliseconds"],"extends":"telemetryeventbase"},{"name":"calling_call","required":true,"fields":["CallingStack","IsMeetNow","IsGroupCall","IsPSTNCall","IsCallCreator","IsTranslatedCall","StartCaptioningCount","StopCaptioningCount","StartPstnTranslationAttemptCount","DidReceiveCaptions","FirstCaptionReceivedLengthSeconds","FailedCaptioningConfigCount","ReceiverSetupCount","ConversationId","StartVideoCount","StartScreenSharingCount","StopScreenSharingCount","StartSoundSharingCount","CancelScreenSharingCount","ScreenSharingDroppedCount","StartRecordingCount","StopRecordingCount","StartNdiCount","StopNdiCount","MaxConnectedParticipants","ToggleVideoSuccessfulCount","StartBackgroundBlurCount","StopBackgroundBlurCount","StartBackgroundEffectBlurCount","StopBackgroundEffectBlurCount","StartBackgroundEffectImageCount","StopBackgroundEffectImageCount","BingBackgroundEffectCaptionClickCount","ScreenShareControlSentControlRequestCount","ScreenShareControlRequestAcceptedCount","ScreenShareControlRequestDeniedCount","ScreenShareControlGrantedCount","HadNewCallStageEnabled","HadOldCallStageEnabled","AverageCallingStoreUpdateTime","Source","ZoomedInCount","ZoomedInDuration","ZoomedOutCount","ZoomDragUsed","ZoomUIControlsUsedCount","ZoomScrollWheelUsedCount","ZoomKeyboardUsedCount","ZoomTrackPadUsedCount","ShowShareTwinCamConnectionCount","TwinCamConnectionUsedCount","TwinCamConnectionFailedCount","StopTwinCamCount","AbleToStartTwinCam"],"extends":"callbase"},{"name":"mdsc_call_quality_feedback","required":true,"fields":["call_mos_score"],"extends":"telemetryeventbase"},{"name":"calling_call_entry_point","extends":"telemetryeventbase"},{"name":"calling_warm_call_notification","extends":"telemetryeventbase"},{"name":"calling_background_effects_settings","required":true,"fields":["EffectType","HasActiveCall","IsPredefinedImage","PredefinedImageName"],"extends":"telemetryeventbase"},{"name":"calling_background_effects_bing_click","extends":"telemetryeventbase"},{"name":"calling_bing_background_download_api","extends":"telemetryeventbase"},{"name":"callbackremindertapped","extends":"telemetryeventbase"},{"name":"calling_incoming_video_notification","extends":"telemetryeventbase"},{"name":"audiooutputdeviceswitcher","extends":"telemetryeventbase"},{"name":"calling_action","fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"BackgroundBlurEvent","fields":["CallId","BlurSessionDuration"]},{"name":"BackgroundEffectEvent","fields":["CallId"]},{"name":"CallKitError"},{"name":"CallKitSuccess"},{"name":"CallActionCalleeUserPresence"},{"name":"EnterFromCallCard"},{"name":"Error"},{"name":"InviteFreeDecline"},{"name":"PushNotification"},{"name":"TokenRequested"},{"name":"CallAddPhotosEvent","extends":"CallAddPhotosBaseEvent"},{"name":"CallAddPhotosWithFabEvent","extends":"CallAddPhotosBaseEvent"},{"name":"AddToCallEvent"},{"name":"CallAudioSettingsPopup"},{"name":"CallCaptioningEvent","fields":["Action","IsAutoJoin","CaptioningLengthSeconds","FistCaptionReceivedLengthSeconds","CallId","CaptioningSessionId","SpokenLanguage","SubtitleLanguage","OtherSpokenLanguage","FirstCaptionReceivedLengthSeconds"],"required":true},{"name":"CallPstnTranslationLanguageChangeEvent","fields":["CallId","CaptioningSessionId","PrevLanguage","Language","IsLocal"],"required":true},{"name":"CallCrash"},{"name":"CallDataChannelEvent"},{"name":"CallFullScreenBotError"},{"name":"CallAudienceEvent"},{"name":"CallGridViewEvent"},{"name":"CallMergeEvent"},{"name":"MuteEveryone"},{"name":"CallPreview"},{"name":"CallRecorderBotDebugEvent"},{"name":"CallRecordingEvent"},{"name":"InCallRosterSession"},{"name":"CallStageLayoutChange"},{"name":"CallTranslatorDebug"},{"name":"AddBotToCallInitiated","fields":["BotType","CallId"],"required":true},{"name":"AddBotToCallSucceeded","fields":["BotType","CallId","AddBotDurationInMs"],"required":true},{"name":"AddBotToCallFailed","fields":["BotType","CallId","AddBotDurationInMs","ErrorCode"],"required":true},{"name":"CallVideoSettingsPopup"},{"name":"CallViewMenuAction"},{"name":"CancelPreheatedCallNotJoined"},{"name":"CanvasAndRibbonActionsEvent"},{"name":"EndCallPopupMenuEvent"},{"name":"FallbackFromJoinPreheatedToRegularJoin"},{"name":"FullChatUX"},{"name":"InCallActivity"},{"name":"InCallReaction"},{"name":"InCallUFD"},{"name":"LocalVideoActionsEvent"},{"name":"MaybeEndCallFromAndroidBtScoDisconnect"},{"name":"MediaAction"},{"name":"MobileCallAnswerEvent"},{"name":"NdiBroadcastEvent"},{"name":"OverflowMenuOpened"},{"name":"RaiseHand"},{"name":"LowerMyHand"},{"name":"LowerOthersHand"},{"name":"RaisedHandListExpanded"},{"name":"RibbonSettingsMenuEvent"},{"name":"RingTheGroup"},{"name":"RinglessCallInterstitial"},{"name":"GetIcon"},{"name":"GetPreview"},{"name":"ScreenSharingStopped"},{"name":"SpeakerView"},{"name":"SystemHotKeyCall"},{"name":"TogetherModePanelAction"},{"name":"UnansweredCallActionEvent"},{"name":"VideoSuggestionTooltipEvent"},{"name":"Zoomed"},{"name":"PinCallParticipant","fields":["CallId"],"required":true},{"name":"UnpinCallParticipant","fields":["CallId"],"required":true},{"name":"ToggleCallTray","fields":["CallId","WasHidden"],"required":true},{"name":"CallAddPhotosBaseEvent"}]}},{"name":"captureactionbase","extends":"telemetryeventbase"},{"name":"navigationcapturescreen","extends":"captureactionbase"},{"name":"camera_action","fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"CameraVisibleTime"},{"name":"MarkupAdded"},{"name":"VideoReencode"},{"name":"CameraFailure","extends":"CameraEventBase"},{"name":"CameraFirstFrame","extends":"CameraEventBase"},{"name":"MediaCaptured","fields":["MediaCount","Success","FailureReason"],"extends":"CameraEventBase","required":true},{"name":"QRCodeScan"},{"name":"ColorFilterFailure"},{"name":"ColorFilterRenderDuration"},{"name":"CameraEventBase","fields":["Source"]}]}},{"name":"office_lens_lenssdk_launchlensandroid","required":true,"fields":["SessionId","LensSdkVersion","TelemetryEventTimestamp","CurrentWorkFlowType","CameraXBindUsecasesToPreview","IsEmbeddedLaunch","RecoveryMode","IsDexModeEnabled","IsInterimCropEnabled","IsMultiWindowEnabled","IsTalkBackEnabled","SDKMode","CameraXBindUsecasesApi","LaunchPerf"],"extends":"telemetryeventbase"},{"name":"office_lens_lenssdk_savemediaandroid","required":true,"fields":["SessionId","LensSdkVersion","TelemetryEventTimestamp","CurrentWorkFlowType","MediaId","FileSizeBeforeCleanUp","ImageWidthBeforeCleanUp","ImageHeightBeforeCleanUp","FileSizeAfterCleanUp","ImageWidthAfterCleanUp","ImageHeightAfterCleanUp","Source","ProcessMode","Filter","FileSizeAfterSave","Reason","Duration","TrimmedDuration","OriginalVideoFileSize"],"extends":"telemetryeventbase"},{"name":"office_lens_lenssdk_launchlensios","required":true,"fields":["Lens_SessionId","version","currentWorkflowId","LensEventName","defaultWorkflow","imageDPI","isExistingUser","isFirstLaunch","isResumeSession","launchReason","launchWorkflowItem","mediaCompressionFactor"],"extends":"telemetryeventbase"},{"name":"office_lens_lenssdk_savemediaios","required":true,"fields":["Lens_SessionId","version","currentWorkflowId","LensEventName","mediaId","source","mode","filter","imageSize","imageDPI","sizeinPixel","Ink","TextSticker","orignalImageSize","processedImageSize","VideoEntity","duration"],"extends":"telemetryeventbase"},{"name":"s4l_entitlement_experiments","fields":["Action","ExperimentName","ExperimentLocation","LayoutOption","UserEntitlementsSummary","IsFreeTrialAvailable","NavigateTo"],"extends":"telemetryeventbase"},{"name":"s4l_entitlement_ucux_cta","fields":["Action"],"extends":"telemetryeventbase"},{"name":"s4l_callerid","fields":["Action","Location","LayoutOption","TerminatedReasonName","PromptShownCount","MessageShownCount","DialpadShowCount","CampaignDurationDays","Type","Attempt"],"extends":"telemetryeventbase"},{"name":"s4l_failure_screen","required":true,"fields":["Action","Location"],"extends":"telemetryeventbase"},{"name":"s4l_component","fields":["Action","Location","Component"],"extends":"telemetryeventbase"},{"name":"s4l_taster_call_ended","fields":["Action","CallDuration","TerminatedReason"],"extends":"telemetryeventbase"},{"name":"credit_upsell","fields":["Action"],"extends":"telemetryeventbase"},{"name":"messaging_sms","required":true,"fields":["Action","ClientMessageId","ErrorCategory","Status"],"extends":"telemetryeventbase"},{"name":"s4l_dialpad","required":true,"fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"NavigateToDialpad","fields":["NavigationSource","UsePrefilledNumber"]},{"name":"PasteNumber"},{"name":"StartCall"},{"name":"EmergencyNumber"},{"name":"EmergencyCall","fields":["Action"],"required":true},{"name":"EmergencyCallFailed","fields":["Action"],"required":true},{"name":"EmergencyCallDefaultCountryChanged","fields":["Country"]},{"name":"DialerPanelComponentClick","fields":["Target","UserEntitlementsSummary"]},{"name":"SaveContactButtonShow"},{"name":"SaveContactSuceeded"},{"name":"SaveContactCancelled"},{"name":"ContactSelected"},{"name":"DefaultCountryStored","fields":["CountryOld","CountryNew"]},{"name":"TasterImageShown"},{"name":"E911Acknowledgement","fields":["Action"],"required":true},{"name":"E911LocationConsent","fields":["Action","IsGranted"],"required":true},{"name":"E911LocationUpdate","fields":["Action"],"required":true},{"name":"E911EmergencyContent","fields":["Action"],"required":true},{"name":"E911BingMaps","fields":["Action","StatusCode"],"required":true}]}},{"name":"monetization_ads","fields":["Action","AdsElapsedTime","ErrorCode","ErrorMessage"],"extends":"telemetryeventbase"},{"name":"s4l_atu","fields":["Action"],"extends":"telemetryeventbase"},{"name":"adid_provisioning","fields":["ad_id","MSACID"],"extends":"telemetryeventbase"},{"name":"s4l_offers","required":true,"fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"PromotionDetailsReceived","fields":["OfferType","InAppAllowed","GoLink"]},{"name":"PurchaseContinuationPanelOpened","fields":["Action","OfferType","CampaignRef"]},{"name":"RecommendedSubscriptionsLoaded","fields":["Action","CardsToShowCount","TotalCardsCount"],"required":true},{"name":"ContinueButtonClicked","fields":["CardType","Location","OfferType","CampaignRef","CardsToShowCount","isDefaultOpened"]},{"name":"OffersIntroductionButtonClick","fields":["Step"]},{"name":"CreditOfferOptionClick","fields":["CreditOffer","IsStacked","CreditPickerSize"]},{"name":"BuyCreditOfferOptionClick","fields":["CreditOffer","ButtonType","Location"]},{"name":"CreditPickerRenderingError","fields":["Action"],"required":true},{"name":"CreditPickerNoOffersToRender","fields":["Action","Location"],"required":true},{"name":"CreditPickerNoOffersRetryClick","fields":["Location"]},{"name":"SkypeNumberPanelOpened","fields":["Location"]},{"name":"SkypeNumberPurchaseFlowClick","fields":["ButtonClicked","DefaultClick"]},{"name":"SkypeNumberPurchaseFlowOptionClick","fields":["SkypeNumberOption"]},{"name":"SkypeNumberPurchaseFlowOptionSelected","fields":["SkypeNumberOption","OptionSelectedCountryRegion","OptionSelectedArea","OptionSelectedPrefix"]},{"name":"LoadingFinished","fields":["Action","Duration","Location","ClosedBeforeLoadingFinish","IsNative"],"required":true},{"name":"SkypeNumberGetClicked"},{"name":"SkypeNumberProfileGetClicked","fields":["Location"]},{"name":"SkypeNumberMeControlGetClicked"},{"name":"SkypeNumberListEntryClicked"},{"name":"SkypeNumberListGetClicked"},{"name":"SkypeNumberInfoClicked"},{"name":"SkypeNumberMeControlListEntryClicked"},{"name":"SkypeNumberProfileSectionViewed"},{"name":"SkypeNumberProfileSectionViewedNativeExperience"},{"name":"SkypeNumberProfileSectionClickedShowPurchaseFlow","fields":["Location"]},{"name":"SkypeNumberProfileSectionClickedShowListNumbers","fields":["Location"]},{"name":"SkypeNumberMeControlSectionViewed"},{"name":"SkypeNumberMeControlSectionViewedNativeExperience"},{"name":"SkypeNumberMeControlSectionClickedShowPurchaseFlow","fields":["Location"]},{"name":"SkypeNumberMeControlSectionClickedShowListNumbers","fields":["Location"]},{"name":"SkypeNumberPurchaseButtonClickedShowPurchaseFlow","fields":["Action","Location"]},{"name":"SkypeNumberRefreshedSkypeNumberTenTimes"},{"name":"SkypeNumberReservationSuceeded"},{"name":"SkypeNumberReservationFailed","fields":["Action"],"required":true},{"name":"SkypeNumberPurchaseEntryButtonShown","fields":["Location"]},{"name":"SkypeNumberLearnMoreButtonShown","fields":["Location"]},{"name":"SkypeNumberWebGetButtonShown","fields":["Location"]},{"name":"SkypeNumberFetchedAfterBuy","fields":["Action","FromBuyToFetchDuration"],"required":true},{"name":"SkypeNumberWasProvisioned","fields":["Action"],"required":true},{"name":"SkypeNumberCopyClicked"},{"name":"SkypeNumberDesktopShareClicked"},{"name":"SkypeNumberDesktopShareClickedOutlook"},{"name":"SkypeNumberDesktopShareClickedDefaultMail"},{"name":"SkypeNumberDesktopShareClickedGmail"},{"name":"SkypeNumberShareClicked"},{"name":"SkypeNumberShareError","fields":["Action"],"required":true},{"name":"SkypeNumberShareSuccess"},{"name":"SkypeNumberEmailClicked"},{"name":"SkypeNumberSettingsClicked"},{"name":"SkypeNumberManageClicked"},{"name":"SkypeNumberOverlayDisplayed"},{"name":"SkypeNumberPanelViewed"},{"name":"SkypeNumberDialogOpened"},{"name":"SkypeNumberActionClickedSettings"},{"name":"SkypeNumberActionClickedReactivate"},{"name":"SkypeNumberActionClickedExtend"},{"name":"SkypeNumberActionClickedIosSettings"},{"name":"SkypeNumberActionDialogClickedSettings"},{"name":"SkypeNumberActionDialogClickedReactivate"},{"name":"SkypeNumberActionDialogClickedExtend"},{"name":"SkypeNumberActionDialogClickedIosSettings"},{"name":"SkypeNumberCallerIdDisabled"},{"name":"SkypeNumberCallerIdEnabled"},{"name":"SkypeNumberCallerIdChanged"}]}},{"name":"s4l_stratus_commerce","required":true,"fields":["Action","ApiFunction","TimeSpent","Method","AcceptType","EndpointUrl","StatusCode","StratusStatusCode"],"extends":"telemetryeventbase"},{"name":"s4l_payments","required":true,"fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"gplay_step","fields":["step","supportsGooglePlay","supportsGooglePlaySubscriptions","errorCode","errorDomain","paymentStatus","product_id","product_price","product_currency","product_country","method","unexpectedCode","configuredProducts","receivedProducts"],"required":true},{"name":"gpay_step","fields":["step","errorCode","errorMessage"],"required":true},{"name":"payment_step","fields":["step","product_id","productIdentifier","paymentStatus","error","errorCode","errorDomain","errorBody","method","product_price","product_currency","product_country","code","transactionId","configuredProducts","received","identifier","location","billingPeriods","status"],"required":true},{"name":"purchase_step","fields":["step"]},{"name":"buy_credit_click","extends":"PurchaseIntentBase","required":true},{"name":"buy_subscription_click","extends":"PurchaseIntentBase","required":true},{"name":"buy_skypenumber_click","fields":["CountryRegion","Area","Prefix"],"extends":"PurchaseIntentBase","required":true},{"name":"purchase_dialog_open","fields":["Action","DialogId"],"required":true},{"name":"purchase_dialog_click","fields":["Action","DialogId","ButtonType"],"required":true},{"name":"fetch_native_product","fields":["Duration","IsSuccess","Error"]},{"name":"send_credit","fields":["Step"],"required":true},{"name":"PurchaseIntentBase","fields":["IsNative","Product","ProductCurrency","AppStoreCountry","TimeSpent","ButtonType"]}]}},{"name":"s4l_entitlement","required":true,"fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"RatesFetching","fields":["Action","Duration"],"required":true},{"name":"OrderPollNotificationReceived","fields":["Action","Reason"],"required":true},{"name":"OrderNotificationOrEntitlementsUpdated","fields":["Action","ConsumeTime","DidConsumeFail","DidBalanceUpdate","DidSubscriptionsUpdate","DidSkypeNumbersUpdate","Reason"],"required":true},{"name":"EntitlementIntegrationError","fields":["Action","Step","Description"],"required":true},{"name":"PushEtagExpired","fields":["Action","CurrentEtag","PushEtag","EtagDiff"],"required":true},{"name":"ReactivationStep","fields":["Step"]},{"name":"BalanceStateNavigation","fields":["NavigationSource","EntitlementsCombination","ContentShown"]},{"name":"BalanceStatePanelComponentClick","fields":["Target"]},{"name":"SubscriptionDetailsLinkClick","fields":["SubscriptionId"]},{"name":"SubscriptionUpgrade","fields":["Step","OriginSubscriptionId","UpgradeSubscriptionId","OriginSubscriptionMinutesLeft"]},{"name":"SubscriptionSearchComponentClick","fields":["Target","SearchedCountry"]},{"name":"SubscriptionSearchAction","fields":["SearchedCountry"]},{"name":"ManageSubscription","fields":["Step","SubscriptionId"]},{"name":"AADCPanelLoaded","fields":["navigationScreen","infoLinkClicked"],"required":true}]}},{"name":"s4l_entitlement_polling","fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"ServicesFetching","fields":["Duration"]},{"name":"BalanceStatePollNotificationReceived","fields":["Reason"]},{"name":"BalanceStatePollNotificationConsumed","fields":["ConsumeTime","DidConsumeFail","DidBalanceUpdate","DidSubscriptionsUpdate","DidSkypeNumbersUpdate","Reason"]}]}},{"name":"kpibase","fields":["DeviceInfo_Os_Version"],"extends":"telemetryeventbase"},{"name":"telemetryeventbase","fields":["Skype_InitiatingUser_IsGuest","Skype_InitiatingUser_Username","ShellType","PlatformType","Version","Platform_Id","Platform_Uiversion","session_id","ChatEndpointId","NetworkType","ecs_etag","AppInfo.ExperimentIds","DeviceInfo.Model","DeviceInfo.Make"],"extends":"ariabase"},{"name":"kpi_inapp_activity_start","required":true,"fields":["Entry_Point","IsUedEventProcessingEnabled"],"extends":"kpibase"},{"name":"messagecorrelationkpibase","fields":["Message_Correlation_Id","Registration_Id","Endpoint_Id","Conversation_Id","Client_Message_Id","Server_Message_Id","MriNamespace","ThreadSuffix"],"extends":"kpibase"},{"name":"kpi_message_sent","required":true,"fields":["Sending_Time","Queue_Time","Blocked_Time","Retry_Count","Message_Type","Message_RawType","Character_Count","Bot_Conversation"],"extends":"messagecorrelationkpibase"},{"name":"kpi_message_delivered","required":true,"fields":["Message_Type","MessageRawType","CorrelationVector","Message_Origin","OriginsCount","MessageAlreadySeen","Delivery_Timestamp","DeliveryDelay"],"extends":"messagecorrelationkpibase"},{"name":"ariabase","fields":["AppInfo.Version","AppInfo.Language","UserInfo.Language","UserInfo.TimeZone","UserInfo.Id","DeviceInfo.OsName","DeviceInfo.OsVersion","DeviceInfo.Id","DeviceInfo.BrowserName","DeviceInfo.BrowserVersion","EventInfo.Name","EventInfo.SdkVersion","EventInfo.Source","EventInfo.Time"]},{"name":"browser_calling_support","required":true,"fields":["Action","ErrorMessage"],"extends":"telemetryeventbase"},{"name":"fundamentals_database_error","required":true,"fields":["WebSQLCode","SQLiteCode","Message"],"extends":"telemetryeventbase"},{"name":"fundamentals_empty_body_debug","required":true,"fields":["RestClient","Scenario","RequestId","StatusCode","StatusText"],"extends":"telemetryeventbase"},{"name":"all_notification_registration","required":true,"fields":["Action","Code","Message","NetworkConnectivityLevel"],"extends":"telemetryeventbase"},{"name":"all_reencode_session","required":true,"fields":["State","ReencodeDuration","OriginalAssetFetchDuration","HasOverlay","ErrorType","ErrorInfo","VideoDuration","SourceWidth","SourceHeight","SourceFileSize","OutputWidth","OutputHeight","OutputFileSize","EstimatedFileSize","TransactionID"],"extends":"telemetryeventbase"},{"name":"all_notification","required":true,"fields":["Action","EventType","EventTypeName","SignedIn","TimeToProcess","CorrelationVector"],"extends":"telemetryeventbase"},{"name":"push_notification","required":true,"fields":["EventType","EventCode","MessageId","ClientMessageId","IsMyMessage","Result","MessageCorrelationId","ErrorCode","CorrelationVector"],"extends":"telemetryeventbase"},{"name":"awt_stats","required":true,"fields":["TenantId"],"extends":"ariabase"},{"name":"ecs_tsclient_fetch_config","required":true,"fields":["fetch_delay_ms","fetch_response_code","fetch_attempts","authenticated_user","url","fetch_duration_valid","cache_available","response_size","config_age","config_expired","fetch_start","fetch_end","is_user_config","fetched_etag","fetch_timed_out","fetch_response_parsing_error","fetch_error_message"]},{"name":"appcore_report_problem_dialog"},{"name":"ipad_cred_migiration","required":true,"fields":["isDone"],"extends":"telemetryeventbase"},{"name":"engagementtelemetryeventbase","fields":["Action","CampaignId","T_CampaignId","T_VariantId","T_Iteration"],"extends":"telemetryeventbase"},{"name":"engagement_popcard_event","required":true,"extends":"engagementtelemetryeventbase","variation":{"key":"Action","variants":[{"name":"PopCardDelivered","fields":["DeliveryTime","SentTime","DeliveryDuration","MessageId","MessageCorrelationId"],"required":true},{"name":"PopCardReceived","required":true},{"name":"PopCardDisplay","required":true},{"name":"PopCardTapButton","fields":["buttonIndex"],"required":true},{"name":"PopCardParseError"},{"name":"PopCardBulkSizeExceeded"},{"name":"PopCardClientVersionMismatch"},{"name":"PopCardCompleted"},{"name":"PopCardDiscardedOnFirstRun"},{"name":"PopCardDiscardedForChild"},{"name":"PopCardDismiss"},{"name":"PopCardExpand"},{"name":"PopCardExperimentNotAllocated"},{"name":"PopCardExperimentVariantMismatch"},{"name":"PopCardExpired"},{"name":"PopCardInvalidPlaceholder"},{"name":"PopCardMissingContent"},{"name":"PopCardReceivedControl"},{"name":"PopCardSuppressed"},{"name":"PopCardTapCard"},{"name":"PopCardTimeout"},{"name":"PopCardUnsupportedValidForPeriod"},{"name":"PopCardUnsupportedDelayForPeriod"},{"name":"PopCardEnqueued"},{"name":"PopCardDequeued"},{"name":"PopCardWrongLanguage"},{"name":"PopCardWrongPlatform"}]}},{"name":"engagement_notice_event","required":true,"extends":"engagementtelemetryeventbase","variation":{"key":"Action","variants":[{"name":"NoticeDelivered","fields":["DeliveryTime","SentTime","DeliveryDuration","MessageId","MessageCorrelationId"],"required":true},{"name":"NoticeReceived","required":true},{"name":"NoticeTapCard","required":true},{"name":"NoticeTapButton"},{"name":"NoticeBulkSizeExceeded"},{"name":"NoticeClientVersionMismatch"},{"name":"NoticeCompleted"},{"name":"NoticeDiscardedOnFirstRun"},{"name":"NoticeDiscardedForChild"},{"name":"NoticeDismiss"},{"name":"NoticeExperimentNotAllocated"},{"name":"NoticeExperimentVariantMismatch"},{"name":"NoticeExpired"},{"name":"NoticeInvalidPlaceholder"},{"name":"NoticeMissingContent"},{"name":"NoticeParseError"},{"name":"NoticeReceivedControl"},{"name":"NoticeTimeout"},{"name":"NoticeUnsupportedContentType"},{"name":"NoticeUnsupportedValidForPeriod"},{"name":"NoticeUnsupportedDelayForPeriod"},{"name":"NoticeEnqueued"},{"name":"NoticeDequeued"},{"name":"NoticeWrongLanguage"}]}},{"name":"engagement_push_notification_event","required":true,"extends":"engagementtelemetryeventbase","variation":{"key":"Action","variants":[{"name":"PushNotificationDelivered","fields":["DeliveryTime","SentTime","DeliveryDuration","MessageId","MessageCorrelationId"],"required":true},{"name":"PushNotificationReceived","required":true},{"name":"PushNotificationDisplayed","required":true},{"name":"PushNotificationTap","required":true},{"name":"PushNotificationClientVersionMismatch"},{"name":"PushDiscardedForChild"},{"name":"PushNotificationDismissedDueToActivity"},{"name":"PushNotificationDismissedOnFeatureCategory"},{"name":"PushNotificationDisplayFailed"},{"name":"PushNotificationExperimentNotAllocated"},{"name":"PushNotificationExperimentVariantMismatch"},{"name":"PushNotificationParseError"},{"name":"PushNotificationReceivedControl"},{"name":"PushNotificationSuppressed"},{"name":"PushNotificationTimestampParsingError"},{"name":"PushNotificationWrongLanguage"}]}},{"name":"engagement_pull_request","required":true,"fields":["DidSucceed","Source","FailureReason","CampaignId","CampaignVariant","RequestDurationMs","ServerStatusCode","MessageCorrelationId"],"extends":"telemetryeventbase"},{"name":"engagement_guest_upsell","required":true,"fields":["Action","Type"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"UpsellPanelPresented","required":true},{"name":"SisuStarted","required":true},{"name":"SisuFinished","required":true},{"name":"MeetNowFlowStarted"},{"name":"UnknownAction"}]}},{"name":"engagement_banner","required":true,"fields":["Action","BannerType"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"Displayed","required":true},{"name":"Clicked","required":true},{"name":"Dismissed"},{"name":"NotDisplayed"}]}},{"name":"engagement_tooltip","required":true,"fields":["Action","TooltipType"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"Display","required":true}]}},{"name":"engagement_settings","required":true,"fields":["Source","IsToggled"],"extends":"telemetryeventbase"},{"name":"engagement_coach_mark_event","required":true,"fields":["Action","CoachMarkType","Error","ErrorDescription"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"Open","required":true},{"name":"Close"},{"name":"Suppress","required":true}]}},{"name":"inviteuser","fields":["Status","Count"],"extends":"telemetryeventbase"},{"name":"contactinvite","fields":["Type","Origin"],"extends":"telemetryeventbase"},{"name":"engagement_feedback_event","extends":"engagementtelemetryeventbase"},{"name":"feedback_navigation","fields":["Target","IsFailure"],"extends":"telemetryeventbase"},{"name":"feedbackinitiated","extends":"telemetryeventbase"},{"name":"celebration_notification","fields":["Action","CampaignId","CardGuid","NumberOfTopContacts","DidIdentifyDifferentTopContacts","CelebratedUser"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"NotificationCreated"},{"name":"SelectedTopContactUserProfileIncomplete"},{"name":"PullCampaignContentServiceFailed"},{"name":"ContactCutOffLimitReached"},{"name":"NotificationAlreadyShown"}]}},{"name":"engagement_shareable_content","fields":["Action","CampaignId","TextInputEnabled","CarouselEnabled","OneClickSendEnabled","HasShareButton","SharesCount","HasUsedSearch","HasUsedCarousel","HasSharedTextMsg","CardsShareCount","CardsShared"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"OpenDialog"},{"name":"CloseDialog"},{"name":"DismissDialog"}]}},{"name":"engagement_message","fields":["Action","MessageType","MessageCorrelationId","MessageId","ConversationId"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"BotMessageServiceConvSyncFailBricked"},{"name":"BotMessageServiceConvSyncFailNoMeta"},{"name":"BotMessageServiceConvSyncFailNoProgress"},{"name":"BotMessageServiceUnsupportedMessageType"},{"name":"BotMessageServiceWaitingMessage"},{"name":"ChatServiceBlockedMessage"},{"name":"TelemetryObjectNotFound"},{"name":"InvalidPlatformListInPayload"},{"name":"InvalidClientVersionInPayload"}]}},{"name":"engagement_client_triggered_campaigns","fields":["Action","IsOfflineTargeted","CampaignId","CampaignVariant","CampaignVersion","NewCampaignsCount","UpdatedCampaignsCount","DeletedCampaignsCount","DurationInMs","Status","MessageCorrelationId"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"New"},{"name":"Update"},{"name":"Delete"},{"name":"Finished"},{"name":"LoadCampaign"},{"name":"LoadingCampaign"},{"name":"OpenCampaign"},{"name":"Reset"}]}},{"name":"join_conversation","extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"JoinGroupConversation","fields":["ExistingMember","IsMeetNowThread"],"extends":"JoinTelemetryEventBase","required":true},{"name":"AddMemberToThreadError","fields":["StatusCode","StatusText","ContextId","ErrorCode","ErrorMessage"],"extends":"JoinTelemetryEventBase","required":true},{"name":"JoinTelemetryEventBase","fields":["Action","JoinLinkOrigin","PreSisu","NavigationConversationOrigin","BrowserOrigin","ConversationId"]}]}},{"name":"join_guest","extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"GuestCreationError","fields":["RequestId","TimedOut","StatusCode","Url"],"extends":"GuestJoinTelemetryEventBase","required":true},{"name":"GuestCreationSuccess","extends":"GuestJoinTelemetryEventBase","required":true},{"name":"GuestLoginAvailable","extends":"GuestJoinTelemetryEventBase","required":true},{"name":"GuestLoginAttempt","extends":"GuestJoinTelemetryEventBase","required":true},{"name":"GuestMeetingCreationServiceError","extends":"GuestCreationServiceErrorEvent","required":true},{"name":"GuestJoinTelemetryEventBase","fields":["Action"]},{"name":"GuestCreationServiceErrorEvent","fields":["RequestId","TimedOut","StatusCode","Url"]}]}},{"name":"join_link_resolution","extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"JoinLinkResolutionError","fields":["ResolutionError"],"extends":"JoinLinkResolutionTelemetryEventBase","required":true},{"name":"ShortIdResolutionServiceSuccess","extends":"ShortIdResolutionServiceEventBase","required":true},{"name":"ShortIdResolutionServiceError","fields":["RequestId","TimedOut","StatusCode"],"extends":"ShortIdResolutionServiceEventBase","required":true},{"name":"JoinLinkResolutionTelemetryEventBase","fields":["Action"]},{"name":"ShortIdResolutionServiceEventBase","fields":["ShortId","ConversationId"],"extends":"JoinLinkResolutionTelemetryEventBase"}]}},{"name":"join_link_retrieval","fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"JoinLinkRetrievalServiceSuccess","extends":"JoinLinkRetrievalServiceEventBase","required":true},{"name":"JoinLinkRetrievalServiceError","fields":["RequestId","IsTimedOut","StatusCode","Url"],"extends":"JoinLinkRetrievalServiceEventBase","required":true},{"name":"JoinLinkRetrievalServiceEventBase","fields":["ConversationId","ShortId"]}]}},{"name":"navigation_deeplink","fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"OpenDeepLink","fields":["JoinLinkPath"],"extends":"DeepLinkTelemetryEventBase","required":true},{"name":"DeepLinkTelemetryEventBase"}]}},{"name":"calling_meet_now","fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"MeetNowUriReceived","fields":["Origin","Partner"],"required":true},{"name":"MeetNowDeeplinkProcessed","fields":["Origin","Partner"],"required":true},{"name":"MeetNowError","fields":["MeetNowError","MeetNowErrorCode"],"required":true},{"name":"MeetNowClick","fields":["ClickType"],"required":true},{"name":"MeetNowLobbyMounted","fields":["Origin","Partner"],"required":true},{"name":"MeetNowRepeatedGuestLogin","required":true},{"name":"MeetNowClosePanel"},{"name":"MeetNowCreatedOnJoinLinkPanel"},{"name":"MeetNowJoinLinkPanelClosed"},{"name":"MeetNowAddSkypeContact"},{"name":"MeetNowMeetingNameManuallyChanged","required":true},{"name":"MeetNowUserNameChanged","required":true},{"name":"MeetNowAvatarPickerOpen","required":true},{"name":"MeetNowAvatarNotSelected","required":true},{"name":"MeetNowAvatarSelected","fields":["SelectedAvatarType","EmoticonsSelectedBeforeUpload","StickersSelectedBeforeUpload"],"required":true},{"name":"MeetNowTitleSelected","fields":["MeetingName","Category","WasSuggested"],"required":true},{"name":"MeetNowSharePopupCloseEvent"},{"name":"MeetNowJoinLinkInSearchBarEvent"}]}},{"name":"conversationtelemetrybase","fields":["ConversationId","IsBotConversation","IsGroupConversation","IsEncryptedConversation","IsBookmarkConversation","IsMeetNowThread","MriNamespace","ThreadSuffix"],"extends":"telemetryeventbase"},{"name":"messagetelemetrybase","fields":["MessageCorrelationId","MessageType","MessageRawType","IsOwnMessage"],"extends":"conversationtelemetrybase"},{"name":"message_sent","required":true,"fields":["ReceiverMri","ReceiverUserId","ClientMessageId","EndpointId","RegistrationId","OneOnOneThreadId","CharacterCount","PostSource","EmoticonCount","NativeEmojiCount","HasWikiMarkup"],"extends":"messagetelemetrybase"},{"name":"message_read","required":true,"extends":"messagetelemetrybase","optionalFields":["MessageType"]},{"name":"reactionactiontelemetrybase","extends":"messagetelemetrybase","optionalFields":["IsOwnMessage"]},{"name":"reaction_action","extends":"reactionactiontelemetrybase"},{"name":"reaction_summary_click","extends":"reactionactiontelemetrybase"},{"name":"messaging_reaction","fields":["Action"],"extends":"reactionactiontelemetrybase","variation":{"key":"Action","variants":[{"name":"ReactionAdded","fields":["Success","Origin"],"required":true},{"name":"ReactionRemoved","fields":["Success","Origin"],"required":true}]}},{"name":"chat_service_force_sync","required":true,"fields":["Reason","ForceSyncSuccess"],"extends":"telemetryeventbase"},{"name":"chat_service_failure","required":true,"fields":["scenario","mriType","StatusCode","StatusText","error_code","ErrorMessage","context_id","ServerTime","Connection_Type","Canceled","TimedOut","CorrelationVector","source","threadType","Partner","propKey"],"extends":"telemetryeventbase"},{"name":"chat_service_app_internal_failure","required":true,"fields":["NetworkType","WasNetworkingAvailable"],"extends":"chat_service_failure"},{"name":"ams_failure","required":true,"fields":["service_name","scenario","status_code","request_id","correlation_id","transaction_id"],"extends":"telemetryeventbase"},{"name":"download_service","required":true,"fields":["operation","failure_source","time_to_failure","number_retries","status_code","status_text","requestId","correlationId","transactionId"],"extends":"telemetryeventbase"},{"name":"file_sent","required":true,"fields":["Message_Type","Size","Source","Success","UploadDuration","Extension","NumOfConvs","Reason","ViewId","DocId","FinishedAttemptsCount","ResponseStatusCode"],"extends":"kpibase"},{"name":"file_received","required":true,"fields":["Success","DownloadDuration","Intent","MediaProfile","Extension","ViewId","DocId","FailureReason","Size","DownloadSpeed","FinishedAttemptsCount","ResponseStatusCode","ErrorInfo"],"extends":"kpibase"},{"name":"basepostingfailure","fields":["failure_source","post_source","num_of_convs","time_to_failure","number_retries","status_code","status_text","file_size","file_type","TriggeredBy","correlationId","transactionId","error_code","error_message","context_id","date"],"extends":"telemetryeventbase"},{"name":"send_failure","required":true,"fields":["is_permanent"],"extends":"basepostingfailure"},{"name":"send_recovered","required":true,"extends":"basepostingfailure"},{"name":"messaging_avatarpicker","fields":["Action","TriggeredBy"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"PESAvatarChanged","fields":["IsSuccess","IsUserAvatar","ErrorType","ErrorCode"],"required":true}]}},{"name":"messaging_pes","extends":"telemetryeventbase"},{"name":"messaging_pesitem","extends":"telemetryeventbase"},{"name":"messaging_pes_backgroundcolor","extends":"telemetryeventbase"},{"name":"people_presence","required":true,"fields":["Origin","IsSuccess","RetriesCount","ErrorCode","ErrorMessage"],"extends":"telemetryeventbase"},{"name":"people_presence_error","required":true,"fields":["Origin"],"extends":"telemetryeventbase"},{"name":"people_syncaddressbookdialog","required":true,"fields":["DidPressNextOnValueProp","DidHavePermission","DidPromptBefore","DidRequestPermission","DidGrantPermission","DidStartSync","DidVisitPrivacyStatement","DidSeeLearnMoreButton","DidVisitLearnMorePopup"],"extends":"onboardingdialogevent"},{"name":"people_contacts_action","fields":["Action","Status"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"GetContacts","fields":["IsFromServer","ErrorCode"],"required":true}]}},{"name":"reportmessage","extends":"telemetryeventbase"},{"name":"reportmessagefailure","required":true,"fields":["ErrorCode"],"extends":"telemetryeventbase"},{"name":"settings_privacy","fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"ManageSearchOpened"},{"name":"ReceiveContactSuggestions"},{"name":"AppearInSuggestionResults"},{"name":"AppearInSearchResults"},{"name":"PhoneDiscoverability"},{"name":"SendFullTelemetry","fields":["DidGrantPermission","Origin"],"required":true}]}},{"name":"randomlysampledkpibase","extends":"kpibase"},{"name":"kpi_longpoll_complete","required":true,"fields":["EventCountTotal","RequestDuration","ActiveTimeout"],"extends":"randomlysampledkpibase"},{"name":"kpi_longpoll_failed","required":true,"fields":["ResponseCode","RequestDuration","DidProcessEvents","ActiveTimeout"],"extends":"randomlysampledkpibase"},{"name":"chat_service_bundle_processing_failure","required":true,"fields":["description"],"extends":"telemetryeventbase"},{"name":"kpi_chatsync_failed","required":true,"fields":["response_code"],"extends":"randomlysampledkpibase"},{"name":"kpi_chatsync_complete","required":true,"fields":["sync_time","ran_in_background","synced_conversations","synced_messages","is_first_sync","is_full_sync"],"extends":"randomlysampledkpibase"},{"name":"messaging_e2ee","fields":["Action","Status","Reason"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"Invite","fields":["Origin"]},{"name":"Accept","fields":["Origin"]},{"name":"Confirm","fields":["IsAutoConfirm"],"required":true},{"name":"Reject","fields":["RejectionReason"],"required":true},{"name":"Retry","fields":["RetryType"],"required":true},{"name":"EncryptionFailure","required":true},{"name":"DecryptionFailure","required":true}]}},{"name":"messaging_network","fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"CaptivePortal","fields":["RequestSuccess","CheckResult","ConnectedBefore","CheckBefore","StatusText","IsTimeout"],"required":true},{"name":"CaptivePortalBrowserOpen"},{"name":"ConnectivityAlertShow","fields":["AlertType"]},{"name":"ConnectivityAlertDismiss","fields":["AlertType"]},{"name":"CaptivePortalQuestionnaire"}]}},{"name":"people_census","required":true,"fields":["ConversationsCountTotal","ConversationsCountDisplayable","ConversationsCountDisplayed","RecentListConversationsCount","RecentListSkype1on1ConversationsCount","RecentListSkypeGroupConversationsCount","RecentListSkypeBotConversationsCount","RecentListPstnConversationsCount","RecentListPrivateConversationsCount","RecentListConversationsWithTabsCount","RecentListOtherConversationsCount","Muted1on1ConversationsCount","MutedGroupConversationsCount","SmartMutedConversationsCount","TranslatedConversationsCount","ManuallyAddedContactsCount","BlockedContactsCount","BotsContactsCount","FavoritesContactsCount","AllNonBlockedContactsCount","OneWayShortCircuitContactsCount","TwoWayShortCircuitContactsCount","PstnContactsCount","EngagedContactsCount","AllShownContactsCount","RemovedAuthorizedContactsCount"],"extends":"telemetryeventbase"},{"name":"messaging_toast","fields":["Action","ToastType","IsGroupConversation","ConversationId"],"extends":"telemetryeventbase"},{"name":"messaging_notification","required":true,"fields":["NotificationAction","IsSystemNotification"],"extends":"messaging_toast"},{"name":"messaging_search","fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"OpenedMessageSearch"},{"name":"ClosedMessageSearch"},{"name":"TriggeredLoadMoreMessages"},{"name":"NavigatedToPrevResult"},{"name":"NavigatedToNextResult"}]}},{"name":"unsafe_domain","extends":"telemetryeventbase"},{"name":"messaging_share_to_skype","required":true,"fields":["Action","IsSharedToContact","ErrorCode","IsSendingVideo","IsSendingImage","Type"],"extends":"telemetryeventbase"},{"name":"invitestelemetryevents","fields":["Origin","InviteType"],"extends":"telemetryeventbase"},{"name":"people_invite_link_shared","extends":"invitestelemetryevents"},{"name":"people_invite_link_revoked","required":true,"fields":["InviteType","RequestDuration","ErrorCode","ErrorMessage","IsSuccess"],"extends":"invitestelemetryevents"},{"name":"profile","fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"MyMoodEdited","fields":["MoodCharCount","UpdateLocation","IsSuccess","ErrorCode","Duration"],"required":true}]}},{"name":"messaging_action","fields":["Action","Origin","TimeToActionDuration","DocId"],"extends":"messagetelemetrybase","variation":{"key":"Action","variants":[{"name":"Forward","fields":["SkypeConversationCount","PrivateConversationCount","SmsConversationCount"],"required":true},{"name":"ShareFile","fields":["IsShared","Error","FileExtension"],"required":true},{"name":"Quote","extends":"QuotesEventTelemetry","required":true},{"name":"ClearQuote","extends":"QuotesEventTelemetry","required":true},{"name":"KeyboardCopy","extends":"KeyboardMessagesTelemetry","required":true},{"name":"KeyboardPaste","extends":"KeyboardMessagesTelemetry","required":true},{"name":"SelectMessages","extends":"SelectedMessagesTelemetry","required":true},{"name":"Cancel","required":true},{"name":"CancelRejected","required":true},{"name":"RetryFailed","required":true},{"name":"ShowReportedMessage","required":true},{"name":"Copy","required":true},{"name":"CopyLink","required":true},{"name":"Delete","required":true},{"name":"Edit","required":true},{"name":"MarkMessageUnread","required":true},{"name":"DismissActionMenu","required":true},{"name":"DragDropFromConversationToRecentLists","required":true},{"name":"AddBookmark","required":true},{"name":"RemoveBookmark","required":true},{"name":"QuotesEventTelemetry","fields":["QuotesTriggerType"]},{"name":"KeyboardMessagesTelemetry","fields":["MessagesCount"]},{"name":"SelectedMessagesTelemetry","fields":["SelectedMessagesCount","SelectedMessagesAction","ForwardToConversationCount","SelectedMessagesDisabledCopy","SelectedMessagesDisabledRemove","SelectedMessagesDisabledForward"]}]}},{"name":"onboardingtelemetryeventbase","fields":["IsNewUser"],"extends":"telemetryeventbase"},{"name":"onboarding_setup","fields":["DialogOrigin"],"extends":"onboardingtelemetryeventbase","variation":{"key":"Action","variants":[{"name":"started","fields":["DialogOrigin","AppState","StepSequence","NotificationsPermission","CameraPermission","MicrophonePermission","ContactsPermission"],"extends":"SetupWizardEventBase","required":true},{"name":"avatar_changed","fields":["ChangeType","Success","Duration","DialogOrigin"],"extends":"SetupWizardEventBase","required":true},{"name":"finished","fields":["Duration","DialogOrigin","Success","StepSequence"],"extends":"SetupWizardEventBase","required":true},{"name":"bugReportedInWizard","fields":["DialogOrigin"],"extends":"SetupWizardEventBase"},{"name":"clickedOutside","fields":["DialogOrigin"],"extends":"SetupWizardEventBase"},{"name":"user_profile_change","extends":"SetupWizardEventBase"},{"name":"SetupWizardEventBase"}]}},{"name":"onboarding_user_status","required":true,"fields":["AvatarPolicy","AvatarState","SetupWizardCompletionTimestamp","UserIsNew","NotificationsPermission","CameraPermission","MicrophonePermission","ContactsPermission"],"extends":"telemetryeventbase"},{"name":"dialogevent","fields":["Origin","Duration","OnboardingDisplayOrder","OnboardingStepsCount","Exit","IsNewUser"],"extends":"telemetryeventbase"},{"name":"onboardingdialogevent","extends":"dialogevent"},{"name":"settings_avatarpickerdialog","fields":["DidHaveInitialAvatar","DidHaveFinalAvatar","DidSetNewAvatar","DidRemoveAvatar","DidUseCommonAvatarPicker","AvatarSource","DidRequestCameraPermission","DidGrantCameraPermission","DidRequestCameraRollPermission","DidGrantCameraRollPermission"],"extends":"onboardingdialogevent"},{"name":"settings_avsettingsdialog","fields":["DialogType","DidChangeCameraSetting","DidChangeMicSetting","DidChangeSpeakerSetting","DidChangeSpeakerVolume","DidChangeRingingDeviceSetting","DidAdjustMicrophone","DidChangeMicAutoAdjustment","ShouldAutoAdjustMic","DidPerformAudioTest","DidPerformTestCall"],"extends":"onboardingdialogevent"},{"name":"settings_promptpermissiondialog","fields":["DidAlreadyPropmptNotificationsPermission","DidAlreadyPropmptMicPermission","DidAlreadyPropmptCameraPermission","DidRequestNotificationsPermission","DidRequestMicPermission","DidRequestCameraPermission","DidGrantNotificationsPermission","DidGrantMicPermission","DidGrantCameraPermission","DidNotificationPermissionRequestFailed","DialogVersion"],"extends":"onboardingdialogevent"},{"name":"onboarding_postsetup","extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"tutorialLaunched","fields":["Origin","IsRestarted"],"extends":"OnboardingPostSetupEventBase"},{"name":"emptyStateCtaDisplayed","fields":["Origin"],"extends":"OnboardingPostSetupEventBase"},{"name":"welcomeViewWithProfileUpdateDisplayed","extends":"OnboardingPostSetupEventBase"},{"name":"welcomeViewWithCardsDisplayed","extends":"OnboardingPostSetupEventBase"},{"name":"finishSetupPromptClicked","extends":"OnboardingPostSetupEventBase"},{"name":"activityDone","fields":["ActivityType"],"extends":"OnboardingPostSetupEventBase"},{"name":"SetupWizardEventBase"},{"name":"OnboardingPostSetupEventBase"}]}},{"name":"onboarding_homescreen","fields":["Action","IsNewUser"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"LandingPageShown","extends":"HomeScreenEventBase"},{"name":"StartNewConversationClicked","extends":"HomeScreenEventBase"},{"name":"SwitchAccountClick","extends":"CheckAccountSectionEventBase"},{"name":"CheckAccountSectionUnknownSignId","fields":["OriginalVariant"],"extends":"CheckAccountSectionEventBase"},{"name":"HomeScreenEventBase"},{"name":"CheckAccountSectionEventBase","fields":["Variant"],"extends":"HomeScreenEventBase"}]}},{"name":"onboarding_landing_page_with_cards","fields":["CardName","ActionPerformed"],"extends":"onboardingtelemetryeventbase"},{"name":"settings_themedialog","fields":["DidToggleLightDarkTab","DidSelectNewTheme","FinalTheme"],"extends":"onboardingdialogevent"},{"name":"settings_optionaltelemetryconsentdialog","extends":"onboardingdialogevent"},{"name":"perf","required":true,"fields":["Scenario","Duration","IsZeroTermSearch","Endpoint","SearchLimit","ErrorCode","ErrorMessage","WasNetworkAvailable","AdditionalLoading","QueryLength","Origin","SearchResultsListOrigin","RequestStepDuration","PublicDirectoryRequestDuration","MessageRequestDuration","IndexedDbRequestDuration","BotsRequestDuration","AllPeopleRequestDuration","FastContactsRequestDuration","MessageInConversationRequestDuration"],"extends":"telemetryeventbase"},{"name":"pluginlessbaseevent","fields":["uiVersion","clientVersion","vdiVersion","userAgent","userType","UserRole","clientType","buildtime","appState","pageVisible","flights","theme","preferredLocales","locale","localeResolution","dbOpen","host","authType","sessionId","identitytype","rtlMode","MSACID","UserInfo_Id","AppInfo.Version","AppInfo.ExperimentIds","CorrelationId","DeviceInfo.OsVersion","DeviceInfo.BrowserName","DeviceInfo.BrowserVersion","DeviceInfo.OsName","DeviceInfo.Id","EventInfo.Name","EventInfo.SdkVersion","EventInfo.Source","EventInfo.Time","UserInfo.Language","UserInfo.TimeZone","UserInfo.Id"]},{"name":"mdsc_webrtc_session_initial","required":true,"fields":["TerminatedReason","TerminatedState","participant_id","endpoint_id","media_leg_id","ts_calling_version","Extensions_WebRTCStats_recvCounters_video","Extensions_WebRTCStats_recvCounters_sharing","Extensions_WebRTCStats_ssrc_audio_send_audioInputLevel","Extensions_WebRTCStats_ssrc_audio_send_googResidualEchoLikelihoodRecentMax","Extensions_WebRTCStats_ssrc_audio_send_googEchoCancellationEchoDelayMedian","Extensions_WebRTCStats_ssrc_audio_send_googEchoCancellationEchoDelayStdDev","Extensions_WebRTCStats_ssrc_audio_send_googEchoCancellationReturnLoss","Extensions_WebRTCStats_ssrc_audio_send_googCodecName","Extensions_WebRTCStats_ssrc_audio_send_totalAudioEnergy","Extensions_WebRTCStats_ssrc_audio_send_ssrc","Extensions_WebRTCStats_ssrc_audio_send_googTypingNoiseState","Extensions_WebRTCStats_ssrc_audio_send_googEchoCancellationReturnLossEnhancement","Extensions_WebRTCStats_ssrc_audio_send_packetsSent","Extensions_WebRTCStats_ssrc_audio_send_bytesSent","Extensions_WebRTCStats_ssrc_audio_send_totalSamplesDuration","Extensions_WebRTCStats_ssrc_audio_send_packetsLost","Extensions_WebRTCStats_ssrc_audio_send_googRtt","Extensions_WebRTCStats_ssrc_audio_send_googJitterReceived","Extensions_WebRTCStats_bweStat_googActualEncBitrate","Extensions_WebRTCStats_bweStat_googAvailableSendBandwidth","Extensions_WebRTCStats_ssrc_audio_send_googResidualEchoLikelihood","Extensions_WebRTCStats_bweStat_googAvailableReceiveBandwidth","Extensions_WebRTCStats_bweStat_googTargetEncBitrate","Extensions_WebRTCStats_bweStat_googBucketDelay","Extensions_WebRTCStats_bweStat_googTransmitBitrate","Extensions_WebRTCStats_bweStat_googRetransmitRate","Extensions_WebRTCStats_statsErrors","Extensions_WebRTCStats_ssrc_audio_recv_googCaptureStartNtpTimeMs","Extensions_WebRTCStats_ssrc_audio_recv_packetsLost","Extensions_WebRTCStats_ssrc_audio_recv_googSecondaryDecodedRate","Extensions_WebRTCStats_ssrc_audio_recv_googDecodingPLC","Extensions_WebRTCStats_ssrc_audio_recv_packetsReceived","Extensions_WebRTCStats_ssrc_audio_recv_googJitterReceived","Extensions_WebRTCStats_ssrc_audio_recv_googDecodingCNG","Extensions_WebRTCStats_ssrc_audio_recv_googPreferredJitterBufferMs","Extensions_WebRTCStats_ssrc_audio_recv_googSpeechExpandRate","Extensions_WebRTCStats_ssrc_audio_recv_totalSamplesDuration","Extensions_WebRTCStats_ssrc_audio_recv_totalAudioEnergy","Extensions_WebRTCStats_ssrc_audio_recv_googDecodingPLCCNG","Extensions_WebRTCStats_ssrc_audio_recv_googCodecName","Extensions_WebRTCStats_ssrc_audio_recv_googDecodingNormal","Extensions_WebRTCStats_ssrc_audio_recv_googSecondaryDiscardedRate","Extensions_WebRTCStats_ssrc_audio_recv_googAccelerateRate","Extensions_WebRTCStats_ssrc_audio_recv_bytesReceived","Extensions_WebRTCStats_ssrc_audio_recv_googCurrentDelayMs","Extensions_WebRTCStats_ssrc_audio_recv_googExpandRate","Extensions_WebRTCStats_ssrc_audio_recv_googPreemptiveExpandRate","Extensions_WebRTCStats_ssrc_audio_recv_googJitterBufferMs","Extensions_WebRTCStats_ssrc_audio_recv_googDecodingMuted","Extensions_WebRTCStats_ssrc_video_send_packetsSent","Extensions_WebRTCStats_ssrc_video_send_packetsLost","Extensions_WebRTCStats_ssrc_video_send_hugeFramesSent","Extensions_WebRTCStats_ssrc_video_send_framesEncoded","Extensions_WebRTCStats_ssrc_video_send_googCodecName","Extensions_WebRTCStats_ssrc_video_send_codecImplementationName","Extensions_WebRTCStats_ssrc_video_send_qpSum","Extensions_WebRTCStats_ssrc_video_send_googContentType","Extensions_WebRTCStats_ssrc_video_send_googFrameRateInput","Extensions_WebRTCStats_ssrc_video_send_googFrameRateSent","Extensions_WebRTCStats_ssrc_video_send_googFrameWidthInput","Extensions_WebRTCStats_ssrc_video_send_googFrameHeightInput","Extensions_WebRTCStats_ssrc_video_send_googFrameWidthSent","Extensions_WebRTCStats_ssrc_video_send_googFrameHeightSent","Extensions_WebRTCStats_ssrc_video_send_googNacksReceived","Extensions_WebRTCStats_ssrc_video_send_googEncodeUsagePercent","Extensions_WebRTCStats_ssrc_video_send_googAvgEncodeMs","Extensions_WebRTCStats_ssrc_video_send_googCpuLimitedResolution","Extensions_WebRTCStats_ssrc_video_send_googBandwidthLimitedResolution","Extensions_WebRTCStats_ssrc_video_send_googHasEnteredLowResolution","Extensions_WebRTCStats_ssrc_video_send_googAdaptationChanges","Extensions_WebRTCStats_ssrc_video_send_googPlisReceived","Extensions_WebRTCStats_ssrc_video_send_googFirsReceived","Extensions_WebRTCStats_ssrc_video_send_googRtt","Extensions_Video_send_DurationSeconds","Extensions_Video_send_QpAvg","Extensions_Video_send_frameRateAvg","Extensions_Video_send_bitrateAvg","Extensions_Video_send_bitrateMax","Extensions_Video_send_DelayCur","Extensions_Video_send_DelayAvg","Extensions_Video_send_TimeSinceLastEncodeStart","Extensions_Video_send_AllocateBWAvg","Extensions_Video_send_CaptureFramerateAvg","Extensions_Video_send_MaxCapabilities","Extensions_Video_send_CameraOpenWidth","Extensions_Video_send_CameraOpenHeight","Extensions_Video_send_OvershootEvents","Extensions_Video_send_OvershootDurations","Extensions_Video_send_FreezeIntervals","Extensions_Video_send_KeyFrameStats","Extensions_WebRTCStats_ssrc_video_recv_googContentType","Extensions_WebRTCStats_ssrc_video_recv_googCaptureStartNtpTimeMs","Extensions_WebRTCStats_ssrc_video_recv_googTargetDelayMs","Extensions_WebRTCStats_ssrc_video_recv_packetsLost","Extensions_WebRTCStats_ssrc_video_recv_googDecodeMs","Extensions_WebRTCStats_ssrc_video_recv_googFrameHeightReceived","Extensions_WebRTCStats_ssrc_video_recv_googFrameRateOutput","Extensions_WebRTCStats_ssrc_video_recv_packetsReceived","Extensions_WebRTCStats_ssrc_video_recv_googRenderDelayMs","Extensions_WebRTCStats_ssrc_video_recv_googMaxDecodeMs","Extensions_WebRTCStats_ssrc_video_recv_googFrameWidthReceived","Extensions_WebRTCStats_ssrc_video_recv_codecImplementationName","Extensions_WebRTCStats_ssrc_video_recv_googInterframeDelayMax","Extensions_WebRTCStats_ssrc_video_recv_googCodecName","Extensions_WebRTCStats_ssrc_video_recv_googFrameRateReceived","Extensions_WebRTCStats_ssrc_video_recv_framesDecoded","Extensions_WebRTCStats_ssrc_video_recv_googNacksSent","Extensions_WebRTCStats_ssrc_video_recv_googFirsSent","Extensions_WebRTCStats_ssrc_video_recv_bytesReceived","Extensions_WebRTCStats_ssrc_video_recv_googCurrentDelayMs","Extensions_WebRTCStats_ssrc_video_recv_googFrameRateDecoded","Extensions_WebRTCStats_ssrc_video_recv_googJitterBufferMs","Extensions_WebRTCStats_ssrc_video_recv_googPlisSent","Extensions_WebRTCStats_ssrc_video_recv_googFirstFrameReceivedToDecodedMs","Extensions_WebRTCStats_ssrc_video_recv_qpSum","Extensions_AudioTransportRecvBitrate","Extensions_AudioTransportSendBitrate","Extensions_AudioPayloadSendBitrate","Extensions_AudioPayloadRecvBitrate","Extensions_VideoPayloadSendBitrate","Extensions_VideoPayloadRecvBitrate","Extensions_TimerAudioTransportRecvBitrate","Extensions_TimerAudioTransportSendBitrate","Extensions_TimerVideoPayloadRecvBitrate","Extensions_TimerVideoPayloadSendBitrate","Extensions_StartTime","Extensions_EndTime","Extensions_MaxSessionBandwidth","Extensions_OfferedSrtp","Extensions_NegotiatedSrtp","Extensions_IceConnectionState","Extensions_IceConnectionStatePrevious","Extensions_SignalingState","Extensions_SignalingStatePrevious","Extensions_ReportedSendBWMin","Extensions_RelayCandidate","Extensions_Bandwidth_JumpsHistogram","Extensions_ReportedSendBWMax","Extensions_IceTransportPolicy","Extensions_IceServers","Extensions_FakeIceCandidate","Extensions_iceCandidateErrors","Extensions_BweType","Extensions_SdpSemantics","Extensions_BundlePolicy","Extensions_H264_available_profiles","Extensions_Video_recv_DurationSeconds","Extensions_Video_recv_QpAvg","Extensions_Video_recv_frameRateAvg","Extensions_Video_recv_bitrateAvg","Extensions_Video_recv_bitrateMax","Extensions_Video_recv_TimeSinceLastDecodeStart","Extensions_Video_recv_FreezeHistogram","Extensions_Video_recv_FreezeTimestamps","Extensions_Video_recv_LongestFreezeDuration","Extensions_Video_recv_RecvAvgFreezeDuration","Extensions_Video_recv_TotalFreezeDuration","Extensions_Video_recv_OngoingFreeze","Extensions_Video_recv_NumResolutionSwitches","Extensions_Video_recv_PreferredResolution","Extensions_Video_recv_ResolutionDurations","Extensions_Video_recv_StreamsMin","Extensions_Video_recv_StreamsMax","Extensions_Video_recv_StreamsMode","Extensions_WebRTCStats_ssrc_sharing_recv_transport_localCertificateId","Extensions_Video_SubscriptionEvents","metrics_SessionId","metrics_CallNumber","metrics_NoIceCandidatesBadEventCount","metrics_NoIceCandidatesGoodEventCount","metrics_NoRelayIceCandidatesBadEventCount","metrics_NoRelayIceCandidatesGoodEventCount","metrics_CameraInUseBadEventCount","metrics_CameraInUseGoodEventCount","metrics_MicrophoneInUseBadEventCount","metrics_MicrophoneInUseGoodEventCount","metrics_CameraFreezeStartEventCount","metrics_CameraFreezeEndEventCount","metrics_RetargetIncomingCount","metrics_RetargetOutgoingCount","metrics_RetargetCompletedCount","metrics_ReconnectAttemptedCount","metrics_EscalationRejectedCount","metrics_ScreenSharingIncomingDecoderFailureCount","metrics_ScreenSharingIncomingDecoderFailureRecoverDelta","metrics_ScreenSharingIncomingDecoderResetCount","metrics_CreationTime","metrics_InitTime","metrics_TerminationTime","metrics_CallDuration","metrics_InitialNegotiationType","metrics_InitialNegotiationCompleted","metrics_NegotiationCount","metrics_RejectedNegotiationCount","metrics_MediaLegId","metrics_MultiParty","metrics_ErrorType","metrics_ErrorDetail","metrics_TerminationReason_code","metrics_TerminationReason_subCode","metrics_TerminationReason_phrase","metrics_TerminationReason_remoteTerminated","metrics_TerminationReason_clientReasonSubCode","metrics_TerminationReason_resultCategories","metrics_IncompatibleOffer","metrics_DtmfSuccess","metrics_DtmfFailure","metrics_Relay","metrics_RelayManager","metrics_AllowedAudioSend","metrics_AllowedVideoSend","metrics_AllowedScreensharingSend","metrics_IceInitTime","metrics_FinalAnswerTime","metrics_IceConnectedStateTime","metrics_UsedMicrophone","metrics_UsedSpeaker","metrics_UsedCamera","metrics_DeviceSelectionChangeCount","metrics_DevicesChangeCount","metrics_DevicesPollChangeCount","metrics_DevicesCount","metrics_ETag","metrics_ConfigIds","metrics_AllowedSharingSend","metrics_CallMutedRatio","metrics_CallOsMuted","metrics_CallHwSilent","metrics_CallSwMuted","metrics_CallSpeakerMuted","metrics_CallIsSpeaking","metrics_NetworkRecvGood","metrics_NetworkRecvPoor","metrics_NetworkRecvBad","metrics_NetworkSendGood","metrics_NetworkSendPoor","metrics_NetworkSendBad","metrics_NetworkRecvGoodRatio","metrics_NetworkRecvPoorRatio","metrics_NetworkRecvBadRatio","metrics_NetworkSendGoodRatio","metrics_NetworkSendPoorRatio","metrics_NetworkSendBadRatio","metrics_DeviceEvents","metrics_DeviceList","metrics_DeviceListDebug","metrics_PermissionStates","metrics_ReconnectInProgress","metrics_TransportReconnectedCount","metrics_ReconnectAttempts","metrics_UFDs","metrics_MediaQosEnabled","metrics_PortRangeConfigured","metrics_RollbackNegotiation"],"extends":"pluginlessbaseevent"},{"name":"mdsc_webrtc_session","required":true,"fields":["Extensions_WebRTCStats_ssrc_sharing_send_packetsSent","Extensions_WebRTCStats_ssrc_sharing_send_bytesSent","Extensions_WebRTCStats_ssrc_sharing_send_transport_selectedCandidatePairId"],"extends":"mdsc_webrtc_session_initial"},{"name":"skypecosi_concore_web_csa_conversation_callmodality","required":true,"fields":["Type","ResultDetail","ResultValue","ParticipantId","EndpointId"],"extends":"pluginlessbaseevent","optionalFields":["theme","UserRole","uiVersion","sessionId","identitytype","host","authType","rtlMode","vdiVersion"]},{"name":"scenario","fields":["ScenarioName","ScenarioId"],"extends":"telemetryeventbase","variation":{"key":"ScenarioName","variants":[{"name":"LoginAuth","fields":["ScenarioAction_service","ScenarioAction_scenario","ScenarioAction_errorName","ScenarioAction_statusCode"],"extends":"RequestReliabilityTrackerBase","required":true},{"name":"AppStartup","fields":["ScenarioAction_currentIntent","ScenarioAction_intentBased","ScenarioAction_step_name_phase0","ScenarioAction_step_name_phase1","ScenarioAction_step_name_phase2","ScenarioAction_step_name_phase3","ScenarioAction_step_name_phase4","ScenarioAction_step_name_phase5"],"extends":"TelemetryScenarioTracker","required":true},{"name":"AppStartupIntent","fields":["ScenarioAction_AppState","ScenarioAction_StartupContext","ScenarioAction_ColdStartup","ScenarioAction_ColdStartup_step_duration","ScenarioAction_ColdStartup_total_duration","ScenarioAction_intentBased","ScenarioAction_reason","ScenarioAction_Phase0_step_duration","ScenarioAction_Phase0_total_duration","ScenarioAction_Phase1_step_duration","ScenarioAction_Phase1_total_duration","ScenarioAction_Phase2_step_duration","ScenarioAction_Phase2_total_duration","ScenarioAction_Phase3_step_duration","ScenarioAction_Phase3_total_duration","ScenarioAction_Phase4_step_duration","ScenarioAction_Phase4_total_duration","ScenarioAction_Phase5_step_duration","ScenarioAction_Phase5_total_duration","ScenarioAction_CheckAppState_step_duration","ScenarioAction_CheckAppState_total_duration","ScenarioAction_StartedProcessingLocalNotification_step_duration","ScenarioAction_StartedProcessingLocalNotification_total_duration","ScenarioAction_StartedProcessingPush_step_duration","ScenarioAction_StartedProcessingPush_total_duration","ScenarioAction_PushProcessingComplete_step_duration","ScenarioAction_PushProcessingComplete_total_duration","ScenarioAction_IncomingCallPush_step_duration","ScenarioAction_IncomingCallPush_total_duration","ScenarioAction_NotifyingCallee_step_duration","ScenarioAction_NotifyingCallee_total_duration","ScenarioAction_DisplayIncomingCallNotification_step_duration","ScenarioAction_DisplayIncomingCallNotification_total_duration","ScenarioAction_PresentIncomingRing_step_duration","ScenarioAction_PresentIncomingRing_total_duration","ScenarioAction_CallPanelRendered_step_duration","ScenarioAction_CallPanelRendered_total_duration","ScenarioAction_WillNavigateToRecents_step_duration","ScenarioAction_WillNavigateToRecents_total_duration","ScenarioAction_RecentsWillMount_step_duration","ScenarioAction_RecentsWillMount_total_duration","ScenarioAction_ConversationListPanelRendered_step_duration","ScenarioAction_ConversationListPanelRendered_total_duration","ScenarioAction_RecentsRendered_step_duration","ScenarioAction_RecentsRendered_total_duration","ScenarioAction_WillNavigateToChat_step_duration","ScenarioAction_WillNavigateToChat_total_duration","ScenarioAction_MessaggeStreamRendered_step_duration","ScenarioAction_MessaggeStreamRendered_total_duration","ScenarioAction_WillNavigateToDialpad_step_duration","ScenarioAction_WillNavigateToDialpad_total_duration","ScenarioAction_DialpadRendered_step_duration","ScenarioAction_DialpadRendered_total_duration"],"extends":"TelemetryScenarioTracker","required":true},{"name":"TimeToConnected","fields":["ScenarioAction_ConnectionType","ScenarioAction_ReasonForConnecting"],"extends":"TelemetryScenarioTracker","required":true},{"name":"AnswerCall","fields":["ScenarioName"],"extends":"TelemetryScenarioTracker","required":true},{"name":"HtmlNotification","extends":"TelemetryScenarioTracker","required":true},{"name":"Responsiveness","fields":["ScenarioAction_cause"],"extends":"TelemetryScenarioTracker","required":true},{"name":"ResponsivenessSelectHubTab","fields":["ScenarioAction_cause","ScenarioAction_tab"],"extends":"TelemetryScenarioTracker","required":true},{"name":"CreateMeetNow","fields":["ScenarioAction_EntryPoint","ScenarioAction_Partner","ScenarioAction_ConversationId","ScenarioAction_step_name_startnewmeetnow","ScenarioAction_step_name_meetnowpanelready","ScenarioAction_step_name_meetnowpanelclosed","ScenarioAction_step_name_startmeetnowbuttonclicked","ScenarioAction_step_name_callstarted","ScenarioAction_step_name_callmade"],"extends":"TelemetryScenarioTracker","required":true},{"name":"JoinMeetNow","fields":["ScenarioAction_Partner","ScenarioAction_EntryPoint","ScenarioAction_IsMeetNow","ScenarioAction_ConversationId","ScenarioAction_step_name_validjoinlinkentered","ScenarioAction_step_name_userisconversationparticipant","ScenarioAction_step_name_lobbynavigationstarted","ScenarioAction_step_name_meetnowpanelready","ScenarioAction_step_name_meetnowpanelclosed","ScenarioAction_step_name_startorjoinmeetnowbuttonclicked","ScenarioAction_step_name_callstarted","ScenarioAction_step_name_callmade"],"extends":"TelemetryScenarioTracker","required":true},{"name":"StreamFrom","fields":["ScenarioAction_origin","ScenarioAction_browserOrigin"],"extends":"TelemetryScenarioTracker","required":true},{"name":"NewGroupChat","fields":["ScenarioAction_NewGroupChatNavOrigin","ScenarioAction_AvatarSelected","ScenarioAction_ParticipantsCount","ScenarioAction_VisitedParticipantPicker","ScenarioAction_VisitedSetConvInfoPanel","ScenarioAction_ExistingConversationFound","ScenarioAction_WizardSteps","ScenarioAction_step_name_funnelcompleted","ScenarioAction_step_name_funneldropped","ScenarioAction_step_name_conversationcreated"],"extends":"TelemetryScenarioTracker","required":true},{"name":"EmoticonPesPickerOpen","fields":["ScenarioAction_step_name_finished_keyboard_seen","ScenarioAction_step_name_finished_first_item_load","ScenarioAction_step_name_finished_open","ScenarioAction_totalCount"],"extends":"TelemetryScenarioTracker","required":true},{"name":"EmergencyRestoreEndpoints","fields":["ScenarioAction_step_name_GotSkypeToken","ScenarioAction_step_name_MarkEndpointsMissing","ScenarioAction_step_name_EndpointRestored","ScenarioAction_step_name_PushSubscriptionRestored","ScenarioAction_step_name_TimedOut","ScenarioAction_step_name_Failed","ScenarioAction_step_name_Ignored"],"extends":"TelemetryScenarioTracker","required":true},{"name":"PerfScenarioTracker","fields":["ScenarioAction_step_name_started","ScenarioAction_error_description"]},{"name":"TelemetryScenarioTracker","fields":["ScenarioAction_step_name","ScenarioAction_step_duration","ScenarioAction_total_duration","ScenarioAction_is_final","ScenarioAction_target_duration_ms"],"extends":"PerfScenarioTracker"},{"name":"RequestReliabilityTrackerBase","fields":["ScenarioAction_requestId","ScenarioAction_attempt"],"extends":"TelemetryScenarioTracker"}]}},{"name":"sisutelemetryeventbase","fields":["IsFirstTimeSignIn"],"extends":"telemetryeventbase"},{"name":"sisu_welcome_screen","required":true,"fields":["Action","IsMSASignUpWebViewLoaded"],"extends":"sisutelemetryeventbase","variation":{"key":"Action","variants":[{"name":"WelcomeScreenLoaded","required":true},{"name":"GetStartedPanelLoaded","required":true},{"name":"LetsGoButtonClicked"},{"name":"NeedHelpClicked"},{"name":"LoginFlowStarted","required":true},{"name":"CreateAccountFlowStarted","required":true},{"name":"CreateAccountFlowCanceled","required":true}]}},{"name":"sisu_app_entry_start","required":true,"fields":["Method"],"extends":"sisutelemetryeventbase"},{"name":"sisu_app_entry","required":true,"fields":["Method"],"extends":"sisutelemetryeventbase"},{"name":"sisu_msa_signup_funnel","required":true,"fields":["FunnelPageName","ErrorCode"],"extends":"sisutelemetryeventbase"},{"name":"sisu_msa_signin_funnel","required":true,"fields":["FunnelPageName","ErrorCode"],"extends":"sisutelemetryeventbase"},{"name":"sisu_msa_interrupt_handler","required":true,"fields":["Action"],"extends":"sisutelemetryeventbase","variation":{"key":"Action","variants":[{"name":"RefreshTokenStored","required":true},{"name":"UserSwitchedAccounts","required":true},{"name":"UserSignedIn","required":true}]}},{"name":"sisu_sso_screen","required":true,"fields":["Action"],"extends":"sisutelemetryeventbase","variation":{"key":"Action","variants":[{"name":"SsoTokenSignIn","extends":"SsoTokenWithPackageIdBase","required":true},{"name":"SsoTokenAutoRefreshed","extends":"SsoTokenWithPackageIdBase","required":true},{"name":"SsoTokenInterrupted","extends":"SsoTokenWithPackageIdBase","required":true},{"name":"SsoTokenSignedIn","extends":"SsoTokenWithPackageIdBase","required":true},{"name":"SsoTokenWithPackageIdBase","fields":["ProviderPackageId"]}]}},{"name":"sisu_refreshtoken_error","required":true,"fields":["ErrorCode","TokenSource","ErrorName","ErrorMessage"],"extends":"sisutelemetryeventbase"},{"name":"sisu_auto_signin","required":true,"fields":["Action","IsFirstTimeSignIn"],"extends":"sisutelemetryeventbase","variation":{"key":"Action","variants":[{"name":"ExtraSignInStarted"},{"name":"WAMCacheInvalidated","required":true},{"name":"WAMLoginFailure","required":true},{"name":"WAMLoginCompleted","required":true},{"name":"WAMTokenRequested","extends":"WAMTokenEventBase","required":true},{"name":"WAMTokenRetrieved","extends":"WAMTokenEventBase","required":true},{"name":"WAMTokenRetrievalFailure","fields":["ErrorCode","ErrorMessage","HResult"],"extends":"WAMTokenEventBase","required":true},{"name":"WAMTokenEventBase","fields":["IsRefreshRequest","SignInSource","WamCorrelationId"]}]}},{"name":"sisu_auth_background_refresh","required":true,"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"RefreshScheduled","extends":"AuthBackgroundRefreshBaseEvent","required":true},{"name":"UpdateTriggered","extends":"AuthBackgroundRefreshBaseEvent","required":true},{"name":"HasValidToken","extends":"AuthBackgroundRefreshBaseEvent","required":true},{"name":"AuthBackgroundRefreshBaseEvent","fields":["Action"]}]}},{"name":"sisu_login_logout","fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"RedirectToLogin","fields":["Reason","ErrorCode","TimeSinceLastRefresh","ErrorCorrelationId"],"extends":"LoginLogoutEventBase","required":true},{"name":"StartupError","fields":["Error"],"extends":"LoginLogoutEventBase","required":true},{"name":"Logout","fields":["Reason","IsSaveCredentials"],"extends":"LoginLogoutEventBase","required":true},{"name":"KeychainFailure","fields":["Error","FailureType","TokenType"],"extends":"LoginLogoutEventBase","required":true},{"name":"TokenIssue","fields":["TokenType","TokenIssueType","Source"],"extends":"LoginLogoutEventBase","required":true},{"name":"LoginLogoutEventBase"}]}},{"name":"sisu_phone_verification","fields":["Stage","Error"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"UIStart","extends":"PnvTelemetryEventBase","required":true},{"name":"MsaPhoneAccrualStart","extends":"PnvTelemetryEventBase","required":true},{"name":"MsaPhoneAccrualVerified","extends":"PnvTelemetryEventBase","required":true},{"name":"MsaPhoneAccrualRegistered","extends":"PnvTelemetryEventBase","required":true},{"name":"MsaEmailAccrualVerified","extends":"PnvTelemetryEventBase","required":true},{"name":"MsaEmailAccrualRegistered","extends":"PnvTelemetryEventBase","required":true},{"name":"MsaPhoneAccrualCancelled","extends":"PnvTelemetryEventBase","required":true},{"name":"MsaPhoneAccrualError","extends":"PnvTelemetryEventBase","required":true},{"name":"NeedVerification","extends":"PnvTelemetryEventBase"},{"name":"PnvTelemetryEventBase","fields":["Action"]}]}},{"name":"sisu_qso","extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"Started","extends":"QuickSignOnTelemetryBaseEvent","required":true},{"name":"AutoRefreshed","extends":"QuickSignOnTelemetryBaseEvent","required":true},{"name":"Interrupted","extends":"QuickSignOnTelemetryBaseEvent","required":true},{"name":"SignedIn","extends":"QuickSignOnTelemetryBaseEvent","required":true},{"name":"AccountListFetched","fields":["AccountListSize"],"extends":"QuickSignOnTelemetryBaseEvent","required":true},{"name":"QuickSignOnTelemetryBaseEvent","fields":["Action"]}]}},{"name":"sisu_guest_meetnow","required":true,"fields":["SisuPageName","IsPresentedAsMainCTAButton"],"extends":"sisutelemetryeventbase"},{"name":"sisu_msa_profile_fetch","required":true,"fields":["AgeGroup","ErrorStatus"],"extends":"telemetryeventbase"},{"name":"sisu_migrated_t1_credentials","fields":["Type","Step","WLIDErrorCode","WebErrorStatusCode","WebErrorShortName"],"extends":"telemetryeventbase"},{"name":"sisu_converged_msa","fields":["Action"],"extends":"telemetryeventbase","variation":{"key":"Action","variants":[{"name":"CallInterruptAvoided","extends":"ConvergedMsaEventBase"},{"name":"NotificationInterruptAvoided","extends":"ConvergedMsaEventBase"},{"name":"BackgroundInterruptAvoided","extends":"ConvergedMsaEventBase"},{"name":"UnexpectedRetrySuccess","extends":"ConvergedMsaEventBase"},{"name":"ConvergedMsaEventBase"}]}}]')}}]);